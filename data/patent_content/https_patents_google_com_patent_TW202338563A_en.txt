TW202338563A - Save-restore engine for access control - Google Patents
Save-restore engine for access control Download PDFInfo
- Publication number
- TW202338563A TW202338563A TW111131478A TW111131478A TW202338563A TW 202338563 A TW202338563 A TW 202338563A TW 111131478 A TW111131478 A TW 111131478A TW 111131478 A TW111131478 A TW 111131478A TW 202338563 A TW202338563 A TW 202338563A
- Authority
- TW
- Taiwan
- Prior art keywords
- component
- sre
- configuration data
- local memory
- save
- Prior art date
Links
- 238000000034 method Methods 0.000 claims abstract description 27
- 230000000977 initiatory effect Effects 0.000 claims abstract description 3
- 238000011084 recovery Methods 0.000 claims description 64
- 230000004044 response Effects 0.000 claims description 38
- 238000013507 mapping Methods 0.000 description 17
- 238000002955 isolation Methods 0.000 description 9
- 238000010586 diagram Methods 0.000 description 8
- 238000012545 processing Methods 0.000 description 7
- 238000004590 computer program Methods 0.000 description 6
- 230000008569 process Effects 0.000 description 6
- 230000007246 mechanism Effects 0.000 description 4
- 230000003068 static effect Effects 0.000 description 4
- 238000004891 communication Methods 0.000 description 3
- 239000003999 initiator Substances 0.000 description 3
- 230000014759 maintenance of location Effects 0.000 description 3
- 230000002093 peripheral effect Effects 0.000 description 3
- 238000004321 preservation Methods 0.000 description 3
- 238000012546 transfer Methods 0.000 description 3
- XUIMIQQOPSSXEZ-UHFFFAOYSA-N Silicon Chemical compound [Si] XUIMIQQOPSSXEZ-UHFFFAOYSA-N 0.000 description 2
- 239000000872 buffer Substances 0.000 description 2
- 238000004806 packaging method and process Methods 0.000 description 2
- 238000013515 script Methods 0.000 description 2
- 238000000926 separation method Methods 0.000 description 2
- 230000011664 signaling Effects 0.000 description 2
- 229910052710 silicon Inorganic materials 0.000 description 2
- 239000010703 silicon Substances 0.000 description 2
- 239000000758 substrate Substances 0.000 description 2
- 238000013459 approach Methods 0.000 description 1
- 230000005540 biological transmission Effects 0.000 description 1
- 230000001413 cellular effect Effects 0.000 description 1
- 230000008859 change Effects 0.000 description 1
- 238000005056 compaction Methods 0.000 description 1
- 230000006835 compression Effects 0.000 description 1
- 238000007906 compression Methods 0.000 description 1
- 230000001010 compromised effect Effects 0.000 description 1
- 230000006837 decompression Effects 0.000 description 1
- 230000006870 function Effects 0.000 description 1
- 230000003287 optical effect Effects 0.000 description 1
- 230000000644 propagated effect Effects 0.000 description 1
Classifications
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F1/00—Details not covered by groups G06F3/00 - G06F13/00 and G06F21/00
- G06F1/26—Power supply means, e.g. regulation thereof
- G06F1/30—Means for acting in the event of power-supply failure or interruption, e.g. power-supply fluctuations
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F1/00—Details not covered by groups G06F3/00 - G06F13/00 and G06F21/00
- G06F1/26—Power supply means, e.g. regulation thereof
- G06F1/32—Means for saving power
- G06F1/3203—Power management, i.e. event-based initiation of a power-saving mode
- G06F1/3234—Power saving characterised by the action undertaken
- G06F1/3287—Power saving characterised by the action undertaken by switching off individual functional units in the computer system
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F11/00—Error detection; Error correction; Monitoring
- G06F11/07—Responding to the occurrence of a fault, e.g. fault tolerance
- G06F11/14—Error detection or correction of the data by redundancy in operation
- G06F11/1402—Saving, restoring, recovering or retrying
- G06F11/1415—Saving, restoring, recovering or retrying at system level
- G06F11/1441—Resetting or repowering
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F21/00—Security arrangements for protecting computers, components thereof, programs or data against unauthorised activity
- G06F21/60—Protecting data
- G06F21/62—Protecting access to data via a platform, e.g. using keys or access control rules
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F12/00—Accessing, addressing or allocating within memory systems or architectures
- G06F12/02—Addressing or allocation; Relocation
- G06F12/0223—User address space allocation, e.g. contiguous or non contiguous base addressing
- G06F12/0292—User address space allocation, e.g. contiguous or non contiguous base addressing using tables or multilevel address translation means
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F12/00—Accessing, addressing or allocating within memory systems or architectures
- G06F12/14—Protection against unauthorised use of memory or access to memory
- G06F12/1458—Protection against unauthorised use of memory or access to memory by checking the subject access rights
- G06F12/1483—Protection against unauthorised use of memory or access to memory by checking the subject access rights using an access-table, e.g. matrix or list
Abstract
Description
本說明書係關於具有積體電路裝置之系統。This specification relates to systems with integrated circuit devices.
一系統單晶片(SoC)係整合一運算裝置之不同組件之一積體電路，其可包含例如一中央處理單元(CPU)、記憶體、輸入/輸出埠、蜂巢式無線電及輔助儲存器等。與傳統的基於主機板之PC架構(其中一主機板容置及連接可拆卸或可更換組件)相比，SoC將全部此等組件整合至一單一積體電路中。SoC通常用於行動運算、邊緣運算及嵌入式系統中，諸如智慧型電話、平板電腦、WiFi路由器、物聯網(IoT)裝置等。A system on a chip (SoC) is an integrated circuit that integrates different components of a computing device, which may include, for example, a central processing unit (CPU), memory, input/output ports, cellular radio, and auxiliary storage. Compared to traditional motherboard-based PC architecture, in which a motherboard houses and connects removable or replaceable components, an SoC integrates all of these components into a single integrated circuit. SoCs are commonly used in mobile computing, edge computing and embedded systems, such as smartphones, tablets, WiFi routers, Internet of Things (IoT) devices, etc.
一SoC可包含一或多個子系統，且各子系統可包含複數個模組，例如，用戶端裝置。例如，模組可包含一記憶體映射資源或一I/O映射資源。該等模組可彼此隔離，且可屬於不同安全領域，此意謂系統假定該等裝置彼此不信任。因此，各模組可使用控制裝置上之哪些其他模組可與該模組通信之裝置及組態資訊來實施。An SoC may include one or more subsystems, and each subsystem may include a plurality of modules, such as client devices. For example, a module may contain a memory mapped resource or an I/O mapped resource. The modules can be isolated from each other and can belong to different security domains, which means the system assumes that the devices do not trust each other. Therefore, each module can be implemented using device and configuration information that controls which other modules on the device can communicate with the module.
當一SoC或一模組失去其電力且接著重新獲得電力時，例如，歸因於一裝置進入睡眠，關於哪些模組可與哪些其他模組通信之組態資訊需要以一安全方式從一保存狀態恢復。When an SoC or a module loses its power and then regains it, for example, due to a device going to sleep, configuration information about which modules can communicate with which other modules needs to be saved in a secure manner. Status restored.
本說明書描述用於實施一安全保存恢復引擎(SRE)之技術，該SRE用於在系統斷電或關閉組件以節省電力之一電力崩潰事件期間保存及恢復一運算裝置中之組件之組態資料。SRE可利用在電力崩潰事件期間通電之一隔離本端記憶體，此可防止受損或不可信程式碼修改所保存組態資料。SRE之一個應用係保存及恢復管控系統之哪些組件被容許與哪些其他組件通信之存取控制(AC)組件或暫存器之組態資料。This specification describes techniques for implementing a Secure Save Recovery Engine (SRE) for saving and restoring configuration data for components in a computing device during a power crash event in which the system is powered off or shuts down components to conserve power. . SRE can isolate local memory by using one that is powered on during a power failure event. This prevents compromised or untrusted code from modifying saved configuration data. One application of SRE is to save and restore configuration data of access control (AC) components or registers that govern which components of the system are allowed to communicate with which other components.
本說明書中描述之標的物可在特定實施例中實施以實現以下優點之一或多者。本說明書中描述之保存恢復引擎(SRE)可實施一更安全、基於硬體之狀態機以執行一運算裝置中之組件(例如，AC組件或其他暫存器)之組態資料之保存及恢復。SRE經組態以在電力崩潰事件期間使用具有永遠開啟或備用電力軌之一隔離本端記憶體。本端記憶體之隔離保護組態資料免受SoC上之不可信組件之存取。另外，本端記憶體之隔離使其免受受損應用軟體之影響。The subject matter described in this specification can be implemented in specific embodiments to realize one or more of the following advantages. The save-restore engine (SRE) described in this specification implements a more secure, hardware-based state machine to perform the save and restore of configuration data for components (e.g., AC components or other registers) in a computing device. . The SRE is configured to isolate local memory during a power failure event using one of the always-on or backup power rails. Isolation of local memory protects configuration data from access by untrusted components on the SoC. In addition, the isolation of local memory protects it from corrupted application software.
本說明書中描述之技術提供優於用於保存及恢復組態資料之其他機制之若干優點。與基於軟體及基於動態隨機存取記憶體(DRAM)之解決方案相比，本說明書中描述之技術顯著更快地執行，且消耗顯著更少電力。例如，使用一DRAM控制器及一DRAM實體層進行一保存恢復操作在一電力崩潰事件之後喚醒之時間及電力消耗方面係相對高成本的。The techniques described in this specification provide several advantages over other mechanisms for saving and restoring configuration data. The techniques described in this specification execute significantly faster and consume significantly less power than software-based and dynamic random access memory (DRAM)-based solutions. For example, using a DRAM controller and a DRAM physical layer to perform a save-restore operation is relatively costly in terms of wake-up time and power consumption after a power crash event.
SRE可在AC組件或其他暫存器之組態資料之保存及恢復期間實施分散式資料包裝及解包裝。各待保存組件可在保存操作之第一異動上向SRE通知需要保存之資料之大小。因此，各待保存組件可在保存程序期間執行其資料之本端包裝，且可在恢復程序期間執行其本端解包裝，此有助於高效地利用本端記憶體以及減少恢復時間。與基於軟體之解決方案或基於DRAM之硬體解決方案相比，基於SRE之方法提供較佳電力使用及AC組件或其他暫存器之資料之較佳保護，且避免對資料之完整性保護之需求。SRE可將一特殊信號發送至AC組件或其他暫存器。此導致AC組件或其他暫存器阻止與AC組件或其他暫存器之任何用戶端異動，直至由SRE完成保存或恢復操作。SRE can perform distributed data packaging and unpacking during the preservation and recovery of configuration data in AC components or other registers. Each component to be saved can notify the SRE of the size of the data that needs to be saved on the first transaction of the save operation. Therefore, each component to be saved can perform local packaging of its data during the save procedure, and can perform its local unpacking during the restore procedure, which helps to efficiently utilize local memory and reduce restore time. Compared to software-based solutions or DRAM-based hardware solutions, the SRE-based approach provides better power usage and better protection of data in AC components or other registers, and avoids the need to protect the integrity of the data. need. The SRE can send a special signal to the AC component or other register. This causes the AC component or other register to block any client-side transactions with the AC component or other register until the save or restore operation is completed by the SRE.
本說明書中描述之技術可阻止對本端資源之存取，直至AC組件或其他暫存器之恢復完成。因此，本說明書中描述之技術可防止基於軟體之解決方案所可能之某些類型之攻擊。例如，本說明書中描述之技術可防止其他實體在一重設指令之發放與AC組件或其他暫存器之組態之恢復完成之間之時間段內惡意地獲得來自受保護資源之資訊。The techniques described in this specification prevent access to local resources until recovery of the AC component or other registers is complete. Therefore, the techniques described in this specification can prevent certain types of attacks that are possible with software-based solutions. For example, the techniques described in this specification can prevent other entities from maliciously obtaining information from protected resources during the time period between the issuance of a reset command and the completion of restoration of the configuration of the AC component or other register.
在下文之附圖及描述中闡述本說明書之標的物之一或多項實施例之細節。從描述、圖式及發明申請專利範圍將變得明白標的物之其他特徵、態樣及優點。The details of one or more embodiments of the subject matter of this specification are set forth in the accompanying drawings and the description below. Other features, aspects and advantages of the subject matter will become apparent from the description, drawings and patentable scope of the invention.
圖1係一實例運算裝置100之一圖。運算裝置100可為安裝在一行動裝置(例如，一智慧型電話或一平板裝置)上之一系統單晶片(SoC)裝置。一SoC係將系統之各組件包含在一單一矽基板上或多個互連晶粒上(例如，使用矽中介層、堆疊晶粒或互連橋)之一積體電路。FIG. 1 is a diagram of an example computing device 100. The computing device 100 may be a system-on-a-chip (SoC) device installed on a mobile device (eg, a smartphone or a tablet device). An SoC is an integrated circuit that contains the components of the system on a single silicon substrate or on multiple interconnect dies (eg, using silicon interposers, stacked dies, or interconnect bridges).
運算裝置100包含一或多個子系統，且各子系統可包含一或多個用戶端裝置。為了改良操作完整性及資料安全性，用戶端裝置可彼此隔離，且系統可經設計以操作，使得裝置彼此不信任。為此，各用戶端裝置可具有一各自存取控制(AC)組件，該各自存取控制(AC)組件經組態以控制運算裝置100上之哪些其他組件可與用戶端裝置或其他用戶端裝置通信。各用戶端裝置可具有需要跨電力崩潰之保存及恢復之其他暫存器。The computing device 100 includes one or more subsystems, and each subsystem may include one or more client devices. To improve operational integrity and data security, client devices can be isolated from each other, and the system can be designed to operate such that devices do not trust each other. To this end, each client device may have a respective access control (AC) component configured to control which other components on the computing device 100 can interact with the client device or other clients. Device communication. Each client device may have other registers that need to be saved and restored across power crashes.
AC組件可被實施為硬體安全組件，其等可管理子系統中之一異動之安全性，且可在子系統中之資源之間提供隔離，例如，記憶體映射組件及IO映射組件。記憶體映射組件係可由一起始器(諸如一CPU)藉由使用系統記憶體映射中之一特定位址對資源進行定址來存取之資源。記憶體映射組件之實例包含靜態隨機存取記憶體(SRAM)、動態隨機存取記憶體(DRAM)、組態暫存器。IO映射組件係未被顯式記憶體映射之資源。可藉由起始器使用針對各IO映射組件客製之特殊程式化序列存取IO映射組件。IO映射組件之實例包含先進先出(FIFO)緩衝器、周邊裝置，諸如快捷周邊組件互連介面(PCIE)、串列周邊介面(SPI)等。一運算裝置中之AC組件之實例包含防火牆、領域分配器(RA)及系統級記憶體管理單元(SMMU)。例如，圖1展示一AC組件112、一AC組件114、一AC組件120及一第三方AC組件116。AC components can be implemented as hardware security components, which can manage the security of transactions in a subsystem, and can provide isolation between resources in the subsystem, such as memory mapped components and IO mapped components. A memory map component is a resource that can be accessed by an initiator, such as a CPU, by addressing the resource using a specific address in the system memory map. Examples of memory mapping components include static random access memory (SRAM), dynamic random access memory (DRAM), and configuration registers. IO mapped components are resources that are not explicitly memory mapped. IO mapped components can be accessed through the initiator using a specially programmed sequence customized for each IO mapped component. Examples of IO mapping components include first-in-first-out (FIFO) buffers, peripheral devices such as Peripheral Component Interconnect Express (PCIE), Serial Peripheral Interface (SPI), etc. Examples of AC components in a computing device include firewalls, realm allocators (RAs), and system-level memory management units (SMMUs). For example, FIG. 1 shows an AC component 112, an AC component 114, an AC component 120, and a third-party AC component 116.
當一子系統經電力閘控時，運算裝置100可包含複數個保持暫存器以保持AC組件之資料。例如，一SoC可包含用於AC組件中之控制暫存器之保持暫存器，且保持暫存器可定位於一非電力閘控電力軌中。然而，在一電力崩潰事件期間，保持暫存器亦丟失其等之內容。因此，當運算裝置100丟失其電力時，例如，當電力軌崩潰時，可期望將AC組件或其他暫存器之資料(例如，AC組件之狀態及組態)保存在運算裝置100上具有主動電力之某一區域中，使得當運算裝置100恢復其電力時，例如，當電力軌重新通電時，AC組件或其他暫存器可恢復。When a subsystem is power-gated, the computing device 100 may include a plurality of holding registers to hold data from the AC components. For example, an SoC may include retention registers for control registers in AC components, and the retention registers may be located in a non-power-gated power rail. However, during a power failure event, the holding registers also lose their contents. Therefore, when the computing device 100 loses its power, for example, when a power rail collapses, it may be desirable to have the AC component or other register data (e.g., the status and configuration of the AC component) saved on the computing device 100 with an active function. A certain region of power such that when the computing device 100 restores its power, for example, when the power rails are re-energized, the AC components or other registers can be restored.
運算裝置100包含一保存恢復引擎(SRE) 102。SRE 102經組態以將定位於受到一電力崩潰事件影響之一電力域150中之一AC組件或其他暫存器(例如，AC組件112)之組態資料(例如，狀態資料及組態資料)保存在一隔離本端記憶體106中。SRE 102經組態以當電力域150之電力恢復時從隔離本端記憶體106恢復AC組件或其他暫存器之組態資料。The computing device 100 includes a save-restore engine (SRE) 102 . SRE 102 is configured to transfer configuration data (eg, status data and configuration data) located in an AC component or other register (eg, AC component 112 ) in a power domain 150 that is affected by a power crash event. ) is stored in an isolated local memory 106. The SRE 102 is configured to restore the AC component or other register configuration data from the isolated local memory 106 when power to the power domain 150 is restored.
一電力域係由同一電力及接地供應器供電之閘極及裝置之一集合。例如，AC組件112、AC組件114及第三方AC組件116處於同一電力域150中。作為另一實例，隔離本端記憶體106、SRE 102、AC表104及電力管理器108處於同一電力域152中，且電力域152之電力永遠開啟。A power domain is a collection of gates and devices powered by the same power and ground supplier. For example, AC component 112, AC component 114, and third-party AC component 116 are in the same power domain 150. As another example, the isolated local memory 106, the SRE 102, the AC meter 104, and the power manager 108 are in the same power domain 152, and the power of the power domain 152 is always on.
在一些實施方案中，一AC組件(例如，一防火牆)可包含支援SRE之保存及恢復操作之一額外功能。例如，AC組件可包含SRE保存請求或恢復請求之一識別。且在接收到一保存請求或一恢復請求之後，AC組件可在保存/恢復操作期間鎖定系統對AC組件之組態資料之存取。In some implementations, an AC component (eg, a firewall) may include additional functionality to support SRE save and restore operations. For example, the AC component may contain an identification of one of the SRE save request or restore request. And after receiving a save request or a restore request, the AC component can lock the system's access to the configuration data of the AC component during the save/restore operation.
在一些實施方案中，AC組件可經組態以具有用以壓縮待保存在隔離本端記憶體中之組態資料之一機制。需要被保存及恢復之組態資訊可包含高度可壓縮之資訊。例如，為了節省隔離本端記憶體106中之儲存空間，可部署一介面工具集118 (例如，一壓縮介面工具集)以壓縮組態資訊。作為另一實例，介面工具集118可使用一位址映射表來選擇AC組件116中需要被保存之關鍵控制暫存器。因此，可減少待保存之組態資料量。In some implementations, the AC component may be configured to have a mechanism to compress configuration data to be saved in isolated local memory. The configuration information that needs to be saved and restored may contain highly compressible information. For example, to save storage space in the isolated local memory 106, an interface toolset 118 (eg, a compression interface toolset) may be deployed to compress configuration information. As another example, the interface toolset 118 may use an address mapping table to select key control registers in the AC component 116 that need to be saved. Therefore, the amount of configuration data to be saved can be reduced.
在一些實施方案中，一組件可在需要被保存或恢復之位址位置之間具有多個未使用位址位置。當壓實用於保存/恢復操作之酬載時，可藉由跳過此等未使用位址位置來避免此等位置。在一些實施方案中，一組件可具有實施需要被保存或恢復之少量資料(例如，少於四個位元組之資料)之多個位址。因此，來自多個位址之資料可組合為用於保存/恢復操作之一給定異動之一單一酬載。在一些實施方案中，AC組件可實施適合於AC組件之客製壓實或解壓方法。因此，SRE 102可不涉及參與保存/恢復操作之AC組件之組態暫存器之資料結構。例如，SRE機制可表現得像一插頭操作(例如，連接至系統匯流排110及信號122之一插頭)、一暫存器操作(例如，製作一AC組件表之一條目之一暫存器)及一播放操作。In some implementations, a component may have multiple unused address locations between address locations that need to be saved or restored. These unused address locations can be avoided by skipping them when compacting the payload for a save/restore operation. In some implementations, a component may have multiple addresses implementing a small amount of data (eg, less than four bytes of data) that needs to be saved or restored. Therefore, data from multiple addresses can be combined into a single payload for a given transaction in a save/restore operation. In some embodiments, the AC component may implement a custom compaction or decompression method suitable for the AC component. Therefore, the SRE 102 may not involve the data structure of the configuration register of the AC component participating in the save/restore operation. For example, the SRE mechanism may behave like a plug operation (e.g., a plug connected to system bus 110 and signal 122), a register operation (e.g., making a register of entries in an AC component table) and a playback operation.
運算裝置100包含經組態以控制提供至裝置上之複數個電力域之電力之一電力管理器108。例如，電力管理器經組態以控制提供至AC組件112及AC組件之在電力域150中之對應用戶端裝置之電力。電力管理器108可在電力域150中發出一電力崩潰操作。電力管理器108可將電力恢復至電力域150。在一些實施方案中，在一電力崩潰事件期間，電力管理器108可停用運算裝置100之一子系統中之位址再映射器128。位址再映射器128可將不同位址傳遞至運算裝置100中之不同組件，例如，將不同位址傳遞至不同DRAM。藉由停用位址再映射器128，AC組件可透過實體位址空間中之一靜態映射而具有一靜態位址。Computing device 100 includes a power manager 108 configured to control power provided to a plurality of power domains on the device. For example, the power manager is configured to control power provided to the AC component 112 and the AC component's corresponding client device in the power domain 150 . Power manager 108 may issue a power crash operation in power domain 150 . Power manager 108 can restore power to power domain 150 . In some implementations, the power manager 108 may disable the address remapper 128 in a subsystem of the computing device 100 during a power crash event. The address remapper 128 may transfer different addresses to different components in the computing device 100, for example, transfer different addresses to different DRAMs. By disabling address remapper 128, the AC component can have a static address through a static mapping in the physical address space.
電力管理器108可與SRE 102通信，使得SRE 102可執行保存操作及恢復操作。例如，電力管理器108可將一保存請求(例如，「saveReq」130)發送至SRE 102以起始一保存操作。電力管理器108可將一AC組件之一識別(例如「saveSswpid」132)發送至SRE 102以識別其組態資料需要被保存之AC組件。當保存操作完成時，電力管理器108可接收來自SRE 102之一保存回應(例如，「saveRdy」134)。電力管理器108可將一恢復請求(例如，「restoreReq」138)發送至SRE 102以起始一恢復操作。電力管理器108可將一AC組件之一識別(例如「restoreSswpid」140)發送至SRE 102以識別其組態資料需要被恢復之AC組件。當恢復操作完成時，電力管理器108可接收來自SRE 102之一恢復回應(例如，「restoreRdy」142)。Power manager 108 can communicate with SRE 102 so that SRE 102 can perform save operations and restore operations. For example, power manager 108 may send a save request (eg, "saveReq" 130) to SRE 102 to initiate a save operation. Power manager 108 may send an identification of an AC component (eg, "saveSswpid" 132) to SRE 102 to identify the AC component whose configuration data needs to be saved. When the save operation is completed, power manager 108 may receive a save response from SRE 102 (eg, "saveRdy" 134). Power manager 108 may send a restore request (eg, "restoreReq" 138) to SRE 102 to initiate a restore operation. Power manager 108 may send an identification of an AC component (eg, "restoreSswpid" 140) to SRE 102 to identify the AC component whose configuration data needs to be restored. When the restore operation is complete, power manager 108 may receive a restore response from SRE 102 (eg, "restoreRdy" 142).
運算裝置100包含一存取控制(AC)表104。AC表104定義在一電力崩潰事件期間需要被保存及/或恢復之運算裝置100中之一或多個AC組件。AC表104可為一硬編碼表，且各運算裝置100可具有一對應AC表。AC表104包含對應於運算裝置100中之一或多個AC組件之一或多個條目，且可使用各自AC組件之一識別來將各條目編索引。該識別識別運算裝置100中之AC組件。The computing device 100 includes an access control (AC) table 104 . AC table 104 defines one or more AC components in computing device 100 that need to be saved and/or restored during a power crash event. The AC table 104 may be a hard-coded table, and each computing device 100 may have a corresponding AC table. AC table 104 contains one or more entries corresponding to one or more AC components in computing device 100, and each entry may be indexed using an identification of the respective AC component. The identification identifies the AC component in the computing device 100 .
在一些實施方案中，各條目之欄位可包含指示相關聯AC組件條目是否有效之一欄位及指示相關聯AC組件之一開始位址之一欄位。在一保存操作期間，SRE可從以AC組件之開始位址開始之一記憶體位置讀取AC組件之組態資料。在一恢復操作期間，SRE可將組態資料寫入至以AC組件之開始位址開始之一記憶體位置。在一些實施方案中，運算裝置可包含多個子系統，且各子系統可包含一或多個AC組件。可藉由子系統之一識別及子系統中之AC組件之一識別將AC表104中之各條目編索引。In some implementations, the fields for each entry may include a field indicating whether the associated AC component entry is valid and a field indicating a starting address of the associated AC component. During a save operation, the SRE may read the AC component's configuration data from a memory location starting with the AC component's start address. During a restore operation, the SRE may write configuration data to a memory location starting with the start address of the AC component. In some implementations, a computing device may include multiple subsystems, and each subsystem may include one or more AC components. Each entry in AC table 104 may be indexed by an identification of a subsystem and an identification of an AC component within the subsystem.
運算裝置100包含一隔離本端記憶體106。隔離本端記憶體106僅可由SRE 102存取，未經記憶體映射，且軟體無法存取。例如，隔離本端記憶體106可包含用於儲存及保持之一非記憶體映射偽雙埠SRAM。作為另一實例，隔離本端記憶體106可包含可用於保存及恢復AC組件之組態資料之一DRAM，且系統可使用密碼方法保護儲存在DRAM中之組態資料免受潛在篡改，諸如透過加密/解密之鑑認、防重播保護等。因此，保護隔離本端記憶體106受保護免受不可信安全組件及/或異動之影響。隔離本端記憶體106處於一永遠開啟電力域152中。在一電力崩潰事件期間，隔離本端記憶體106可具有電力，使得儲存在隔離本端記憶體106中之AC組件之組態資料不會丟失。在一電力崩潰事件期間，SRE 102可將一或多個AC組件之各者之組態資料保存在隔離本端記憶體106中。當電力恢復時，SRE 102可將組態資料從隔離本端記憶體106恢復至一或多個AC組件之各者。Computing device 100 includes an isolated local memory 106 . Isolated local memory 106 is only accessible by SRE 102, is not memory mapped, and cannot be accessed by software. For example, isolated local memory 106 may include a non-memory mapped pseudo-dual-port SRAM for storage and retention. As another example, the isolated local memory 106 may include a DRAM that may be used to save and restore configuration data of the AC component, and the system may use cryptographic methods to protect the configuration data stored in the DRAM from potential tampering, such as by Encryption/decryption authentication, anti-replay protection, etc. Therefore, the isolation local memory 106 is protected from untrusted security components and/or transactions. Isolated local memory 106 is in an always-on power domain 152 . During a power failure event, the isolated local memory 106 may have power so that the configuration data of the AC components stored in the isolated local memory 106 is not lost. During a power failure event, SRE 102 may save configuration data for each of one or more AC components in isolated local memory 106 . When power is restored, SRE 102 may restore configuration data from isolated local memory 106 to each of the one or more AC components.
在成功地將AC組件之組態資料保存在隔離本端記憶體106中之後，SRE 102可經組態以將一信號122發送至AC組件，例如，AC組件112及/或AC組件114。例如，信號122可指示AC組件之一恢復操作待決。該信號可導致AC組件進入其中其他組件或異動無法存取AC組件之組態資料之一狀態，直至一恢復操作完成。在一些實施方案中，藉由使SRE 102寫入至AC組件112或AC組件114中之一專用暫存器，可在不具有一邊帶硬體信號之情況下達成發信。After successfully saving the configuration data of the AC component in the isolated local memory 106, the SRE 102 may be configured to send a signal 122 to the AC component, such as the AC component 112 and/or the AC component 114. For example, signal 122 may indicate that resume operation of one of the AC components is pending. This signal can cause the AC component to enter a state in which other components or transactions cannot access the configuration data of the AC component until a recovery operation is completed. In some implementations, signaling can be accomplished without sideband hardware signaling by having the SRE 102 write to a dedicated register in the AC component 112 or the AC component 114 .
在一些實施方案中，SRE 102可經組態以將信號122發送至與一第三方AC組件116連接之一介面工具集118。例如，信號122可指示第三方AC組件116之一恢復操作待決。該信號可導致介面工具集118進入其中其他組件或異動無法存取第三方AC組件116之組態資料之一狀態，直至一恢復操作完成。In some implementations, the SRE 102 may be configured to send the signal 122 to an interface toolset 118 that interfaces with a third-party AC component 116 . For example, signal 122 may indicate that resume operation of one of the third-party AC components 116 is pending. This signal may cause the interface toolset 118 to enter a state in which other components or transactions cannot access the configuration data of the third-party AC component 116 until a restore operation is completed.
運算裝置100可包含連接運算裝置100在電力域152中之組件及運算裝置100在電力域150中之組件之一系統匯流排110。SRE 102可透過系統匯流排110與一AC組件通信。電力管理器108可透過系統匯流排110與一AC組件通信。在一些實施方案中，系統匯流排110可與一子系統電力管理組件126或124通信，該子系統電力管理組件126或124與AC組件通信。子系統電力管理組件可在子系統之AC組件之存取控制組態恢復之前確保子系統不可用。The computing device 100 may include a system bus 110 that connects components of the computing device 100 in the power domain 152 and components of the computing device 100 in the power domain 150 . SRE 102 can communicate with an AC component through system bus 110 . Power manager 108 may communicate with an AC component via system bus 110 . In some embodiments, system bus 110 may communicate with a subsystem power management component 126 or 124 that communicates with the AC component. The subsystem power management component ensures that the subsystem is unavailable until the access control configuration of the subsystem's AC component is restored.
在一些實施方案中，運算裝置100可包含一第三方AC組件116。運算裝置可包含經組態以實施追蹤保存操作或恢復操作何時開始及結束之一保存恢復追蹤器之一介面工具集118。由於第三方組件可未經組態以解釋來自SRE 102之保存或恢復操作，所以介面工具集118可藉由識別SRE保存或恢復請求來幫助支援保存及恢復操作，例如，接收來自SRE之信號122，且在保存或恢復操作期間鎖定系統對第三方AC組件之組態資料之存取。In some implementations, computing device 100 may include a third-party AC component 116 . The computing device may include an interface toolset 118 configured to implement a save-restore tracker that tracks when save operations or restore operations begin and end. Because third-party components may not be configured to interpret save or restore operations from the SRE 102 , the interface toolset 118 may help support save and restore operations by identifying SRE save or restore requests, e.g., receiving signals 122 from the SRE , and lock the system's access to the configuration data of the third-party AC component during the save or restore operation.
圖2係一實例保存恢復引擎(SRE) 200之一圖，其可為圖1之運算裝置100之SRE 102之一實例實施方案。SRE 200可接受來自一電力管理器之保存及/或恢復請求。SRE 200可執行一保存操作，包含：識別AC表202中列出之AC組件；及將來自AC組件之組態資料保存至一隔離本端記憶體204。SRE 200可執行一恢復操作，包含：識別已保存在隔離本端記憶體204中之AC表202中列出之AC組件；及將AC組件之組態資料從隔離本端記憶體204恢復至AC組件。FIG. 2 is a diagram of an example save recovery engine (SRE) 200, which may be an example implementation of the SRE 102 of the computing device 100 of FIG. 1. SRE 200 can accept save and/or restore requests from a power manager. The SRE 200 may perform a save operation, including: identifying the AC components listed in the AC table 202; and saving configuration data from the AC components to an isolated local memory 204. The SRE 200 can perform a recovery operation, including: identifying the AC components listed in the AC table 202 that have been saved in the isolated local memory 204; and restoring the configuration data of the AC components from the isolated local memory 204 to the AC. components.
SRE 200可實施一基於硬體之狀態機(例如，保存狀態機206及恢復狀態機208)以執行AC組件之組態資料之保存及恢復。即，SRE不具有一軟體介面。因此，SRE可將隔離本端記憶體204與從運算裝置之異動及/或組件產生之系統存取隔離。SRE 200 may implement a hardware-based state machine (eg, save state machine 206 and restore state machine 208) to perform save and restore of AC component configuration data. That is, SRE does not have a software interface. Thus, the SRE can isolate local memory 204 from system accesses resulting from transactions and/or components of the computing device.
SRE 200可包含一本端表210。本端表210包含複數個條目，且各條目可對應於一運算裝置中之一AC組件或運算裝置之一子系統。可藉由一AC組件之一識別或一子系統之一識別將各條目編索引。SRE 200 may include a primary table 210 . The local table 210 includes a plurality of entries, and each entry may correspond to an AC component in a computing device or a subsystem of the computing device. Entries may be indexed by an identification of an AC component or an identification of a subsystem.
針對各AC組件，本端表210之一條目可包含指示AC組件是否被成功地保存在隔離本端記憶體204中之一第一欄位，例如，一VLD位元。例如，本端表210之各條目可包含一欄位，例如，指示一子系統之AC組件的組態資料是否被成功地保存在隔離本端記憶體中之一個位元。如果保存操作被成功地完成，則此位元可被設定為1。如果保存操作未被成功地完成，例如，發生一錯誤，則此位元可被設定為0。如果一恢復操作被成功地完成，則此位元可被重設為0。在一些實施方案中，位元可在運算裝置之一冷重設期間被設定為0。For each AC component, an entry in the local table 210 may include a first field, eg, a VLD bit, indicating whether the AC component was successfully saved in the isolated local memory 204 . For example, each entry of local table 210 may include a field, such as a bit, indicating whether configuration data for a subsystem's AC component was successfully saved in isolated local memory. This bit can be set to 1 if the save operation is completed successfully. This bit can be set to 0 if the save operation was not completed successfully, for example, an error occurred. This bit can be reset to 0 if a recovery operation is completed successfully. In some implementations, bits may be set to 0 during a cold reset of a computing device.
針對各AC組件，本端表210之一條目可包含指示隔離本端記憶體204中之AC組件執行保存操作及恢復操作之一開始位址之一第二欄位。例如，欄位可為32位元或64位元，且可在針對對應AC組件執行第一保存操作時設定。欄位可在運算裝置之一冷重設期間被重設為0。For each AC component, one entry of the local table 210 may include a second field indicating a starting address for performing save operations and restore operations for the AC component in the isolated local memory 204 . For example, the field can be 32-bit or 64-bit, and can be set when performing the first save operation for the corresponding AC component. The field can be reset to 0 during a cold reset of a computing device.
在一些實施方案中，本端表210之一條目可包含指示AC組件是否已被映射至隔離本端記憶體204中以用於保存操作及恢復操作之一第三欄位(例如，一設定位元)。例如，欄位可為一個位元，且可在針對對應AC組件執行第一保存操作時被設定。欄位可在運算裝置之一冷重設期間被重設為0。In some implementations, an entry in local table 210 may include a third field (e.g., a set bit) that indicates whether the AC component has been mapped into isolated local memory 204 for save operations and restore operations. Yuan). For example, the field may be a bit and may be set when a first save operation is performed on the corresponding AC component. The field can be reset to 0 during a cold reset of a computing device.
在一些實施方案中，SRE 200可在一保存操作期間或在一恢復操作期間將一信號220發送至一AC組件。例如，本端表210可發送信號220。信號220可向AC組件(例如，一子系統中之一防火牆)指示保存或恢復操作待決。回應於接收到信號220，AC組件可進入其中AC組件僅可由SRE 200存取之一狀態。即，AC組件可阻止運算裝置中之其他組件或異動透過其埠之存取。In some implementations, SRE 200 may send a signal 220 to an AC component during a save operation or during a restore operation. For example, local table 210 may send signal 220. Signal 220 may indicate to an AC component (eg, a firewall in a subsystem) that a save or restore operation is pending. In response to receiving signal 220, the AC component may enter a state where the AC component is only accessible by SRE 200. That is, the AC component can prevent other components or transactions in the computing device from accessing through its port.
SRE 200包含一基於硬體之狀態機以執行AC組件之組態資料的保存及恢復。SRE 200可包含一保存狀態機206及一恢復狀態機208。保存狀態機206在一保存操作期間儲存及更新狀態資訊，例如，一指標及一計數器之一位址。保存狀態機206可透過一保存介面212與電力管理器互動。保存狀態機206可存取來自本端表210 (例如，來自與AC組件相關聯之一各自條目)之資訊。例如，保存狀態機206可獲得隔離本端記憶體204中之AC組件之一開始位址。保存狀態機206可將資訊寫入至本端表210，例如，寫入至與AC組件相關聯之一各自條目。例如，在隔離本端記憶體204中分配用於一AC組件的記憶體空間之後，保存狀態機206可將隔離本端記憶體204中之AC組件的開始位址保存在本端表210中。作為另一實例，在一成功保存操作之後，保存狀態機206可將一保存成功位元設定為1。The SRE 200 includes a hardware-based state machine to perform the saving and restoring of AC component configuration data. SRE 200 may include a save state machine 206 and a restore state machine 208. The save state machine 206 stores and updates state information during a save operation, such as the address of a pointer and a counter. The preservation state machine 206 can interact with the power manager through a preservation interface 212. The save state machine 206 may access information from the local table 210 (eg, from a respective entry associated with the AC component). For example, the save state machine 206 may obtain the start address of one of the AC components in the isolated local memory 204 . The save state machine 206 may write information to the local table 210, for example, to a respective entry associated with the AC component. For example, after allocating memory space for an AC component in the isolation local memory 204 , the save state machine 206 may save the starting address of the AC component in the isolation local memory 204 in the local table 210 . As another example, after a successful save operation, the save state machine 206 may set a save success bit to 1.
保存狀態機206可將一AC組件之組態資料保存至隔離本端記憶體204。保存狀態機206可從AC表202獲得資訊。例如，保存狀態機可驗證一AC組件是否在AC表202中列出，且可從AC表202獲得AC組件之一開始位址。保存狀態機206可透過一介面與系統匯流排互動。例如，保存狀態機206可透過一先進可擴展介面(AXI)讀取通道216與系統匯流排互動以讀取一AC組件之組態資料。AXI讀取介面可支援具有預定數目個位元(例如，32位元或64位元)之資料寬度之單次讀取。The save state machine 206 can save the configuration data of an AC component to the isolated local memory 204 . The save state machine 206 may obtain information from the AC table 202 . For example, the saving state machine may verify whether an AC component is listed in the AC table 202 and may obtain the starting address of one of the AC components from the AC table 202 . The save state machine 206 can interact with the system bus through an interface. For example, the save state machine 206 may interact with the system bus through an Advanced Extensible Interface (AXI) read channel 216 to read the configuration data of an AC component. The AXI read interface can support a single read with a data width of a predetermined number of bits (eg, 32 bits or 64 bits).
恢復狀態機208在一恢復操作期間儲存及更新狀態資訊，例如，一指標及一計數器之一位址。恢復狀態機208可透過一恢復介面214與電力管理器互動。恢復狀態機208可存取來自本端表210 (例如，來自與AC組件相關聯之一各自條目)之資訊。例如，恢復狀態機208可獲得隔離本端記憶體204中之AC組件之一開始位址。恢復狀態機208可將資訊寫入至本端表210，例如，寫入至與AC組件相關聯之一各自條目。例如，在一成功恢復操作之後，保存狀態機206可將一保存成功位元設定為0。Recovery state machine 208 stores and updates state information during a recovery operation, such as an address of a pointer and a counter. The recovery state machine 208 can interact with the power manager through a recovery interface 214. Recovery state machine 208 may access information from local table 210 (eg, from a respective entry associated with the AC component). For example, the recovery state machine 208 may obtain the start address of one of the AC components in the isolated local memory 204 . The recovery state machine 208 may write information to the local table 210, for example, to a respective entry associated with the AC component. For example, after a successful restore operation, save state machine 206 may set a save success bit to 0.
恢復狀態機208可從隔離本端記憶體204恢復一AC組件之組態資料。恢復狀態機208可從AC表202獲得資訊。例如，恢復狀態機可驗證一AC組件是否在AC表202中列出，且可從AC表202獲得AC組件之一開始位址。恢復狀態機208可透過一介面與系統匯流排互動。例如，恢復狀態機208可透過一先進可擴展介面(AXI)寫入通道218與系統匯流排互動以寫入一AC組件之組態資料。AXI寫入介面可支援具有預定數目個位元(例如，32位元或64位元)之資料寬度之單次寫入。The recovery state machine 208 can recover the configuration data of an AC component from the isolated local memory 204 . Recovery state machine 208 may obtain information from AC table 202 . For example, the recovery state machine may verify whether an AC component is listed in the AC table 202 and may obtain the start address of one of the AC components from the AC table 202 . Recovery state machine 208 can interact with the system bus through an interface. For example, the recovery state machine 208 may interact with the system bus through an Advanced Extensible Interface (AXI) write channel 218 to write configuration data for an AC component. The AXI write interface can support a single write with a data width of a predetermined number of bits (eg, 32 bits or 64 bits).
圖3係用於保存一AC組件之組態資料之一實例程序300之一流程圖。為了方便起見，程序300將被描述為藉由包含運算裝置中之一SRE (例如，圖1之運算裝置100中之SRE 102)之一系統執行。系統可包含參考圖1描述之組件，包含一或多個AC組件、一電力管理器、一隔離本端記憶體、一AC表或此等之某一組合。FIG. 3 is a flow chart of an example program 300 for saving configuration data of an AC component. For convenience, process 300 will be described as being executed by a system that includes an SRE in a computing device (eg, SRE 102 in computing device 100 of Figure 1). The system may include the components described with reference to Figure 1, including one or more AC components, a power manager, an isolated local memory, an AC meter, or some combination of these.
系統可接收來自一電力管理器之一保存請求及一AC組件之一識別(302)。例如，一電力管理器可將一保存請求(例如，saveReq130信號)發出至SRE，且可提供AC組件之一識別(ID)或連同待保存之子系統之一識別(例如，saveSswrpid 132信號)。The system may receive a save request from a power manager and an identification of an AC component (302). For example, a power manager may issue a save request (eg, saveReq 130 signal) to the SRE and may provide an identification (ID) of the AC component or along with an identification of the subsystem to be saved (eg, saveSswrpid 132 signal).
系統可判定是否在一AC表中定義AC組件之識別(304)。在接收到保存請求之後，SRE可例如透過ID檢查是否在定義AC組件之AC表中定義所請求之AC組件。如果系統判定未在AC表中定義AC組件之識別，則系統可發出一錯誤回應(306)。例如，如果SRE無法在AC表中找到所請求之AC組件，則SRE可用一錯誤回應(例如，saveResp 136信號)來回應電力管理器。The system may determine whether the identification of the AC component is defined in an AC table (304). After receiving the save request, the SRE may check, for example by ID, whether the requested AC component is defined in the AC table that defines the AC component. If the system determines that the identification of the AC component is not defined in the AC table, the system may issue an error response (306). For example, if the SRE cannot find the requested AC component in the AC table, the SRE may respond to the power manager with an error response (eg, saveResp 136 signal).
在一些實施方案中，當在一段時間內或同時接收到多個保存請求時，SRE可將從電力管理器接收之多個保存請求排入佇列。SRE可將一回應訊息(例如，saveResp 136信號)發送至電力管理器。回應訊息可包含被排入佇列之AC組件之ID或連同待保存之子系統之一識別。In some implementations, the SRE may queue multiple save requests received from the power manager when multiple save requests are received within a period of time or simultaneously. The SRE may send a response message (eg, saveResp 136 signal) to the power manager. The response message may contain the ID of the queued AC component or along with an identification of the subsystem to be saved.
如果系統判定在AC表中定義AC組件之識別，則系統可從AC表獲得AC組件之一開始位址(308)。即，如果所請求之AC組件在AC表中，則SRE可載入AC表中指示之開始位址。例如，SRE可包含存取AC組件之一指標，且SRE可將指標設定至AC組件之開始位址。If the system determines that the identity of the AC component is defined in the AC table, the system may obtain one of the AC component start addresses from the AC table (308). That is, if the requested AC component is in the AC table, the SRE may load the starting address indicated in the AC table. For example, the SRE may include a pointer to access the AC component, and the SRE may set the pointer to the starting address of the AC component.
在一些實施方案中，SRE可接收來自電力管理器之一保存請求以保存運算裝置中之一子系統之複數個AC組件。SRE可接收來自電力管理器之一子系統封裝器之一ID。SRE可使用子系統封裝器之ID獲得AC表中指示之AC組件之各者之一開始位址。例如，SRE可將其存取AC組件之讀取指標設定至複數個AC組件之第一AC組件(例如，組件0)之開始位址。在完成保存第一AC組件之組態資料之後，SRE可將讀取指標移動至下一AC組件之開始位址。In some implementations, the SRE may receive a save request from the power manager to save a plurality of AC components of a subsystem in the computing device. The SRE may receive an ID from one of the subsystem encapsulators of the power manager. The SRE may use the ID of the subsystem wrapper to obtain the start address of one of each of the AC components indicated in the AC table. For example, the SRE may set its read index for accessing the AC component to the starting address of the first AC component (eg, component 0) of the plurality of AC components. After completing saving the configuration data of the first AC component, the SRE may move the read pointer to the starting address of the next AC component.
系統可判定是否在一隔離本端記憶體中分配AC組件之記憶體空間(310)。SRE可檢查是否在連接至SRE之隔離本端記憶體中針對所請求之AC組件進行記憶體空間之一初始分配。SRE可檢查SRE之本端表210。例如，SRE可檢查本端表210中之條目之一個位元SET欄位以判定是否已進行初始分配。可在針對對應AC組件執行第一保存操作時設定此位元。The system may determine whether to allocate memory space for the AC component in an isolated local memory (310). The SRE may check whether there is an initial allocation of memory space for the requested AC component in the isolated local memory connected to the SRE. The SRE may check the SRE's local table 210. For example, the SRE may check the one-bit SET field of an entry in local table 210 to determine whether an initial allocation has been made. This bit may be set when performing the first save operation for the corresponding AC component.
如果系統判定未分配記憶體空間，則系統可分配AC組件之記憶體空間(312)。例如，如果未進行一分配，例如，當此係第一次保存AC組件時，SRE可使用本端記憶體中之一未映射位址位置產生AC組件之一分配。此後，SRE可更新其本端表以將AC組件之開始位址保存在隔離本端記憶體中。If the system determines that memory space is not allocated, the system may allocate memory space for the AC component (312). For example, if an allocation has not been made, such as when the AC component is first saved, the SRE may generate an allocation of the AC component using one of the unmapped address locations in local memory. Thereafter, the SRE can update its local table to save the starting address of the AC component in isolated local memory.
在分配記憶體空間之後，或如果系統判定記憶體空間被分配，則系統可從AC組件讀取AC組件之組態資料(314)。如果進行分配，則SRE可從SRE之一本端表210讀取與AC組件相關聯之一位址(例如，一開始位址)。可在針對對應AC組件執行第一保存操作時設定本端表中之一條目之開始位址欄位。例如，SRE可包含一保存狀態機206，該保存狀態機206包含至AC組件之一讀取指標及至隔離本端記憶體之一寫入指標。SRE可將讀取指標設定至AC組件之開始位址，且可將寫入指標設定至隔離本端記憶體中之AC組件之開始位址。After the memory space is allocated, or if the system determines that the memory space is allocated, the system may read the configuration data of the AC component from the AC component (314). If allocated, the SRE may read an address associated with the AC component (eg, a starting address) from one of the SRE's local tables 210 . The start address field of an entry in the local table can be set when performing the first save operation for the corresponding AC component. For example, the SRE may include a save state machine 206 that includes a read pointer to the AC component and a write pointer to the isolated local memory. The SRE can set the read target to the start address of the AC device and can set the write target to the start address of the AC device in the isolated local memory.
在一些實施方案中，SRE可將一初始讀取操作發送至AC組件，連同將指示保存操作之一信號發送至AC組件。在接收到初始讀取操作之後，AC組件可判定保存操作已初始化，且可阻止從並非來自SRE之異動對其組態資料之任何進一步存取。例如，AC組件可阻止對其組態資料之任何進一步存取，除非存取來自SRE。In some implementations, the SRE may send an initial read operation to the AC component along with a signal indicating a save operation to the AC component. After receiving the initial read operation, the AC component can determine that the save operation has been initiated and can prevent any further access to its configuration data from transactions not originating from the SRE. For example, an AC component can prevent any further access to its configuration data unless the access comes from an SRE.
在一些實施方案中，在接收到來自SRE之初始讀取操作之後，AC組件可提供需要被保存在隔離位置記憶體中之組態資料之大小。例如，AC組件可提供SRE在保存操作期間需要完成之最大讀取次數。SRE可將組態資料之大小寫入至隔離本端記憶體，例如，用於AC組件之經分配記憶體之一第一部分(例如，一位元組)中。在寫入大小資訊之後，SRE可增加指標之值，使得指標可指向所分配記憶體之下一部分。In some embodiments, after receiving the initial read operation from the SRE, the AC component may provide the size of the configuration data that needs to be saved in the isolated location memory. For example, the AC component can provide the maximum number of reads that the SRE needs to complete during a save operation. The SRE may write the size of the configuration data to isolated local memory, such as one of the first portions (eg, bytes) of allocated memory for the AC component. After writing the size information, the SRE can increase the value of the pointer so that the pointer points to a lower portion of the allocated memory.
系統可將AC組件之組態資料寫入隔離本端記憶體中(316)。在設定讀取及寫入指標之後(且在大小資訊之初始讀取及寫入之後)，SRE可從AC組件循序讀取組態資料之一部分，且可循序將該部分寫入至隔離記憶體，直至達到組態資料之大小。例如，SRE可增加至AC組件之讀取指標以從AC組件讀取。SRE可增加至隔離本端記憶體之寫入指標。The system can write the configuration data of the AC component into the isolated local memory (316). After setting the read and write indicators (and after the initial read and write of the size information), the SRE can sequentially read a portion of the configuration data from the AC component, and can sequentially write that portion to the isolated memory , until the size of the configuration data is reached. For example, the SRE can be added to the read pointer of the AC component to read from the AC component. SRE can be added to isolate local memory write targets.
在一些實施方案中，SRE可包含一讀取計數器，該讀取計數器計數SRE在保存操作期間已完成之讀取次數。如果讀取計數器之值小於組態資料之大小，例如，最大讀取次數，則SRE可繼續讀取組態資料之下一部分。如果讀取計數器之值不小於組態資料之大小，則系統可判定保存操作成功完成。In some implementations, the SRE may include a read counter that counts the number of reads that the SRE has completed during a save operation. If the value of the read counter is less than the size of the configuration data, for example, the maximum number of reads, the SRE can continue to read the next part of the configuration data. If the value of the read counter is not less than the size of the configuration data, the system can determine that the save operation is successfully completed.
系統可將一保存完成回應發送至電力管理器(318)。如果針對AC組件之保存操作成功完成，則SRE可將一保存完成回應(例如，saveRdy 134信號)發送至電力管理器。如果SRE接收到來自AC組件之一錯誤，則SRE可將錯誤報告回至電力管理器，例如，saveResp 136信號，且SRE可停止保存操作。The system may send a save completion response to the power manager (318). If the save operation for the AC component completes successfully, the SRE may send a save completion response (eg, saveRdy 134 signal) to the power manager. If the SRE receives an error from one of the AC components, the SRE may report the error back to the power manager, for example, the saveResp 136 signal, and the SRE may stop the save operation.
在一些實施方案中，SRE需要將一子系統之多個AC組件保存至隔離本端記憶體。如果當前AC組件之保存操作完成，則SRE可將針對子系統之下一組件保存在AC表中。該程序繼續，直至針對子系統之AC表中之全部有效組件被保存。當子系統之全部AC組件被保存時，SRE可用一保存完成回應來回應電力管理器。In some embodiments, the SRE needs to save multiple AC components of a subsystem to isolated local memory. If the save operation of the current AC component is completed, the SRE can save the next component for the subsystem in the AC table. The process continues until all valid components in the AC table for the subsystem have been saved. When all AC components of the subsystem are saved, the SRE can respond to the power manager with a save complete response.
在一些實施方案中，電力管理器可發送對應於需要被保存之複數個AC組件之識別之一序列。SRE可平行處理識別之序列，且可平行保存複數個AC組件之組態資料。因此，系統可改良效率且增強保存操作之效能。In some implementations, the power manager may send a sequence corresponding to the identification of a plurality of AC components that need to be saved. SRE can process the identified sequence in parallel and save the configuration data of multiple AC components in parallel. Therefore, the system can improve efficiency and enhance the performance of save operations.
在接收到保存完成回應之後，電力管理器可繼續進行子系統或AC組件之電力崩潰。在一些實施方案中，在完成保存操作之後，SRE可將其本端表中之一欄位(例如，一VLD位元)設定為1，從而指示AC組件已被成功地保存在隔離本端記憶體中。After receiving the save complete response, the power manager may proceed with power failure of the subsystem or AC component. In some embodiments, after completing the save operation, the SRE may set a field (e.g., a VLD bit) in its local table to 1, thereby indicating that the AC component has been successfully saved in the isolated local memory. in the body.
在一些實施方案中，在保存操作成功完成之後，SRE可將一信號122發送至子系統或AC組件。例如，該信號(例如，信號值等於1)可指示AC組件之恢復操作待決。該信號可導致AC組件進入其中其他組件或異動無法存取AC組件之組態資料之一狀態，直至一恢復操作完成。例如，在接收到信號之後，AC組件可阻止任何用戶端異動，除非異動來自SRE，直至針對AC組件之恢復操作完成。在一些實施方案中，信號122未被驅動至覆蓋子系統電力管理之AC組件，使得電力管理器可執行通電序列。In some embodiments, after the save operation completes successfully, the SRE may send a signal 122 to the subsystem or AC component. For example, the signal (eg, signal value equal to 1) may indicate that recovery operation of the AC component is pending. This signal can cause the AC component to enter a state in which other components or transactions cannot access the configuration data of the AC component until a recovery operation is completed. For example, after receiving the signal, the AC component can prevent any client transactions unless the transaction comes from the SRE until the recovery operation for the AC component is completed. In some implementations, signal 122 is not driven to the AC component overlaying subsystem power management so that the power manager can perform the power-on sequence.
在一些實施方案中，實例程序300可用於保存一運算裝置中之需要保存/恢復之其他類型之組件之組態資料，且一或多個組件並非安全相關AC組件。在一些實施方案中，組件可為一SoC中之一記憶體映射組件。在一些實施方案中，組件可為一SoC中之一IO映射組件。在一些實施方案中，組件可包含一運算裝置中之一或多個暫存器。即，保存恢復引擎(SRE)係一通用保存/恢復引擎，且本說明書中描述之技術並不特定於安全相關AC組件。In some implementations, the example program 300 can be used to save configuration data of other types of components in a computing device that need to be saved/restored, and one or more components are not safety-related AC components. In some implementations, the component may be a memory mapped component in an SoC. In some implementations, the component may be an IO mapping component in an SoC. In some implementations, a component may include one or more registers in a computing device. That is, the Save Recovery Engine (SRE) is a general save/restore engine, and the techniques described in this specification are not specific to security-related AC components.
圖4係用於恢復組態資料之一實例程序400之一流程圖。為了方便起見，程序400將被描述為藉由包含運算裝置中之一SRE (例如，圖1之運算裝置100中之SRE 102)之一系統執行。系統可包含參考圖1描述之組件，包含一或多個AC組件、一電力管理器、一隔離本端記憶體、一AC表或此等之某一組合。Figure 4 is a flow chart of an example program 400 for restoring configuration data. For convenience, process 400 will be described as being executed by a system that includes an SRE in a computing device (eg, SRE 102 in computing device 100 of Figure 1). The system may include the components described with reference to Figure 1, including one or more AC components, a power manager, an isolated local memory, an AC meter, or some combination of these.
在一電力恢復事件期間，在將恢復請求發送至SRE之前，一電力管理器可首先恢復電力軌，且可與恢復中之子系統中之子系統電力管理組件通信以發放AC組件之重設。電力系統亦可與連接至AC組件之匯流排(例如，系統匯流排110)通信。位址再映射器128可保持在一重設或停用狀態，使得AC組件可在實體位址空間中具有一靜態位址。由於來自SRE之信號122接通，AC組件可阻止從任何其他異動或組件對AC組件之組態資料之存取。During a power restoration event, a power manager may first restore the power rails before sending a restoration request to the SRE, and may communicate with the subsystem power management components in the recovering subsystem to issue resets of the AC components. The power system may also communicate with a bus connected to the AC components (eg, system bus 110). Address remapper 128 may remain in a reset or disabled state so that the AC component may have a static address in the physical address space. Since signal 122 from the SRE is on, the AC component may prevent access to the AC component's configuration data from any other transactions or components.
系統可接收來自電力管理器之一恢復請求及一AC組件之一識別(ID) (402)。例如，在完成AC組件及匯流排之通電序列之後，電力管理器可將一恢復請求(例如，restoreReq 138信號)發出至SRE，且可提供待恢復之AC組件之ID (例如，restoreSswrpid 140信號)。電力管理器可等待，直至接收來自SRE之一完成回應或一錯誤回應。The system may receive a restore request from the power manager and an identification (ID) of an AC component (402). For example, after completing the power-on sequence of the AC component and bus, the power manager may issue a restore request (e.g., restoreReq 138 signal) to the SRE and may provide the ID of the AC component to be restored (e.g., restoreSswrpid 140 signal) . The power manager may wait until receiving a completion response or an error response from the SRE.
系統可判定是否在一AC表中定義識別(404)。例如，在接收到恢復請求之後，SRE可檢查是否在定義AC組件之AC表中定義所請求之AC組件或AC組件之子系統。如果系統判定未在AC表中定義識別，則系統可發出一錯誤回應(406)。The system may determine whether the identification is defined in an AC table (404). For example, after receiving a restore request, the SRE may check whether the requested AC component or a subsystem of the AC component is defined in the AC table that defines the AC component. If the system determines that the identity is not defined in the AC table, the system may issue an error response (406).
在一些實施方案中，當組態資料被儲存在隔離本端記憶體中時，系統可使用組態資料之一數位指紋來保護組態資料免受可能篡改的影響。當將AC組件之組態資料儲存在隔離本端記憶體中時，系統可運算組態資料之一數位指紋，例如，一校驗和或一密碼雜湊。可在保存操作時運算及保存數位指紋。當系統執行恢復操作時，系統可運算從隔離本端記憶體恢復之組態資料之一數位指紋。系統可將所恢復組態資料之數位指紋與在保存操作時運算之數位指紋進行比較。如果兩個數位指紋不匹配，則系統可產生一系統錯誤，且恢復操作可中止。如果兩個數位指紋匹配，則系統可判定AC組件之組態資料在其被儲存在隔離本端記憶體中時尚未被篡改。In some embodiments, when configuration data is stored in isolated local memory, the system may use a digital fingerprint of the configuration data to protect the configuration data from possible tampering. When an AC component's configuration data is stored in isolated local memory, the system may compute a digital fingerprint of the configuration data, such as a checksum or a cryptographic hash. Digital fingerprints can be calculated and saved during the save operation. When the system performs a recovery operation, the system can calculate a digital fingerprint of the configuration data recovered from the isolated local memory. The system can compare the digital fingerprint of the restored configuration data with the digital fingerprint calculated during the save operation. If the two digital fingerprints do not match, the system may generate a system error and the recovery operation may be aborted. If the two digital fingerprints match, the system can determine that the AC component's configuration data has not been tampered with when it is stored in isolated local memory.
如果系統判定在AC表中定義識別，則系統可判定AC組件先前是否保存在隔離本端記憶體中(408)。例如，SRE可藉由在SRE之本端表中檢查AC組件之對應條目之VLD位元來檢查先前是否保存AC組件。如果系統判定AC組件先前未保存在隔離本端記憶體中，則系統可發出一錯誤回應(406)。例如，如果VLD位元指示AC組件先前未保存在隔離本端記憶體中，則SRE可將一錯誤回應發送至電力管理器。If the system determines that the identification is defined in the AC table, the system may determine whether the AC component was previously stored in isolation local memory (408). For example, the SRE may check whether the AC component was previously saved by checking the VLD bits of the AC component's corresponding entry in the SRE's local table. If the system determines that the AC component was not previously stored in isolated local memory, the system may issue an error response (406). For example, if the VLD bit indicates that the AC component was not previously stored in isolated local memory, the SRE may send an error response to the power manager.
如果系統判定AC組件先前保存在隔離本端記憶體中，則系統可從AC表獲得AC組件之一開始位址(410)。例如，如果VLD位元指示AC組件先前保存在隔離本端記憶體中，則SRE可讀取AC表中指示之AC組件之開始位址。在一些實施方案中，SRE接收恢復一子系統中之複數個AC組件之一恢復請求及子系統之一ID。SRE可讀取AC表中指示之子系統之開始位址。SRE可包含一寫入指標，且SRE可將寫入指標設定至子系統之開始位址處之第一AC組件(例如，組件0)。在SRE完成寫入第一AC組件之後，SRE可移動寫入指標以指向子系統中之下一AC組件。If the system determines that the AC component was previously stored in isolated local memory, the system may obtain the start address of one of the AC components from the AC table (410). For example, if the VLD bit indicates that the AC component was previously stored in isolated local memory, the SRE may read the starting address of the AC component indicated in the AC table. In some embodiments, the SRE receives a restore request to restore a plurality of AC components in a subsystem and an ID of the subsystem. The SRE can read the starting address of the subsystem indicated in the AC table. The SRE may include a write pointer, and the SRE may set the write pointer to the first AC component (eg, component 0) at the starting address of the subsystem. After the SRE completes writing to the first AC component, the SRE may move the write pointer to point to the next AC component in the subsystem.
系統可獲得儲存在隔離本端記憶體中之AC組件之組態資料之一開始位址(412)。例如，SRE可從其本端表載入儲存在隔離本端記憶體中之組態資料之開始位址。SRE可包含一讀取指標以存取隔離本端記憶體以進行恢復，且SRE可將讀取指標設定至開始位址。在一些實施方案中，SRE可包含一恢復狀態機208，且恢復狀態機208可儲存讀取指標及寫入指標。The system may obtain one of the starting addresses (412) of the configuration data of the AC component stored in the isolated local memory. For example, an SRE can load the starting address of configuration data stored in isolated local memory from its local table. The SRE may include a read pointer to access isolated local memory for recovery, and the SRE may set the read pointer to the starting address. In some implementations, the SRE may include a recovery state machine 208, and the recovery state machine 208 may store read indicators and write indicators.
系統可從隔離本端記憶體讀取AC組件之組態資料(414)。例如，系統可使用指向儲存在隔離本端記憶體中之組態資料之讀取指標來讀取AC組件之組態資料。系統可寫入AC組件之組態資料(416)。在一些實施方案中，在將寫入指標設定至AC組件且將讀取指標設定至隔離本端記憶體中之組態資料之開始位址之後，SRE可發出一初始讀取以獲得儲存在隔離本端記憶體中之AC組件之組態資料之大小資訊。例如，SRE可獲得SRE在恢復操作期間需要完成之最大寫入次數。系統可循序從隔離本端記憶體讀取組態資料之一部分，且可循序將該部分寫入至AC組件，直至達到組態資料之大小。例如，SRE可從隔離本端記憶體讀取組態資料，且可用指示此通信係來自SRE之一信號將組態資料寫入至AC組件。此程序可在由AC組件之大小資訊指示之AC組件之全部部分上重複。The system can read the configuration data of the AC component from the isolated local memory (414). For example, the system can read the AC component's configuration data using a read pointer that points to the configuration data stored in isolated local memory. The system can write the configuration data of the AC component (416). In some embodiments, after setting the write indicator to the AC component and setting the read indicator to the starting address of the configuration data in the isolation local memory, the SRE may issue an initial read to obtain the configuration data stored in the isolation Size information of the configuration data of the AC component in local memory. For example, the SRE can obtain the maximum number of writes that the SRE needs to complete during the recovery operation. The system can sequentially read a portion of the configuration data from the isolated local memory, and can sequentially write the portion to the AC component until the size of the configuration data is reached. For example, the SRE can read configuration data from the isolated local memory and write the configuration data to the AC component with a signal indicating that the communication is from the SRE. This procedure can be repeated on all portions of the AC component indicated by the AC component's size information.
在一些實施方案中，在將組態資料之第一部分寫入至AC組件之後，該信號可導致AC組件進入其中AC組件僅可由SRE存取之一狀態。例如，在第一次寫入之後，AC組件可識別恢復操作已起始，且AC組件可阻止從其他組件或異動存取其組態資料之任何嘗試。當對AC組件之恢復完成時，AC組件可解鎖從其他組件或異動對其組態資料之存取。In some implementations, after writing the first portion of the configuration data to the AC component, this signal may cause the AC component to enter a state where the AC component is only accessible by the SRE. For example, after the first write, the AC component can recognize that a recovery operation has begun, and the AC component can block any attempts to access its configuration data from other components or transactions. When the recovery of the AC component is complete, the AC component can unlock access to its configuration data from other components or transactions.
在一些實施方案中，在恢復期間，如果對AC組件之一寫入操作導致一錯誤回應，則恢復操作可被視為已失敗。SRE可將一錯誤回應(例如，restoreResp 144信號)發出至電力管理器。在一些實施方案中，在此情境中，電力管理器可判定執行運算裝置之一冷重啟。In some embodiments, during recovery, if a write operation to one of the AC components results in an error response, the recovery operation may be considered failed. The SRE may send an error response (eg, restoreResp 144 signal) to the power manager. In some implementations, in this scenario, the power manager may decide to perform a cold restart of the computing device.
在一些實施方案中，當在一段時間內或同時接收到多個恢復請求時，SRE可將從電力管理器接收之多個恢復請求排入佇列。SRE可將一回應訊息(例如，restoreResp 144信號)發送至電力管理器。回應訊息可包含被排入佇列之AC組件之ID或連同待保存之子系統之一識別。In some implementations, the SRE may queue multiple restore requests received from the power manager when multiple restore requests are received within a period of time or simultaneously. The SRE may send a response message (eg, restoreResp 144 signal) to the power manager. The response message may contain the ID of the queued AC component or along with an identification of the subsystem to be saved.
在一些實施方案中，SRE可包含一寫入計數器，該寫入計數器計數SRE在恢復操作期間已完成之寫入次數。如果寫入計數器之值小於保存在隔離位置記憶體中之組態資料之大小，例如，最大寫入次數，則SRE可繼續將組態資料之下一部分寫入至AC組件。如果寫入計數器之值不小於保存在隔離本端記憶體中之組態資料之大小，則系統可判定恢復操作成功完成。In some implementations, the SRE may include a write counter that counts the number of writes that the SRE has completed during recovery operations. If the value of the write counter is less than the size of the configuration data stored in the isolated location memory, for example, the maximum number of writes, the SRE can continue to write the next portion of the configuration data to the AC component. If the value of the write counter is not less than the size of the configuration data stored in the isolated local memory, the system can determine that the recovery operation is successfully completed.
系統可將一恢復完成回應(例如，restoreRdy 142信號)發送至電力管理器(418)。在一些實施方案中，SRE可需要恢復一子系統中之複數個AC組件。SRE可循序恢復AC表中識別之子系統之各AC組件之組態資料。當子系統之全部AC組件成功恢復之後，系統可將一恢復完成回應發送至電力管理器。The system may send a restore complete response (eg, restoreRdy 142 signal) to the power manager (418). In some implementations, the SRE may need to restore multiple AC components in a subsystem. SRE can sequentially restore the configuration data of each AC component of the subsystem identified in the AC table. When all AC components of the subsystem are successfully restored, the system may send a restoration completion response to the power manager.
在一些實施方案中，電力管理器可發送對應於需要被恢復之複數個AC組件之識別之一序列。SRE可平行處理識別之序列，且可平行恢復複數個AC組件之組態資料。因此，系統可改良效率且增強恢復操作之效能。In some implementations, the power manager may send a sequence corresponding to the identification of a plurality of AC components that need to be restored. SRE can process the identified sequence in parallel and restore the configuration data of multiple AC components in parallel. Therefore, the system can improve efficiency and enhance the effectiveness of recovery operations.
在一些實施方案中，在成功完成恢復之後，SRE可使其本端表中之欄位(例如，VLD位元)無效化以指示AC組件不再被保存在隔離本端記憶體中。例如，SRE可將本端表中之一對應條目之VLD位元設定為0。In some embodiments, upon successful completion of recovery, the SRE may invalidate a field (eg, a VLD bit) in its home table to indicate that the AC component is no longer maintained in isolated home memory. For example, the SRE may set the VLD bit of a corresponding entry in the local table to 0.
在一些實施方案中，SRE可將一信號122發送至已被恢復之子系統或AC組件。例如，該信號可指示AC組件之恢復操作已經完成。該信號可導致AC組件允許來自其他組件或異動的存取。例如，在將信號設定為0之後，一AC組件(例如，一防火牆)可進入其中基於防火牆之所恢復組態資料憑藉適當許可檢查允許異動流過防火牆的一狀態。在一些實施方案中，在由SRE成功完成恢復操作之後，電力管理器可將子系統之其餘部分從一重設狀態釋放出來以進行功能操作。因此，子系統之電力恢復完成。In some implementations, the SRE may send a signal 122 to the subsystem or AC component that has been restored. For example, the signal may indicate that the recovery operation of the AC component has been completed. This signal can cause the AC component to allow access from other components or transactions. For example, after setting the signal to 0, an AC component (eg, a firewall) may enter a state in which transactions are allowed to flow through the firewall based on appropriate permission checks based on the firewall's restored configuration data. In some embodiments, after successful completion of the recovery operation by the SRE, the power manager may release the remainder of the subsystem from a reset state for functional operation. Therefore, power restoration of the subsystem is completed.
在一些實施方案中，實例程序400可用於恢復一運算裝置中需要保存/恢復之其他類型之組件的組態資料，且一或多個組件並非安全相關AC組件。在一些實施方案中，組件可為一SoC中之一記憶體映射組件。在一些實施方案中，組件可為一SoC中之一IO映射組件。在一些實施方案中，組件可包含一運算裝置中之一或多個暫存器。即，保存恢復引擎(SRE)係一通用保存/恢復引擎，且本說明書中描述之技術並不特定於安全相關AC組件。In some implementations, the example program 400 can be used to restore configuration data of other types of components in a computing device that need to be saved/restored, and one or more components are not safety-related AC components. In some implementations, the component may be a memory mapped component in an SoC. In some implementations, the component may be an IO mapping component in an SoC. In some implementations, a component may include one or more registers in a computing device. That is, the Save Recovery Engine (SRE) is a general save/restore engine, and the techniques described in this specification are not specific to security-related AC components.
圖5係一實例通用保存恢復介面工具集500之一圖。在一些實施方案中，一運算裝置可包含具有一各自通用AC組件(例如，一SMMU)之一通用模組或用戶端裝置。由於調適AC組件以支援SRE之保存及恢復操作可能是困難或不可能的，所以運算裝置100可包含一介面工具集(例如，一通用保存恢復介面工具集500)以幫助支援SRE之保存及恢復操作。Figure 5 is a diagram of an example universal save and restore interface toolset 500. In some implementations, a computing device may include a universal module or client device having a respective universal AC component (eg, an SMMU). Since it may be difficult or impossible to adapt AC components to support SRE save and restore operations, the computing device 100 may include an interface toolset (eg, a universal save and restore interface toolset 500 ) to help support SRE save and restore operations. operate.
介面工具集可包含一保存恢復追蹤器502，該保存恢復追蹤器502追蹤保存操作或恢復操作何時開始及結束。保存恢復追蹤器502可識別來自SRE之一保存請求或一恢復請求。例如，當SRE存取AC組件之第一位置時，保存恢復追蹤器502可識別一保存操作或一恢復操作之開始。The interface toolset may include a save-restore tracker 502 that tracks when a save operation or restore operation begins and ends. Save-restore tracker 502 may identify a save request or a restore request from the SRE. For example, the save-restore tracker 502 may identify the start of a save operation or a restore operation when the SRE accesses the first location of the AC component.
恢復追蹤器502可導致通用AC組件進入其中通用AC組件僅可由SRE及介面工具集500存取之一狀態。例如，恢復追蹤器502可在來自其他組件或異動之保存/恢復操作期間停用系統對AC組件之組態資料之存取。因此，追蹤器502可防止系統在操作期間改變通用AC組件之狀態。Restoring the tracker 502 may cause the generic AC component to enter a state where the generic AC component is only accessible by the SRE and interface toolset 500 . For example, restore tracker 502 may disable system access to the AC component's configuration data during save/restore operations from other components or transactions. Therefore, tracker 502 prevents the system from changing the state of the general AC components during operation.
在成功完成保存操作之後，追蹤器502可使AC組件能夠進入其中不可由其他組件或異動存取AC組件之組態資料之一狀態，直至AC組件成功恢復。例如，SRE可將一信號504 (例如，圖1中之信號122)發送至保存恢復追蹤器502以識別AC組件或AC組件之子系統之恢復操作之完成。Upon successful completion of the save operation, tracker 502 may enable the AC component to enter a state in which the AC component's configuration data is inaccessible by other components or transactions until the AC component is successfully restored. For example, the SRE may send a signal 504 (eg, signal 122 in FIG. 1 ) to the save recovery tracker 502 to identify completion of the recovery operation of the AC component or a subsystem of the AC component.
介面工具集500可經組態以將通用AC組件之組態資料之大小資訊發送至SRE 。例如，介面工具集可運算保存操作之大小資訊，且可在保存操作之第一次讀取期間將大小資訊發送至SRE。The interface toolset 500 can be configured to send size information of the generic AC component's configuration data to the SRE. For example, the interface toolset can compute size information for a save operation and send the size information to the SRE during the first read of the save operation.
圖6係用於一第三方存取控制(AC)組件之一實例保存恢復介面工具集600之一圖。例如，保存恢復介面工具集600可為用於圖1中之第三方AC組件116之介面工具集118。FIG. 6 is a diagram of an instance save and restore interface toolset 600 for a third-party access control (AC) component. For example, save-restore interface toolset 600 may be interface toolset 118 for third-party AC component 116 in FIG. 1 .
運算裝置可包含一第三方AC組件。例如，第三方組件可為一第三方IP供應商，例如，包含一異動控制單元(TCU)及一異動緩衝單元(TBU)之一SMMU。運算裝置可包含經組態以實施追蹤保存操作或恢復操作何時開始及結束之一保存恢復追蹤器602之一介面工具集600。例如，保存恢復追蹤器602可識別來自SRE之一保存請求或一恢復請求。當使用指示存取係來自一SRE之一信號對TCU/TBU組件之第一位置進行存取時，可識別保存/恢復操作之開始。The computing device may include a third-party AC component. For example, the third-party component may be a third-party IP provider, such as an SMMU including a transaction control unit (TCU) and a transaction buffer unit (TBU). The computing device may include an interface toolset 600 configured to implement a save-restore tracker 602 that tracks when save operations or restore operations begin and end. For example, save-restore tracker 602 may identify a save request or a restore request from the SRE. The beginning of a save/restore operation is identified when the first location of the TCU/TBU component is accessed using a signal indicating that the access is from an SRE.
在一些實施方案中，介面工具集600可經組態以將一信號發送至第三方AC組件，且該信號可導致第三方組件進入其中第三方AC組件僅可由SRE及介面工具集600存取之一狀態，直至SRE完成保存或恢復第三方AC組件。例如，在識別一保存請求或一恢復請求之後，追蹤器可在保存/恢復操作期間鎖定系統對一SMMU之組態資料之存取。當保存或恢復操作已開始時，追蹤器602可停用源自非SRE起始器之任何存取。因此，追蹤器602可防止系統在保存/恢復操作期間改變第三方組件之組態資料，例如，包含狀態資料。In some implementations, the interface toolset 600 can be configured to send a signal to the third-party AC component, and the signal can cause the third-party component to enter where the third-party AC component can only be accessed by the SRE and the interface toolset 600 A state until the SRE completes saving or restoring the third-party AC component. For example, after identifying a save request or a restore request, the tracker may lock system access to an SMMU's configuration data during the save/restore operation. When a save or restore operation has begun, tracker 602 may disable any access originating from non-SRE initiators. Therefore, tracker 602 prevents the system from changing the configuration data of third-party components during save/restore operations, for example, including state data.
在成功完成保存操作之後，追蹤器602可使AC組件能夠進入其中不可由其他組件或異動存取AC組件之組態資料之一狀態，直至AC組件成功恢復。例如，SRE可將一信號604 (例如，圖1中之信號122)發送至保存恢復追蹤器602以識別AC組件或AC組件之子系統之恢復操作之完成。Upon successful completion of the save operation, tracker 602 may enable the AC component to enter a state in which the AC component's configuration data is inaccessible by other components or transactions until the AC component is successfully restored. For example, the SRE may send a signal 604 (eg, signal 122 in FIG. 1 ) to the save recovery tracker 602 to identify completion of the recovery operation of the AC component or a subsystem of the AC component.
介面工具集600可經組態以將第三方AC組件之組態資料之大小資訊發送至SRE 。例如，介面工具集可運算保存操作之大小資訊，且可在保存操作之第一次讀取期間將大小資訊發送至SRE。The interface toolset 600 can be configured to send size information of the third-party AC component's configuration data to the SRE. For example, the interface toolset can compute size information for a save operation and send the size information to the SRE during the first read of the save operation.
在一些實施方案中，介面工具集600可包含第三方AC組件中之各模組之一位址映射表。例如，介面工具集600可包含TCU之一位址映射表(例如，位址映射表606)及TBU之各者之一位址映射表(例如，位址映射表608、610…612)。在保存/恢復操作期間，位址映射表可將一輸入位址轉譯為第三方AC組件中之各模組之位址，例如，TCU/TBU位址。在一些實施方案中，介面工具集600可經組態以執行壓實待由SRE保存在一隔離本端記憶體中之酬載之一機制之一佈建。In some implementations, the interface toolset 600 may include an address mapping table for each module in the third-party AC component. For example, the interface toolset 600 may include an address mapping table for the TCU (eg, address mapping table 606) and an address mapping table for each of the TBUs (eg, address mapping tables 608, 610...612). During the save/restore operation, the address mapping table can translate an input address into the address of each module in the third-party AC component, for example, the TCU/TBU address. In some implementations, the interface toolset 600 may be configured to perform deployment of a mechanism for compacting payloads to be stored by the SRE in an isolated local memory.
例如，介面工具集600可使用位址映射表來選擇TCU/TBU中需要被保存之關鍵控制暫存器。因此，可減少待保存之組態資料量。For example, the interface toolset 600 may use an address mapping table to select critical control registers in the TCU/TBU that need to be saved. Therefore, the amount of configuration data to be saved can be reduced.
本說明書中描述之標的物以及動作及操作之實施例可在以下中實施：數位電子電路、有形體現之電腦軟體或韌體、電腦硬體(包含本說明書中揭示之結構及其等結構等效物)，或其等之一或多者之組合。本說明書中描述之標的物之實施例可被實施為一或多個電腦程式，即，編碼於一有形非暫時性儲存載體上以由資料處理設備執行或控制資料處理設備之操作的電腦程式指令之一或多個模組。替代地或另外，可將程式指令編碼於一人工產生之傳播信號(例如，一機器產生之電、光學或電磁信號)上，該傳播信號經產生以編碼用於傳輸至適合接收器設備之資訊以由一資料處理設備執行。電腦儲存媒體可為一機器可讀儲存裝置、一機器可讀儲存基板、一隨機或串列存取記憶體裝置或其等之一或多者之一組合或可為其等之部分。一電腦儲存媒體並非一傳播信號。Embodiments of the subject matter and actions and operations described in this specification may be implemented in: digital electronic circuits, tangible embodiments of computer software or firmware, computer hardware (including the structures disclosed in this specification and their structural equivalents) object), or a combination of one or more of them. Embodiments of the subject matter described in this specification may be implemented as one or more computer programs, that is, computer program instructions encoded on a tangible non-transitory storage carrier to be executed by or to control the operation of data processing equipment. one or more modules. Alternatively or additionally, the program instructions may be encoded in an artificially generated propagated signal (e.g., a machine-generated electrical, optical, or electromagnetic signal) generated to encode information for transmission to a suitable receiver device. to be executed by a data processing device. The computer storage medium may be or be part of a machine-readable storage device, a machine-readable storage substrate, a random or serial access memory device, or a combination of one or more of these. A computer storage medium is not a broadcast signal.
本說明書中描述之處理組件指代資料處理硬體且涵蓋用於處理資料之所有種類之設備、裝置及機器，包含(藉由實例)一可程式化處理器、一微處理器、一電腦或多個處理器或電腦。設備亦可為或進一步包含專用邏輯電路，例如，一FPGA (場可程式化閘陣列)或一ASIC (特定應用積體電路)。設備除包含硬體之外，亦可視情況包含產生電腦程式之一執行環境之程式碼，例如，構成處理器韌體、一協定堆疊、或其等之一或多者之一組合之程式碼。Processing components described in this specification refer to data processing hardware and encompass all types of equipment, devices and machines used to process data, including (by way of example) a programmable processor, a microprocessor, a computer or Multiple processors or computers. The device may also be or further include dedicated logic circuitry, such as an FPGA (Field Programmable Gate Array) or an ASIC (Application Specific Integrated Circuit). In addition to hardware, a device may also optionally include code that generates an execution environment for a computer program, for example, code that constitutes processor firmware, a protocol stack, or a combination of one or more of these.
一電腦程式(其亦可被稱為或描述為一程式、軟體、一軟體應用程式、一應用程式、一模組、一軟體模組、一引擎、一指令碼或程式碼)可以任何形式之程式設計語言(包含編譯或解譯語言或宣告或程序語言)撰寫；且其可部署為任何形式，包含作為一獨立程式或作為一模組、組件、引擎、副常式或適於在一運算環境中執行之其他單元，該環境可包含在一或多個位置中由一資料通信網路互連之一或多個組件。A computer program (which may also be called or described as a program, software, a software application, an application, a module, a software module, an engine, a script or code) may be in any form Written in a programming language (including a compiled or interpreted language or a declarative or procedural language); and which may be deployed in any form, including as a stand-alone program or as a module, component, engine, subroutine, or suitable for use in an operation Other units executing within an environment, which may include one or more components in one or more locations interconnected by a data communications network.
一電腦程式可(但不必)對應於一檔案系統中之一檔案。一電腦程式可儲存於保存其他程式或資料(例如，儲存於一標記語言文件中之一或多個指令碼)之一檔案之一部分中、儲存於專用於所討論程式之一單一檔案中，或儲存於多個協同檔案(例如，儲存程式碼之一或多個模組、子程式或部分之檔案)中。A computer program may, but need not, correspond to a file in a file system. A computer program may be stored as part of a file that holds other programs or data (for example, one or more scripts stored in a markup language file), in a single file that is specific to the program in question, or Stored in multiple collaborative files (for example, files that store the code for one or more modules, subroutines, or parts).
除上文描述之實施例之外，以下實施例亦為創新的：In addition to the embodiments described above, the following embodiments are also innovative:
實施例1係一種裝置，其包括： 一電力管理器，其經組態以控制提供至該裝置上之複數個電力域之電力，其中各電力域具有一各自用戶端裝置， 其中各各自用戶端裝置具有經組態以控制該裝置上之哪些其他組件可與該各自用戶端裝置通信之一各自存取控制(AC)組件；及 一保存恢復引擎(SRE)，其經組態以將定位於受到起始一電力崩潰操作之該電力管理器影響之一電力域中之一AC組件之組態資料保存在一隔離本端記憶體中，且 其中該SRE經組態以當該電力管理器將該電力恢復至該AC組件之該電力域時從該隔離本端記憶體恢復該AC組件之該組態資料。 Embodiment 1 is a device, which includes: a power manager configured to control power provided to a plurality of power domains on the device, each power domain having a respective client device, wherein each respective client device has a respective access control (AC) component configured to control which other components on the device can communicate with the respective client device; and A save recovery engine (SRE) configured to save configuration data of an AC component located in a power domain affected by the power manager initiating a power crash operation to an isolated local memory middle, and wherein the SRE is configured to restore the configuration data of the AC component from the isolated local memory when the power manager restores the power to the power domain of the AC component.
實施例2係實施例1之裝置，其中該SRE包括一本端表，該本端表針對該AC組件包含： 一第一欄位，其指示該AC組件是否成功保存在該隔離本端記憶體中；及 一第二欄位，其指示該隔離本端記憶體中執行該保存操作及該恢復操作之一開始位址。 實施例3係實施例1之裝置，其中將該AC組件之該組態資料保存在該隔離本端記憶體中包括： 藉由該SRE接收來自該電力管理器之一保存請求及該AC組件之一識別； 藉由該SRE判定在定義該AC組件之一存取控制表中定義該識別； 藉由該SRE從該AC組件讀取該AC組件之該組態資料；及 藉由該SRE將該AC組件之該組態資料寫入該隔離本端記憶體中。 Embodiment 2 is the device of Embodiment 1, wherein the SRE includes a local table, and the local table includes for the AC component: a first field indicating whether the AC component was successfully saved in the isolated local memory; and A second field indicating a starting address in the isolated local memory for performing the save operation and the restore operation. Embodiment 3 is the device of Embodiment 1, wherein saving the configuration data of the AC component in the isolated local memory includes: receiving, by the SRE, a save request from the power manager and an identification of the AC component; The identification is defined by the SRE determination in an access control list defining the AC component; Reading the configuration data of the AC component from the AC component through the SRE; and The SRE writes the configuration data of the AC component into the isolated local memory.
實施例4係實施例3之裝置，其中將該AC組件之該組態資料保存在該隔離本端記憶體中包括： 回應於判定在該存取控制表中定義該識別，藉由該SRE從該存取控制表獲得該AC組件之一開始位址； 藉由該SRE判定是否在該隔離本端記憶體中分配用於該AC組件之記憶體空間；及 回應於判定未分配用於該AC組件之該記憶體空間，使用該隔離本端記憶體中之一未映射位址位置分配用於該AC組件之該記憶體空間。 Embodiment 4 is the device of Embodiment 3, wherein saving the configuration data of the AC component in the isolated local memory includes: Responsive to determining that the identification is defined in the access control list, obtain, by the SRE, one of the start addresses of the AC component from the access control list; Determine by the SRE whether to allocate memory space for the AC component in the isolated local memory; and In response to determining that the memory space for the AC component is not allocated, the memory space for the AC component is allocated using one of the unmapped address locations in the isolated local memory.
實施例5係實施例3之裝置，其中保存該AC組件之該組態資料包括：藉由該SRE將一保存完成回應發送至該電力管理器。Embodiment 5 is the device of Embodiment 3, wherein saving the configuration data of the AC component includes: sending a save completion response to the power manager through the SRE.
實施例6係實施例1之裝置，其中在將該AC組件之該組態資料保存在該隔離本端記憶體中期間，該SRE經組態以將一信號發送至該AC組件，其中該信號導致該AC組件進入其中該AC組件僅可由該SRE存取之一狀態。Embodiment 6 is the device of Embodiment 1, wherein during saving the configuration data of the AC component in the isolated local memory, the SRE is configured to send a signal to the AC component, wherein the signal Causes the AC component to enter a state where the AC component is only accessible by the SRE.
實施例7係實施例1之裝置，其中從該隔離本端記憶體恢復該AC組件之該組態資料包括： 藉由該SRE接收來自該電力管理器之一恢復請求及該AC組件之一識別； 藉由該SRE判定在定義該AC組件之一存取控制表中定義該識別； 藉由該SRE從該隔離本端記憶體讀取該AC組件之該組態資料；及 將該組態資料寫入至該AC組件。 Embodiment 7 is the device of Embodiment 1, wherein restoring the configuration data of the AC component from the isolated local memory includes: receiving, by the SRE, a recovery request from the power manager and an identification of the AC component; The identification is defined by the SRE determination in an access control list defining the AC component; Reading the configuration data of the AC component from the isolated local memory by the SRE; and Write the configuration data to the AC component.
實施例8係實施例7之裝置，其中從該隔離本端記憶體恢復該AC組件之該組態資料包括： 回應於判定在該存取控制表中定義該識別，藉由該SRE判定該AC組件先前保存在該隔離本端記憶體中； 作為回應，藉由該SRE從該存取控制表獲得該AC組件之一開始位址；及 藉由該SRE獲得儲存在該隔離本端記憶體中之該AC組件之該組態資料之一開始位址。 Embodiment 8 is the device of Embodiment 7, wherein restoring the configuration data of the AC component from the isolated local memory includes: Responsive to determining that the identification is defined in the access control list, determining by the SRE that the AC component was previously stored in the isolated local memory; In response, obtain one of the starting addresses of the AC component from the access control list by the SRE; and A starting address of the configuration data of the AC component stored in the isolated local memory is obtained through the SRE.
實施例9係實施例7之裝置，其中恢復該AC組件之該組態資料包括：藉由該SRE將一恢復完成回應發送至該電力管理器。Embodiment 9 is the device of embodiment 7, wherein restoring the configuration data of the AC component includes: sending a restoration completion response to the power manager through the SRE.
實施例10係實施例1之裝置，其中在恢復該隔離本端記憶體中之該AC組件之該組態資料期間，該SRE經組態以將一信號發送至該AC組件，其中該信號導致該AC組件進入其中該AC組件僅可由該SRE存取之一狀態。Embodiment 10 is the device of embodiment 1, wherein during restoration of the configuration data of the AC component in the isolated local memory, the SRE is configured to send a signal to the AC component, wherein the signal causes The AC component enters a state where the AC component is only accessible by the SRE.
實施例11係實施例1之裝置，其中該AC組件係一第三方AC組件，其中該裝置進一步包括經組態以實施追蹤該保存操作或該恢復操作何時開始及結束之一保存恢復追蹤器之一介面工具集。Embodiment 11 is the device of embodiment 1, wherein the AC component is a third-party AC component, wherein the device further includes a save-restore tracker configured to implement a save-restore tracker that tracks the save operation or when the restore operation begins and ends. An interface toolset.
實施例12係實施例11之裝置，其中該介面工具集經組態以將一信號發送至該第三方AC組件，其中該信號導致該第三方AC組件進入其中該第三方AC組件僅可由該SRE及該介面工具集存取之一狀態，直至該SRE完成保存或恢復該第三方AC組件。Embodiment 12 is the apparatus of embodiment 11, wherein the interface toolset is configured to send a signal to the third-party AC component, wherein the signal causes the third-party AC component to enter wherein the third-party AC component can only be accessed by the SRE And the interface tool set accesses a state until the SRE completes saving or restoring the third-party AC component.
實施例13係實施例1之裝置，其中將該AC組件之該組態資料保存在該隔離本端記憶體中包括： 從該AC組件且藉由該SRE獲得需要被保存在該隔離本端記憶體中之該組態資料之大小； 藉由該SRE將該組態資料之該大小寫入該隔離本端記憶體中；及 循序從該AC組件讀取該組態資料之一部分，且將該部分寫入至該隔離本端記憶體，直至達到該組態資料之該大小。 Embodiment 13 is the device of Embodiment 1, wherein saving the configuration data of the AC component in the isolated local memory includes: Obtain the size of the configuration data that needs to be saved in the isolated local memory from the AC component through the SRE; writing the size of the configuration data into the isolated local memory by the SRE; and A portion of the configuration data is sequentially read from the AC component and written to the isolated local memory until the size of the configuration data is reached.
實施例14係實施例1之裝置，其中從該隔離本端記憶體恢復該AC組件之該組態資料包括： 從該隔離本端記憶體且藉由該SRE獲得需要被恢復之該組態資料之大小；及 循序從該隔離本端記憶體讀取該組態資料之一部分，且將該部分寫入至該AC組件，直至達到該組態資料之該大小。 Embodiment 14 is the device of Embodiment 1, wherein restoring the configuration data of the AC component from the isolated local memory includes: The size of the configuration data that needs to be restored is obtained from the isolated local memory through the SRE; and A portion of the configuration data is sequentially read from the isolated local memory and written to the AC component until the size of the configuration data is reached.
實施例15係實施例1之裝置，其中該SRE經組態以： 將待保存之該AC組件之該組態資料之一第一數位指紋保存在該隔離本端記憶體中， 獲得從該隔離本端記憶體恢復之該AC組件之該組態資料之一第二數位指紋，及 至少基於比較該第一數位指紋與該第二數位指紋來判定儲存在該隔離本端記憶體中之該組態資料是否被篡改。 Embodiment 15 is the device of embodiment 1, wherein the SRE is configured to: Save one of the first digital fingerprints of the configuration data of the AC component to be saved in the isolated local memory, obtain a second digital fingerprint of the configuration data of the AC component recovered from the isolated local memory, and Determining whether the configuration data stored in the isolated local memory has been tampered with is at least based on comparing the first digital fingerprint and the second digital fingerprint.
實施例16係實施例1之裝置，其中該隔離本端記憶體包括一動態隨機存取記憶體(DRAM)，其中該SRE經組態以將該AC組件之該組態資料保存在該DRAM中，且其中該SRE使用一密碼方法保護該組態資料不被篡改。Embodiment 16 is the device of embodiment 1, wherein the isolated local memory includes a dynamic random access memory (DRAM), and wherein the SRE is configured to save the configuration data of the AC component in the DRAM , and the SRE uses a password method to protect the configuration data from being tampered with.
實施例17係一種方法，其包括： 藉由一保存恢復引擎(SRE)接收來自一電力管理器之一保存請求及一存取控制(AC)組件之一識別； 藉由該SRE從一AC表獲得該AC組件之一開始位址； 藉由該SRE從該AC組件讀取該AC組件之組態資料； 藉由該SRE將該AC組件之該組態資料寫入隔離本端記憶體中；及 藉由該SRE將一保存完成回應發送至該電力管理器。 Embodiment 17 is a method, which includes: receiving a save request from a power manager and an identification of an access control (AC) component by a save recovery engine (SRE); Obtain one of the start addresses of the AC component from an AC table through the SRE; Read the configuration data of the AC component from the AC component through the SRE; Write the configuration data of the AC component into the isolated local memory through the SRE; and A save completion response is sent to the power manager by the SRE.
實施例18係一或多種非暫時性儲存媒體，其或其等經編碼具有當由一運算裝置之一保存恢復引擎(SRE)執行時導致該SRE執行包括以下之操作之指令： 接收來自一電力管理器之一保存請求及一存取控制(AC)組件之一識別； 從一AC表獲得該AC組件之一開始位址； 從該AC組件讀取該AC組件之組態資料； 將該AC組件之該組態資料寫入隔離本端記憶體中；及 將一保存完成回應發送至該電力管理器。 Embodiment 18 is one or more non-transitory storage media encoded with instructions that when executed by a save recovery engine (SRE) of a computing device cause the SRE to perform operations including: receiving a save request from a power manager and an identification of an access control (AC) component; Obtain the start address of one of the AC components from an AC table; Read the configuration data of the AC component from the AC component; Write the configuration data of the AC component into the isolated local memory; and Send a save completion response to the power manager.
實施例19係一種方法，其包括： 藉由一保存恢復引擎(SRE)接收來自一電力管理器之一恢復請求及一存取控制(AC)組件之一識別； 藉由該SRE從一AC表獲得該AC組件之一開始位址； 藉由該SRE從隔離本端記憶體讀取該AC組件之組態資料； 藉由該SRE將該組態資料寫入至該AC組件；及 藉由該SRE將一恢復完成回應發送至該電力管理器。 Embodiment 19 is a method, which includes: receiving a restore request from a power manager and an identification of an access control (AC) component by a save-restore engine (SRE); Obtain one of the start addresses of the AC component from an AC table through the SRE; Use the SRE to read the configuration data of the AC component from the isolated local memory; writing the configuration data to the AC component through the SRE; and A recovery completion response is sent by the SRE to the power manager.
實施例20係一或多種非暫時性儲存媒體，其或其等經編碼具有當由一運算裝置之一保存恢復引擎(SRE)執行時導致該SRE執行包括以下之操作之指令： 接收來自一電力管理器之一恢復請求及一存取控制(AC)組件之一識別； 從一AC表獲得該AC組件之一開始位址； 從隔離本端記憶體讀取該AC組件之組態資料；及 將該組態資料寫入至該AC組件；及 將一恢復完成回應發送至該電力管理器。 Embodiment 20 is one or more non-transitory storage media encoded with instructions that when executed by a save recovery engine (SRE) of a computing device cause the SRE to perform operations including: receiving a restore request from a power manager and an identification of an access control (AC) component; Obtain the start address of one of the AC components from an AC table; Read the configuration data of the AC component from the isolated local memory; and Write the configuration data to the AC component; and Send a recovery completion response to the power manager.
雖然本說明書含有許多特定實施方案細節，但此等不應被解釋為對任何發明之範疇或所主張或可主張之內容之範疇之限制，而應被解釋為可特定於特定發明之特定實施例之特徵之描述。本說明書中在分開的實施例之內容脈絡中描述之某些特徵亦可在一單一實施例中組合地實施。相反地，在一單一實施例之內容脈絡中描述之各種特徵亦可分開地或以任何適合子組合在多項實施例中實施。再者，儘管上文可將特徵描述為以特定組合起作用且甚至最初如此主張，然在一些情況中，來自一所主張組合之一或多個特徵可從組合中免除，且發明申請專利範圍可係關於一子組合或一子組合之變動。Although this specification contains many specific embodiment details, these should not be construed as limiting the scope of any invention or the scope of what is or may be claimed, but rather as being specific to the specific embodiments of the particular invention. Description of the characteristics. Certain features that are described in this specification in the context of separate embodiments can also be implemented combined in a single embodiment. Conversely, various features that are described in the context of a single embodiment can also be implemented in multiple embodiments separately or in any suitable subcombination. Furthermore, although features may be described above as functioning in a particular combination and even initially claimed as such, in some cases one or more features from a claimed combination may be excluded from the combination and the invention is not patentable. It can be related to a sub-combination or a change in a sub-combination.
類似地，雖然按一特定順序在圖式中描繪且在發明申請專利範圍中敘述操作，但此不應被理解為要求按所展示之特定順序或循序順序執行此等操作或執行全部所繪示操作以達成所要結果。在某些境況中，多任務處理及平行處理可為有利的。再者，上文描述之實施例中之各種系統模組及組件之分離不應被理解為在所有實施例中皆需要此分離，且應理解，所描述之程式組件及系統可大體上一起整合於一單一軟體產品中或封裝至多個軟體產品中。Similarly, although a specific order is depicted in the drawings and operations are described in the claimed invention, this should not be construed as requiring that such operations be performed in the specific order shown or sequential order or that all illustrated operations be performed. Operate to achieve desired results. In certain situations, multitasking and parallel processing can be advantageous. Furthermore, the separation of various system modules and components in the embodiments described above should not be understood as requiring such separation in all embodiments, and it should be understood that the program components and systems described can generally be integrated together. In a single software product or packaged in multiple software products.
已描述標的物之特定實施例。其他實施例在以下發明申請專利範圍之範疇內。例如，在發明申請專利範圍中敘述之動作可按一不同順序執行且仍達成所要結果。作為一個實例，在附圖中描繪之程序不一定要求所展示之特定順序或循序順序來達成所要結果。在一些情況中，多任務處理及平行處理可為有利的。Specific embodiments of the subject matter have been described. Other embodiments are within the scope of the following invention claims. For example, the actions described in the patent application may be performed in a different order and still achieve the desired results. As one example, the procedures depicted in the figures do not necessarily require the specific order shown, or sequential order, to achieve desirable results. In some cases, multitasking and parallel processing can be advantageous.
100:運算裝置 102:保存恢復引擎(SRE) 104:存取控制(AC)表 106:隔離本端記憶體 108:電力管理器 110:系統匯流排 112:存取控制(AC)組件 114:存取控制(AC)組件 116:第三方存取控制(AC)組件 118:介面工具集 120:存取控制(AC)組件 122:信號 124:子系統電力管理組件 126:子系統電力管理組件 128:位址再映射器 130:「saveReq」 132:「saveSswpid」 134:「saveRdy」 136:saveResp 138:「restoreReq」 140:「restoreSswpid」 142:「restoreRdy」 144:restoreResp 150:電力域 152:電力域 200:保存恢復引擎(SRE) 202:存取控制(AC)表 204:隔離本端記憶體 206:保存狀態機 208:恢復狀態機 210:本端表 212:保存介面 214:恢復介面 216:先進可擴展介面(AXI)讀取通道 218:先進可擴展介面(AXI)寫入通道 220:信號 300:程序 302:步驟 304:步驟 306:步驟 308:步驟 310:步驟 312:步驟 314:步驟 316:步驟 318:步驟 400:程序 402:步驟 404:步驟 406:步驟 408:步驟 410:步驟 412:步驟 414:步驟 416:步驟 418:步驟 500:通用保存恢復介面工具集 502:保存恢復追蹤器 504:信號 600:保存恢復介面工具集 602:保存恢復追蹤器 604:信號 606:位址映射表 608:位址映射表 610:位址映射表 612:位址映射表 100:Computing device 102: Save Recovery Engine (SRE) 104: Access control (AC) table 106: Isolate local memory 108:Power Manager 110:System bus 112:Access Control (AC) component 114:Access Control (AC) component 116: Third-party access control (AC) components 118:Interface tool set 120:Access Control (AC) component 122:Signal 124: Subsystem power management component 126: Subsystem power management component 128:Address remapper 130: "saveReq" 132: "saveSswpid" 134:「saveRdy」 136:saveResp 138:「restoreReq」 140: "restoreSswpid" 142:「restoreRdy」 144:restoreResp 150:Power domain 152:Power domain 200: Save Recovery Engine (SRE) 202: Access Control (AC) Table 204: Isolate local memory 206: Save state machine 208:Restore state machine 210: Local table 212:Save interface 214:Recovery interface 216: Advanced Extensible Interface (AXI) read channel 218: Advanced Extensible Interface (AXI) write channel 220:Signal 300:Program 302: Step 304: Step 306: Step 308:Step 310: Steps 312: Steps 314: Steps 316: Steps 318: Steps 400:Program 402: Step 404: Step 406: Step 408: Step 410: Steps 412: Step 414: Step 416: Steps 418: Steps 500: Universal save and restore interface tool set 502:Save restore tracker 504:Signal 600: Save recovery interface toolset 602:Save restore tracker 604:Signal 606: Address mapping table 608: Address mapping table 610: Address mapping table 612: Address mapping table
圖1係一實例運算裝置之一圖。Figure 1 is a diagram of an example computing device.
圖2係一實例保存恢復引擎(SRE)之一圖。Figure 2 is a diagram of an instance Save Recovery Engine (SRE).
圖3係用於保存組態資料之一實例程序之一流程圖。Figure 3 is a flow chart of an example program for saving configuration data.
圖4係用於恢復組態資料之一實例程序之一流程圖。Figure 4 is a flow chart of an example program for restoring configuration data.
圖5係一實例通用保存恢復介面工具集之一圖。Figure 5 is a diagram of an example of a universal save and restore interface tool set.
圖6係用於一第三方存取控制組件之一實例保存恢復介面工具集之一圖。Figure 6 is a diagram of an instance save and restore interface toolset for a third-party access control component.
在各個圖式中，相似元件符號及名稱指示相似組件。In the various drawings, similar symbols and names indicate similar components.
100:運算裝置 100:Computing device
102:保存恢復引擎(SRE) 102: Save Recovery Engine (SRE)
104:存取控制(AC)表 104: Access control (AC) table
106:隔離本端記憶體 106: Isolate local memory
108:電力管理器 108:Power Manager
110:系統匯流排 110:System bus
112:存取控制(AC)組件 112:Access Control (AC) component
114:存取控制(AC)組件 114:Access Control (AC) component
116:第三方存取控制(AC)組件 116: Third-party access control (AC) components
118:介面工具集 118:Interface tool set
120:存取控制(AC)組件 120:Access Control (AC) component
122:信號 122:Signal
124:子系統電力管理組件 124: Subsystem power management component
126:子系統電力管理組件 126: Subsystem power management component
128:位址再映射器 128:Address remapper
130:「saveReq」 130: "saveReq"
132:「saveSswpid」 132: "saveSswpid"
134:「saveRdy」 134:「saveRdy」
136:saveResp 136:saveResp
138:「restoreReq」 138:「restoreReq」
140:「restoreSswpid」 140: "restoreSswpid"
142:「restoreRdy」 142:「restoreRdy」
144:restoreResp 144:restoreResp
150:電力域 150:Power domain
152:電力域 152:Power domain
Claims (20)
Applications Claiming Priority (2)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
PCT/US2022/020999 WO2023177408A1 (en) | 2022-03-18 | 2022-03-18 | Save-restore engine for access control |
WOPCT/US22/20999 | 2022-03-18 |
Publications (1)
Publication Number | Publication Date |
---|---|
TW202338563A true TW202338563A (en) | 2023-10-01 |
Family
ID=81325262
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
TW111131478A TW202338563A (en) | 2022-03-18 | 2022-08-22 | Save-restore engine for access control |
Country Status (3)
Country | Link |
---|---|
EP (1) | EP4268051A1 (en) |
TW (1) | TW202338563A (en) |
WO (1) | WO2023177408A1 (en) |
Family Cites Families (3)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US20080307240A1 (en) * | 2007-06-08 | 2008-12-11 | Texas Instruments Incorporated | Power management electronic circuits, systems, and methods and processes of manufacture |
US8732379B2 (en) * | 2010-10-29 | 2014-05-20 | Texas Instruments Incorporated | Adapting legacy/third party IPs to advanced power management protocol |
WO2022055490A1 (en) * | 2020-09-11 | 2022-03-17 | Google Llc | Hardware-based save-and-restore controller |
-
2022
- 2022-03-18 WO PCT/US2022/020999 patent/WO2023177408A1/en unknown
- 2022-03-18 EP EP22717477.8A patent/EP4268051A1/en active Pending
- 2022-08-22 TW TW111131478A patent/TW202338563A/en unknown
Also Published As
Publication number | Publication date |
---|---|
WO2023177408A1 (en) | 2023-09-21 |
EP4268051A1 (en) | 2023-11-01 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
CN107092495B (en) | Platform firmware armoring technology | |
US10318765B2 (en) | Protecting critical data structures in an embedded hypervisor system | |
US9021476B1 (en) | Ensuring the privacy and integrity of a hypervisor | |
EP3690661A1 (en) | Flexible counter system for memory protection | |
US9678760B2 (en) | Memory card and storage system having authentication program and method for operating thereof | |
US10061718B2 (en) | Protecting secret state from memory attacks | |
US11847225B2 (en) | Blocking access to firmware by units of system on chip | |
US20160026799A1 (en) | Security device having indirect access to external non-volatile memory | |
US20030172214A1 (en) | Data processing system with peripheral access protection and method therefor | |
EP3631667B1 (en) | Flash recovery mode | |
US20190065236A1 (en) | Ensuring the privacy and integrity of a hypervisor | |
WO2020029254A1 (en) | Soc chip and bus access control method | |
US10089247B2 (en) | System and method for coupling a host device to secure and non-secure devices | |
CN111949372B (en) | Virtual machine migration method, general processor and electronic equipment | |
CN111143247A (en) | Storage device data integrity protection method, controller thereof and system on chip | |
EP3895939A1 (en) | Electronic control device and security verification method for electronic control device | |
CN116049825A (en) | Managing storage of secrets in memory of baseboard management controller | |
US10296467B2 (en) | Securing writes to memory modules having memory controllers | |
US9135046B1 (en) | Preventing host operating system from inspecting or modifying data received by hardware controller by moving host operating system into a virtual machine after boot up | |
KR20180066601A (en) | Method of driving memory system | |
TW202338563A (en) | Save-restore engine for access control | |
US7246213B2 (en) | Data address security device and method | |
US11644999B2 (en) | Protecting memory regions based on occurrence of an event | |
US20220391517A1 (en) | Ephemeral Data Storage | |
KR20170138412A (en) | A device for managing a plurality of accesses to a security module of a system on chip of a device |