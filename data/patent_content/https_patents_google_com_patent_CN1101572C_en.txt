Embodiment
I. be used to provide digitally coded of the present invention general application of performing in a radio or TV programme
The present invention of top general description can use according to data, services miscellaneous and use.For the illustrative examples of this application is provided,, wherein the system that is used for providing multimedia presentation on the network such as no JA(junction ambient) such as World Wide Webs is shown according to the current knowledge in the present technique at first referring to Fig. 1.Exemplary the performing in a radio or TV programme by the discrete portions that comprises page of text 102, video page or leaf 104, graph page 106, audio page 108 and data page 110 of Fig. 1 constitutes.Should point out that shown multimedia presentation is exemplary, and perform in a radio or TV programme and to constitute and these pages or leaves needn't be stored in the server self by any amount of various page or leaf.Be further noted that the given page or leaf of performing in a radio or TV programme can be also can not be to want to provide by the predetermined order of performing in a radio or TV programme.
According to present technique, as shown in fig. 1, various pages the request to performing in a radio or TV programme that receiver 100 (receiver A, receiver B etc.) sends will be queued in the request queue 112 and by request processor to be handled serially by the order of receiving them.When given request of processor response, for example ask R
NThe time, the request (R of back
N+1, R
N+2Deng) in formation, do not served yet.When thereby the video page or leaf 104 that will relatively grow when one page ground was supplied with many early requestors, the receiver of short page of text 102 relatively that can force request to perform in a radio or TV programme went to wait for.
Referring now to Fig. 2,, shown in it according to the system that the invention provides the exemplary multimedia presentation among Fig. 1.As shown in Figure 2, comprise in the system storage constitute perform in a radio or TV programme be called " section " discrete page according to the present invention.System storage also comprises the reception group 202-210 corresponding with each discrete segments of performing in a radio or TV programme.Each reception group is included in the table of the receiver of the section of having asked in the predetermined request window to be correlated with.The reception group 204 of the video-frequency band of for example, performing in a radio or TV programme 104 comprises receiver A and receiver B.Reception group and the section related with them are specified and can be stored in the system storage with the form of table.Thereby when the request of receiving section, system processor 214 is handled them immediately by the requestor being distributed to suitable reception group.
The flow process of Fig. 3 there is shown the example that can be used for realizing process of the present invention in the systems such as example system such as Fig. 2.As shown in Figure 3, when system during in the request that 300 receive a digitally coded section of performing in a radio or TV programme, whether system judges to exist 302 and specifies the reception group that receives the section of being asked.If there is no such group is just set up the reception group of this section and is counted the request window downwards in 306 beginnings 309.Subsequently, 308 will this section the requestor distribute to the reception group.After this, whether system continues the monitor request windows 310 and closes, and promptly whether has used up the time quantum of the predetermined lasting time that equals to ask window from setting up this reception group.If before the turn-off request window, receive the another request of this section, the requestor is distributed to this reception group 308.In case closed the request window, just section offered all requestors that distribute to this reception group at 314 usefulness multicastings.From system storage, delete this reception group 316 then.Receive other when request of this digitally coded section of performing in a radio or TV programme in system, can call this process again.
Those skilled in the art will be understood that being used for digitally coded various sections request window of performing in a radio or TV programme can be different to each section of performing in a radio or TV programme.For example, in view of to the relative demand of this section, distribute the required system resource of this section and when receiving this section the patient amount of delay of system user, the request window of the particular segment of performing in a radio or TV programme can be selected with the optimization system performance.For example, again referring to performing in a radio or TV programme shown in the system storage of Fig. 2, can find to provide this server of performing in a radio or TV programme to receive 20 requests p.s., but per minute have only 10 requests to video-frequency band to text chunk.Thereby the request window that adopted a second for text chunk may be favourable for the request window that video-frequency band adopted 10 seconds also.Those skilled in the art also will appreciate that, can develop dynamically to redefine with implementation procedure to be used for digitally coded various sections request window of performing in a radio or TV programme, and come the optimization system performance to respond variable system loading.
Thereby can be embodied in, the present invention that puts it briefly provides in the digitally coded system that performs in a radio or TV programme, this system distributes to digitally coded each requestor of predefined section who performs in a radio or TV programme and specifies the reception group that receives this section, and after the request window period that begins when setting up the reception group that is through with, this this section of system's multicasting is to the member of reception group.The present invention can be applicable to supply in the digitally coded any system that performs in a radio or TV programme to many receivers in no JA(junction ambient).Can comprise Database Systems, multimedia server and video on-demand system in these systems.Following public is the example that comprises the realization of the present invention of optimizing additional novel feature of the present invention that should provide TV and other linearity to perform in a radio or TV programme with the recipient's of system relationship requirement.
II provides linearity to perform in a radio or TV programme particularly provides the of the present invention general realization of video request program
Can optimize top invention disclosed provides linearity to perform in a radio or TV programme, and video request program particularly is provided.Put it briefly, these realize using top disclosed method by providing linearity to perform in a radio or TV programme as predefined section the sequence that equates the duration.For example, can be with two hours film as providing by 240 continuous 30 seconds sections.These are realized also to the unified request window of all sections employing of performing in a radio or TV programme.The predefined period duration that this request window equals to perform in a radio or TV programme.Turn back to the example that begins above, the request window of film with section of 30 seconds is 30 seconds.These are realized also comprising by no JA(junction ambient) and give the receiver of each reception group with each section multicasting, and the section appointment of the group of increment reception automatically, thereby the continuous section that will perform in a radio or TV programme automatically sequentially offers the reception group.
Thereby, according to the present invention, when the request of receiving film, system distributes to a reception group with the requestor and receives first section of the film of being asked, after the time-delay of having passed through no longer than the request window of duration, provide first section data to the requestor.Subsequently, automatically reassign this requestor's reception group so that next continuous segment of film to be provided.Thereby, from the beginning to the end whole film is offered the requestor.The data service system of realizing this embodiment of the present invention preferably has enough processing and handling capacity, the data of each section that multicasting is performed in a radio or TV programme in the period of the predefined request window that equals to perform in a radio or TV programme.Turn back to the example that begins above, this system each section of 240 sections of multicasting film in the stroke of each 30 seconds request windows of will having the ability.Like this, the time just can receive effectively beginning in 30 seconds and perform in a radio or TV programme.
Can first offer the mode of reception group with what perform in a radio or TV programme shown in Fig. 4 a and the 4b such as linearities such as TVs with in succession section.Fig. 4 a and 4b respectively illustrate of performing in a radio or TV programme corresponding to linearity total perform in a radio or TV programme timeline 400 and corresponding to different sections 402 the some reception groups respectively performing in a radio or TV programme timeline in succession first and second time X and X+L.In these figure, the request window duration that L equals to perform in a radio or TV programme.Moreover each that perform in a radio or TV programme sections 402 has equal predetermined time duration L.Thereby for example, if shown performing in a radio or TV programme is a film, it is long that each section and relevant request window thereof can be predefined for for 30 seconds.
Show three reception groups 404,406,408 along the timeline of Fig. 4 a corresponding to three that perform in a radio or TV programme different sections.Each reception group comprises the receiver 410 of one or more and system relationship.The member that can guess each reception group asks to perform in a radio or TV programme in same request window.Suppose once more film is divided into 30 seconds the section that respectively has 30 seconds request windows, will form a new group of specifying first section of reception in per 30 seconds; And each requestor that request is performed in a radio or TV programme in specific 30 a seconds request window will become same group part.Thereby for example, 4 members that can guess the reception group 404 of the leftmost side from the timeline of Fig. 4 a ask this to perform in a radio or TV programme same request window.
The timeline of Fig. 4 b illustrates and has passed through after equaling to ask the period L of window same reception group and specify with their corresponding section.The moment shown in the example that continuation begins above, the timeline of Fig. 4 b illustrate from the timeline of Fig. 4 a begins to specify through reception group and their correlation range after 30 seconds the interval.Appointment now respectively receives the next one in succession the section of group of received with respect to the section of its appointment on the timeline of Fig. 4 a as can be seen.This is preferably finished automatically by system, as discussed in more detail below.In addition, in Fig. 4 b, also can see a new receiver that constitutes the reception group of specifying first section of reception.Can guess this receiver asks to perform in a radio or TV programme in the window that is right after in the request window back of the most left reception group 404 of Fig. 4 a.
The number of members that is appreciated that the reception group is only realized the restriction of connection potentiality of the system of this group technology.Can consider that requestor's expection number, the number of performing in a radio or TV programme that provides and character and system-through-up capability select the segment length of being scheduled to and request length of window in the hope of being fit to system requirements best.Can understand further that performing in a radio or TV programme of providing in this way not necessarily must wholely record in advance, and can be the product of creating, perform in a radio or TV programme such as " scene " video or audio frequency.
III is used to provide the of the present invention preferable realization of video request program
Though the method for describing among the joint II is applied in the linear data service system of performing in a radio or TV programme of supply usually, can add additional novel feature and be provided as the preferred embodiment that video-on-demand applications is optimized.For example, can provide to system and allow the user to suspend transmission that video performs in a radio or TV programme or the ability that moves to different sections from the section that is receiving forward or backward.Moreover, for the optimization system performance, can provide the ability of the load on the various caches processors that dynamically reconfigure the system of being added in to system.Also can adopt novel " all are not all shared, all equal caches " (share nothing, cache everything) (SNCE) method come reading of data object in the control system and upgrade.
A. for the basic configuration of the enforcement system of the present invention that video request program optimizes is provided
First example of the enforcement system of the present invention that optimizes for video request program has been shown among Fig. 5.This system generally includes and is used to generate with the rear end part 500 of managing video Presentation Data and is used to distribute the video Presentation Data to give the fore-end 502 of receiver.Rear end part 500 can comprise be stored in such as tape, hard disk, easily lose and various memory storages 504 such as nonvolatile semiconductor memory and laser disk on the video storage 503 of performing in a radio or TV programme.Memory storage is by one or more video storage server 506 visits.These one or more video storage servers 506 with such as rear end exchange network 508 interfaces such as ATM(Asynchronous Transfer Mode) exchange networks.Rear end exchange network 508 provides connectionless environment and makes things convenient for multicasting for each coupling all processors thereon.Rear end exchange network 508 is also supplied with a plurality of caches processor interfaces that Presentation Data is given the rear end storage effect of front end with playing.Specify a caches processor as directory processor 512, it mainly carries out total system control and data management function.
The fore-end 502 of the example system shown in Fig. 5 comprises a plurality of data output processing devices 514, they and rear end exchange network 508 and front end exchange network 516 interfaces.The front end exchange network provides one not have and be connected the multicasting environment between data logger 514 and receiver 518.Specify each receiver to communicate by letter with one of front end specific data logger.Receiver can adopt many forms.But it is characterized in that data that internal processor, storer and decoded data follower provide are to produce the ability that video shows.Thereby receiver can comprise personal computer or special-purpose reception and decoding unit (being generically and collectively referred to as " top setting box " sometimes).
Implement another example of video on-demand system of the present invention shown in Fig. 6.This embodiment is similar to Fig. 5's.Yet, at local management, bear such as determining Route Selection request from local receiver to the local data follower and the management functions such as transmission load the balance local data follower by manager 620 by front end local manager 520 for the part of front end in this embodiment.
The embodiment of Fig. 6 also comprises an Attached Processor in the rear end, specifies it as " stand-by heat " processor 622, and this is a function well known in the art.The stand-by heat processor can be directory processor, one or more video storage server or one or more caches processor reserve is provided, and institute is special to be equipped with as needing for native system.
In such as Fig. 5 and Fig. 6 in the example system, from the caches processor to data logger or during the transmission from the data logger to the receiver, represent that one section required mass data of video can cause preferably each section being provided as some independent parts.Thereby the example that begins in joint II above continuing supposes that each section of 30 seconds that film is performed in a radio or TV programme will offer data logger or offer receiver from data logger from the caches processor as 10 independent sectors that respectively have 3 second duration.Select 3 seconds part duration to reduce the amount of memory buffer required in the receiver with system relationship, further go through as following.
To be convenient to the transmission necessary control and treatment amount of data division and from the data logger to the receiver in order reducing, preferably to provide data from caches processor and data logger with " promotion " pattern (push-mode) from the caches processor to data logger.In the promotion pattern, single action is started ongoing data output procedure and output procedure and is proceeded to consciously always and be terminated.Adopt the output of promotion pattern can reduce reciprocation necessary between the system unit.For example, in this system, data logger only need be notified its hope of caches processor to read this section and just can ask from section of performing in a radio or TV programme of caches processor transmission.After this, the caches processor just promotes segment data to data logger with 3 seconds part, is supplied as and ends up to providing all segment datas or data logger to stop data wittingly.Similarly, receiver need only send the request of performing in a radio or TV programme to the data follower, just can receive whole performing in a radio or TV programme from data logger.Data logger will partly be shifted receiver onto from the segment data that the caches processor receives subsequently, finish or till receiver stops wittingly or change data transmission up to performing in a radio or TV programme.In discussing, suppose that all caches processors and data logger all are to operate with the promotion pattern according to all the other of the system unit of the example system shown in Fig. 5 and 6 and function.
By various system units are specifically distributed in various controls and processing capacity, just can reach the system operation of the best shown in Fig. 5 and 6.Fig. 7 illustrate with common form Fig. 5 and 6 example system some critical pieces and distribute in these parts each control and processing capacity.As related among Fig. 7, in order to authorize the purpose of the receiver of following the tracks of using system, the login of directory processor 512 and the single receiver 518 of system management.Directory processor 512 is gone back the reception group membership that the monitoring data follower is reported.In addition, the inventory of the available data object of other entity in directory processor 512 maintenance systems, and management SNCE and caches processor distribution.
The video storage server of communicating by letter with directory processor 512 and caches processor 510 as further shown in Figure 7,506 is responsible for visit and is stored in and performs in a radio or TV programme and provide video data to caches processor 510 on the system memory device 504.Caches processor 510 can be communicated by letter with video storage server 506, directory processor 512 and data logger 514.The request that caches processor 510 is responsible for obtaining from video storage server 506 video data and response data follower offers data logger 514 with section.Can simultaneously a section be offered an above data logger by multicasting.Caches processor 510 further is in charge of the given amount of performing in a radio or TV programme that will be stored in the cache memory.
Data logger 514 shown in Fig. 7 is in charge of the reception group, specifies comprising foundation group, increase or removing members, change group membership's the state and the section of change group.The reception group that data logger is managed comprises the receiver by this particular data follower and system interaction effect.Section and tcp seq number certificate that data logger 514 also is responsible for performing in a radio or TV programme to 510 requests of caches processor are given receiver 518.Data can be transferred to simultaneously an above receiver by multicasting.
Can be implemented in the various processes of the function shown in Fig. 7 in the context relation that video on-demand system is provided on the system unit shown in Fig. 5 and 6 below with respect to remaining figure discussion.Parts and the performance specification that the receiver that is configured as predetermined number provides the example system of video request program is discussed then.
B. the operation of data logger
According to preferred embodiment of the present invention, data logger is responsible for providing the continuous section and the management of performing in a radio or TV programme to receive the group membership automatically to receiving the group membership.Data logger shown in Fig. 8 a can provide the mode of the continuous section of performing in a radio or TV programme to the reception group.How data logger shown in Fig. 8 b is managed the foundation of new reception group and is distributed the example of receiver to the reception group.In the discussion of Fig. 8 a and 8b, the request of receiving from receiver for the supposition of example purpose is the request that the complete video of rating is performed in a radio or TV programme, and these requests are to treat since first section the request of performing in a radio or TV programme as rating.Yet apparent, shown process can be used to set up any new reception group or increases the reception group of member to any existence, and irrelevant with the section related with this group.Thereby shown process also can be used to handle the section of suspending from it begins the request that recovers to perform in a radio or TV programme, and perhaps the section from appointment begins to restart the request of performing in a radio or TV programme.Discuss this two kinds of selections in more detail with respect to Fig. 9-12.
As shown in Fig. 8 a, process reads the specified section of its reception group in 800 beginnings to the request of caches processor from data logger.These sections can be determined by the reception group table of safeguarding and storing with reference to this data logger.The request of response data follower, the part with 3 seconds promotes segment data from the caches processor subsequently, and is received by data logger 802.When 804 judge that the caches processors have been finished all parts of supplying with whole sections of performing in a radio or TV programme, data logger just in 806 increment reception group tables the section of each group specify, and at (blind) state of 808 " blind " that remove any group membership.Blind state prevents that the group membership from receiving the segment data from data logger.The purpose of blind state will be with respect to Fig. 8 b explanation.At increment section specify and remove after the blind state, data logger is in 800 sections of asking to read from the caches processor all appointments of its reception group once more.
Example according to the group membership management of the process of Fig. 8 a in the data logger is illustrated among Fig. 8 b.Receive from the providing of receiver 810 when data logger for example perform in a radio or TV programme first section, during the request of performing in a radio or TV programme of beginning, whether data logger is just 812 current being provided by the caches processor of segment data of judging these sections from section N.If the current data that providing of caches processor, data logger will be taken action and will be added in the requestor on the group of specifying receiver section N-1 as blind receiver, in case thereby the caches processor finished data be provided, this requestor's group is specified will lose its blind state with increment to N and this requestor.Correspondingly, data logger is judged the reception group that whether exists for section N-1 814.If there is no such group 816 from the position of directory processor request segment N-1 cache memory, and is set up the group of specifying receiver section N-1 818.In the time of perform in a radio or TV programme when requester requests first section, this group will be appointed as imaginary section 0 of rating, suppose that this section is present in the cache memory area identical with section 1.In case judge the reception group of the section of existing N-1,820 receiver is distributed to this group, in the distribution of 822 notice directory processor receivers, and data logger 824 monitors further request.
In addition, do not providing the segment data of this section if judge 812 that the caches processor is current, data logger will be taken action simply receiver to be distributed to and be specified the group that receives the section of being asked, because when the caches processor begins to provide segment data again, group is specified increment and receiver will receive suitable segment data.Thereby data logger is judged the reception group that whether has section N 826.If there is no this group, 828 from directory processor request segment N the caches processor the position and set up the group of specifying rating section N 830.In case judge the reception group of the section of existing N, just receiver distributed to this group 832.In the distribution of 822 notice directory processor receivers, and data logger monitors other request 824.
Receive group membership's control by it, data logger also can provide basic " stopping ", " time-out ", " advancing " and " falling back " function.Can guess, data logger can stop to transmit the receiver of performing in a radio or TV programme to given by remove this receiver from its reception group.Fig. 9 is illustrated in the example that the process of time-out is provided in receiver transmission data.When at data logger during the section N when 900 receive pause command, just 902 the notice directory processor.From its reception group, remove the receiver that sends pause command then.This can remove receiver by renewal reception group table from receive group record finishes.When being removed from the reception group, receiver will no longer receive further data multiple channel broadcasting.Subsequently, when when 906 receive the recovery order, just receiver is added in and will next receiving on the reception group of whole section N 908.It is to control in the top mode of describing according to Fig. 8 b that receiver is distributed to suitable reception group.Particularly, data logger is judged the current data that whether providing of caches processor 812.If the current data that providing, just distribute to receiver current as blind receiver just in the reception group of receiver section N-1 832.If currently do not providing data, just receiver is distributed to the reception group of specifying receiver section N 820.Turn back to Fig. 9, when putting into group, in new group and section appointment of 910 notice directory processor receivers.
This process is shown to receiving group membership's influence in conjunction with the time period 1000 of describing among Figure 10 a-10d.The timeline of Figure 10 a illustrates three reception groups 1010,1020,1030.The timeline of Figure 10 b illustrates the pause command identical group of handling from the single member of rightmost reception group 1030 afterwards.This receiver no longer is the member of reception group who receives the section N of its front appointment, therefore the segment data of receiver section N not.Therefore in the example that illustrates, it should be noted that the receiver of issue pause command was unique member in its group in issue an order in the past, and when handling this order, in fact eliminated this group.If Figure 10 c illustrate the section that will organize specified increment once after but before the caches processor begins segment data is provided once more, handle the situation of the group membership when recovering to order.In this example, be received in the reception group 1050 of receiving the section during the pause command with receiver being distributed to specify simply.If Figure 10 d illustrate the section designated increments that will organize once after and after the caches processor begins data are provided once more, the group membership's situation when handle recovering order.In this example, this receiver is distributed to as blind receiver 1060 and is specified the reception group 1020 that receives the section N-1 that was right after before receiving the section of this pause command.As shown in Fig. 8 a, when increment section is next time specified, will remove the blind state of receiver as the front, and the data of all the other receiver receiver section N that this receiver will be in its group.
Directory processor can provide " become section " function to give receiver similarly, available it be similar to " advancing " or " falling back " function.Figure 11 illustrates the example of the process of the section appointment that is used to change receiver.When data logger receives the order of change section and when 1110 receive the appointment of new section N, just moves to the suitable reception group that receives whole section N from its reception group at 1120 receivers that will issue this order from receiver 1100.Move is to handle in the mode of discussing with respect to Fig. 8 b.Particularly, data logger is judged the current data that whether providing of caches processor 812.If the current data that providing, just distribute to receiver current as blind receiver just in the reception group of receiver section N-1 820.If the current data that do not providing are then distributed to the reception group of specifying receiver section N 832 with receiver.When placing it in the group, in new group and section appointment of 1130 notice directory processor receivers.
Time period 1200 in conjunction with Figure 12 a-12c shows the influence that the various change sections of issue are ordered the reception group membership who causes.The timeline of Figure 12 a illustrates three reception groups 1210,1220,1230.The timeline of Figure 12 b is depicted as three members of three groups for Figure 12 a and had handled an identical group that becomes after the section order, wherein each become the section order be the section designated increments that will organize once after but before the caches processor begins to provide segment data once more, handle.In this example, receiver is distributed to appointment simply receive their reception groups of the section of appointment respectively.Particularly, rightmost group the unique member 1240 who asks to move forward a section is distributed to specify the new reception group 1250 that receives next section in succession.Should point out the unique member of this receiver, in fact cause eliminating its last group thereby its issue becomes the section order for its last reception group 1230.Similarly, the receiver 1260 and 1270 of the group 1220 that Figure 12 a is the most central ask respectively backward to move two sections with one section, this just causes receiver 1260 is added in leftmost group 1210 of Figure 12 a, sets up a new reception group 1280 and the last reception group 1220 of cancellation receiver in fact.
Otherwise, if Figure 12 c illustrate the section designated increments that will organize once after and the situation of group membership when after the caches processor has begun to provide segment data once more, handle becoming the section order.In this example, receiver distributed to specify to receive as blind receiver be right after in they reception groups of the section of the section front of appointment separately.Particularly, rightmost group 1230 the unique member 1240 who request is moved forward a section removes from its group 1230; Be redistributed to this group as blind receiver then.Similarly, the receiver 1260 and 1270 of the most central group 1220 of Figure 12 a asks to move backward two sections and one section respectively, this causes setting up a new group 1290 on first section, and receiver 1260 added therein as blind receiver, and another receiver 1270 added as blind receiver in leftmost group 1210 of Figure 12 a.When the increment section is specified again, will remove the blind state of each receiver, and each receiver begins the receiver section data with all the other receivers in its group.
Can change the ad hoc fashion that data logger offers segment data the receiver of reception group according to the system performance standard.Proposed above to wish to provide data to receiver with the promotion pattern.Be shown as design of special data follower and relevant method of operating that video-on-demand applications is optimized among Figure 13 and 14.Figure 13 illustrates and is preferably in the basic internal configurations that adopts in the data logger of implementing system of the present invention.In this configuration, data logger 1300 comprises first and second impact damper 1310 and 1320 on the input end 1330 that can alternately be coupled to data logger and the output terminal 1340.Select buffer sizes to such an extent that be enough to receive the section part of predetermined lasting time, this section part is the buffer capacity domination that is subjected to receiver.For example, if the receiver impact damper can keep three seconds data reliably, then the size of the transmitting portions from the data logger to the receiver can be chosen as for three seconds.
As shown in Figure 14, the operation of data logger is included in 1400 parts that receive the section of performing in a radio or TV programme in first impact damper, the part of the section of performing in a radio or TV programme is provided from second impact damper simultaneously, then at 1410 couplings, first impact damper to output terminal and second impact damper to input end.1420, a part that receives the section of performing in a radio or TV programme in second impact damper provides the part of the section of performing in a radio or TV programme simultaneously from first impact damper subsequently.1,430 first impact damper is coupled on the input end then and simultaneously second impact damper is coupled on the output terminal, and restart this process.
This method and to advance its buffer configuration be preferable is because make the required amount of memory of data logger reduce significantly.For example, be divided into 30 seconds section and the part of each section with 3 seconds provided if will perform in a radio or TV programme, data logger need only keep 6 seconds data at any one time, just can provide enough data to receiver for continuous performing in a radio or TV programme is provided.
C. the operation of caches processor
As mentioned above, data logger receives and performs in a radio or TV programme segment data by perform in a radio or TV programme segment data from the caches processor request that comprises the section of performing in a radio or TV programme.This requires the caches processor to comprise the suitable segment data of being asked and the caches processor has the reliable method that this section is offered data logger.With respect to Figure 15 a-15i the method that satisfies these requirements is discussed below.
Figure 15 a is illustrated in the example that the section that is used in the caches processor performing in a radio or TV programme offers the process flow of the data logger of asking these sections.Put it briefly, this process comprises the part of the section that this each request of performing in a radio or TV programme is provided, and making provides each part of each section of asking in time L, and wherein L is the duration of predefined period duration and request window.Like this, the example that adopts from above continues, if perform in a radio or TV programme to being divided into two hours films of 240 sections of 30 seconds, and each section will be divided into 10 parts of 3 seconds, then provide each section first, provide second portion of each section or the like, till each part that each section is provided.
Specifically referring to Figure 15 a, the caches processor is counted this process that begins downwards by the request in 1500 starting time periods of definition, and this time period is must elapsed time before the period in its next data transmission of beginning.Whether the caches processor alternately checks the request window to close 1510 continuously then, means the period that has crossed downward counting, and whether receives any section request from data logger in 1520 checks.When the request that received before the turn-off request window from data logger, this request is just in the 1530 supply formations that enter the caches processor.The supply formation can be each section and the inter-related table of each data processor of asking this section that will remain in the cache memory.
When the decision request window had been closed, the caches processor was provided with two counter M and N 1540, wherein M indicate to provide when forward part and present segment that N indicates to provide.Caches processor 1550 provides the M part of the N section of performing in a radio or TV programme then.This part is to provide with the partial data bag as data processor that is addressed to each request and the sign section of performing in a radio or TV programme.Thereby when shifting data logger onto, will discern this packet.Release after this bag, caches processor 1560 increment N, and provide the M part once more 1550.Arrived the maximum N that remains on the section in the caches processor storage when judging 1570
MAXThe time, at 1580 increment M, and in the 1550 M parts that each section be provided again.Judge the M that each section is provided 1590
MAXAfter the part, the caches processor starts new downward counting and turns back to the request of deal with data follower 1500, finishes again up to downward counting.
As containing with respect to Figure 15 a, the caches processor only includes the limited number section of performing in a radio or TV programme.Figure 15 b is illustrated in the example of the process of the number that is used for managing the section that is stored in processor at any time in the caches processor.In general, this process comprises and realizes being used for only storage and satisfy " wheel changes " memory approaches that needed segment data is organized in existing reception, and expands the wheel commentaries on classics when the request that continues to satisfy new group.
Specifically referring to Figure 15 b, when the caches processor when 1501 receive the request of performing in a radio or TV programme from the storage of directory processor, the caches processor just distributes a district to be used to store this in its storer 1502 to perform in a radio or TV programme and notify directory processor realm name and size.The caches processor duplicates these three units that perform in a radio or TV programme 1503 subsequently, " low-water level sign " (low water mark) is set in the first unit back and in the second unit back " high-water mark " (high water mark) is set.From following discussion, low purpose with high-water mark will be conspicuous.For the ease of illustration,, suppose to copy to the unit that performing in a radio or TV programme in the caches processor " unit " equals respectively to have three minute duration particularly according to Figure 15 c-15i.This instruction will make those skilled in the art can adopt the unit that does not wait to realize other similar approach.
Turn back to Figure 15 b, in case be provided with low and high-water mark, just the method according to Figure 15 a provides segment data 1504.This can comprise reception and handle the request of other data logger to other section of performing in a radio or TV programme.After all segment datas being offered supply each requestor in the formation, the caches processor judges that 1505 whether any of these requests are to dropping on section more than the high-water mark.If no, just the caches processor provides segment data once more 1504, as shown in Figure 15 a.Thereby one or more data loggers can be between request window phase in succession change by making the request in succession of in succession section and along the wheel of segment data and advance.The example of this scheme is provided among Figure 15 c, one of them data logger 1533 changes 1531 along wheel and advances so that receive data in second unit (this 3-6 that performs in a radio or TV programme minute), simultaneously another a little later the follower 1532 of request msg changeed along wheel and advanced so that in first unit (0-3 that performs in a radio or TV programme minute), receive data.Can guess two data followers shown in along taking turns phase inversion from Figure 15 c apart from about two minutes.
Turn back to Figure 15 b, if any data logger request the above data of high-water mark, just the caches processor is in 1511 data below the low-water level sign of having judged whether any data logger request.If there are not the following data of data logger request low-water level sign, change this next unit that performs in a radio or TV programme that unit comes later and replace wheel below the low-water level sign and change data in unit just be used in wheel more than the high-water mark 1512.Then 1513 will hang down with high-water mark to the reach unit.These steps shown in Figure 15 d and the 15e.Referring to Figure 15 d, can see that leading data logger 1533 just crossed the high-water mark 1534 of Figure 15 c, the data logger 1532 of back has surpassed the low-water level sign 1535 of Figure 15 c simultaneously.The result can cover the wheel that comprises 0-3 minute of performing in a radio or TV programme to be changeed unit and comprises this 9-12 that performs in a radio or TV programme minute.Then with height and unit of low-water level sign reach.Referring to Figure 15 e, can see after having passed through another unit, will repeat similarly to duplicate and indicate reach.Therefore, it is that the wheel of three units changes and to carry out that these two data followers will continue around length, and it is with a new segment data unit period renewal more than the high-water mark when each reach high-water mark.
Getting back to Figure 15 b, also can be such situation, when a data follower has passed through high-water mark, and another sign of no show low-water level still.This situation is illustrated among Figure 15 f-15g.Can see that in Figure 15 g leading data logger 1541 has arrived the high-water mark 1544 of Figure 15 f, but the data logger 1543 of back is not run into the low-water level sign 1545 of Figure 15 f as yet.As a result, as shown in Figure 15 b, the caches processor will expand 1514 distribute to the memory block that wheel changes, and notice this expansion of directory processor also copies in the extended area in 1515 next unit that will perform in a radio or TV programme.Move a unit 1516 on the high level sign then, but not mobile low-water level sign.Referring to Figure 15 g, can see when leading data logger 1541 has arrived the high-water mark of Figure 15 f, expand wheel and change to comprise this other 9-12 minute of performing in a radio or TV programme and with the position of high level sign 1544 unit that advances.
Return Figure 15 b, in case the high-water mark that advanced, the caches processor turns back to 1504 segment data is provided, as shown in Figure 15 a.Subsequently, as shown in Figure 15 b, the caches processor can judge that taking the lead data logger has crossed new high-water mark 1505, and further judges that 1511 the data logger of back is by the low-water level sign.The result writes on a new unit 1512 and advances low and high-water mark 1513 on the old data that wheel changes.Be illustrated in the variation between Figure 15 g and the 15h as advancing of the result's of this judgement low and high-water mark.As shown in Figure 15 i, after this these data loggers will continue around length is that the wheel of 4 units changes and to advance, and it is to be updated periodically to comprise a new segment data unit more than 1544 at high-water mark.Be appreciated that the wheel change of team alternately continues to enlarge till comprising whole performing in a radio or TV programme in suitable environment.
D. the operation of directory processor
As mentioned above, when handling performing in a radio or TV programme of please looking for novelty, pause command, recovery order or becoming the section order, the group membership of data logger notice directory processor receiver.The caches processor is also notified the realm name and the address of each memory block that directory processor distributes to Presentation Data, and the expansion each time in these districts.Correspondingly, directory processor comprises the distribution that enough data are come the managing cache storage of processor.Be provided for the example of the process flow in the directory processor that the managing cache storage of processor distributes among Figure 16.
More specifically, as shown in Figure 16, when directory processor 1600 receive from data logger to the request of the caches processor address of a section performing in a radio or TV programme the time, directory processor at first judges whether can obtain this section in the caches processor 1610.This can determine by the caches processor distribution table that the reference list processor is safeguarded.Currently can not obtain this section if judge from the caches processor 1610, if perhaps judge 1620 can cause this caches processor to attempt to perform in a radio or TV programme extended area for this surpassing its memory span with this data logger is relevant with the processor that comprises the section of being asked, then the directory processor wheel storing this section and instruct this caches processor to start with respect to Figure 15 a-15i discussion at new caches processor of 1630 distribution turns over journey.In case known the caches processor address and the district of the section that comprises request, just at 1640 notification data follower caches processor address and realm names.After this, data logger will be directly with caches processor reciprocation with the reception Presentation Data.
As mentioned above, directory processor also is in charge of reading of data object in the system usually and is upgraded.In the system management of reading Yu upgrading of data object preferably adopt based on " all are not all shared, all equal caches " of the novelty of following three principles (SNCE) standard realize:
1) in the system available object of above logic entity only by in the system one and only a logic entity have;
2) object that has had can only be upgraded by the logic entity that has this object, but the object that has can be read by any logic entity that comprises the owner;
3) owner of object has exclusive right and blocks reading of the object that had and upgrade.
The example of enhancing of parts of the system of the general type shown in Fig. 5 and Fig. 6 is provided among Figure 17.Can see that this system comprises a plurality of servers 1700 that respectively are connected on one or more memory storages 1710.The example of the data object in the various memory storages 1710 that can be stored in this system and the server 1700 comprises that cache memory allocation table, the supply formation that each caches processor is safeguarded and the video that is stored in the memory storage that directory processor is safeguarded perform in a radio or TV programme file.The SNCE standard provides management to appear at fixing the reading and update method of the object in this system.
Be used for being illustrated in Figure 18 according to the example of the process of the request of SNCE specification handles reading object.Can be by considering to have asked an example of a data logger of performing in a radio or TV programme to show this process.According to SNCE, data logger must read this object (performing in a radio or TV programme) to its owner's request, and the owner comprises LIST SERVER and the video storage server logical entity that is coupling on this memory storage of performing in a radio or TV programme of storage in this example.When receiving request, the owner will allow the requestor from comprising this object, read the object of being asked for the caches processor of performing in a radio or TV programme in this example.This may need the owner to be ready to perform in a radio or TV programme then it is copied in the caches processor.
Thereby as shown in Figure 18, logic entity receives the request read the object that it has 1800.The requestor, for example data logger has the relation that has that relation table is known this object by the maintenance of reference directory processor with object for allocation.Whether the object owner logs on as at the data logger of 1810 decision request is read this object.If not, just 1820 this data logger is increased to safeguard by the owner and also in caches " interested member " table in the caches processor related with the owner.After this, the owner judges 1830 whether the object of being asked is stored in the caches processor.If not, the owner prepares object in its local storage then in the 1840 caches processors that object tools is distributed to LIST SERVER.In case determined the position of object in the caches processor, the owner is just in the position of this object of 1850 notice request persons in cache memory.After this requestor freely directly reads from the request of caches processor.Conform to understanding the process of this explanation with the caches processor distribution of describing with respect to Figure 16.
Speak briefly, the object owner that the SNCE regulation and stipulation receives the request of reading an object must not directly offer the requestor with object, but the requestor is directed on the relevant caches processor that comprises this object.Thereby later referring to Figure 17, if the server related with directory processor 2 is for being labeled as the owner who performs in a radio or TV programme of object Y, and server M (data logger) transmission request is wanted reading object Y to server 2, and server 2 will start duplicating from 1 couple of object Y of caches processor.
As mentioned above, the owner of object also has the exclusive right of upgrading the object that it had.Figure 19 illustrates the example according to the process of SNCE upgating object.This process can be showed by the rotation therapy of considering to be implemented in the caches processor of dynamically managing its internal storage distribution.Be given performing in a radio or TV programme in the process that expands its memory allocation, the caches processor must be notified the new address of directory processor memory block.In other words, the caches processor must ask to upgrade the cache memory allocation table that directory processor is safeguarded and had.
Thereby as shown in Figure 19, directory processor is in the 1900 upgating object requests of receiving from its cache memory allocation table of renewal of caches processor.Directory processor is blocked 1910 and is read or upgrade the further request of cache memory allocation table, and redefines being routed in the local queue of these requests.Directory processor 1920 is upgraded the cache memory allocation table in its local storages then.Directory processor is at the 1930 cache memory allocation tables that further are updated in its related caches processor, and this is to be under the situation of directory processor itself in directory processor.Notify interested member renewal 1940 then to the cache memory allocation table.Interested member had read the system entity of cache memory allocation table for the front.Notified after the interested member, and lifted a blockade and handle the request of queuing 1950.
As mentioned above, can adopt two kinds of blockades.In being called " exclusive blockade " first kind, during renewal process, blocking and prevent to upgrade and reading object.Otherwise, in the second kind of blockade that is called " writing blockade ", prevent from during renewal process, to upgrade, but allow reading object during renewal process.This reading is called " dirty reading ".Select to adopt exclusive blockade or write to block and depend on the necessity that accurately reflects as all information of the theme of object is provided.
In order to show the difference of two kinds of blockades, consider following two kinds of situations.First kind of situation considered to be stored in the caches processor and the data object of the part that expression is performed in a radio or TV programme.Sometimes can upgrade this object and prolong the length that is stored in the part in the caches processor; Yet, provide the purpose of a single section for the response request of reading to data logger, it is also irrelevant this section to be offered data logger before or after upgating object.As a result, adopt to write and block that to cooperate with these objects be satisfied.Otherwise second kind of situation considers to be stored in the cache memory allocation table in the directory processor.Must offer precise data to the data logger that requires about the information of Presentation Data, otherwise it can ask perform in a radio or TV programme and can postpone to perform in a radio or TV programme to send to receiver to the caches processor error ground of mistake.Therefore, should adopt exclusive blockade about the cache memory allocation table.
E. the standard of exemplary video program request
As mentioned above, video request program embodiment of the present invention will be best can equal with the period L that performs in a radio or TV programme related predefined request window and predefined segment length in multicasting all sections of performing in a radio or TV programme.Select to realize that the qualification such as the factors such as receiver number of performing in a radio or TV programme number and service of performing in a radio or TV programme type, providing that provide is provided particular system component of the present invention.For the example of how to make these decisions is provided, consider to be designed to satisfy the system of following standard:
1) system must provide service to all 30,000 users simultaneously;
2) system can provide 10 films to all spectators on must be in institute free, and each film has 2 hours duration;
3) every film all is the MPEG2 coding; And comprise about 4G byte data or about per second 4.5M bit data;
4) every film all provides with 30 seconds predetermined sections; And
5) system is that all 2400 sections of whole 10 films are utilized 30 seconds request window.
Again referring to the system shown in Fig. 2.Suppose that each processing node shown in this system comprises that a RS/6000 and each switch provide the no JA(junction ambient) of band multicasting ability.These switches can comprise the atm network switch.Can further suppose the enough storeies that have maintenance MPEG2 data in 3 second or about 1.7M byte memory with each receiver of system relationship.Thereby the size (data logger offers the size of the part of receiver) of part can be chosen to be for 3 seconds.Can suppose further that receiver comprises a processor.This receiver can be such as personal computer or special-purpose Video Decoder terminal (being called " top setting box " sometimes).
Start working from the receiver end of system backward,, be used to provide signal not have JA(junction ambient) and must be able to supply with nearly 135G position/s to the front end of all receivers in order to provide 30,000 spectators' per seconds each 4.5M bit data.Further supposition equaled in period of partial-length of 3 seconds, and each data logger can be exported the data that equal for a whole segment data sub-load 20% of film, or about 80M byte.Therefore data logger must be imported and output on greater than the speed of 213M position/s.Because the ATM adapter card has the throughput rate of 155M position/s, therefore data logger can be provided with that three ATM adapter cards are used for input and three ATM adapter cards are used for output, and input and the output of 455M position/s that the input that surpasses expectation and output requires are provided for each data logger.
Further each caches processor of supposition is provided with 2G bytes of memory device.Thereby two caches processors just can be stored whole film.As mentioned above, wish that each caches processor can send all sections that it comprised in the period that equals segment length and request window L.Because caches processor can comprise half section of two hours film nearly, or about 2.0G byte, the caches processor is necessary can be with per 30 seconds 2G bytes, or the speed section of providing of 533M bps is to data logger.Therefore the caches processor can be provided with five atm cards, thereby allows the maximum output speed of 775M position/s, and this has substantially exceeded the output requirement of expectation.Provide the system of 10 films for needs, the rear end does not have JA(junction ambient) must transmit the 40G byte data in per 30 seconds, thereby needed the bandwidth of 10G position/s.This bandwidth can reach by using several IBM8220ATM switches.
Thereby according to Fig. 2 configuration and use the system of above-mentioned parts can be in predetermined parameter to provide the digitally coded of program request to perform in a radio or TV programme on if having time in institute.Those skilled in the art will be understood that system architecture described herein highly can stretch, and can be adapted to support performing in a radio or TV programme and receiver of any number.
Thereby the present invention can be embodied in the above-mentioned system that performs in a radio or TV programme that is used for the distribute digital coding.Perform in a radio or TV programme by caches is requested, and by receiver being grouped into the reception group of the section that receives the multicasting of performing in a radio or TV programme, whether the request that system just can respond receiver provides the receiver of performing in a radio or TV programme to any number, watched by other receiver no matter at this moment this perform in a radio or TV programme.When the performing in a radio or TV programme of time encoding is provided, system can be well in all sections performed in a radio or TV programme that equal to ask multicasting time encoding in the period of window and single segment length L, thereby each L can both receive to perform in a radio or TV programme second in fact.
Optimal mode of the present invention is implemented in currently known being used to though structure that above-mentioned specific embodiment provides and method are the inventors, and the present invention can have alternate embodiment miscellaneous.Process flow diagram as described herein, hardware configuration and process are exemplary.Those skilled in the art know and can make other modification that relates to equivalent unit, method of operating and using method and not break away from defined invention scope in the following claims the embodiments described herein.