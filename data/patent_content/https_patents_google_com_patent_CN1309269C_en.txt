Background technology
The present invention relates generally to reduce the power consumption in the portable wireless of radio telephone and so on.More particularly, the present invention relates in the spread spectrum multiple access radio telephone system, start the apparatus and method of radio receiver.
In radio telephone system, disposed portable radiotelephone and be used for carrying out radio communication with one or more telepoint base stations.In order to save power consumption and to prolong wireless telephonic battery service time, radio telephone system can be cut apart page mode operations with timeslice.During timeslice is cut apart page mode operations, radio telephone and monitors discontinuously.Radio telephone is only in the preset time monitors., make radio telephone " sleep " in low-power mode by turn-offing some radiotelephone circuit, thereby reduced power consumption not in time of monitors at radio telephone.
It is the portable radiotelephone battery key of service time that timeslice is cut apart page-mode.Therefore, the purpose that timeslice is cut apart page mode operations is to reduce to minimum to the wireless operating time, and turn-offs radio as much as possible between sleep period.
, or say more generally that when starting radio receiver, radio telephone must be caught radio frequency (RF) link that leads to a base station in radio telephone system when in the indirect time receiving of sleep period.In the wave point standard, defined link acquisition and synchronization, and other operation of communication protocol and so on.An example of this standard is the interim standard I S-95 of telecommunications industry association/electronic industries association (TIA/EIA), " mobile radio station-base station compatibility standard of dual mode wideband spread-spectrum cellular system " (IS-95).IS-95 has defined a kind of direct sequence CDMA (DS-CDMA or CDMA) radio telephone system.Also be useful on other wave point standard of wireless local loop (WLL) radio telephone system, and proposed to be used for the new wave point standard of senior broadband extended spectrum radio telephone system (being referred to as third generation cell phone system).
The part that radio telephone is caught in the processing of RF link of link one base station is the proper signal that radio telephone is found a base station, then with this synchronization that transmits.No matter to be synchronous (for example, all base station synchronizationization are to a common timing reference) still be cdma system on the contrary asynchronous (for example, all base stations are not synchronized to a common timing reference) all needs to be synchronized to this and transmit.
For example, in the IS-95 system, the synchronization of radio telephone and base station comprises that radio telephone produces local pseudo noise (PN) sequence and the PN sequence is aimed at system PN sequence.This is to finish by the pilot signal of catching base station.Therefore, radio telephone comprises a sequencer that produces the PN sequence.Radio telephone uses a searcher receiver or other mechanism that the local PN sequence that produces is aimed at the PN sequence of the pilot signal of base station.In case the pilot signal of capturing, radio telephone are caught a synchronizing signal and a paging signal, radio telephone demodulation Traffic Channel correctly and foundation link the full-duplex link of base station then.
Cut apart in the page-mode in timeslice, radio telephone is periodically checked the message from the base station.Radio telephone must be every T one or more Frames of decoding second.For example, in the IS-95CDMA system, T passes through T=1.28*2
iCalculate second, and wherein i generally is set at 0 or 1.In order to prolong the service time of radio telephone battery, cut apart in timeslice and to make wireless telephonic partial circuit enter sleep (for example, closing the clock signal that is provided to the circuit that enters sleep) between the beep-page message.
Fig. 1 is how explanation starts prior art when operating in timeslice and cut apart page-mode a wireless telephonic timing diagram.On time shaft 400, show the PN sequence regularly, show corresponding radio telephone incident on the time shaft 401.
Time shaft 400 shows PN volume (PN roll) border and occurs in the time 404.In spread spectrum system, the PN sequence is finite length normally, repeats itself again after cycling through whole sequence; The starting point of PN crimping boundary mark note PN sequence.For example, in the IS-95 system, the per 26.66 milliseconds of generations of PN crimping circle once.
Time shaft 400 also shows the frame boundaries that takes place in the time 406.In the IS-95 system, per 80 milliseconds produce 80 milliseconds of frame boundaries, and with PN crimping bound pair standard.Beep-page message begins at 80 milliseconds of frame boundaries.
For radio telephone demodulation sign indicating number beep-page message, several radio telephone incidents must take place before frame boundaries.Before the time 402, the prior art radio telephone is in sleep state, has wherein turn-offed the clock to the receiver modem circuit.When radio telephone enters sleep state at first, the current PN sequence state of microprocessor stores.Then, radio telephone keeps sleep state in preset time, and microprocessor then keeps the tracking to the length of one's sleep, so that produce wake-up states when radio telephone withdraws from sleep pattern.
Just before the time 402, microprocessor is carried out the wake-up states program to the receiver modulator-demodulator, and provides clock signal to the receiver modulator-demodulator again.Make when radio telephone withdraws from sleep pattern the representative of this wake-up states by microprocessor to the best-estimated of the state of PN sequence.After this, real-time update wake-up states when attempting to follow the tracks of the PN sequence.
In the extended spectrum radio telephone of prior art, also activate in this receiver modem circuit conducting of putting about 90%.Therefore, in the receiver modulator-demod, clock signal is provided to all demodulation branch roads, and the searcher receiver is with relevant timing circuit.
In the time 402, wake (WAKE) incident up, and the WAKE pulse is loaded into searcher receiver and demodulation branch road to identical state information, thereby makes their phase mutually synchronization.Then, the signal of searcher unit search reception is up to finding a suitable high-energy rays.In case the discovery appropriate pilot signal, the then timing of revolution (slew) searcher receiver and all demodulation branch roads, thus make their timing and the PN sequences match that transmits by pilot signal.Revolution is a kind of processing method, comprises, delay leading with respect to the PN sequence that receives, or keeps the inner PN sequence that takes place.This has set up a timing reference.
In typical prior art cdma wireless phone, radio telephone needs about 30 milliseconds to come acquisition pilot signal and synchronous searcher receiver and demodulation branch road and PN sequence; This is labeled as the duration 410.Therefore, the WAKE incident must be at least will be in time 404 30 milliseconds of generations before the SLAM incident that PN crimping circle takes place.Because since the back takes place to the searcher timing unit in the WAKE incident, the clock conducting of branch road timing unit and system's timing unit, thereby keeping important timing relationship between them continuously.In addition, during these about 30 milliseconds, comprise that about 90% receiver modem circuit of all non-searcher receiver circuits in the receiver modulator-demodulator is activated.
The radio telephone hardware of prior art is configured to the incident at PN crimping circle (for example, in the time 404) beginning SLAM.The SLAM incident is defined as the system's timing unit of radio receiver modulator-demodulator and the synchronization of pilot signal PN sequence.System's timing unit is controlled the timing of whole radio receiver modulator-demodulator, and guides the operation of receiver modulator-demodulator.Therefore, for a SLAM incident, microprocessor instructs system's timing unit synchronization of receiver modulator-demodulator in the timing of demodulation branch road and searcher receiver.
The SLAM incident occurs in the time 404.In 26.6 milliseconds duration 412,90% receiver modem circuit is in state of activation.In the time 406, the demodulator branch road produces and goes the interleaver data, and decoding paging messages.In the time 408, the receiver modulator-demodulator finishes the decoding to beep-page message, and is generally 35 milliseconds during this period of time, as by duration 414 marks.
Except when timeslice is cut apart page mode operations at the fixed time the wake on wireless phone, also may need the wake on wireless phone with handle or the response radio telephone in other incident of synchronous or asynchronous generation.An example of asynchronous event is that the user imports, and for example presses wireless telephonic keyboard.
Preferred implementation
Fig. 2 shows a communication system 100, comprises a plurality of base stations, and for example the base station 102, is used for carrying out radio communication with one or more mobile radio stations such as radio telephone 104.Configuration radio telephone 104 to be receiving and to send spread spectrum signal, so as with a plurality of base station communications that comprise base station 102.In the illustrated embodiment, communication system 100 is with direct sequence CDMA (DS-CDMA) system operation.At the interim standard I S-95 of TIA/EIA, in " mobile radio station-base station compatibility standard of dual mode wideband spread-spectrum cellular system ", the example of the system of a kind of like this 800MHz of operating in has been described.As selection, communication system 100 electricity can be according to other DS-CDMA system or frequency hopping spread spectrum system operation.
Base station 102 sends the various spread spectrum signals of information signal and so on to radio telephone 104 on Traffic Channel.Be called in the processing that Walsh covers (Walsh covering) at one, with walsh code to comprising the code element coding of information signal.Distribute a unique walsh code for each radio telephone 104 such mobile radio station, thereby make traffic channel transmission to each mobile radio station be orthogonal to traffic channel transmission each other mobile radio station.
Except Traffic Channel, base station 102 is by other signal of pilot channel broadcast pilot and so on, by a synchronizing channel broadcast synchronization signal with by a paging channel Radio Paging signal.All mobile radio stations within scope receive pilot channel jointly, and radio telephone 104 is used to pilot channel to discern the existence of cdma system, initial system acquisition, the transregional switching of idle pulley, communication and interference base station initial and postpone the identification of ray, and be used for the coherent demodulation of synchronous, paging and Traffic Channel.Synchronizing channel is used to make mobile radio station timing and regularly synchronization of base station.Paging channel is used for from the base station 102 and sends paging information to the mobile radio station that comprises radio telephone 104.
In alternate embodiment, pilot signal comprises a plurality of pilot signals that send by a plurality of channels.For example, some pilot signals can be used for initial captured and signal strength signal intensity is determined.Other pilot signal can be used for storage sets information, for example one group of Base Station Identification.
Except Walsh covers, also utilize a pseudo noise (PN) sequence extension all channels by base station.In the embodiment shown, unique beginning phase place of utilizing pilot channel PN sequence is base station 102 and all base stations in the identification communication system 100 uniquely, and unique beginning phase place is also referred to as time started or phase shift.The length of PN sequence is 2
15Chip, chip are to produce with the chip-rate of per second 1.2288 million chips, and the PN sequence approximately per 26.66 milliseconds (msec) repeat once.The minimum permission time interval is 64 chips, and this has made it possible to 512 different PN code phases distribution altogether.A spread pilot channel modulation radio frequency (RF) carrier wave, and be sent to all mobile radio stations that comprise radio telephone 104 in the geographic area of serving base station 102.The PN sequence can be compound in nature, comprises homophase (I) and quadrature (Q) component.
In an alternate embodiment, the base station is asynchronous mutually, does not make the synchronized together common timing reference in all base stations in other words.Therefore, from the pilot signal of a base station with asynchronous from the pilot signal of another base station.
Radio telephone 104 comprises 106, one AFE (analog front end) 108 of an antenna, microprocessor, logic and 116, one RX path of control circuit and a transmission path.RX path comprises 110 and receiver modulator-demodulators 111 of an analog to digital converter (ADC); Transmission path comprises a digital to analog converter 120 and a transmit path circuit 118.Receiver modulator-demodulator 111 comprises 140, one searcher timing units 142 of 114, one branch road timing units of 112, one searcher receivers of a RAKE receiver and system's timing unit 146.
Antenna 106 receives from base station 102 with from the RF signal of adjacent other base station.The RF signal of some receptions is sight line rays of base station.The RF signal of other reception is reflection or multipath ray, thereby postpones in time with respect to the sight line ray.
Antenna 106 becomes the signal of telecommunication to the RF conversion of signals that receives, and is provided to AFE (analog front end) 108.AFE (analog front end) 108 is carried out filtering, and automatic gain control is with the function that conversion of signals is become baseband signal and so on.Analog baseband signal is provided to ADC 110, and ADC 110 converts them to and is used for the further digital data stream of processing.
RAKE receiver 112 comprises a plurality of demodulation branch roads, comprises first demodulation branch road 122, the second demodulation branch roads, 124, the three demodulation branch roads 126 and the 4th demodulation branch road 128.In the embodiment shown, RAKE receiver 112 comprises four demodulation branch roads.But, also can only adopt one or more demodulation branch roads.The demodulation branch road forms from existing design improvement, so that start-up time and power are reduced to minimum; This will further specify in conjunction with Fig. 2 to 6 afterwards.
Microprocessor, logic and control circuit 116 comprise a microprocessor 117 and a clock 134.The timing of clock 134 control radio telephones 104.Microprocessor, logic and control circuit 116 are coupled to other element of radio telephone 104, but this interconnecting is not shown in Fig. 1, in order to avoid unnecessarily make accompanying drawing complicated.
Generally speaking, the searcher receiver in the receiver modulator-demodulator 111 114 detects the pilot signal that radio telephone 104 receives from a plurality of base stations that comprise base station 102.Searcher receiver 114 utilizes a correlator to go to expand pilot signal with the PN sign indicating number that produces in the radio telephone 104.After going expansion, the signal value of each chip period on the previously selected time interval of adding up.This provided the relevant of chip value and.Compare with this with a threshold level.What surpass threshold level can be used for regularly synchronized suitable pilot signal ray of pilot signal with one of general expression.
With reference to figure 3, searcher receiver 114 comprises a sample buffer system 200, a two-phase correlator 202 that is coupled to sample buffer system 200, an energy calculator 204 that is coupled to two-phase correlator 202, an energy preprocessor 206 that is coupled to energy calculator 204, a searcher output buffer 208 and a PN generator system 210 that is coupled to two-phase correlator 202 that is coupled to energy preprocessor 206.Sample buffer system 200 comprises that 220, one of a delay circuit that are coupled to receiver sample buffer 230 is coupled to address generator 226 and multiplexer 238 that is coupled to receiver sample buffer 230 of receiver sample buffer 230.Two-phase correlator 202 comprises first despreader 262 and second despreader 264 that is coupled to one second accumulator 276 that are coupled to first accumulator 274.Energy calculator 204 comprises that one is coupled to the breech lock of multiplexer 290 and power circuit 294 and summation circuit 298 that is coupled to power circuit 294 that 284, one in scale circuit is coupled to multiplexer 290.
PN generator system 210 comprises a PN sequence wake-up states register 360 that is coupled to a real-time PN generator 370, an initial p N status register 318 that is coupled to real-time PN sequencer 370, a high speed PN generator 372 that is coupled to initial p N status register 318, mask register 336 and next PN status register 340 that is coupled to high speed PN generator 372 that is coupled to high speed PN generator 372.
PN generator 370 comprises a real-time linear sequencer (LSG) 310 that is coupled to real-time PN volume (PNR) counter 312 and a real time position counter 314 in real time.High speed PN generator 372 comprises a high speed LSG 322 who is coupled to high speed PN volume (PNR) counter 324 and a high-speed information element counter 326.Circuit in PN generator 370 and the high speed PN generator 372 generally comprises circuits for triggering in real time.
Therefore, may operate in timeslice cuts apart cdma wireless phone in the page-mode and comprises the searcher receiver of one-period startup with the pilot signal of finding proper signal intensity, after each of searcher receiver periodically started, the synchronization of searcher receiver in pseudo noise (PN) sequence of pilot signal regularly.Radio telephone comprises that also at least one is coupled to the demodulation branch road of searcher receiver, and control circuit, this control circuit is used for actual each periodicity at the searcher receiver and instructs the PN sequence timing synchronization of at least one demodulation branch road with respect to pilot signal after periodically starting at least one demodulation branch road and the each periodic synchronous at the searcher receiver after starting.Control circuit comprises a microprocessor.Radio telephone also comprises system's timing unit that is coupled at least one demodulation branch road, microprocessor in fact after each periodicity of searcher receiver starts periodically after start-up system timing unit and the each periodic synchronous at least one demodulation branch road the guidance system timing unit with respect to the PN sequence timing synchronization of pilot signal.
How during cutting apart page mode operations, timeslice to start receiver modulator-demodulator 111 (Fig. 2) and searcher receiver 114 (Fig. 2 and 3) below in conjunction with the timing diagram of Fig. 4 and the flowchart text of Fig. 6 from sleep state.In Fig. 4, on time shaft 500, show the PN sequence regularly, and on time shaft 502, show corresponding radio telephone 104 incidents.Time shaft 500 has shown in the time 506 and a predetermined PN chip border has taken place and in the time 508 frame boundaries has taken place.
Except PN crimping circle, described predetermined PN chip border there is another kind of regulation by the PN sequence of cellular systems standards definition.In the embodiment shown, selection occurs in the predetermined chip border of border conduct of the 512nd chip of PN sequence, thereby is called 512-chip border; 512-chip border and PN crimping bound pair standard.In the IS-95 system, the transmitted chip rate is 1.2288MHz, so the every 0.4166msee in 512-chip border occurs once.Also can use other predetermined chip border.In the IS-95 system, frame boundaries (for example, must the wake on wireless phone during with paging receiving message) appears in every 80msec, and frame boundaries and PN crimping bound pair standard.
The method of cutting apart page mode operations radio telephone 104 with timeslice is in square frame 600 beginnings.Radio telephone enters sleep state at square frame 602.
Write down current PN sequence state at square frame 604 microprocessors 117 (Fig. 2), and current PN sequence state is stored in the register as PN sequence sleep state.Be in when sleep (for example before the time 504 at Fig. 4) at radio telephone, disconnect the clock signal of receiver modulator-demodulator 111 (Fig. 2) some parts so that these parts quit work, thereby reduced power consumption.Searcher receiver 114, branch road timing unit 140, the clock signal of searcher timing unit 142 and system's timing unit 146 for example, during sleep state, have been disconnected to RAKE receiver 112.
Radio telephone 104 keeps sleep states in a predetermined lasting time, and microprocessor 117 then keeps tracking (Fig. 6) to during this period of time at square frame 606.Microprocessor 117 can be followed the tracks of free time with clock 134; As selection, can use and not enter dormant another clock (not shown).For example can use the clock of microprocessor 117 outsides.Before the time 504 (Fig. 4), at square frame 608 (Fig. 6), microprocessor 117 utilizes PN sleep state and radio telephone 104 to keep the time of sleep that a PN sequence wake-up states is programmed among PN sequence wake-up states register 360 (Fig. 3).
In the time 504 (Fig. 4) the WAKE incident taking place, thereby has started several receiver modulator-demodulators 111 (Fig. 2) function.By providing clock signal, at least a portion receiving modem 111 circuit have been started at square frame 610 (Fig. 6), for example searcher receiver 114 and searcher timing unit 142 to receiver modulator-demodulator 111 (Fig. 2).In an alternate embodiment, searcher timing unit 142 is included in the searcher receiver 114, thereby is considered to the part of searcher receiver 114.But in the receiver modulator-demodulator 111 is not that the circuit part of searcher receiver 114 and searcher timing unit 142 still keeps turn-offing.For example, RAKE receiver 112, branch road timing unit 140 and system's timing unit 146 keep initial inactive state.
In order to start the part of receiver modulator-demodulator 111, by input 306 (Fig. 3) a chip clock signal is provided to real-time PN generator 370 (Fig. 3), to start real-time PN generator 370.This chip clock signal is with PN chip speed operation, and can start from any suitable source, for example the clock 134 of microprocessor, logic and control circuit 116.In addition, start searcher timing unit 142 by applying a 8X clock signal.Searcher timing unit 142 comprises control circuit, and register and a counter are to form and to coordinate the timing of real-time PN generator 370.Counter in the searcher timing unit 142 provides the high-resolution tracking to the PN sequence with the speed counting of octuple in real-time chip clock signal.In a word, have only about 20% receiver modulator-demodulator 111 circuit starts in the time 504.This be called a kind of in, low-power mode.
After at least a portion that has started searcher receiver 114, the searcher receiver must be caught one and be transmitted, and in the embodiment shown, the signal of this emission comprises at least one pilot signal.In alternate embodiment, the signal of emission can comprise a plurality of pilot signals on the more than channel, and the pilot signal on these channels can be by code division multiplex or time division multiplexing.
Part as the WAKE incident, send a WAKE pulse at square frame 612 (Fig. 6) microprocessor 117, and read PN sequence wake-up states at square frame 614 from PN sequence wake-up states register 360 (Fig. 3), and be loaded in the real-time PN generator 370, to set up a timing reference.This wake-up states information comprises the homophase that is loaded among the real-time LSG 310 (Fig. 3) and the 15-bit status of quadrature phase PN sequence.Wake-up states also comprises the 15-bit status of real-time PN volume count device 312 (Fig. 3).PN volume count device 312 has calculated the quantity of the chip since last PN crimping circle and the quantity of code element, with the current location in the indication PN sequence.This volume count device information is crucial for the high-resolution SLAM incident of finishing taking place in the time 506 (Fig. 4).
At square frame 616 (Fig. 6), the WAKE pulse causes that also real time position counter 314 (Fig. 3) is initialized to an initial value (for example, state).Real time position counter 314 uses in the later phases that starts, and when the real-time PN generator 370 of revolution with regard to the change state.For example, if four chips of PN generator 370 revolutions in real time, real time position counter 314 will be followed the tracks of it so.To turn round control and be applied on the circuit 308, and the state or the value maintenance of real time position counter 314 is constant when not turning round real-time PN generator 370.
At square frame 618 (Fig. 6), PN generator 370 beginnings in real time produce the PN sequence with the as many as first rate that appears at the chip clock signal rate of input 306.The chip-rate of the signal of the as many as reception of this first rate.The first rate that the representative of chip clock signal is represented with receiver modulator-demodulator 111 service speeds.Therefore, LSG 310 increases progressively PN sequence real-time status with this chip-rate in real time, produces the I and the Q sample of PN sequence to circulate at each clock, and at the real-time PN volume count device 312 of square frame 620 (Fig. 6) each clock circulation is increased progressively with first rate.This PN sequence produces the initial estimation of representative to the position of the PN sequence of reception.
Next, searcher receiver 114 (Fig. 2 and 3) detects pilot signal with capture systems regularly.At square frame 622 (Fig. 6), when PN sequencer 370 produces the PN sequence, ADC 110 (Fig. 2) receives the analog signal that sends from AFE (analog front end) 108, and be analog signal conversion numeral sample, this numeral sample is applied to homophase (I) input 212 and quadrature phase (Q) input 214 (Fig. 3).Delay circuit 220 produces the delay version of the numeral sample that comprises the numeral sample that has postponed 1/2nd chip durations.
Square frame 624 (Fig. 6) with the delay storage of versions of numeral sample and numeral sample in receiver sample buffer 230.The generation that postpones version makes during the high speed pilot signal searches filled receiver sample buffer 230 with sample after, two energy that can while half the chip time in counting period.If in searcher receiver 114, do not comprise becoming two hardware (for example, only have a correlator rather than here shown in two-phase correlator 202 in two correlators), can produce the delay version of input sample so.As selection,, may need to produce more delay version so if in searcher receiver 114, comprised more correlator.Be actually produced simultaneously owing to postpone the numeral sample of version and reception, the detection of pilot signal numeral sample is actually with the chip-rate generation of twice.
Address generator 226 command receiver sample buffer 230 are written to the delay version of each numeral sample and numeral sample where (with later on from where reading the data of storage).In the embodiment shown, each has four bits the I of reception and Q numeral sample, therefore to a single I-Q sample to producing eight bits; Postponing version is eight other bits.Combined I-Q to postpone version and comprise 16 bits, thereby the width of receiver sample buffer 230 is 16 bits.Be useful on the memory cell of 1024 16 bit-patterns.Can use other memory construction and bit architecture.
Two different clock signals are provided to multiplexer 238.Chip clock signal with real-time operation is provided to first input end 232, high-speed clock signal is provided to second input 234.High-speed clock signal is with the speed operation higher than chip clock signal.By providing control signal to carry out the selection of clock signal to control input end 236.When receiver sample buffer 230 is loaded numeral sample, on multiplexer 238, select the chip clock signal.Therefore, numeral sample is loaded in the buffer with real-time clock speed, but since postpone version be actually numeral sample receive produced simultaneously, thereby be with the in fact detection and the storage of twice chip-rate generation pilot signal numeral sample.
Be stored in the pilot signal that on behalf of searcher receiver 114, the sample in the receiver sample buffer 230 receive.This signal can comprise the pilot signal and/or the multipath ray of direct reception.Therefore, receiver sample buffer 230 provides a buffer that is used to store a plurality of samples of a received signal.
When first I and Q sample are written in the receiver sample buffer 230, the PN state of record real-time PN generator 370 this moment in time, and be loaded in the initial p N status register 318.This sample that will indicate storage is the PN sequence that how produces corresponding to PN generator 370 in real time.
After detecting a pilot signal, real-time PN generator 370, be that searcher receiver 114 regularly carries out synchronization with the PN sequence, this PN sequence is regularly relevant with at least a portion of detected pilot signal.Therefore, during the duration 512 (Fig. 4), but, carry out high-speed search just having filled receiver sample buffer 230 (Fig. 3) afterwards, to search for the storing sample of a suitable pilot signal (for example, pilot signal that has produced the correlation energy that is higher than a predetermined threshold).For high-speed search, in fact the circuit of all the searcher receivers 114 (Fig. 2 and 3) except real-time PN generator 370 is all operated (in order to simplify accompanying drawing with the fair speed of high-speed clock signal, only show high-speed clock signal is applied to the second multiplexer input 234, high-frequency clock input 278 of the second accumulator input 278 and at the high speed PN of input 328 generator 372).Therefore, multiplexer 238 from the chip clock conversion of signals that appears at input 232 to the high-speed clock signal that appears at second input 234 (Fig. 3).
Determine the size of the window of the sample that search is thereon stored at square frame 626 (Fig. 6) microprocessor 117 (Fig. 2).For example, the window of one four size is represented four independently search of 1/2nd chip offset to the PN space.Because two-phase correlator 202 (Fig. 2) comprises two correlators, thereby can search for two different skews simultaneously.Should know and to select other suitable window size, and can use and to carry out simultaneously still less or the hardware construction of more search.
At square frame 628 (Fig. 6), the search of microprocessor 117 beginnings in a regulation window size.Searcher receiver 114 is with second speed search suitable substance P N sequence offset of high-frequency clock.A suitable substance P N sequence offset is exactly the PN sequence offset that detected numeral sample is produced high correlation energy.Here, second speed is higher than first rate.
For first pair of search, the high-speed information element counter 326 of high speed PN generator 372 (Fig. 3) is initialised to zero.The PN state that is stored in the initial p N status register 318 is loaded in the high speed PN generator 372, thereby high speed LSG 322 and high speed PNR counter 324 are set at appropriate value.This searches for and the real-time PN sequence of relevant sample corresponding to existence when sample being detected at first and be written to receiver sample buffer 230 guaranteeing to make.Then, high speed PN generator 372 will produce original real-time PN sequence again with this higher clock speed, and these PN signals are applied to first despreader 262 and second despreader 264 (Fig. 3).Apply homophase PN sequence by circuit 330, and apply quadrature phase PN sequence (Fig. 3) by circuit 332.
When high speed PN generator 372 increases a chip in the PN sequence, this state storage in next PN status register 340.This will be used as the starting point of next high-speed search in the predetermined window size.Next starting point from the super previous whole chip of initial p N state, because from the be correlated with increment of half chip of the delay version of numeral sample.
Two-phase correlator 202 (Fig. 3) is relevant with the PN sequence that produces from high speed PN generator 372 with the sample in the receiver sample buffer 230, to produce correlated results.At square frame 630 (Fig. 6) beginning related operation.In order to carry out relevant treatment, at first remove to expand sample with first despreader 262 and second despreader 264.Despreader is multiplexer or is familiar with known to the those skilled in the art other and removes expanded circuit.Next, going expanded data to be provided to first accumulator 274 and second accumulator 276.Accumulator comprises is familiar with adding up and summing circuit and logical circuit known to the those skilled in the art.
Produce in first accumulator 274 and second accumulator 276 and be provided to energy calculator 204.At first cumulative signal is provided to breech lock and scale circuit 284.Breech lock and scale circuit 284 comprise circuits for triggering, and can alternately be incorporated into first accumulator 274 and second accumulator 276.Can be used for the required accumulated value of scale energy reprocessing to the combinational logic in breech lock and the scale circuit 284.
Breech lock and scale circuit 284 are used to lock intermediate correlation result or the last correlated results (for example, being correlated with on the regulation correlation length) that is used to carry out energy calculating.For example, if the regulation correlation length that a specific PN is offset is 256 chips, can be chosen as 64 chips to intermediate length so.When in two-phase correlator 202, adding up 64 chips, lock this accumulated value and calculate its energy value and the middle threshold ratio of energy value and the threshold value input 295 that is present in energy preprocessor 206.At first carry out intermediate energy and calculate, whether producing suitable high-energy result to determine the skew that is used for high-speed search now.If not, abandon high-speed search so to this particular offset, continue next PN skew carrying out high-speed search.Can use the correlation length and the middle correlation length of other regulation.
If the energy value of intermediate computations is higher than the intermediate energy threshold value, stops breech lock so, and the regulation accumulation length is gone to expand through two correlators 202 and all the other samples of this PN skew that adds up two-phase correlator 202.The accumulated value of locking and scale is provided to multiplexer 290, one after the other is provided to power circuit 294 then.Therefore, the I that adds up
0At first be provided to power circuit 294 and carry out power operation, and the power value is provided to summation circuit 298.Then the Q that adds up
0Power be provided to summation circuit 298 to produce relevant total energy value (for example, I
0 2+ Q
0 2).
With energy value be present in energy preprocessor 206 threshold value input 295 second threshold ratio.If energy value is higher than second threshold value, conclude that so the energy indicating bit relevant with this energy value is for high.If energy value is lower than second threshold value, conclude that so the energy indicating bit relevant with this energy value is low.
In the beginning of high-speed search, all memory cell in the searcher output buffer 208 are initialized as zero.Then the first correlation energy value and its relevant energy indicating bit together are provided to searcher output buffer 208 by circuit 296, and are stored in one of memory cell.
In whole high-speed search, energy preprocessor 206 keeps the tracking to the memory cell of storage minimum energy signal in the searcher output buffer 208.If current calculated energy value is higher than the minimum energy that is stored in the searcher output buffer 208, energy preprocessor 206 will write new calculated energy value by via line 297 transmissions one memory cell and cover the register of searching in the output buffer 208 so.
As mentioned above, when the beginning high-speed search, initialization searcher output buffer 208 makes all energy values in its memory cell be made as zero.The first few calculated energy will automatically be write in the searcher output buffer 208, because the calculated energy value will be greater than the null value of initial setting up in the memory cell.Even at the final accumulated value of regulation on the correlation length less than second threshold value, also this energy value with predicate low relevant energy indicating bit and together be stored in the searcher output buffer 208.In case searcher output buffer 208 fills up, if proceed more search (because window size is greater than buffer capacity), so relatively the energy value of calculated energy value and storage.Then, if the calculated energy value is bigger, so new calculated energy value will write the energy value that covers storage.The energy value of storage sends back to energy preprocessor 206 through circuit 296 and is used for comparison.
Be applied to and select the searcher position signalling of input 300 to select reading/writing position of each stored energy value.Repeat this search procedure up to the high-speed search of having finished the regulation window size.
Window size for four is carried out four high-speed searchs altogether, once two.First pair of high speed of carrying out simultaneously is relevant will to produce I
0 2+ Q
0 2And I
1 2+ Q
1 2Energy value.Relate to I carrying out two
0/ Q
0And I
1/ Q
1High-speed search after, also need to carry out two search.
For next high-speed search, at square frame 632 (Fig. 6) address generator 226 (Fig. 3) pointer in the receiver sample buffer 230 is moved back into first and writes data sample.The initial state of high speed LSG322 starts from next PN status register 340; Leading 1 chip of the state of this state from be stored in initial p N state (because two relevant surpass zero PN skew and half chip PN is offset).
When each high speed PN generator 372 is offset from the initial p N state of original storage initial p N status register 318, high-speed information element counter 326 will increase.For example, two of the window size for four are relevant, and high-speed information element counter 326 has zero value.When making the leading chip of high speed PN generator 372 for following two correlations, high-speed information element counter 326 is increased to 1 value.Then, the high-speed search process begins with the PN sequence of leading 1 chip.
When the high-speed search quantity of carrying out equals window size, finish the high-speed search process in decision block 634.Read the energy that is stored in the searcher output buffer 208 at square frame 636 microprocessors 117 by circuit 304, and determine the highest energy of a relevant pilot signal ray, and the PN sequence location of this pilot signal.This is equivalent to catch the PN sequence timing of this pilot signal.
At square frame 638 (Fig. 6), turn round real-time PN generator 370 (Fig. 3) to mate the phase place of selected pilot signal.Specifically, turn round real-time LSG 310 and in real time PNR counter 312 and increase real time position counter 314 mating the phase place of selected ray to follow the tracks of revolution.At this moment PN generator 370 and searcher receiver 114 synchronization in real time is in the PN sequence timing of selected pilot signal.
The time 506 (Fig. 4) before, (Fig. 6) withdraws from radio telephone 104 from low-power mode at square frame 640 and 642.In other words, instruction radio telephone 104 is transformed into demodulation modes from low-power mode.For demodulation modes, by more circuit in the clock activating signal receiver modulator-demodulator 111 (Fig. 2) is provided.For example, by square frame 652 (Fig. 6) to system's timing unit 146 provide clock activating signal it.At square frame 636 (Fig. 6) the gating version of clock signal is provided at least one the demodulation branch road and the branch road timing unit 140 of RAKE receiver 112, to activate them at square frame 654 (Fig. 6).The clock signal that is provided to each demodulation branch road of RAKE receiver 112 is the gating version to the clock signal of branch road timing unit 140, thus each the demodulation branch road gating or shutoff independently of RAKE receiver 112.Do not need to start all demodulation branch roads this moment.
Also be the time 506 (Fig. 4) before, in the synchronizations of square frame 644 beginning demodulation branch road.Therefore, start at least one demodulation branch road after, with this at least one demodulation branch road synchronization in the real-time PN generator 370 of searcher receiver 114.With reference to figure 2,3,4 and 5 explain the branch road synchronization.The real-time PN generator 370 that Fig. 5 shows searcher receiver 114 how with searcher timing unit 142, branch road timing unit 140, system's timing unit 146, with each demodulation branch road (first demodulation branch road 122 for example, the second demodulation branch road, 124, the three demodulation branch roads 126 and the 4th demodulation branch road 128) branch road PN generator interact.
For the sake of clarity, in Fig. 5, only show and be used for searcher receiver 114, the specific timing frame circuit diagram of a plurality of demodulation branch roads (122,124,126 and 128) and system's timing unit.Those skilled in the art should know this only representational interaction block diagram, and have more circuit to be in relation to each square frame.Also be for clear, show the branch road PN generator 534 that is used for the first demodulation branch road 122; Each demodulation branch road has identical branch road PN generator.
The demodulation branch road divides two steps synchronously to carry out.At first, 140 synchronizations of branch road timing unit in searcher receiver 114.This is to rely on microprocessor 117 (Fig. 2) by circuit 532 instruction branch road timing units 140 (Fig. 2 and 5) its Phase synchronizationization to be finished in the high-resolution phase of searcher timing unit 142 (Fig. 2 and 5).As searcher timing unit 142, branch road timing unit 140 comprises control circuit, register and a high-resolution phase counter.Branch road timing unit 140 forms and coordinates the timing of branch road PN generator.Secondly, at least one demodulation branch road synchronization in the position of the real-time PN generator 370 of searcher receiver 114.This is to rely on by circuit 550 comprising that the PN state information of PN volume count state and PN position counting state finishes from the PN generator (being the branch road PN generator 534 of the first demodulation branch road 122) that searcher receiver 114 real-time PN generators 370 are loaded at least one demodulation branch road here.
The position of real-time LSG 310 is loaded among the first branch road LSG 536, the state (after this being called PN volume count state) of real-time PNR counter 312 is loaded in the first branch road PNR counter 538, and real time position counter 314 (after this calling PN position counting state) is loaded in the first branch road location counter 540.The branch road synchronization process can only be carried out on a demodulation branch road at first, maybe can start more than one demodulation branch road and synchronization in searcher receiver 114.At this point, selected demodulation branch road is synchronized.
At the actual (tube) length of considering the duration 512 (Fig. 4) in short-term, the revolution processing and the branch road synchronization process of PN generator 370 are to carry out under high speed in real time, have represented the negligible part of total duration 512.In addition, because the pilot signal high-speed search carries out under high clock speed, it is to carry out with the speed more faster than prior art spread spectrum system that high-speed search is handled.Finish the WAKE incident, the synchronized duration 512 of high speed pilot search and branch road (Fig. 4) is five milliseconds of grades.And prior art is finished the WAKE incident, and pilot search and synchronized duration of searcher receiver/branch road are shown in the duration 410 (Fig. 1), 30 milliseconds grade.Therefore, Power Cutback is not only by in the WAKE incident, and pilot search is handled, opened than prior art circuit still less during revolution and the branch road synchronization, and obtain by the service speed higher than prior art.
The PN sequence that has made now searcher receiver 114 and at least one demodulation branch road and selected pilot signal regularly synchronously, thereby remainder that also must synchronization receiver modulator-demodulator 111.More particularly, must synchronized system timing unit 146 (Fig. 2 and 5) at square frame 646.The function and the interaction of system's timing unit 146 control RAKE receiver 112 (Fig. 2) and other circuit.The demodulating data how system's timing unit command receiver modulator-demodulator 111 makes up from a plurality of branch roads of RAKE receiver 112 produces frame and symbol timing, and the required system timing information of circuit in the general tracking, coordinating receiver modulator-demodulator 111.
Synchronized system timing unit 146 (Fig. 5) is called as the SLAM incident.With reference to figure 4, SLAM occurs in the time 506.Because searcher receiver 114 and at least one demodulation branch road synchronization be in pilot signal, thereby can begin follow procedure on predetermined PN chip border by transmitting necessary information and carry out SLAM to system's timing unit 146.This predetermined PN chip border can be much more Zao as to take place than PN crimping circle in time.Per 512 chips in predetermined here PN chip border take place once, and PN crimping circle then is per 2
15Chip takes place once.Therefore, this predetermined PN chip border means the total length less than the PN sequence.
Be called as high-resolution SLAM at predetermined PN chip border synchronized system timing unit 146, occur in the time 508 that more close decoding begins because compare synchronization with the prior art radio telephone less than PN crimping circle.For example, for a 512-chip border, SLAM occurs in about 0.42 millisecond before of paging decoder time started 508; Next available PN crimping circle of about 26.6 milliseconds of generations before paging decoder begins of prior art radio telephone in contrast begins SLAM.
During the SLAM incident, the PN state information is sent to system's timing unit 146 from least one demodulation branch road.Specifically, be that the state of branch road PNR counter (for example branch road PNR counter 538) is sent to system time counter 558 by a plurality of circuits 554.By a plurality of circuits 556 state of branch road location counter (for example the branch road location counter 540) is sent to reference position counter 560.System time counter 558 is followed the tracks of the beehive network system times, and reference position counter 560 is the ray position followed the tracks of of frame of reference timing unit 146 then.Activity in System Timing Controller 562 controls and the coherent system timing unit 146, and in the instruction of input 542 receptions from microprocessor 117 (Fig. 2) transmission.
The PN signal of each demodulation branch road is produced by the branch road LSG of correspondence, and appears on a plurality of circuits 552.At square frame 648 (Fig. 6), each branch road uses the PN signal to come decoding paging messages, and demodulating data generally began in the time 508.When beep-page message was decoded, method finished at square frame 650 (Fig. 6).
Fig. 6 shows an alternate embodiment with the different step sequence that takes place after square frame 636.During the duration 512 (Fig. 4), at square frame 652 start-up system timing units 146, and at square frame 654 startup branch road timing unit 140 and at least one demodulation branch road.Respectively branch road timing unit 140 and at least one demodulation branch road are synchronized to searcher timing unit 142 and searcher receiver 114 at square frame 656.
At least one demodulation branch road is turned back to the PN timing of at least one pilot signal at square frame 658.Revolution branch road LSG 536 and branch road PNR counter 538 mating the phase place of selected ray, and increase branch road location counter 540 to follow the tracks of revolution.At square frame 646 (Fig. 6) 146 synchronizations of system's timing unit at least one demodulation branch road.Those skilled in the art will know the PN sequence of obtaining pilot signal regularly after other embodiment of startup and synchronized system timing unit and demodulation branch road.
In another alternate embodiment, searcher receiver 114 does not comprise receiver sample buffer 230 and high speed PN generator 372.Remain and at first activate the searcher receiver, and after the searcher receiver starts, provide clock signal, to save power consumption to system's timing unit and a demodulation branch road.
Can more generally illustrate the start-up system timing unit with the step that starts at least one demodulation branch road to be that at a scheduled event back takes place and start them, this scheduled event occurs in after at least a portion startup of searcher receiver.This scheduled event also can be included as catch at least one pilot signal the PN sequence regularly and the beginning of any step of carrying out or finish.
From above-mentioned explanation, can see, the invention provides a kind of method and apparatus that starts the spread spectrum multiple access radio receiver.Only after a scheduled event takes place, just start demodulation branch road and system's timing unit, thereby suitable Power Cutback is provided.Particular state information is provided for system's timing unit, the system timing unit of making can be in the predetermined chip border synchronization less than PN crimping circle, thereby makes the receiver modulator-demodulator can be information decoding quickly; This provides extra Power Cutback.The saving of this power consumption provides the longer air time, maybe can use littler battery.In addition, can on searcher receiver or demodulation branch road, carry out the revolution operation, thereby design flexibility is provided.
The above-mentioned explanation of the preferred embodiment that provides makes those skilled in the art can use the method that starts extended spectrum radio telephone receiver, or makes the device that starts extended spectrum radio telephone receiver.Those skilled in the art will easily understand the various improvement to these embodiment, and needn't use invention just can be applied to other embodiment to the General Principle of definition here.For example, the predetermined chip border that is used to carry out SLAM can not be defined as and take place on 512 chip borders.Describedly cut apart the radio telephone that method that pattern starts can be suitable for and be applied to start to acquisition mode in timeslice.Therefore, when radio telephone is opened first, can at first start the searcher receiver circuit, thereby can detect and catch appropriate pilot signal.This can comprise big PN sequence space of search and even may be all PN sequence spaces in fact.Identical with the front, only after taking place, scheduled event just starts demodulation branch road and system's timing unit, and the scheduled time amount of scheduled event after the searcher receiver starts takes place.
In addition, preferred embodiment is in conjunction with the explanation of IS-95CDMA cell phone system.The preferred embodiment can be applicable to the spread-spectrum cell phone system of other type equally, for example multi-carrier CDMA system and third generation wideband CDMA system.