Radio system provides radio communication to the user of radio subscriber unit.A kind of concrete radio system is a cellular radiotelephone system.A kind of concrete radio subscriber unit is the cellular radio subscriber unit, is sometimes referred to as mobile radio station.Cellular radiotelephone system generally includes: an exchange control unit that is coupled to a Public Switched Telephone Network and a plurality of base stations.In a plurality of base stations each delimited a geographic range that approaches the base station most usually to form the overlay area.The base station communication of the calling between one or more mobile radio stations and connection mobile radio station and public switched telephone network (PSTN).The description of cellular radiotelephone system sees in 1989 " mobile cellular communication system " (MobileCellular Communications Systems) book of William doctor C.Y.Lee.
Some mobile radio stations have space diversity to improve the reception of the signal of communication that is sent by the base station.Diversity adopts equipment redundancy or doubly part to realize that under the multipath fading condition receiver performance improves.Specifically, the two or more antennas of space diversity, these antenna is by separating apart from physics that is relevant to wavelength.In spatial diversity system, transmit through the different slightly path of two antennas of the transmitted from transmitter to receiver of associating.In addition, have reflection path, wherein also passed through the different paths of spontaneous emission machine by transmitting of each antenna reception.Experience shows, when reflection path transmits when causing decline by interference, because these different paths, the existence of multipath fading may not influence two received signals simultaneously to identical degree.Though may cause the phase cancellation (cancellation) of emission and reflection path ripple from the path of one of transmitter to two antenna, unlikely cause phase cancellation simultaneously to the multipath of another antenna.The probability that two antennas are receiving complete same signal is called as correlation factor.
Known spatial diversity system comprises switched antenna diversity (SAD), selects diversity (SD) and maximum rate to merge diversity (MRCD).Each diversity system comprises a controller, this controller have be programmed in the there with control diversity system algorithm.These three kinds of diversity systems in detail relatively be described in people such as Zdunek in Canada, among " performance of switched diversity receiver and optimization (the Performance and Optimization of Switched Diversity Receiver) " that delivers in the ieee communication proceedings in December, 1979 with people such as Zdunek in " optimization (On the Optimizationof Simple Switched Diversity Receivers) of simple switched diversity receiver " delivered in IEEE Canada in 1978 communication that hold in Montreal and the power meeting.The concise and to the point description of these three diversity systems is provided now.
SAD uses two antennas, and they are coupled to same receiver by a single-pole double-throw radio frequency (RF) switch.The signal that the controller sampling receives from each antenna only is coupled to receiver with one of two antennas constantly one.
SD uses two antennas and two receivers, and wherein each antenna is coupled to its receiver.Receiver with the highest base band signal to noise ratio (snr) is chosen as the signal of demodulation.SD provides the performance that is better than SAD, because the signal that receiver produces can be by the detection more frequent than SAD, and is subjected to switching transition still less.Yet the common shortcoming of SAD and SD is: only use an antenna at any one time, and another is left in the basket.
MRCD also uses two antennas and two receivers, and wherein each antenna is coupled to its receiver.By ground each signal of weighting and then the addition that be directly proportional with its signal to noise ratio, MRCD seeks to be used to the signal from each antenna.Accordingly, the individual signals in each diversity branch has been used all received signals by homophase and merging, even those have low signal-to-noise ratio.Yet the shortcoming of MRCD is: the realization of MRCD is more difficult and complicated more than SAD or SD.
A kind of concrete cellular radiotelephone system uses spread spectrum signalling.Spread spectrum can by wide meaning be defined as a kind of mechanism, be far longer than the bandwidth that baseband information signal requires by its bandwidth that takies that transmits.Two types of spread spectrum communication are direct sequence spread spectrum (DSSS) and frequency-hopping spread spectrum (FHSS).The essence of these two kinds of technology is to go up each user's of expansion transmitting power at a wide bandwidth (1-50MHz), so that at the power of per unit bandwidth, in W/Hz, be very little.
Frequency-hopping system obtains its processing gain by avoiding disturbing, and direct sequency system is with an interference attenuation technology.For DSSS, the purpose of receiver is to pick up to transmit from signal is lower than the wide reception bandwidth of background-noise level.For this reason, receiver must be known the phase place of carrier frequency signaling, modulation type, pseudo noise code check and sign indicating number, because signal to noise ratio normally bears 15 to 30dB.The phase place of determining sign indicating number is the most difficult.Receiver is called the starting point that synchronous process comes from received signal to determine sign indicating number with one, so that the signal that despreading (despread) needs and expand all undesired signals.
Compare with frequency hopping, the DSSS technology obtains good noiseproof feature, and cost is the complexity that has increased system.By generating signal multiplication with the broadband pseudo noise code, the frequency spectrum of easy spread signal.Must accurately know spread signal, but so that this signal of receiver demodulation (being despreading).And, must in a chip (chip) time (i.e. part or mark bit period), lock and follow the tracks of the correct phase of received signal.At receiving terminal, use a serial search (search) circuit.Two feedback loops are arranged, and one is used to lock correct code phase, and another is used to follow the tracks of carrier wave.For the lock code phase place, regulate sign indicating number clock and carrier frequency generator in the receiver so that local generated code moves forward in time with respect to the receiving code that enters or after move.Produce on the peaked point at the correlator output, these two signals are meaned to obtain correct code phase by synchronously.Then, the phase place of second ring (carrier tracking loop) tracking carrier wave and frequency are to guarantee keeping phase-locked.
Cellular radiotelephone system with DSSS is commonly called direct sequence CDMA (DS-CDMA) system.Each user in this system uses identical RF frequency, but by using extended code separately to be separated.
In the DS-CDMA system, forward channel is defined as the communication path from the base station to the mobile radio station, and backward channel is defined as the communication path from the mobile radio station to the base station.Under the limited condition of thermal noise, be equivalent to the low translational speed of 0-20km/hr, and in the multiple coverage areas territory that may carry out soft handover (handoff), DS-CDMA forward channel performance is bad.Therefore, the common restriction system capacity of forward channel.
Refer to (rake finger) by adding to collect on the receiver of mobile radio station, the forward channel work of DS-CDMA can be improved greatly.Refer to the performance improvement that provides can decompose time delay expansion and soft handover by these extra collections by optimum utilization, can be near the performance of MRCD.Each collection refers to produce the signal and a beacon signal of a demodulation.Usually, moving station measuring refers to the total received power (Io) of Traffic Channel in intermediate frequency (IF) bandwidth and the reception beacon power (Ec) of every chip of demodulation for each.Determine the ratio of the Ec/Io of every finger, and as the signal to noise ratio with the road Traffic Channel.This ratio is used for determining the service signal of the corresponding demodulation that a weighting function refers to from each collection with weighting.Weighting and signal demodulation that refers to from all collections is merged and is decoded.Because collecting signal that finger receives by each is the copy that transmits through different propagation paths, collects and refer to that the merging of exporting also can be considered as a class diversity.By using a plurality of antennas, the diversity gain of receiver can further be improved.Usually can use two antennas.In such receiver, one or more fingers is connected to each antenna.All outputs that refer to are merged, just as the receiver that has only an antenna.
Yet this method also has two problems.Total signal power (Io) is not directly proportional with total noise power, because from beacon signal and the part received signal and the desired signal quadrature of same base.And, may not reflect relation between corresponding service channel signal to noise ratio from the relation between the ratio (Ec/Io) of two sub-districts.
Regrettably, the percentage seldom that the time that significantly can decompose time delay expansion is arranged has only been measured in on-the-spot test, and theoretical and simulated experiment all is illustrated on the very limited amplitude range of signal the soft handover reinforcement is arranged.As a result, with respect to having antenna diversity and utilizing its all backward channels that refer to, forward channel is reduced by performance.
Because the wrong rate of frame (FER) is correlated with, forward channel not only has the scope that reduces, and channel quality is poor.And the backward channel mistake in time more at random, causes high quality speech.Relevant fundamental cause is the characteristic of fading channel and the muting sensitivity (sluggishness) of forward channel power control loop.
Even when the subscriber unit receiver is used more than an antenna realization antenna diversity, the problem that the prior art weight coefficient is determined is: when each all being had signal plus homophase and weighting of separately maximum signal to noise ratio (SNR), can not make the signal to noise ratio maximum of merging sometimes.
Therefore need to determine the method for weight coefficient in the cdma mobile station, it has overcome the shortcoming of prior art and has worked good in the DSSS system.
Fig. 1 illustrates the block diagram of the mobile radio station 100 that is used for radio system 102.Radio system 102 generally includes a plurality of base stations, for example comprises first base station 104 and second base station 106.Mobile radio station 100 generally includes first antenna 108, transmitter section 110 and receiver section 112.Transmitter section 110 comprises band pass filter 114, transmitter 116 and microphone 118.Receiver section 112 comprises the first front end receiver part 120 and rear end receiver section 122.The first front end receiver part 120 comprises band pass filter 124, intermediate frequency (IF) frequency converter 127, first wattmeter 137, first collection receiver 126, the first weight coefficient determiner 128 and first weighted network 130.First collects receiver 126 comprises that first collection refers to that 132, second collection refers to that the 134 and the 3rd collection refers to 136.Rear end receiver section 122 comprises a combiner 138, a deinterleaver (deinterleaver) 140, a decoder 142, a signal processor 144 and a loud speaker 146.Mobile radio station 100 also can comprise second antenna 148 and the second receiver front end part 150.The second receiver front end part 150 comprises band pass filter 152, intermediate frequency (IF) frequency converter 153, second wattmeter 163, second collection receiver 154, the second weight coefficient determiner 156 and second weighted network 158.Second collects receiver 154 comprises that first collection refers to that 160, second collection refers to that the 162 and the 3rd collection refers to 164.
In radio system 102, second required radio frequency (RF) signal 170 is launched to mobile radio station 100 in first base station, 104 emissions, first required radio frequency (RF) signal 166 to mobile radio station 100, the second base stations 106.Required RF signal 168 is the duplicate of required RF signal 166, is just delayed time owing to reflection or similar reason and decays.Required RF signal 170 is identical with required RF signal 166, just is used for switching or similar purpose from second base station 106.Usually know that mobile radio station 102 need be in the overlay area that the base station provides, so that efficient communication to be provided betwixt.Note that in typical radio system, have more than two base station with more than three required RF signal, but the radio system of Fig. 1 102 has been enough to describe the present invention.The switch instances of 106 in first base station 104 and second base station of mobile radio stations 100 is probably represented in two base stations.
In mobile radio station 100, first antenna 108 is coupled to transmitter section 110 and receiver section 112.Transmitter section 110 transmits from antenna 108, the signal that receiver section 112 receives from antenna 108.
In receiver section 112, first antenna receives first of required RF signal 166,1 and/or 170 and reproduces 172.Antenna 108 is coupled to band pass filter 124.Band pass filter 124 reproduces 172 filtering to first of required RF signal on a bandwidth, produce the signal of filtering with online 125.In preferred embodiments, bandwidth is 1.25MHz.
Know that in present technique IF frequency converter 127 is converted to online 174 intermediate frequency with the signal of online 125 filtering from a radio frequency." digital communication " that one example of IF frequency converter 127 probably is disclosed in the John Proakis that McGraw-Hill in 1989 publishes is (DigitalCommunication) in the book, or com-30 volume in the ieee communication proceedings in 1992, in the 855-884 page or leaf among " spread spectrum communication theory--guiding book) " (Theory of Spread Spectrum Communication-A Tutorial) of people such as Raymond L. Pickhotz.Know in present technique, many functions of IF frequency converter 127 can be carried out in discrete parts or in the integrated circuit (IC).
The total received power Io that wattmeter 137 is measured at the output of IF frequency converter 127.The total received power Io that measures is sent to the first weight coefficient determiner 128.
First collects receiver 126 is coupled to IF frequency converter 127, and has first group of collection and refer to 132,134 and 136, collects comprising first to refer to that 132, second collects and refer to that the 134 and the 3rd collection refers to 136.In preferred embodiments, there are three collections to refer to.Yet, can use any collection to refer to.First collection refers to that 132 online 176 produce received signal x1, and online 178 produce a beacon signal p1.Second collection refers to that 134 online 180 produce received signal x2, and online 182 produce a beacon signal p2.The 3rd collection refers to that 136 online 184 produce received signal x3, and online 186 produce a beacon signal p3.The received signal x1 of plural form, x2 and x3 are the signals that 172 demodulation is reproduced in first of the required RF signal 166,168 of expression and/or 170.Received signal x1, x2 and x3 are also referred to as data-signal, traffic channel signal and business datum.Also be the plural number beacon signal p1, p2 and p3 corresponding to received signal x1, x2 and x3.In present technique, known first and collected the work that receiver 126 produces received signal x1, x2 and x3 and beacon signal p1, p2 and p3, as " CDMA-spread spectrum communication principle " (the CDMA-Principles of Spread SpectrumCommunications) of Addison-Wesley publishing company in the A.J.Viterbi of nineteen ninety-five publication.
Beacon signal p1, p2 and p3, data-signal x1, x2 and x3, and total received signal power Io is coupled to the first weight coefficient determiner 128.The first weight coefficient determiner 128 online 188,190 and 192 produces first group of complex weighted coefficient c1, c2 and c3.First group of complex weighted coefficient c1, c2 and c3 are respectively corresponding to received signal x1, x2 and x3.First group of complex weighted coefficient c1, c2 and c3 use the first method described with reference to Fig. 2 and determine with reference to the second method that Fig. 3 describes.
First weighted network 130 is coupled to first and collects the receiver 126 and the first weight coefficient determiner 128.First weighted network 130 responds first group of complex weighted coefficient c1, c2 and c3 weighting received signal x1, x2 and x3 respectively, online 194,196 and 198 to produce first group of complex weighted received signal w1, w2 and w3 respectively.Received signal x1 is by weight coefficient c1 weighting, to produce the received signal w1 of weighting.Received signal x2 is by weight coefficient c2 weighting, to produce the received signal w2 of weighting.Received signal x3 is by weight coefficient c3 weighting, to produce the received signal w3 of weighting.The work of first weighted network 130 be by respective weight coefficient ci (i=1,2 ..., complex conjugate n.) go to take advantage of each xi (i=1,2 ..., n.).The received signal wi of the weighting that is produced (i=1,2 ..., n.), be the real part of i product.
Combiner 138 is coupled to first weighted network 130, and merges received signal w1, w2 and the w3 of first group of weighting, produces a signal that merges with online 200.Note that signal to noise ratio (S/N) maximum of the first weight coefficient determiner 128 for the signal that makes online 200 merging, according to the flow chart among Fig. 2 and Fig. 3, optimization first group of weight coefficient c1, c2 and c3.Deinterleaver 140 is coupled to combiner 138, and the signal of online 200 the merging of being suitable for deinterleaving, the signal 202 that deinterleaves with generation.Decoder 142 is coupled to deinterleaver 140, and the signal that is suitable for decoding and deinterleaves, and produces the signal of a decoding with online 204.Signal processor 144 is coupled to decoder 142, and is suitable for handling the signal of decoding, produces the signal of a reduction with online 206.Loud speaker 146 receives the signal of online 206 reduction, and is voice signal with the signal transition of online 206 reduction.Known the work of combiner 138, deinterleaver 140, decoder 142, signal processor 144 and loud speaker 146 in the present technique.
In preferred embodiments, first collects receiver 126 (comprises despreading work, I-Q demodulation and synchronous), first weighted network 130, combiner 138, deinterleaver 140, decoder 142 are included in the application-specific integrated circuit (ASIC) (ASIC), be described in the IEEE1992 universal integrated circuit minutes, the 10.2nd part, " the cdma mobile station modulator-demodulator ASIC " of 1-5 page or leaf (CDMA Mobile Station Modem ASIC); In IEEE1992 universal integrated circuit minutes, the 10.1st part, " the CDMA Digital Cellular System ASIC summary " of 1-7 page or leaf (The CDMA DigitalCellular System an ASIC Overview).In preferred embodiments, the first weight coefficient determiner 128 and signal processor 144 be a microcomputer normally, such as microprocessor or digital signal processor (DSP).Microcomputer can be the MC68332 microcontroller, and DSP can be MC56156DSP; Two kinds of parts are all by Motorola Inc.'s produce and market.
Mobile radio station 100 preferably has two antennas 108 and 148.The second receiver front end part 150 receives second of required RF signal 166,168 and/or 170 and reproduces 208 by second antenna 148.The second receiver front end part 150 provides space diversity work for radio subscriber unit 100.The work of the second receiver front end part 150 is identical with the work of the first receiver front end part 120.Note that similar element and holding wire with different labels, similar signal label apostrophe.Like this, use first method of describing with reference to Fig. 2 and second method of describing with reference to Fig. 3, determine the first weight coefficient c ' 1, c ' 2 and the c ' 3 of the second weight coefficient determiner 156.The coefficient determiner 210 that the first weight coefficient determiner 128 and 156 definition one of the second weight coefficient determiner merge.In response among the beacon signal p1 of two fore-ends 120 and 150, p2, p3, p ' 1, p ' 2, the p ' 3 at least one, among data-signal x1, x2, x3, x ' 1, x ' 2, the x ' 3 at least one, reach at least one among first and second total received signal power Io and the I ' o, the coefficient determiner 210 of merging also can be determined weight coefficient c1, c2, c3 and c ' 1, c ' 2, the c ' 3 of each fore-end 120 and 150 respectively.
Required RF signal 166,168 and/or 170 first reproduce 172 and second the reproducing 208 and provide the same information of required RF signal 166,168 and/or 170 to mobile radio station 100.Yet, because the spatial relationship of 148 on first antenna 108 and second antenna with respect to the required RF signal that receives at another antenna, may be delayed time and/or be decayed at the required RF signal that an antenna receives.In order to improve the reception of mobile radio station 100, the diversity operation of the first receiver front end part 120 and the second receiver front end part 150 utilizes these difference.
Those skilled in the art knows, and two above antennas can be installed in the diversity receiver apparatus of mobile radio station 100.First antenna 108 and second antenna 148 generally include any reception and/or the antenna of transmitting RF signal.In preferred embodiments, first antenna 108 and second antenna 148 are the dipole antennas with half λ wavelength.Those of ordinary skill in the art knows, appropriate location, space and the direction etc. of first antenna 108 and second antenna 148 in radio subscriber unit 102.Know in the present technique, second antenna 148 can be positioned on the flap part of mobile radio station 100.
In preferred embodiments, first antenna 108 is considered to main antenna, because it is coupled to the first receiver front end part 120 and transmitter section 110.Second antenna 148 is considered to realize pair (or substituting) antenna of diversity receiver function.Transmitter section 110 is not coupled to second antenna 148.
Radio system 100 is often referred to the communication system on any RF of being operated in channel.Wish that the radio system that is included in the scope of the present invention includes, but not limited to cellular radiotelephone communication systems, two-way radio system and PCS Personal Communications System (PCS).
In preferred embodiments, radio system 100 is cellular radiotelephone communication systems.In preferred embodiments, cellular radiotelephone communication systems is a direct sequence--code division multiple access (DS-CDMA) cellular radiotelephone communication systems.The standard of this system is disclosed in the " TIA/EIA/IS-95 that publishes in July, 1993, the compatible standard in the mobile radio station-base station of dual mode wideband spread spectrum cellular system) (TIA/EIA/IS-95, Mobile Station-Base Station Compatibility Standardfor Dual-Mode Wide Band Spread Spectrum Cellular System) (hereinafter referred to as " IS-95 standard "), here as a reference.
In preferred embodiments, mobile radio station 100 is DS-CDMA radio subscriber units, and it is designed to compatible with the DS-CDMA cellular radiotelephone system described in the aforementioned IS-95 standard.Mobile radio station 100 can be the various ways of knowing in the present technique, such as, board units, portable unit or a mobile unit.
In the IS-95 standard, provided the nomenclature that is used for naming the mobile radio station data unit.Below table 1 sequential relationship between each data unit in cdma mobile station 100 has been described.
Table one unit speed (seconds) speed (symbols) is explained and to be called among the chip code element symbol 19.2ksym/s 64chips/symbol attitude position in chip chip 1.2288Mchip/s one emission position to be called symbol bits bit 9.6kbit/s 2symbols/bit convolution coder be that speed 1/2PCG 800PCG/s 24symbols/PCG power control framing frame 50Hz 192bits/frame master data is a bit
DS-CDMA is the technology that is used for the spread spectrum multiple access digital communication, and it produces channel by using specific sign indicating number sequence.The DS-CDMA signal can and be received when interference levels occurring really.The physical constraints that signal receives is decided on channel condition, but the DS-CDMA that describes in the aforementioned IS-95 standard receives, and can occur in the interference of appearance than the big 18dB of static channel signal.Usually, system works is under low interference level and dynamic channel condition.
Know in present technique, the DS-CDMA cellular radiotelephone communication systems can be divided into a plurality of districts or overlay area.In the DS-CDMA system, communication frequency it seems that by mobile radio station 100 majority on given frequency disturbs from the sub-district beyond the sub-district at mobile radio station 100 places in each district's recycling of each sub-district.
The DS-CDMA base station transceiver is communicated by letter with mobile radio station 100 with the signal with master data speed 9600bits/s.This signal is expanded the emission bit rate into 1.2288Mhz then, or spreading rate.Expansion comprises that it has improved data rate to the data position digital coding, has increased the redundancy of DS-CDMA system simultaneously.To in this sub-district, be formed a complex digital signal mutually by all users' chip then.This complex digital signal is launched with the filtered quaternary PSK with the restricting signal bandwidth (QPSK) modulation format then.
Transmit when being moved station 100 and receiving when one, coding is removed from desired signal, makes it get back to the data rate of 9600bit/s.When coding is used to other user's sign indicating number, there is not despreading; Received signal keeps the bandwidth of 1.2288MHz.Emission bit or chip are coding gains with the ratio of data bit.According to the IS-95 standard, the coding gain of DS-CDMA system is 128, or 21dB.Because the coding gain of this 21dB,, can allow to be higher than the interference that signal level reaches 18dB (be lower than coding gain after signal strength signal intensity 3dB) for static channel.
Fig. 2 illustrates the flow chart 250 of determining first embodiment of first group of weight coefficient c1, c2 and c3 in the mobile radio station 100 of Fig. 1.
In step 251, method begins.
In step 252, collect receiver 126 and second by first of Fig. 1 and collect all beacon signals that receiver 154 despreadings collection refers to.
In step 253, by the first weight coefficient determiner 128 and the second weight coefficient determiner, the 156 reception beacon signals of Fig. 1.
In step 254, collect receiver 126 and second by first of Fig. 1 and collect all business datum signals that receiver 154 despreadings collection refers to.
In step 255, by the first weight coefficient determiner 128 of Fig. 1 and the business datum of the second weight coefficient determiner, 156 reception despreadings.
In step 256, the power of the output by reading IF filter 127 and 153 is respectively determined total received signal power Io and I ' o.This is carried out by wattmeter 137 and 163 respectively.
In step 257, by two fast Hadamard transform devices (Hadamard transformers) (not shown) that lays respectively in the first weight coefficient determiner 128 and the second weight coefficient determiner 156, (Io and I ' determine emittance o) from total received signal power.
In step 258, by the first weight coefficient determiner 128 and the second weight coefficient determiner 156 of Fig. 1, the signals quilt that receives from step 253,255,256 and 257 is level and smooth in time.The purpose of this step is the loss that reduces from radio channel noise, receiver noise and signal rate variation.
In step 259, by the first weight coefficient determiner 128 and the second weight coefficient determiner 156 of Fig. 1, will be from the level and smooth signal averaging of same base.The purpose of this step is the loss that further reduces from radio channel noise, receiver noise and signal rate variation.In two weight coefficient determiners 128 and 156 from the data of same base preferably merge in this step (such as, from the level and smooth beacon signal p3 of base station 106 and p ' 3 by average, to produce the estimated value of beacon signal).
In step 260, by the first weight coefficient determiner 128 and the second weight coefficient determiner 156 of Fig. 1, computing parameter Yj and Kj.
In step 261, determine first group of complex weighted coefficient c1, c2 and c3 in order to following equation:
Wherein,
Symbol (
*) computing of expression complex conjugate,
E[|pi|
2] be the power of pi,
Io is the total received signal power behind IF frequency converter 127,
Yj, Kj are and the relevant constant of distribute power from the signal of base station j that refers to demodulation by i.
Concrete, factor Yj is determined by following formula:
This value is normalized to total efficiency (full rate) service channel power.
Kj can be scheduled, and is as follows, or determines in real time.By to square the averaging of the mould of one group of corresponding beacon as follows and signal sampling, can calculate the power of the beacon of beacon pi and service signal xi.Desirable, Kj should be:
Factor K j can be set to the rated value of this ratio.Because beacon power normally gross power 20%, the selection of K=5 is acceptable.Perhaps, by with the output addition on the sampling phase of the strongest beacon of the fast hadamard transform of signal 174 or 212, and on the number frames level and smooth this summation and beacon, can estimate total transmitting power.Then, Kj equals the ratio of these two values.Again, the input from a plurality of radiation, two antennas and a plurality of frames can be used for more accurate estimation.
By reading power respectively, determine total received signal power Io and I ' o at the output of IF filter 127 and 153.This signal can be averaged on one or more frames.In the receiver apparatus of reality, automatic gain control (AGC) circuit is always arranged, this circuit makes total receiver power keep constant level be converted to digital sample by analog to digital converter (ADC) before.As a result, Io one depends on the constant of the working point of AGC and ADC, and those skilled in the art have known these.
In step 261, second group of weight coefficient c ' 1, c ' 2 and c ' 3 calculate in as follows and first group of weight coefficient c1, c2 mode similar with c3.
Note that in the prior art Yj always is 1, Kj always is 0, to draw weight coefficient c1=p1
*/ Io, c2=p2
*/ Io and c3=p3
*/ Io.First embodiment is regulated weighted factor and has been improved prior art by physical condition is taken in.Signal by the different base station emission may not keep constant relationship between beacon signal, traffic channel signal and total signal power.In fact, network optimization is usually with according to condition to need to change these relations relevant.And, receive in unequal power level usually from the signal of different base station.The weighting of not considering above-mentioned condition of prior art trends towards showing equal weighting to all, and only variation is beacon energy pi, is combined each signal weighting of device 138.On the contrary, preferred embodiment is considered emission and channel condition really, and therefore the signal to input combiner 138 has provided more accurate weighting.This can introduce the performance improvement up to 2.0dB between transfer period.
Usually, each port uses 2-4 finger, these refer to be assigned as and have unbalanced configuration (such as, sometimes, mouthful be 4 fingers at one end, be 2 fingers in the another port).The molecule of weighted factor ci changes instantaneous beacon channel energy measured value into Traffic Channel energy measure (that is: instantaneous Traffic Channel energy=YjE[|pi|
2]).Base station 104 or 106 is not a value of calculating Yj from received signal, comprises the information of Yj right value to mobile radio station 100 but can send one.
In step 262, by first group of complex weighted coefficient c1, c2 and c3, with first weighted network 130, to by first first group of Traffic Channel x1, x2 that collects that receiver 126 produces and the x3 weighting.Further, by second group of complex weighted coefficient c ' 1, c ' 2 and c ' 3, with second weighted network 158, to collecting second group of Traffic Channel x ' 1, x ' 2 and x ' 3 weightings that receiver 154 produces by second.
In step 263, with the combiner 138 of Fig. 1, the signal of the weighting that will be produced by first weighted network 130 and second weighted network 158 merges, and online 200 produce the signal that merges.
In step 268, the signal 200 of merging is stored in the deinterleaver buffer in the deinterleaver 140 of Fig. 1.
In step 269, judge whether the deinterleaver buffer is received in.If buffer is received in, flow process proceeds to step 264.If the deinterleaver buffer is not received in, flow process is returned step 251.
In step 264, the signal 200 that is combined with the deinterleaver 140 of Fig. 1 deinterleaves, and produces the signal that deinterleaves with online 202.
In step 265,, produce the signal of decoding with online 204 with 142 pairs of signal decodings that deinterleave of decoder of Fig. 1.
In step 266, handle the signal of online 204 decoding, be that loud speaker 146 produces voice signals with online 206.
In step 267, this method finishes.
Fig. 3 illustrates the flow chart 300 of determining second embodiment of first group of weight coefficient c1, c2 and c3 in the mobile radio station 100 of Fig. 1.
The problem that the weight coefficient of prior art is determined is: when each all being had signal plus homophase and weighting of separately maximum signal to noise ratio (SNR), but can not make the signal to noise ratio maximum altogether sometimes.When occurring disturbing, more advantageously eliminate interference signal, rather than make the SNR maximum of each signal.Usually, best decision may be: do not rotate to such an extent that be enough to eliminate fully interference, but only be enough to make the SNR maximum of the signal of online 200 merging.
In step 301, this method begins.
In step 302, all that are referred to 132,134,136,160,162 and 164 despreading beacon signals by the collection of Fig. 1 refer to.
In step 303, receive the beacon signal of despreading by the weight coefficient determiner 128 and 156 of Fig. 1.
In step 306, all that are referred to 132,134,136,160,162 and 164 despread traffic data by the collection of Fig. 1 refer to.
In step 307, receive the business datum of despreading by the weighted network 130 and 138 of Fig. 1.
To merge the finger of two antennas in order how explaining in the optimization of combiner output, to make x according to minimum mean square error criterion (MSE)
i(k) and p
i(k) data of i despreading that refers to of the signal of k code element of expression reception and beacon output respectively.First, second and the 3rd finger are connected to first antenna, and the 4th to the 6th refers to be connected to second antenna.Like this, provide at the estimated value of biphase phase shift keying (BPSK) data symbols of time n real part by following formula:
Wherein, c
i(n) be merge coefficient.The QPSK signal if we decode should use the real part and the imaginary part of following formula.Optimize channel coefficients and should minimize mean square error at the combiner output.For realizing this purpose, channel coefficients should minimize the mean-square value of following formula:
Wherein A is an arbitrary constant.
In step 305, the straightforward procedure that solves coefficient ci is with following lowest mean square (LMS) algorithm.If use lowest mean square (LMS) algorithm in force, design factor vector C (n) is come in equation (1) and (2) below using.It is pressed the following formula recursion and calculates:
C (n)=C (n-1)+Δ e (n) p
*(n) (1) wherein C (n) be coefficient vector, be defined as:
C (n)=[c
1(n) ... c
M(n)]
t, p (n) is the beacon signal phasor, is defined as:
P (n)=[p
1(n), p
2(n) ..., p
6(n)]
t, e (n) is self adaptation (adaptation) error of determining in step 304, is defined as:
In these equations, " t " and " * " represents transposition and complex conjugate computing respectively.
Perhaps, in step 305, when channel condition changes fast, such as, be used on the automobile, wish that this adaptive algorithm can follow the tracks of fast channel variation.In this case, available more complicated algorithm such as the least square algorithm of weighting, determines that the optimization merge coefficient is to produce a more performance.Such algorithm is least square (LS) algorithm.The LS algorithm is shown in the equation (3), (4) and (5) of design factor vector C (n).
By separating following matrix equation, calculate weight coefficient vector C (n):
C (n)=R
-1(n-1) r (n), (3) wherein,
With
Wherein, A is an arbitrary constant, and L is the time of integration.
In these equations, w (k) is a weighting function, should select it according to the fading characteristic of channel.In most of the cases, we can simply make w (k)=1, do not have significantly sacrificing in performance.Such window function is called matrix window traditionally.Another common type of window is so-called window index, w (k)=bk, wherein 0＜b≤1.Again, n BPSK data symbols is by calculating according to following formula as mentioned above:
The QPSK signal if we decode, the real part and the imaginary part of application following formula.
The people who is familiar with this technology status knows, and when using index or matrix window, coefficient vector C (n) can be calculated by recursion, and does not need the dematrix equation.
In step 308, by first group of complex weighted coefficient c1, c2 and c3, with first weighted network 130, to by first first group of Traffic Channel x1, x2 that collects that receiver 126 produces and the x3 weighting.Further, by second group of complex weighted coefficient c ' 1, c ' 2 and c ' 3, with second weighted network 158, to collecting second group of Traffic Channel x ' 1, x ' 2 and x ' 3 weightings that receiver 154 produces by second.
In step 309, with the combiner 138 of Fig. 1, the signal of the weighting that first weighted network 130 and second weighted network 158 are produced merges, and online 200 produce the signal that merges.
In step 314, the signal 200 of merging is stored in the deinterleaver buffer in the deinterleaver 140 of Fig. 1.
In step 315, judge whether the deinterleaver buffer is received in.If buffer is received in, flow process proceeds to step 310.If the deinterleaver buffer is not received in, flow process is returned step 301.
In step 310, the signal 200 that is combined with the deinterleaver 140 of Fig. 1 deinterleaves, and produces the signal that deinterleaves with online 202.
In step 311,, produce the signal of decoding with online 204 with 142 pairs of signal decodings that deinterleave of decoder of Fig. 1.
In step 312, handle the signal of online 204 decoding, be that loud speaker 146 produces the signal of handling with online 206.
In step 313, this method finishes.
Though first and second embodiments are described with reference to cdma mobile station, they also can be implemented in the base station.First and second embodiments are particularly suitable in such base station: as the IS-95 prescribed by standard, its backward channel has the structure similar to forward channel, perhaps when backward channel has less interference.