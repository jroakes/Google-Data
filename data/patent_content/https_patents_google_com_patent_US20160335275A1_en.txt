US20160335275A1 - Privacy-sensitive query for localization area description file - Google Patents
Privacy-sensitive query for localization area description file Download PDFInfo
- Publication number
- US20160335275A1 US20160335275A1 US14/708,970 US201514708970A US2016335275A1 US 20160335275 A1 US20160335275 A1 US 20160335275A1 US 201514708970 A US201514708970 A US 201514708970A US 2016335275 A1 US2016335275 A1 US 2016335275A1
- Authority
- US
- United States
- Prior art keywords
- area description
- localization area
- description file
- request
- spatial features
- Prior art date
- Legal status (The legal status is an assumption and is not a legal conclusion. Google has not performed a legal analysis and makes no representation as to the accuracy of the status listed.)
- Abandoned
Links
Images
Classifications
-
- G06F17/3087—
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04W—WIRELESS COMMUNICATION NETWORKS
- H04W4/00—Services specially adapted for wireless communication networks; Facilities therefor
- H04W4/02—Services making use of location information
-
- G—PHYSICS
- G01—MEASURING; TESTING
- G01S—RADIO DIRECTION-FINDING; RADIO NAVIGATION; DETERMINING DISTANCE OR VELOCITY BY USE OF RADIO WAVES; LOCATING OR PRESENCE-DETECTING BY USE OF THE REFLECTION OR RERADIATION OF RADIO WAVES; ANALOGOUS ARRANGEMENTS USING OTHER WAVES
- G01S5/00—Position-fixing by co-ordinating two or more direction or position line determinations; Position-fixing by co-ordinating two or more distance determinations
- G01S5/02—Position-fixing by co-ordinating two or more direction or position line determinations; Position-fixing by co-ordinating two or more distance determinations using radio waves
- G01S5/0252—Radio frequency fingerprinting
- G01S5/02521—Radio frequency fingerprinting using a radio-map
-
- G—PHYSICS
- G01—MEASURING; TESTING
- G01S—RADIO DIRECTION-FINDING; RADIO NAVIGATION; DETERMINING DISTANCE OR VELOCITY BY USE OF RADIO WAVES; LOCATING OR PRESENCE-DETECTING BY USE OF THE REFLECTION OR RERADIATION OF RADIO WAVES; ANALOGOUS ARRANGEMENTS USING OTHER WAVES
- G01S5/00—Position-fixing by co-ordinating two or more direction or position line determinations; Position-fixing by co-ordinating two or more distance determinations
- G01S5/16—Position-fixing by co-ordinating two or more direction or position line determinations; Position-fixing by co-ordinating two or more distance determinations using electromagnetic waves other than radio waves
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/10—File systems; File servers
- G06F16/13—File access structures, e.g. distributed indices
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/10—File systems; File servers
- G06F16/14—Details of searching files based on file metadata
- G06F16/148—File search processing
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/20—Information retrieval; Database structures therefor; File system structures therefor of structured data, e.g. relational data
- G06F16/24—Querying
- G06F16/245—Query processing
- G06F16/2457—Query processing with adaptation to user needs
- G06F16/24578—Query processing with adaptation to user needs using ranking
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/30—Information retrieval; Database structures therefor; File system structures therefor of unstructured textual data
- G06F16/33—Querying
- G06F16/332—Query formulation
- G06F16/3329—Natural language query formulation or dialogue systems
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/30—Information retrieval; Database structures therefor; File system structures therefor of unstructured textual data
- G06F16/33—Querying
- G06F16/3331—Query processing
- G06F16/334—Query execution
- G06F16/3344—Query execution using natural language analysis
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/40—Information retrieval; Database structures therefor; File system structures therefor of multimedia data, e.g. slideshows comprising image and additional audio data
- G06F16/43—Querying
- G06F16/432—Query formulation
- G06F16/433—Query formulation using audio data
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/90—Details of database functions independent of the retrieved data types
- G06F16/903—Querying
- G06F16/9032—Query formulation
- G06F16/90332—Natural language query formulation or dialogue systems
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/90—Details of database functions independent of the retrieved data types
- G06F16/95—Retrieval from the web
- G06F16/951—Indexing; Web crawling techniques
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/90—Details of database functions independent of the retrieved data types
- G06F16/95—Retrieval from the web
- G06F16/953—Querying, e.g. by the use of web search engines
- G06F16/9537—Spatial or temporal dependent retrieval, e.g. spatiotemporal queries
-
- G06F17/30091—
-
- G06F17/30106—
-
- G06F17/3053—
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06T—IMAGE DATA PROCESSING OR GENERATION, IN GENERAL
- G06T7/00—Image analysis
- G06T7/20—Analysis of motion
- G06T7/246—Analysis of motion using feature-based methods, e.g. the tracking of corners or segments
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06T—IMAGE DATA PROCESSING OR GENERATION, IN GENERAL
- G06T7/00—Image analysis
- G06T7/70—Determining position or orientation of objects or cameras
- G06T7/73—Determining position or orientation of objects or cameras using feature-based methods
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L15/00—Speech recognition
- G10L15/08—Speech classification or search
- G10L15/18—Speech classification or search using natural language modelling
- G10L15/1822—Parsing for meaning understanding
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L15/00—Speech recognition
- G10L15/22—Procedures used during a speech recognition process, e.g. man-machine dialogue
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L25/00—Speech or voice analysis techniques not restricted to a single one of groups G10L15/00 - G10L21/00
- G10L25/48—Speech or voice analysis techniques not restricted to a single one of groups G10L15/00 - G10L21/00 specially adapted for particular use
- G10L25/69—Speech or voice analysis techniques not restricted to a single one of groups G10L15/00 - G10L21/00 specially adapted for particular use for evaluating synthetic or decoded voice signals
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L25/00—Speech or voice analysis techniques not restricted to a single one of groups G10L15/00 - G10L21/00
- G10L25/78—Detection of presence or absence of voice signals
- G10L25/87—Detection of discrete points within a voice signal
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04W—WIRELESS COMMUNICATION NETWORKS
- H04W4/00—Services specially adapted for wireless communication networks; Facilities therefor
- H04W4/02—Services making use of location information
- H04W4/024—Guidance services
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04W—WIRELESS COMMUNICATION NETWORKS
- H04W4/00—Services specially adapted for wireless communication networks; Facilities therefor
- H04W4/02—Services making use of location information
- H04W4/029—Location-based management or tracking services
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04W—WIRELESS COMMUNICATION NETWORKS
- H04W64/00—Locating users or terminals or network equipment for network management purposes, e.g. mobility management
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04W—WIRELESS COMMUNICATION NETWORKS
- H04W4/00—Services specially adapted for wireless communication networks; Facilities therefor
- H04W4/02—Services making use of location information
- H04W4/025—Services making use of location information using location based information parameters
- H04W4/026—Services making use of location information using location based information parameters using orientation information, e.g. compass
Definitions
- the present disclosure relates generally to visual mapping systems and more particularly to the localization of mobile devices using visual information.
- Visual mapping systems rely on spatial features (also referred to as “visual features”) detected in imagery captured by a mobile device, as well as inertial information, to determine the current position and orientation of the mobile device in a three-dimensional (3D) space.
- the position and orientation are determined in the context of a defined coordinate frame so as to facilitate various functionality that requires synchronization to a known, fixed reference frame, such as virtual reality (VR) functionality, augmented reality (AR) functionality, or gaming or other device-enabled interactions between multiple mobile devices.
- VR virtual reality
- AR augmented reality
- Simultaneous localization and mapping (SLAM) techniques enable a mobile device to map a previously unmapped area while concurrently learning its position and orientation within the area.
- the mobile device when the mobile device returns to the same area, it may readily determine its current position and orientation within that area through detection of previously-observed spatial features in a process known as “localization.” However, when the mobile device is entering an area for the first time, the mobile device lacks these previously-detected localization cues. In conventional visual mapping systems the mobile device must “learn” the area through implementation of the visual mapping process—a process which takes considerable time and resources. To avoid the delay involved in performing the visual mapping process for a previously-unmapped area, conventional visual mapping systems instead may revert to detection of orientation or position of the mobile device based on non-visual orientation input, such as global positioning system (GPS) information or location mapping via inertial sensor feedback.
- GPS global positioning system
- these non-visual mapping solutions can be unreliable (e.g., poor GPS reception indoors or in areas surrounded by tall obstructions), imprecise, and prone to error due to sensor and measurement drift.
- FIG. 1 is a diagram illustrating a cloud-based visual mapping system for crowd-sourced creation and updating of area description files provided to mobile devices for localization in accordance with at least one embodiment of the present disclosure.
- FIG. 2 is a block diagram illustrating an area description file server of the visual mapping system of FIG. 1 in accordance with at least one embodiment of the present disclosure.
- FIG. 3 is a block diagram illustrating a mobile device of the visual mapping system of FIG. 1 in accordance with at least one embodiment of the present disclosure.
- FIG. 4 is a flow diagram illustrating a method for selecting one of a previously-mapped localization process or a previously-unmapped localization process in accordance with at least one embodiment of the present disclosure.
- FIG. 5 is a flow diagram illustrating a method for crowd-sourced generation of a localization area description file in accordance with at least one embodiment of the present disclosure.
- FIG. 6 is a flow diagram illustrating a method for localization of a mobile device using a localization area description file obtained from a remote area description file server in accordance with at least one embodiment of the present disclosure.
- FIG. 7 is a flow diagram illustrating a method for crowd-sourced updating of a localization area description file in accordance with at least one embodiment of the present disclosure.
- FIG. 8 is a flow diagram illustrating a method for evaluating a candidate spatial feature for inclusion in a localization area description file in accordance with at least one embodiment of the present disclosure.
- FIG. 9 is a flow diagram illustrating a method for evaluating a spatial feature for removal from a localization area description file in accordance with at least one embodiment of the present disclosure.
- FIG. 10 is a diagram illustrating a two-level query interface for an LADF database of an area description file server for performing localization area description file queries in accordance with at least one embodiment of the present disclosure.
- FIG. 11 is a flow diagram illustrating a method for a two-level query for a localization area description file in accordance with at least one embodiment of the present disclosure.
- FIG. 12 is a diagram illustrating an alternative two-level query interface for an LADF database of an area description file server for performing localization area description file queries in accordance with at least one embodiment of the present disclosure.
- FIGS. 1-12 illustrate example systems and techniques for cloud-based creation, revision, and provision of localization area data files to mobile devices.
- a visual mapping system comprises an area description file (ADF) server communicatively coupled to a plurality of mobile devices via one or more wired or wireless networks.
- ADF area description file
- the mobile device initiates an area learning process whereby the mobile device captures imagery of the area, detects spatial features using the captured imagery, and transmits representations of the spatial features, their relative geometry, associated statistical data, and concurrently captured sensor data in an ADF to the ADF server.
- the ADF server uses this ADF to generate a localization ADF (LADF), which represents a sparse point cloud of spatial features of the area.
- LADF localization ADF
- the LADF then may be downloaded to another mobile device in the area covered by the LADF.
- a mobile device receiving the LADF may capture imagery of the area, detect spatial features therein, and compare the detected spatial features and their relative geometry to the spatial features and relative geometries represented by the LADF so as to localize the mobile device within the area using the reference coordinate frame presented by the LADF.
- the area discovery and mapping of a previously-unmapped area may be efficiently crowd-sourced through passive collection and uploading of data by the mobile devices.
- the ADF server receives ADF files from multiple mobile devices for the same area, or for adjacent areas, and the ADF server operates to merge these multiple ADF files into a merged ADF file (or merged cluster of ADF files), which in turn may be used to generate one or more LADFs for the area, or sub-areas thereof.
- the ADF server may utilize crowd-sourced updating of an LADF generated for an area based on feedback from the mobile devices using the LADF for localization in the area. For example, in response to feedback indicating that some spatial features in the LADF are not being reliably observed by the mobile devices, the ADF server may remove these spatial features from the LADF. Conversely, in response to feedback indicating that spatial features not included in the LADF are being reliably observed by mobile devices in the area, the ADF server may add these spatial features to the LADF.
- the visual mapping system implements certain privacy controls.
- One such privacy control may include configuring the mobile device to implement one or more privacy filter processes on the data of an ADF before the ADF is uploaded to the ADF server, and thus rendering the information represented by the uploaded version of the ADF unusable for the purposes of recreating useful visual content of the area.
- Another such privacy control may include a two-stage LADF query for accessing LADFs for distribution to mobile devices.
- the mobile device When a mobile device enters an area for which it does not have an LADF available, the mobile device captures imagery, detects spatial features from the captured imagery, and submits an LADF request to the ADF server, whereby the LADF request includes a set of the detected spatial features and an indicator of the location of the mobile device (e.g., GPS coordinates or one more wireless base station identifiers).
- the ADF server then may conduct a first query stage to identify a set of candidate LADFs that match one of the set of detected spatial features or the location indicator, and then select an LADF from the set of candidate LADFs based on the other of the detected spatial features or the location indicator.
- the set of spatial identifiers submitted by the mobile device may serve as proof that the mobile device is in, or has access to, the identified area, and thus there is a significantly reduced risk of a privacy breach in supplying the LADF to the requesting mobile device.
- FIG. 1 illustrates a visual mapping system 100 in accordance with at least one embodiment of the present disclosure.
- the visual mapping system 100 comprises an ADF server 102 communicatively coupled to one or more mobile devices 104 .
- the ADF server 102 comprises a computing system that is remote to the mobile device 104 , and is coupled to the mobile device 104 via one or more wired or wireless networks, such as via a wireless local area network (WLAN), a cellular data network, the Internet, or a combination thereof.
- WLAN wireless local area network
- the ADF server 102 may be implemented as a computing system comprising a cluster of servers. An example implementation of the ADF server 102 is described in greater detail below with reference to FIG. 2 .
- the mobile device 104 can include any of a variety of portable electronic devices operated by one or more users 110 , such as head mounted display (HMD), a tablet computer, computing-enabled cellular phone (e.g., a “smartphone”), a notebook computer, a personal digital assistant (PDA), a gaming console system, a drone, and the like.
- the mobile device 104 includes a housing 112 having a surface 114 opposite another surface 116 , whereby the housing 112 typically is oriented with respect to the user 110 such that the user faces the surface 114 of the housing 112 .
- the mobile device 104 includes a display 118 disposed at the surface 116 for presenting visual information to the user 110 .
- the surface 116 is referred to herein as the “forward-facing” surface and the surface 114 is referred to herein as the “user-facing” surface as a reflection of this example orientation, although the orientation of these surfaces is not limited by these relational designations.
- the mobile device 104 further includes a plurality of sensors to obtain information regarding an area 122 in which the mobile device 104 is currently located.
- the mobile device 104 obtains visual information (imagery) for the area 122 via one or more imaging sensors, such as imaging sensors 124 , 126 , disposed at, for example, the forward-facing surface 116 .
- the imaging sensors 124 , 126 can be positioned and oriented on the forward-facing surface 116 such that their respective fields of view overlap starting at a specified distance from the mobile device 104 , thereby enabling, via multiview analysis, depth sensing of objects in the area 122 that are positioned in the region of the overlapping fields of view.
- a depth sensor 130 disposed on the surface 116 may be used to provide depth information for the objects in the area.
- the depth sensor 130 uses a modulated light projector to project modulated light patterns from the forward-facing surface 116 into the area 122 , and uses one or both of imaging sensors 124 , 126 to capture reflections of the modulated light patterns as they reflect back from objects in the area 122 .
- modulated light patterns can be either spatially-modulated light patterns or temporally-modulated light patterns.
- the captured reflections of a modulated light flash are referred to herein as “depth images” or “depth imagery.”
- the depth sensor 120 then may calculate the depths of the objects, that is, the distances of the objects from the mobile device 104 , based on the analysis of the depth imagery.
- the resulting depth data obtained from the depth sensor 130 may be used to calibrate or otherwise augment depth information obtained from multiview analysis (e.g., stereoscopic analysis) of the image data captured by the imaging sensors 124 , 126 .
- the depth data from the depth sensor 130 may be used in place of depth information obtained from multiview analysis.
- multiview analysis e.g., stereoscopic analysis
- the mobile device 104 captures imagery of the area 122 via one or both of the imaging sensors 124 , 126 , modifies or otherwise processes the captured imagery, and provides the processed captured imagery for display on the display device 108 .
- the processing of the captured imagery can include, for example, spatial or chromatic filtering, addition of an augmented reality (AR) overlay, conversion of real-life content of the imagery to corresponding virtual reality (VR) content, and the like.
- AR augmented reality
- VR virtual reality
- the mobile device 104 relies on an accurate determination of its current six degree of freedom (6DOF) orientation and position (herein collectedly referred to as “pose”) relative to a specified coordinate frame.
- 6DOF six degree of freedom
- the mobile device 104 also uses imagery captured by the imaging sensors 124 , 126 and non-image sensor data (e.g., inertial sensor data) to determine a relative position/orientation of the mobile device 104 , that is, a position/orientation relative to the area 122 , using one or more of a simultaneous location and mapping (SLAM) process, a visual odometry process, or other visual mapping process.
- SLAM simultaneous location and mapping
- the mobile device when a mobile device enters a new area (that is, an area that the particular mobile device has not previously entered), the mobile device either must complete an area learning process (e.g., a SLAM process) to learn the new area, or rely on non-visual cues (e.g., GPS coordinates) to provide some indication of the current pose of the mobile device relative to a coordinate frame.
- an area learning process e.g., a SLAM process
- non-visual cues e.g., GPS coordinates
- the visual mapping system 100 leverages crowdsourcing provided through the prior explorations by other mobile devices in the area to allow a mobile device new to the area to quickly localize to a coordinate frame without extensive visual mapping of the area.
- the mobile devices 104 connected to the ADF server 102 operate to collect and upload ADF 132 to the ADF server 102 as the mobile devices 104 move about the area 122 .
- the ADF 132 includes a set of spatial features detected by the mobile device 104 , the relative geometry of the spatial features, various statistical metadata regarding the spatial features that describe the spatial features in ways substantially independent of the mobile device's pose, the lighting conditions, or other temporary environmental conditions or device-specific conditions, as well as sensor data collected from an inertial management unit (IMU) or other non-image sensors at the time of capture of the imagery associated with the spatial features.
- IMU inertial management unit
- the ADF server 102 filters and merges the ADFs from multiple mobile devices 104 for the same area (or adjacent areas) based on the information contained in the ADF 132 , and from the resulting merged ADFs generates one or more LADFs 134 , each of which represents a sparse point cloud of spatial features for the area or a corresponding sub-area thereof.
- the mobile device 104 may query the ADF server 102 for an LADF that is associated with the area. Responsive to this query, the ADF server 102 may provide an LADF 134 to the requesting mobile device 104 .
- the mobile device 104 may capture imagery of the area 122 , detect certain spatial features contained therein, and compare the detected spatial features and their relative geometry with the spatial features and associated relative geometry represented by the LADF 134 , and localize its current pose (that is, either determine its current pose or correct a previously determined pose that has drifted) based on the comparison of spatial features, such as through the application of a loop closure algorithm.
- the mobile device 104 further may provide feedback to the ADF server 102 based on the mobile device's usage of the LADF 134 , such as feedback data indicating that a spatial feature of the LADF 134 was not observed by the mobile device 104 , or feedback data indicating that a spatial feature not in the LADF 134 was observed by the mobile device 104 .
- the crowd-sourced and cloud-based creation, refinement, and distribution of LADFs 134 permits mobile devices 104 to quickly and efficiently localize when entering a new area, and thus avoid the need to perform a time-consuming area learning process or the need to use the less precise and often unreliable measurements from a GPS sensor or inertial sensor. Moreover, as the spatial features of the LADF 134 may be referenced to a specific coordinate frame, multiple mobile devices 104 using the LADF 134 may localize their current poses to a common coordinate frame, thereby facilitating more efficient and accurate interaction between the mobile devices 104 for functionality that relies on device pose information, such as multiplayer games, shared AR or VR functionality, and the like.
- FIG. 2 illustrates an example implementation of the ADF server 102 of FIG. 1 in accordance with at least one embodiment of the present disclosure.
- the ADF server 102 comprises a computing system having a network interface 202 , an ADF datastore 204 , an LADF datastore 206 , a feature score datastore 208 , a georeference datastore 210 , a merge module 212 , a georeference module 214 , a spatial feature filter module 216 , a localization generation module 218 , and a query module 220 .
- the datastores 204 , 206 , 208 , 210 may be implemented together as a single datastore.
- the modules 212 , 214 , 216 , 218 , 220 may be implemented as hard-coded logic (e.g., an application specific integrated circuit or programmable logic), one or more processors 222 executing software instructions 224 stored in a memory 226 or other storage device, or a combination thereof.
- the ADF server 102 instead may be implemented as a computing system comprising a plurality of servers.
- the functionality of the modules 212 , 214 , 216 , and 218 may be implemented at one server, and the functionality of the query module 220 and LADF datastore 206 may be implemented at another server.
- the merger module 212 operates to receive, via the network interface 202 , ADFs 132 from one or more mobile devices 232 (one embodiment of the mobile device 104 of FIG. 1 ) that have entered an area for which an LADF has not yet been compiled.
- the merger module 212 merges the one or more ADFs 132 from the mobile devices 232 to generate merged ADF data for storage in the ADF datastore 204 .
- the georeference module 214 may utilize georeference information from the georeference datastore 210 (which may contain, for example, imagery and associated georeference location from the Street View tool provided by Google Inc.) to provide a geographic reference to the merged ADF.
- the localization generation module 218 generates one or more LADFs from the resulting merged ADF data and to store and index the one or more LADFs in the LADF datastore 206 for subsequent retrieval.
- the query module 220 receives an LADF request 236 from a mobile device 234 (one embodiment of the mobile device 104 ) via the network interface 202 , searches the LADF datastore 206 for the LADF 134 corresponding to the LADF request 236 , and provides the LADF 134 to the mobile device 234 .
- the mobile device 234 uses the LADF 134 for localization of the mobile device 234 . During this localization process, the mobile device 234 may provide LADF feedback 238 on the LADF 134 to the ADF server 102 via the network interface 202 .
- the ADF server 102 may use the LADF feedback 238 to adjust feature scores of spatial features represented therein in the feature score datastore 208 , and based on the feature scores refine the LADF 134 by adding or removing spatial features. These operations are described in greater detail below with reference to FIGS. 4-12 .
- mobile devices 232 and 234 represent embodiments of the mobile device 104 . Due to their respective operational requirements, a mobile device 232 performing a localization process using an LADF may not require the same capabilities as a mobile device 234 performing the ADF upload process. To illustrate, the mobile device 234 may utilize the depth sensor 120 or a stereo camera configuration to facilitate SLAM operations in association with the process of generating and uploading an ADF, whereas the mobile device 232 typically will not require a depth sensor 120 and only requires a monocular camera configuration to facilitate the localization process.
- FIG. 3 illustrates an example processing system 300 implemented by the mobile device 104 in accordance with at least one embodiment of the present disclosure.
- the processing system 300 includes the display 118 , the imaging sensors 124 , 126 , and the depth sensor 130 .
- the processing system 300 further includes a graphics processing unit (GPU 302 ), frame buffers 303 and 305 , an application processor 304 , a display controller 306 , a system memory 308 , a set 310 of non-image sensors, and a user interface 312 .
- GPU 302 graphics processing unit
- the user interface 312 includes one or more components manipulated by a user to provide user input to the mobile device 104 , such as a touchscreen 314 , a mouse, a keyboard, a microphone 316 , various buttons or switches, and various haptic actuators 318 .
- the set 310 of non-image sensors can include any of a variety of sensors used to provide non-image context or state of the mobile device 104 . Examples of such sensors include an inertial management unit (IMU) 320 comprising one or more of a gyroscope 321 , a magnetometer 322 , and an accelerometer 323 .
- IMU inertial management unit
- the non-image sensors further can include, for example, an ambient light sensor 326 as well as various wireless reception or transmission based sensors, such as a GPS sensor 328 , a wireless local area network (WLAN) interface 330 , a cellular interface 332 , a peer-to-peer (P2P) wireless interface 334 , and a near field communications (NFC) interface 336 .
- the non-image sensors also can include user input components of the user interface 312 , such as the touchscreen 314 or the microphone 316 .
- the mobile device 104 further has access to various datastores 338 storing information or metadata used in conjunction with its image processing, location mapping, and location-utilization processes.
- the datastores 338 can include a spatial feature datastore to store metadata for 2D or 3D spatial features identified from imagery captured by the imaging sensors of the mobile device 104 , a SLAM datastore that stores SLAM-based information, such as mapping information for sub-areas of the area 122 ( FIG. 1 ) already explored by the mobile device 104 , and an AR datastore that stores AR overlay information or VR information, such as CAD-based representations of the relative locations of objects of interest in the area 122 .
- the datastores 338 may be implemented at one or more storage components of the mobile device 104 , such as on a hard drive, solid state memory, or removable storage medium (not shown).
- the imaging sensors 124 , 126 capture imagery of an area and buffer the captured imagery in the frame buffers 303 , 305 .
- the GPU 302 processes the captured imagery for display (e.g., by rendering an AR overlay), and the display controller 306 controls the display 118 to display the processed imagery.
- the mobile device 104 operates to upload ADFs 134 for previously-unmapped locations, as well as to download LADFs for previously-mapped locations and use a downloaded LADF to facilitate localization of the mobile device 104 .
- one or more software programs may be stored in the system memory 308 or other non-transitory computer readable medium and executed by one or both of the application processor 304 and the GPU 302 to provide this ADF generation and LADF utilization functionality.
- the one or more software programs are depicted in FIG. 3 as an ADF generation program 342 and an LADF processing program 344 .
- These programs may be implemented as a thread or other process in an operating system (OS) executed by the processing system 300 , as threads, processes or subroutines of the same software application, or as separately-executed software applications.
- OS operating system
- some or all of the functionality of the programs 342 , 344 described herein may be implemented via an ASIC, programmable logic, or other hard-coded logic.
- the ADF generation program 342 can include, for example, a privacy filter module 346 , a spatial feature detection module 348 , and an ADF assembly module 350 .
- the privacy filter module 346 may comprise one or more image content filters, such as a text filter module 352 and a facial filter module, as well as a downsampler module 356 .
- the LADF processing program 344 can include, for example, a spatial feature detection module 358 (which may be the spatial feature detection module 348 ), a request module 360 , a localization module 362 , and a feedback module 364 .
- the operations of the processing system 300 including the operations of the ADF generation program 342 and the LADF processing program 344 , are described in detail below.
- the mobile device 104 may operate in an ADF generation mode whereby the mobile device 104 generates an ADF representing spatial features detected in the unmapped area and upload the ADF to the ADF server 102 .
- the mobile device 104 instead may operate in an LADF localization mode whereby the mobile device 104 obtains the LADF for the area from the ADF server 102 and uses the sparse point cloud represented by the LADF to perform a localization process so as to localize the mobile device 104 to the area.
- FIG. 4 illustrates an example method 400 for selecting between these operational modes in accordance with at least one embodiment.
- the method 400 is described in the example context of the processing system 300 of FIG. 3 .
- the method 400 initiates at block 402 , whereby the mobile device 104 determines that it has moved into an area that has not been previously mapped by the mobile device 104 .
- the mobile device 104 initiates a localization process or motion tracking process.
- the mobile device 104 queries the ADF server 102 to determine whether an LADF is available for the area.
- the ADF server 102 may implement a two-stage query process whereby the mobile device 104 provides both a set of spatial features from imagery captured by the mobile device in the area and one or more location indicators (e.g., GPS coordinates or base station identifiers of WLAN or cell tower base stations detected by the mobile device 104 ) and the ADF server 102 queries the LADF datastore 206 to identify the corresponding LADF.
- location indicators e.g., GPS coordinates or base station identifiers of WLAN or cell tower base stations detected by the mobile device 104
- an LADF is not available from the ADF server 102
- the area is considered to be an unmapped location and thus at block 406 the mobile device 104 and the ADF server 102 coordinate to perform an ADF/LADF generation process for the unmapped location. This process is described in greater detail below with reference to FIG. 5 .
- the area is considered to be a mapped location and thus at block 408 the mobile device 104 and the ADF server 102 coordinate to perform an LADF localization and update process, which is described in greater detail below with reference to FIG. 6 .
- FIG. 5 illustrates an example method 500 for implementing the ADF/LADF generation process in accordance with at least one embodiment.
- the ADF/LADF generation process is performed responsive to the determination that an LADF is not available for an area newly encountered by the mobile device 104 .
- the method 500 initiates at block 502 with the initiation of an area learning process using the sensors of the mobile device 104 .
- the mobile device 104 captures imagery 372 ( FIG. 3 ) via imaging sensors 124 , 126 and captures corresponding depth information 373 via the depth sensor 130 as the mobile device 104 moves through the area.
- the mobile device 104 may employ, for example, an interactive game to induce the user of the mobile device 104 to explore the area as the imagery 372 and depth information 373 is captured by the mobile device 104 .
- the ADF assembly module 350 captures non-image sensor data 374 ( FIG. 3 ) from one or more of the non-image sensors of the set 310 .
- the ADF assembly module 350 may capture sensor data from the accelerometer 323 during the capture of the imagery 372 , and thus represent the orientation of the mobile device 104 with respect to gravity at the time of the imagery capture.
- sensor data captured from the gyroscope 321 may be used to determine the direction of travel of the mobile device 104 with respect to the visual features represented in the captured imagery.
- the non-image sensor data 374 may include sensor data that may operate as location indicators of the mobile device 104 .
- These location indicators may be georeferenced location indicators, such as latitude/longitude coordinates represented in the sensor data provided by the GPS sensor 328 .
- these location indicators may be inferred location indicators.
- BSID base station identifier
- MAC media access control
- the captured imagery 372 and depth information 373 is used to determine a point cloud of spatial features which ultimately is uploaded to the ADF server 102 . While this point cloud is not image data itself, depending on the density of the point cloud and other conditions, it is possible that an unmodified point cloud could be used to reconstruct certain visual content originally present in the captured imagery 372 . For example, if the mobile device 104 were placed particularly close to a document, it is possible that the point cloud determined from the imagery captured of the document could be used to reproduce the text of the document. Accordingly, to prevent disclosure of unintended visual content, the privacy filter module 346 may implement at least two privacy controls.
- the first privacy control is implemented at block 504 , wherein the privacy filter module 346 performs one or more content filter processes on the captured imagery 372 to remove image content from regions that may have privacy implications.
- the text filter module 352 may perform a text filter process whereby each image captured at block 502 is scanned using one or more well-known text recognition algorithms to determine whether there are any regions in the image that potentially represent text content.
- the text filter module 352 may obfuscate or delete this region by, for example, performing a blending operation with pixels in the region or in adjacent regions, by replacing the pixel values in the region with the same default pixel region or otherwise delete the pixel values in the region, and the like.
- the facial filter module 354 may implement a facial filter process whereby each captured image is scanned using one or more well-known facial recognition algorithms to determine whether there are any regions in the image that potentially represent a human face, and filter the image to remove the image content from each region so identified. In this manner, the imagery is pre-filtered to remove potentially sensitive visual content prior to spatial feature detection, and thus the resulting point cloud of spatial features cannot be used to reconstruct the potentially sensitive visual content.
- the spatial feature detection module 348 analyzes the filtered imagery to detect spatial features contained therein.
- Any of a variety of spatial feature extraction algorithms may be used, such as, for example, a Scale-Invariant Feature Transform (SIFT) algorithm, a Speeded-Up Robust Features (SURF) algorithm, a Gray Level Patch algorithm, a Gradient Location and Orientation Histogram (GLOH) algorithm, a Zernike Moment algorithm, a Binary Robust Independent Elementary Features (BREIF) algorithm, Oriented BRISK (ORB) algorithm, Binary Robust Invariant Scalable Keypoints (BRISK) algorithm, Difference of Gaussians (DOG) algorithm, Fast Retina Keypoint (FREAK) algorithm, and the like.
- SIFT Scale-Invariant Feature Transform
- SURF Speeded-Up Robust Features
- GLOH Gradient Location and Orientation Histogram
- BREIF Binary Robust Independent Elementary Features
- ORB Binary Robust In
- the spatial feature detection module 348 provides these detected spatial features as spatial feature data 376 .
- the FREAK algorithm provides for the comparison of pairs of pixels within an image patch, with the output of each comparison being a “0” or a “1” based on which pixel is lighter or darker of the pair.
- 512 such comparisons are computed over the image patch, and the result is a spatial feature descriptor that is a binary string of length 512 for a corresponding spatial feature representing the image patch, as well as an (x,y,z) vector identifying the position of the spatial feature in the 3D reference frame.
- the spatial feature detection module 348 determines statistical metadata 378 for each detected point.
- the statistical metadata 378 describes the corresponding spatial feature in a manner that is substantially independent of the particular viewing angle of the mobile device 104 or of the ambient lighting when the corresponding imagery was captured.
- the statistical metadata 378 may comprise values representing the mean and standard deviation of the brightness of pixels representing the spatial feature, brightness gradients (or other visual characteristic gradients) in one or more directions, and the like.
- the privacy filter module 346 scrubbed the imagery of detected text and facial content, and thus the original point cloud of spatial features represented by the spatial feature data 376 is substantially devoid of textual and facial content, the original point cloud may still have sufficient spatial feature density to permit some level of reconstruction of visual appearance of the area from the original point cloud.
- the downsampler module 356 of the privacy filter module 346 downsamples the original point cloud so as to generate a filtered point cloud 380 ( FIG. 3 ) of spatial features that contains only a selected subset of the spatial features of the original point cloud.
- the downsampling process may be controlled by one or more downsampling criteria.
- the downsampling process may include the random selection of spatial features for exclusion from the filtered point cloud, the removal of every Xth spatial feature (X being an integer greater than 2), or the selection of no more than a maximum number of spatial features for inclusion in the filtered point cloud.
- the downsampling process may be controlled by a maximum spatial feature density criterion that specifies a maximum number of spatial features per cubic unit (that is, unit volume).
- the maximum spatial feature density criterion may specify that the filtered point cloud 380 contain at most one spatial feature per cubic foot, and thus downsample the original point cloud so that no more than one spatial feature per cubic foot is represented in the resulting filtered point cloud.
- the ADF assembly module 350 uses the filtered point cloud 380 , statistical metadata 378 , and the non-image sensor data 374 to generate an ADF 132 .
- the ADF 132 comprises a file or other data structure that represents the filtered point cloud 380 as a list or other set of multidimensional coordinates, along with a field for each multidimensional coordinate to store the statistical metadata 378 for the represented spatial feature.
- each multidimensional coordinate may comprise an (x,y,z) floating point vector that represents a 3D position of a corresponding spatial feature in the (X,Y,Z) coordinate frame of the mobile device 104 .
- the data structure further may include one or more fields to store the non-image sensor data 374 , as well as a field to store a unique identifier (UID) assigned to the ADF 132 by the ADF server 102 , as described below.
- UID unique identifier
- the ADF assembly module 350 provides the ADF 132 to the appropriate network interface (e.g., the cellular interface 332 or the WLAN interface 330 ) for transmission to the ADF server 102 .
- the ADF assembly module 350 signals a request to upload an ADF to the ADF server 102 , and the ADF server 102 responds with a UID assigned to the ADF, which the ADF assembly module 350 inserts into the appropriate field in the ADF 132 before it is uploaded.
- the process of blocks 502 - 512 has been described as a sequential process whereby the ADF 132 is completed before it is uploaded, in some embodiments, the ADF 132 is generated and uploaded in an iterative process whereby the ADF 132 is generated as a sequence of ADF blocks, each ADF block containing a subset of the point cloud generated from a portion of the captured imagery, and each ADF block being marked with the UID assigned to the ADF and uploaded to the ADF server 102 as it is generated.
- the ADF server 102 thus may store these ADF blocks individually, or may combine the ADF blocks denoted by the same UID into a single ADF 132 .
- the ADF 132 uploaded by the mobile device 104 represents certain visual features present in the area in which the mobile device 104 is located.
- the information contained in the ADF 132 that is provided to the ADF server 102 is substantially devoid of any content that may have privacy implications.
- the resulting ADF 132 contains a sparse point cloud that may describe various edges, corners, and other visual features of the area so to a degree sufficient to allow another mobile device to subsequently localize based on these described visual features
- the sparse point cloud contains insufficient information to support replication of visual appearances of the area in a way meaningful to human perception.
- the ADF server 102 should not come into possession of any information from the mobile device 104 that has a measurable potential to reveal potentially sensitive information regarding a mapped area.
- the role of the ADF server 102 in the ADF/LADF generation process initiates at block 514 with the receipt of the ADF 132 by the merge module 212 via the network interface 202 from the mobile device 104 .
- the merge module 212 Upon receipt of the ADF 132 , the merge module 212 temporarily indexes and stores the ADF 132 in the ADF datastore 204 .
- the ADF 132 may be indexed for temporary storage based on the UID assigned to the ADF 132 , based on the spatial features represented in the point cloud represented by the ADF 132 , based on the location indicator(s) included with the ADF 132 , and the like.
- each ADF 132 is stored and indexed in the ADF datastore 204 using the two-layer query approach described below with reference to FIGS. 10-12 .
- multiple mobile devices may have uploaded a corresponding ADF for an area or for adjacent areas.
- the ADF server 102 thus operates at block 516 to merge these co-located ADFs before processing the resulting merged ADFs into one or more LADFs.
- the merge process of block 516 may be initiated in response to any of a variety of triggers. For example, the merge process may be triggered by the lapse of a specified amount of time, by the receipt of a specified number of ADFs from mobile devices, by the request for an LADF from a mobile device, and the like.
- the merge module 212 signals the query module 220 to query the ADF datastore 204 to identify whether there are any “nearby” ADFs—that is, ADFs that cover the same area or an adjacent area. In some embodiments, nearby ADFs may be identified based on comparisons of the location indicators associated with ADFs in the ADF datastore 240 .
- the upload of an ADF 132 from the mobile device 104 triggered the merge process and the uploaded ADF 132 includes one or more WLAN MAC addresses as location indicators
- those ADFs in the ADF datastore 240 identified by the query module 220 as having the same WLAN MAC address as supplied with the uploaded ADF, or with WLAN MAC addresses of WLAN base stations known to be adjacent to the area covered by a WLAN base station identified by the uploaded ADF are identified as nearby ADFs.
- the uploaded ADF may be provided with GPS coordinates as a location indicator, and the query module 220 may identify ADFs in the ADF datastore 240 as being nearby based on their corresponding GPS coordinates.
- nearby ADFs may be identified based on a comparison of the spatial features represented in the uploaded ADF with the spatial features represented in ADFs stored in the ADF datastore 240 . Those ADFs having a sufficiently overlapping set of spatial features thus may be identified as representing the same area or a nearby area, and thus identified as nearby ADFs. Still further, as described below with reference to FIGS.
- the ADF server 102 may implement a two-layer query for one or both of the ADF datastore 204 and the LADF datastore 206 such that the each stored ADF/LADF is indexed for storage based on both its spatial feature set and one or more location indicators, and nearby ADFs are identified by performing a two-layer indexing process using both the spatial feature set of the uploaded ADF as well as one or more location indicators of the uploaded ADF.
- the set of one or more nearby, or co-located, ADFs identified by the query module 220 are referred to herein as an “ADF cluster.”
- the merge module 212 operates to perform one or more deduplication processes to remove duplicate spatial features represented in the ADFs of the ADF cluster. Further, in the event that the ADF cluster represents an excessively large area, or contains an excessively large number of spatial features, the merge module 212 may split the ADF cluster into one or more smaller ADF clusters, each of which may be processed as described herein.
- the merge module 212 employs one or more well-known loop closure algorithms to determine the relative alignment between the ADFs of the ADF cluster.
- the merge module 212 analyzes the ADF cluster to selectively remove spatial features which are not reliably observed in most or all of the ADFs of the ADF cluster, as identified using one or more stability criteria. This serves both the purpose of eliminating spatial features which are likely not representative of permanent visual features of the area (and thus unreliable sources for localization), as well as reducing the total number of spatial features in the combined point cloud represented by the ADF cluster.
- the merge module 212 may employ a scoring system based on a stability criterion, such as by giving spatial features scores based on the frequency that they are observed within the ADFs of the ADF cluster. Further, as newer ADFs are more likely to represent the current state of the area, the merge module 212 may give inclusion preference to spatial features in newer ADFs.
- the non-image sensor data 374 supplied with an ADF may permit the ADF to be georeferenced.
- the non-image sensor data 374 may include GPS coordinates and an indicator of the georeferenced pose of the mobile device 104 at the time of the detection of the spatial features in the ADF.
- the relative alignment of the ADFs of the ADF cluster determined at block 522 , if one ADF in the ADF cluster is georeferenced, then at block 526 the other ADFs in the ADF cluster may be georeferenced based on application of a coordinate frame translation using the relative alignment and geolocation information of the georeferenced ADF.
- georeferenced visual reference data is available, such as via the Street View tool provided by Google Inc.
- the ADFs of the ADF cluster may be georeferenced using this georeferenced visual reference data.
- the localization generation module 218 uses the merged ADFs to generate one or more LADFs for the areas represented by the merged ADFs.
- the merged ADFs may be stored and indexed as a single LADF.
- the localization generation module 218 may spatially partition the merged ADFs to generate multiple LADFs, each LADF covering a different sub-area.
- the localization generation module 218 may attempt to identify logical partition lines, such as by identifying multiple rooms within the area based on the detection of walls or other room dividers within the point cloud represented by the merged ADFs, and create a separate LADF for each identified room, which has the additional benefit from a privacy perspective of limiting the scope of the LADF to a single room.
- the localization generation module 218 For each LADF generated, at block 530 the localization generation module 218 provides the LADF to the LADF datastore 206 for indexing and storage.
- the LADF datastore 206 employs a two-layer index for each LADF, whereby each LADF is indexed both by one or more location indicia and by the spatial features represented by the LADF. Accordingly, when storing an LADF in the LADF datastore 206 , the LADF datastore 206 stores the LADF in a datastore entry indexed by one of its location indicator(s) or its spatial feature set (and relative geometries therein), and the other of the location indicator(s) or the spatial feature set is used to select between multiple LADFs similarly indexed.
- the ADF server 102 has generated one or more LADFs for a previously unmapped area using one or more ADFs uploaded from one or more mobile devices 104 that have had the opportunity to explore the area.
- the ADF server 102 is ready to supply a LADF to any other mobile device that encounters this area for the first time, as described by FIG. 6 below.
- FIG. 6 illustrates an example method 600 for performing the LADF localization and update process represented by block 408 of FIG. 4 in accordance with at least one embodiment.
- the method 600 initiates at block 602 when the mobile device 104 enters an area that the mobile device 104 has not previously encountered and mapped.
- the mobile device initiates a spatial feature detection process for the area.
- the mobile device 104 triggers the imaging sensors 124 , 126 to begin the capture of imagery 382 ( FIG. 3 ) of the area and triggers the depth sensor 130 to begin the capture of depth information for the area, and from the imagery 382 and depth information the spatial feature detection module 358 detects an initial set of spatial features representative of the area.
- the request module 360 determines one or more location indicators for the location of the mobile device 104 at the time of spatial feature detection in the area.
- these location indicators may be specific geographic location indicators, such as GPS coordinates obtained from the GPS sensor 328 , inferential location indicators, such as WLAN MAC addresses, WLAN BSIDs, or cell tower BSIDs, or a combination thereof.
- the request module 360 uses the initial spatial feature set and the one or more location indicators to generate an LADF request 236 and transmit the LADF request 236 to initiate an inquiry into the availability of an LADF for the area.
- the query module 220 queries the LADF datastore 206 to identify a suitable LADF for the area for use by the mobile device 104 .
- the query module 220 and the LADF datastore 206 employ a two-layer indexing scheme to identify a suitable LADF based on both the initial spatial feature set and the location indicators, as described in detail below with reference to FIGS. 10-12 .
- the query module 220 transmits the selected LADF (as LADF 134 ) to the requesting mobile device 104 .
- the request module 360 In response to receiving the LADF 134 in response to the LADF request 236 , the request module 360 provides the LADF 134 to both the localization module 362 and the feedback module 364 .
- the localization module 362 employs one or more well-known loop closure algorithms to localize the mobile device 104 to the coordinate frame represented in the LADF 134 based on comparisons of spatial features from the area detected by the spatial feature detection module 358 to the sparse point cloud of spatial features represented in the LADF 134 , the result of which is a determine pose 384 ( FIG. 3 ) of the mobile device 104 in the identified coordinate frame.
- the determined pose 384 likewise may be georeferenced through the appropriate translation.
- the mobile device 104 localized and the pose 384 determined, at block 614 one or more components of the mobile device 104 may provide various functionality that relies on accurate pose information, such as the implementation of AR or VR content, multiple-player games, navigation tools, and the like.
- the generation of the LADF 134 relies on the detection and selection of spatial features observed in the area by one or more mobile devices 104 .
- an LADF 134 may become less useful, or “stale.”
- the mobile devices 104 may provide feedback on the LADF, which may be used by the ADF server 102 to refine, or “refresh” the LADF for subsequent use by other mobile devices.
- the feedback module 364 may compare spatial features identified by the spatial feature detection module 358 in the area with the spatial features of the sparse point cloud represented by the LADF 134 and generate LADF feedback 238 representing one or more of: spatial features of the LADF 134 that were also observed by the spatial feature detection module 358 ; spatial features of the LADF 134 that were not observed by the spatial feature detection module 358 ; and spatial features observed by the spatial feature detection module 358 that were not present in the LADF 134 .
- the LADF feedback 238 is uploaded to the ADF server 102 .
- the spatial feature filter module 216 receives the LADF feedback 238 , updates the feature scores of spatial features in the feature score datastore 208 accordingly, and then may update the LADF to include new spatial features or to remove previously-included spatial features based on the updated feature scores.
- FIGS. 7-9 together illustrate an example of the process of refining an LADF 134 based on LADF feedback 238 in accordance with at least one embodiment.
- an initial feature score which may be the same for all spatial features in the LADF 134 , or which may be based on one or more properties of the spatial feature.
- a spatial feature may be assigned an initial feature score based on the number of times it appeared in the ADFs of the ADF cluster from which the LADF 134 was generated. For the following description, it is assumed that a higher feature score reflects a more reliable spatial feature, and conversely a lower feature score indicates a less reliable spatial feature.
- the LADF feedback 238 supplied by a mobile device 104 can include one or more entries, with each entry either confirming the observation of a spatial feature present in the LADF 134 by the mobile device 104 , denying the observation of a spatial feature present in the LADF 134 by the mobile device, or suggesting a new spatial feature observed by the mobile device 104 and not present in the LADF 134 .
- the feature scores of spatial features thus may be adjusted based on the entries and the feedback type they represent.
- the method 700 of FIG. 7 represents the processing implemented by the ADF server 102 for each entry of the LADF feedback 238 .
- the spatial feature filter module 216 accesses a selected entry of the LADF feedback 238 to determine the type of feedback represented by the entry.
- the feedback entry confirms that the mobile device 104 observed a corresponding spatial feature of the LADF 134
- the spatial feature filter module 216 extracts one or more parameters pertaining to the identification of the spatial feature as represented in the feedback entry, such as a time stamp indicating a time of observation of the spatial feature by the mobile device 104 , and records the extracted parameters in the feature score datastore 208 .
- the spatial feature filter module 216 increases the feature score for the corresponding spatial feature to reflect its recent observation.
- the spatial feature filter module 216 extracts one or more parameters pertaining to the identification of the spatial feature as represented in the feedback entry, such as a time stamp indicating a time when the mobile device 104 was capturing imagery of the region in which the spatial feature should have been observed but was not, and records the extracted parameters in the feature score datastore 208 . Further, at block 710 , the spatial feature filter module 216 decreases the feature score for the corresponding spatial feature to reflect its missed observation.
- the spatial feature filter module 216 extracts one or more parameters pertaining to the identification of the previously-unobserved spatial feature as represented in the feedback entry, such as a time stamp indicating a time when the mobile device 104 first or last observed the spatial feature, a frequency of observation of the spatial feature (e.g., the percentage of times the spatial feature was observed when the mobile device 104 was oriented in the direction of the region containing the spatial feature), and the like, and records the extracted parameters in the feature score datastore 208 .
- a time stamp indicating a time when the mobile device 104 first or last observed the spatial feature
- a frequency of observation of the spatial feature e.g., the percentage of times the spatial feature was observed when the mobile device 104 was oriented in the direction of the region containing the spatial feature
- the spatial feature filter module 216 either creates a feature score for the corresponding spatial feature in the feature score datastore 208 and assigns an initial value to the feature score if the spatial feature is not already represented in the feature score datastore 208 . Otherwise, if a feature score is already present for the newly-observed spatial feature (that is, the spatial feature was also observed by another mobile device 104 previously), the spatial feature filter module 216 increases the feature score for the spatial feature. Method 700 then returns to block 702 to repeat the process for the next entry in the LADF feedback 238 .
- FIG. 8 illustrates an example method 800 for evaluating a candidate spatial feature for inclusion in an LADF 134 in accordance with at least one embodiment.
- mobile devices 104 may provide LADF feedback 238 that identifies newly observed spatial features in an area that may be candidates for inclusion in the LADF 134 for the area, and the spatial feature filter module 216 may create a feature score the first time a spatial feature is detected, and increase the feature score each time the same spatial feature is observed by another mobile device 104 .
- the feature score for each of these spatial features serves as an indicator of the viability of the candidacy of the spatial feature for inclusion in the LADF 134 (that is, how “reliable” the spatial feature is for purposes of localization).
- the spatial feature filter module 216 selects one of the candidate spatial features under consideration for inclusion in the LADF 134 from the feature score datastore 208 and at block 804 the spatial feature filter module 216 compares the feature score of the selected candidate spatial feature with a specified threshold, designated “THRESH_H”.
- This threshold may be a fixed threshold, or may be based on one or more current conditions.
- the threshold THRESH_H may be set to the median current feature score for the spatial features currently included in the LADF 134 .
- the spatial feature filter module 216 ceases any further consideration of the candidate spatial feature (in the current round of evaluation), and the method 800 returns to block 802 for the selection of the next candidate spatial feature. Otherwise, if the feature score exceeds the threshold THRESH_H, at block 806 the spatial feature filter module 216 signals the localization generation module 218 to incorporate the selected candidate spatial feature into the LADF 134 . In some embodiments, the incorporation of a new spatial feature into the LADF 134 may require the elimination of another spatial feature from the LADF 134 .
- the spatial feature filter module 216 may select, for example, the spatial feature having the lowest feature score of all of the spatial features presently included in the LADF 134 . After incorporating the candidate spatial feature into the LADF 134 , the method 800 returns to block 802 for the selection and evaluation of the next candidate spatial feature.
- FIG. 9 illustrates an example method 900 for evaluating a spatial feature for removal from an LADF 134 in accordance with at least one embodiment.
- mobile devices 104 may provide LADF feedback 238 that confirms whether spatial features of the LADF 134 were observed by the mobile device 104 , and the spatial feature filter module 216 may adjust the feature scores of the spatial features accordingly.
- the feature score for each of these spatial features serves as an indicator of the current reliability of the spatial feature for localization purposes.
- the spatial feature filter module 216 selects a spatial feature currently included in the LADF 134 and at block 904 the spatial feature filter module 216 compares the feature score of the selected spatial feature with a specified threshold, designated “THRESH_L”.
- This threshold may be a fixed threshold, or may be based on one or more current conditions.
- the threshold THRESH_L may be set to the median current feature score for the candidate spatial features not presently included in the LADF 134 .
- the spatial feature filter module 216 ceases any further consideration of the selected spatial feature (in the current round of evaluation), and the method 900 returns to block 902 for the selection of the next spatial feature in the LADF 134 . Otherwise, if the feature score falls below the threshold THRESH_L, at block 906 the spatial feature filter module 216 signals the localization generation module 218 to remove the selected spatial feature from the LADF 134 . In some embodiments, the removal of a spatial feature from the LADF 134 may require the selection of another spatial feature to replace the removed spatial feature and thus serve as a trigger condition to initiate the candidate spatial feature evaluation process of method 800 of FIG. 8 . After removing the selected spatial feature from the LADF 134 , the method 900 returns to block 902 for the selection and evaluation of the next spatial feature in the LADF 134 .
- the LADFs maintained by the ADF server 102 contain representations of visual features and geometric information of an area of the world. This information is potentially sensitive, and thus the ADF server 102 takes care to prevent unauthorized or unintended access to the LADF content stored in the LADF datastore 206 and the ADF content stored in the ADF datastore 204 (which may comprise the same datastore in some implementations). To this end, the ADF server 102 employs a privacy safeguard in the form of a two-layer indexing scheme for the LADF content of the LADF datastore 206 .
- FIGS. 10-12 illustrate an example configuration of the query module 220 and the LADF datastore 206 and operations thereof in accordance with this two-layer indexing scheme.
- the ADF datastore 204 may be similarly configured in the manner described below.
- FIG. 10 illustrates an example two-layer query interface 1000 implemented by the query module 220 and the LADF datastore 206 .
- each LADF e.g., LADF 134
- each LADF stored by the LADF datastore 206 is stored in a corresponding LADF entry 1002 of a LADF database 1004 implemented in the LADF datastore 206 .
- Each LADF entry 1002 includes a plurality of fields, including a UID field 1006 to store a UID associated with the LADF stored therein, a spatial feature field 1008 to store the set of spatial features presently represented by the LADF, and a location field 1010 to store the location indicator or other location data associated with the LADF.
- the two-layer query interface 1000 may more fully secure the LADF data of the LADF datastore 206 by requiring that the requesting mobile device 104 or other requestor prove that they are at (or have been at) the area associated with a requested LADF.
- Some location indicators such as GPS coordinates, may be easily spoofed or otherwise forged.
- other types of location indicators such as WLAN MAC addresses or cell tower BSIDs may cover regions far larger than the area of interest, and thus may lack sufficient granularity. As such, location indicators alone may not be sufficient proof that a requesting mobile device is in fact in the specified area.
- the query interface 1000 may instead require proof that the mobile device 104 is in the specified area by requiring that the mobile device 104 submit a set of spatial features observed by the mobile device 104 in the specified area.
- the query interface 1000 then may compare this set of spatial features with the spatial features of the LADF entries to identify a matching LADF.
- many areas have similar structural configurations (e.g., similar rooms within an office building), and thus there is a risk that multiple LADFs may adequately match the submitted set of spatial features, and thus the incorrect LADF may be supplied to the requesting mobile device, which is doubly problematic as it both represents a potential privacy breach as well as provides the mobile device 104 with the incorrect reference for localization.
- the query interface 1000 utilizes both a set of spatial features and one or more location indicators submitted by a mobile device to identify the correct LADF from the LADF database 1004 . It should be appreciated that under this approach, the mobile device or other requestor proves that the requestor is in the identified area by submitting spatial features observed in the identified area, and thus the release of the LADF for the identified area has a low risk of unintended disclosure of potentially sensitive information as the requestor simply may look around the indicated area to obtain visual information many orders of magnitude more detailed than the visual information represented by the supplied LADF.
- the query module 220 includes a spatial feature query interface 1012 and a location selection module 1014 .
- the spatial feature query interface 1012 performs the initial query of candidate LADFs based on a search of the spatial feature fields 1008 of the LADF entries 1002 of the LADF database 1004 using a spatial feature set 1016 in a LADF request 236 submitted by a mobile device 104 .
- This search takes into account the relative geometry of the spatial features as they are projected into the image represented by LADF request 236 to check for consistency against those in the LADF database 1004 .
- the location selection module 1014 selects from the identified candidate LADFs based on comparisons of the one or more location indicator 1018 submitted with the LADF request 236 with the location information for each LADF in the location fields 1010 of the candidate LADFs.
- the LADF datastore 206 is configured to index the LADF entries 1002 by the spatial feature fields 1008 and further is configured to avoid indexing of the LADF entries 1002 by the location fields 1010 .
- the LADF entries 1002 of the LADF database 1004 are searchable via the spatial feature sets of the LADFs but cannot be initially searched by location. In this manner, submission of a location indicator alone will not result in the identification or production of any LADFs 134 from the LADF database 1004 .
- FIG. 11 illustrates an example method 1100 of operation of the two-layer query interface 1000 of FIG. 10 in accordance with at least one embodiment of the present disclosure.
- the method 1100 initiates at block 1102 with the submission of an LADF request 236 for an indicated area from a mobile device or other requestor.
- the ADF server 102 in order to accept a LADF request 236 for processing, the ADF server 102 requires that the LADF request 236 include at least the spatial feature set 1016 observed in the indicated area and one or more location indicators 1018 obtained or determined by the mobile device in the indicated area.
- the spatial feature query interface 1012 searches the LADF entries 1002 of the LADF database 1004 to find LADF entries 1002 that have spatial feature sets in the spatial feature fields 1008 that sufficiently overlap with the spatial feature set 1016 of the LADF request 236 , and which have relative geometries that are consistent with the geometries of the projected spatial features of the spatial feature set 1016 .
- the spatial feature query interface 1012 may determine a count of matching spatial features between the spatial feature set 1016 and the spatial feature field 1008 of the LADF entry 1002 .
- the spatial feature query interface 1012 then may select N candidate LADFs (e.g., candidate LADFs 1021 , 1022 , 1023 of FIG.
- every LADF having a count greater than a specified threshold may be selected as a candidate LADF.
- the spatial feature query interface 1012 may select the N LADFs with the highest count values as the N candidate LADFs.
- the spatial feature query interface 1012 verifies that at least one candidate LADF has been identified from the LADF database 1004 . If not, at block 1108 the query module 220 signals to the requesting mobile device that an LADF is unavailable for the indicated area. Otherwise, the one or more identified candidate LADFs are supplied to the location selection module 1014 (e.g., by identifying the UIDs of the candidate LADFs), and at block 1110 the location selection module 1014 compares the one or more location indicators 1018 of the LADF request 236 with the locations indicated by the location fields 1010 of the candidate LADFs to score a match between each candidate LADF and the one or more location indicators 1018 .
- the location selection module 1014 verifies whether there is a sufficient match between the one or more location indicators 1018 and the location information of one of the candidate LADFs. If not, at block 1114 the query module 220 signals to the requesting mobile device that an LADF is unavailable for the indicated area. Otherwise, at block 1116 the location selection module 1014 selects the candidate LADF with the best location match score as the LADF co-located as the identified area and provides this selected LADF as the LADF 134 for the area to the mobile device in response to the LADF request 236 .
- performing the LADF query using spatial features and their geometry as detected by the mobile device ensures that the LADF ultimately selected through the two-stage query process will allow the mobile device to successfully localize using the matching LADF. This is because the first stage of the LADF query process performs the same or similar “localization” process to identify candidate LADFs as the localization process performed at the mobile to find the pose of the mobile device relative to the LADF using the observed spatial features and their image geometry in the LADF.
- FIG. 12 illustrates an alternative configuration of the two-layer query interface 1000 in accordance with at least one embodiment.
- the LADF datastore 206 implements an LADF database 1204 comprising a plurality of LADF entries 1202 , each LADF entry 1202 having the UID field 1006 , the spatial feature field 1008 , and the location field 1010 .
- the LADF database 1204 instead indexes the LADF entries 1202 based on the location field 1010 .
- the query module 220 comprises a location query interface 1212 to the LADF database 1204 and a spatial feature selection module 1214 .
- the two-layer query for an LADF is implemented as a first layer search of LADF entries 1202 by the location query interface 1212 for LADFs that have location information that sufficiently matches the one or more location indicators 1018 of the LADF request 236 to identify a set of one or more candidate LADFs.
- the spatial feature selection module 1214 compares the spatial feature set 1016 of the LADF request 236 to select the candidate LADF that best matches the spatial feature set 1016 as the LADF 134 to be supplied to the requesting mobile device in response to the LADF request 236 .
- relational terms such as first and second, and the like, may be used solely to distinguish one entity or action from another entity or action without necessarily requiring or implying any actual such relationship or order between such entities or actions.
- the terms “comprises,” “comprising,” or any other variation thereof, are intended to cover a non-exclusive inclusion, such that a process, method, article, or apparatus that comprises a list of elements does not include only those elements but may include other elements not expressly listed or inherent to such process, method, article, or apparatus.
- An element preceded by “comprises . . . a” does not, without more constraints, preclude the existence of additional identical elements in the process, method, article, or apparatus that comprises the element.
- program is defined as a sequence of instructions designed for execution on a computer system.
- a “program”, or “computer program”, may include a subroutine, a function, a procedure, an object method, an object implementation, an executable application, an applet, a servlet, a source code, an object code, a shared library/dynamic load library and/or other sequence of instructions designed for execution on a computer system.
Abstract
Description
- The present application is related to the following co-pending patent applications, the entireties of which are incorporated by reference herein:
- U.S. patent application Ser. No. ______ (Attorney Docket No.: 1500-T013US), entitled “CROWD-SOURCED CREATION AND UPDATING OF AREA DESCRIPTION FILE FOR MOBILE DEVICE LOCALIZATION” and filed on even date herewith; and
- U.S. patent application Ser. No. ______ (Attorney Docket No.: 1500-T014US), entitled “PRIVACY FILTERING OF AREA DESCRIPTION FILE PRIOR TO UPLOAD” and filed on even date herewith.
- The present disclosure relates generally to visual mapping systems and more particularly to the localization of mobile devices using visual information.
- Visual mapping systems rely on spatial features (also referred to as “visual features”) detected in imagery captured by a mobile device, as well as inertial information, to determine the current position and orientation of the mobile device in a three-dimensional (3D) space. Typically, the position and orientation are determined in the context of a defined coordinate frame so as to facilitate various functionality that requires synchronization to a known, fixed reference frame, such as virtual reality (VR) functionality, augmented reality (AR) functionality, or gaming or other device-enabled interactions between multiple mobile devices. Simultaneous localization and mapping (SLAM) techniques enable a mobile device to map a previously unmapped area while concurrently learning its position and orientation within the area. Thus, when the mobile device returns to the same area, it may readily determine its current position and orientation within that area through detection of previously-observed spatial features in a process known as “localization.” However, when the mobile device is entering an area for the first time, the mobile device lacks these previously-detected localization cues. In conventional visual mapping systems the mobile device must “learn” the area through implementation of the visual mapping process—a process which takes considerable time and resources. To avoid the delay involved in performing the visual mapping process for a previously-unmapped area, conventional visual mapping systems instead may revert to detection of orientation or position of the mobile device based on non-visual orientation input, such as global positioning system (GPS) information or location mapping via inertial sensor feedback. However, these non-visual mapping solutions can be unreliable (e.g., poor GPS reception indoors or in areas surrounded by tall obstructions), imprecise, and prone to error due to sensor and measurement drift.
- The present disclosure may be better understood by, and its numerous features and advantages made apparent to, those skilled in the art by referencing the accompanying drawings. The use of the same reference symbols in different drawings indicates similar or identical items.
-
FIG. 1 is a diagram illustrating a cloud-based visual mapping system for crowd-sourced creation and updating of area description files provided to mobile devices for localization in accordance with at least one embodiment of the present disclosure. -
FIG. 2 is a block diagram illustrating an area description file server of the visual mapping system ofFIG. 1 in accordance with at least one embodiment of the present disclosure. -
FIG. 3 is a block diagram illustrating a mobile device of the visual mapping system ofFIG. 1 in accordance with at least one embodiment of the present disclosure. -
FIG. 4 is a flow diagram illustrating a method for selecting one of a previously-mapped localization process or a previously-unmapped localization process in accordance with at least one embodiment of the present disclosure. -
FIG. 5 is a flow diagram illustrating a method for crowd-sourced generation of a localization area description file in accordance with at least one embodiment of the present disclosure. -
FIG. 6 is a flow diagram illustrating a method for localization of a mobile device using a localization area description file obtained from a remote area description file server in accordance with at least one embodiment of the present disclosure. -
FIG. 7 is a flow diagram illustrating a method for crowd-sourced updating of a localization area description file in accordance with at least one embodiment of the present disclosure. -
FIG. 8 is a flow diagram illustrating a method for evaluating a candidate spatial feature for inclusion in a localization area description file in accordance with at least one embodiment of the present disclosure. -
FIG. 9 is a flow diagram illustrating a method for evaluating a spatial feature for removal from a localization area description file in accordance with at least one embodiment of the present disclosure. -
FIG. 10 is a diagram illustrating a two-level query interface for an LADF database of an area description file server for performing localization area description file queries in accordance with at least one embodiment of the present disclosure. -
FIG. 11 is a flow diagram illustrating a method for a two-level query for a localization area description file in accordance with at least one embodiment of the present disclosure. -
FIG. 12 is a diagram illustrating an alternative two-level query interface for an LADF database of an area description file server for performing localization area description file queries in accordance with at least one embodiment of the present disclosure. - The following description is intended to convey a thorough understanding of the present disclosure by providing a number of specific embodiments and details involving visual mapping systems. It is understood, however, that the present disclosure is not limited to these specific embodiments and details, which are examples only, and the scope of the disclosure is accordingly intended to be limited only by the following claims and equivalents thereof. It is further understood that one possessing ordinary skill in the art, in light of known systems and methods, would appreciate the use of the disclosure for its intended purposes and benefits in any number of alternative embodiments, depending upon specific design and other needs.
-
FIGS. 1-12 illustrate example systems and techniques for cloud-based creation, revision, and provision of localization area data files to mobile devices. In at least one embodiment, a visual mapping system comprises an area description file (ADF) server communicatively coupled to a plurality of mobile devices via one or more wired or wireless networks. When a mobile device enters a previously-unmapped area, the mobile device initiates an area learning process whereby the mobile device captures imagery of the area, detects spatial features using the captured imagery, and transmits representations of the spatial features, their relative geometry, associated statistical data, and concurrently captured sensor data in an ADF to the ADF server. The ADF server uses this ADF to generate a localization ADF (LADF), which represents a sparse point cloud of spatial features of the area. Note that the term “file”, such as used in “area description file” or as otherwise used herein, refers to any data structure used to associate data and other information fields, or any combination of such data structures. The LADF then may be downloaded to another mobile device in the area covered by the LADF. A mobile device receiving the LADF may capture imagery of the area, detect spatial features therein, and compare the detected spatial features and their relative geometry to the spatial features and relative geometries represented by the LADF so as to localize the mobile device within the area using the reference coordinate frame presented by the LADF. In this manner, the area discovery and mapping of a previously-unmapped area may be efficiently crowd-sourced through passive collection and uploading of data by the mobile devices. - In some embodiments, the ADF server receives ADF files from multiple mobile devices for the same area, or for adjacent areas, and the ADF server operates to merge these multiple ADF files into a merged ADF file (or merged cluster of ADF files), which in turn may be used to generate one or more LADFs for the area, or sub-areas thereof. Further, as changes in the area are likely to occur, the ADF server may utilize crowd-sourced updating of an LADF generated for an area based on feedback from the mobile devices using the LADF for localization in the area. For example, in response to feedback indicating that some spatial features in the LADF are not being reliably observed by the mobile devices, the ADF server may remove these spatial features from the LADF. Conversely, in response to feedback indicating that spatial features not included in the LADF are being reliably observed by mobile devices in the area, the ADF server may add these spatial features to the LADF.
- Because the point clouds and associated data represented by ADFs and LADFs provide a visual representation of an area to a certain degree, the collection of ADFs from mobile devices and the distribution of LADFs to mobile devices may have privacy implications. Accordingly, in some embodiments, the visual mapping system implements certain privacy controls. One such privacy control may include configuring the mobile device to implement one or more privacy filter processes on the data of an ADF before the ADF is uploaded to the ADF server, and thus rendering the information represented by the uploaded version of the ADF unusable for the purposes of recreating useful visual content of the area. Another such privacy control may include a two-stage LADF query for accessing LADFs for distribution to mobile devices. When a mobile device enters an area for which it does not have an LADF available, the mobile device captures imagery, detects spatial features from the captured imagery, and submits an LADF request to the ADF server, whereby the LADF request includes a set of the detected spatial features and an indicator of the location of the mobile device (e.g., GPS coordinates or one more wireless base station identifiers). The ADF server then may conduct a first query stage to identify a set of candidate LADFs that match one of the set of detected spatial features or the location indicator, and then select an LADF from the set of candidate LADFs based on the other of the detected spatial features or the location indicator. In this way, the set of spatial identifiers submitted by the mobile device may serve as proof that the mobile device is in, or has access to, the identified area, and thus there is a significantly reduced risk of a privacy breach in supplying the LADF to the requesting mobile device.
-
FIG. 1 illustrates avisual mapping system 100 in accordance with at least one embodiment of the present disclosure. In the depicted example, thevisual mapping system 100 comprises anADF server 102 communicatively coupled to one or moremobile devices 104. As represented bycloud 106, the ADFserver 102 comprises a computing system that is remote to themobile device 104, and is coupled to themobile device 104 via one or more wired or wireless networks, such as via a wireless local area network (WLAN), a cellular data network, the Internet, or a combination thereof. Although described herein in the example context of a single server, in other embodiments theADF server 102 may be implemented as a computing system comprising a cluster of servers. An example implementation of theADF server 102 is described in greater detail below with reference toFIG. 2 . - The
mobile device 104 can include any of a variety of portable electronic devices operated by one ormore users 110, such as head mounted display (HMD), a tablet computer, computing-enabled cellular phone (e.g., a “smartphone”), a notebook computer, a personal digital assistant (PDA), a gaming console system, a drone, and the like. In the depicted example, themobile device 104 includes ahousing 112 having asurface 114 opposite anothersurface 116, whereby thehousing 112 typically is oriented with respect to theuser 110 such that the user faces thesurface 114 of thehousing 112. Further, in the depicted implementation, themobile device 104 includes adisplay 118 disposed at thesurface 116 for presenting visual information to theuser 110. Accordingly, for ease of reference, thesurface 116 is referred to herein as the “forward-facing” surface and thesurface 114 is referred to herein as the “user-facing” surface as a reflection of this example orientation, although the orientation of these surfaces is not limited by these relational designations. - The
mobile device 104 further includes a plurality of sensors to obtain information regarding anarea 122 in which themobile device 104 is currently located. Themobile device 104 obtains visual information (imagery) for thearea 122 via one or more imaging sensors, such asimaging sensors surface 116. Theimaging sensors surface 116 such that their respective fields of view overlap starting at a specified distance from themobile device 104, thereby enabling, via multiview analysis, depth sensing of objects in thearea 122 that are positioned in the region of the overlapping fields of view. Alternatively, adepth sensor 130 disposed on thesurface 116 may be used to provide depth information for the objects in the area. - The
depth sensor 130, in one embodiment, uses a modulated light projector to project modulated light patterns from the forward-facingsurface 116 into thearea 122, and uses one or both ofimaging sensors area 122. These modulated light patterns can be either spatially-modulated light patterns or temporally-modulated light patterns. The captured reflections of a modulated light flash are referred to herein as “depth images” or “depth imagery.” The depth sensor 120 then may calculate the depths of the objects, that is, the distances of the objects from themobile device 104, based on the analysis of the depth imagery. The resulting depth data obtained from thedepth sensor 130 may be used to calibrate or otherwise augment depth information obtained from multiview analysis (e.g., stereoscopic analysis) of the image data captured by theimaging sensors depth sensor 130 may be used in place of depth information obtained from multiview analysis. A more detailed example of an electronic system of themobile device 104 is described in greater detail below with reference toFIG. 3 . - In operation, the
mobile device 104 captures imagery of thearea 122 via one or both of theimaging sensors mobile device 104 relies on an accurate determination of its current six degree of freedom (6DOF) orientation and position (herein collectedly referred to as “pose”) relative to a specified coordinate frame. Thus, in some embodiments, themobile device 104 also uses imagery captured by theimaging sensors mobile device 104, that is, a position/orientation relative to thearea 122, using one or more of a simultaneous location and mapping (SLAM) process, a visual odometry process, or other visual mapping process. - Conventionally, when a mobile device enters a new area (that is, an area that the particular mobile device has not previously entered), the mobile device either must complete an area learning process (e.g., a SLAM process) to learn the new area, or rely on non-visual cues (e.g., GPS coordinates) to provide some indication of the current pose of the mobile device relative to a coordinate frame. In contrast, the
visual mapping system 100 leverages crowdsourcing provided through the prior explorations by other mobile devices in the area to allow a mobile device new to the area to quickly localize to a coordinate frame without extensive visual mapping of the area. To this end,mobile devices 104 connected to theADF server 102 operate to collect and uploadADF 132 to theADF server 102 as themobile devices 104 move about thearea 122. As described in greater detail below, theADF 132 includes a set of spatial features detected by themobile device 104, the relative geometry of the spatial features, various statistical metadata regarding the spatial features that describe the spatial features in ways substantially independent of the mobile device's pose, the lighting conditions, or other temporary environmental conditions or device-specific conditions, as well as sensor data collected from an inertial management unit (IMU) or other non-image sensors at the time of capture of the imagery associated with the spatial features. TheADF server 102 filters and merges the ADFs from multiplemobile devices 104 for the same area (or adjacent areas) based on the information contained in theADF 132, and from the resulting merged ADFs generates one or more LADFs 134, each of which represents a sparse point cloud of spatial features for the area or a corresponding sub-area thereof. - Thus, when another
mobile device 104 subsequently enters a new area, themobile device 104 may query theADF server 102 for an LADF that is associated with the area. Responsive to this query, theADF server 102 may provide anLADF 134 to the requestingmobile device 104. Themobile device 104 may capture imagery of thearea 122, detect certain spatial features contained therein, and compare the detected spatial features and their relative geometry with the spatial features and associated relative geometry represented by theLADF 134, and localize its current pose (that is, either determine its current pose or correct a previously determined pose that has drifted) based on the comparison of spatial features, such as through the application of a loop closure algorithm. Themobile device 104 further may provide feedback to theADF server 102 based on the mobile device's usage of theLADF 134, such as feedback data indicating that a spatial feature of theLADF 134 was not observed by themobile device 104, or feedback data indicating that a spatial feature not in theLADF 134 was observed by themobile device 104. - The crowd-sourced and cloud-based creation, refinement, and distribution of
LADFs 134 permitsmobile devices 104 to quickly and efficiently localize when entering a new area, and thus avoid the need to perform a time-consuming area learning process or the need to use the less precise and often unreliable measurements from a GPS sensor or inertial sensor. Moreover, as the spatial features of theLADF 134 may be referenced to a specific coordinate frame, multiplemobile devices 104 using theLADF 134 may localize their current poses to a common coordinate frame, thereby facilitating more efficient and accurate interaction between themobile devices 104 for functionality that relies on device pose information, such as multiplayer games, shared AR or VR functionality, and the like. -
FIG. 2 illustrates an example implementation of theADF server 102 ofFIG. 1 in accordance with at least one embodiment of the present disclosure. In the depicted example, theADF server 102 comprises a computing system having anetwork interface 202, anADF datastore 204, anLADF datastore 206, a feature score datastore 208, ageoreference datastore 210, amerge module 212, ageoreference module 214, a spatialfeature filter module 216, alocalization generation module 218, and aquery module 220. Although illustrated as separate datastores, one or more of thedatastores - The
modules more processors 222 executingsoftware instructions 224 stored in amemory 226 or other storage device, or a combination thereof. Further, although depicted as a single server for ease of illustration, theADF server 102 instead may be implemented as a computing system comprising a plurality of servers. For example, the functionality of themodules query module 220 and LADF datastore 206 may be implemented at another server. - As a general overview, the
merger module 212 operates to receive, via thenetwork interface 202,ADFs 132 from one or more mobile devices 232 (one embodiment of themobile device 104 ofFIG. 1 ) that have entered an area for which an LADF has not yet been compiled. Themerger module 212 merges the one or more ADFs 132 from themobile devices 232 to generate merged ADF data for storage in the ADF datastore 204. Thegeoreference module 214 may utilize georeference information from the georeference datastore 210 (which may contain, for example, imagery and associated georeference location from the Street View tool provided by Google Inc.) to provide a geographic reference to the merged ADF. Thelocalization generation module 218 generates one or more LADFs from the resulting merged ADF data and to store and index the one or more LADFs in the LADF datastore 206 for subsequent retrieval. Thequery module 220 receives anLADF request 236 from a mobile device 234 (one embodiment of the mobile device 104) via thenetwork interface 202, searches the LADF datastore 206 for theLADF 134 corresponding to theLADF request 236, and provides theLADF 134 to themobile device 234. Themobile device 234 uses theLADF 134 for localization of themobile device 234. During this localization process, themobile device 234 may provideLADF feedback 238 on theLADF 134 to theADF server 102 via thenetwork interface 202. TheADF server 102 may use theLADF feedback 238 to adjust feature scores of spatial features represented therein in the feature score datastore 208, and based on the feature scores refine theLADF 134 by adding or removing spatial features. These operations are described in greater detail below with reference toFIGS. 4-12 . - As noted,
mobile devices mobile device 104. Due to their respective operational requirements, amobile device 232 performing a localization process using an LADF may not require the same capabilities as amobile device 234 performing the ADF upload process. To illustrate, themobile device 234 may utilize the depth sensor 120 or a stereo camera configuration to facilitate SLAM operations in association with the process of generating and uploading an ADF, whereas themobile device 232 typically will not require a depth sensor 120 and only requires a monocular camera configuration to facilitate the localization process. -
FIG. 3 illustrates anexample processing system 300 implemented by themobile device 104 in accordance with at least one embodiment of the present disclosure. Theprocessing system 300 includes thedisplay 118, theimaging sensors depth sensor 130. Theprocessing system 300 further includes a graphics processing unit (GPU 302),frame buffers application processor 304, adisplay controller 306, asystem memory 308, aset 310 of non-image sensors, and auser interface 312. Theuser interface 312 includes one or more components manipulated by a user to provide user input to themobile device 104, such as atouchscreen 314, a mouse, a keyboard, amicrophone 316, various buttons or switches, and varioushaptic actuators 318. Theset 310 of non-image sensors can include any of a variety of sensors used to provide non-image context or state of themobile device 104. Examples of such sensors include an inertial management unit (IMU) 320 comprising one or more of agyroscope 321, amagnetometer 322, and anaccelerometer 323. The non-image sensors further can include, for example, an ambientlight sensor 326 as well as various wireless reception or transmission based sensors, such as aGPS sensor 328, a wireless local area network (WLAN)interface 330, acellular interface 332, a peer-to-peer (P2P)wireless interface 334, and a near field communications (NFC)interface 336. The non-image sensors also can include user input components of theuser interface 312, such as thetouchscreen 314 or themicrophone 316. - The
mobile device 104 further has access tovarious datastores 338 storing information or metadata used in conjunction with its image processing, location mapping, and location-utilization processes. Thedatastores 338 can include a spatial feature datastore to store metadata for 2D or 3D spatial features identified from imagery captured by the imaging sensors of themobile device 104, a SLAM datastore that stores SLAM-based information, such as mapping information for sub-areas of the area 122 (FIG. 1 ) already explored by themobile device 104, and an AR datastore that stores AR overlay information or VR information, such as CAD-based representations of the relative locations of objects of interest in thearea 122. Thedatastores 338 may be implemented at one or more storage components of themobile device 104, such as on a hard drive, solid state memory, or removable storage medium (not shown). - In operation, the
imaging sensors frame buffers GPU 302 processes the captured imagery for display (e.g., by rendering an AR overlay), and thedisplay controller 306 controls thedisplay 118 to display the processed imagery. Further, as described herein, themobile device 104 operates to uploadADFs 134 for previously-unmapped locations, as well as to download LADFs for previously-mapped locations and use a downloaded LADF to facilitate localization of themobile device 104. To this end, one or more software programs may be stored in thesystem memory 308 or other non-transitory computer readable medium and executed by one or both of theapplication processor 304 and theGPU 302 to provide this ADF generation and LADF utilization functionality. For ease of illustration, the one or more software programs are depicted inFIG. 3 as anADF generation program 342 and anLADF processing program 344. These programs may be implemented as a thread or other process in an operating system (OS) executed by theprocessing system 300, as threads, processes or subroutines of the same software application, or as separately-executed software applications. Further, in some embodiments, some or all of the functionality of theprograms - The
ADF generation program 342 can include, for example, aprivacy filter module 346, a spatialfeature detection module 348, and anADF assembly module 350. As depicted inFIG. 3 , theprivacy filter module 346 may comprise one or more image content filters, such as atext filter module 352 and a facial filter module, as well as adownsampler module 356. TheLADF processing program 344 can include, for example, a spatial feature detection module 358 (which may be the spatial feature detection module 348), arequest module 360, alocalization module 362, and afeedback module 364. The operations of theprocessing system 300, including the operations of theADF generation program 342 and theLADF processing program 344, are described in detail below. - As described above, when the
mobile device 104 is in an unmapped area (that is, an area for which theADF server 102 does not have an LADF available), themobile device 104 may operate in an ADF generation mode whereby themobile device 104 generates an ADF representing spatial features detected in the unmapped area and upload the ADF to theADF server 102. However, if the area has already been mapped and theADF server 102 has an LADF for the area, themobile device 104 instead may operate in an LADF localization mode whereby themobile device 104 obtains the LADF for the area from theADF server 102 and uses the sparse point cloud represented by the LADF to perform a localization process so as to localize themobile device 104 to the area. -
FIG. 4 illustrates anexample method 400 for selecting between these operational modes in accordance with at least one embodiment. For ease of description, themethod 400 is described in the example context of theprocessing system 300 ofFIG. 3 . Themethod 400 initiates atblock 402, whereby themobile device 104 determines that it has moved into an area that has not been previously mapped by themobile device 104. In response, themobile device 104 initiates a localization process or motion tracking process. - At
block 404, themobile device 104 queries theADF server 102 to determine whether an LADF is available for the area. As described below with reference toFIGS. 10-12 , theADF server 102 may implement a two-stage query process whereby themobile device 104 provides both a set of spatial features from imagery captured by the mobile device in the area and one or more location indicators (e.g., GPS coordinates or base station identifiers of WLAN or cell tower base stations detected by the mobile device 104) and theADF server 102 queries the LADF datastore 206 to identify the corresponding LADF. - In the event that an LADF is not available from the
ADF server 102, the area is considered to be an unmapped location and thus atblock 406 themobile device 104 and theADF server 102 coordinate to perform an ADF/LADF generation process for the unmapped location. This process is described in greater detail below with reference toFIG. 5 . In the event that an LADF is available from theADF server 102, the area is considered to be a mapped location and thus atblock 408 themobile device 104 and theADF server 102 coordinate to perform an LADF localization and update process, which is described in greater detail below with reference toFIG. 6 . -
FIG. 5 illustrates anexample method 500 for implementing the ADF/LADF generation process in accordance with at least one embodiment. As noted above, the ADF/LADF generation process is performed responsive to the determination that an LADF is not available for an area newly encountered by themobile device 104. Accordingly, after receiving user consent for the passive collection of area description data, themethod 500 initiates atblock 502 with the initiation of an area learning process using the sensors of themobile device 104. To perform the area learning process, themobile device 104 captures imagery 372 (FIG. 3 ) viaimaging sensors depth information 373 via thedepth sensor 130 as themobile device 104 moves through the area. Themobile device 104 may employ, for example, an interactive game to induce the user of themobile device 104 to explore the area as theimagery 372 anddepth information 373 is captured by themobile device 104. - Concurrently, the
ADF assembly module 350 captures non-image sensor data 374 (FIG. 3 ) from one or more of the non-image sensors of theset 310. To illustrate, theADF assembly module 350 may capture sensor data from theaccelerometer 323 during the capture of theimagery 372, and thus represent the orientation of themobile device 104 with respect to gravity at the time of the imagery capture. Similarly, sensor data captured from thegyroscope 321 may be used to determine the direction of travel of themobile device 104 with respect to the visual features represented in the captured imagery. Further, thenon-image sensor data 374 may include sensor data that may operate as location indicators of themobile device 104. These location indicators may be georeferenced location indicators, such as latitude/longitude coordinates represented in the sensor data provided by theGPS sensor 328. Alternatively, these location indicators may be inferred location indicators. To illustrate, as WLAN base stations and cell tower base stations are presumed to be fixed, the detection of a WLAN base station or a cell tower base station serves as an indication that the mobile device is in proximity to the detected base station, and thus the base station identifier (BSID), media access control (MAC) address, or other identifier of the base station can serve as an inferred location indicator for the mobile device. - As described below, the captured
imagery 372 anddepth information 373 is used to determine a point cloud of spatial features which ultimately is uploaded to theADF server 102. While this point cloud is not image data itself, depending on the density of the point cloud and other conditions, it is possible that an unmodified point cloud could be used to reconstruct certain visual content originally present in the capturedimagery 372. For example, if themobile device 104 were placed particularly close to a document, it is possible that the point cloud determined from the imagery captured of the document could be used to reproduce the text of the document. Accordingly, to prevent disclosure of unintended visual content, theprivacy filter module 346 may implement at least two privacy controls. - The first privacy control is implemented at
block 504, wherein theprivacy filter module 346 performs one or more content filter processes on the capturedimagery 372 to remove image content from regions that may have privacy implications. For example, atblock 504 thetext filter module 352 may perform a text filter process whereby each image captured atblock 502 is scanned using one or more well-known text recognition algorithms to determine whether there are any regions in the image that potentially represent text content. For each region detected as a potential text region, thetext filter module 352 may obfuscate or delete this region by, for example, performing a blending operation with pixels in the region or in adjacent regions, by replacing the pixel values in the region with the same default pixel region or otherwise delete the pixel values in the region, and the like. Likewise, atblock 504 thefacial filter module 354 may implement a facial filter process whereby each captured image is scanned using one or more well-known facial recognition algorithms to determine whether there are any regions in the image that potentially represent a human face, and filter the image to remove the image content from each region so identified. In this manner, the imagery is pre-filtered to remove potentially sensitive visual content prior to spatial feature detection, and thus the resulting point cloud of spatial features cannot be used to reconstruct the potentially sensitive visual content. - At
block 506, the spatialfeature detection module 348 analyzes the filtered imagery to detect spatial features contained therein. Any of a variety of spatial feature extraction algorithms may be used, such as, for example, a Scale-Invariant Feature Transform (SIFT) algorithm, a Speeded-Up Robust Features (SURF) algorithm, a Gray Level Patch algorithm, a Gradient Location and Orientation Histogram (GLOH) algorithm, a Zernike Moment algorithm, a Binary Robust Independent Elementary Features (BREIF) algorithm, Oriented BRISK (ORB) algorithm, Binary Robust Invariant Scalable Keypoints (BRISK) algorithm, Difference of Gaussians (DOG) algorithm, Fast Retina Keypoint (FREAK) algorithm, and the like. The spatialfeature detection module 348 provides these detected spatial features asspatial feature data 376. To illustrate, the FREAK algorithm provides for the comparison of pairs of pixels within an image patch, with the output of each comparison being a “0” or a “1” based on which pixel is lighter or darker of the pair. In the FREAK algorithm, 512 such comparisons are computed over the image patch, and the result is a spatial feature descriptor that is a binary string of length 512 for a corresponding spatial feature representing the image patch, as well as an (x,y,z) vector identifying the position of the spatial feature in the 3D reference frame. - Further, the spatial
feature detection module 348 determinesstatistical metadata 378 for each detected point. Thestatistical metadata 378 describes the corresponding spatial feature in a manner that is substantially independent of the particular viewing angle of themobile device 104 or of the ambient lighting when the corresponding imagery was captured. For example, thestatistical metadata 378 may comprise values representing the mean and standard deviation of the brightness of pixels representing the spatial feature, brightness gradients (or other visual characteristic gradients) in one or more directions, and the like. - Although the
privacy filter module 346 scrubbed the imagery of detected text and facial content, and thus the original point cloud of spatial features represented by thespatial feature data 376 is substantially devoid of textual and facial content, the original point cloud may still have sufficient spatial feature density to permit some level of reconstruction of visual appearance of the area from the original point cloud. Thus, as a second privacy control, atblock 508 thedownsampler module 356 of theprivacy filter module 346 downsamples the original point cloud so as to generate a filtered point cloud 380 (FIG. 3 ) of spatial features that contains only a selected subset of the spatial features of the original point cloud. This has the benefit of both reducing the likelihood that the visual appearance of an area may be reconstructed from the resulting point cloud, as well as reducing the amount of data needed to represent the resulting filteredpoint cloud 380. The downsampling process may be controlled by one or more downsampling criteria. For example, in some embodiments, the downsampling process may include the random selection of spatial features for exclusion from the filtered point cloud, the removal of every Xth spatial feature (X being an integer greater than 2), or the selection of no more than a maximum number of spatial features for inclusion in the filtered point cloud. As another example, the downsampling process may be controlled by a maximum spatial feature density criterion that specifies a maximum number of spatial features per cubic unit (that is, unit volume). For example, the maximum spatial feature density criterion may specify that the filteredpoint cloud 380 contain at most one spatial feature per cubic foot, and thus downsample the original point cloud so that no more than one spatial feature per cubic foot is represented in the resulting filtered point cloud. - At
block 510, theADF assembly module 350 uses the filteredpoint cloud 380,statistical metadata 378, and thenon-image sensor data 374 to generate anADF 132. In one embodiment, theADF 132 comprises a file or other data structure that represents the filteredpoint cloud 380 as a list or other set of multidimensional coordinates, along with a field for each multidimensional coordinate to store thestatistical metadata 378 for the represented spatial feature. To illustrate, each multidimensional coordinate may comprise an (x,y,z) floating point vector that represents a 3D position of a corresponding spatial feature in the (X,Y,Z) coordinate frame of themobile device 104. The data structure further may include one or more fields to store thenon-image sensor data 374, as well as a field to store a unique identifier (UID) assigned to theADF 132 by theADF server 102, as described below. - At block 512, the
ADF assembly module 350 provides theADF 132 to the appropriate network interface (e.g., thecellular interface 332 or the WLAN interface 330) for transmission to theADF server 102. In some embodiments, theADF assembly module 350 signals a request to upload an ADF to theADF server 102, and theADF server 102 responds with a UID assigned to the ADF, which theADF assembly module 350 inserts into the appropriate field in theADF 132 before it is uploaded. Further, while the process of blocks 502-512 has been described as a sequential process whereby theADF 132 is completed before it is uploaded, in some embodiments, theADF 132 is generated and uploaded in an iterative process whereby theADF 132 is generated as a sequence of ADF blocks, each ADF block containing a subset of the point cloud generated from a portion of the captured imagery, and each ADF block being marked with the UID assigned to the ADF and uploaded to theADF server 102 as it is generated. TheADF server 102 thus may store these ADF blocks individually, or may combine the ADF blocks denoted by the same UID into asingle ADF 132. - The
ADF 132 uploaded by themobile device 104 represents certain visual features present in the area in which themobile device 104 is located. However, through the privacy controls implemented by themobile device 104 as described above with reference toblocks ADF 132 that is provided to theADF server 102 is substantially devoid of any content that may have privacy implications. Rather, while the resultingADF 132 contains a sparse point cloud that may describe various edges, corners, and other visual features of the area so to a degree sufficient to allow another mobile device to subsequently localize based on these described visual features, the sparse point cloud contains insufficient information to support replication of visual appearances of the area in a way meaningful to human perception. As such, theADF server 102 should not come into possession of any information from themobile device 104 that has a measurable potential to reveal potentially sensitive information regarding a mapped area. - The role of the
ADF server 102 in the ADF/LADF generation process initiates atblock 514 with the receipt of theADF 132 by themerge module 212 via thenetwork interface 202 from themobile device 104. Upon receipt of theADF 132, themerge module 212 temporarily indexes and stores theADF 132 in the ADF datastore 204. TheADF 132 may be indexed for temporary storage based on the UID assigned to theADF 132, based on the spatial features represented in the point cloud represented by theADF 132, based on the location indicator(s) included with theADF 132, and the like. In at least one embodiment, eachADF 132 is stored and indexed in the ADF datastore 204 using the two-layer query approach described below with reference toFIGS. 10-12 . - In some instances, multiple mobile devices may have uploaded a corresponding ADF for an area or for adjacent areas. The
ADF server 102 thus operates atblock 516 to merge these co-located ADFs before processing the resulting merged ADFs into one or more LADFs. The merge process ofblock 516 may be initiated in response to any of a variety of triggers. For example, the merge process may be triggered by the lapse of a specified amount of time, by the receipt of a specified number of ADFs from mobile devices, by the request for an LADF from a mobile device, and the like. In response to such a trigger, atblock 518 themerge module 212 signals thequery module 220 to query the ADF datastore 204 to identify whether there are any “nearby” ADFs—that is, ADFs that cover the same area or an adjacent area. In some embodiments, nearby ADFs may be identified based on comparisons of the location indicators associated with ADFs in the ADF datastore 240. For example, assuming the upload of anADF 132 from themobile device 104 triggered the merge process and the uploadedADF 132 includes one or more WLAN MAC addresses as location indicators, then those ADFs in the ADF datastore 240 identified by thequery module 220 as having the same WLAN MAC address as supplied with the uploaded ADF, or with WLAN MAC addresses of WLAN base stations known to be adjacent to the area covered by a WLAN base station identified by the uploaded ADF, are identified as nearby ADFs. As another example, the uploaded ADF may be provided with GPS coordinates as a location indicator, and thequery module 220 may identify ADFs in the ADF datastore 240 as being nearby based on their corresponding GPS coordinates. In other embodiments, nearby ADFs may be identified based on a comparison of the spatial features represented in the uploaded ADF with the spatial features represented in ADFs stored in the ADF datastore 240. Those ADFs having a sufficiently overlapping set of spatial features thus may be identified as representing the same area or a nearby area, and thus identified as nearby ADFs. Still further, as described below with reference toFIGS. 10-12 , theADF server 102 may implement a two-layer query for one or both of the ADF datastore 204 and the LADF datastore 206 such that the each stored ADF/LADF is indexed for storage based on both its spatial feature set and one or more location indicators, and nearby ADFs are identified by performing a two-layer indexing process using both the spatial feature set of the uploaded ADF as well as one or more location indicators of the uploaded ADF. - The set of one or more nearby, or co-located, ADFs identified by the
query module 220 are referred to herein as an “ADF cluster.” With an ADF cluster identified, atblock 520 themerge module 212 operates to perform one or more deduplication processes to remove duplicate spatial features represented in the ADFs of the ADF cluster. Further, in the event that the ADF cluster represents an excessively large area, or contains an excessively large number of spatial features, themerge module 212 may split the ADF cluster into one or more smaller ADF clusters, each of which may be processed as described herein. Atblock 522, themerge module 212 employs one or more well-known loop closure algorithms to determine the relative alignment between the ADFs of the ADF cluster. Atblock 524, themerge module 212 analyzes the ADF cluster to selectively remove spatial features which are not reliably observed in most or all of the ADFs of the ADF cluster, as identified using one or more stability criteria. This serves both the purpose of eliminating spatial features which are likely not representative of permanent visual features of the area (and thus unreliable sources for localization), as well as reducing the total number of spatial features in the combined point cloud represented by the ADF cluster. In selecting the spatial features to remove, themerge module 212 may employ a scoring system based on a stability criterion, such as by giving spatial features scores based on the frequency that they are observed within the ADFs of the ADF cluster. Further, as newer ADFs are more likely to represent the current state of the area, themerge module 212 may give inclusion preference to spatial features in newer ADFs. - In some instances, the
non-image sensor data 374 supplied with an ADF may permit the ADF to be georeferenced. For example, thenon-image sensor data 374 may include GPS coordinates and an indicator of the georeferenced pose of themobile device 104 at the time of the detection of the spatial features in the ADF. With the relative alignment of the ADFs of the ADF cluster determined atblock 522, if one ADF in the ADF cluster is georeferenced, then atblock 526 the other ADFs in the ADF cluster may be georeferenced based on application of a coordinate frame translation using the relative alignment and geolocation information of the georeferenced ADF. Further, in the event that georeferenced visual reference data is available, such as via the Street View tool provided by Google Inc., the ADFs of the ADF cluster may be georeferenced using this georeferenced visual reference data. - With the ADFs of the ADF cluster merged, at
block 528 thelocalization generation module 218 uses the merged ADFs to generate one or more LADFs for the areas represented by the merged ADFs. In the event that the data size of the merged ADFs are sufficiently small, or cover a sufficiently small area, the merged ADFs may be stored and indexed as a single LADF. However, in the event that the data size of the merged ADFs is over a threshold, the merged ADFs cover too large of an area, or the area contains multiple separate sub-areas (as identified via walls, partitions, doors, and windows in the point clouds of the ADFs), thelocalization generation module 218 may spatially partition the merged ADFs to generate multiple LADFs, each LADF covering a different sub-area. In such instances, thelocalization generation module 218 may attempt to identify logical partition lines, such as by identifying multiple rooms within the area based on the detection of walls or other room dividers within the point cloud represented by the merged ADFs, and create a separate LADF for each identified room, which has the additional benefit from a privacy perspective of limiting the scope of the LADF to a single room. - For each LADF generated, at
block 530 thelocalization generation module 218 provides the LADF to the LADF datastore 206 for indexing and storage. As noted above and as described in detail below, in some embodiments the LADF datastore 206 employs a two-layer index for each LADF, whereby each LADF is indexed both by one or more location indicia and by the spatial features represented by the LADF. Accordingly, when storing an LADF in the LADF datastore 206, the LADF datastore 206 stores the LADF in a datastore entry indexed by one of its location indicator(s) or its spatial feature set (and relative geometries therein), and the other of the location indicator(s) or the spatial feature set is used to select between multiple LADFs similarly indexed. - With the conclusion of the process at
block 530 ofmethod 500, theADF server 102 has generated one or more LADFs for a previously unmapped area using one or more ADFs uploaded from one or moremobile devices 104 that have had the opportunity to explore the area. Thus, theADF server 102 is ready to supply a LADF to any other mobile device that encounters this area for the first time, as described byFIG. 6 below. -
FIG. 6 illustrates anexample method 600 for performing the LADF localization and update process represented byblock 408 ofFIG. 4 in accordance with at least one embodiment. Themethod 600 initiates atblock 602 when themobile device 104 enters an area that themobile device 104 has not previously encountered and mapped. In response to this determination, the mobile device initiates a spatial feature detection process for the area. To this end, themobile device 104 triggers theimaging sensors FIG. 3 ) of the area and triggers thedepth sensor 130 to begin the capture of depth information for the area, and from theimagery 382 and depth information the spatialfeature detection module 358 detects an initial set of spatial features representative of the area. Atblock 604, therequest module 360 determines one or more location indicators for the location of themobile device 104 at the time of spatial feature detection in the area. As noted above, these location indicators may be specific geographic location indicators, such as GPS coordinates obtained from theGPS sensor 328, inferential location indicators, such as WLAN MAC addresses, WLAN BSIDs, or cell tower BSIDs, or a combination thereof. Atblock 606, therequest module 360 uses the initial spatial feature set and the one or more location indicators to generate anLADF request 236 and transmit theLADF request 236 to initiate an inquiry into the availability of an LADF for the area. - In response to receipt of the
LADF request 236 at thequery module 220 of theADF server 102 via thenetwork interface 202, atblock 608 thequery module 220 queries the LADF datastore 206 to identify a suitable LADF for the area for use by themobile device 104. In at least one embodiment, thequery module 220 and the LADF datastore 206 employ a two-layer indexing scheme to identify a suitable LADF based on both the initial spatial feature set and the location indicators, as described in detail below with reference toFIGS. 10-12 . Assuming a suitable LADF is identified, at block 610 thequery module 220 transmits the selected LADF (as LADF 134) to the requestingmobile device 104. - In response to receiving the
LADF 134 in response to theLADF request 236, therequest module 360 provides theLADF 134 to both thelocalization module 362 and thefeedback module 364. Atblock 612, thelocalization module 362 employs one or more well-known loop closure algorithms to localize themobile device 104 to the coordinate frame represented in theLADF 134 based on comparisons of spatial features from the area detected by the spatialfeature detection module 358 to the sparse point cloud of spatial features represented in theLADF 134, the result of which is a determine pose 384 (FIG. 3 ) of themobile device 104 in the identified coordinate frame. Further, in the event that the LADF was able to be georeferenced, thedetermined pose 384 likewise may be georeferenced through the appropriate translation. With themobile device 104 localized and thepose 384 determined, atblock 614 one or more components of themobile device 104 may provide various functionality that relies on accurate pose information, such as the implementation of AR or VR content, multiple-player games, navigation tools, and the like. - The generation of the
LADF 134 relies on the detection and selection of spatial features observed in the area by one or moremobile devices 104. However, as the area may have transient objects included in the observed spatial features, or as the configuration of the area may change over time, anLADF 134 may become less useful, or “stale.” Accordingly, in some embodiments, with user permission, themobile devices 104 may provide feedback on the LADF, which may be used by theADF server 102 to refine, or “refresh” the LADF for subsequent use by other mobile devices. To this end, atblock 616 thefeedback module 364 may compare spatial features identified by the spatialfeature detection module 358 in the area with the spatial features of the sparse point cloud represented by theLADF 134 and generateLADF feedback 238 representing one or more of: spatial features of theLADF 134 that were also observed by the spatialfeature detection module 358; spatial features of theLADF 134 that were not observed by the spatialfeature detection module 358; and spatial features observed by the spatialfeature detection module 358 that were not present in theLADF 134. TheLADF feedback 238 is uploaded to theADF server 102. Atblock 618, the spatialfeature filter module 216 receives theLADF feedback 238, updates the feature scores of spatial features in the feature score datastore 208 accordingly, and then may update the LADF to include new spatial features or to remove previously-included spatial features based on the updated feature scores. -
FIGS. 7-9 together illustrate an example of the process of refining anLADF 134 based onLADF feedback 238 in accordance with at least one embodiment. Initially, all spatial features represented in anLADF 134 are provided an initial feature score, which may be the same for all spatial features in theLADF 134, or which may be based on one or more properties of the spatial feature. For example, a spatial feature may be assigned an initial feature score based on the number of times it appeared in the ADFs of the ADF cluster from which theLADF 134 was generated. For the following description, it is assumed that a higher feature score reflects a more reliable spatial feature, and conversely a lower feature score indicates a less reliable spatial feature. TheLADF feedback 238 supplied by amobile device 104 can include one or more entries, with each entry either confirming the observation of a spatial feature present in theLADF 134 by themobile device 104, denying the observation of a spatial feature present in theLADF 134 by the mobile device, or suggesting a new spatial feature observed by themobile device 104 and not present in theLADF 134. The feature scores of spatial features thus may be adjusted based on the entries and the feedback type they represent. - The
method 700 ofFIG. 7 represents the processing implemented by theADF server 102 for each entry of theLADF feedback 238. Atblock 702, the spatialfeature filter module 216 accesses a selected entry of theLADF feedback 238 to determine the type of feedback represented by the entry. In the event that the feedback entry confirms that themobile device 104 observed a corresponding spatial feature of theLADF 134, atblock 704 the spatialfeature filter module 216 extracts one or more parameters pertaining to the identification of the spatial feature as represented in the feedback entry, such as a time stamp indicating a time of observation of the spatial feature by themobile device 104, and records the extracted parameters in the feature score datastore 208. Further, atblock 706, the spatialfeature filter module 216 increases the feature score for the corresponding spatial feature to reflect its recent observation. - Returning to block 702, in the event that the feedback entry indicates that the
mobile device 104 did not observe a spatial feature represented in theLADF 134, atblock 708 the spatialfeature filter module 216 extracts one or more parameters pertaining to the identification of the spatial feature as represented in the feedback entry, such as a time stamp indicating a time when themobile device 104 was capturing imagery of the region in which the spatial feature should have been observed but was not, and records the extracted parameters in the feature score datastore 208. Further, atblock 710, the spatialfeature filter module 216 decreases the feature score for the corresponding spatial feature to reflect its missed observation. - Returning again to block 702, in the event that the feedback entry indicates that the
mobile device 104 reliably observed a spatial feature not represented in theLADF 134, atblock 712 the spatialfeature filter module 216 extracts one or more parameters pertaining to the identification of the previously-unobserved spatial feature as represented in the feedback entry, such as a time stamp indicating a time when themobile device 104 first or last observed the spatial feature, a frequency of observation of the spatial feature (e.g., the percentage of times the spatial feature was observed when themobile device 104 was oriented in the direction of the region containing the spatial feature), and the like, and records the extracted parameters in the feature score datastore 208. Further, atblock 714, the spatialfeature filter module 216 either creates a feature score for the corresponding spatial feature in the feature score datastore 208 and assigns an initial value to the feature score if the spatial feature is not already represented in the feature score datastore 208. Otherwise, if a feature score is already present for the newly-observed spatial feature (that is, the spatial feature was also observed by anothermobile device 104 previously), the spatialfeature filter module 216 increases the feature score for the spatial feature.Method 700 then returns to block 702 to repeat the process for the next entry in theLADF feedback 238. -
FIG. 8 illustrates anexample method 800 for evaluating a candidate spatial feature for inclusion in anLADF 134 in accordance with at least one embodiment. As described above,mobile devices 104 may provideLADF feedback 238 that identifies newly observed spatial features in an area that may be candidates for inclusion in theLADF 134 for the area, and the spatialfeature filter module 216 may create a feature score the first time a spatial feature is detected, and increase the feature score each time the same spatial feature is observed by anothermobile device 104. Thus, the feature score for each of these spatial features serves as an indicator of the viability of the candidacy of the spatial feature for inclusion in the LADF 134 (that is, how “reliable” the spatial feature is for purposes of localization). Accordingly, in response to a trigger condition, such as the aging of anLADF 134 exceeding a certain threshold, or in response to sufficient feedback frommobile devices 104 indicating that a revision to theLADF 134 would be warranted, atblock 802 the spatialfeature filter module 216 selects one of the candidate spatial features under consideration for inclusion in theLADF 134 from the feature score datastore 208 and atblock 804 the spatialfeature filter module 216 compares the feature score of the selected candidate spatial feature with a specified threshold, designated “THRESH_H”. This threshold may be a fixed threshold, or may be based on one or more current conditions. For example, in one embodiment, the threshold THRESH_H may be set to the median current feature score for the spatial features currently included in theLADF 134. - In the event that the feature score of the candidate spatial feature does not exceed the threshold THRESH_H, the spatial
feature filter module 216 ceases any further consideration of the candidate spatial feature (in the current round of evaluation), and themethod 800 returns to block 802 for the selection of the next candidate spatial feature. Otherwise, if the feature score exceeds the threshold THRESH_H, atblock 806 the spatialfeature filter module 216 signals thelocalization generation module 218 to incorporate the selected candidate spatial feature into theLADF 134. In some embodiments, the incorporation of a new spatial feature into theLADF 134 may require the elimination of another spatial feature from theLADF 134. In such cases, the spatialfeature filter module 216 may select, for example, the spatial feature having the lowest feature score of all of the spatial features presently included in theLADF 134. After incorporating the candidate spatial feature into theLADF 134, themethod 800 returns to block 802 for the selection and evaluation of the next candidate spatial feature. -
FIG. 9 illustrates anexample method 900 for evaluating a spatial feature for removal from anLADF 134 in accordance with at least one embodiment. As described above,mobile devices 104 may provideLADF feedback 238 that confirms whether spatial features of theLADF 134 were observed by themobile device 104, and the spatialfeature filter module 216 may adjust the feature scores of the spatial features accordingly. Thus, the feature score for each of these spatial features serves as an indicator of the current reliability of the spatial feature for localization purposes. Accordingly, in response to a trigger condition, atblock 902 the spatialfeature filter module 216 selects a spatial feature currently included in theLADF 134 and atblock 904 the spatialfeature filter module 216 compares the feature score of the selected spatial feature with a specified threshold, designated “THRESH_L”. This threshold may be a fixed threshold, or may be based on one or more current conditions. For example, in one embodiment, the threshold THRESH_L may be set to the median current feature score for the candidate spatial features not presently included in theLADF 134. - In the event that the feature score of the candidate spatial feature does exceed the threshold THRESH_L, the spatial
feature filter module 216 ceases any further consideration of the selected spatial feature (in the current round of evaluation), and themethod 900 returns to block 902 for the selection of the next spatial feature in theLADF 134. Otherwise, if the feature score falls below the threshold THRESH_L, atblock 906 the spatialfeature filter module 216 signals thelocalization generation module 218 to remove the selected spatial feature from theLADF 134. In some embodiments, the removal of a spatial feature from theLADF 134 may require the selection of another spatial feature to replace the removed spatial feature and thus serve as a trigger condition to initiate the candidate spatial feature evaluation process ofmethod 800 ofFIG. 8 . After removing the selected spatial feature from theLADF 134, themethod 900 returns to block 902 for the selection and evaluation of the next spatial feature in theLADF 134. - The LADFs maintained by the
ADF server 102 contain representations of visual features and geometric information of an area of the world. This information is potentially sensitive, and thus theADF server 102 takes care to prevent unauthorized or unintended access to the LADF content stored in the LADF datastore 206 and the ADF content stored in the ADF datastore 204 (which may comprise the same datastore in some implementations). To this end, theADF server 102 employs a privacy safeguard in the form of a two-layer indexing scheme for the LADF content of the LADF datastore 206.FIGS. 10-12 illustrate an example configuration of thequery module 220 and the LADF datastore 206 and operations thereof in accordance with this two-layer indexing scheme. The ADF datastore 204 may be similarly configured in the manner described below. -
FIG. 10 illustrates an example two-layer query interface 1000 implemented by thequery module 220 and the LADF datastore 206. As depicted, each LADF (e.g., LADF 134) stored by the LADF datastore 206 is stored in acorresponding LADF entry 1002 of aLADF database 1004 implemented in the LADF datastore 206. EachLADF entry 1002 includes a plurality of fields, including aUID field 1006 to store a UID associated with the LADF stored therein, aspatial feature field 1008 to store the set of spatial features presently represented by the LADF, and alocation field 1010 to store the location indicator or other location data associated with the LADF. - Without adequate safeguards, an unauthorized party may be able to obtain the
LADF 134 from the LADF datastore 206, and thus risk exposure of potentially sensitive information. The two-layer query interface 1000 may more fully secure the LADF data of the LADF datastore 206 by requiring that the requestingmobile device 104 or other requestor prove that they are at (or have been at) the area associated with a requested LADF. Some location indicators, such as GPS coordinates, may be easily spoofed or otherwise forged. Further, other types of location indicators, such as WLAN MAC addresses or cell tower BSIDs may cover regions far larger than the area of interest, and thus may lack sufficient granularity. As such, location indicators alone may not be sufficient proof that a requesting mobile device is in fact in the specified area. Thus, thequery interface 1000 may instead require proof that themobile device 104 is in the specified area by requiring that themobile device 104 submit a set of spatial features observed by themobile device 104 in the specified area. Thequery interface 1000 then may compare this set of spatial features with the spatial features of the LADF entries to identify a matching LADF. However, many areas have similar structural configurations (e.g., similar rooms within an office building), and thus there is a risk that multiple LADFs may adequately match the submitted set of spatial features, and thus the incorrect LADF may be supplied to the requesting mobile device, which is doubly problematic as it both represents a potential privacy breach as well as provides themobile device 104 with the incorrect reference for localization. - Thus, to ensure both that the mobile device is in fact in the area it represents it is and to ensure the correct LADF is supplied to the mobile device, the
query interface 1000 utilizes both a set of spatial features and one or more location indicators submitted by a mobile device to identify the correct LADF from theLADF database 1004. It should be appreciated that under this approach, the mobile device or other requestor proves that the requestor is in the identified area by submitting spatial features observed in the identified area, and thus the release of the LADF for the identified area has a low risk of unintended disclosure of potentially sensitive information as the requestor simply may look around the indicated area to obtain visual information many orders of magnitude more detailed than the visual information represented by the supplied LADF. - To this end, the
query module 220 includes a spatialfeature query interface 1012 and alocation selection module 1014. The spatialfeature query interface 1012 performs the initial query of candidate LADFs based on a search of thespatial feature fields 1008 of theLADF entries 1002 of theLADF database 1004 using a spatial feature set 1016 in aLADF request 236 submitted by amobile device 104. This search takes into account the relative geometry of the spatial features as they are projected into the image represented byLADF request 236 to check for consistency against those in theLADF database 1004. Thelocation selection module 1014 then selects from the identified candidate LADFs based on comparisons of the one ormore location indicator 1018 submitted with theLADF request 236 with the location information for each LADF in thelocation fields 1010 of the candidate LADFs. - Further, to prevent search or other access of the
LADF entries 1002 using a location indicator or other key besides a set of spatial features, in some embodiments the LADF datastore 206 is configured to index theLADF entries 1002 by thespatial feature fields 1008 and further is configured to avoid indexing of theLADF entries 1002 by the location fields 1010. In this configuration, theLADF entries 1002 of theLADF database 1004 are searchable via the spatial feature sets of the LADFs but cannot be initially searched by location. In this manner, submission of a location indicator alone will not result in the identification or production of anyLADFs 134 from theLADF database 1004. -
FIG. 11 illustrates anexample method 1100 of operation of the two-layer query interface 1000 ofFIG. 10 in accordance with at least one embodiment of the present disclosure. Themethod 1100 initiates atblock 1102 with the submission of anLADF request 236 for an indicated area from a mobile device or other requestor. In at least one embodiment, in order to accept aLADF request 236 for processing, theADF server 102 requires that theLADF request 236 include at least the spatial feature set 1016 observed in the indicated area and one ormore location indicators 1018 obtained or determined by the mobile device in the indicated area. - At
block 1104 the spatialfeature query interface 1012 searches theLADF entries 1002 of theLADF database 1004 to findLADF entries 1002 that have spatial feature sets in thespatial feature fields 1008 that sufficiently overlap with the spatial feature set 1016 of theLADF request 236, and which have relative geometries that are consistent with the geometries of the projected spatial features of thespatial feature set 1016. In one embodiment, for eachLADF entry 1002 analyzed the spatialfeature query interface 1012 may determine a count of matching spatial features between thespatial feature set 1016 and thespatial feature field 1008 of theLADF entry 1002. The spatialfeature query interface 1012 then may select N candidate LADFs (e.g.,candidate LADFs FIG. 10 ) based on the count values determined for theLADF entries 1002. For example, in some instances every LADF having a count greater than a specified threshold may be selected as a candidate LADF. In other instances, the spatialfeature query interface 1012 may select the N LADFs with the highest count values as the N candidate LADFs. - At
block 1106 the spatialfeature query interface 1012 verifies that at least one candidate LADF has been identified from theLADF database 1004. If not, atblock 1108 thequery module 220 signals to the requesting mobile device that an LADF is unavailable for the indicated area. Otherwise, the one or more identified candidate LADFs are supplied to the location selection module 1014 (e.g., by identifying the UIDs of the candidate LADFs), and atblock 1110 thelocation selection module 1014 compares the one ormore location indicators 1018 of theLADF request 236 with the locations indicated by thelocation fields 1010 of the candidate LADFs to score a match between each candidate LADF and the one ormore location indicators 1018. Atblock 1112, thelocation selection module 1014 verifies whether there is a sufficient match between the one ormore location indicators 1018 and the location information of one of the candidate LADFs. If not, atblock 1114 thequery module 220 signals to the requesting mobile device that an LADF is unavailable for the indicated area. Otherwise, atblock 1116 thelocation selection module 1014 selects the candidate LADF with the best location match score as the LADF co-located as the identified area and provides this selected LADF as theLADF 134 for the area to the mobile device in response to theLADF request 236. - In addition to providing protection against unauthorized or unintended access to the LADFs of the
LADF database 1004, performing the LADF query using spatial features and their geometry as detected by the mobile device ensures that the LADF ultimately selected through the two-stage query process will allow the mobile device to successfully localize using the matching LADF. This is because the first stage of the LADF query process performs the same or similar “localization” process to identify candidate LADFs as the localization process performed at the mobile to find the pose of the mobile device relative to the LADF using the observed spatial features and their image geometry in the LADF. -
FIG. 12 illustrates an alternative configuration of the two-layer query interface 1000 in accordance with at least one embodiment. As with the implementation depicted inFIG. 10 , the LADF datastore 206 implements anLADF database 1204 comprising a plurality ofLADF entries 1202, eachLADF entry 1202 having theUID field 1006, thespatial feature field 1008, and thelocation field 1010. However, in contrast to the implementation ofFIG. 10 , theLADF database 1204 instead indexes theLADF entries 1202 based on thelocation field 1010. Further, in this embodiment, thequery module 220 comprises alocation query interface 1212 to theLADF database 1204 and a spatialfeature selection module 1214. - In the depicted implementation, the two-layer query for an LADF is implemented as a first layer search of
LADF entries 1202 by thelocation query interface 1212 for LADFs that have location information that sufficiently matches the one ormore location indicators 1018 of theLADF request 236 to identify a set of one or more candidate LADFs. The spatialfeature selection module 1214 then compares the spatial feature set 1016 of theLADF request 236 to select the candidate LADF that best matches the spatial feature set 1016 as theLADF 134 to be supplied to the requesting mobile device in response to theLADF request 236. - Much of the inventive functionality and many of the inventive principles described above are well suited for implementation with or in integrated circuits (ICs) such as application specific ICs (ASICs). It is expected that one of ordinary skill, notwithstanding possibly significant effort and many design choices motivated by, for example, available time, current technology, and economic considerations, when guided by the concepts and principles disclosed herein will be readily capable of generating such ICs with minimal experimentation. Therefore, in the interest of brevity and minimization of any risk of obscuring the principles and concepts according to the present disclosure, further discussion of such software and ICs, if any, will be limited to the essentials with respect to the principles and concepts within the preferred embodiments.
- In this document, relational terms such as first and second, and the like, may be used solely to distinguish one entity or action from another entity or action without necessarily requiring or implying any actual such relationship or order between such entities or actions. The terms “comprises,” “comprising,” or any other variation thereof, are intended to cover a non-exclusive inclusion, such that a process, method, article, or apparatus that comprises a list of elements does not include only those elements but may include other elements not expressly listed or inherent to such process, method, article, or apparatus. An element preceded by “comprises . . . a” does not, without more constraints, preclude the existence of additional identical elements in the process, method, article, or apparatus that comprises the element. The term “another”, as used herein, is defined as at least a second or more. The terms “including” and/or “having”, as used herein, are defined as comprising. The term “coupled”, as used herein with reference to electro-optical technology, is defined as connected, although not necessarily directly, and not necessarily mechanically. The term “program”, as used herein, is defined as a sequence of instructions designed for execution on a computer system. A “program”, or “computer program”, may include a subroutine, a function, a procedure, an object method, an object implementation, an executable application, an applet, a servlet, a source code, an object code, a shared library/dynamic load library and/or other sequence of instructions designed for execution on a computer system.
- The specification and drawings should be considered as examples only, and the scope of the disclosure is accordingly intended to be limited only by the following claims and equivalents thereof. Note that not all of the activities or elements described above in the general description are required, that a portion of a specific activity or device may not be required, and that one or more further activities may be performed, or elements included, in addition to those described. Still further, the order in which activities are listed are not necessarily the order in which they are performed. The steps of the flowcharts depicted above can be in any order unless specified otherwise, and steps may be eliminated, repeated, and/or added, depending on the implementation. Also, the concepts have been described with reference to specific embodiments. However, one of ordinary skill in the art appreciates that various modifications and changes can be made without departing from the scope of the present disclosure as set forth in the claims below. Accordingly, the specification and figures are to be regarded in an illustrative rather than a restrictive sense, and all such modifications are intended to be included within the scope of the present disclosure.
- Benefits, other advantages, and solutions to problems have been described above with regard to specific embodiments. However, the benefits, advantages, solutions to problems, and any feature(s) that may cause any benefit, advantage, or solution to occur or become more pronounced are not to be construed as a critical, required, or essential feature of any or all the claims.
Claims (22)
Priority Applications (6)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US14/708,970 US20160335275A1 (en) | 2015-05-11 | 2015-05-11 | Privacy-sensitive query for localization area description file |
PCT/US2016/030956 WO2016182846A1 (en) | 2015-05-11 | 2016-05-05 | Privacy-sensitive query for localization area description file |
EP16728134.4A EP3295730A1 (en) | 2015-05-11 | 2016-05-05 | Privacy-sensitive query for localization area description file |
CN201680019347.8A CN107438841A (en) | 2015-05-11 | 2016-05-05 | The privacy-sensitive inquiry of file is described for localization region |
JP2017556927A JP2018526698A (en) | 2015-05-11 | 2016-05-05 | Privacy sensitive queries in localization area description files |
KR1020177031682A KR102149374B1 (en) | 2015-05-11 | 2016-05-05 | Privacy-sensitive query for localization area description files |
Applications Claiming Priority (1)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US14/708,970 US20160335275A1 (en) | 2015-05-11 | 2015-05-11 | Privacy-sensitive query for localization area description file |
Publications (1)
Publication Number | Publication Date |
---|---|
US20160335275A1 true US20160335275A1 (en) | 2016-11-17 |
Family
ID=56116521
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
US14/708,970 Abandoned US20160335275A1 (en) | 2015-05-11 | 2015-05-11 | Privacy-sensitive query for localization area description file |
Country Status (6)
Country | Link |
---|---|
US (1) | US20160335275A1 (en) |
EP (1) | EP3295730A1 (en) |
JP (1) | JP2018526698A (en) |
KR (1) | KR102149374B1 (en) |
CN (1) | CN107438841A (en) |
WO (1) | WO2016182846A1 (en) |
Cited By (23)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US9754419B2 (en) | 2014-11-16 | 2017-09-05 | Eonite Perception Inc. | Systems and methods for augmented reality preparation, processing, and application |
US9916002B2 (en) | 2014-11-16 | 2018-03-13 | Eonite Perception Inc. | Social applications for augmented reality technologies |
US10043319B2 (en) | 2014-11-16 | 2018-08-07 | Eonite Perception Inc. | Optimizing head mounted displays for augmented reality |
WO2018189529A1 (en) * | 2017-04-10 | 2018-10-18 | Blue Vision Labs UK Limited | Co-localisation |
US20190087550A1 (en) * | 2017-09-15 | 2019-03-21 | Insignary Inc. | Method and system for identifying open-source software package based on binary files |
CN109579765A (en) * | 2017-09-29 | 2019-04-05 | 上海时元互联网科技有限公司 | Three-dimensional point cloud data matching method and system based on servo motor and controller |
US10346223B1 (en) * | 2016-11-23 | 2019-07-09 | Google Llc | Selective obfuscation of notifications |
US10692289B2 (en) | 2017-11-22 | 2020-06-23 | Google Llc | Positional recognition for augmented reality environment |
US11017712B2 (en) | 2016-08-12 | 2021-05-25 | Intel Corporation | Optimized display image rendering |
WO2021142600A1 (en) * | 2020-01-14 | 2021-07-22 | 华为技术有限公司 | Image recognition method and related device |
US11151792B2 (en) | 2019-04-26 | 2021-10-19 | Google Llc | System and method for creating persistent mappings in augmented reality |
US11163997B2 (en) | 2019-05-05 | 2021-11-02 | Google Llc | Methods and apparatus for venue based augmented reality |
US11244512B2 (en) | 2016-09-12 | 2022-02-08 | Intel Corporation | Hybrid rendering for a wearable display attached to a tethered computer |
US11551430B2 (en) * | 2020-02-26 | 2023-01-10 | Magic Leap, Inc. | Cross reality system with fast localization |
US11562542B2 (en) | 2019-12-09 | 2023-01-24 | Magic Leap, Inc. | Cross reality system with simplified programming of virtual content |
US11568605B2 (en) | 2019-10-15 | 2023-01-31 | Magic Leap, Inc. | Cross reality system with localization service |
US11632679B2 (en) | 2019-10-15 | 2023-04-18 | Magic Leap, Inc. | Cross reality system with wireless fingerprints |
US11789524B2 (en) | 2018-10-05 | 2023-10-17 | Magic Leap, Inc. | Rendering location specific virtual content in any location |
US11790619B2 (en) | 2020-02-13 | 2023-10-17 | Magic Leap, Inc. | Cross reality system with accurate shared maps |
US11830149B2 (en) | 2020-02-13 | 2023-11-28 | Magic Leap, Inc. | Cross reality system with prioritization of geolocation information for localization |
US11869158B2 (en) | 2019-11-12 | 2024-01-09 | Magic Leap, Inc. | Cross reality system with localization service and shared location-based content |
US11967020B2 (en) | 2020-02-13 | 2024-04-23 | Magic Leap, Inc. | Cross reality system with map processing using multi-resolution frame descriptors |
US11978159B2 (en) | 2018-08-13 | 2024-05-07 | Magic Leap, Inc. | Cross reality system |
Families Citing this family (1)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
EP4170533A4 (en) * | 2020-07-08 | 2023-07-26 | Huawei Technologies Co., Ltd. | High-precision map, high-precision map generating method, and usage method |
Citations (6)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US20100287178A1 (en) * | 2009-05-08 | 2010-11-11 | Google Inc. | Refining location estimates and reverse geocoding based on a user profile |
US20110064327A1 (en) * | 2008-02-01 | 2011-03-17 | Dagher Joseph C | Image Data Fusion Systems And Methods |
US20110161792A1 (en) * | 2009-12-31 | 2011-06-30 | Edward Florence | Producing interactive documents |
US20120084118A1 (en) * | 2010-09-30 | 2012-04-05 | International Business Machines Corporation | Sales predication for a new store based on on-site market survey data and high resolution geographical information |
US8965447B1 (en) * | 2010-08-24 | 2015-02-24 | Cellco Partnership | Location based network selection |
US20150314443A1 (en) * | 2014-04-30 | 2015-11-05 | Shenzhen Mercury Optoelectronics Research Institute | Visual-based obstacle detection method and apparatus for mobile robot |
Family Cites Families (13)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
JP4236372B2 (en) * | 2000-09-25 | 2009-03-11 | インターナショナル・ビジネス・マシーンズ・コーポレーション | Spatial information utilization system and server system |
JP4081360B2 (en) * | 2002-11-28 | 2008-04-23 | 株式会社日立製作所 | Spatial information provision system |
EP1767959A1 (en) * | 2005-09-23 | 2007-03-28 | Fortuna Electronic Corp. | Global positioning system and method |
WO2012090890A1 (en) * | 2010-12-27 | 2012-07-05 | 日本電気株式会社 | Information processing system, information processing method, and information processing program |
US20120299702A1 (en) * | 2011-05-26 | 2012-11-29 | Caterpillar Inc. | Hybrid positioning system |
CN102194007B (en) * | 2011-05-31 | 2014-12-10 | 中国电信股份有限公司 | System and method for acquiring mobile augmented reality information |
US9239849B2 (en) * | 2011-06-08 | 2016-01-19 | Qualcomm Incorporated | Mobile device access of location specific images from a remote database |
CN103959308B (en) * | 2011-08-31 | 2017-09-19 | Metaio有限公司 | The method that characteristics of image is matched with fixed reference feature |
WO2013126784A2 (en) * | 2012-02-23 | 2013-08-29 | Huston Charles D | System and method for creating an environment and for sharing a location based experience in an environment |
US9407837B2 (en) * | 2013-02-28 | 2016-08-02 | Google Inc. | Depth sensor using modulated light projector and image sensor with color and IR sensing |
US9323785B2 (en) * | 2013-03-06 | 2016-04-26 | Streamoid Technologies Private Limited | Method and system for mobile visual search using metadata and segmentation |
US20140323148A1 (en) * | 2013-04-30 | 2014-10-30 | Qualcomm Incorporated | Wide area localization from slam maps |
US20140357290A1 (en) * | 2013-05-31 | 2014-12-04 | Michael Grabner | Device localization using camera and wireless signal |
-
2015
- 2015-05-11 US US14/708,970 patent/US20160335275A1/en not_active Abandoned
-
2016
- 2016-05-05 KR KR1020177031682A patent/KR102149374B1/en active IP Right Grant
- 2016-05-05 EP EP16728134.4A patent/EP3295730A1/en not_active Withdrawn
- 2016-05-05 CN CN201680019347.8A patent/CN107438841A/en active Pending
- 2016-05-05 WO PCT/US2016/030956 patent/WO2016182846A1/en active Application Filing
- 2016-05-05 JP JP2017556927A patent/JP2018526698A/en active Pending
Patent Citations (6)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US20110064327A1 (en) * | 2008-02-01 | 2011-03-17 | Dagher Joseph C | Image Data Fusion Systems And Methods |
US20100287178A1 (en) * | 2009-05-08 | 2010-11-11 | Google Inc. | Refining location estimates and reverse geocoding based on a user profile |
US20110161792A1 (en) * | 2009-12-31 | 2011-06-30 | Edward Florence | Producing interactive documents |
US8965447B1 (en) * | 2010-08-24 | 2015-02-24 | Cellco Partnership | Location based network selection |
US20120084118A1 (en) * | 2010-09-30 | 2012-04-05 | International Business Machines Corporation | Sales predication for a new store based on on-site market survey data and high resolution geographical information |
US20150314443A1 (en) * | 2014-04-30 | 2015-11-05 | Shenzhen Mercury Optoelectronics Research Institute | Visual-based obstacle detection method and apparatus for mobile robot |
Cited By (43)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US10504291B2 (en) | 2014-11-16 | 2019-12-10 | Intel Corporation | Optimizing head mounted displays for augmented reality |
US9916002B2 (en) | 2014-11-16 | 2018-03-13 | Eonite Perception Inc. | Social applications for augmented reality technologies |
US9972137B2 (en) | 2014-11-16 | 2018-05-15 | Eonite Perception Inc. | Systems and methods for augmented reality preparation, processing, and application |
US10043319B2 (en) | 2014-11-16 | 2018-08-07 | Eonite Perception Inc. | Optimizing head mounted displays for augmented reality |
US10055892B2 (en) | 2014-11-16 | 2018-08-21 | Eonite Perception Inc. | Active region determination for head mounted displays |
US11468645B2 (en) | 2014-11-16 | 2022-10-11 | Intel Corporation | Optimizing head mounted displays for augmented reality |
US9754419B2 (en) | 2014-11-16 | 2017-09-05 | Eonite Perception Inc. | Systems and methods for augmented reality preparation, processing, and application |
US10832488B2 (en) | 2014-11-16 | 2020-11-10 | Intel Corporation | Optimizing head mounted displays for augmented reality |
US11017712B2 (en) | 2016-08-12 | 2021-05-25 | Intel Corporation | Optimized display image rendering |
US11210993B2 (en) | 2016-08-12 | 2021-12-28 | Intel Corporation | Optimized display image rendering |
US11721275B2 (en) | 2016-08-12 | 2023-08-08 | Intel Corporation | Optimized display image rendering |
US11514839B2 (en) | 2016-08-12 | 2022-11-29 | Intel Corporation | Optimized display image rendering |
US11244512B2 (en) | 2016-09-12 | 2022-02-08 | Intel Corporation | Hybrid rendering for a wearable display attached to a tethered computer |
US10346223B1 (en) * | 2016-11-23 | 2019-07-09 | Google Llc | Selective obfuscation of notifications |
US11288107B2 (en) | 2016-11-23 | 2022-03-29 | Google Llc | Selective obfuscation of notifications |
US10776187B2 (en) | 2016-11-23 | 2020-09-15 | Google Llc | Selective obfuscation of notifications |
AU2018252237C1 (en) * | 2017-04-10 | 2021-01-14 | Blue Vision Labs UK Limited | Co-localisation |
CN110462420A (en) * | 2017-04-10 | 2019-11-15 | 蓝色视觉实验室英国有限公司 | Alignment by union |
US10798526B2 (en) | 2017-04-10 | 2020-10-06 | Blue Vision Labs UK Limited | Systems and methods for co-localization of multiple devices |
US11503428B2 (en) | 2017-04-10 | 2022-11-15 | Blue Vision Labs UK Limited | Systems and methods for co-localization of multiple devices |
WO2018189529A1 (en) * | 2017-04-10 | 2018-10-18 | Blue Vision Labs UK Limited | Co-localisation |
AU2018252237B2 (en) * | 2017-04-10 | 2020-08-06 | Blue Vision Labs UK Limited | Co-localisation |
US20190087550A1 (en) * | 2017-09-15 | 2019-03-21 | Insignary Inc. | Method and system for identifying open-source software package based on binary files |
US10642965B2 (en) * | 2017-09-15 | 2020-05-05 | Insignary Inc. | Method and system for identifying open-source software package based on binary files |
CN109579765A (en) * | 2017-09-29 | 2019-04-05 | 上海时元互联网科技有限公司 | Three-dimensional point cloud data matching method and system based on servo motor and controller |
US11100712B2 (en) | 2017-11-22 | 2021-08-24 | Google Llc | Positional recognition for augmented reality environment |
US10692289B2 (en) | 2017-11-22 | 2020-06-23 | Google Llc | Positional recognition for augmented reality environment |
US11978159B2 (en) | 2018-08-13 | 2024-05-07 | Magic Leap, Inc. | Cross reality system |
US11789524B2 (en) | 2018-10-05 | 2023-10-17 | Magic Leap, Inc. | Rendering location specific virtual content in any location |
US11151792B2 (en) | 2019-04-26 | 2021-10-19 | Google Llc | System and method for creating persistent mappings in augmented reality |
US11163997B2 (en) | 2019-05-05 | 2021-11-02 | Google Llc | Methods and apparatus for venue based augmented reality |
US11568605B2 (en) | 2019-10-15 | 2023-01-31 | Magic Leap, Inc. | Cross reality system with localization service |
US11632679B2 (en) | 2019-10-15 | 2023-04-18 | Magic Leap, Inc. | Cross reality system with wireless fingerprints |
US11869158B2 (en) | 2019-11-12 | 2024-01-09 | Magic Leap, Inc. | Cross reality system with localization service and shared location-based content |
US11562542B2 (en) | 2019-12-09 | 2023-01-24 | Magic Leap, Inc. | Cross reality system with simplified programming of virtual content |
US11748963B2 (en) | 2019-12-09 | 2023-09-05 | Magic Leap, Inc. | Cross reality system with simplified programming of virtual content |
CN113396410A (en) * | 2020-01-14 | 2021-09-14 | 华为技术有限公司 | Image identification method and related equipment |
WO2021142600A1 (en) * | 2020-01-14 | 2021-07-22 | 华为技术有限公司 | Image recognition method and related device |
US11830149B2 (en) | 2020-02-13 | 2023-11-28 | Magic Leap, Inc. | Cross reality system with prioritization of geolocation information for localization |
US11790619B2 (en) | 2020-02-13 | 2023-10-17 | Magic Leap, Inc. | Cross reality system with accurate shared maps |
US11967020B2 (en) | 2020-02-13 | 2024-04-23 | Magic Leap, Inc. | Cross reality system with map processing using multi-resolution frame descriptors |
EP4111425A4 (en) * | 2020-02-26 | 2024-03-13 | Magic Leap Inc | Cross reality system with fast localization |
US11551430B2 (en) * | 2020-02-26 | 2023-01-10 | Magic Leap, Inc. | Cross reality system with fast localization |
Also Published As
Publication number | Publication date |
---|---|
JP2018526698A (en) | 2018-09-13 |
CN107438841A (en) | 2017-12-05 |
KR20180005168A (en) | 2018-01-15 |
WO2016182846A1 (en) | 2016-11-17 |
KR102149374B1 (en) | 2020-08-31 |
EP3295730A1 (en) | 2018-03-21 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
US9811734B2 (en) | Crowd-sourced creation and updating of area description file for mobile device localization | |
EP3295129B1 (en) | Privacy filtering of area description file prior to upload | |
US20160335275A1 (en) | Privacy-sensitive query for localization area description file | |
US11195049B2 (en) | Electronic device localization based on imagery | |
US11900547B2 (en) | Cross reality system for large scale environments | |
US20230222731A1 (en) | Cross reality system with map processing using multi-resolution frame descriptors | |
JP7355821B2 (en) | System and method for presenting digital assets within a synthetic environment via loosely coupled relocalization and asset management services | |
US11532124B2 (en) | Cross reality system with WIFI/GPS based map merge | |
EP4104145A1 (en) | Cross reality system with prioritization of geolocation information for localization | |
CN105023266A (en) | Method and device for implementing augmented reality (AR) and terminal device | |
WO2021173850A1 (en) | Cross reality system for large scale environment reconstruction |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
AS | Assignment |
Owner name: GOOGLE INC., CALIFORNIAFree format text: ASSIGNMENT OF ASSIGNORS INTEREST;ASSIGNORS:WILLIAMS, BRIAN PATRICK;TU, LAURENT;NERURKAR, ESHA;AND OTHERS;SIGNING DATES FROM 20150630 TO 20150701;REEL/FRAME:035979/0517 |
|
AS | Assignment |
Owner name: GOOGLE LLC, CALIFORNIAFree format text: CHANGE OF NAME;ASSIGNOR:GOOGLE INC.;REEL/FRAME:044129/0001Effective date: 20170929 |
|
STPP | Information on status: patent application and granting procedure in general |
Free format text: FINAL REJECTION MAILED |
|
STCV | Information on status: appeal procedure |
Free format text: NOTICE OF APPEAL FILED |
|
STCV | Information on status: appeal procedure |
Free format text: APPEAL BRIEF (OR SUPPLEMENTAL BRIEF) ENTERED AND FORWARDED TO EXAMINER |
|
STPP | Information on status: patent application and granting procedure in general |
Free format text: NON FINAL ACTION MAILED |
|
STPP | Information on status: patent application and granting procedure in general |
Free format text: RESPONSE TO NON-FINAL OFFICE ACTION ENTERED AND FORWARDED TO EXAMINER |
|
STPP | Information on status: patent application and granting procedure in general |
Free format text: FINAL REJECTION MAILED |
|
STCB | Information on status: application discontinuation |
Free format text: ABANDONED -- FAILURE TO RESPOND TO AN OFFICE ACTION |