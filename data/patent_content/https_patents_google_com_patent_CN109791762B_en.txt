CN109791762B - Noise Reduction for Voice Interface Devices - Google Patents
Noise Reduction for Voice Interface Devices Download PDFInfo
- Publication number
- CN109791762B CN109791762B CN201780058659.4A CN201780058659A CN109791762B CN 109791762 B CN109791762 B CN 109791762B CN 201780058659 A CN201780058659 A CN 201780058659A CN 109791762 B CN109791762 B CN 109791762B
- Authority
- CN
- China
- Prior art keywords
- electronic device
- voice
- user
- implementations
- availability
- Prior art date
- Legal status (The legal status is an assumption and is not a legal conclusion. Google has not performed a legal analysis and makes no representation as to the accuracy of the status listed.)
- Active
Links
Classifications
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L21/00—Processing of the speech or voice signal to produce another audible or non-audible signal, e.g. visual or tactile, in order to modify its quality or its intelligibility
- G10L21/02—Speech enhancement, e.g. noise reduction or echo cancellation
- G10L21/0208—Noise filtering
- G10L21/0216—Noise filtering characterised by the method used for estimating noise
- G10L21/0232—Processing in the frequency domain
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L15/00—Speech recognition
- G10L15/20—Speech recognition techniques specially adapted for robustness in adverse environments, e.g. in noise, of stress induced speech
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/60—Information retrieval; Database structures therefor; File system structures therefor of audio data
- G06F16/63—Querying
- G06F16/632—Query formulation
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L15/00—Speech recognition
- G10L15/08—Speech classification or search
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L15/00—Speech recognition
- G10L15/22—Procedures used during a speech recognition process, e.g. man-machine dialogue
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L15/00—Speech recognition
- G10L15/28—Constructional details of speech recognition systems
- G10L15/30—Distributed recognition, e.g. in client-server systems, for mobile phones or network applications
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L25/00—Speech or voice analysis techniques not restricted to a single one of groups G10L15/00 - G10L21/00
- G10L25/48—Speech or voice analysis techniques not restricted to a single one of groups G10L15/00 - G10L21/00 specially adapted for particular use
- G10L25/51—Speech or voice analysis techniques not restricted to a single one of groups G10L15/00 - G10L21/00 specially adapted for particular use for comparison or discrimination
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L25/00—Speech or voice analysis techniques not restricted to a single one of groups G10L15/00 - G10L21/00
- G10L25/78—Detection of presence or absence of voice signals
- G10L25/84—Detection of presence or absence of voice signals for discriminating voice from noise
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L15/00—Speech recognition
- G10L15/08—Speech classification or search
- G10L2015/088—Word spotting
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L15/00—Speech recognition
- G10L15/22—Procedures used during a speech recognition process, e.g. man-machine dialogue
- G10L2015/223—Execution procedure of a spoken command
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L21/00—Processing of the speech or voice signal to produce another audible or non-audible signal, e.g. visual or tactile, in order to modify its quality or its intelligibility
- G10L21/02—Speech enhancement, e.g. noise reduction or echo cancellation
- G10L21/0208—Noise filtering
- G10L21/0216—Noise filtering characterised by the method used for estimating noise
- G10L2021/02161—Number of inputs available containing the signal or the noise to be suppressed
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L25/00—Speech or voice analysis techniques not restricted to a single one of groups G10L15/00 - G10L21/00
- G10L25/78—Detection of presence or absence of voice signals
- G10L2025/783—Detection of presence or absence of voice signals based on threshold decision
Abstract
A method of an electronic device having one or more microphones and a speaker, the electronic device configured to wake up by any of a plurality of availabilities including voice-based availability (afordance), comprising determining a noise profile of an environment surrounding the electronic device; determining whether the noise profile interferes with the availability of speech based sounds; and in accordance with the determination that the noise distribution interferes with the voice-based availability, presenting a prompt to the user to wake up the electronic device using the availability of the plurality of availabilities other than the voice-based availability.
Description
Technical Field
The disclosed implementations relate generally to voice interfaces and related devices, including but not limited to methods and systems for noise reduction of voice interface devices.
Background
Microphone-integrated electronic devices have been widely used to collect voice input from a user and implement voice activated functions based on the voice input. For example, many prior art mobile devices include voice assistant functionality (e.g., siri, google assistant) configured to initiate telephone calls, conduct restaurant searches, begin navigating on a map, create calendar events, add posts to a social network, identify songs, and accomplish many other tasks using voice input.
A location (e.g., a room or space within a home) may include a plurality of devices including a voice assistant system and one or more users of the devices. Because the device is particularly configured to be able to access and present user-specific information, it is desirable for the voice assistant device to be able to moderately manage multiple users and to be able to provide user-specific information to the appropriate user. It is also desirable to have a dominant among the voice assistant devices that is responsible for responding to the user's voice input in order to reduce user confusion. Furthermore, it is desirable that the voice assistant device includes noise reduction measures in case the voice assistant device is in a noisy location.
Disclosure of Invention
Accordingly, there is a need for an electronic device and/or voice assistant server system with a voice assistant system that incorporates methods and systems for handling multiple users, for multi-device coordination to determine dominant, and for noise reduction. The device and/or server system may be configured to identify a speaker of the speech input based on the comparison with the speech model and personalize a response to the identified speaker. The device and/or server system may be further configured to negotiate a leader (leader) among the plurality of devices to respond to the speaker. The device and/or the server system may be further configured to detect whether the environment surrounding the device is sufficiently noisy, wherein an alternative method for hotword speech input to wake up the device is desirable.
According to some implementations, a method includes, at an electronic device having one or more microphones, a speaker, one or more processors, and a memory storing one or more programs for execution by the one or more processors: receiving a first freeform speech input; comparing the first speech input to a set of speech models associated with a plurality of users associated with the electronic device, wherein the speech models are trained for the electronic device; determining, based on the comparison, that the first speech input corresponds to a first user of the plurality of users; and presenting a response in accordance with the determination.
In some implementations, an electronic device includes one or more microphones, a speaker, one or more processors; and a memory storing one or more programs for execution by the one or more processors. The one or more programs include instructions for: receiving a first freeform speech input; comparing the first speech input to a set of speech models associated with a plurality of users associated with the electronic device, wherein the speech models are trained on the electronic device; determining, based on the comparison, that the first speech input corresponds to a first user of the plurality of users; and presenting a response in accordance with the determination.
In some implementations, a non-transitory computer readable storage medium stores one or more programs. The one or more programs include instructions, which when executed by an electronic device with one or more microphones, a speaker, and one or more processors, cause the electronic device to perform operations comprising: receiving a first freeform speech input; comparing the first speech input to a set of speech models associated with a plurality of users associated with the electronic device, wherein the speech models are trained on the electronic device; determining, based on the comparison, that the first speech input corresponds to a first user of the plurality of users; and presenting a response in accordance with the determination.
According to some implementations, a method includes, at a first electronic device of a plurality of electronic devices, each electronic device of the plurality of electronic devices including one or more microphones, a speaker, one or more processors, and a memory storing one or more programs for execution by the one or more processors: detecting a voice input, determining a quality score for the detected voice input, communicating the quality score to other ones of the plurality of electronic devices, receiving a quality score generated by the other ones of the plurality of electronic devices for detecting the voice input by the other devices, outputting an audible and/or visual response to the detected voice input based on a determination that the quality score generated by the first electronic device is highest among the generated quality scores for the voice input and the received quality scores, wherein the other ones of the plurality of electronic devices forgo outputting an audible response to the detected voice input, and forgo outputting a response to the detected voice input based on a determination that the quality score generated by the first electronic device is not highest among the quality scores for the voice input generated by the plurality of electronic devices.
According to some implementations, a first electronic device of the plurality of electronic devices includes, and each electronic device of the plurality of electronic devices includes, one or more microphones, a speaker, one or more processors, and a memory storing one or more programs for execution by the one or more processors. The one or more programs include instructions for: detecting a voice input, determining a quality score for the detected voice input, communicating the quality score to other ones of the plurality of electronic devices, receiving a quality score generated by other ones of the plurality of electronic devices for detecting the voice input by the other devices, outputting an audible and/or visual response to the detected voice input based on a determination that the quality score generated by the first electronic device is highest among the generated quality scores and the quality scores of the received voice inputs, wherein the other ones of the plurality of electronic devices forgo outputting an audible response to the detected voice input, and forgo outputting a response to the detected voice input based on a determination that the quality score generated by the first electronic device is not highest among the quality scores for the voice inputs generated by the plurality of electronic devices.
According to some implementations, a non-transitory computer readable storage medium stores one or more programs. The one or more programs include instructions, which when executed by a first electronic device of a plurality of electronic devices, each of the plurality of electronic devices comprises one or more microphones, a speaker, and one or more processors, cause the electronic device to perform operations comprising: detecting a voice input, determining a quality score for the detected voice input, communicating the quality score to other ones of the plurality of electronic devices, receiving a quality score generated by other ones of the plurality of electronic devices for detecting the voice input by the other devices, outputting an audible and/or visual response to the detected voice input based on a determination that the quality score generated by the first electronic device is highest among the generated quality scores and the quality scores of the received voice inputs, wherein the other ones of the plurality of electronic devices forgo outputting an audible response to the detected voice input, and forgo outputting a response to the detected voice input based on a determination that the quality score generated by the first electronic device is not highest among the quality scores for the voice inputs generated by the plurality of electronic devices.
In some implementations, a method includes, at an electronic device having one or more microphones, a speaker, one or more processors, and a memory storing one or more programs for execution by the one or more processors, the electronic device configured to wake up by any of a plurality of availabilities including a voice-based availability: determining a noise distribution of an environment surrounding the electronic device; determining whether the noise profile interferes with the voice-based availability; and presenting a prompt to a user to wake up the electronic device using availability of the plurality of availability other than the speech-based availability in accordance with the determination that the noise distribution interferes with the speech-based availability.
In some implementations, an electronic device includes one or more microphones, a speaker, one or more processors, and a memory storing one or more programs to be executed by the one or more processors. The electronic device is configured to wake up by any of a plurality of availabilities including a voice-based availability. The one or more programs include instructions for: determining a noise distribution of an environment surrounding the electronic device; determining whether the noise profile interferes with the voice-based availability; and presenting a prompt to a user to wake up the electronic device using availability of the plurality of availability other than the speech-based availability in accordance with the determination that the noise distribution interferes with the speech-based availability.
A non-transitory computer readable storage medium storing one or more programs. The one or more programs include instructions that, when executed by an electronic device, cause the electronic device to perform operations comprising one or more microphones, a speaker, and one or more processors, the electronic device configured to wake up by any of a plurality of affordances including voice-based availability. Determining whether the noise profile interferes with the voice-based availability; and presenting a prompt to a user to wake up the electronic device using availability of the plurality of availability other than the speech-based availability in accordance with the determination that the noise distribution interferes with the speech-based availability.
Drawings
For a better understanding of each of the described implementations, reference should be made to the description of the implementations below in conjunction with the following drawings, in which like reference numerals designate corresponding components throughout the figures.
FIG. 1 is an example operating environment according to some implementations.
Fig. 2A-2B are block diagrams illustrating an example electronic device that is applied to collect user voice commands in an operating environment, according to some implementations.
FIG. 3 is a block diagram illustrating an example server in a server system of an operating environment, according to some implementations. An example server is one of the voice assistant servers.
Fig. 4A-4B are diagrams illustrating example device leader negotiations, according to some implementations.
FIG. 5 is a flow chart illustrating a method of responding to a user's voice input according to some implementations.
Fig. 6 is a flow diagram illustrating a method of negotiating a device leader among a plurality of voice interface devices according to some implementations.
Fig. 7 is a flow chart illustrating a method of mitigating noise around a speech interface device, according to some implementations.
Fig. 8A and 8B are front and rear views of a voice activated electronic device according to some implementations.
Fig. 8C is a top view of a voice activated electronic device according to some implementations, and fig. 8D shows six visual patterns displayed by an array of full color LEDs for indicating voice processing status according to some implementations.
Like reference numerals refer to corresponding components throughout the several views of the drawings.
Detailed Description
While the digital revolution has provided many benefits from publicly sharing information to the global community's perception, emerging new technologies often cause confusion, doubt, and fear between consumers, preventing consumers from benefiting from the technology. Electronic devices are conveniently used as a voice interface to receive voice input from a user and to initiate voice activated functions, thereby providing a hands-free and a look-free solution to approach existing and emerging technologies. In particular, voice input received at the electronic device can carry instructions and information even if the user's line of sight is blocked and his hand is full. To achieve a hands-free and view-free experience, voice-activated electronic devices continually or only upon triggering monitor the environment (i.e., continually process audio signals collected from the environment). On the other hand, the user identity is linked to the user's voice and the language used by the user. To protect user identity, these voice-activated electronic devices are typically used in non-public places (e.g., home and car) in protected, controlled, and private spaces.
According to some implementations, a voice-activated electronic device identifies a speaker of a voice input as one of one or more associated or registered users. The response to the speaker output by the electronic device is personalized to the identified speaker. The speaker is identified by comparing its voice input to a set of trained voice models or voice fingerprints. In some implementations, the words and phrases used by the speaker to train the speech model are not necessarily predefined, and there is no need to match words later uttered by the speaker in order for the electronic device to recognize the speaker.
Further, according to some implementations, multiple voice-activated electronic devices negotiate a dominant among themselves in response to voice input from a user. The negotiation may be based on which device best detects the voice input, or which device is closest to the user. In addition, if the voice input is particularly relevant to one of the devices, that device may be selected to respond even though it would not have been selected to respond; in determining which device will be the dominant, consider the relevance of the commands included in the speech input to the particular device (e.g., "stop music" shall mean a device playing music) and the status of the device receiving the speech input (e.g., "screen on" and "screen off").
Furthermore, according to some implementations, the voice-activated device determines whether ambient noise is sufficient to interfere with detection of a spoken hotword (in some implementations, "hotword" is a user-defined or predefined word or phrase for "waking up" or triggering the voice-activated device to focus on/respond to a spoken command issued after the hotword) or other spoken voice input for waking up the device. If the noise is sufficiently disturbing, the device will indicate this and give a prompt to the user to use an alternative way of waking up the device or other noise reduction measures.
Voice assistant operating environment
FIG. 1 is an example operating environment according to some implementations. The operating environment 100 includes one or more voice-activated electronic devices 190 (e.g., electronic devices 190-1 through 190-N). The one or more voice-activated electronic devices 190 may be located in one or more locations (e.g., all in a room or space of a building, throughout multiple spaces within a building, or throughout multiple buildings (e.g., one in a house, and one in a user's car)). The environment 100 optionally includes one or more devices (e.g., media devices, smart home devices) (not shown) in communication with the voice-activated electronic device 190.
The electronic device 190 is communicatively coupled to the voice assistant server 112 of the voice assistant service through the communication network 110. One or more of the electronic devices 190 may be communicatively coupled to the local network 104, and the local network 104 may be communicatively coupled to the communication network 110 (e.g., the electronic devices 190-1 and 190-2). In some implementations, the local network 104 is a local area network implemented at a network interface (e.g., a router). Electronic devices 190 communicatively coupled to the local network 104 may also communicate with each other through the local network 104.
Optionally, one or more of the electronic devices 190 are communicatively coupled to the communication network 110 and not on the local network 104 (e.g., the electronic devices 190-N). For example, these electronic devices 190 are not on a Wi-Fi network corresponding to the local network 104, but are connected to the communication network 110 through a cellular connection. In some implementations, communication between the electronic device 190 on the local network 104 and the electronic device 190 not on the local network 104 is accomplished through the voice assistant server 112. The electronic device 190 is registered in the device registry 118 of the voice assistant service and thus is known to the voice assistant server 112.
The environment 100 also includes one or more content hosts 114. Content host 114 may be a remote content source from which content is streamed or otherwise obtained in accordance with a user voice request. Content host computer 114 may be an information source from which voice assistant server 112 retrieves information in accordance with a user's voice request.
In some implementations, the electronic device 190 can be associated with multiple users in the user domain having respective user accounts. Any of these users, as well as device independent users, may generate voice input to electronic device 190. The electronic device 190 receives these voice inputs from these users 102-1 through 102-M (including both related and non-related users), and the electronic device 190 and/or the voice assistant server 112 continue to identify the user producing the voice input for the voice input. Through user recognition, the response to that speech input can be personalized to the recognized user.
In some implementations, the environment 100 includes a plurality of electronic devices 190 (e.g., devices 190-1 through 190-N). The device 190 extends throughout the environment 100 (e.g., within a room or space in a building, throughout the building, some within a building, and some not within a building). When the user 102 makes voice input, input is received or not received at each of these devices 190 (e.g., if the devices are too far from the user). The device receiving the input receives the input at varying degrees of quality; the quality of a sample of speech input at the device is based on a number of factors, including, but not limited to, the distance of the user from the device and noise surrounding the device. The multiple devices 190 negotiate a dominant among themselves based on the quality of the samples of speech input in response to the user and receive further speech input from the user 102.
In some implementations, the electronic device 190 determines a level of noise surrounding the device and determines whether the determined level of noise is high enough to interfere with recognizing hot words in the voice input and thus interfere with waking up the device by voice or interfering with recognizing the voice request. If the level of noise is determined to be high enough to be disturbing, the electronic device 190 indicates to the user that the level of noise is disturbing and gives a prompt to the user that the user should wake up the electronic device 190 (e.g., activate a button) in another way. The indication of the level of interference noise and the prompt to wake up the device using another means (e.g., illuminate a wake-up button) may be done in the same presentation.
In some implementations, one or more media devices are provided in the operating environment 100 to provide media content, news, and/or other information to one or more occupants. In some implementations, content provided by the media device is stored in a local content source, streamed from a remote content source (e.g., content host 114), or generated locally (e.g., by a local text-to-speech processor, reading customized news bulletins, emails, text, local weather reports, etc. to one or more occupants of the operating environment). In some implementations, the media device includes a device that directly outputs media content to an audience (e.g., one or more A user), and a cast (cast) device networked to stream media content to the media output device. Examples of media output devices include, but are not limited to, television (TV) display devices and music players. Examples of presentation devices include, but are not limited to, set Top Boxes (STBs), DVD players, TV boxes, and Chromecast such as Google TM Streaming media device of the streaming media device.
In some implementations, the media device includes one or more voice-activated electronic devices 190 that receive, process, and respond to voice commands of the occupant. In some implementations, the voice-activated electronic device 190 responds to the voice command by: generate and provide a verbal response to the voice command (e.g., speak the current time in response to the question "what time now"); streaming media content requested by a user (e.g., "play beacon songs"); reading news stories or reading daily news bulletins prepared for the user; playing media items stored on a personal assistant device or a local network; changing state or operating one or more other connected devices within the operating environment 100 (e.g., turning lights on/off, instrumentation or media devices, locking/unlocking locks, windowing, etc.); or issue a corresponding request to a server via network 110.
In some implementations, one or more electronic devices 190 are placed in the operating environment 100 to collect audio input for initiating various functions including a media play function of a media device. In some implementations, these voice-activated electronic devices 190 (e.g., devices 190-1 through 190-N) are placed in proximity to the media device, such as in the same room as the presentation device and the media output device. Alternatively, in some implementations, the voice-activated electronic device 190 is placed in a room with one or more smart home devices but without any media devices. Alternatively, in some implementations, the voice activated electronic device 190 is placed in a location where there is no networked electronic device. Further, in some implementations, a room or space in a building may have a plurality of electronic devices 190.
In some implementations, the electronic device 190 includes at least one or more microphones, a speaker, a processor, and a memory storing at least one program for execution by the processor. The speaker is configured to allow the electronic device 190 to transmit voice messages and other audio (e.g., audible tones) to locations where the electronic device 190 is located in the operating environment 100, broadcasting music, reporting the status of audio input processing, talking to a user of the electronic device 190, or giving instructions thereto. Instead of voice messages, visual signals can also be used to provide feedback to the user of the electronic device 190 regarding the status of the audio input process. When the electronic device 190 is a mobile device (e.g., a mobile phone or tablet computer), its display screen is configured to display notifications regarding the status of the audio input process.
In some implementations, the electronic device 190 is a voice interface device that is networked with the aid of the voice assistant server 112 and/or optionally a cloud-cast service server (not shown) to provide voice recognition functionality. For example, electronic device 190 includes a smart speaker that provides music to a user and allows for hands-free and hands-free access to voice Assistant services (e.g., google assant). Optionally, the electronic device 190 is one of the following: a desktop or laptop computer, a tablet computer, a mobile phone including a microphone, a presentation device including a microphone and optional speakers, an audio system (e.g., a stereo system, a speaker system, a portable speaker) including a microphone and speakers, a television including a microphone and speakers, and a user interface system in an automobile including a microphone and speakers and optional display. Alternatively, the electronic device 190 is a simple and low cost voice interface device. In general, electronic device 190 may be any device capable of networking and including a microphone, a speaker, and programs, modules, and data for interacting with a voice assistant service. Assuming a simplified and low cost electronic device 190, the electronic device 190 includes an array of Light Emitting Diodes (LEDs) instead of a full screen display, and a visual pattern is displayed on the LEDs to indicate the status of the audio input processing. In some implementations, the LEDs are full color LEDs, and the color of the LEDs may be employed as part of a visual pattern to be displayed on the LEDs. A number of examples of using LEDs to display visual patterns for conveying information or device status are described in U.S. provisional patent application No.62/336,566, entitled "LED Design Language for Visual Affordance of Voice User Interfaces," filed 5/13 a/2016, the entire contents of which are incorporated herein by reference. In some implementations, a visual pattern indicating a status of a speech processing operation is displayed using a feature image displayed on a common display associated with an electronic device that is performing the speech processing operation.
In some implementations, LEDs or other visual displays are used to communicate the overall speech processing state of the plurality of participating electronic devices. For example, in an operating environment in which there are multiple voice processing or voice interface devices (e.g., multiple electronic devices 400 as shown in fig. 4A of the '566 application and replicated in fig. 8A below; multiple electronic devices 190), a set of colored LEDs associated with each electronic device (e.g., LEDs 404 as shown in fig. 4A of the' 566 application) can be used to communicate which of the electronic devices is listening to a user, and which of the listening devices is the dominant (where a "dominant" device typically takes over in response to a verbal request issued by the user).
More generally, the' 566 application describes (see, e.g., paragraphs [0087] - [0100 ]) an "LED design language" for visually indicating various speech processing states of an electronic device, such as "hotword detection state and listening state", "thought mode or work mode", and "response mode or talk mode", using a set of LEDs. In some implementations, the unique states of the speech processing operations described herein are represented using groups of LEDs according to one or more aspects of the "LED design language" of the' 566 application. These visual indicators can also be combined with one or more audible indicators generated by the electronic device that is performing the speech processing operation. The resulting audio and/or video indicators will enable a user in a speech interaction environment to understand the status of the various speech processing electronic devices in the environment and effectively interact with those devices in a natural, intuitive manner.
When voice input from the electronic device 190 is used to control the media output device via the presentation device, the electronic device 190 effectively enables a new level of control of the presentation-enabled media device. In a specific example, the electronic device 190 includes a recreational entertainment speaker with far-field voice access and serves as a voice interface device for voice assistant services. The electronic device 190 can be placed in any area of the operating environment 100. When multiple electronic devices 190 are distributed in multiple rooms, they become a presentation audio receiver that is synchronized to provide voice input from all of these rooms.
Specifically, in some implementations, the electronic device 190 includes a Wi-Fi speaker with a microphone connected to a voice-activated voice Assistant service (e.g., google Assistant). The user can issue a media play request via the microphone of the electronic device 190 and ask the voice assistant service to play the media content on the electronic device 190 itself or on another connected media output device. For example, a user can issue a media play request by speaking "good Google to a Wi-Fi speaker, playing cat video on living room television". The voice assistant service then fulfills the media play request by: the requested media content is played on the requested device using a default or designated media application.
In some implementations, the user can issue a voice request via a microphone of the electronic device 190 regarding media content that has been played or is being played on the display device (e.g., the user can query for information regarding the media content, purchase the media content through an online store, or compose and post social posts regarding the media content).
In some implementations, the user may want to conduct a current media session with one or more of the electronic devices 190 and be able to request such services from one or more of the electronic devices 190 as the user passes through the premises. This requires a voice assistant service to transfer the current media session from the first presentation device to a second presentation device that is not directly connected to the first presentation device or is not aware of the presence of the first presentation device. After the media content transfer, a second output device coupled to the second presentation device continues to play the media content previously played by the first output device coupled to the first presentation device from the exact point within the music track or video clip, wherein playing the media content on the first output device is abandoned. In some implementations, the electronic device 190 that receives the request to transfer the media session can satisfy the request. In some implementations, the electronic device 190 that receives the request to transfer the media session relays the request to another device or system (e.g., hub device, voice assistant server 112) for processing.
Further, in some implementations, a user may issue a request for information or for performing an action or operation via a microphone of electronic device 190. The requested information may be private (e.g., user's email, user's calendar event, user's flight information, etc.), non-private (e.g., sports score, news stories, etc.), or in between (e.g., user preferred team or sports score, news stories from user preferred sources, etc.). The requested information or actions/operations may involve accessing personal information (e.g., purchasing digital media items, purchasing physical merchandise using payment information provided by the user). The electronic device 190 responds to the request with a voice message response to the user, where the response may include, for example, a request for additional information to fulfill the request, a confirmation that the request has been fulfilled, a notification that the request cannot be fulfilled, and so forth.
In some implementations, operating environment 100 may include one or more smart home devices (not shown) in addition to voice-activated electronic devices 190 and media devices (e.g., output devices and presentation devices). The integrated smart home devices include intelligent, multi-inductive, networked devices seamlessly integrated with each other and/or with a central server or cloud computing system in a smart home network to provide a variety of useful smart home functions. In some implementations, the smart home device is disposed at the same location of the operating environment 100 as the presentation device and/or the output device, and thus is located near or at a known distance relative to the presentation device or the output device.
Smart home devices in the operating environment 100 may include, but are not limited to, one or more intelligent, multi-sensing, networked thermostats; one or more intelligent, networked multi-sensing hazard detectors; one or more intelligent, multi-sensing, networked entryway interface devices (hereinafter "smart doorbell" and "smart door lock"); one or more intelligent, multi-sensing, networked alarm systems; one or more intelligent, multi-sensing, networked camera systems, and one or more intelligent, multi-sensing, networked wall switches; and one or more intelligent, multi-inductive, networked power outlets. In some implementations, the smart home devices in the operating environment 100 of fig. 1 include a plurality of intelligent, multi-sensing, networked devices (hereinafter "smart appliances") such as refrigerators, stoves, ovens, televisions, washing machines, dryers, lights, stereos, intercom systems, garage door openers, floor fans, ceiling fans, wall air conditioners, pool heaters, irrigation systems, security systems, space heaters, window AC units, motorized vents, and the like. In some implementations, any of these smart home device types can be equipped with a microphone and one or more of the voice processing capabilities described herein in order to respond, in whole or in part, to voice requests from an occupant or user.
In some implementations, each of the presentation device and the voice-activated electronic device 190 is capable of data communication with and is capable of sharing information with other presentation devices, voice-activated electronic devices 190, smart home devices, central servers or cloud computing systems, and/or other devices (e.g., client devices) that are networked. Data communications may be performed using any of a variety of custom or standard wireless protocols (e.g., IEEE 802.15.4, wi-Fi, zigBee, 6LoWPAN, thread, Z-Wave, bluetooth Smart, ISA 100.11a, wirelessHART, miWi, etc.) and/or any of a variety of custom or standard wired protocols (e.g., ethernet, homePlug, etc.) or any other suitable communication protocol (including communication protocols not yet developed at the date of filing of this document).
The presentation device, electronic device 190, and smart home device may communicate with a server system (also referred to herein as a central server system and/or cloud computing system) via a communication network (e.g., the internet) 110. Alternatively, the server system may be associated with a manufacturer, a supporting entity, or a service provider associated with the presentation device and media content displayed to the user. Thus, the server system includes a voice assistant server 112 that processes audio input collected by voice-activated electronic devices 190, one or more content hosts 114 that provide displayed media content, a cloud services server that creates virtual user domains based on distributed device terminals, and a device registry 118 that maintains records of the distributed device terminals in the virtual user environment. Examples of distributed device terminals include, but are not limited to, presentation devices, media output devices, electronic devices 190, and smart home devices. In some implementations, these distributed device terminals are linked to user accounts in the virtual user domain (e.g., google user accounts). It should be apparent that the processing of the audio input collected by the electronic device 190 can be performed locally at the electronic device 190, at the voice assistant server 112, at another smart home device (e.g., a hub device), or some combination of all or a subset of the above.
It will be apparent that in some implementations, the electronic device 190 is also functioning in an environment without a smart home device. For example, even without a smart home device, the electronic device 190 can be responsive to user requests for information or actions performed, and/or requests to initiate or control various media play functions. The electronic device 190 can also function in a wide variety of environments including, but not limited to, vehicle, marine, commercial, or manufacturing environments.
In some implementations, the electronic device 190 is "awakened" by voice input including a hotword (also referred to as a "wake word") (e.g., to activate an interface for a voice assistant service on the electronic device 190 to place the electronic device 190 in a state in which the electronic device 190 is ready to receive voice requests for the voice assistant service. In some implementations, the electronic device 190 needs to wake up if the electronic device 190 has been idle for at least a predetermined amount of time (e.g., 5 minutes) with respect to receiving voice input; the predetermined amount of time corresponds to the amount of idle time allowed before the voice interface session or dialog times out. The hotword may be a word or phrase, and may be pre-default and/or may be customized by the user (e.g., the user may set a nickname for a particular electronic device 190 as the hotword of the device). In some implementations, there may be multiple hotwords that can wake up the electronic device 190. The user may speak the hotword, wait for an acknowledgement response from electronic device 190 (e.g., electronic device 190 outputs a greeting), and then make a first voice request. Alternatively, the user may combine the hotword and the first voice request in one voice input (e.g., the voice input includes a voice request following the hotword).
In some implementations, the speech input spoken by the user into the electronic device 190 may generally be free form or natural language speech. That is, the voice input need not be strictly limited to a predefined set of words and phrases within a predetermined syntax, except perhaps some special cases (e.g., the user needs to speak a hot word first to wake the device).
In some implementations, in addition to speaking the hotword to the electronic device 190, the electronic device 190 includes one or more additional ways or affordances to wake up the device. The manner or availability of the accessory may include, for example, activating a predefined button or touch sensor (e.g., a touch sensitive array) on the electronic device 190.
In some implementations, the voice-activated electronic device 190 interacts with a presentation device, client device, or server system of the operating environment 100, according to some implementations. The voice activated electronic device 190 is configured to receive audio input from an environment proximate to the voice activated electronic device 190. Optionally, the electronic device 190 stores the audio input and processes the audio input at least partially locally. Optionally, the electronic device 190 communicates the received audio input or a portion of the processed audio input to the voice assistant server 112 via the communication network 110 for further processing. The presentation device is configured to obtain media content or internet content from one or more content hosts 114 for display on an output device coupled to the presentation device. In some implementations, the presentation device and the voice-activated electronic device 190 are linked to each other in the user domain, and more specifically, the presentation device and the voice-activated electronic device 190 are associated with each other via a user account in the user domain. Information for the presentation device and information for the electronic device 190 are stored in the device registry 118 in association with the user account. In some implementations, there is a device registry for the presentation device and a registry for the voice-activated electronic device 190. In some implementations, the cloud services server manages the presentation device registry, and the voice assistant server 112 manages the voice-activated electronic device registry. The presentation device registry may reference devices in the associated voice-activated electronic device registry in the user domain, or vice versa.
In some implementations, one or more of the electronic devices 190 (and one or more presentation devices) are delegated to a voice assistant service via a client device (not shown). In some implementations, the voice-activated electronic device 190 does not include any display screen and relies on the client device to provide a user interface during the delegation process, and is also similar for presentation devices. In particular, the client device is installed with an application that enables the user interface to facilitate delegation of a new voice-activated electronic device 190 that is disposed in proximity to the client device. The user may send a request on the user interface of the client device to initiate a delegation process to the new electronic device 190 that needs to be delegated. After receiving the delegation request, the client device establishes a short-range communication link with the new electronic device 190 that needs to be delegated. Optionally, the short-range communication link is established based on Near Field Communication (NFC), bluetooth Low Energy (BLE), or the like. The client device then communicates wireless configuration data associated with a Wireless Local Area Network (WLAN) (e.g., local network 104) to the new or electronic device 190. The wireless configuration data includes at least a WLAN security code (i.e., a Service Set Identifier (SSID) password), and optionally, an SSID, an Internet Protocol (IP) address, a proxy configuration, and a gateway configuration. After receiving the wireless configuration data via the short-range communication link, the new electronic device 190 decodes and recovers the wireless configuration data and joins the WLAN based on the wireless configuration data.
In some implementations, additional user domain information is entered on a user interface displayed on the client device and used to link the new electronic device 190 to an account in the user domain. Optionally, the additional user domain information is transmitted to the new electronic device 190 along with the wireless communication data via a short-range communication link. Optionally, after the new device has joined the WLAN, additional user domain information is transferred to the new electronic device 190 via the WLAN.
Once the electronic device 190 has been delegated into the user domain, other devices and their associated activities can be controlled via multiple control paths. According to one control path, the installation application on the client device is used to control other devices and their associated activities (e.g., media play activities). Alternatively, according to another control path, the electronic device 190 is used to enable hands-free and hands-free control of other devices and their related activities.
Voice activated media playback on a media output device
In some implementations, after both the presentation device and the voice-activated electronic device 190 are delegated and linked to the public user domain, the voice-activated electronic device 190 can be used as a voice user interface to enable hands-free and hands-free control of media content streamed to the presentation device, client device, or other second screen device that does not contain remote control. For example, the user may give a voice command such as "play Lady Gaga on living room speaker". The Lady Gaga music tracks or video clips are streamed to the presentation device associated with "living room speakers". Neither the client device nor any presentation device application or media playing application loaded on the client device.
In some implementations, a proxy service (e.g., a voice assistant service, a cloud-cast service) communicatively links the voice-activated electronic device 190 to the presentation device and causes the presentation device to perform the presentation without involving any application on the client. In particular, a voice message is captured and recorded by the electronic device 190 and is configured to request a media play on a media output device. Optionally, the electronic device 190 processes the voice message locally in part. Optionally, the electronic device 190 communicates the voice message or a portion of the processed voice message to the voice assistant server 112 via the communication network 110 for further processing. The voice assistant server 112 or the cloud services server determines that the voice message includes a first media play request, and the first media play request includes a user voice command to play media content on the media output device and a user voice indication of the media output device. The user voice command further includes at least information of the first media playing application (e.g., youTube and Netflix) and media content (e.g., ladyGaga music) that needs to be played.
Based on the voice indication of the media output device, the voice assistant server 112 or the cloud services server identifies in the device registry 118 a presentation device associated with the electronic device 190 in the user domain and coupled to the media output device. The presentation device is configured to execute one or more media playing applications for controlling the media output device to play media content received from the one or more media content hosts 114. Then, the cloud broadcasting service server transmits a second media broadcasting request including information of the first media broadcasting application program and media contents to be broadcast to the broadcasting device. After receiving the information sent by the cloud broadcast service server, the presentation device executes a first media playing application and controls the media output device to play the requested media content.
In some implementations, the user voice indication of the media output device includes a description of the destination media output device. The voice assistant server 112 or the cloud service server identifies a destination media output device among the plurality of media output devices in the device registry 118 based on the description of the destination media output device. In some implementations, the description of the destination media output device includes at least a brand ("samsung television") or a location of the media output device ("my living room television").
Voice activated media transfer in a media output device
In some implementations, the operating environment 100 includes a first presentation device (not shown) and a first output device (not shown) coupled to the first presentation device. Operating environment 100 also includes a second presentation device (not shown) and a second output device (not shown) coupled to the second presentation device. The presentation devices may alternatively be located in the same location (e.g., living room) or in two different locations (e.g., two rooms) in the operating environment 100. Each of these presentation devices is configured to obtain media content or internet content from content host 114 for display on an output device coupled to the respective presentation device. Both the first presentation device and the second presentation device are communicatively coupled to a voice assistant server 112, optionally a cloud broadcast service server and a content host 114.
Operating environment 100 further includes one or more voice-activated electronic devices 190 communicatively coupled to voice assistant server 112, and optionally to a cloud-cast service server. In some implementations, the voice-activated electronic device 190 is placed independent of the presentation device and the output device. For example, the electronic device 190 is placed in a room where there is no presentation device or output device. In some implementations, the first electronic device 190 is placed in proximity to the first presentation device and the first output device, e.g., the first electronic device 190, the first presentation device, and the first output device are located in the same room. Optionally, the second electronic device 190 is provided independently of or in close proximity to the second presentation device and the second output device.
While playing the media content on the first output device, the user may send a voice command to any of the electronic devices 190 to request that playback of the media content be transferred to the second output device. The voice command includes a media play transfer request. In one case, the user issues a voice command to an electronic device 190 disposed proximate to the first presentation device before the user moves to the destination location. Alternatively, in another case, after the user reaches the destination location, the user can issue a voice command to the electronic device 190 disposed proximate to the second device.
The voice command is transmitted to the voice assistant server 112. The voice assistant server 112 sends a media display information request to the first presentation device to request instant media play information of media content currently being played on a first output device coupled to the first presentation device. The first presentation device then returns the requested instant play information to the voice assistant server 112, the requested instant play information including at least information of the first media play application (e.g., youTube), the media content currently being played (e.g., "Lady Gaga-National Anthenm-Super Bowl 2016"), and a time location associated with the playing of the media content. Then, the second presentation device receives a media display request including the instant play information from the voice assistant server 112, and executes a first media play application that controls the second output device to play the media content from the time position according to the instant play information.
For example, when playing a music playlist on a first output device, the user speaks "play on my living room speaker". The first output device stops playing the currently playing song and resumes the stopped song on the living room speaker. When the song is completed, the living room speaker continues to play the next song on the music playlist previously played on the first output device. Thus, as the user walks around in the operating environment 100, the playing of the media content will follow the user seamlessly while involving only limited user intervention (i.e., issuing voice commands).
Individual devices involved in an operating environment
Fig. 2A-2B are block diagrams illustrating an example electronic device 190 that is used as a voice interface to collect user voice commands in an operating environment (e.g., operating environment 100), according to some implementations. Electronic device 190 generally includes one or more processing units (CPUs) 502, one or more network interfaces 504, memory 506, and one or more communication buses 508 for interconnecting these components (sometimes called a chipset). The electronic device 190 includes one or more input devices 510 that facilitate user input, such as buttons 512, a touch-sensitive array 514, and one or more microphones 516. The electronic device 190 also includes one or more output devices 518, including one or more speakers 520, an optional LED array 522, and an optional display 524. In some implementations, the array 522 of LEDs is an array of full color LEDs. In some implementations, the electronic device 190 has an array of LEDs 522, or a display 524, or both, depending on the type of device. In some implementations, the electronic device 190 also includes a position detection device 526 (e.g., a GPS module) and one or more sensors 528 (e.g., an accelerometer, a gyroscope, a light sensor, etc.).
Memory 506 includes high-speed random access memory such as DRAM, SRAM, DDR RAM or other random access solid state memory devices, and optionally, nonvolatile memory such as one or more magnetic disk storage devices, one or more optical disk storage devices, one or more flash memory devices, or one or more other nonvolatile solid state memory devices. Memory 506 optionally includes one or more storage devices remote from the one or more processing units 502. The memory 506 or alternatively the non-volatile memory within the memory 506 includes a non-transitory computer readable storage medium. In some implementations, the memory 506 or a non-transitory computer readable storage medium of the memory 506 stores the following programs, modules, and data structures, or a subset or superset thereof:
● An operating system 532 comprising processes for handling various basic system services and for performing hardware-related tasks;
● A network communication module 534 for connecting the electronic device 190 to other devices (e.g., the server system 140, one or more presentation devices, one or more client devices, one or more smart home devices, and other electronic devices 190) via one or more network interfaces 504 (wired or wireless) and one or more networks 110 such as the internet, other wide area networks, local area networks (e.g., local network 104), metropolitan area networks, etc.;
● An input/output control module 536 for receiving input via one or more input devices and enabling presentation of information at the electronic device 190 via the one or more output devices 518, comprising:
a voice processing module 538 for processing audio inputs or voice messages collected in the environment surrounding the electronic device 190 or preparing collected audio inputs or voice messages for processing at the voice assistant server 112;
an LED control module 540 for generating a visual pattern on the LED 522 according to the device status of the electronic device 190; and
a touch sensing module 542 for sensing touch events on the upper surface of the electronic device 190 (e.g., on the touch sensor array 514);
● Voice-activated device data 544 for storing at least data associated with the electronic device 190, comprising:
voice device settings 546 for storing information associated with the electronic device 190 itself, including generic device settings (e.g., service layer, device model, storage capacity, processing power, communication capability, etc.), information about one or more user accounts in the user domain, settings for restrictions in handling non-registered users, and display specifications associated with one or more visual patterns displayed by LEDs 522;
Voice control data 548 for storing audio signals, voice messages, response messages, and other data related to the voice interface functions of the electronic device 190;
voice model data 550 for storing a voice model or voice fingerprint corresponding to a user associated with electronic device 190 in a user domain;
● A device dominant module 552 for determining a dominant among the plurality of electronic devices 190 in response to user voice input;
● A voice model training module 554 for training and generating a voice model or voice fingerprint 550, the voice model or voice fingerprint 550 being capable of being used to identify and distinguish users associated with the electronic device 190 in a user domain;
● A response module 556 for executing instructions included in the voice request response generated by the voice assistant server 112 and, in some implementations, generating a response to certain voice inputs; and
● A noise module 558 for determining a level of noise surrounding the electronic device 190 and providing an indication of the level of interference noise and a prompt to wake up the electronic device using an alternative approach.
In some implementations, the speech processing module 538 includes the following modules:
● A user recognition module 560 for recognizing and distinguishing users who provide voice input to the electronic device 190;
● A hotword recognition module 562 for determining whether the voice input includes hotwords for waking up the electronic device 190 and recognizing such hotwords in the voice input;
● A request recognition module 564 for determining a user request included in the voice input; and
● A recognition quality module 566 for determining a measure (e.g., score) of the quality of recognizing hotwords and/or requests in the speech input.
In some implementations, the noise module 558 includes the following modules:
● A recognition analysis module 568 for analyzing how the levels of the different noise affect the operation of the speech processing module 538 (e.g., particularly the hotword recognition module 562 and/or the request recognition module 564) with respect to the particular electronic device 190;
● A user volume threshold module 568 for determining, for a given distance from the electronic device 190, a highest comfortable volume level at which the user will make voice input to the electronic device 190;
● A noise determination module 572 for determining a level and a noise distribution of noise around the electronic device 190;
● A noise distribution module 574 for training and generating a noise distribution that interferes with recognition of hotwords and/or requested noise in the speech input; and
● A noise profile store 576 for storing noise profiles that have been determined to be interference.
Each of the above identified elements may be stored in one or more of the aforementioned memory devices and correspond to a set of instructions for performing the above described functions. The above identified modules or programs (i.e., sets of instructions) need not be implemented as separate software programs, procedures, modules, or data structures, and thus, in various implementations, various subsets of these modules may be combined or otherwise rearranged. In some implementations, the memory 506 optionally stores a subset of the modules and data structures identified above. Further, memory 506 optionally stores additional modules and data structures not described above. In some implementations, a subset, modules, and/or data of the programs stored in memory 506 can be stored on server system 140/voice assistant server 112 and/or executed by server system 140/voice assistant server 112.
In some implementations, one or more of the modules in the memory 506 described above are part of the speech processing library of modules. The speech processing libraries may be implemented and embedded on a wide variety of devices. An example of a speech processing library is described in U.S. provisional patent application No.62/334,434, entitled "Implementations for Voice Assistant on Devices," filed 5/10/2016, the entire contents of which are incorporated herein by reference.
FIG. 3 is a block diagram illustrating an example server in a server system 140 of an operating environment (e.g., operating environment 100) according to some implementations. An example server is one of the voice assistant servers 112. The server 140 typically includes one or more processing units (CPUs) 702, one or more network interfaces 704, memory 706, and one or more communication buses 708 for interconnecting these components (sometimes called chipsets). The server 140 can include one or more input devices 710 that facilitate user input, such as a keyboard, mouse, voice command input unit or microphone, touch screen display, touch sensitive tablet, gesture capture camera, or other input buttons or controls. In addition, the server 140 can supplement or replace the keyboard using microphone and voice recognition or camera and gesture recognition. In some implementations, the server 140 includes one or more cameras, scanners, or photosensor units for capturing images of graphic series codes printed on, for example, an electronic device. Server 140 may also include one or more output devices 712, including one or more speakers and/or one or more visual displays, that enable presentation of user interfaces and display content.
Memory 706 includes high speed random access memory such as DRAM, SRAM, DDR RAM, or other random access solid state memory devices; and optionally nonvolatile memory such as one or more magnetic disk storage devices, one or more optical disk storage devices, one or more flash storage devices, or one or more other nonvolatile solid state storage devices. Memory 706 optionally includes one or more storage devices remote from the one or more processing units 702. The memory 706 or alternatively, the non-volatile memory within the memory 706 includes non-transitory computer-readable storage media. In some implementations, the memory 706 or a non-transitory computer readable storage medium of the memory 706 stores the following programs, modules, and data structures, or a subset or superset thereof:
● An operating system 716 including processes for handling various basic system services and for performing hardware-related tasks;
● A network communication module 718 for connecting the server system 140 to other devices (e.g., various servers, client devices, presentation devices, electronic devices 190, and smart home devices in the server system 140) via one or more network interfaces 704 (wired or wireless) and one or more networks 110 such as the internet, other wide area networks, local area networks, metropolitan area networks, etc.;
● User interface module 720 for enabling information to be presented at the client device (e.g., a graphical user interface for presenting applications 826-830, widgets, websites and their web pages, and/or games, audio and/or video content, text, etc.).
● A command execution module 721 for execution on the server side (e.g., for controlling client devices, presentation devices, electronic devices 190, and smart home devices and commenting on games, social networking applications, smart home applications, and/or other Web or non-Web based applications of data captured by these devices), comprising one or more of the following:
a presentation device application 722 that is executed to provide server-side functions for device configuration, device control, and user account management associated with a presentation device;
one or more media player applications 724 executed to provide server-side functionality for media display and user account management associated with corresponding media sources;
one or more smart home device applications 726 that are executed to provide server-side functionality for device configuration, device control, data processing, and data review of corresponding smart home devices; and
A voice assistant application 728 that is executed to arrange voice processing of voice messages received from the electronic device 190 or to process voice messages directly to extract user voice commands and one or more parameters for the user voice commands (e.g., an indication of a presentation device or another electronic device 190); and
● Server system data 730 storing at least data associated with automatic control of media display (e.g., in an automatic media output mode and a subsequent mode), including one or more of:
client device settings 732 for storing information associated with one or more client devices, including generic device settings (e.g., service layer, device model, storage capacity, processing capabilities, communication capabilities, etc.), and information for automatic media display control;
the presentation device settings 734 for storing information associated with the user account of the presentation device application 722, including one or more of the following: account access information, information for device settings (e.g., service layer, device model, storage capacity, processing capability, communication capability, etc.), and information for automatic media display control;
Media player application settings 736 for storing information associated with user accounts of one or more media player applications 724, including one or more of the following: account access information, user preferences for media content types, comment history data, and information for automatic media display control;
smart home device settings 738 for storing information associated with the user account of smart home application 726, including one or more of the following: account access information, information for one or more smart home devices (e.g., service layer, device model, storage capacity, processing power, communication power, etc.);
voice assistant data 740 for storing information associated with a user account of the voice assistant application 728, including one or more of the following: account access information, information for one or more electronic devices 190 (e.g., service layer, device model, storage capacity, processing power, communication power, etc.);
user data 742 for storing information associated with users in the usage domain, including user subscriptions (e.g., music streaming service subscriptions, video streaming service subscriptions, newsfeed subscriptions), user devices (e.g., devices registered in device registry 118 associated with the respective users), user accounts (e.g., user's email accounts, calendar accounts, financial accounts), and other user data; and
User voice profile 744 for storing a user's voice profile in the user domain, including, for example, a user's voice model or voice fingerprint and a user's comfort volume level threshold.
● A device registration module 750 for managing the device registry 118 coupled to the voice assistant server 112;
● A device master arbitration module 780 for arbitrating device master determinations among the electronic devices 190 of the operating environment;
● A noise module 790 for determining a level of noise surrounding the electronic device 190; and
● A voice processing module 7100 for processing audio input or voice messages collected in the environment surrounding the electronic device 190.
In some implementations, the voice assistant server 112 is primarily responsible for processing voice input and noise reduction, and thus includes one or more of the programs, modules, and data structures in the memory 506 described above with reference to fig. 2A-2B in the corresponding modules in the memory 706 (e.g., the programs, modules, and data structures including the voice processing module 538 are included in the voice processing module 7100, and the programs, modules, and data structures included within the noise module 558 are included in the noise module 790). The electronic device 190 communicates the captured voice input to the voice assistant server 112 for processing, or first pre-processes the voice input and communicates the pre-processed voice input to the voice assistant server 112 for processing. In some implementations, the voice assistant server 112 and the electronic device 190 have some shared and some separate responsibilities with respect to the processing of voice input and noise reduction, and the programs, modules, and data structures shown in fig. 2A-2B may be included in or distributed among the voice assistant server 112 and the electronic device 190. Other programs, modules, and data structures shown in fig. 2A-2B (e.g., voice model data 550, voice model training module 554), or the like, may also be included in voice assistant server 112.
Each of the above identified elements may be stored in one or more of the aforementioned memory devices and correspond to a set of instructions for performing the aforementioned functions. The above identified modules or programs (i.e., sets of instructions) need not be implemented as separate software programs, procedures, modules, or data structures, and thus, in various implementations, various subsets of these modules may be combined or otherwise rearranged. In some implementations, the memory 706 optionally stores a subset of the modules and data structures identified above. Further, the memory 706 optionally stores additional modules and data structures not described above.
Example device leader negotiation
Fig. 4A-4B illustrate examples of device leader negotiation between a plurality of electronic devices (e.g., electronic device 190) according to some implementations. In an operating environment (e.g., operating environment 100) having a plurality of electronic devices 190, when a user in the environment makes a voice input, one or more of the plurality of electronic devices 190 detect and receive the voice input. The electronic devices 190 determine dominant ones of themselves in response to the user's voice input and to detect further voice input from the user.
Fig. 4A illustrates three voice-activated electronic devices 1002-1 through 1002-3 (e.g., electronic device 190) in an operating environment (e.g., operating environment 100). They are all in the same space as a user (not shown), for example in the same room. The user makes a voice input (e.g., an utterance) (not shown), and the three electronic devices 1002-1 through 1002-3 detect and capture samples of the voice input at different levels or levels of quality. The quality of a captured sample of speech input at an electronic device may be affected by one or more factors including, but not limited to: ambient noise, the capabilities of the device, the distance and location of the device relative to the user, the location of the device within space, etc.
In some implementations, each of the electronic devices determines a level of quality of a respective sample of speech input captured by the electronic device. The quality level may be expressed as a score or some other value. For example, in fig. 4A, each of the electronic devices 1002 has captured a respective sample of the user's voice input and has been determined as a score for its respective sample; the sample at electronic device 1002-1 was scored as 0.98 (on a scale of 0 to 1, where 1 corresponds to the highest quality), the sample at electronic device 1002-2 was scored as 0.37, and the sample at electronic device 1002-3 was scored as 0.61. In some implementations, the identification quality module 566 (fig. 2B) at the electronic device 1002 determines a quality level of the respective captured sample. In some implementations, criteria for evaluating the quality of a speech sample include, for example, volume or amplitude of the sample, presence or absence of noise (e.g., crosstalk, hissing) and corresponding level, presence or absence of distortion (e.g., echo) and corresponding level, frequency distribution of the sample, etc.
The electronic devices 1002 communicate their quality scores to each other. Thus, for example, electronic device 1002-1 receives quality scores from electronic devices 1002-2 and 1002-3. Electronic device 1002-2 receives the quality scores from electronic devices 1002-1 and 1002-3. Electronic device 1002-3 receives the quality scores from electronic devices 1002-1 and 1002-2. If all of the electronic devices 1002 are on the same local network (e.g., the local network 104 of fig. 1), the electronic devices 1002 exchange scores over the local network. For example, the electronic device 1002 may send its quality score to other electronic devices 1002 by sending a multicast message within the local network. If at least one of the electronic devices 1002 is not on the local network, the score may be sent to the server system 140 and the device master arbitration module 780 of the voice assistant server 112 distributes the score to the electronic devices 1002. Alternatively, the device master arbitration module 780 determines which of the devices is the master based on the received scores and sends the results of the determination to the devices. In some implementations, the electronic device 1002 discovers each other and its location through the voice assistant server 112 and the device registry 118 (e.g., the device 1002 periodically checks within the voice assistant server 112 and is informed of other devices associated with the same user account based on information in the device registry 118).
In some implementations, if only one of the plurality of electronic devices 1002 captures a sample of speech input (e.g., the other electronic device 1002 is too far from the user to detect speech input), its device that captured the speech input sample is determined to be the dominant. In some implementations, if the electronic device 1002 fails to capture a sample of the voice input (e.g., the device is too far from the user to detect the voice input), then the quality score of that device for the voice input is 0.00 or null score; devices with a "0.00" or null score are excluded from competition for the leader.
When the electronic device 1002 receives the score from the other electronic device 1002, the electronic device compares its quality score with the score from the other device. If its score is not the best (e.g., highest) of the scores, the electronic device gives up outputting a response to the voice input (e.g., a response generated by the server system 140) (e.g., by powering down or "turning off" the speaker 520). If its score is the best among the scores, the electronic device outputs a response to the voice input and the subsequent voice input; the device is determined to be the "master". In some implementations, the dominant also continues to detect and process or pre-process subsequent voice inputs from the user (whether processing voice inputs and generating dominant of responses, pre-processing voice inputs to communicate them to the dominant of the voice assistant server 112 generating the responses, or simply communicating voice inputs to the dominant of the voice assistant server 112 generating the responses), and non-dominant ones forego receiving, detecting, and processing subsequent voice inputs from the user.
In some implementations, the dominant determination is performed in response to a user's voice input (e.g., a voice input that includes the hotword) to wake up the device. In some implementations, the dominant determination may be performed in response to each voice input from the user or at intervals of a predetermined number of voice inputs from the user (e.g., at every 5 voice inputs from the user). In this way, the dominant determination may be updated to account for changing conditions (e.g., user walking around, level of noise around the device changing, etc.).
In some implementations, dominant determination based on quality scores may be overridden based on additional criteria. That is, a device may be determined to be a dominant even if the device would not be determined to be a dominant based on the quality score alone in other cases. Additional criteria may include, for example, the type of request or command in the voice input and the status of the device. For example, if the voice input includes a request to play or stop playing video, the request is particularly relevant to the electronic device 1002 (e.g., smart television, presentation device) capable of playing video, and not particularly relevant to the electronic device 1002 (e.g., sound system, portable speaker) as an audio device only. When a request is particularly relevant to an electronic device 1002, the electronic device 1002 may be determined to be the dominant, even if the quality score of the device is not the highest. In some implementations, if a request is specifically related to a plurality of electronic devices in the space, the electronic device with the best quality score is determined to be the dominant among the devices with which the request is specifically related. As another example, if the command in the voice input is a command for changing the state of the device (e.g., "screen off"), the device in a state applicable to the command (e.g., smart tv with screen currently in on state) may be determined to be a dominant, although the quality score is lower and the device in a state not applicable to the command (e.g., smart tv with screen already off) is not considered to be a dominant. Further, if the request/command is not particularly relevant to any of the devices 1002 (e.g., the device 1002 is an audio-only voice interface device capable of communicating with a non-voice interface presentation device via the voice interface server 112, and the command is a request to play video via the presentation device), the dominant determination is made based on the quality scores described above. In some implementations, multiple dominant determination criteria (e.g., quality score, correlation of commands, and status of devices, as described above) may be implemented as a multi-step dominant determination (e.g., determine correlation of commands and status of devices to narrow down dominant candidates, then determine dominant based on quality score; determine device with highest score, then check if command correlation or device status criteria apply to other devices) or may be implemented as a weighted determination (e.g., each criteria is considered and weighted with a weighted score).
Fig. 4B shows the result of device leader negotiation among the electronic devices 1002 in fig. 4A. The electronic device 1002-1 determines that its quality score is the best among the three electronic devices 1002 and assumes that the dominant is used to output a response to the user. The electronic devices 1002-2 and 002-3 determine that their quality scores are not the best among the three electronic devices 1002 and power down their speakers 520 and forego outputting responses to the user.
In some implementations, the electronic device 1002 that is not the dominant also powers off its microphone 516, and thus, no further voice input from the user is detected; the leader device is also the leader in relation to detecting and processing further speech input from the user. In some implementations, the electronic devices 1002 that are not masters maintain power to their microphones 516 and an assistant is provided to re-detect further voice input from the user. For example, the dominant and non-dominant devices receive and record respective samples of speech input and communicate them to the speech assistant server 112, which speech assistant server 112 may use multiple samples together to better process the speech input (e.g., aggregate samples, select the best sample for processing, compare the samples to obtain the best portion of each sample).
In some implementations, after each voice input from the user, the electronic device 1002 repeats the dominant determination process as described above. In some implementations, after a predetermined number of intervals of voice input, the electronic device 1002 repeats the dominant determination process as described above (e.g., to determine the dominant again every fifth voice input or every 10 voice inputs).
In some implementations, after the dominant is determined, one or more of the electronic devices 1002 output a visual response (e.g., along with an audio response to the voice input, the determined dominant displays a notification indicating that it is the dominant or a predetermined LED light pattern).
In some implementations, each of the electronic devices 1002 outputs a visual indication (e.g., a predetermined LED light pattern) that it is listening to whenever it is listening to a user (e.g., receiving and detecting voice input from the user), and then determines from the master that only the master device outputs a response to the voice input. For example, when a user is speaking a voice input, the electronic devices 1002-1 through 1002-3 display visual indications to indicate that they are listening when receiving the voice input, after which only the dominant device 1002-1 outputs a response as determined by the dominant.
In some implementations, the electronic device 1002 indicates that it is listening by displaying a characterized visual pattern, such as one of the patterns shown in fig. 4G of the' 566 application (duplicated as shown in fig. 8D below), using a set of LEDs. The visual pattern can be static (unchanged) or dynamic (by changing the color, brightness, duty cycle, etc. of the individual LEDs, giving the effect of the movement). In some implementations, the electronic device 1002 indicates that it is the dominant among the plurality of listening devices by displaying another characterized visual pattern using its LED. Similarly, multiple listening devices participating in a negotiation to determine which device should be the master can indicate that the negotiation is in progress by displaying another unique visual pattern using their respective LEDs.
Example Process for Multi-user personalization
Fig. 5 is a flow diagram illustrating a method 1100 of responding to a user's voice input according to some implementations. Method 1100 is implemented at an electronic device 190 having one or more microphones, a speaker, one or more processors, and memory storing one or more programs for execution by the one or more processors.
The electronic device 190 receives a first voice input from a user via one or more microphones 516a (1102). The electronic device 190 captures and records a sample of the first speech input via the microphone 516. In some implementations, the first speech input is a free-form speech input, which may be, for example, a natural language speech input, in the sense that the speech input need not be strictly limited to a set of predetermined words and phrases within a predetermined syntax.
The electronic device 190 compares (1104) the first speech input to a set of speech models associated with a plurality of users associated with the electronic device 190, wherein the speech models are trained on the electronic device. The user recognition module 560 compares the recorded samples of the first speech input with the speech model in the speech model data 550. The voice model data 550 includes voice models or voice fingerprints of one or more users associated with the electronic device 190 (e.g., users registered with the electronic device 190) in the user domain. In some implementations, the voice model is trained on the electronic device by the voice model training module 554.
Based on the comparison, the electronic device 190 determines that the first speech input corresponds to a first user of the plurality of users (1106). For example, the user recognition module 560 recognizes the speech model in the speech model data 550 that best matches the first speech input and determines from the recognition of the match that the user speaking the first speech input is the user to whom the matching speech model corresponds. In some implementations, the user recognition module 560 also determines a confidence level or some other similar measure of quality or proximity of the match between the speech model and the speech input, and only recognizes the match if the match is optimal and the confidence level is above a predetermined threshold.
The electronic device 190 presents a response based on the determination (1108). In some implementations, the electronic device 190 generates a response based on the determination and the first voice input. The response includes an indication of the identity of the identified first user to let the first user know that he has been identified. The response also includes a response to any voice request in the first voice input. For example, in response to a hotword voice input waking up electronic device 190, electronic device 190 generates and presents (e.g., outputs) a voice greeting (e.g., "Hello, david", "morning good, mary (Good morning Mary)") that includes the first user's name. The response may include speech output and/or instructions to another device to perform the operation. Instructions for performing an operation include an indication of the identified user identity such that an operation is performed with respect to the identified user. For example, if an operation is playing music from a music subscription, the device plays music from the music subscription of the identified user.
In some implementations, the response is an audible speech output, and presenting the response includes outputting the audible speech output. Audible speech output by the electronic device 190 through the speaker 520.
In some implementations, the electronic device determines a user request based on the first voice input and generates a response according to the determined user request. In some implementations, generating a response based on the determination and the first speech input includes these determination and generation operations. In addition to identifying the speaker of the voice input, the electronic device 190 determines a user request in the voice input (e.g., a media playback request, a request for news headlines, a request for an email to be read, etc.) and generates a reply to the request (e.g., an audible confirmation of the request, an audible query to the user for more information needed to fulfill the request).
In some implementations, the determined user request includes a request to wake up the electronic device, and the responses include an audible greeting, wherein the greeting includes an indication of the determined identity of the first user. If the voice input includes a hotword (i.e., the voice input is a request to wake up the electronic device 190), the generated response includes an audible greeting including the identity of the first user (e.g., "morning good Dave (Good morning Dave)"). The greeting indicates that the electronic device 190 has awakened and indicates the identity as a user identified by the electronic device 190.
In some implementations, the determined user request includes a request for information, and generating a response from the determined request includes obtaining the requested information about the first user. If the request is a request for information (e.g., a request to read a user's email, a request to speak aloud a user's upcoming calendar event), the electronic device 190 accesses the identified user's information (e.g., the user's email, the user's calendar) to generate a response. In some implementations, obtaining the requested information about the determined first user includes accessing an account associated with the first user; to obtain information of the identified user for the response, the electronic device 190 accesses an account of the user (e.g., an email account of the user, a calendar account of the user). At the electronic device 190, the user account information may be stored in the voice device settings 546.
In some implementations, the electronic device 190 receives a second voice input, compares the second voice input to the set of voice models, determines that the second voice input corresponds to a second user of the plurality of users based on the comparison, and presents a response according to the determination that the second voice input corresponds to the second user. In some implementations, the electronic device generates a response based on the determination and the second voice input. If a different user associated with the electronic device 190 speaks a voice input into the electronic device 190, the electronic device 190 identifies the different user in a manner similar to that of the first user-the voice input of the different user is compared to the voice model and a best match is found. With the identification of the different users, the electronic device 190 can generate a response based on this new identification. Thus, the electronic device 190 is able to switch between related users by comparing the speech input to the speech model and identifying the speaking user based on the comparison, so the user does not need to explicitly speak a command to switch the focus of the electronic device 190 from one user to another.
In some implementations, the electronic device 190 receives a third voice input, compares the third voice input to the set of voice models, determines that the third voice input does not correspond to any of the plurality of users based on the comparison, and limits functionality of the electronic device based on the determination that the third voice input does not correspond to any of the plurality of users. If a user not associated with the electronic device 190 outputs a voice input to the electronic device 190, the electronic device 190 receives the voice input and attempts to identify the user. Because the user is not associated with the electronic device 190, there is no associated speech model in the speech model data 550, and the electronic device 190 determines that the user is an unidentified user. For the unidentified user, the electronic device 190 may limit its functionality to prevent personal or private information from being accessed. For example, the electronic device 190 may only act on requests from unidentified users that relate to non-private or non-personal information (e.g., requests for sports scores, news, stocks, weather). In some implementations, the electronic device 190 can deny the unidentified user access to any functions and voice assistant services of the electronic device 190 (e.g., by ignoring voice input of the unidentified user or replying with a response indicating that the user is not authorized). In some implementations, the user restriction on unidentified functions is based on settings on the device (e.g., voice device settings 546). The device owner can set, for example, whether to limit the functionality entirely for unidentified users, or to limit only to functionality that does not involve personal or private information.
In some implementations, the electronic device includes a display, and an indication of the determined identity of the first user is displayed on the display. If the electronic device 190 includes a display 524, the electronic device 190 may display the identity of the identified user on the display 524 (e.g., display the name of the identified user, display a greeting with the name of the identified user, display a photograph, avatar, or other image of the identified user associated with the identified user) to indicate that the electronic device 190 has identified the speaker of the voice input and to give the user an opportunity to verify the identification.
In some implementations, the electronic device includes a display and displays a visual user interface associated with the determined first user on the display. If the electronic device 190 includes a display 524, the electronic device 190 may display a visual user interface identified with the identified user (e.g., a user interface having an applied theme associated with the identified user). In some implementations, the electronic device 190 displays a pattern associated with the identified user on the LED 522.
In some implementations, the electronic device 190 receives the voice input (e.g., captures a sample of the voice input), as in step 1102, and sends the voice input to the voice assistant server 112. The voice assistant server 112 compares the voice input to a set of voice models (e.g., voice models in the user voice profile 744) associated with a plurality of users associated with the electronic device 190 and, based on the comparison, determines the identity of the user speaking the voice input, similar to steps 1104 and 1106. The voice assistant server 112 generates a response to the voice input and transmits the generated response to the electronic device 190, which the electronic device 190 outputs. In some implementations, the voice assistant server 112 identifies the user and communicates the user identification to the electronic device 190, which electronic device 190 generates and outputs a response based on the identification received from the voice assistant server 112.
In some implementations, the electronic device 190 receives the voice input (e.g., captures a sample of the voice input), performs preprocessing on the voice input, as in step 1102, and sends the preprocessed voice input to the voice assistant server 112. Preprocessing may include identifying the speaking user, as in steps 1104 and 1106, and the recognition results are accompanied by voice input to the voice assistant server 112. Alternatively, user recognition is performed by the voice assistant server 112. The voice assistant server 112 receives the pre-processed voice input, identifies the speaking user under conditions that have not been performed by the electronic device 190 (similar to steps 1104 and 1106), generates a response to the voice input, and communicates the generated response to the electronic device 190 that outputs the response.
In some implementations, the electronic device 190 receives the voice input (e.g., captures a sample of the voice input) and sends the voice input to the voice assistant server 112, or performs preprocessing and sends the preprocessed voice input to the voice assistant server 112. The voice assistant server 112 compares the voice input to a set of voice models (e.g., voice models in the user voice profile 744) associated with a plurality of users associated with the electronic device 190 and determines the identity of the user speaking the voice input based on the comparison, as in steps 1104 and 1105. The voice assistant server 112 generates a response to the voice input and transmits the generated response to the electronic device 190 that outputs the response. In some implementations, the voice assistant server 112 identifies the user and communicates the user identification to the electronic device 190, which electronic device 190 generates and outputs a response based on the identification received from the voice assistant server 112.
As described above, a speaking user is identified by matching a voice model or voice fingerprint to a voice input. In some implementations, the electronic device 190 is configured to perform a process for capturing and training a voice model or voice fingerprint. For example, when a user is to be associated with (e.g., registered with) the electronic device 190, the electronic device 190 (e.g., the speech model training module 554) may initiate and direct the user to be associated with the electronic device 190 through a step-by-step process to capture and train the user's speech model. In this process, the electronic device 190 may prompt the user to speak one or more words or phrases (e.g., a hotword, phrase, or sentence comprising a plurality of different phonemes) in order to generate and train a speech model. The voice model training module 554 may instruct the LED control module 540 to illuminate various visual patterns on the LEDs 522 to indicate the status of the voice model capture and training process to the user. In some implementations, the electronic device 190 stores the trained voice model in the voice model data 550 and, optionally, communicates the trained voice model to the voice assistant server 112 for storage (e.g., in the user voice profile 744).
In some implementations, a given user has a speech model for each electronic device 190 with which the user is associated. The speech model at each device 190 is trained on the particular device, thus taking into account the environment surrounding the particular device and the corresponding device.
In some implementations, the voice model training process is performed by the voice assistant server 112 in conjunction with the electronic device 190. For example, when a user is to be associated with the electronic device 190, a voice model training module (not shown) at the voice assistant server 112 communicates instructions and audio output to the electronic device 190. The electronic device 190 executes instructions and outputs audio output to guide a user through a training process similar to that performed by the speech model training module 554 described above. The electronic device 190 captures spoken voice inputs to the user of the training process and communicates the captured voice inputs to the voice assistant server 112, which generates voice models and stores them in the user voice profile 744. In some implementations, the voice assistant server 112 communicates the voice model of the user associated with the electronic device 190 to the electronic device 190 for storage and local use (e.g., in voice model data 550).
In some implementations, an authentication token is also generated for the user as the speech model is generated and trained for the user. The authentication token authenticates the user to the voice assistant server 112. The speaker's speech input is matched to speech models associated with different users. When a matching voice model is found for the speaker's voice input, an authentication token for the user account associated with the matching voice model is used. In some implementations, the authentication token is pre-generated, but is not initially associated with any voice model. The training process associates a speech model trained as a result of the training process with a pre-generated authentication token. In some implementations, after the electronic device 190 identifies the speaker of the voice input, the voice input (or data containing the user request and associated parameters determined by the voice input) is transmitted to the voice assistant server 112 along with an authentication token associated with the speaker; the authentication token authenticates the speaker to the voice assistant server 112. In some implementations, a speaker may be associated with an authentication token that has been delegated to a user of any speaker. For example, a user associated with the electronic device 190 may configure his account to allow anyone to use his music service login credentials so that other users can access any connected output devices (e.g., speakers) in the vicinity of the user device 190.
In some implementations, the electronic device 190 identifies the speaking user by detecting nearby key devices associated with the speaking user (e.g., using bluetooth low energy or ultrasonic RF).
In some implementations, the content host computer 114 generates an audible response to the voice input. For example, the voice input may include a request for a balance in a bank account associated with the user (e.g., "what is the balance in my Chase account. For such voice inputs, the electronic device 190 or the voice assistant server 112 identifies the speaking user, as described above. After identifying the user and obtaining the bank account information (e.g., from the user data 742), the electronic device 190 or the voice assistant server 112 transmits a query (e.g., via an Application Programming Interface (API)) for the account balance to a content host 114 (e.g., a database system of the bank) associated with the bank in which the bank account is located. The bank content host computer obtains the balance from its database and generates an audible response in response to the request. The bank content host computer transmits the audible response to the electronic device 190 or the voice assistant server 112 (the voice assistant server 112 then transmits the audible response to the electronic device 190), and the electronic device 190 outputs the audible response. In this way, the transfer and storage of account data in digital form over the network and on the device is reduced, which improves the security and privacy of user data.
Example procedure for device leader negotiation
Fig. 6 is a flow diagram illustrating a method 1200 of negotiating a device leader among a plurality of voice interface devices according to some implementations. The method 1200 is implemented at an electronic device (e.g., device 1002-1,1002-2, or 1002-3) of two or more electronic devices 190 (electronic device 1002), wherein each of the two or more electronic devices includes one or more microphones, a speaker, one or more processors, and a memory storing one or more programs for execution by the one or more processors.
The electronic device 190 detects a voice input (1202). The electronic device 190 captures and records samples of speech input from the user via the microphone 516.
The electronic device 190 determines a quality score for the detected speech input (1204). The electronic device 190 determines a score, rating, or some other measure of the quality of the captured speech input samples. The quality of the sample may be affected by a number of factors, including the distance of the user from the device, the volume of the user speaking the voice input, the surrounding environment and noise, the capabilities of the device, etc. In some implementations, criteria for evaluating the quality of a speech sample include, for example, volume or amplitude of the sample, presence or absence of noise (e.g., crosstalk, hissing) and corresponding level, presence or absence of distortion (e.g., echo) and corresponding level, frequency distribution of the sample, etc.
The electronic device 190 communicates the quality score to other devices of the plurality of electronic devices (1206) and receives the quality score generated by the other devices of the plurality of electronic devices for detecting speech input by the other devices (1208). The electronic device 190 communicates the scores of its voice input samples to other devices of the plurality of electronic devices and receives scores of its respective samples of voice input from the other devices.
In accordance with a determination that the quality score generated by the first electronic device is highest among the generated quality scores and the received quality scores of the voice inputs, the electronic device outputs an audible response and/or a visual response (e.g., a notification or LED light pattern) to the detected voice inputs, and other ones of the plurality of electronic devices forgo outputting the audible response to the detected voice inputs (1210). In some implementations, among the devices that pertain to voice input, the device with the highest score (or more generally, the best score) optionally pre-processes its respective voice input sample and communicates the voice input sample or pre-processed voice input sample to the voice assistant server 112, which voice assistant server 112 generates a response to the voice input that includes an audible output (e.g., voice confirmation of the user request, reading out information requested by the user), and communicates the response to the device. Alternatively, the device with the highest score generates a response to the voice input. In either case, the device with the highest score (e.g., device 1002-1) outputs the response, and the other devices with lower scores (e.g., devices 1002-2 and 1002-3) do not output the response. In some implementations, the electronic device that is the dominant (e.g., the device with the highest score in the examples herein) is also the dominant for processing or preprocessing subsequent speech input from the user.
In accordance with a determination that the quality score generated by the first electronic device is not the highest among the quality scores for the voice inputs generated by the plurality of electronic devices, the electronic device 190 foregoes responding to the detected voice inputs. If the device determines that its score is not highest among the devices related to the voice input (e.g., devices 1002-2 and 1002-3), the device does not output a response to the voice input. For example, the device with the lower score turns off its speaker 520. In some implementations, the device with the lower score also turns off its microphone 516 so that only the device with the highest score is detecting further voice input. In some implementations, the electronic device 190 discards outputting an audible response to the detected voice input and may output a visual response (e.g., a visual indication that the device is not determined to be a dominant) based on a determination that the quality score generated by the first electronic device is not the highest among the quality scores of the voice inputs generated by the plurality of electronic devices.
In some implementations, a plurality of electronic devices are communicatively coupled through a local network and transmit and receive are performed through the local network. The electronic devices 190 may be communicatively coupled through a local network (e.g., the local network 104) and may communicate their scores to each other through the local network. For example, a device may multicast or broadcast its score over a local network.
If at least one of the devices is not on the local network, the device may communicate its score to the voice assistant server 112. In some implementations, the device master arbitration module 780 communicates the received scores to the devices and the devices determine whether their respective scores are highest. In some implementations, the device master arbitration module determines which score is highest and communicates the result of the determination to the device. In some implementations, the hub device may include and function similarly to a module similar to the device master arbitration module 780.
In some implementations, the quality score includes a detection confidence level of the speech input; the quality score is a confidence level value for the speech input sample. In some implementations, the quality score includes detecting a signal to noise ratio level of the speech input; the quality score is a signal to noise ratio or value (e.g., signal to noise ratio) for the speech input samples.
In some implementations, the electronic device 190 recognizes the command in the voice input and outputs an audible and/or visual response to the detected voice input based on a determination that the type of command is related to the first electronic device. If a command or request in a voice input is identified as a command or request that is particularly relevant to one of a plurality of devices that detect the voice input, that device outputs a response to the voice input and the other devices forego outputting the response even though the device that has a particular relevance to its command does not have the highest score among the devices that are relevant to the voice input. Examples of commands or requests having particular relevance include video playback requests (e.g., for a presentation or television device) and music playback requests (e.g., for an audio system or speaker system). Further, a command or request may have a particular relevance to a device if the command or request identifies a particular device that the user wishes to fulfill the request (e.g., because the command explicitly identifies the device, the command "play video on my bedroom TV" has a particular relevance to a TV device in the bedroom), or the command/request includes a device status parameter that applies to the current status of the device (e.g., a "screen off command relates to a device with a screen on, and not to a device with no screen or screen off).
In this way, multiple devices capture respective samples of the speech input and determine as to which sample is optimal. Based on the determination, one of the devices is responsive to the voice input and further voice input from the user. In some implementations, the multiple devices repeat the above process for each voice input or at intervals of a predetermined number of voice inputs (e.g., to re-determine the dominant every 5 voice inputs or every 10 voice inputs).
In some implementations, multiple devices detect voice input and send their captured voice input samples to the voice assistant server 112. The voice assistant server 112 aggregates the samples or selects the best quality samples for processing or compares the samples to obtain the best portion of each sample. In some implementations, when multiple devices are receiving and detecting voice input, the devices respectively display visual indications (e.g., predefined LED patterns) that the user is listening to.
Example procedure for noise reduction
Fig. 7 is a flow diagram illustrating a method 1300 of reducing noise around a speech interface device according to some implementations. The method 1300 is implemented at an electronic device 190 having one or more microphones, a speaker, one or more processors, and memory storing one or more programs for execution by the one or more processors. The electronic device 190 is configured to wake up by any of a variety of availabilities including voice-based availabilities (e.g., voice input including hotwords).
The electronic device determines a current noise profile of an environment surrounding the electronic device (1302). While the electronic device 190 is idle, it may run a noise module 558 (e.g., noise determination module 572) to determine a noise profile of its surroundings. In some implementations, determining the current noise profile includes determining a noise level (e.g., volume) of the noise, and capturing and processing the ambient noise. The processing may include, for example, determining the frequency and other parameters of the ambient noise.
The electronic device determines whether the noise profile interferes with the availability of speech based (1304). The electronic device 190 compares the determined noise profile to the noise profile in the noise profile store 576 and evaluates parameters of the noise profile to determine whether the noise profile (i.e., the current noise surrounding the electronic device 190) interferes with the availability of speech based.
In accordance with the determination that the noise distribution interferes with the voice-based availability, the electronic device 190 presents a prompt to the user to wake up the electronic device using the availability of the plurality of availability other than the voice-based availability (1306). The prompt instructs the user to wake up the electronic device 190 using another availability in addition to the voice-based availability. In some implementations, the hint is also or otherwise includes an indication that ambient noise interferes with hotword recognition. For example, the electronic device 190 may display a predetermined pattern on the LED522 that indicates that ambient noise interferes with the voice-based availability and prompts the user that the device should be awakened using another availability (e.g., pressing the button 512, touching the touch sensor array 514, using another device communicatively coupled to the electronic device 190 such as a smart phone). The instructions/prompts may be displayed on the display 524 or may be output as sounds or tones through the speaker 520.
In some implementations, wherein the speech-based availability includes spoken hotwords. The voice-based availability includes the user speaking a hotword that wakes up the electronic device 190, as described above.
In some implementations, determining whether the noise profile interferes with the availability of speech-based sounds includes determining whether the noise profile negatively affects recognition of hotwords in speech input detected by the electronic device. The electronic device 190 determines whether surrounding noise (represented by a noise profile) will negatively impact the detection/recognition of the hotword by the electronic device 190 (e.g., the noise is large enough to drown out the user's voice input with the hotword, the noise has a frequency profile that will interfere with the user's voice input with the hotword, which will distort the user's voice input with the hotword).
In some implementations, determining whether the noise profile negatively affects recognition of hotwords in the speech input includes comparing the noise profile to a noise level threshold of a hotword recognition process associated with the electronic device. The recognition analysis module 568 of the electronic device 190 (or the voice assistant server 112) analyzes the hotword recognition module 562 of the electronic device 190 (e.g., when the electronic device 190 is idle) to determine a noise threshold at which noise will cause problems to the algorithm or process used by the module. These thresholds are saved and may be compared to the current noise profile to determine whether the current noise profile will cause problems to the hotword recognition module 562. The analysis of the hotword recognition module is relative to the electronic device 190, and thus, the threshold may vary from device to device.
In some implementations, determining whether the noise profile negatively affects recognition of hotwords in the speech input includes comparing the noise profile to a speech volume level threshold, wherein the speech volume level threshold is defined based on a predetermined distance from the electronic device. In the event that a determination based on a predetermined distance is desired (e.g., a predefined distance based on a "typical user distance" beyond which voice input may decay), the user volume threshold module 570 of the electronic device 190 (or the voice assistant server 112) performs an analysis of the user's voice input to determine a maximum comfortable volume level at which the user will speak the voice input.
In some implementations, determining whether the noise profile negatively affects recognition of hotwords in the speech input includes comparing the noise profile to a predetermined set of noise profiles associated with the electronic device, wherein the noise profile of the predetermined set of known noise profiles negatively affects recognition of hotwords by the electronic device in the speech input. The electronics 190 compare the noise profile to a previous noise profile (e.g., in noise profile store 576) that interfered with hotword detection.
In some implementations, the electronic device includes a button, and the availability of the plurality of availabilities other than voice-based availability includes activating the button. The electronic device 190 includes a physical button 512 and the user is able to wake up the device by activating the button 512 instead of speaking a voice input with a hotword.
In some implementations, a prompt is presented to a user to wake up an electronic device using an availability other than a voice-based availability of a plurality of avatars, including illuminating a button on the electronic device that corresponds to a button-based availability of the plurality of avatars. The button 512 may include illumination (e.g., an embedded LED light), and the electronic device 190 may prompt the user to use the button 512 by illuminating the button 512 instead of explaining the hotword.
In some implementations, presenting a prompt to the user to wake up the electronic device using an availability other than the voice-based availability of the plurality of availabilities includes outputting a predetermined audible sound. The electronic device 190 may output a predetermined sound or tone (or set of sounds or tones) through the speaker 520 to prompt the user to use the alternate availability.
In some implementations, the electronic device includes a display, and presenting the prompt to the user to wake up the electronic device using an availability other than the voice-based availability of the plurality of availabilities includes displaying the prompt on the display. The electronic device 190 may prompt the user to use the alternate availability by displaying a prompt message on the display 524.
In some implementations, the electronic device includes one or more LED lights, and presenting the prompt to the user to wake up the electronic device using an availability of the plurality of availabilities other than the voice-based availability includes displaying the prompt using the one or more LED lights. The electronic device 190 may prompt the user to use the alternate availability by displaying a predetermined light pattern on the LED 522.
Fig. 8A and 8B are front 400 and back 420 views of a voice activated electronic device 190 according to some implementations. The electronic device 190 is designed to be warm in color and attractive and to naturally fit in many areas of the home. The electronic device 190 includes an array of one or more microphones 402 and full color LEDs 404. The full color LEDs 404 can be hidden below the upper surface of the electronic device 190 and are not visible to the user when they are not lit. In some implementations, the array of full color LEDs 404 is physically arranged in a ring. Further, the back side of the electronic device 190 optionally includes a power connector 408 configured to couple to a power source.
In some implementations, the electronic device 190 presents a compact appearance without visible buttons, and the interaction with the electronic device 190 is based on voice and touch gestures. Alternatively, in some implementations, the electronic device 190 includes a limited number of physical buttons (e.g., buttons 406 on its back side), and interactions with the electronic device 190 are further based on pressing the buttons in addition to voice and touch gestures.
In some implementations, a simplified and low cost electronic device 190 is presented, the electronic device 190 comprising an array of full color Light Emitting Diodes (LEDs) rather than a full screen display. The LED design language is employed to configure the illumination of an array of full color LEDs and to implement different visual patterns indicative of different speech processing states of the electronic device 190. The LED design language consists of a fixed set of colors, patterns, and syntax of specific motions applied to full color LEDs. Elements in the language are combined to visually indicate a particular device state during use of the electronic device 190. In some implementations, the illumination of full color LEDs is intended to explicitly depict the passive listening state and the active listening state of the electronic device 190 among other important states. The placement of full color LEDs conforms to the physical limitations of the electronic device 190, and the array of full color LEDs can be used in speakers manufactured by third party Original Equipment Manufacturers (OEMs) based on specific technologies (e.g., google assistants).
When full color LED arrays are used in speakers manufactured by third party OEMs based on a particular technology, the full color LEDs and LED design languages are configured to fit the corresponding physical user interfaces of the OEM speakers. In this case, the device state of the OEM speaker remains unchanged, while the particular visual pattern representing the device state may change (e.g., the color of the full color LEDs may be different, but the color of the full color LEDs is displayed by a similar animation effect).
In a voice activated electronic device 190, passive listening occurs when the electronic device 190 processes audio input collected from its surroundings but does not store the audio input or transmit the audio input to any remote server. Instead, active listening occurs when the electronic device 190 stores audio input collected from its surroundings and/or shares audio input with a remote server. According to some implementations of the application, the electronic device 190 only passively listens for audio input in the surrounding environment, without compromising the privacy of the user of the electronic device 190.
Fig. 8C is a top view of a voice activated electronic device 190 according to some implementations, and fig. 8D shows six visual patterns displayed by an array of full color LEDs for indicating voice processing status according to some implementations. In some implementations, the electronic device 190 does not include any display screen, and full color LEDs provide a simple and low cost visual user interface as compared to a full screen display. Full color LEDs may be hidden below the upper surface of the electronic device and not visible to the user when not lit. Referring to fig. 8C and 8D, in some implementations, the full color LED array is physically disposed as an inverse function of the ring.
Reference will now be made in detail to the embodiments, examples of which are illustrated in the accompanying drawings. In the description of the foregoing detailed description, numerous specific details have been set forth in order to provide a thorough understanding of each described implementation. It will be apparent, however, to one skilled in the art that the various described implementations may be practiced without these specific details. In other instances, well-known methods, procedures, components, circuits, and networks have not been described in detail so as not to unnecessarily obscure aspects of the implementations.
It will be further understood that, although the terms first, second, etc. may be used in some instances to describe various elements, these elements should not be limited by these terms. These terms are only used to distinguish one element from another. For example, a first device may be referred to as a second device, and similarly, a second device may be referred to as a first device, without departing from the scope of the various described implementations. The first device and the second device are two devices, but they are not the same device.
The terminology used in the description of the various described implementations herein is for the purpose of describing particular implementations only and is not intended to be limiting. As used in the description of the various described implementations and the appended claims, the singular forms "a," "an," and "the" are intended to include the plural forms as well, unless the context clearly indicates otherwise. It will be further understood that the term "and/or" as used herein refers to and encompasses any and all possible representations of one or more of the relevant listed items. It will be further understood that the terms "comprises" and/or "comprising," when used herein, specify the presence of stated features, integers, steps, operations, elements, and/or components, but do not preclude the presence or addition of one or more other features, integers, steps, operations, elements, components, and/or groups thereof.
As used herein, the term "if" is optionally interpreted in accordance with the context to mean "when" or "based on" or "responsive to a determination" or "responsive to detection" or "based on a determination". Similarly, the phrase "if determined" or "if detected [ the condition or event ]" is optionally interpreted depending on the context to mean "upon determination" or "in response to determination" or "upon detection [ the condition or event ]" or "in response to detection [ the condition or event ]" or "in accordance with determination of the condition or event) is detected.
For the case of the system discussed above collecting information about a user, the user may be provided with an opportunity to join/exit a program or functional component that may collect personal information (e.g., information about the user's preferences or the usage of the smart device). Further, in some implementations, certain data may be anonymized in one or more ways before being stored or used, thereby removing personally identifiable information. For example, the identity of the user may be anonymized such that personally identifiable information cannot be determined for or associated with the user, as well as summarizing user preferences or user interactions (e.g., summarizing based on user demographics), rather than being associated with a particular user.
Although some of the various figures show multiple logic stages in a particular order, non-order related stages may be reordered and other stages may be combined or broken down. While some reordering or other groupings are specifically mentioned, other portions will be apparent to those of ordinary skill in the art, and thus, the ordering and groupings presented herein are not an exhaustive list of alternatives. Furthermore, it should be appreciated that these stages may be implemented in hardware, firmware, software, or any combination thereof.
The foregoing description, for purposes of explanation, has been described with reference to specific implementations. However, the above example discussions are not intended to be exhaustive or to limit the scope of the claims to the precise forms disclosed. Many modifications and variations are possible in light of the above teaching. The implementations were chosen in order to best explain the principles underlying the claims and their practical application to thereby enable others skilled in the art to best utilize the implementations with various modifications as are suited to the particular use contemplated.
Claims (9)
1. A method for noise reduction, comprising:
at an electronic device having one or more microphones, a speaker, one or more processors, and a memory storing one or more programs for execution by the one or more processors, the electronic device configured to wake up with any of a plurality of affordances, the plurality of affordances including i) a speech-based affordance that includes spoken hotwords and ii) a affordance other than the speech-based affordance:
Determining a noise profile of an environment surrounding the electronic device, wherein the noise profile comprises a frequency profile;
determining whether the noise profile would interfere with the speech-based availability, wherein determining whether the noise profile would interfere with the speech-based availability comprises: determining whether the noise profile would negatively affect recognition of the hotword in the speech input detected by the electronic device by determining whether the frequency profile would interfere with the hotword; and
in accordance with the determination that the noise profile would interfere with the voice-based availability, a prompt is presented to a user to wake up the electronic device using the availability of the plurality of availability other than the voice-based availability.
2. The method of claim 1, wherein determining whether the noise profile would negatively affect recognition of the hotword in a speech input comprises:
comparing the noise profile to a predetermined set of noise profiles associated with the electronic device, wherein noise profiles in the predetermined set of noise profiles are known to negatively affect recognition of the hotword in the speech input by the electronic device.
3. The method of claim 1 or 2, wherein the electronic device comprises a button and the availability of the plurality of availabilities other than the voice-based availability comprises the button.
4. The method of claim 3, wherein presenting a prompt to a user to wake up the electronic device using an availability of the plurality of availability other than the voice-based availability comprises:
illuminating the button on the electronic device.
5. The method of claim 1 or 2, wherein presenting a prompt to a user to wake up the electronic device using an availability of the plurality of availability other than the voice-based availability comprises:
a predefined audible sound is output.
6. The method of claim 1 or 2, wherein the electronic device comprises a display, and wherein presenting a prompt to a user to wake up the electronic device using an availability of the plurality of availability other than the voice-based availability comprises:
displaying the prompt on the display.
7. The method of claim 1 or 2, wherein the electronic device comprises one or more LED lights, and wherein presenting a prompt to a user to wake up the electronic device using an availability of the plurality of availability other than the voice-based availability comprises:
The prompt is displayed using the one or more LED lights.
8. An electronic device, comprising:
one or more microphones;
a speaker;
one or more processors; and
a memory storing one or more programs to be executed by the one or more processors, the electronic device configured to wake up by any of a plurality of availabilities including voice-based availabilities, the one or more programs comprising instructions for performing the method of any of claims 1-7.
9. A non-transitory computer readable storage medium storing one or more programs, the one or more programs comprising instructions, which when executed by an electronic device with one or more microphones, a speaker, and one or more processors, the electronic device is configured to wake up by any of a number of availabilities, including a speech-based availability, causing the electronic device to perform the method of any of claims 1-7.
Applications Claiming Priority (3)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US15/284,493 | 2016-10-03 | ||
US15/284,493 US10283138B2 (en) | 2016-10-03 | 2016-10-03 | Noise mitigation for a voice interface device |
PCT/US2017/054952 WO2018067577A1 (en) | 2016-10-03 | 2017-10-03 | Noise mitigation for a voice interface device |
Publications (2)
Publication Number | Publication Date |
---|---|
CN109791762A CN109791762A (en) | 2019-05-21 |
CN109791762B true CN109791762B (en) | 2023-09-05 |
Family
ID=60162260
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
CN201780058659.4A Active CN109791762B (en) | 2016-10-03 | 2017-10-03 | Noise Reduction for Voice Interface Devices |
Country Status (4)
Country | Link |
---|---|
US (4) | US10283138B2 (en) |
EP (3) | EP3520100B1 (en) |
CN (1) | CN109791762B (en) |
WO (1) | WO2018067577A1 (en) |
Families Citing this family (84)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US10509626B2 (en) | 2016-02-22 | 2019-12-17 | Sonos, Inc | Handling of loss of pairing between networked devices |
US10095470B2 (en) | 2016-02-22 | 2018-10-09 | Sonos, Inc. | Audio response playback |
US9947316B2 (en) | 2016-02-22 | 2018-04-17 | Sonos, Inc. | Voice control of a media playback system |
US10264030B2 (en) | 2016-02-22 | 2019-04-16 | Sonos, Inc. | Networked microphone device control |
US9965247B2 (en) | 2016-02-22 | 2018-05-08 | Sonos, Inc. | Voice controlled media playback system based on user profile |
US10743101B2 (en) | 2016-02-22 | 2020-08-11 | Sonos, Inc. | Content mixing |
US9978390B2 (en) | 2016-06-09 | 2018-05-22 | Sonos, Inc. | Dynamic player selection for audio signal processing |
US10152969B2 (en) | 2016-07-15 | 2018-12-11 | Sonos, Inc. | Voice detection by multiple devices |
US10134399B2 (en) | 2016-07-15 | 2018-11-20 | Sonos, Inc. | Contextualization of voice inputs |
US10115400B2 (en) | 2016-08-05 | 2018-10-30 | Sonos, Inc. | Multiple voice services |
US9942678B1 (en) | 2016-09-27 | 2018-04-10 | Sonos, Inc. | Audio playback settings for voice interaction |
US9743204B1 (en) | 2016-09-30 | 2017-08-22 | Sonos, Inc. | Multi-orientation playback device microphones |
US10283138B2 (en) | 2016-10-03 | 2019-05-07 | Google Llc | Noise mitigation for a voice interface device |
US10181323B2 (en) | 2016-10-19 | 2019-01-15 | Sonos, Inc. | Arbitration-based voice recognition |
US10467509B2 (en) | 2017-02-14 | 2019-11-05 | Microsoft Technology Licensing, Llc | Computationally-efficient human-identifying smart assistant computer |
US11100384B2 (en) | 2017-02-14 | 2021-08-24 | Microsoft Technology Licensing, Llc | Intelligent device user interactions |
US11010601B2 (en) | 2017-02-14 | 2021-05-18 | Microsoft Technology Licensing, Llc | Intelligent assistant device communicating non-verbal cues |
US11183181B2 (en) | 2017-03-27 | 2021-11-23 | Sonos, Inc. | Systems and methods of multiple voice services |
IT201700038880A1 (en) * | 2017-04-07 | 2018-10-07 | E Novia S R L | System for recognizing a user among a plurality of users in an environment |
US10902855B2 (en) * | 2017-05-08 | 2021-01-26 | Motorola Mobility Llc | Methods and devices for negotiating performance of control operations with acoustic signals |
JP6767926B2 (en) * | 2017-05-23 | 2020-10-14 | 東芝映像ソリューション株式会社 | Electronics, methods and programs |
US10783287B2 (en) * | 2017-06-14 | 2020-09-22 | International Business Machines Corporation | Employing natural language processing to facilitate geospatial analysis |
US10789949B2 (en) * | 2017-06-20 | 2020-09-29 | Bose Corporation | Audio device with wakeup word detection |
US10475449B2 (en) | 2017-08-07 | 2019-11-12 | Sonos, Inc. | Wake-word detection suppression |
US10048930B1 (en) | 2017-09-08 | 2018-08-14 | Sonos, Inc. | Dynamic computation of system response volume |
US10446165B2 (en) | 2017-09-27 | 2019-10-15 | Sonos, Inc. | Robust short-time fourier transform acoustic echo cancellation during audio playback |
US10051366B1 (en) | 2017-09-28 | 2018-08-14 | Sonos, Inc. | Three-dimensional beam forming with a microphone array |
US10482868B2 (en) | 2017-09-28 | 2019-11-19 | Sonos, Inc. | Multi-channel acoustic echo cancellation |
US10621981B2 (en) | 2017-09-28 | 2020-04-14 | Sonos, Inc. | Tone interference cancellation |
US10466962B2 (en) * | 2017-09-29 | 2019-11-05 | Sonos, Inc. | Media playback system with voice assistance |
US10362183B2 (en) * | 2017-11-10 | 2019-07-23 | Toshiba Tec Kabushiki Kaisha | System and method for natural language operation of multifunction peripherals |
US10880650B2 (en) | 2017-12-10 | 2020-12-29 | Sonos, Inc. | Network microphone devices with automatic do not disturb actuation capabilities |
US10818290B2 (en) | 2017-12-11 | 2020-10-27 | Sonos, Inc. | Home graph |
WO2019152722A1 (en) | 2018-01-31 | 2019-08-08 | Sonos, Inc. | Device designation of playback and network microphone device arrangements |
US11175880B2 (en) | 2018-05-10 | 2021-11-16 | Sonos, Inc. | Systems and methods for voice-assisted media content selection |
US10847178B2 (en) | 2018-05-18 | 2020-11-24 | Sonos, Inc. | Linear filtering for noise-suppressed speech detection |
US10959029B2 (en) | 2018-05-25 | 2021-03-23 | Sonos, Inc. | Determining and adapting to changes in microphone performance of playback devices |
US10681460B2 (en) | 2018-06-28 | 2020-06-09 | Sonos, Inc. | Systems and methods for associating playback devices with voice assistant services |
US11076035B2 (en) | 2018-08-28 | 2021-07-27 | Sonos, Inc. | Do not disturb feature for audio notifications |
US10461710B1 (en) | 2018-08-28 | 2019-10-29 | Sonos, Inc. | Media playback system with maximum volume setting |
US10587430B1 (en) | 2018-09-14 | 2020-03-10 | Sonos, Inc. | Networked devices, systems, and methods for associating playback devices based on sound codes |
US10878811B2 (en) | 2018-09-14 | 2020-12-29 | Sonos, Inc. | Networked devices, systems, and methods for intelligently deactivating wake-word engines |
US11024331B2 (en) | 2018-09-21 | 2021-06-01 | Sonos, Inc. | Voice detection optimization using sound metadata |
US10811015B2 (en) | 2018-09-25 | 2020-10-20 | Sonos, Inc. | Voice detection optimization based on selected voice assistant service |
US11100923B2 (en) | 2018-09-28 | 2021-08-24 | Sonos, Inc. | Systems and methods for selective wake word detection using neural network models |
US10692518B2 (en) | 2018-09-29 | 2020-06-23 | Sonos, Inc. | Linear filtering for noise-suppressed speech detection via multiple network microphone devices |
US11899519B2 (en) | 2018-10-23 | 2024-02-13 | Sonos, Inc. | Multiple stage network microphone device with reduced power consumption and processing load |
EP3654249A1 (en) | 2018-11-15 | 2020-05-20 | Snips | Dilated convolutions and gating for efficient keyword spotting |
US11183183B2 (en) | 2018-12-07 | 2021-11-23 | Sonos, Inc. | Systems and methods of operating media playback systems having multiple voice assistant services |
US11132989B2 (en) | 2018-12-13 | 2021-09-28 | Sonos, Inc. | Networked microphone devices, systems, and methods of localized arbitration |
KR20200074690A (en) * | 2018-12-17 | 2020-06-25 | 삼성전자주식회사 | Electonic device and Method for controlling the electronic device thereof |
US10602268B1 (en) | 2018-12-20 | 2020-03-24 | Sonos, Inc. | Optimization of network microphone devices using noise classification |
KR102570384B1 (en) * | 2018-12-27 | 2023-08-25 | 삼성전자주식회사 | Home appliance and method for voice recognition thereof |
CN109669663B (en) * | 2018-12-28 | 2021-10-12 | 百度在线网络技术（北京）有限公司 | Method and device for acquiring range amplitude, electronic equipment and storage medium |
US11315556B2 (en) | 2019-02-08 | 2022-04-26 | Sonos, Inc. | Devices, systems, and methods for distributed voice processing by transmitting sound data associated with a wake word to an appropriate device for identification |
US10867604B2 (en) | 2019-02-08 | 2020-12-15 | Sonos, Inc. | Devices, systems, and methods for distributed voice processing |
US11170783B2 (en) | 2019-04-16 | 2021-11-09 | At&T Intellectual Property I, L.P. | Multi-agent input coordination |
CN110109645A (en) * | 2019-04-30 | 2019-08-09 | 百度在线网络技术（北京）有限公司 | A kind of interactive music audition method, device and terminal |
US11120794B2 (en) | 2019-05-03 | 2021-09-14 | Sonos, Inc. | Voice assistant persistence across multiple network microphone devices |
KR20240049648A (en) | 2019-05-31 | 2024-04-16 | 애플 인크. | User interfaces for audio media control |
US11010121B2 (en) | 2019-05-31 | 2021-05-18 | Apple Inc. | User interfaces for audio media control |
US10867608B1 (en) | 2019-05-31 | 2020-12-15 | Apple Inc. | Multi-user configuration |
US11361756B2 (en) | 2019-06-12 | 2022-06-14 | Sonos, Inc. | Conditional wake word eventing based on environment |
US10586540B1 (en) | 2019-06-12 | 2020-03-10 | Sonos, Inc. | Network microphone device with command keyword conditioning |
US11200894B2 (en) | 2019-06-12 | 2021-12-14 | Sonos, Inc. | Network microphone device with command keyword eventing |
CN112102848B (en) * | 2019-06-17 | 2024-04-26 | 华为技术有限公司 | Method, chip and terminal for identifying music |
US11380312B1 (en) * | 2019-06-20 | 2022-07-05 | Amazon Technologies, Inc. | Residual echo suppression for keyword detection |
US10871943B1 (en) | 2019-07-31 | 2020-12-22 | Sonos, Inc. | Noise classification for event detection |
US11138969B2 (en) | 2019-07-31 | 2021-10-05 | Sonos, Inc. | Locally distributed keyword detection |
US11138975B2 (en) | 2019-07-31 | 2021-10-05 | Sonos, Inc. | Locally distributed keyword detection |
US11676589B2 (en) * | 2019-09-17 | 2023-06-13 | Global Strategies International LLC | Systems and methods for voice search and response retrieval |
US11615801B1 (en) * | 2019-09-20 | 2023-03-28 | Apple Inc. | System and method of enhancing intelligibility of audio playback |
US20210090561A1 (en) * | 2019-09-24 | 2021-03-25 | Amazon Technologies, Inc. | Alexa roaming authentication techniques |
US11189286B2 (en) | 2019-10-22 | 2021-11-30 | Sonos, Inc. | VAS toggle based on device orientation |
US11200900B2 (en) | 2019-12-20 | 2021-12-14 | Sonos, Inc. | Offline voice control |
US11562740B2 (en) | 2020-01-07 | 2023-01-24 | Sonos, Inc. | Voice verification for media playback |
US11556307B2 (en) | 2020-01-31 | 2023-01-17 | Sonos, Inc. | Local voice data processing |
US11308958B2 (en) | 2020-02-07 | 2022-04-19 | Sonos, Inc. | Localized wakeword verification |
US11727919B2 (en) | 2020-05-20 | 2023-08-15 | Sonos, Inc. | Memory allocation for keyword spotting engines |
US11308962B2 (en) | 2020-05-20 | 2022-04-19 | Sonos, Inc. | Input detection windowing |
US11482224B2 (en) | 2020-05-20 | 2022-10-25 | Sonos, Inc. | Command keywords with input detection windowing |
US11698771B2 (en) | 2020-08-25 | 2023-07-11 | Sonos, Inc. | Vocal guidance engines for playback devices |
US11551700B2 (en) | 2021-01-25 | 2023-01-10 | Sonos, Inc. | Systems and methods for power-efficient keyword detection |
US11960615B2 (en) | 2021-06-06 | 2024-04-16 | Apple Inc. | Methods and user interfaces for voice-based user profile management |
Citations (3)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
CN1708782A (en) * | 2002-11-02 | 2005-12-14 | 皇家飞利浦电子股份有限公司 | Method for operating a speech recognition system |
JP2008109595A (en) * | 2006-10-27 | 2008-05-08 | Nec Corp | Automatic speech method switching system, server, method, and program |
US8438023B1 (en) * | 2011-09-30 | 2013-05-07 | Google Inc. | Warning a user when voice input to a device is likely to fail because of background or other noise |
Family Cites Families (21)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US6965863B1 (en) * | 1998-11-12 | 2005-11-15 | Microsoft Corporation | Speech recognition user interface |
US7117149B1 (en) * | 1999-08-30 | 2006-10-03 | Harman Becker Automotive Systems-Wavemakers, Inc. | Sound source classification |
US20030022318A1 (en) * | 2000-01-25 | 2003-01-30 | Epiclone, Inc. | Method for thermocycling amplification of nucleic acid sequences and the generation of related peptides thereof |
US7295982B1 (en) * | 2001-11-19 | 2007-11-13 | At&T Corp. | System and method for automatic verification of the understandability of speech |
JP3826032B2 (en) * | 2001-12-28 | 2006-09-27 | 株式会社東芝 | Speech recognition apparatus, speech recognition method, and speech recognition program |
US6788527B2 (en) * | 2002-05-31 | 2004-09-07 | Hewlett-Packard Development Company, L.P. | Tablet computer keyboard and system and method incorporating same |
CA2429171C (en) * | 2002-06-27 | 2016-05-17 | Yi Tang | Voice controlled business scheduling system and method |
BR0312973A (en) * | 2002-07-26 | 2005-08-09 | Motorola Inc | Method for fast dynamic background noise estimation |
US7233894B2 (en) * | 2003-02-24 | 2007-06-19 | International Business Machines Corporation | Low-frequency band noise detection |
GB2417812B (en) * | 2003-05-08 | 2007-04-18 | Voice Signal Technologies Inc | A signal-to-noise mediated speech recognition algorithm |
US7826945B2 (en) * | 2005-07-01 | 2010-11-02 | You Zhang | Automobile speech-recognition interface |
US8315412B2 (en) | 2007-10-17 | 2012-11-20 | The Chamberlain Group, Inc. | Method and apparatus to facilitate use of background noise when providing secure access to equipment |
US7516068B1 (en) * | 2008-04-07 | 2009-04-07 | International Business Machines Corporation | Optimized collection of audio for speech recognition |
WO2012169679A1 (en) * | 2011-06-10 | 2012-12-13 | 엘지전자 주식회사 | Display apparatus, method for controlling display apparatus, and voice recognition system for display apparatus |
US8452597B2 (en) * | 2011-09-30 | 2013-05-28 | Google Inc. | Systems and methods for continual speech recognition and detection in mobile computing devices |
WO2014064324A1 (en) * | 2012-10-26 | 2014-05-01 | Nokia Corporation | Multi-device speech recognition |
WO2014107413A1 (en) | 2013-01-04 | 2014-07-10 | Kopin Corporation | Bifurcated speech recognition |
US9530407B2 (en) * | 2014-06-11 | 2016-12-27 | Honeywell International Inc. | Spatial audio database based noise discrimination |
KR102387567B1 (en) * | 2015-01-19 | 2022-04-18 | 삼성전자주식회사 | Method and apparatus for speech recognition |
US9305155B1 (en) * | 2015-02-12 | 2016-04-05 | United Services Automobile Association (Usaa) | Toggling biometric authentication |
US10283138B2 (en) * | 2016-10-03 | 2019-05-07 | Google Llc | Noise mitigation for a voice interface device |
-
2016
- 2016-10-03 US US15/284,493 patent/US10283138B2/en active Active
-
2017
- 2017-10-03 EP EP17788008.5A patent/EP3520100B1/en active Active
- 2017-10-03 EP EP23203055.1A patent/EP4283613A3/en active Pending
- 2017-10-03 CN CN201780058659.4A patent/CN109791762B/en active Active
- 2017-10-03 WO PCT/US2017/054952 patent/WO2018067577A1/en active Application Filing
- 2017-10-03 EP EP20205273.4A patent/EP3799037B1/en active Active
-
2019
- 2019-03-27 US US16/367,174 patent/US10748552B2/en active Active
-
2020
- 2020-08-17 US US16/995,654 patent/US20210201927A1/en not_active Abandoned
-
2021
- 2021-04-08 US US17/225,693 patent/US11869527B2/en active Active
Patent Citations (3)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
CN1708782A (en) * | 2002-11-02 | 2005-12-14 | 皇家飞利浦电子股份有限公司 | Method for operating a speech recognition system |
JP2008109595A (en) * | 2006-10-27 | 2008-05-08 | Nec Corp | Automatic speech method switching system, server, method, and program |
US8438023B1 (en) * | 2011-09-30 | 2013-05-07 | Google Inc. | Warning a user when voice input to a device is likely to fail because of background or other noise |
Also Published As
Publication number | Publication date |
---|---|
EP3520100A1 (en) | 2019-08-07 |
EP3799037A1 (en) | 2021-03-31 |
US20180096696A1 (en) | 2018-04-05 |
EP3520100B1 (en) | 2021-01-13 |
US10748552B2 (en) | 2020-08-18 |
EP4283613A3 (en) | 2024-02-28 |
US20190221227A1 (en) | 2019-07-18 |
EP4283613A2 (en) | 2023-11-29 |
US20210201927A1 (en) | 2021-07-01 |
US20210225387A1 (en) | 2021-07-22 |
EP3799037B1 (en) | 2023-12-06 |
US10283138B2 (en) | 2019-05-07 |
WO2018067577A1 (en) | 2018-04-12 |
CN109791762A (en) | 2019-05-21 |
US11869527B2 (en) | 2024-01-09 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
CN109791762B (en) | Noise Reduction for Voice Interface Devices | |
CN107910007B (en) | Multi-user personalization on a voice interface device | |
US11670297B2 (en) | Device leadership negotiation among voice interface devices | |
WO2018067528A1 (en) | Device leadership negotiation among voice interface devices |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
PB01 | Publication | ||
PB01 | Publication | ||
SE01 | Entry into force of request for substantive examination | ||
SE01 | Entry into force of request for substantive examination | ||
GR01 | Patent grant | ||
GR01 | Patent grant |