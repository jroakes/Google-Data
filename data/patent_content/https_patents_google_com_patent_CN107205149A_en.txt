CN107205149A - The motion vectors reference selection tracked by reference to frame buffer - Google Patents
The motion vectors reference selection tracked by reference to frame buffer Download PDFInfo
- Publication number
- CN107205149A CN107205149A CN201611224939.1A CN201611224939A CN107205149A CN 107205149 A CN107205149 A CN 107205149A CN 201611224939 A CN201611224939 A CN 201611224939A CN 107205149 A CN107205149 A CN 107205149A
- Authority
- CN
- China
- Prior art keywords
- frame
- motion vector
- reference frame
- identifier
- buffer index
- Prior art date
- Legal status (The legal status is an assumption and is not a legal conclusion. Google has not performed a legal analysis and makes no representation as to the accuracy of the status listed.)
- Granted
Links
Classifications
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/50—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using predictive coding
- H04N19/503—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using predictive coding involving temporal prediction
- H04N19/51—Motion estimation or motion compensation
- H04N19/513—Processing of motion vectors
- H04N19/517—Processing of motion vectors by encoding
- H04N19/52—Processing of motion vectors by encoding by predictive encoding
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/102—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or selection affected or controlled by the adaptive coding
- H04N19/103—Selection of coding mode or of prediction mode
- H04N19/105—Selection of the reference unit for prediction within a chosen coding or prediction mode, e.g. adaptive choice of position and number of pixels used for prediction
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/102—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or selection affected or controlled by the adaptive coding
- H04N19/103—Selection of coding mode or of prediction mode
- H04N19/109—Selection of coding mode or of prediction mode among a plurality of temporal predictive coding modes
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/134—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or criterion affecting or controlling the adaptive coding
- H04N19/136—Incoming video signal characteristics or properties
- H04N19/137—Motion inside a coding unit, e.g. average field, frame or block difference
- H04N19/139—Analysis of motion vectors, e.g. their magnitude, direction, variance or reliability
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/169—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding
- H04N19/17—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding the unit being an image region, e.g. an object
- H04N19/172—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding the unit being an image region, e.g. an object the region being a picture, frame or field
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/169—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding
- H04N19/17—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding the unit being an image region, e.g. an object
- H04N19/176—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding the unit being an image region, e.g. an object the region being a block, e.g. a macroblock
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/42—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals characterised by implementation details or hardware specially adapted for video compression or decompression, e.g. dedicated software implementation
- H04N19/423—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals characterised by implementation details or hardware specially adapted for video compression or decompression, e.g. dedicated software implementation characterised by memory arrangements
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/50—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using predictive coding
- H04N19/503—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using predictive coding involving temporal prediction
- H04N19/51—Motion estimation or motion compensation
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/50—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using predictive coding
- H04N19/503—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using predictive coding involving temporal prediction
- H04N19/51—Motion estimation or motion compensation
- H04N19/513—Processing of motion vectors
Abstract
The invention discloses the motion vectors reference tracked by reference to frame buffer selection.Coding or decoding video signal include determining multiple candidate motion vectors for current block, and the candidate motion vector includes being used to predict the first motion vector of the same position block of the first frame in.The reference frame identifier associated with the first motion vector can be made comparisons with the reference buffer index of the reference frame of the current block for predicting the second frame.Indexed under the same conditions with reference to frame identifier and reference buffer, before the first motion vector to advance to remaining candidate motion vector in multiple candidate motion vectors.
Description
Background technology
Digital video frequency flow represents video usually using frame or rest image sequence.Each frame can include many pieces, its
And then information description for the value of the color of pixel, brightness or other attributes can be included.Data volume in exemplary video streams
It is big, and the transmission and storage of video can use considerable calculating or the communication resource.Due to being related in video data
And to mass data and result in the need for high performance compression for transmitting and store.In block-based codec, this is related to
And to Predicting Technique, the prediction including the use of motion vector.
The content of the invention
Present disclose relates generally to be coded and decoded using computing device to the vision data of such as video stream data,
The video flowing has frame sequence, and each frame has block, and each block has pixel.The disclosure is included in first to frame sequence
After frame coding, store for the reference buffer of each index in multiple reference frames and refer to frame identifier, in storage
Afterwards by updating and update multiple reference frames with reference to the associated reference frame of frame identifier, determine after the updating for the
Multiple candidate motion vectors of the current block of two frames, multiple candidate motion vectors include the same position block for being used for the first frame in of prediction
First motion vector, performs the motion search of the current block in the reference frame in multiple reference frames to generate after the updating
Two motion vectors, and the reference buffer that will be stored together with the reference frame identifier of the reference frame with being associated with the first motion vector
Device is indexed makes comparisons with the reference buffer index of the reference frame used in commission, the reference of the reference frame used in commission
The reference buffer that buffer index matching is stored together with being associated with the reference frame identifier of the reference frame of the first motion vector
Under conditions of index, by the first motion vector advance to for encode current block multiple candidate motion vectors in remaining motion
Before vector.
One side disclosed herein includes coding and decoding vision data, wherein, second frame is in the sequence
After first frame, last frame in one in the multiple reference frames sequence that is included in before present frame is encoded, and
With last frame identifier as referring to frame identifier, and update that multiple reference frames include will be with last frame identification
The associated reference buffer index upgrade of symbol is indexed into the reference buffer of the first reference frame.Multiple reference frames include gold frame
With alternative reference frame, and update multiple reference frames and include only updating the reference buffer associated with last frame identifier
Index.Multiple reference frames are included with gold frame identifier as the gold frame with reference to frame identifier and with alternative reference frame mark
Symbol is known as the alternative reference frame with reference to frame identifier；And it is following at least one：Updating that multiple reference frames include will be with
The reference buffer index of the associated reference buffer index upgrade Cheng Xin of alternative reference frame identifier alternative reference frame；Or
Person, which updates multiple reference frames, to be included the reference buffer index upgrade Cheng Xin associated with gold frame identifier gold frame
Reference buffer is indexed.
One side disclosed herein includes coding and decoding vision data, wherein, update multiple reference frame bags
Renewal at least two reference frames associated with respective reference frame identifier after storing are included, multiple candidate motion vectors include
For the 3rd motion vector of the same position block for predicting the first frame in, the different references in multiple reference frames are performed after the updating
Second piece of frame in performs the second motion search to generate the 4th motion vector, by the reference frame with being associated with the 3rd motion vector
The reference buffer index that stores together of reference frame identifier and the ginseng of reference frame that is used in the second motion search is performed
Buffer index is examined to make comparisons, by the first motion vector advance to for encode current block multiple candidate motion vectors in its
Include advanceing to the first motion vector into multiple candidate motion vectors for encoding the 3rd motion vector before remaining motion vector
In remaining motion vector before, and the reference buffer of reference frame used in the second motion search is performed indexes matching
, will under conditions of the reference buffer index stored together with being associated with the reference frame identifier of the reference frame of the 3rd motion vector
Second motion vector is advanceed to before remaining motion vector in multiple candidate motion vectors for the 4th motion vector of coding.
The one side of device specifically described herein includes the non-transitory memory of processor and store instruction, and the instruction makes
Computing device method is obtained, this method includes：After being encoded to the first frame of frame sequence, store in multiple reference frames
The reference buffer of each indexes and refers to frame identifier, associated with reference to frame identifier by updating after storing
Reference frame updates multiple reference frames, determines multiple candidate motion vectors of the current block for the second frame after the updating, many
Individual candidate motion vector includes being used to predict the first motion vector of the same position block of the first frame in, performs after the updating multiple
The motion search of the current block in reference frame in reference frame, and will be with being associated with the first motion to generate the second motion vector
Reference buffer index and the ginseng of the reference frame used in commission that the reference frame identifier of the reference frame of vector is stored together
Examine buffer index to make comparisons, the reference buffer index matching of the reference frame used in commission is with being associated with the first motion arrow
Under conditions of the reference buffer index that the reference frame identifier of the reference frame of amount is stored together, the first motion vector is advanceed to
Before remaining motion vector in multiple candidate motion vectors for encoding current block.
It describe in detail these and other of the disclosure in addition in described in detail below, appended claims and accompanying drawing
Aspect.
Brief description of the drawings
Here description is referred to the following accompanying drawing, and identical reference marker is referred in multiple figures in the accompanying drawings
Same section.
Fig. 1 is the schematic diagram that Video coding conciliates code system.
Fig. 2 can be achieved on the block diagram of the example of the computing device of cell site and receiving station.
Fig. 3 is the figure for the video flowing that encode and then decode.
Fig. 4 is the block diagram of the video compression system of the one side according to teachings herein.
Fig. 5 is the block diagram that decompression systems are pressed according to the video for the another aspect instructed herein.
Fig. 6 is the flow chart for tracking the process to select motion vectors reference by reference to frame buffer.
Fig. 7 is the figure of an example of the reference buffer renewal for the process of explanation figure 6.
Embodiment
The bandwidth needed for transmitting or storage video flowing can be reduced come compressed video data by multiple technologies.Video flowing can
To be encoded into bit stream, this may relate to compression, and be then transmitted to and bit stream can be decoded or decompressed
So that it is ready for the decoder watched or further handled.The compression of video flowing, which is generally utilized, passes through space and/or fortune
The room and time correlation for the vision signal that dynamic compensation prediction is carried out.For example, inter prediction uses one or more motion arrows
Measure that next life is blocking (also referred to as prediction block), the block is similar to use previous coding and the pixel of decoding to be encoded current
Block.By being encoded to the difference between motion vector and two blocks, receiving the decoder of the signal of coding can create again
Build current block.
For generating frame of each motion vectors reference of prediction block in addition to present frame, i.e. reference frame.Reference frame can be with
It is located in video flowing sequence before or after present frame.For example, for the common reference frame encoded to present frame
It is last frame, the frame is frame in the sequence before present frame.Generated using more than one motion vector
In the case of prediction block, each motion vector may be referred to single reference frame.Using the prediction of single prediction block (for example, using
The generation of single motion vector) block be referred to herein as single reference case, and use more than one reference block to predict (example
Such as, generated using two or more motion vectors) block be referred to herein as hybrid reference situation.
Motion vectors reference can be used during inter prediction.Generally, motion vectors reference is to working as
Different masses before preceding piece carry out encoding identified motion vector.Motion vectors reference can be used come to current for encoding
The motion vector of block carries out differently coding (and therefore decoding).Motion vector, which is differently encoded, by this way to allow
The motion vector of coding is included to bit in video streaming as example small fixed number.Alternatively or additionally, it can make
With motion vectors reference as determining in many candidate motion vectors for the motion vector encoded to current block
One.Motion vectors reference can be obtained from the block for being spatially adjacent to current block.Motion vectors reference can also be from
Adjacent block is (also referred to as with position block, because it is located at and the current block identical picture to be encoded for its frame on time
At plain position) determine temporal motion vector reference
As described above, each motion vector may be referred to one in some available reference frames.Therefore, each motion vectors reference
It may be referred to one in some available reference frames.It is available reference that the reference frame for indicating to include motion vectors reference, which can be sent,
The signal of one in frame.As signaling replacing for frame identifier (it being relatively long bit sequence) of itself
Generation, signal can be the shorter bit sequence for the type for recognizing reference frame.For example, in some Video Codecs, there is three
Plant reference frame --- last frame (LAST_FRAME), gold frame (GOLDEN_FRAME) and alternative reference frame (ALTREF_
FRAME)。
Disclosed aspect can check that the reference frame of the motion vector for predicting the same position block in previous coding frame is
It is no to be and the reference frame identical type for current block.If there is same type, then it is assumed that motion vector is with being unsatisfactory for this
Any other motion vector of test compares the higher priority for being in and being used for encoding current vector.If for example, current block is
Chosen LAST_FRAME, and its in previous frame also have selected LAST_FRAME with position block, then it is considered that this is with position block
Motion vector as motion vectors reference be in be used for current motion vector encode higher priority.
Problem is there may be in the above-mentioned methods, because a fact is that, reference buffer will be by more after each frame is encoded
Newly, and therefore one or more of reference buffer frame can be substituted with newly encoded frame.Therefore, even in previous frame
Same reference frame, such as LAST_FRAME are selected respectively with two blocks in present frame, and it can not also point to practically identical
Reference frame buffer.The each side of disclosed realization by recognize in previous frame whether used with position block it is identical with current block
Reference frame solve this problem.One or more motion vectors of same position block can be just considered as and it only when response is true
Its motion vectors reference, which is compared, to be treated as being in the higher priority for being used for encoding current motion vector.
More details are described after it can use the initial discussion of environment of teaching herein wherein.
Fig. 1 is the schematic diagram that Video coding conciliates code system 100.Cell site 102 can be for example with being retouched in such as Fig. 2
The computer of the inside configuration for the hardware stated.However, other modes that are appropriately carried out of cell site 102 are possible.For example, can be with
The processing of cell site 102 is distributed between devices.
Network 104 can connect cell site 102 and receiving station 106 for the coding and decoding of video flowing.Specifically, may be used
With the encoded video stream in cell site 102, and coded video flowing can be decoded in receiving station 106.Network 104 can be with
It is such as internet.Network 104 can also be LAN (LAN), wide area network (WAN), Virtual Private Network (VPN), cell phone
Network or any other means that video flowing cell site 102 is transferred to (in this example) receiving station 106.
In one example, receiving station 106 can be the calculating of the inside configuration with the hardware described in such as Fig. 2
Machine.However, other modes that are appropriately carried out of receiving station 106 are possible.For example, receiving station can be distributed between devices
106 processing.
The other embodiment that Video coding conciliates code system 100 is possible.For example, embodiment can omit network
104.In another embodiment, video flowing can be encoded and then be stored for being transmitted into receiving station 106 afterwards
Or any other equipment with memory.In one embodiment, receiving station 106 is received (for example, via network 104, meter
Calculation machine bus and/or some communication path) coding video flowing and store the video flowing for later decoding.Exemplary
In embodiment, RTP (RTP) is used by the transmission of the encoded video of network 104.In another embodiment
In, the host-host protocol in addition to RTP, such as the dynamic image distribution agreement based on HTTP (HTTP) can be used.
For example, working as in video conferencing system in use, cell site 102 and/or receiving station 106 can be included as described below
Be used for video flowing carry out code and decode the ability of the two.For example, receiving station 106 can be video conference participant, its
The video bit stream of coding is received from videoconference server (for example, cell site 102) to decode and watch and further will
The video bits stream encryption of their own is concurrently mapped to videoconference server to be decoded and watched by other participants.
Fig. 2 can be achieved on the block diagram of the example of the computing device 200 of cell site and receiving station.For example, computing device 200
One or two in Fig. 1 cell site 102 and receiving station 106 can be realized.Computing device 200, which can have, includes multiple meters
Calculate the form or the form of single computing device of the computing system of equipment, such as mobile phone, tablet PC, calculating on knee
Machine, notebook, desktop computer etc..
CPU 202 in computing device 200 can be CPU.As an alternative, CPU 202 can be it is existing or
Develop later can manipulate or processing information any other type one or more equipment.Although can be as shown with single
Processor (for example, CPU 202) puts into practice disclosed embodiment, but can use more than a processor to realize speed
Advantage in terms of degree and efficiency.
In embodiments, the memory 204 in computing device 200 can be read-only storage (ROM) equipment or random
Access reservoir (RAM) equipment.The storage device of any other appropriate type can be used as memory 204.Memory 204 can
With including by the codes accessed using bus 212 of CPU 202 and data 206.Memory 204 can also include operating system 208
With application program 210, application program 210 includes at least one program for allowing CPU 202 to perform method described here.Example
Such as, application program 210 can include applying 1 to N, and it also includes the Video coding application for performing method described here.Calculate
Equipment 200 can also include auxiliary storage 214, and it may, for example, be the storage card being used together with mobile computing device.Because
Video communication sessions can include substantial amounts of information, it is possible to completely or partially be stored in it according to the need for processing
In auxiliary storage 214 and it is loaded into memory 204.
Computing device 200 can also include one or more output equipments, such as display 218.In one example, show
It can be touch-sensitive display to show device 218, and it combines display with can be used to the tactile sensor of sensing touch input.Can be with
Display 218 is coupled to CPU 202 via bus 212.In addition to display 218 or alternatively, it can provide fair
Perhaps user program or otherwise use computing device 200 other output equipments.When output equipment is or including display
During device, display can be realized in a variety of ways, including pass through liquid crystal display (LCD), cathode-ray tube (CRT) display
Or light emitting diode (LED) display, such as organic LED (OLED) display.
Computing device 200 can also include image sensing apparatus 220 or communicate, such as phase of image sensing apparatus 220
Machine or now exist or develop later can sense any of image (such as image of the user of operating computing device 200)
Other image sensing apparatus 220.Image sensing apparatus 220 may be positioned such that the use of its point operation computing device 200
Family.In this example, the position of image sensing apparatus 220 and optical axis may be configured so that visual field includes being directly adjacent to display
218 and display 218 from its visible region.
Computing device 200 can also include sound sensing equipment 222 or communicate, such as wheat of sound sensing equipment 222
Gram wind or any other sound sensing that can sense the sound near computing device 200 for existing or developing later now are set
It is standby.Sound sensing equipment 222 may be oriented such that the user of its point operation computing device 200, and can be configured
Into the sound that reception is produced by user while user's operating computing device 200, such as voice or other sounding.
, can be with although the CPU 202 and memory 204 of computing device 200 are depicted as being integrated into individual unit by Fig. 2
Utilize other configurations.Can by CPU 202 operation can across directly or through LAN or other networks coupling it is many
Individual machine (each machine has one or more processors) distribution.Memory 204 can be distributed across multiple machines, such as based on
Memory in multiple machines of the operation of the memory or execution computing device 200 of network.Although having herein been described as
Single bus, but the bus 212 of computing device 200 can be made up of multiple buses.Furthermore, it is possible to which auxiliary storage 214 is direct
It is coupled to other components of computing device 200 or can be accessed via network, and it is (all to include single integrated unit
Such as storage card) or multiple units (such as multiple storage cards).Therefore computing device 200 can be realized with various configurations.
Fig. 3 is the figure of the example for the video flowing 300 that encode and then decode.Video flowing 300 includes video sequence
302.In next stage, video sequence 302 includes many consecutive frames 304.Although three frames are depicted as consecutive frame 304, video
Sequence 302 can include any number of consecutive frame 304.Then, consecutive frame 304 can be further subdivided into independent frame, example
Such as frame 306.In next stage, frame 306 can be divided into a series of planes or section 308.Section 308 can for example allow parallel place
The subset of the frame of reason.Section 308 can also be the subset for the frame that video data can be separated into independent color.For example, colour is regarded
The frame 306 of frequency evidence can include briliancy plane and two colorimetric planes.Section 308 can be adopted at varying resolutions
Sample.
No matter whether frame 306 is divided into section 308, frame 306 can be further subdivided into block 310, it can be included
Corresponding to the data of 16 × 16 pixels in such as frame 306.Block 310 can also be arranged to include one from pixel data
The data of individual or multiple planes.Block 310 can also have any other appropriate size, such as 4 × 4 pixels, 8 × 8 pixels, 16 ×
8 pixels, 8 × 16 pixels, 16 × 16 pixels or bigger.Discuss, can be incited somebody to action according to teaching herein in greater detail below
Other regions that block 310 or subregion from frame 306 are obtained carry out subregion.That is, the region to be encoded can be partitioned into it is smaller
Sub-block or the large area in region.More specifically, the current region that will can be encoded is divided into using for example different predictive modes
The relatively small pixel group of coding.These pixel groups can be referred to as prediction sub-block, prediction subregion or predicting unit herein.
Under certain situation, a prediction sub-district comprising the whole region to be encoded is only existed, because a prediction is used only in the region
Pattern is encoded.Unless otherwise indicated, the description coded and decoded to block in figure 4 below and 5 be equally applicable to compared with
Prediction sub-block, prediction sub-district or the predicting unit in big region.
Fig. 4 is the block diagram of the encoder 400 according to embodiment.As set forth above, it is possible to be such as stored in by providing
Computer software programs in reservoir (for example, memory 204) realize encoder 400 in cell site 102.Computer software
Program can include machine instruction, and the machine instruction causes cell site 102 to scheme when being performed by processor (such as CPU 202)
Mode described in 4 is encoded to video data.Encoder 400 can also be embodied as including in such as cell site 102
Specialized hardware.Encoder 400, which has, is used to perform the various functions in forward path (being shown with connection solid line) with using regarding
Frequency stream 300 produces following rear classes of coding or the bit stream 420 of compression as input：Prediction stage 402, conversion within the frame/frames
Level 404, quantized level 406 and entropy code level 408.Encoder 400 can also include reconstruction path (being shown with connection dotted line), use
In the frame for rebuilding the coding for being used for following block.In Fig. 4, encoder 400, which has, is used to perform the various functions in reconstruction path
Following rear classes：De-quantization level 410, inverse transformation stage 412, reconstruction level 414 and loop filtering level 416.Encoder can be used
400 other structures variant is encoded to video flowing 300.
When video flowing 300 is presented for coding, (for example, area) (such as block) it can be handled in units of pixel
Each frame 306.At prediction stage 402 within the frame/frames, infra-frame prediction (also referred to as intra-prediction) or inter prediction can be used
(referred to herein as a prediction or between predict) each piece is encoded.It is in any case possible to form prediction
(or fallout predictor) block.In the case of infra-frame prediction, prediction block can be from the present frame for being previously encoded and having rebuild
Sample is formed.In the case of inter prediction, prediction block can be from the sample shape in the reference frame of one or more first front parts
Into.
Next, again referring to Fig. 4, can subtract prediction block to produce from current block at predicted level 402 within the frame/frames
Raw residual block (also referred to as residual error (residual)).Conversion stage 404 changes commanders real transform into such as frequency domain using block-based change
In conversion coefficient.Such block-based conversion includes such as discrete cosine transform (DCT) and asymmetric discrete sine transform
(ADST).Other block-based conversion are possible.Furthermore, it is possible to apply the combination of different conversion to single residual error.In conversion
Application an example in, DCT transforms to residual block in frequency domain, wherein, transform coefficient values be based on spatial frequency.It is minimum
Frequency (DC) coefficient is at the upper left side of matrix and highest frequency coefficient is at the lower right of matrix.It is worth noting that, prediction
The size of block and thus obtained residual block can be differently configured from the size of transform block.For example, residual block or region can be divided into
Less piece of region, to the less piece of independent conversion of region application.
Conversion coefficient is converted into discrete value by quantized level 406 using quantizer values or quantization level, and it is referred to as quantifying
Conversion coefficient.For example, the conversion coefficient divided by quantizer values and truncation (truncated) can be made.Then, the conversion of quantization
Coefficient carries out entropy code by entropy code level 408.Any number of technology (including token and binary tree) can be used to perform
Entropy code.Then, (it can include for example used pre- the coefficient of entropy code with the other information for being decoded to block
Type, alternative types, motion vector and the quantizer values of survey) compression bit stream 420 is output to together.The bit stream of compression
420 are also referred to as the video bit stream of the video flowing of coding or coding, and the term herein will be by interchangeably
Use.
Reconstruction path (being shown with connection dotted line) in Fig. 4 can be used to ensure that encoder 400 and decoder 500 (below
Description) the two decodes the bit stream 420 of compression using identical reference frame.Reconstruction path is performed with retouching in further detail below
The functionally similar function of occurring during the decoding process stated, is included in the conversion coefficient solution amount to quantization at de-quantization level 410
Change and (also referred to as derivative is residual to produce derivative residual block to the conversion coefficient progress inverse transformation of de-quantization at inverse transformation stage 412
Difference).Rebuilding at level 414, the prediction block predicted at prediction stage 402 within the frame/frames can be added with derivative residual error to produce
Raw reconstructed block.Loop filtering level 416 can be applied to the block of reconstruction to reduce the distortion of such as blocking artifacts.
Other variants of encoder 400 can be used to be encoded come the bit stream 420 to compression.For example, being become based on non-
The encoder 400 changed can directly quantify residual signals for some pieces or frame in the case of no conversion stage 404.Another
In embodiment, encoder 400 can make the reconciliation quantized level 410 of quantized level 406 be combined into single level.Encoder 400 can root
Encoded according to this technology come the pixel to any size or the poly- group of shape.The poly- group of the pixel to be encoded therefore can be more typically
Ground is referred to as region.
Fig. 5 is the block diagram of the decoder 500 according to another embodiment.For example memory can be stored in by providing
Computer software programs in 204 realize decoder 500 in receiving station 106.Computer software programs can include machine
Instruction, the machine instruction receiving station 106 in the way of described in Fig. 5 to solve in the computing device by such as CPU202
Code video data.Decoder 500 can also be realized to be included in the hardware in such as cell site 102 or receiving station 106.
Similar to the reconstruction path of encoder 400 as discussed above, in one example, decoder 500 includes being used for
Perform following rear classes of the various functions for producing outputting video streams 516 from the bit stream 420 of compression：Entropy decoding level 502, solution
Quantized level 504, within the frame/frames inverse transformation stage 506, prediction stage 508, reconstruction level 510, loop filtering level 512 and block elimination filtering level
514.The other structures variant of decoder 500 can be used to decode the bit stream 420 of compression.
When the bit stream 420 of compression is provided for decoding, the data element in the bit stream 420 of compression can be by entropy
Decoder stage 502 decodes to produce the set of transform coefficients of quantization.The conversion coefficient of de-quantization 504 pairs of quantizations of level carries out de-quantization
(for example, by making the conversion coefficient of quantization be multiplied by quantizer values), and inverse transformation stage 506 uses selected alternative types pair
The conversion coefficient of de-quantization carries out inverse transformation, with produce can with as identical produced by the inverse transformation stage 412 in encoder 400
Derivative residual error.Using the header information decoded from the bit stream 420 of compression, decoder 500 is for example in prediction stage within the frame/frames
The identical prediction block for being produced and being produced at encoder 400 using prediction stage 508 within the frame/frames at 402.Rebuilding level
At 510, prediction block can be added to derivative residual block to produce reconstructed block.Loop filtering level 512 can be applied to rebuild
Block to reduce blocking artifacts.Other filtering can be applied to the block of reconstruction.In this example, the block application deblocking to reconstruction is filtered
Wave scale 514 is to reduce block distortion, and result is output as outputting video streams 516.Outputting video streams 516 can also be claimed
For the video flowing of decoding, and the term will be used interchangeably herein.
Other variants of decoder 500 can be used to be decoded come the bit stream 420 to compression.For example, decoder 500
Can no block elimination filtering level 514 in the case of outputting video streams 516.Although reference block is retouched for simplicity of explanation
State, but decoder 500 can decode the pixel (for example, region) of any size and the poly- group of shape according to this technology.
Mention as was explained briefly above, last frame motion vector subregion can be passed through --- i.e., by using motion
Vector adjusts the subregion of last frame, to carry out subregion to the region of frame or frame for encoding or decode.Generally, pass through
Prior frame subregion is shifted one in the motion vector covered by the motion vector of new region and region is divided into individual region.
Fig. 6 is the process 600 for being encoded or being decoded to video flowing according to an embodiment of the disclosure
Flow chart.Can in such as system of computing device 200 implementation method or process 600 with the coding or solution of auxiliary video stream
Code.Process 600 can be embodied as to the software program for example performed by computing device (such as cell site 102 or receiving station 106).
Software program can include the machine readable instructions being stored in such as memory of memory 204, and the instruction is by such as CPU
Cause computing device implementation procedure 600 during 202 computing device.Wholly or partly it can also be realized using hardware
Journey 600.As explained above, some computing devices can have multiple memories and multiple processors, and in this feelings
The step of different processor and memory come assigning process 600 or operation can be used under condition.Term " processor " and " storage
Use in the singular includes the computing device with only one processor or memory and had device " herein
Each multiple processor that can be used in some but execution the step of be not necessarily be described or memory are set
It is standby.
For simplicity of explanation, process 600 is described and is described as series of steps or operation.However, according to this
Disclosed steps and operations can launch according to various orders and/or simultaneously.In addition, according to the step of the disclosure or operation can
To occur by the other steps for not proposing and describing herein or operation.Furthermore, it is possible to and non-required all diagrams step
It is rapid or operate to realize the method according to disclosure theme.Each block repetitive process of each frame of input signal can be directed to
600.In some embodiments, some blocks of one or more frames are only handled according to process 600.For example, when implementation procedure 600
When, it is convenient to omit use the block of intra prediction mode coding.
When process 600 is cataloged procedure, input signal can be such as video flowing 300.Input signal can by with appoint
The computer of the mode implementation procedure 600 of what number is received.For example, input signal can be caught simultaneously by image sensing apparatus 220
And received by the input for being connected to bus 212 from another equipment.In another embodiment, can be from auxiliary storage 214
Retrieve input signal.The other manner of the reception of input signal and other sources are possible.For example, when process 600 is to decode
Cheng Shi, input signal can be the bit stream of coding, the bit stream 420 such as compressed.
Using video flowing, at step 602, process 600 is stored after the first frame by the frame sequence of encoded video stream
Frame identifier is indexed and referred to for the reference buffer of each in multiple reference frames.Fig. 7 is may be referred to explain step
Rapid 602.Fig. 7 shows reference frame 700, including LAST_FRAME 702, GOLDEN_FRAME 704 and ALTREF_FRAME
706.One in these three reference frames 700 will signal in block header as the reference frame 700 for each block.
In frame header level, bit stream will be written to from reference frame 700 to the one-to-one mapping with reference to virtual identifier or index 708.Pin
Another one-to-one mapping will be kept to each frame, for being mapped to reference buffer identifier or rope from reference to virtual index 708
Draw 710.For two continuous inter-frames, that two reference frame 700 when being mapped to same reference buffer index 710,
Process 600 indicates that it is identical reference.Fig. 7 example has the virtual virtual index 708 of eight available references and eight references
Buffer index 710.
In order to which whether the block tracked previously with position uses and referred to current block identical, both encoder and decoder can be with
The buffer of track reference frame 700 updates and preserves the mapping of reference buffer index 710 of the frame for previous coding.Therefore,
Encoder and decoder can recognize used with position block and two reference frames used in current block whether be mapped to it is identical
Reference buffer index 710.For example, to each frame end-of-encode when, before the renewal of reference frame buffer, in encoder
Reference buffer 710 tables of index corresponding to each reference frame 700 can be stored with both decoders place.
When checking the motion vector with position block, process 600 can recognize the reference frame 700 for same position block first.Make
For in the replacement with using the reference frame 700 in directly being compared of current block, decoder or encoder can recognize it with reference to slow
Rush device index 710.By the reference buffer index 710 for the reference frame 700 of current block with being used for the reference buffer with position block
Device index 710 is made comparisons.If identical, the motion vector with position block will be used as being used for current motion vector with higher priority
Motion vectors reference.
Fig. 6 is returned to, process 600 updates reference frame 700 at step 604 and the reference associated with reference frame 700 is virtual
Index 708.At step 606, process 600 determines multiple candidate motion vectors of the current block for the second frame, the plurality of time
Motion vector is selected to include being used to predict the first motion vector of the same position block of the first frame in.At step 608, process 600 is more
The motion search of the current block in the reference frame 700 of multiple reference frames 700 is performed after new, to generate the second motion vector.
At step 610, process 600 is by the reference virtual index 708 1 of the reference frame 700 associated with being associated with the first motion vector
The reference buffer index 710 for playing storage and the reference buffer index 710 of the reference frame 700 used in motion search is performed
Make comparisons.
At step 612, process 600 determines the reference virtual index of the reference frame 700 used in motion search is performed
Whether 708 match with being associated with the reference buffer index 710 of the first motion vector.If it finds a match, then process 600 is advanced
To step 614, wherein it is possible to by the first motion vector advance to for encode current block multiple candidate motion vectors in its
Before remaining motion vector；Otherwise, process 600 is back to step 602 to handle another piece.
By the first motion vector advance to for encode current block remaining candidate motion vector before can cause it is selected
The motion vector selected more accurately predicts current motion vector.Therefore, between the motion vector and current motion vector of prediction
Difference will be small, and can in video streaming be represented with the bit of peanut, so as to save bandwidth.
The current block (can wherein use two reference frames to predict current block) of present frame is being predicted using double prediction
In the case of, each side of disclosed embodiment can be with predicted motion vector.In double prediction, for motion-vector prediction
Present frame and previous frame both can use LAST_FRAME 702 or GOLDEN_FRAME 704 by forward prediction, or
Prediction is reversed using ALTREF_FRAME 706.As disclosed in above for Fig. 6, disclosed aspect can determine to be used for
Whether the previous frame of motion prediction can have and present frame identical reference frame.Present frame and elder generation are being predicted using double prediction
In the case of previous frame, following step can be used same in previous frame by the determination of more newly arriving of track reference frame buffer
The motion vector candidates of position block：
(1) rule is checked using following, by being buffered for both frames before previous frame and previous frame track reference frame
Device, which is more newly arrived, to be checked across three consecutive frames with the presence or absence of smooth motion：For a pair of current blocks and its with position block, the two uses it
The frame of previous coding is referred to as it, and two reference frames for forward prediction there is identical symbol to miss partially；
(2) if there is the second frame for current block, such as when mixed mode can be used for current block, then for second
Frame repeat step (1) is directed to the smooth motion that the second frame is present to check for.
(3) check whether symbol is indicated for current block and its with the reverse pre- of both position blocks by mistake partially using following rules
Survey and whether already function as reference for two block same number of frames：First, check whether current block uses ALTREF_FRAME
706 are used as its reference frame, and it indicates to consider counter motion；If it is, by recognizing that the symbol of its reference frame is checked partially by mistake
Whether backward prediction is also used with position block；If it is, checking current block and its whether using same number of frames to join as it with position block
Examine.If it is, by the motion vector associated with previous frame advance to remaining wait motion vector before.
(4) if there is the second frame for current block, such as when considering mixed mode for current block, then for second
Frame repeat step (4) is to check for current block and with both position blocks are with the presence or absence of backward prediction and whether two blocks use phase
Same frame is used for backward prediction.If it is, by the motion vector associated with previous frame advance to remaining wait motion vector it
Before.
(5) check current block and the identical frame that whether uses with position block is as its reference frame.If it is, will with it is previous
The associated motion vector of frame is advanceed to before remaining time motion vector.
(6) if there is the second frame for current block, such as when considering mixed mode for current block, then for second
Frame repeat step (5) is referred to checking for current block and being used as its with the presence or absence of same number of frames with both position blocks.If it is,
By the motion vector associated with previous frame advance to remaining wait motion vector before.
The illustrative in all respects of coding and decoding described above some examples of coding and decoding technology.However,
It should be understood that coding and decoding (term as used in the claims) can be with the compression of index evidence, decompression, change
Change or any other processing or change.
Word " example " or " aspect " are used to mean herein to serve as, example or diagram.It is described herein as " showing
Any aspect or design of example " or " aspect " are not necessarily intended to be interpreted as other side or design to be preferred or favourable
's.On the contrary, the use of word " example " or " aspect " is intended to propose concept in a concrete fashion.As used in this application
Term "or" means inclusive "or" rather than exclusiveness "or".That is, unless otherwise, or from context
It is clear that " X includes A or B " and means any naturally inclusive replacement.If that is, X includes A；X includes B；
Or X includes both A and B, then according to any previous examples, " X includes A or B " to satisfaction.In addition, such as in the application and appended power
The article " one " that uses and " one " are usually understood to mean " one or more " during profit is required, except as otherwise noted or
Person is from context it is evident that for singulative.In addition, term " embodiment " or " embodiment " are throughout each
The use at place is not intended to mean identical embodiment or embodiment, unless so description.
It can realize that cell site 102 and/or receiving station 106 (and are stored in it with hardware-software or its any combinations
Embodiment above and/or so as to being performed algorithm, method, instruction of (including by encoder 400 and decoder 500) etc.).
Hardware can include such as computer, intellectual property (IP) core, application specific integrated circuit (ASIC), programmable logic array, light
Learn processor, programmable logic controller (PLC), microcode, microcontroller, server, microprocessor, digital signal processor or appoint
What its proper circuit.In the claims, term " processor " should be interpreted as comprising any aforementioned hardware (individually or with
Combination).Term " signal " and " data " are used interchangeably.In addition, each several part of cell site 102 and receiving station 106
It must not necessarily realize in a like fashion.
In addition, in one aspect, it is, for example, possible to use the all-purpose computer with computer program or general processor are real
Existing cell site 102 or receiving station 106, the computer program perform any each method as described herein, calculation when executed
Method and/or instruction.Additionally or alternatively, for example, it is possible to use special-purpose computer/processor, it, which can be included, is used to perform sheet
Other hardware of any method, algorithm or instruction described in text.
For example can be to realize cell site 102 and receiving station 106 on the computer in video conferencing system.As an alternative, can be with
Cell site 102 is realized on the server, and can be real in the equipment (such as hand-held communication device) separated with server
Existing receiving station 106.In this case, cell site 102 can use encoder 400 by research content into encoded vision signal
And encoded vision signal is transmitted into communication equipment.And then, then communication equipment can use decoder 500 to be regarded encoded
Frequency signal is decoded.As an alternative, communication equipment can be by the content being locally stored on communication equipment (such as not by cell site
The content of 102 transmittings) decoding.Other appropriate transmittings and receive implementation be available.For example, receiving station 106 can be
Generally fixed personal computer rather than portable communication device and/or the equipment including encoder 400 can also include
Decoder 500.
It can use or calculate from such as tangible computer in addition, all embodiments or one part of the disclosure can be taken
The form of the addressable computer program product of machine computer-readable recording medium.Computer is available or computer-readable medium can be had
Include to shape, store, transmitting or transmission procedure is so that any processor is used or any equipment used in conjunction.Should
Medium can be such as electronics, magnetic, optics, electromagnetism or semiconductor equipment.Other appropriate media are also available.
Description above-described embodiment, embodiment and aspect are to allow understanding easily of the invention without limiting this hair
It is bright.On the contrary, the invention is intended to cover including various modifications within the scope of the appended claims and equivalent arrangements, the scope will
It is according to broadest explanation so as to cover according to lawful all such modifications and equivalent structure.
Claims (21)
1. a kind of method for being encoded using computing device to video flowing, the video flowing has frame sequence, the frame
With block, and described piece has pixel, and methods described includes：
After being encoded to the first frame of the frame sequence, store for the reference buffer of each in multiple reference frames
Device indexes and referred to frame identifier；
After the storage, the multiple reference frame is updated by updating the reference frame associated with reference frame identifier；
After the renewal, it is determined that multiple candidate motion vectors of the current block for the second frame, the multiple Candidate Motion
Vector includes being used to predict the first motion vector of the same position block of first frame in；
The motion search of the current block in the reference frame in the multiple reference frame is performed after the renewal, to generate
Two motion vectors；
It is described with reference to slow by what is stored together with the reference frame identifier of the reference frame with being associated with first motion vector
The reference buffer index that device index is rushed with the reference frame used in the execution is made comparisons；And
The reference buffer index matching of the reference frame used in the execution is with being associated with first motion
Under conditions of the reference buffer index that the reference frame identifier of the reference frame of vector is stored together, by described first
Motion vector advance to for encode the current block the multiple candidate motion vector in remaining motion vector before.
2. according to the method described in claim 1, wherein：
Second frame is in the sequence after first frame；
The multiple reference frame is included in last frame in the sequence before being encoded to present frame, described last
One frame has last frame identifier as referring to frame identifier；And
Updating the multiple reference frame is included the reference buffer index upgrade associated with last described frame identifier
Indexed for the reference buffer of first frame.
3. method according to claim 2, wherein：
The multiple referential includes gold frame and alternative reference frame；And
Updating the multiple reference frame includes only updating the reference buffer index associated with last described frame identifier.
4. method according to claim 2, wherein：
The multiple reference frame include with gold frame identifier as the reference frame identifier gold frame and with for
In generation, is with reference to alternative reference frame of the frame identifier as the reference frame identifier；And the multiple reference frame is updated including following
In at least one：
By the reference that the reference buffer index upgrade associated with the alternative reference frame identifier is new alternative reference frame
Buffer index；And
By the reference buffer rope that the reference buffer index upgrade associated with the gold frame identifier is new gold frame
Draw.
5. according to the method described in claim 1, further comprise：
Second motion vector is encoded using first motion vector as motion vector predictor.
6. according to the method described in claim 1, wherein：
By first motion vector advance to for encode the current block multiple candidate motion vectors in remaining candidate
Include before motion vector：The motion is performed by using motion search described in first motion vector initializtion to search
Rope.
7. method according to claim 6, further comprises：
Second motion vector is encoded using the first motion vector as motion vector predictor.
8. according to the method described in claim 1, wherein：
Updating the multiple reference frame includes：Update after the storage is associated at least with corresponding with reference to frame identifier
Two reference frames；And
The multiple candidate motion vector includes being used to predict the 3rd motion vector of the same position block of first frame in；
Methods described further comprises：
Second piece of the second motion search in the different reference frames in the multiple reference frame is performed after the renewal,
To generate the 4th motion vector；
It is described with reference to slow by what is stored together with the reference frame identifier of the reference frame with being associated with the 3rd motion vector
The reference buffer index that device index is rushed with the reference frame used in second motion search is performed is made comparisons；
Wherein, the multiple Candidate Motion first motion vector advanceed to for being encoded to the current block is sweared
Include before remaining motion vector in amount：First motion vector is advanceed to for being carried out to the 3rd motion vector
Before remaining motion vector in the multiple candidate motion vector of coding；And
In the reference buffer index matching for performing the reference frame used in the second motion search with being associated with described the
The condition for the reference buffer index that the reference frame identifier of the associated reference frame of three motion vectors is stored together
Under, the multiple Candidate Motion that second motion vector is advanceed to for being encoded to the 4th motion vector is sweared
Before remaining motion vector in amount.
9. a kind of device encoded to video flowing, the video flowing has frame sequence, the frame has block, and described piece
With pixel, described device includes：
Processor；And
The memory of store instruction, the instruction causes the computing device to operate, and the operation includes：
After being encoded to the first frame of the frame sequence, store for the reference buffer of each in multiple reference frames
Device indexes and referred to frame identifier；
After the storage, the multiple reference frame is updated by updating the reference frame associated with reference frame identifier；
After the renewal, it is determined that multiple candidate motion vectors of the current block for the second frame, the multiple Candidate Motion
Vector includes being used to predict the first motion vector of the same position block of first frame in；
The motion search of the current block in the reference frame in the multiple reference frame is performed after the renewal, to generate
Two motion vectors；And
It is described with reference to slow by what is stored together with the reference frame identifier of the reference frame with being associated with first motion vector
The reference buffer index that device index is rushed with the reference frame used in the execution is made comparisons；And
The reference buffer index matching of the reference frame used in the execution is with being associated with first motion
Under conditions of the reference buffer index that the reference frame identifier of the reference frame of vector is stored together, by described first
Motion vector advance to for encode the current block the multiple candidate motion vector in remaining motion vector before.
10. device according to claim 9, further comprises：
The second memory separated with the memory；And
Wherein, the reference buffer index for each in the multiple reference frame is represented in the second memory
Reference frame unique positions.
11. device according to claim 9, the operation further comprises：
The same position block is entered by using first motion vector and the reference frame associated with first motion vector
Row coding, first frame is encoded into the video bit stream of coding；
The reference frame associated with the first motion vector is associated with reference to virtual index, and by the reference virtual index
The reference buffer index of the reference frame with being associated with first motion vector is associated；And
By signaling the reference virtual index in the video bit stream of the coding, to use signal logical to decoder
Know the reference frame associated with first motion vector.
12. device according to claim 9, wherein：
The multiple reference frame includes three reference frames；
First in three reference frames with the first unique reference frame identifier and the first unique reference buffer index phase
Association；
Second in three reference frames with the second unique reference frame identifier and the second unique reference buffer index phase
Association；
The 3rd in three reference frames with the 3rd unique reference frame identifier and the 3rd unique reference buffer index phase
Association；And
The storage includes the following tables of storage：The table is by first in three reference frames and the first unique reference frame
Identifier and the first unique reference buffer index be associated, by second and described second in three reference frames
Unique reference frame identifier and the second unique reference buffer index are associated and by the in three reference frames
Three associated with the 3rd unique reference frame identifier and the 3rd unique reference buffer index.
13. device according to claim 12, the operation further comprises：
The table is stored in the memory.
14. device according to claim 9, the operation further comprises：
After the second frame in the frame sequence is encoded, store for the second time for each in multiple reference frames
Reference buffer indexes and referred to frame identifier,
After second stores, update the multiple to update with reference to the associated reference frame of frame identifier by second
Reference frame；
After second updates, it is determined that multiple candidate motion vectors of the current block for the 3rd frame, the multiple candidate's fortune
Dynamic vector includes being used to predict the first motion vector of the same position block of second frame in；
After second updates, the fortune of the current block of threeth frame of the execution in the reference frame in the multiple reference frame
Dynamic search, to generate the second motion vector of the current block for the 3rd frame；
By the institute of the reference frame of first motion vector with being associated with the same position block for predicting second frame in
State the reference buffer index stored together with reference to frame identifier and the fortune in the current block for performing the 3rd frame
The reference buffer index of the reference frame used in dynamic search is made comparisons；And
The reference buffer index of the reference frame used in the motion search for performing the current block of the 3rd frame
Described in the reference frame for first motion vector for matching and being associated with the same position block for predicting second frame in
Under conditions of the reference buffer index stored together with reference to frame identifier, by for predicting described in second frame in
First motion vector with position block advances to multiple Candidate Motions for being encoded for the current block to the 3rd frame
Before remaining candidate motion vector in vector.
15. device according to claim 9, wherein：
Second frame is in the sequence after first frame；
The multiple reference frame includes：
Last frame in the sequence before being encoded to present frame, last described frame has last
Frame identifier is as referring to frame identifier；
With gold frame of the gold frame identifier as the reference frame identifier；And
With replacement frame of the alternative reference frame identifier as the reference frame identifier；And
Update the multiple reference frame, the multiple reference frame include it is following at least one：
By the reference buffer rope that the reference buffer index upgrade associated with last described frame identifier is the first frame
Draw；
By the reference that the reference buffer index upgrade associated with the alternative reference frame identifier is new alternative reference frame
Buffer index；Or
By the reference buffer rope that the reference buffer index upgrade associated with the gold frame identifier is new gold frame
Draw.
16. device according to claim 9, the operation further comprises：
Second motion vector is encoded using first motion vector as motion vector predictor.
17. device according to claim 9, the operation further comprises：
By using the first motion vector initializtion motion search, first motion vector is advanceed to for institute
Before stating remaining candidate motion vector in the multiple candidate motion vector that current block is encoded.
18. a kind of device for being used to decode the video bit stream of coding, the video bit stream of the coding has frame sequence
Row, the frame has block, and described piece has pixel, and described device includes：
Processor；And
The memory of store instruction, the instruction causes the computing device to operate, and the operation includes：
After being decoded to the first frame of the frame sequence, store for the reference buffer of each in multiple reference frames
Device indexes and referred to frame identifier；
After the storage, the multiple reference frame is updated by updating the reference frame associated with reference frame identifier；
After the renewal, it is determined that multiple candidate motion vectors of the current block for the second frame, the multiple Candidate Motion
Vector includes being used to predict the first motion vector of the same position block of first frame in；
It is described with reference to slow by what is stored together with the reference frame identifier of the reference frame with being associated with first motion vector
Device index is rushed to make comparisons with the reference buffer index of the reference frame of the current block for predicting the second frame；And
It is described with being associated with the reference buffer index matching of the reference frame of the current block for predicting second frame
, will under conditions of the reference buffer index that the reference frame identifier of the reference frame of first motion vector is stored together
First motion vector advance to for decode the current block the multiple candidate motion vector in remaining motion arrow
Before amount.
19. device according to claim 18, further comprises：
The second memory separated with the memory；And
Wherein, the reference buffer index for each in the multiple reference frame is represented in the second memory
Reference frame unique positions.
20. device according to claim 18, the operation further comprises：
The reference virtual index in the video bit stream of the coding is received, the reference virtual index is with being associated with described first
The reference frame of motion vector is associated；
By using first motion vector and the reference frame associated with first motion vector to the same position
Block is decoded, to be decoded to first frame；And
The reference virtual index and the reference buffer for the reference frame for being associated with first motion vector are indexed into phase
Association.
21. a kind of method for being used to decode the video bit stream of coding, the video bit stream of the coding has frame sequence, described
Frame has block, and described piece has pixel, and methods described includes：
After being decoded to the first frame of the frame sequence, store for the reference buffer of each in multiple reference frames
Device indexes and referred to frame identifier；
After the storage, the multiple reference frame is updated by updating the reference frame associated with reference frame identifier；
After the renewal, it is determined that multiple candidate motion vectors of the current block for the second frame, the multiple Candidate Motion
Vector includes being used to predict the first motion vector of the same position block of first frame in；
It is described with reference to slow by what is stored together with the reference frame identifier of the reference frame with being associated with first motion vector
Device index is rushed to make comparisons with the reference buffer index of the reference frame of the current block for predicting the second frame；And
It is described with being associated with the reference buffer index matching of the reference frame of the current block for predicting second frame
, will under conditions of the reference buffer index that the reference frame identifier of the reference frame of first motion vector is stored together
First motion vector advance to for decode the current block the multiple candidate motion vector in remaining motion arrow
Before amount.
Applications Claiming Priority (2)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US15/074,329 | 2016-03-18 | ||
US15/074,329 US9866862B2 (en) | 2016-03-18 | 2016-03-18 | Motion vector reference selection through reference frame buffer tracking |
Publications (2)
Publication Number | Publication Date |
---|---|
CN107205149A true CN107205149A (en) | 2017-09-26 |
CN107205149B CN107205149B (en) | 2020-03-03 |
Family
ID=57822051
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
CN201611224939.1A Active CN107205149B (en) | 2016-03-18 | 2016-12-27 | Motion vector reference selection via reference frame buffer tracking |
Country Status (9)
Country | Link |
---|---|
US (1) | US9866862B2 (en) |
JP (1) | JP6767488B2 (en) |
KR (1) | KR102097285B1 (en) |
CN (1) | CN107205149B (en) |
AU (1) | AU2016398050B2 (en) |
CA (1) | CA3008890C (en) |
DE (2) | DE102016125094A1 (en) |
GB (1) | GB2548449B (en) |
WO (1) | WO2017160366A1 (en) |
Cited By (10)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
CN110460857A (en) * | 2018-05-08 | 2019-11-15 | 腾讯美国有限责任公司 | Video encoding/decoding method, equipment and computer readable storage medium |
CN111699688A (en) * | 2018-03-29 | 2020-09-22 | 华为技术有限公司 | Method and device for inter-frame prediction |
CN111757116A (en) * | 2018-03-29 | 2020-10-09 | 联发科技股份有限公司 | Video encoding device with limited reconstruction buffer and associated video encoding method |
CN112385229A (en) * | 2018-06-29 | 2021-02-19 | 交互数字Vc控股公司 | Virtual time affine candidates |
CN113170108A (en) * | 2018-11-27 | 2021-07-23 | Op方案有限责任公司 | Adaptive block update for unavailable reference frames using explicit and implicit signaling |
CN113453015A (en) * | 2019-01-03 | 2021-09-28 | 深圳市大疆创新科技有限公司 | Video processing method and device |
CN114009038A (en) * | 2019-04-25 | 2022-02-01 | Op方案有限责任公司 | Signaling of global motion vectors in picture headers |
CN114175645A (en) * | 2019-07-06 | 2022-03-11 | 北京字节跳动网络技术有限公司 | Virtual prediction buffering for intra block copy in video coding |
CN114503580A (en) * | 2019-09-23 | 2022-05-13 | 北京字节跳动网络技术有限公司 | Setting an intra block copy virtual buffer based on a virtual pipeline data unit |
US11985308B2 (en) | 2019-03-04 | 2024-05-14 | Beijing Bytedance Network Technology Co., Ltd | Implementation aspects in intra block copy in video coding |
Families Citing this family (1)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US11445223B2 (en) * | 2016-09-09 | 2022-09-13 | Microsoft Technology Licensing, Llc | Loss detection for encoded video transmission |
Citations (2)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
WO2009115901A2 (en) * | 2008-03-19 | 2009-09-24 | Nokia Corporation | Combined motion vector and reference index prediction for video coding |
CN103119940A (en) * | 2010-09-30 | 2013-05-22 | 日本电信电话株式会社 | Image encoding method, image decoding method, image encoding device, image decoding device and program therefor |
Family Cites Families (17)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US8995536B2 (en) | 2003-07-23 | 2015-03-31 | Broadcom Corporation | System and method for audio/video synchronization |
US7933335B2 (en) * | 2004-11-30 | 2011-04-26 | Panasonic Corporation | Moving picture conversion apparatus |
US9042454B2 (en) * | 2007-01-12 | 2015-05-26 | Activevideo Networks, Inc. | Interactive encoded content system including object models for viewing on a remote device |
US20100309981A1 (en) * | 2009-06-04 | 2010-12-09 | Texas Instruments Incorporated | Reuse of a search region in motion estimation of multiple target frames |
US8917769B2 (en) * | 2009-07-03 | 2014-12-23 | Intel Corporation | Methods and systems to estimate motion based on reconstructed reference frames at a video decoder |
CN102045557B (en) | 2009-10-20 | 2012-09-19 | 鸿富锦精密工业（深圳）有限公司 | Video encoding and decoding method and video encoding device and decoding device thereof |
US8824560B2 (en) * | 2010-07-07 | 2014-09-02 | Netzyn, Inc. | Virtual frame buffer system and method |
JP2012191298A (en) * | 2011-03-09 | 2012-10-04 | Fujitsu Ltd | Moving image decoder, moving image encoder, moving image decoding method, moving image encoding method, moving image decoding program and moving image encoding program |
GB2501836B (en) | 2011-03-09 | 2014-08-06 | Canon Kk | Video encoding |
US9900615B2 (en) * | 2011-12-28 | 2018-02-20 | Microsoft Technology Licensing, Llc | Representative motion information for temporal motion prediction in video encoding and decoding |
WO2013162980A2 (en) * | 2012-04-23 | 2013-10-31 | Google Inc. | Managing multi-reference picture buffers for video data coding |
US9014266B1 (en) * | 2012-06-05 | 2015-04-21 | Google Inc. | Decimated sliding windows for multi-reference prediction in video coding |
US9485515B2 (en) * | 2013-08-23 | 2016-11-01 | Google Inc. | Video coding using reference motion vectors |
GB2521227B (en) | 2013-12-16 | 2020-11-25 | Advanced Risc Mach Ltd | Invalidation of index items for a temporary data store |
US10757437B2 (en) * | 2014-07-17 | 2020-08-25 | Apple Inc. | Motion estimation in block processing pipelines |
US9762919B2 (en) * | 2014-08-28 | 2017-09-12 | Apple Inc. | Chroma cache architecture in block processing pipelines |
CN104811721B (en) | 2015-05-26 | 2017-09-22 | 珠海全志科技股份有限公司 | The computational methods of decoded video data storage method and motion vector data |
-
2016
- 2016-03-18 US US15/074,329 patent/US9866862B2/en active Active
- 2016-12-19 GB GB1621543.6A patent/GB2548449B/en active Active
- 2016-12-21 DE DE102016125094.5A patent/DE102016125094A1/en active Pending
- 2016-12-21 AU AU2016398050A patent/AU2016398050B2/en active Active
- 2016-12-21 KR KR1020187014591A patent/KR102097285B1/en active IP Right Grant
- 2016-12-21 CA CA3008890A patent/CA3008890C/en active Active
- 2016-12-21 WO PCT/US2016/067980 patent/WO2017160366A1/en active Application Filing
- 2016-12-21 DE DE202016008192.7U patent/DE202016008192U1/en active Active
- 2016-12-21 JP JP2018531153A patent/JP6767488B2/en active Active
- 2016-12-27 CN CN201611224939.1A patent/CN107205149B/en active Active
Patent Citations (2)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
WO2009115901A2 (en) * | 2008-03-19 | 2009-09-24 | Nokia Corporation | Combined motion vector and reference index prediction for video coding |
CN103119940A (en) * | 2010-09-30 | 2013-05-22 | 日本电信电话株式会社 | Image encoding method, image decoding method, image encoding device, image decoding device and program therefor |
Cited By (15)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US11412210B2 (en) | 2018-03-29 | 2022-08-09 | Huawei Technologies Co., Ltd. | Inter prediction method and apparatus for video coding |
CN111699688A (en) * | 2018-03-29 | 2020-09-22 | 华为技术有限公司 | Method and device for inter-frame prediction |
CN111757116A (en) * | 2018-03-29 | 2020-10-09 | 联发科技股份有限公司 | Video encoding device with limited reconstruction buffer and associated video encoding method |
CN111699688B (en) * | 2018-03-29 | 2022-11-25 | 华为技术有限公司 | Method and device for inter-frame prediction |
CN111757116B (en) * | 2018-03-29 | 2022-11-04 | 联发科技股份有限公司 | Video encoding device with limited reconstruction buffer and associated video encoding method |
CN110460857A (en) * | 2018-05-08 | 2019-11-15 | 腾讯美国有限责任公司 | Video encoding/decoding method, equipment and computer readable storage medium |
CN110460857B (en) * | 2018-05-08 | 2021-12-24 | 腾讯美国有限责任公司 | Video decoding method, apparatus and computer-readable storage medium |
CN112385229A (en) * | 2018-06-29 | 2021-02-19 | 交互数字Vc控股公司 | Virtual time affine candidates |
CN113170108A (en) * | 2018-11-27 | 2021-07-23 | Op方案有限责任公司 | Adaptive block update for unavailable reference frames using explicit and implicit signaling |
CN113453015A (en) * | 2019-01-03 | 2021-09-28 | 深圳市大疆创新科技有限公司 | Video processing method and device |
US11985308B2 (en) | 2019-03-04 | 2024-05-14 | Beijing Bytedance Network Technology Co., Ltd | Implementation aspects in intra block copy in video coding |
CN114009038A (en) * | 2019-04-25 | 2022-02-01 | Op方案有限责任公司 | Signaling of global motion vectors in picture headers |
CN114175645A (en) * | 2019-07-06 | 2022-03-11 | 北京字节跳动网络技术有限公司 | Virtual prediction buffering for intra block copy in video coding |
CN114175645B (en) * | 2019-07-06 | 2024-04-12 | 北京字节跳动网络技术有限公司 | Virtual prediction buffering for intra block copying in video codec |
CN114503580A (en) * | 2019-09-23 | 2022-05-13 | 北京字节跳动网络技术有限公司 | Setting an intra block copy virtual buffer based on a virtual pipeline data unit |
Also Published As
Publication number | Publication date |
---|---|
GB2548449A8 (en) | 2018-03-21 |
CA3008890A1 (en) | 2017-09-21 |
CA3008890C (en) | 2019-10-29 |
GB2548449B (en) | 2020-06-03 |
GB201621543D0 (en) | 2017-02-01 |
KR20180069905A (en) | 2018-06-25 |
AU2016398050B2 (en) | 2019-05-09 |
JP2019508918A (en) | 2019-03-28 |
US20170272773A1 (en) | 2017-09-21 |
DE102016125094A1 (en) | 2017-09-21 |
GB2548449A (en) | 2017-09-20 |
AU2016398050A1 (en) | 2018-04-26 |
DE202016008192U1 (en) | 2017-06-01 |
US9866862B2 (en) | 2018-01-09 |
KR102097285B1 (en) | 2020-04-06 |
CN107205149B (en) | 2020-03-03 |
WO2017160366A1 (en) | 2017-09-21 |
JP6767488B2 (en) | 2020-10-14 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
CN107205149A (en) | The motion vectors reference selection tracked by reference to frame buffer | |
US20220353534A1 (en) | Transform Kernel Selection and Entropy Coding | |
CN107027038B (en) | Dynamic reference motion vector coding mode | |
CN111757106B (en) | Method and apparatus for coding a current block in a video stream using multi-level compound prediction | |
JP6605726B2 (en) | Motion vector partitioning of previous frame | |
CN110741643A (en) | Composite intra prediction for video coding | |
CN107205156B (en) | Motion vector prediction by scaling | |
US20180213239A1 (en) | Motion Vector Dependent Spatial Transformation in Video Coding | |
US20210112270A1 (en) | Dynamic motion vector referencing for video coding | |
CN107071440A (en) | Use the motion-vector prediction of previous frame residual error | |
CN110169068B (en) | DC coefficient sign coding scheme | |
CN110741641B (en) | Method and apparatus for video compression | |
US20170280143A1 (en) | Smart reordering in recursive block partitioning for advanced intra prediction in video coding | |
CN107318015A (en) | Hybrid predicting pattern for Video coding | |
CN104704826A (en) | Two-step quantization and coding method and apparatus | |
CN107018416A (en) | For video and the adaptive chip data size coding of compression of images | |
CN110692247B (en) | Prediction for composite motion compensation | |
CN110731082B (en) | Compression of groups of video frames using reverse ordering | |
CN107396127A (en) | Ultra-wide regional movement for Video coding is estimated | |
CN109906610A (en) | The recovery compiled using the video of filtering and subspace projection |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
PB01 | Publication | ||
PB01 | Publication | ||
SE01 | Entry into force of request for substantive examination | ||
SE01 | Entry into force of request for substantive examination | ||
CB02 | Change of applicant information | ||
CB02 | Change of applicant information |
Address after: American CaliforniaApplicant after: Google limited liability companyAddress before: American CaliforniaApplicant before: Google Inc. |
|
GR01 | Patent grant | ||
GR01 | Patent grant |