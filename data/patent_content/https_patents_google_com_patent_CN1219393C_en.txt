Embodiment
Pass through antenna 102 received signals when working as shown in Figure 1, by the selective call receiver 100 of battery 101 power supplies.Receiver 103 is delivered to demodulator 104 with the signal that is received, and utilizes traditional technology to recover wherein existing any information.The information of being recovered is delivered to controller 105 and is carried out interpretation and decoding.In this preferred embodiment, address decoder 107 that controller 105 comprises processor 106, realize with hardware and software and data decoder 108, display driver 109.Specifically, processor 106 and the message memory 111 of being joined are used for constituting a scan line compressed fax decoder device in this preferred embodiment of the present invention, scan line compressed fax paper is decoded, so that shown by display 113 and so on.In this case, scan line compressed fax decoder device is realized to be stored in the form of software of being carried out by processor 106 in the nonvolatile storage 110.Perhaps, processor 106 can comprise the decoder based on hardware of a special use, realizes scan line compressed fax decoder device with it.
The information of recovering is by address decoder 107 checks.Address decoder 107 comprises a signal processor, is used for the interior one or more presumptive addresss of the address that will recover and the nonvolatile storage 110 that is stored in selective call receiver 100 to carry out relevant.Nonvolatile storage 110 has a plurality of registers usually, is used for storing a plurality of configuration words that characterize selective call operation of receiver situation.Select in the process of this selective call receiver determining whether, between the address of the presumptive address of selective call receiver and recovery, carry out related operation.If the address is relevant, message memory 111 just delivered to information by controller 105.According to the information of recovering and the situation that sets of customer controller 112, the selective call receiver for example provides to the small part information with by the sense of hearing, vision or tactile alert device 114 by display 113 notifies the user to receive a message.The user can read to be presented at information on the display 113 by activating suitable controller 112.Perhaps, selective call receiver 100 can send the message that receives or scan line compressed file to selective call receiver outer ancillary equipment (not shown), stores, shows or printing etc.
Support that circuit 115 preferably includes a multiplexed integrated circuit of traditional signal, voltage adjustment and controlling organization, current-modulation and controlling organization, one to for example light or temperature sensitive environmentally sensitive circuit, an audio power amplifying circuit, a control interface circuit and a display illumination circuit.These devices with known to mode dispose, provide to meet the desired selective call receiver of client.
Referring to Fig. 2, this block diagram illustration a kind of block diagram of the selective call information transmission system that constitutes by the preferred embodiment of the present invention.Source file 208 as shown in Figure 3 reads (scanning) by the facsimile machine 202 that image is quantized.Facsimile machine 202 needn't be in same geographical position with call terminal 201, and the equipment that in fact also can be some such as computer, file scanning machine commonly used perhaps may be special-purpose message input equipment.These equipment can both be issued call terminal 201 with at least one Fax Messaging by a network interface 207.Call terminal 201 is in work traditional CCITT (CCITT) group III and the IV facsimile transmission that machine 202 sends of the time receiving faxes, and each Fax Messaging is mixed at least one selective call address that is elected to be the terminal point of this Fax Messaging by originator (or head sign indicating number cap-code).
The virtual copies of 204 pairs of quantized datas that received of compression processor is operated.Best, one of compression processor 204 usefulness are that based computer realizes with the architecture such as general purpose microprocessor.Perhaps, compression processor 204 can be realized with the computer (RISC) or the digital signal processor (DSP) of a reduction instruction set, also can make the special signal processing hardware.Messaging controller 206 is not only arbitrated the reception and the coding of each beep-page message, also paging base station 209 is controlled.
Utilize scan line compressed technical transmission message and the group III facsimile coding that utilizes 8 strict bit-binary data or standard to transmit and compare and significantly improve obtaining all the time.As an example, suppose that scanning gives up than being 9 (per 10 scan lines discard 9 scan lines wherein), and stroke long codes of each row to benefit (compression gains) be 10: 1.The capacity of a typical group III message has the facsimile data of 20K byte, but the message after scan line compressed of this example is 1100 byte left and right sides data, and only sending with 1200 bauds (near 1100 byte datas of each code element 10 bit) needs 0.92 second.Even ratio is given up in lower scanning, for example be 4 (per 5 scan lines discard 4 scan lines wherein), resulting message sends also and only needs 1.92 seconds near 2300 byte data.Technology used in this example will describe in detail below.
With typical wireless encoding scheme, as the high speed FLEX of Motorola
TMAgreement, GSC (Gray's sequence code of Motorola) or POCSAG (the postal sign indicating number standardization consulting group of Britain), when analyzing top example, the expense that is increased is the Parity Check Bits relevant with selected code just, and the ratio that therefore total transmission time increases is the ratio of encoded data with uncoded data.Traditional (23,12) sign indicating number (has 11 to be Parity Check Bits in 23 bits, 12 is data bit) situation under, can will increase about 92% (be 1.77 seconds promptly, and under best situation be 19.2 second for group III facsimile data) time of reckoning with for scan line compressed message.In these traditional paging protocols, all can increase usually owing to the coding expense makes data volume.
Those skilled in the art that are appreciated that data transfer rate, word and Baud Length can changes, so that be fit to desired system design goal as far as possible, this does not deviate from spirit of the present invention.For example, can resemble at FLEX
TMBaud rate is dynamically changed between 1600,3200 or 6400 code elements of per second, do not influence overall system throughput with the informational message that adapts to different densities.Equally, also can adopt more efficiently linearity or nonlinear encoding scheme to cooperate, make advantage of the present invention more outstanding with scan line compressed substantially method of the present invention.
Call terminal 201 also can be called the Fax Messaging input processor.For the present invention, call terminal 201 can pass through network interface 207 reception group IV facsimile transmission as the Fax Messaging input processor time.Having at least an input to be used for receiving baud rate by public telephone switching network (PSTN) for example is 4,800,9,600 or higher group III transmission and by such as the such high-speed data network reception group IV transmission of growing Integrated Service Digital Network.Network interface 207 can be extended to and comprise and be fit to the hardware that carries out high speed coaxial line or fiber optic cable communications with local area network (LAN) or wide area network computer system and isdn device.This provides greater flexibility for the user, because can directly initiate fax by any compatible equipment from network.
Being advised in preceding surface analysis, file 208 is by after call terminal 201 scanning and handling, and resulting coded data again with a kind of traditional message-sending protocol that is fit to transmit information by radio frequency link (for example: FLEX
TM, POCSAG, GSC and so on) encode.As previously described, these agreements provide error detection occurs and calibration capability for information link, have therefore guaranteed to send the data of zero defect to calling user.Call terminal 201 also can be used to control transmitter 209 (being a plurality of transmitters) in the multiple spot paging system, produce the formation of an input and output beep-page message.In addition, call terminal 201 can also carry out certainty ratio, coding and re-quantization to the specific part that needs in the Fax Messaging that is received to transmit again adaptively, to satisfy the requirement of the display 113 that is connected to selective call receiver 100.
Call terminal 201 is finished after the processing of importing message, and transmitter 209 is just broadcasted the signal with the data-modulated of representing selective call address and message.After selective call receiver 100 detects its address, just recover message,, make the message that is received become the available various forms of user, include but is not limited to character, figure and sound to user's alarm.
Some specialized application that the preferred embodiment of this selective call information transmission system can provide comprise Email, storage, retrieval and the transfer of Fax Messaging, and with the synthetic composite document architecture with industrial standard computer production software application compatibility of text and figure.Some following examples will be used for illustrating all multipurpose of the present invention in unidirectional and bidirectional transfer of information system.
Below some examples show a traditional Fax Messaging in order to transmit several situations that receive and handle by scan line compressed device by call terminal 201.At first, consider the group III fax of a standard, have about the resolving power 200 * 200 point/inches (dpi) of " meticulous " or 80 points/centimetre about.The message of hypothetical examples contains 938 horizontal scan line on A4 paper (about 21.0 * 29.7 centimetres), every row has average 20 black and white transfer points.If do not add any compression, the binary quantization of this message may contain the data about 900,000 bits, in other words about the 90K byte.In order to send this message, if adopt a kind of serial protocol that does not have the byte-oriented of error correction and free of data compression, (1 baud is defined as the symbol of one 10 bit of per second with typical paging protocol speed 1200 bauds, 8 information bits are wherein arranged, 1 beginning bit and 1 whole bit) send, just need about 1 minute and 15 seconds.Every page of needs transmission time above one minute is unpractiaca with regard to its usage economy of the radio frequency paging channel of present technology like this.
If this example message sends with fax (FAX) machine of the CCITT fax standard of deferring to group III fax, at first to encode with a kind of encoding scheme that is called modified huffman code.What modified huffman code used is the Huffman code of standard and the combination of modified model READ (addressing of relative unit is specified) sign indicating number.
The huffman coding of standard is carried out the search to the n bit data word, uses a predetermined look-up table usually, and the word (numeric word, rather than written word or spoken words) that " usually " repeating sequences is lacked than former data word with bit number is encoded.The modification of standard Huffman code can be improved code efficiency by forming a dynamic coding table according to the statistical property of analyzing the sign indicating number type that needs the interior appearance of coded data stream.
Modified model READ sign indicating number is a kind of line by line coding scheme, encodes according to the position of the phase strain elements in the reference line that just is in above the code line or according to previous argument in this code line in the position of each argument in the code line.Two kinds of patterns of this of modified model READ sign indicating number are called vertical mode and level or pass through pattern.The vertical mode coding is only indicated situation that black pixel is just taken action in the code line with a bit under a black picture dot stroke of reference line.If transshaping unit is in three pixels, with regard to the employing level or pass through pattern-coding.After this row has been compiled sign indicating number, just become the reference line of next line.Because each encoded provisional capital is the reference line of next line, so single error can propagate several row, this means the transmission error that this two-dimensional encoded method duplicates easily.Therefore, group III fax periodically adopts the modified model huffman coding to prevent error propagation.At resolving power is under the situation of 200 * 200dpi (every centimetre 80 point), all use the modified model huffman coding to encode every the fourth line of triplex row, and remaining row is encoded with modified model READ sign indicating number, has so both prevented the propagation of mistake, has reduced the transmission time again.
The modified model huffman coding is only considered the horizontal correlation between the pixel in the same scan line.The working condition of modified model huffman coding is as follows.Consider an A4 type file, every row has 1728 pixels, and every millimeter have 3.85 the row.Each scanning provisional capital is regarded the sequence that a black and white stroke that replaces constitutes as.All scanning provisional capitals are assumed to be the long beginning of white stroke that has zero or a plurality of bits with.White and the black stroke of 0 to 63 bit is long to be represented with the top code word, and the white and black stroke of 64 to 1728 bits is grown and shown with the configuration code word table, be connected on the top code word after.Each yard row is that a row stops code word at last.It is the sign indicating number of one 12 bit that row stops code word, can not obscure mutually with the code word of any kind or the combination of code word.Described this modified huffman code is the encoding scheme of the easiest realization, and can obtain maximum compression ratio is 20: 1, or average compression ratio is about 10: 1.
Adopt above-mentioned modified huffman code, the compression ratio of supposing worst condition is 10: 1, then above example message in the data that are quantified as after the compression about the 9K byte, need 7.5 seconds (suppose each textual information capable have 20 transition points) with 1200 baud rates transmission.Message-length (in time) is still long, because 7.5 seconds transmitting time can send digital paging message more than 80 at the paging system in modern times.Adopting such as Motorola FLEX
TMSuch agreement carries out with per second 6400 bits almost can sending 300 pages in the high-performance paging system of work in 7.5 seconds.Obviously, even in the system that adopts High Data Rate, be used for sending traditional Fax Messaging, serve the provider and will lose benefit if will be exclusively used in the transmitting time of a sound, numeral or the alphanumeric page in the past.Therefore, need a kind of method and apparatus of improvement, the data that send can be reduced to for taking the paging transmitting time and can think rational degree.Present invention includes the technology that can satisfy this requirement, can be used for writing type message and big simple graph, obviously reduce required transmitting time.Like this, just can make the transmitting facsimile message can be professional compatible with the data page common in enormous quantities on given channel.
Below with the present invention will be described.In first embodiment, hope sends the user of fax to a client (individual or equipment with selective call facsimile receiver) can be with the paging service provider of a traditional telephone set calling customer, input user's head sign indicating number (one number of paging service provider assignment is corresponding to the actual coding address of beep-pager).The paging service provider holds a code table that can give fax, receive the head sign indicating number of input after, just start the rules that receive a traditional Fax Messaging.So the user can be suspended to traditional facsimile machine 202 on the line, their file is sent to the call terminal 201 that is in the paging service provider.Receive Fax Messaging, call terminal 201 just utilizes unique code method discussed herein that beep-page message is encoded, and sends to the purpose client.
What in a second embodiment, wish to send that the user of fax uses to a client is a kind of traditional facsimile machine with the function that can store a predetermined phone numbers table.In this embodiment, can or access this telephone number by telephone number of artificial key entry and produce a Fax Messaging by the memory in the facsimile machine of initiating.User's head sign indicating number can be represented with the entry reference of the presumptive address that points to the telephone number that has head sign indicating number and paging service provider in the memory.When producing Fax Messaging, the personnel that send message access (or dialling in) paging service provider's number, import user's a sign indicating number (or being imported automatically by facsimile machine after setting up professional the connection) again.After paging service provider's successful connection, facsimile machine will send to file call terminal 201 storages and handle, and is transmitted to purpose selective call receiver again.
In the 3rd embodiment, facsimile machine 202 closely is connected with call terminal 201 as shown in Figure 2.This embodiment not only has top in conjunction with preceding two described having the ability of embodiment, and initiates a paging request owing to do not need PSTN to connect, so has improved their performance.In this embodiment, the Fax Messaging input processor is call terminal 201 part of the whole.Perhaps, the Fax Messaging input processor also can be made a separate equipment, have such as all attributes of processor, electronic memory and network capabilities, as the front in conjunction with as described in the call terminal 201.In such an embodiment, the Fax Messaging input processor can be by a high speed local area network (LAN) or wide area network (as RS-232, IEEE802.3 etc.), ISDN (integrated services digital network) circuit, perhaps may be that the connection of wireless light or radio frequency is connected with call terminal 201, so message throughput be quite big.
Perhaps, also can utilize an information processing apparatus such as desktop commonly used, above-knee or palm medium-size computer to cooperate with the various embodiments described above, produce a Fax Messaging from institute's electronic file stored, automatically this Fax Messaging is sent to the client of a paging service by user command.
As previously described, call terminal 201 receives after Fax Messaging deposits video memory 203 in, is just handled by 204 pairs of Fax Messaging data that received of compression processor.Compression processor 204 is set up a virtual copies of the quantized data that is received in scan line memory 205.So compression processor 204 is just handled the image through decoding that is received of expression original vol data.Compression processor 204 at first with a space management device to quantized data carry out virtual rotation (from the level maximum can be rotated to ± 25 °) calculate " blank than " of the whole image that is scanned.The preferred embodiment of this processing procedure can be referring to the U.S. Patent No. 5,410,417 of authorizing motorola inc " calibrating optical image angle be improved the method and apparatus of image transmission code efficiency ".In addition, also can will handle with the space management device again behind the quantized image half-twist.This possibility is in theory owing to the quantized data that is scanned is organized into the horizontal form of the vertical format rather than the page and might obtains result preferably.Determined blank than the ratio of having represented no information content part at least one dummy level scan line.The maximum of blank ratio is corresponding with the angle (for example image through the best rotation) that quantized data can at utmost be compressed.Therefore, compression processor 204 obtain with the space management device blank than maximum and corresponding corner (as twiddle factor) thereof after, just begin to seek the height of text or object, determine that suitable scanning gives up ratio.This process will describe in detail below.
Though the top conventional coding technology great majority of mentioning are all listed in some current facsimile coding standards, yet be used for quantized data strict regulation is arranged all, do not allow to depart to some extent.Permission departs from one will cause seriously incompatible between the system such as the standard that is used to organize the III fax.Yet, the lossy compression scheme of the level of sensitivity reason ground process information that the data that utilization is received according to the accurate comprehension of user are required, situation will be greatly improved.Scan line compressed method among the present invention adopts existing standard as far as possible, accurately comprehends the required level of sensitivity reason ground process information of data that is received according to the user simultaneously.
In addition, must consider many lossy compression schemes that image is encoded of can be used for.A kind of such scheme is JPEG (Joint Photographic Experts Group), the colored compression scheme of a kind of three-dimensional colourity and brightness.Though lossy compression scheme is effectively being used for when coloured image encoded, proof is when handling such as the monochromatic data that appears in the group III facsimile signal and inapplicable.Yet the present invention but can be used for monochromatic and colored image and text equally because the basic point of compression is not to be frequency and contents of vector, and be image density and definite scan line give up than or the effective system of the factor of slipping a line load factor f.
Load factor f for effective system, one allows the information service network operator of fax paging to be faced with coding and transmission problem such as such mass data of deferring to common group III facsimile transmission standard transmission.To the quantized data application scanning row compress technique of being represented by the Fax Messaging that receives, the data volume that sends to a selective call receiver is compared usually with common group III fax can be kept to 1/5th, even still less.
In order to describe this problem in detail, this example below considering.(2.54cm per square inch in high-resolution group of III Fax Messaging
2) about 20000 pixels are arranged.Like this, Unite States Standard letter-size (8 " * 10 ", promptly 20.32 * 25.4cm) file needs the information of 3,200,000 pixel nearly for nondestructive quantitative.As previously described, employing group III facsimile protocol, this amount of information is compressible to be 1/10.From the wireless service provider, sending the required transmitting time of such message is unaccommodated with the traditional business that provides on the big capacity paging channel of present technology.Yet, as illustrated in the following description, utilize scan line compressed technology, the scan-data in typical full page text is easy to and can sending in 1/2nd times of also lacking of required time than sending traditional group III Fax Messaging.
The typical fax paper 300 that is received shown in Figure 3 can quantize, handle and send with selective call communication system shown in Figure 2 by the present invention.This example message comprise can with as write text or literal 301 by what the mapping function that the call terminal among Fig. 2 201 is carried out discerned.Message can be imported call terminal 201 with one of following several method at least: use tradition fax (FAX) machine 202 that integrates with call terminal 201 to scan; Scan with a traditional facsimile machine far, the fax of resulting group of III or group IV is connected by PSTN send to call terminal 201; From a this locality or far computer connects compound system structured file (or simple files) and sends to call terminal 201 with traditional mode by PSTN; Also can be from storage device that call terminal 201 is connected access the predetermined message that need be transferred to selected user or user's group.
Referring to Fig. 4, after having imported the fax paper 300 that is received, call terminal 201 just begins to handle.At first file 300 is rotated to position by scan line " the whitest ".As previously described, can be with of the reference of maximum white position (or opposite black position) as position of rotation, the virtual image of file is rotated, to compensate greatly to the undesirable inclination that departs from normal condition ± 25 °.Because handled in this example mainly is written messages, therefore can simplify the processing of this data according to the similar characteristics between the written messages.
Total some inclination of the common character of the written notes that great majority are write, this is relevant with Writer's position and writing style.In addition, because the writer is not the paper that can use band row lattice all the time, therefore just may produce the row second kind inclination different with row.These two factors can both be compensated effectively by the scan line processor.
In order to determine text or object height, to through quantize, best postrotational file system ground from the top to bottom or the end of to the jacking line search.In search, identify on the virtual page number and black black primary area that occupies the majority and the corresponding a series of geometric areas in white primary area that occupy the majority in vain.These black primary areas and white primary area be similar to institute read to contain on the page zone of the text of printing, object, figure etc. or row and capable between white space.After having identified each black primary area, pixel average height (the perhaps standard scan unit of contained discrete quantized data in other any expression virtual images) is calculated divided by the sum in black primary area by the height addition in each the black primary area that will be identified again.With the text is example, and this average height is corresponding to the average maximum height of upper case character.Whether after having determined average maximum height, each black primary area is scanned, determining has significant difference in separately height upper density again.For example, if from top to bottom scanning is carried out in certain black primary area, the result shows that top 1/3rd and bottom 1/3rd respectively have density 10%, (0% corresponding to complete white and centre 1/3rd has density 80%, 100% corresponding to complete black), can have reason to believe the protrude upward part of top so, and the bottom is corresponding to the downward extension of lowercase corresponding to uppercase top or lowercase.Therefore, can determine a density factor for this black primary area.Density factor is the weighted sum of the density of each horizontal line to the height in this black primary area, is defined as:
Wherein, Dj is illustrated in the density in j subarea at least one information area in first and second informations area, and k is the sum in the subarea at least one information area in first and second informations area (being n black primary area in this example).Clearly indicated these subareas among Fig. 5, and corresponding subarea density .This density factor is represented percentage black in the corresponding black primary area, therefore can be used as the indication that this distinguishes untreated quantitative information content.For example, density factor is 1.0 corresponding to complete black black primary area, and density factor is 0.3 corresponding to black 30% the black primary area that only accounts for.
After calculating the density factor in each black primary area, just can determine effectively or standard density factor DF from the weighted sum of these black primary area density factor
EffAs follows:
Wherein, DF
nBe the density factor in n black primary area, l
nBe the number of scanning lines in n black primary area, l
AvgBe the average number of scanning lines in these black primary areas (or height), and m is the sum in black primary area.This effectively or the standard factor information percentage contained in quantized samples is made undue estimation, the unusual mistake that causes owing to the performance limitations of actual optics quantization system with consideration with intentionallying.Yet the present invention can successfully utilize the similar density factor of only considering actual average black primary area density, but does not damage resolving power or compression effectiveness significantly.
Fig. 5 illustration some have the text piece of differing heights and density, all obtain by the sampling of group III high resolution mode.In first row in the expression first black primary area 501, text " The " is printed with 24 fonts, highly is approximately 65 scan lines.Second row 502 in the expression second black primary area contains text " good ", prints with 12 fonts, highly is approximately 32 scan lines.The third line 503 of representing the 3rd black primary area contains text " one ", prints with 10 fonts, highly is approximately 27 scan lines.At last, represent that the fourth line 504 in the 4th black primary area contains text " HELLO ", print, highly be approximately 32 scan lines with 12 fonts.The average height in these four black primary areas is 39 scan lines (65+32+27+32)/4.With formula (1) and (2), can calculate each density factor is D
1=0.13, D
2=0.13, D
3=0.15, and D
4=0.20, and effectively or standard density be D
Eff=0.17. notices that effective density can be used as characteristic index, points out that contained information has a kind of first binary condition of about 17% expressions in this example, and a kind of second binary condition of all the other 83% expressions.This is very important, because statistics ground says, causes effective density to be higher than 0.5 data with can be more better against the encryption algorithm compression effectiveness, for example can identify white primary area and does not identify black primary area.In addition, along with the increase of effective density, employing stroke long codes technology may be more more effective than the scheme to be labeled as the basis of the classics such as LZ77, LZ78, Lempel-Ziv-Huffman coding in to the horizontal line coding.
Shown in lowercase can be designated and be in the zone that those are characterized by high image density, such as shown in the third line 503 in second row 502 in the expression second black primary area and expression the 3rd black primary area.Yet, it should be noted, represent that the averag density of the fourth line 504 in the 4th black primary area surpasses first three rows, therefore should be designated a full capitalization district.Perhaps, scan under the situation of determining the text height expression being write written notes, capitalization causes the distance between the almost complete white row maximum usually.Lowercase can use the height that increases gradually along with the density that text is scanned every row downwards to be estimated.
Regardless of text or object contained in a selection area, determine that density can characterize information contained in the former source file best, therefore can clearly rebuild source file from encoded scan line compressed data.
Fig. 6 show scanning give up than calculated case.At first, the system loading factor f that multiply by percentage according to the vertical row density (number of scanning lines) of source file quantized image selects the limit (601) of vertical or y direction.As previously described, because high-density region is usually with the lowercase main body or to contain all uppercase row corresponding in the black primary area that is identified, this can be used as the basis of vertical direction limit y.For example, be that this y direct limit is set to 100 * 10%=10 in the low resolution group III fax of per inch 100 vertical row (40 row/centimetre) in the density of posting a letter.Secondly, calculating scanning gives up than being
R≥0
This factor representation is total scan line l in each has the black primary area that is identified of same characteristic (602)
nIn the number of scanning lines (603) that can give up.Yet, if scanning is given up than being less than or equal to 1, just should not give up any row (604), just because otherwise can cause information loss, be difficult for understanding.For example, if scan line height l
1Be defined as 120 pixels, R is calculated as 11 (i.e. (120/10)-1), and 11 row in per 12 scan lines can be given up in this district so, thereby compression ratio is 12: 1, sends delegation in per in other words 12 row.
If wish that compression is few, can increase system loading factor f so, thereby make the y direct limit for example become 20 (promptly 100 * 0.2).Load the such increase of the factor and make the number of scanning lines that is rejected in the black primary area that each identified be less than situation effectively, thereby image compression is less and picture resolution is higher at bigger y direct limit.Note, the height of electing 100% or black primary area that is identified in the system loading factor as near or surpass under the situation of y direct limit no-raster row deletion in this black primary area.
In addition, density factor DF
nBe used for when being no more than a predetermined threshold (for example be 0.5 and so on), selecting the cataloged procedure of a standard.The standard code process comprises that calculating scanning gives up than R and the scan line of giving up right quantity.
Density factor DF
nThresholding be chosen to guarantee owing to but undue estimation scan is given up than the unlikely obvious reduction of the identification of the transmission character that causes.Therefore, at density factor DF
nWhen pointing out to select an alternative cataloged procedure (605), the operative norm coding, and with all horizontal line preliminary treatment Cheng Kuanwei P=(l
Avg-1) minimum value of a pixel/5, strengthening the width of row effectively, and upper and lower in each horizontal line be (l
Avg-1) minimum value of a pixel (606)/2.
After quantification message data was encoded with scan line compressed process, paging system must be labeled as it a scan line compressed incident.Therefore, each compressed primary area all adds a scan line item code word (607).The scan line compressed factor or scanning are given up than R and are included in this scan line item code word, must send with the corresponding primary area with scan line compressed method compression, because this numeral is very important for the correct decoding to compressed message.
Finished all analysis and compression back (608,609), remaining each distinguished or " blank " (being actually the All Ranges that contains same data) uses the method such as stroke long codes, huffman coding to carry out traditional coding through the primary areas of sign.
After complete source file had been encoded, the data of gained can be rebuild with multiple mode.Selected method should be fit to reconstructing apparatus (for example selective call receiver, facsimile machine etc.), makes a message can monitor in the received while.
At the CompuServe that receives interleaving mode
TMGIF
TMCan see an example of staggered file reconstruction in (GIF(Graphic Interchange format)) image.Receiving a GIF
TMDuring image, first data set comprises the row of the upper/lower terminal that some are in image and some select rows therebetween, and these row have extended the width of image, makes that reception period just constitutes the low part of differentiating of width of cloth picture clearly in early days.Along with receiving follow-up intercrossed data group, the blank line in the middle of inserting, image is more and more clear, all receives until entire image.Similar, scan line compressed image also can utilize interleave method to send, thereby has same advantage.
Said process is used for scan line compressed image, just can recognizes the graph image of input rapidly with a portable type information receiver of being furnished with display unit (as LCD display and so on).
Perhaps, also can scan line compressed district and all the other districts (for example clear area) is staggered, make file can be from top to bottom, from left to right or opposite order send.If message is serial from top to bottom compilation, that just can be to send with traditional fax similar mode of posting a letter.This can make the receiving equipment real time print message with hard copy ability, and does not need image buffer storage is printed to receiving.
Fig. 7 illustration address and facsimile data sent to the message-sending protocol of a selective call receiver by the preferred embodiment of the present invention.A fax beep-page message grouping (scan line compressed file) comprises selective call address 701, optional message header 702, data block 703 (Fax Messaging that just has for example encoded scan line compressed, group III or group IV facsimile data), and optional end of message sign 704.If message-length sends in message header 702, end of message sign 704 can save, and this does not damage the integrality of this form of posting a letter.Address signal 701 comprises a traditional selective call address.Optional message header 702 can contain the information 705 such as the position of subsequent data blocks in the staggered message transfer service of orientation, may also contain the optional encryption type 706 that is useful on the secure facsimile message transfer service, optional facsimile protocol identifier 707, optional type of data format identifier 708, optional data block length 709, the twiddle factor 711 that optional source file starts identifier 710 and chooses wantonly, or optional source file transmitting time mark 712.
After the message header 702 is the data block 703 that contains encoded facsimile data.Present embodiment can cooperate traditional facsimile machine to use, and realizes scan line compressed decoding, receives the Fax Messaging that sends by radio data channels.In addition, a guy's computer and so on (as desktop, above-knee or the palm medium-size computer, or individual digital is organized machine) under the situation about cooperating, selective call receiver as shown in Figure 1 can be delivered to computer with the Fax Messaging data that received, get up as a file storage, thereby make the user have the document library of a Fax Messaging that is received.Owing to do not change former transformat after the Fax Messaging data decode that is received, therefore can obtain the hard copy of the fax that received with traditional facsimile data processing hardware and software.
As the front in conjunction with as described in Fig. 6, the data block of scan line compressed message contains scan line compressed facsimile data, comprise each scan line compressed primary area 714 and corresponding scan line item code word 713, and the code word 715 of respectively compressing remaining area 716 and corresponding stroke length and so on.Above-listed data can collect in any mode in several modes (staggered as serial, it is staggered to overlap etc.), and this is by message header 702 signs.
Put it briefly, each complete scan line compressed message all should be furnished with the selective call address 701 and the message header 702 that may contain or point to an address or data vector (not shown), (selective call receiver etc.) with being used for recognition purpose, make the message where necessary can vectorization and segmentation, and identification message source and sending the time uniquely.All these information words that dispose with scan line compressed message will make the suitable selective call receiver of outfit correctly receive the decode scan line compressed message.
More specifically, the scan line compressed message in the data block 703 can send to the selective call receiver in some other mode.At first, as traditional fasystem, message can send line by line, utilizes scanning to give up ratio, leaves out between the scan line that sends or to skip R capable.This method allows scan line compressed data are carried out again the coding of traditional group III and so on, may obtain bigger compression ratio like this.Secondly, complete scan line compressed message can become the binary representation of scan line according to the bit mapped image block encoding, the selective call receiver decoding of later on scan line compressed by possessing/decompression ability.This method can obtain mistake proofing measure preferably, and directly and defer to the FLEX of POCSAG or Motorola
TMTraditional paging code compatibility of series paging protocol.In each case, scan line compressed data should comprise or after connect a data end mark, indicate this transmission of messages so far.This has guaranteed can determine when receiving final stage that message is complete under the situation that the utilization of a scan line message can send the staggered agreement of message fragment.Equally, in the noninterlace system, when end-of-message code is arranged, just can discern whole message and whether all receive.
The successful part of scan line compressed technology is to be determined by the capable decoding processing of skipping that is used for rebuilding in the text/graphical messages that is received.Following rule predetermining have this intrinsic or the selective call receiver of suitable ability or a rule that equipment is rebuild scan line compressed message.
Fig. 8 shows two examples (being shown of the left side " during transmission ", being designated as of the right " decoding back ") of the text that received or graph block 801,802, by be between them clear area 803 separately.In this example, be two vertical blanks of skipping between the parallel scan line of going (R=2) to be carried out linearity fill.For the purpose of illustration was clear, the data of transmission and decoded data illustrated side by side.In fact, this situation is impossible, because be buffered in usually in the memory up to finishing reconstruction as sending data.Note,, fill the blank between the vertically aligned pixel, therefore rebuild two scan lines of leaving out in this example according to the first reconstruction rule.
Fig. 9 illustration the scan line compressed data of horizontal clearance are arranged between the scanning element on the adjacent scan lines.Have text/graphics field (the transmission row on the left side) 901 that horizontal clearance separates for those vertical direction under a kind of division of regulation, will open interval analysis planning, to rebuild the data of " loss ".Notice that for brevity, this example is the situation at R=2.But this processing method can expand to any R greater than 2 situation.These row on the right show through " filling " decoded message 902 among the figure.
First row 903 shows down that scan line (or reference scan is capable) has 4 pixels and goes up scan line (or adjacent scan lines) and have the situation that 3 pixels, right side are aimed at.As before, at first rebuild rule, fill the blank between vertically aligned pixel by first.Secondly, use second and rebuild rule, determine to add to make and rebuild required any all the other pixels of readability.Second rebuilds the planning between the open zone that forms the trigonum in the regular gap of mainly deferring between reference and adjacent scan lines.This processing procedure will be described in detail below.
Second row 904 shows down that scan line has 5 pixels and goes up scan line and have the situation that 3 pixels, right side are aimed at.Equally, according to the data of the first and second rule generations through decoding.
The third line 905 shows down that scan line has 5 pixels and goes up scan line and have the situation that 2 pixels, right side are aimed at.Notice that the zone 907 outer fill areas 906 that contain two perpendicular alignmnet pixels present very approaching leg-of-mutton shape.
Two examples are fourth line 908 and fifth line 909 in addition, all show to occur to rebuild the relevant filling feature of rule with first and second.
Therefore, the number of the pixel of " filling " also will equal sum or (sum+1) of horizontal clearance projection, and this depends on the concrete width number of reconstruction.In conjunction with illustrated these processing procedures of Fig. 8-11 preferably as the part of the scan line compressed decoding program in the selective call receiver.
In superincumbent these examples, the decode operation in the selective call receiver forms between the triangle open zone of the prime information content of rebuilding message effectively.This simply and accurately processing procedure makes scan line compressed operation can successfully adopt high compression ratio, but has guaranteed the identification of character and figure simultaneously again.
Put it briefly, when existing a horizontal clearance to be filled between some pixels at reference scan on the capable and adjacent scan lines, at first fill the down suction that adjacent picture elements is all arranged up and down.Secondly, if the pixel number of reference scan on capable, just only filled those zones that have vertically over against pixel more than or equal to the twice of the pixel number on the adjacent scan lines.Do not exist under the intermediate state of positive perpendicular separation between pixel on reference scan is capable and the adjacent scan lines, calculate the level error between latter two vertically aligned pixel, carry out the linear filling of puppet, in fact these points on feasible in the end vertically aligned pixel and reference or the adjacent scan lines between last horizontal pixel form a leg-of-mutton fill area.Note this pseudo-linearly just carry out when filling the pixel number on reference scan is capable just less than the twice of the pixel number in the adjacent scan lines.This first-order linear is approximate to have acceptable filling effect for the complex data such as Arabic block letter, Chinese character or crisscross figure.Yet when being used to write text, effect (as shown in figure 11) is better than other data reconstruction process methods (as linearity or bicubic mapping).
Figure 10 shows by this preferred embodiment of the present invention and the compression Fax Messaging of source file quantized data is decoded and the flow chart of the processing procedure of rebuilding.
Receive a fax beep-page message grouping back (1000) as shown in Figure 7, this scan line compressed Fax Messaging is decoded, recover to give up than R (1001) with the corresponding scanning at least one information area that is included at least the first and second informations area in the compression Fax Messaging.Then,, change to one second state from one first state, become from second state more then that the reference scan of change section of first state is capable determines an intermediate treatment district (1002) again according to having on the information content in order to rebuild former source file effectively.As those skilled in the art that were familiar with, first and second states were usually corresponding to white and black, perhaps opposite.Based on the intermediate treatment district, position (1003) to belonging at least one first district that has first district 907 of vertically aligned pixel at reference scan between capable and adjacent scan lines.This zone 907 is in vertical direction by having common adjacent unit, common vertically aligned pixel on reference and adjacent scan lines for example, scan line limit, shown in the 3rd district 907 of Fig. 9.
After determining at least one first district, give up at least one first district at this or the pixel lost is used and carried out linearity with the corresponding information at least one information area of compressing at least the first and second contained in the Fax Messaging informations area and fill (1004).This is first rule of rebuilding.In the example in front, this information is corresponding with black or dark pixel.Yet this processing method also can be used for inverse case, and for example white the or bright image in black or dark background is first.And first and second informations area can be corresponding respectively with first and second states, for example as containing white and black or black and the white information area.
Based on the intermediate treatment district, at least one second district is positioned (1005) again.Second district occupy between the information changing at least one with capable adjacent scan lines of at reference scan between have the different zone 910, at least one first district of perpendicular alignmnet pixel.Comparatively simply be that this at least one second district belongs to the part intermediate treatment district that has a down suction between the pixel on reference and the adjacent scan lines.
After determining at least one second district, determine with the pixel be unit with capable one first length of the corresponding reference scan in intermediate treatment district and one second length (1006) of adjacent scan lines.
If with the pixel be first or second length of unit more than or equal to reference scan between the capable and adjacent scan lines vertically over against the twice (1007) of pixel number, just do not carry out padding, handle the next part (1008) of this scan line.The another kind of saying of this rule is, only when reference scan between the capable and adjacent scan lines vertically over against pixel number during more than or equal to the twice of the absolute value of the difference of first length and second length, the pixel that interpolation is lost at least one second district between the capable and adjacent scan lines at reference scan.
Disobey under other situations of first rule at all, adopt second to rebuild rule, form a delta-shaped region of filling pixel by no perpendicular alignmnet pixel place between the capable adjacent scan lines of and rebuild the scan line that those are lost at reference scan.According to second rule, with the pixel be unit capable or adjacent scan lines calculates the difference Δ of the closest approach in the end points at least one second district and at least one first district according to reference scan, to determine at reference scan at least one second district of the pixel that interpolation is lost at no perpendicular alignmnet pixel place between the capable and adjacent scan lines.With insert fill pixel location at reference scan at least one second district at no perpendicular alignmnet pixel place and as by pseudo-linear relationship between the capable and adjacent scan lines
Between the nearside at least one first district that limits.
Concern among the B symbol the end points at least one second district be positioned at reference scan capable on and the nearside at least one first district when being positioned at the right side of this end points or the nearside that is positioned on the adjacent scan lines and at least one first district of the end points at least one second district when being positioned at the left side of this end points for just.On the contrary, concern when nearside that the end points of symbol at least one second district among the B is positioned on the adjacent scan lines and at least one first district is positioned at the right side of this end points, perhaps the end points at least one second district be positioned at reference scan capable on and the nearside at least one first district when being positioned at the left side of this end points for negative.
At last, the pixel that will lose is added at least one second district at no perpendicular alignmnet pixel place between the capable and adjacent scan lines of reference scan (1009).Fill and add step repeat to all scanning provisional capitals that are rejected at least one information area of at least the first and second informations area always and obtain rebuilding till (1008).In addition, recover, fill and add step and repeat in each informations area of at least a information area of the first and second informations area all scanning provisional capitals that are rejected always at least and obtain (1010) till the reconstruction, thereby obtain one very near the Fax Messaging that is received of source file.After rebuilding end, control turns back to master processor program (1011).
The text 1100 of writing shown in Figure 11 is with the former ccitt standard test file of harmless group III method compressed portion.The image of former test file contains 473,280 pixels (910 row * 510 row), draws to sample about every centimetre of 80 pixels.According to expectation like that owing to be a high-resolution Fax Messaging, this is write written notes and all can both finely be recognized.Yet if this shown message is quantized by traditional facsimile machine of deferring to group III standard, data volume will be above 24 bytes, and effective compression ratio is approximately 2.4: 1.
The scan line compressed processing procedure of (every triplex row quantized data is skipped two row) is compressed the identical text of writing shown in first image 1100 to be 2/3 with the rate of slipping a line, and obtains image 1101.In order to carry out practical comparison between original group of III compressed image and scan line compressed image of the present invention, image 1100,1101 draws with same vertical and horizontal resolution.As seen, though second image 1101 has been given up 2/3rds of former data, but the identification of these written notes of writing is still fine.Utilize scan line compressed technology, the data volume of message has only the 8K byte shown in the image 1101, and the effective compression ratio that provides is about 6.6: 1.In this example, obtain 275% improvement and do not damaged legibility significantly.Finally, this scan line compressed message can finish in about 1/3rd transmissions that send traditional group III compressed message required time.
In fact, scan line compressed method can obtain the compression effectiveness more much better than traditional fax standard all the time, particularly handle as above introduced write written notes in more changeful because this written notes text is compared usually with the block letter text.