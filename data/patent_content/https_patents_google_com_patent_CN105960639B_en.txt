CN105960639B - Prioritization data reconstruct in distributed memory system - Google Patents
Prioritization data reconstruct in distributed memory system Download PDFInfo
- Publication number
- CN105960639B CN105960639B CN201580006691.9A CN201580006691A CN105960639B CN 105960639 B CN105960639 B CN 105960639B CN 201580006691 A CN201580006691 A CN 201580006691A CN 105960639 B CN105960639 B CN 105960639B
- Authority
- CN
- China
- Prior art keywords
- block
- band
- rank
- data
- active redundancy
- Prior art date
- Legal status (The legal status is an assumption and is not a legal conclusion. Google has not performed a legal analysis and makes no representation as to the accuracy of the status listed.)
- Active
Links
Classifications
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F11/00—Error detection; Error correction; Monitoring
- G06F11/07—Responding to the occurrence of a fault, e.g. fault tolerance
- G06F11/14—Error detection or correction of the data by redundancy in operation
- G06F11/1402—Saving, restoring, recovering or retrying
- G06F11/1446—Point-in-time backing up or restoration of persistent data
- G06F11/1458—Management of the backup or restore process
- G06F11/1464—Management of the backup or restore process for networked environments
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F11/00—Error detection; Error correction; Monitoring
- G06F11/07—Responding to the occurrence of a fault, e.g. fault tolerance
- G06F11/14—Error detection or correction of the data by redundancy in operation
- G06F11/1402—Saving, restoring, recovering or retrying
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F11/00—Error detection; Error correction; Monitoring
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F11/00—Error detection; Error correction; Monitoring
- G06F11/008—Reliability or availability analysis
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F11/00—Error detection; Error correction; Monitoring
- G06F11/07—Responding to the occurrence of a fault, e.g. fault tolerance
- G06F11/08—Error detection or correction by redundancy in data representation, e.g. by using checking codes
- G06F11/10—Adding special bits or symbols to the coded information, e.g. parity check, casting out 9's or 11's
- G06F11/1004—Adding special bits or symbols to the coded information, e.g. parity check, casting out 9's or 11's to protect a block of data words, e.g. CRC or checksum
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F11/00—Error detection; Error correction; Monitoring
- G06F11/07—Responding to the occurrence of a fault, e.g. fault tolerance
- G06F11/08—Error detection or correction by redundancy in data representation, e.g. by using checking codes
- G06F11/10—Adding special bits or symbols to the coded information, e.g. parity check, casting out 9's or 11's
- G06F11/1076—Parity data used in redundant arrays of independent storages, e.g. in RAID systems
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F11/00—Error detection; Error correction; Monitoring
- G06F11/07—Responding to the occurrence of a fault, e.g. fault tolerance
- G06F11/08—Error detection or correction by redundancy in data representation, e.g. by using checking codes
- G06F11/10—Adding special bits or symbols to the coded information, e.g. parity check, casting out 9's or 11's
- G06F11/1076—Parity data used in redundant arrays of independent storages, e.g. in RAID systems
- G06F11/1088—Reconstruction on already foreseen single or plurality of spare disks
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F11/00—Error detection; Error correction; Monitoring
- G06F11/07—Responding to the occurrence of a fault, e.g. fault tolerance
- G06F11/08—Error detection or correction by redundancy in data representation, e.g. by using checking codes
- G06F11/10—Adding special bits or symbols to the coded information, e.g. parity check, casting out 9's or 11's
- G06F11/1076—Parity data used in redundant arrays of independent storages, e.g. in RAID systems
- G06F11/1092—Rebuilding, e.g. when physically replacing a failing disk
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F11/00—Error detection; Error correction; Monitoring
- G06F11/07—Responding to the occurrence of a fault, e.g. fault tolerance
- G06F11/14—Error detection or correction of the data by redundancy in operation
- G06F11/1402—Saving, restoring, recovering or retrying
- G06F11/1446—Point-in-time backing up or restoration of persistent data
- G06F11/1458—Management of the backup or restore process
- G06F11/1461—Backup scheduling policy
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F11/00—Error detection; Error correction; Monitoring
- G06F11/07—Responding to the occurrence of a fault, e.g. fault tolerance
- G06F11/14—Error detection or correction of the data by redundancy in operation
- G06F11/1402—Saving, restoring, recovering or retrying
- G06F11/1446—Point-in-time backing up or restoration of persistent data
- G06F11/1458—Management of the backup or restore process
- G06F11/1469—Backup restoration techniques
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F11/00—Error detection; Error correction; Monitoring
- G06F11/07—Responding to the occurrence of a fault, e.g. fault tolerance
- G06F11/16—Error detection or correction of the data by redundancy in hardware
- G06F11/20—Error detection or correction of the data by redundancy in hardware using active fault-masking, e.g. by switching out faulty elements or by switching in spare elements
- G06F11/2053—Error detection or correction of the data by redundancy in hardware using active fault-masking, e.g. by switching out faulty elements or by switching in spare elements where persistent mass storage functionality or persistent mass storage control functionality is redundant
- G06F11/2094—Redundant storage or storage space
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/10—File systems; File servers
- G06F16/18—File system types
- G06F16/182—Distributed file systems
- G06F16/184—Distributed file systems implemented as replicated file system
- G06F16/1844—Management specifically adapted to replicated file systems
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F3/00—Input arrangements for transferring data to be processed into a form capable of being handled by the computer; Output arrangements for transferring data from processing unit to output unit, e.g. interface arrangements
- G06F3/06—Digital input from, or digital output to, record carriers, e.g. RAID, emulated record carriers or networked record carriers
- G06F3/0601—Interfaces specially adapted for storage systems
- G06F3/0602—Interfaces specially adapted for storage systems specifically adapted to achieve a particular effect
- G06F3/0614—Improving the reliability of storage systems
- G06F3/0619—Improving the reliability of storage systems in relation to data integrity, e.g. data losses, bit errors
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F3/00—Input arrangements for transferring data to be processed into a form capable of being handled by the computer; Output arrangements for transferring data from processing unit to output unit, e.g. interface arrangements
- G06F3/06—Digital input from, or digital output to, record carriers, e.g. RAID, emulated record carriers or networked record carriers
- G06F3/0601—Interfaces specially adapted for storage systems
- G06F3/0628—Interfaces specially adapted for storage systems making use of a particular technique
- G06F3/0638—Organizing or formatting or addressing of data
- G06F3/064—Management of blocks
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F3/00—Input arrangements for transferring data to be processed into a form capable of being handled by the computer; Output arrangements for transferring data from processing unit to output unit, e.g. interface arrangements
- G06F3/06—Digital input from, or digital output to, record carriers, e.g. RAID, emulated record carriers or networked record carriers
- G06F3/0601—Interfaces specially adapted for storage systems
- G06F3/0628—Interfaces specially adapted for storage systems making use of a particular technique
- G06F3/0638—Organizing or formatting or addressing of data
- G06F3/0644—Management of space entities, e.g. partitions, extents, pools
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F3/00—Input arrangements for transferring data to be processed into a form capable of being handled by the computer; Output arrangements for transferring data from processing unit to output unit, e.g. interface arrangements
- G06F3/06—Digital input from, or digital output to, record carriers, e.g. RAID, emulated record carriers or networked record carriers
- G06F3/0601—Interfaces specially adapted for storage systems
- G06F3/0668—Interfaces specially adapted for storage systems adopting a particular infrastructure
- G06F3/067—Distributed or networked storage systems, e.g. storage area networks [SAN], network attached storage [NAS]
-
- H—ELECTRICITY
- H03—ELECTRONIC CIRCUITRY
- H03M—CODING; DECODING; CODE CONVERSION IN GENERAL
- H03M13/00—Coding, decoding or code conversion, for error detection or error correction; Coding theory basic assumptions; Coding bounds; Error probability evaluation methods; Channel models; Simulation or testing of codes
- H03M13/03—Error detection or forward error correction by redundancy in data representation, i.e. code words containing more digits than the source words
- H03M13/05—Error detection or forward error correction by redundancy in data representation, i.e. code words containing more digits than the source words using block codes, i.e. a predetermined number of check bits joined to a predetermined number of information bits
- H03M13/13—Linear codes
- H03M13/15—Cyclic codes, i.e. cyclic shifts of codewords produce other codewords, e.g. codes defined by a generator polynomial, Bose-Chaudhuri-Hocquenghem [BCH] codes
- H03M13/151—Cyclic codes, i.e. cyclic shifts of codewords produce other codewords, e.g. codes defined by a generator polynomial, Bose-Chaudhuri-Hocquenghem [BCH] codes using error location or error correction polynomials
- H03M13/1515—Reed-Solomon codes
Abstract
One kind includes: each band (320) for the file (310) with block (330) in the middle method (600) restored of distributed memory system (100) for prioritization data (312), determines that band includes high availability block (330a) or low availability block (330b) and the determining active redundancy value (ER) for being directed to each band.Distributed memory system has the systemic hierarchial (400) including system domain.The block of band associated with the system domain being in active state is addressable, and what the block of band associated with inactive system domain was inaccessible by.This method further includes that substantially reconstruct has less than threshold value active redundancy value (ER immediatelyT) inaccessible, the high availability block (330a) of active redundancy value reconstruct inaccessible, low availability block and other inaccessible, high availability blocks and after threshold time period.
Description
Technical field
This disclosure relates to the prioritization data reconstruct in distributed memory system.
Background technique
Distributed system generally includes the computer of many loose couplings, and each computer in these computers usually wraps
Include computing resource (for example, one or more processors) and/or storage resource (for example, memory, flash memory and/or
Disk).Storage abstract (for example, key/value storage or file system) is superimposed upon the storage resource of distributed system by distributed system
On.In distributed memory system, the server processes run on computers can export the storage resource of the computer
To the client process operated on other computers.Remote procedure call (RPC) can shift data from server processes
To client process.Alternatively, Remote Direct Memory access (RDMA) primitive (primitive) can be used for data from clothes
Business device hardware is transferred to client process.
Summary of the invention
The one side of present disclosure provide it is a kind of for prioritization data to restore in distributed memory system
Method, this method comprises: for including each band with the file of multiple bands of block, it is true using data processing equipment
The fixed band includes high availability block or low availability block, and is determined using the data processing equipment for described
The active redundancy value of each band of file.The active redundancy value be based on described piece and with associated of the corresponding band
Meaning system domain.The distributed memory system has the systemic hierarchial including system domain.In addition, each system domain has active state
Or inactive state.Addressable with the block in the associated band of the system domain of the active state, and be in institute
State what the block of the associated band of system domain of inactive state was inaccessible by.System domain can be in scheduled maintenance, unexpected event
Enter inactive state during barrier or other reasons.When the block of band becomes inaccessible: this method optionally includes use
The data processing equipment come substantially immediately reconstruct have less than threshold value active redundancy value active redundancy value it is inaccessible,
High availability block.In addition, when the block of band becomes inaccessible: after this method can also optionally include threshold time period,
It is reconstructed using the data processing equipment: 1) inaccessible, low availability block；And 2) has and be greater than or equal to the threshold value
Inaccessible, the high availability block of the active redundancy value of active redundancy.Therefore, become the certain High Availabitities lost with high risk
Property block (be based on active redundancy value) receive other high availability block phases for becoming to lose than low availability block or without high risk
To faster reconstruct.
The implementation of present disclosure may include one or more of following optional feature.In certain implementations
In, this method further comprises updating when system domain is in the inactive state for associated with the system domain
The active redundancy value of each band of the file.The threshold time period is included in about 15 minutes and about 30 minutes
Between.Other threshold time periods are also possible.
Systemic hierarchial may include system level, such as the first system rank, second system rank, third system level and
4th system level.The first system rank corresponds to data processing equipment, non-transient memorizer equipment or network interface controller
Host machine.Each host machine has system domain.Second system rank corresponds to the rack for accommodating the host machine
Power delivery device, communication delivery device or cooling delivery device.Each power delivery device, communication delivery device or the cooling of the rack are passed
Send device that there is system domain.Third system level corresponds to the power delivery device of the unit with associated rack, communication delivery device
Or cooling delivery device.Each power delivery device, communication delivery device or the cooling delivery device of the unit have system domain.4th system
Irrespective of size does not correspond to Distribution Center's module of the unit, and each Distribution Center's module has system domain.
In some examples, for each band, this method includes determining for the described effectively superfluous of each system level
Residual value.Determine that the active redundancy value for the duplication band with copy block includes that mark has extremely in correspondence system rank
The number in the Unique System domain of a few available copies block.Determining has data block and code in the second system rank
The active redundancy value of the encoding strip thereof of block includes identifying in the second system rank that data accessibility can be being maintained
When the number in inactive Unique System domain.In addition, determining has data in the third or the 4th system level
The active redundancy value of the encoding strip thereof of block and code block includes identifying in the third or fourth level that number can be being maintained
According to when accessibility in inactive and there is the maximum number of piece of the system domain compared with remaining system domain.In addition, ought not
When only a system domain has described the maximum number of piece, this method includes randomly choosing one of described system domain.
In some implementations, it determines for the nested code bar for checking block with data block, code check block and word
The active redundancy value of band includes determining one of column active redundancy or band active redundancy.Determine that showing effect redundancy includes mark
The number for the unique block that can be reconstructed from other blocks in the column in column；And determine that band active redundancy includes identification strip band
The number of the interior unique block that can be reconstructed from other blocks in the band.
The another aspect of present disclosure provides one kind for prioritization data to restore in distributed memory system
Method.This method comprises: determining the active redundancy value of each band for file, the file using computation processor
Including with block band, based on described piece and with the active redundancy in the corresponding associated arbitrary system domain of band
Value, the distributed memory system have the systemic hierarchial including system domain, and each system domain has active state or inactive
State.When system domain is in the inactive state, update for each of described file associated with the system domain
The active redundancy value of band.In addition, this method includes when the active redundancy value of band is less than threshold value active redundancy value
When, so that the band reconstructs.
The implementation in this respect of present disclosure may include one or more of following optional feature.Certain
In implementation, systemic hierarchial includes first level, second level, third level and fourth level.The first system rank is corresponding
In the host machine of data processing equipment, non-transient memorizer equipment or network interface controller.Each host machine has
System domain.The power delivery device, communication delivery device or cooling that second system rank corresponds to the rack for accommodating the host machine are passed
Send device.Each power delivery device, communication delivery device or the cooling delivery device of the rack have system domain.Third system level pair
Ying Yu has the power delivery device, communication delivery device or cooling delivery device of the unit of associated rack.Each function of the unit
Rate delivery device, communication delivery device or cooling delivery device have system domain.4th system level corresponds in the distribution of the unit
Core module, each Distribution Center's module have system domain.In some examples, this method further comprises true for each band
Surely it is directed to the active redundancy value of each system level.
In some examples, determine that the active redundancy value for the duplication band with copy block includes mark right
Answer system level that there is the number in Unique System domain of at least one available copies block.It determines in the second system rank
The active redundancy value of encoding strip thereof with data block and code block includes that identify in the second system rank can be
Number in inactive Unique System domain when maintenance data accessibility.It determines for system-level in the third or the 4th
Not Ju You the active redundancy value of encoding strip thereof of data block and code block include identifying energy in the third or fourth level
It is enough when maintaining data accessibility in inactive and with the maximum number of piece compared with remaining system domain of system domain.
When more than one system domain has described the maximum number of piece, this method includes randomly choosing one of described system domain.
In some implementations, it determines for the nested code bar for checking block with data block, code check block and word
The active redundancy value of band includes determining one of column active redundancy or band active redundancy.Determine that showing effect redundancy includes mark
The number for the unique block that can be reconstructed from other blocks in the column in column, and determine that band active redundancy includes identification strip band
The number of the interior unique block that can be reconstructed from other blocks in the band.
In some implementations, this method includes determining that the band includes high availability block or low availability block.
When the block of the band becomes inaccessible, this method includes substantially to reconstruct immediately using the data processing equipment to have
There are inaccessible, the high availability block of the active redundancy value less than threshold value active redundancy value.In addition, the block when the band becomes
When inaccessible, this method further includes reconstructing after threshold time period: 1) inaccessible, low availability block；And 2) have
More than or equal to inaccessible, the high availability block of the active redundancy value (ER) of the threshold value active redundancy (ERT).When the threshold value
Between section can be between about 15 minutes and about 30 minutes.Other threshold time periods are also possible.
The another aspect of present disclosure provides one kind for prioritization data to restore in distributed memory system
System.The system includes memory host, and each memory host has non-transient memorizer；Computer processor, with
The memory main-machine communication.The computer processor, which executes instruction, to be used for: point of the management across the memory Hosts file
Item, each file include the band with block.For including each band with the file of multiple bands of block, at computer
Reason device determines that the band includes high availability block or low availability block using data processing equipment.In addition, at computer
Manage the active redundancy value for each band that device is determined for the file.The active redundancy value be based on described piece and with it is described
The corresponding associated arbitrary system domain of band.The distributed memory system has the systemic hierarchial including system domain, each system
Domain unite with active state or inactive state.The block of band associated with the system domain of the active state is in is can to visit
It asks, and what the block of band associated with the system domain of the inactive state is in was inaccessible by.
The implementation in this respect of present disclosure may include one or more features in following optional feature.When
When the block of band becomes inaccessible, computer processor has substantially reconstruct immediately and is less than threshold value active redundancy value
Inaccessible, the high availability block of active redundancy value.In addition, computer processor makes when the block of band becomes inaccessible
It obtains and is reconstructed after threshold time period: 1) inaccessible, low availability block；And 2) have effective more than or equal to the threshold value
Inaccessible, the high availability block of the active redundancy value of redundancy.
Inaccessible, the Gao Ke for the active redundancy value that computer processor has reconstruct less than threshold value active redundancy value
With property block and to set after the threshold time period after inaccessible piece of inaccessible property time point using data processing
Inaccessible piece of standby reconstructed residual.Remaining inaccessible piece can be high availability block and/or low availability block.
In some implementations, when system domain is in the inactive state, the computer processor updates needle
To the active redundancy value of each band of the file associated with the system domain.The threshold time period can be
Between 15 minutes and 30 minutes.
In some examples, systemic hierarchial includes the first to the 4th systemic hierarchial.The first system rank corresponds at data
Manage the host machine of equipment, non-transient memorizer equipment or network interface controller.Each host machine has system domain.Second
System level corresponds to the power delivery device, communication delivery device or cooling delivery device for the rack for accommodating the host machine.It is described
Each power delivery device, communication delivery device or the cooling delivery device of rack have system domain.Third system level, which corresponds to, to be had
Power delivery device, communication delivery device or the cooling delivery device of the unit of associated rack.Each power delivery device of the unit,
Communicating delivery device or cooling delivery device has system domain.4th system level corresponds to Distribution Center's module of the unit, often
A Distribution Center's module has system domain.Computer processor determines have for the described of each system level for each band
Imitate redundancy value.
Computer processor can be by identifying the unique system for having at least one available copies block in correspondence system rank
The number in system domain, to determine the active redundancy value for being directed to the band of the duplication with copy block.Computer processor can lead to
The number that identify in the second system rank can when maintaining data accessibility in inactive Unique System domain is crossed,
To determine the active redundancy value for being directed to the encoding strip thereof that there is data block and code block in the second system rank.It is described
Computer processor can not be lived by identifying to be in when maintaining data accessibility in the third or fourth level
System domain that is dynamic and having the maximum number of piece compared with remaining system domain, is directed to determine in the third or the 4th system
Rank has the active redundancy value of the encoding strip thereof of data block and code block.When more than one system domain has the maximum
When the block of number, the computer processor randomly chooses one of described system domain.
In some implementations, computer processor is by determining one of column active redundancy or band active redundancy come really
The fixed active redundancy value for the nested code strip for checking block with data block, code check block and word.At computer
Reason device determines column active redundancy by the number for the unique block that can be reconstructed from other blocks in the column in identity column, and
Number by the unique block (330) that can be reconstructed from other blocks (330) in the band (320) in identification strip band (320)
To determine band active redundancy.
The details of one or more implementations of present disclosure is illustrated in following attached drawing and description.Other are special
Sign, aspect and advantage will become apparent from specification, drawings and the claims.
Detailed description of the invention
Figure 1A is the schematic diagram of example distributed storage system.
Figure 1B is the signal of the example distributed storage system of the unit with the memory resource by manager administration
Figure.
Fig. 2 is the schematic diagram for the exemplary administration device of distributed memory system.
Fig. 3 A is the schematic diagram for splitting into the exemplary file for the band being replicated.
Fig. 3 B is the schematic diagram for splitting into the exemplary file of data block and non-data block.
Fig. 3 C is the schematic diagram of Reed Solomon Coding technology.
Fig. 3 D to Fig. 3 G is the schematic diagram of exemplary nested coding techniques.
Fig. 3 H be for use nested coding techniques come storing data operation exemplary arrangement.
Fig. 4 A to Fig. 4 E is the schematic diagram of exemplary system level.
Fig. 5 to Fig. 7 is the exemplary arrangement for being prioritized in distributed memory system to the operation for the data restored
Schematic diagram.
Similar appended drawing reference indicates similar element in the drawings.
Specific embodiment
With reference to Figure 1A and Figure 1B, in some implementations, distributed memory system 100 includes the resource master of loose couplings
Machine 110,110a-n (for example, computer or server), each resource host have and can be used for carrying out high speed to data 312
The storage resource 114 of caching is (for example, memory, flash memory, dynamic RAM (DRAM), phase transition storage
(PCM) and/or disk) computing resource 112 (for example, one or more processors or central processing unit (CPU)) that is communicated.
The storage being covered in storage resource 114 abstract (for example, key/value storage or file system) allows by one or more clients
120, expansible use of the 120a-n to storage resource 114.Client 120 can by network 130 (for example, via RPC) with
Resource host 110 is communicated.
Distributed memory system 100 may include multilayer redundancy, and wherein data 312 are replicated and/or encode and stored
In multiple data centers.Data center accommodates computer system and its associated component, such as telecommunications and storage system
100.Data center generally includes backup power source, redundancy communication connection, environmental Kuznets Curves (maintain steady temperature) and safety equipment.
Data center can be to be operated using the large scale industry grade of a large amount of electric power (for example, as many with small town).Data center can be by
It is located in diverse geographic location (for example, different cities, country variant and different continents).In some examples, data center or
Its each section requirement maintenance (for example, disconnect due to interruption in power, or by a part of storage system 100 with renewal part,
Or the system failure, or a combination thereof).The number being stored in these data centers and specifically distributed memory system 100
According to 312 may during maintenance it is unavailable to users/customers end 120, so as to cause the operation for damaging or stopping user.It is being distributed
During the maintenance (or chance failure) of formula storage system 100, certain data 312 have to be become than other higher risks of data 312
It obtains completely unavailable.It is expected which data overall segmentation at high availability data 312 and low usability data 312 and determined
Data 312 can generate higher risk of missing due to maintenance, then restore/replicate the data 312 without restoring all
Or most of remaining data 312, this may cause shortage efficiency.
In some implementations, distributed memory system 100 is " unilateral ", to eliminate to for from client
The remote procedure call (RPC) at end 120 is responded to store or fetch the data on their corresponding resource host 110
The needs of 312 any server operation, and processing remote request 122 can be carried out by specialized hardware on the contrary." unilateral " is
Refer to by its can software within hardware rather than on the CPU 112 by operating in resource host 110 complete in resource master
The method of most of requests processing on machine 110.It is not to make the operation of processor 112 of resource host 110 (for example, server) will
The access of corresponding storage resource 114 (for example, non-transient memorizer) exports to the client process operated in client 120
128 server processes 118, on the contrary, client 120 can pass through the network interface controller (NIC) 116 of resource host 110
Direct accessing storage resources 114.In other words, operate in client process 128 in client 120 can directly with one or
Multiple storage resources 114 are docked, the fortune without the routine to any server processes 118 operated in computing resource 112
Row.The unilateral distributed storage architecture provides relatively high handling capacity and low latency, this is because client 120 is able to access that and deposits
Resource 114 is stored up, is docked without the computing resource 112 with resource host 110.This has typical bilateral distributed memory system
100 brings are to the influence for storage 114 and the requirement uncoupling of cpu cycle.Unilateral distributed memory system 100 being capable of benefit
With remote storage resource 114, regardless of with the presence or absence of idle cpu cycle on the resource host 110；In addition, due to unilateral
112 resource of server CPU is not fought in operation, so unilateral system can be carried out service high-speed with very predictable low latency and be delayed
Request 122 is deposited, or even when resource host is run with high cpu utilization.Therefore, unilateral distributed memory system 100 allows to compare
The utilization rate of both the higher cluster-based storage 114 of the bilateral system of tradition and 112 resource of CPU, while providing predictable low prolong
Late.
In some implementations, distributed memory system 100 includes storage logical gate 102, data control section 104
And data storage section 106.Storing logical gate 102 may include transactional applications programming interface (API) 350 (for example, unilateral
Transaction system client library), it is responsible for for example via RPC or unilateral operational access bottom data.Data control section 104 can be with
The appointment and access about task to storage resource 114 are managed, such as assigns storage resource 114, with corresponding network interface control
Device 116 processed registers storage resource 114, establishes the connection between (one or more) client 120 and resource host 110, place
Set the mistake, etc. in the case where mechanical disorder.Data storage section 106 may include loose couplings resource host 110,
110a-n。
Data 312 can be stored in dynamic random access memory (DRAM) 114 and pass through by distributed memory system 100
Network interface controller 116 by accessing (RDMA) ability with Remote Direct Memory supplies data from distance host 110
312.Network interface controller 116 (being also known as network interface card, network adapter or lan adapter) can be computer
Computing resource 112 is connected to network 130 by hardware component.Both resource host 110a-n and client 120 can all have
Network interface controller 116 for network communication.Operate in the host processes on the computation processor 112 of resource host 110
118 may have access to the set of area 115a-n with the Remote Direct Memory that network interface controller 116 registers memory 114.Host
The Remote Direct Memory of memory 114 can be may have access to area 115a-n and be registered as that there is read-only or read/write to weigh by process 118
Limit.The creation of network interface controller 116 of resource host 110 is close for the client of each registered memory areas 115a-n
Key 302.
Simple reading and writing can be limited to by the unilateral operation that network interface controller 116 executes and compare and exchange behaviour
Make, none of which operation can be complicated for use as by for executing cache request and managing cache enough
The simple substitution for the software logic that the traditional cache server operation of strategy is realized.Affairs API 350 will such as search or
The order of insertion data command is translated into the sequence of primitive network interface controller operation.Affairs API 350 and distributed storage
The data control of system 100 and data storage section 104,106 are docked.
Distributed memory system 100 may include the depositing for remote access for registering to network interface controller 116
The software positioned jointly of reservoir 114 and the connection of foundation and client process 128.Once establishing connection, client process
128 can access registered memory 114 via the engine in the hardware of network interface controller 116, without coming from
Any participation of software on the local cpu 112 of corresponding resource host 110.
With reference to Figure 1B, in some implementations, distributed memory system 100 includes multiple 200 (each units of unit
200 include resource host 110) and the manager (curator) 210 that is communicated with resource host 110.210 (example of manager
Such as, process) it may operate in (such as the service with non-transient memorizer 204 of computation processor 202 for being connected to network 130
Device) on and manage data storage (for example, management be stored on resource host 110 file system), control data place and/or
Data are initiated to restore.In addition, manager 210 can track the presence and storage location of the data 312 on resource host 110.It is superfluous
Remaining manager 210 is possible.In some implementations, the tracking of (one or more) manager 210 is across multiple resource hosts
The slitting (striping) of 110 data 312 and for redundancy and/or multiple copies of the given band of execution presence and/
Or position.In computer data storage, date classification is so as to different physical storage devices 114 (for example, unit (cell)
200 and/or resource host 110) make sequential segment access mode by alphabetic data 312 (for example, file 310 (Fig. 2))
The technology of logic Ground Split.When processing equipment requests to be capable of providing access quickly access data than storage equipment 114, slitting
It is useful.By executing the segmentation access in multiple equipment, multiple segmentations can be concomitantly accessed.This provides more numbers
According to access throughput, avoid that processor is made idly to wait data access.
In some implementations, affairs API 350 is in (for example, having client process 128) client 120 and pipe
It is docked between reason device 210.In some examples, client 120 passes through one or more remote procedure calls (RPC) and pipe
Reason device 210 is communicated.In response to client request 122, affairs API 350 can be found in (one or more) resource host
The storage location of specific data 312 on 110 and acquisition allow to access the key 302 of data 312.Affairs API 350 is (via net
Network interface controller 116) directly communicated with resource host 110 appropriate (for example, being visited using Remote Direct Memory
Ask) read or write data 312.It is that non-operational or data 312 are moved to different resource host 110 in resource host 110
In the case where, client request 122 breaks down, to prompt inquiry manager 210 again of client 120.
With reference to Fig. 2, in some implementations, manager 210 stores and manages file system metadata 212.Metadata
212 may include by file 3101-nIt is mapped to filec descriptor 3001-nFile Mapping 214.Manager 210 can check simultaneously
Modify the expression of its persistent metadata 212.Three kinds of different access modules for metadata 212 can be used in manager 210:
It is read-only；File transaction；And band affairs.A to Fig. 3 C referring to figs. 2 and 3 is deposited by manager 210 in some implementations
The filec descriptor 300 of storage1-nComprising metadata 212, such as File Mapping 214, File Mapping 214 in appropriate circumstances will
Band 320a-n is mapped to the data block 330nD and code block 330nC being stored on memory host 110.In order to open file
310, request 122 is sent manager 210 by client 120, returns to filec descriptor 300.Client 120 is retouched using file
It states symbol 300 and blocks of files offset is translated to remote memory location 115a-n.Filec descriptor 300 may include that client is close
Key 302 (for example, 32 keys) is unique to the block 330 on memory host 110 and reads the block 330 for RDMA.
After 120 load document descriptor 300 of client, client 120 can be visiting via RDMA or another data capture method
Ask the data 312 of file 310.
Manager 210 can maintain the status information of all memory hosts 110 for the part for unit 200.Shape
State information may include capacity, free space, the load on memory host 110, the memory host from the visual angle of client
110 delay and current state.Manager 210 can by memory host 110 in directly query unit 200 and/
Or the information is obtained to collect delay statistics from the visual angle of client by inquiring client terminal 120.In some examples,
Manager 210 is made rebalancing, consumption using memory main machine status information, restores decision and assigns decision.
(one or more) manager 210 can with assignment blocks 330 so as to dispose be directed to file 310 in more memory spaces
And be used for rebalancing and recovery client request 122.In some examples, distribute number between storage equipment 114
It is different with code block 330nC according to block 330nD, the copy block 330 between storage equipment 114 of processor 202.Manager 210 can be with
Maintain the load diagram 216 of memory load on host computers and vigor.In some implementations, manager 210 is deposited by generating candidate
The list of reservoir host 110 carrys out assignment blocks 330 and assignment blocks is requested to each candidate being sent in candidate memory host 110
Memory host.If the overload of memory host 110 does not have available space, memory host 110, which can refuse this, is asked
Ask 122.In this case, manager 210 selects different memory hosts 110.Each manager 210 can constantly be swept
Its specified portions of file namespace are retouched, about check primary all metadata 212 per minute.Manager 210 can be used
File scan checks the integrality of metadata 212, determines the work for needing to be performed, and/or generate statistics.File is swept
Retouching concomitantly to be operated with other operations of manager 210.Scanning itself can not modify metadata 212, but adjust
Degree will simultaneously counting statistics be digital by the work of the other component of system 100 completion.
With reference to Fig. 3 A to Fig. 3 H, data 312 can be one or more files 310, specify wherein each file 310 has
Replication order 311 and/or error correction code 313.Each file 310 can be divided into the set of band 320 by manager 210,
Wherein each band 320 is independently encoded with remaining band 320.For the file 310 (Fig. 3 A) being replicated, each band
320 be that manager 210 copies as the single logical block of a tape copy 330n and is stored in multiple storage equipment 114.?
In this case, a tape copy 330n is also referred to as block 330.For the file 310 (Fig. 3 B) of erasure codes, each band 320
Including multiple data block 330nD and non-data block 330nC (for example, code block), manager 210 places it in multiple storage moneys
On source 114, wherein the set of data block 330nD and non-data block 330nC form single encoded word.Generally, manager 210 can
Each band 320 to be placed in storage resource 114, storage money how is placed on other bands 320 in file 310
It is unrelated on source 114.Redundant data or parity data are added to file 310 by error correction code 313, so that file 310
It later can not be received person's recovery, or even when introducing many wrong (capacity of the coding up to used).Error correction
Code 313 is used to maintain the data integrity in memory devices, for reconstructing data 312 to be used to execute (delay), or
For quickly consuming (drain) machine.
With reference to Fig. 3 B, each band 320 is based on code level and is divided into data block 330nD and non-data block 330nC,
Code level such as Reed-Solomon (Reed-Solomon) code (Fig. 3 C), nested code (Fig. 3 D to Fig. 3 H) or other layers
Grade erasure codes.Non-data block 330nC can be code block 330nC (for example, for Reed Solomon Coding).Show at other
In example, non-data block 330nC can check that block 330nWC and code check word check block for code check block 330nCC, word
330nCCWC (encodes nesting).
Data block 330nD is the data 312 of specified amount.In some implementations, data block 330nD is from file
The data 312 of 310 continuous part.In other implementations, data block 330nD is the one or more from file 310
The data 312 of discontinuous part.For example, data block 330nD can be 256 bytes or the data 312 of other unit.
The block 330 (for example, data block 330nD or non-data block 330nC) of damage is the block comprising one or more mistakes
330.In general, the block 330 of damage is identified using error detection coding 313.For example, the block 330 of damage can be and be wiped completely
(for example, as fruit block 330 is stored in the hard disk drive being destroyed in hurricane) removed, or the block 330 of damage can
It is overturn with individual bit.Healthy block 330 is not impaired piece 330.The block 330 of damage can by intentional damage, such as
Specific resources host 110 is turned off in the case where being safeguarded.That the block of damage can be missing from or not available piece.At this
In the case of kind, the block 330 of damage can be identified by identifying the block 330 being stored at the resource host 110 being shut down.?
In certain implementations, the block 330 of damage can be used healthy block 330 and restore.The block of damage is (for example, data block 330nD or non-
Data block 330nC) it may be damaged due to various reasons.The block 330 of damage in band 320 can be from healthy block 330
Restore.The non-data block 330nC of file 310 includes error correction code block 313.Error correction code block 313 includes being based on one
The block 330 of the data 312 of a or multiple data block 330nD.In some implementations, each code block 330nC has and number
According to the identical specified size (for example, 256 bytes) of block 330nD.Code block 330nC be using error correction code 313 (such as most
Big distance segmentation (MDS) coding) Lai Shengcheng.The example of MDS coding includes Reed Solomon Coding.Various technologies can be by
For generating code block 330nC.In general, any error correction code 313 can be used, it can be from a unique health of d
Any set of block 330 (data block 330nD or code block 330nC) reconstructs d data block 330nD.
Coded word is the set of data block 330nD and the code block 330nC based on those data blocks 330nD.If MDS is compiled
Code be used to generate the coded word comprising d data block 330nD and c code block 330nC, then all pieces 330 (data or volumes
Code) it can be reconstructed, as long as any healthy block 330 (data or coding) can be obtained from coded word.
Fig. 3 C shows Reed Solomon Coding 313a as error correction code block 313.Each band 320 is divided into
The block 330 being stored in multiple storage resources 114.Block 330 can be data block 330nD or code block 330nC, be formed together
Single encoded word.Data block 330nD includes real data 312；And code block 330nC is for even-odd check to determine file
Whether 310 be intact.Reed Solomon Coding 313a allows up to the loss of the total number of code block 330nC, wherein
Band 310 still can be reconstructed according to data block 330nD.Therefore, each band 320 of file 310 includes multiple data
Block 330nD and code block 330nC code block, manager 210 place it in multiple storage resources 114, wherein data block
The set of 330nD and code block 330nC form single encoded word.Generally, each band 32 can be placed on by manager 210
In storage resource 114, and that how other bands 320 in file 310 are placed on is unrelated in storage resource 114.Reed-institute sieve
Redundant data 312 or parity data 312 are added to file 310 by door code 313a, and file 310 is connect later
Receipts person restores, or even when introducing many wrong (capacity of the coding up to used).Reed Solomon Coding 313a is used
In maintaining the data integrity in resource host 110, for reconstructing data 312 to be used to execute (delay), or for faster
Ground consumes machine.
With reference to Fig. 3 D to Fig. 3 H, in nesting coding 313b technology, coded data partition 316 includes the (tool of deblocking 316
Have data block 330nD) and error correction code block (that is, non-data block 330nC), it is stored and is considered as being formed two-dimentional R x C
Array.There is X code block 330nC (quilt of the block 330 of X or less damage can be used in reconstructing each column for each column C
Referred to as " code check block 330nCC ").For entire 2-D array, there are Y code block 330nC, (referred to as " word checks block
330nWC").When there is the block 330 damaged more than X in a line or multirow C, also make other than other healthy blocks 330
The block 330 of damage is reconstructed with code check block 330nWC.Although the certain examples described in the present specification are by coded data
Piecemeal 314 (that is, deblocking 316 and code block 330nC (that is, non-data block 330nC)) is illustrated as forming two-dimensional array, still
It is able to carry out the coding techniques for the coded data partition 314 that creation is configured differently.For example, different column can have different numbers
Destination code checks block 330nCC, and includes that word checks that the column C of block 330nWC can have and comprising data block 330nD and generation
Code checks the row of the different number of the column of block 330nC.
Coding 330nC can be used for by the way that the data block 330nD of each column C is assigned to data center for data 312
It is stored across resource host 110.Arrange every piece 330 resource host 110 that can be assigned in data center in C.Later, if
X or less piece 330 are lost at data center, then block 330 is able to use in only data center and communicates to be reconstructed (example
Such as, therefore without other data centers data 312 must be provided in executing reconstruct).If it exceeds X block 330 at one or
It is lost in multiple data centers, then Y word checks block 330nWC for attempting reconstruct.Therefore, (it can be with for communication between data center
It is that cost is higher, such as slower than communicating in data center) only when X block 330 is damaged in individual data center
It is needed.
Coding can also be used in individual data center.Instead of different column C is assigned to different data centers,
All column are stored at individual data center by coded system 102.Data block 330nD and code block 330nC can be stored in
At different resource hosts 110 in the data center.This reads data 312 from resource host 110 for example during reconstruct
Be in the case of cost high (for example, time-consuming) it is useful, coded system 102 is read during reconstruct than using passing
Coding techniques unite for less piece 330 of needs.The block 330 damaged on a small quantity can be by reading other a small amount of blocks 330 (in column C
Code check block 330nCC and other data block 330nD) can be by needing the block 330 that is reconstructed, and largely damages
Block 330nWC is checked to be reconstructed using word when wanting.
With reference to Fig. 3 D to Fig. 3 H, in some implementations, nesting coding 313b technology shows the data to form coded word
Block 330nD and code block 330nC.As shown, nested coding 313b technology is two-dimentional (2D) nested coding 313b technology, but
It is that three-dimensional (3D) nested coding 313b technology can also be applied.2D nesting code 313b is according to any line using system form
Property MDS coding to create.Word based on deblocking 316 checks that block 330nWC is divided into two groups, and first group includes X code
Block 330nC, and second group includes N number of code block 330nC.The piecemeal of data 312 is considered as being formed the array of column C, and the
X code block 330nC in one group is used for by the way that their " fractionations " are created each column X column block at the isolated component of each column
330 (" fractionation " code check block 330nCC).N number of code block 330nC in second group forms word and checks block 330nWC.
For example, Fig. 3 E shows deblocking (D0-D41) 316 (wherein D0-D41 is data block 330nD) and based on data point
Code block (C0-C7) 330nC of block (D0-D41) 316.Data block (D0-D41) 330nD and code block (C0-C7) 330nC are formed
Coded word.Code block 330nC is divided into first group and second group, wherein first group includes C0-C1, second group includes C2-C7.
C0-C1 is split to form the code check block 330nCC split.C2-C7 is used as word and checks block 330nWC.
With reference to Fig. 3 F, show including deblocking (D0-D41) 316 and extra block of code 330nC (the code inspection of fractionation
Look into block 330nCC and word and check block 330nWC) obtained coded data partition 314.It (is denoted as to generate and arrange the C0 of j
C0, j) corresponding fractionation code check block 330nCC, C0 is generated, even if not being that all data block 330nD arranged in j have
There is value zero.That is, C0, j, which have, to be used on the contrary from the partial data piecemeal 316 for using data block 330nD is executed
J is arranged only to generate the value that the operation of C0 obtains, wherein every other column are cleared.For example, if generator matrix will by with
In the C0 for generating partial data piecemeal 316, then generator matrix can be modified to generate C0, j, so that it, which has, will use original
This is simultaneously originally generated the value that device matrix application is obtained to deblocking 316 by beginning generator matrix, wherein in addition in the column of column j
Data block 330nD is cleared.
For the C1 of the fractionation of each column C, the code check block 330nCC of j similarly still replaces C0 to generate using C1.
As a result, C0 is the linear combination of C0,0-C0,6, and C1 is the linear combination of C1,0-C1,6.That is,
Be denoted as in Fig. 3 F "? " block 330 can by such as below with reference to Fig. 3 G further describe it is various in a manner of come
It generates.
In the example of Fig. 3 E and Fig. 3 F, obtained coded data partition 316 includes 42 data block 330nD and 8 generations
Code block 330nC.With reference to the original coding for creating coding piecemeal 314, code block 330nC belongs to two groups as described above
In one group, wherein X=2 be in first group in, and N=6 therein be in second group in.No matter when in first seven column
Block 330 of one column memory in two or less (X or less) damages, it will be able to using the healthy block 330 for arranging C and be directed to
The code check block 330nCC of the fractionation of C is arranged to correct the block 330 of damage.In order to prove this, it is assumed that j mark include two or
The class C of the block 330 of less damage and consider by that will be obtained from all data block 330nD clearing other than j of column C
The coded word obtained.In the coded word, C0=C0, j and C1=C1, j.As a result, two or less damage in other column
Block 330As equally include all zero data blocks 330nD, and by check word check block 330nWC be it is impaired.
In the example shown in Fig. 3 F, word checks that block 330nWC completely fills permutation C (column on the right).2D nesting generation
Code 313b can check any number of column C of block 330nWC using word to create.Word checks that the column C of block 330nWC can have
Can have with the column C of the column equal number of row R or different number of row R of data block 330nD, and word inspection block 330nWC
The row R of number different from each other.Word checks that the column C of block 330nWC can but necessarily have code check block 330nCC, i.e. generation
Code check word checks block 330nCCWC.Increase word check the number of block 330nWC improve the reliability of stored data 312 but
It is at resource host 110 using more storages.Generally, for nested code 313b, arrange C include data block 330nD or
Word checks both block 330nWC but nots.
Generally, the code check block 330nCC of X fractionation and N number of word check that the 2D of block 330nWC is embedding with each column C
Set code 313b can be used for reconstructing while executing communication (it typically is communicate in such as data center) in only column
Each column C has the block 330 of X damage (including in those of data block 330nD column).The block of multiple damages in reconstruct piecemeal
In 330, the block 330 of those damages is usually reconstructed first, because communication is more lower than communication cost between column in column, but other are damaged
Bad block 330 may possibly still be present.If after the block 330 of the damage in reconstruct column, however it remains (N+X) is a or less
Other blocks 330 (because they can not be reconstructed using communication in column), then the block 330 of those other damages is able to use word
The code check block 330nCC of block 330nWC and fractionation is checked to be reconstructed.Word in first group checks block 330nWC (C0 and C1)
It can be according to the code check block 330nCC of fractionation for example using formulaIt determines, even if those words are examined
Block 330nWC is looked into not stored clearly.
In order to prove this, it is assumed that Z indicates impaired word and checks the number of block 330nWC, and assumes Y mark first
In group can not be according to formulaFrom the code check block 330nCC of their corresponding fractionations be reconstructed by
The word of the code check block 330nCC of the fractionation of damage checks the number of block 330nWC.Using the formula, can determine from
One group-Y words of X check block 330nWC, to obtain checking block 330nWC and second with the word of Y damage in first group
The word of Z damage in group checks the coded word (for example, coded word shown in Fig. 3 E) of block 330nWC.Because being at most to exist
The block 330 of N+X damage is amounted to, so at most there is the data block 330nD of N+X-Y-Z damage.Therefore, it is able to use to obtain
Coded word reconstruct the blocks 330 of all damages because it includes the block 330 of at most N+X-Y-Z+Y+Z=N+X damage.
With reference to Fig. 3 G, in some implementations, obtained coding piecemeal includes the code that block 330nWC is checked for word
Check block 330nCC (that is, code check word checks block 330nCCWC).Compared with the coding piecemeal 314 of Fig. 3 F, point of Fig. 3 G
Block include code check block C0,7 and C1,7 330nCC replace in Fig. 3 F utilize "? " the position of label.This is a kind of offer weight
The word for building damage checks block 330nWC and does not depend on the mode communicated between column.Code check block C0,7 and C1,7 330nCC can
It generates in various ways.For example, those code check blocks 330nCC can based on C2-C7 to generate C0 based on D0-D5,0
Identical with C1,0 mode generates.The coding piecemeal that (the using example nesting code 313b) of Fig. 3 G obtains can be used for
Execute the block 330 of up to eight damages of reconstruct after reconstruct in column.It can be for any number for including word inspection block 330nWC
Column add code check block 330nC.
With reference to Fig. 3 H, in some implementations, manager 210 distributes data 312 using nested code 313b.System
100 receive 316 (step 372) of deblocking.Deblocking 316 can include md*ndData block 330nC, mdIt is the number of data line
Mesh, and ndIt is the number of data column, and mdAnd ndMore than or equal to one.Encoding piecemeal includes m*n block 330 comprising
md*nd, wherein m is the total number of the row R of data block 330nD and non-data block 330nC, and n is data block 330nD and non-number
According to the number of the column C of block 330nC；M and n is greater than or equal to one.System 100 uses the first linear faults school for using system form
Positive code 313 and data block 330nD generate the one or more columns per page C (step 374) that word checks block 330nWC.The mutually word of colleague R
Check that block 330nWC and data block 330nD forms coded word.For the m of data block 330nCdEvery row in row, system 100 generate
For one or more code check block 330nCC (steps 376) split of column C.The code check block 330nCC of fractionation is given birth to
Being formed at the linear combination of the code check block 330nCC of the n fractionation made from different lines C includes data block 330nD and m
A word checks that the first code of block 330nWC checks block.First word checks block 330nWC (and from the fractionation from different lines C
Any other word that the linear combination of code check block 330nCC obtains checks block 330nWC) formed have data block 330nD and
The word generated in step 374 checks the coded word of block 330nWC.For example, the code check block of the fractionation for each column C
330nCC is able to use the error correction code 313 and m of fractionationdA data block 330nD or word check block 330nWC to generate,
The error correction code 313 of middle fractionation includes and is directed to the first linear error correction code 313 for being applied to data block 330nD
Generator matrix encode the generator matrix of identical fractionation, wherein data block 330nD is for the column C quilt other than arranging C
It resets.
100 storing data block 330nD of system and the code check block 330nCC and word of fractionation check the column C of block 330nWC
(step 378).In some implementations, all pieces 330 are stored at single group of resource host 110 by system 100.At certain
In other a little implementations, each column C is assigned to different groups of resource host 110 by system 100.When system 100 identify one or
When the block 330 of multiple damages, system 100 is able to use the code check block 330nCC of fractionation and word checks block 330nWC to reconstruct
The block 330 of damage.In general, the examination of 100 prelibation of system uses the code check block 330nCC and other data with the fractionation in a line C
Block reconstructs the block 330 of damage.If after the block 330 using the code check block 330nCC only split reconstruct damage,
The block 330 of certain damages still has, then system 100 checks that block 330nWC is rebuild using word, including uses and can pass through
Determine split code check block 330nCC linear combination and determination word check block 330nWC rebuild.In certain examples
In, when there are multiple loss, system 100 uses any block 330 for including data block 330nD.
Storage system 100 or its each section can be subjected to the system failure of a period of time.In the resource master of storage system 100
The data 312 distributed on machine 110 may be unavailable for user.For example, referring back to Figure 1B, resource host 110a may passed through
Safeguarded or had the system failure；Therefore, the data 312 stored on resource host 110a are (for example, tape copy 330n, number
According to block 330nD and non-data block 330nC) it may can not obtain (that is, data 312 are inaccessible).In addition, resource host 110a can
(for example, one week) function ability can be continued for some time normally or maintenance could be completed.During this period, resource host
110a is unavailable, if storage system 100 restores loss, data 312 make user carry out file request 122, and data 312 can
With.
In some implementations, data 312 are divided into high availability data 312 and low usability data by system 100
312 and determine which data 312 can generate higher risk of missing due to maintenance.Height can be restored or be replicated to system 100
Usability data 312 is without restoring all or most of remaining data 312.Since certain data of data 312 are being tieed up
It is at once available after shield or failure, therefore 100 delayed recovery of the system data 312 but replacement high availability data 312.
With reference to Fig. 4 A to Fig. 4 C, manager 210 can determine or receive the level 400 of distributed memory system 100 to mark
The rank (for example, rank 1-4) that may be safeguarded at which is known, without influencing user's access to the data 312 stored.
Maintenance or failure (stringent level 400a (Fig. 4 A), non-critical level 400b (Fig. 4 B)) may include power maintenance/failure, cooling
System maintenance/failure (Fig. 4 C), networking maintenance/failure, update or renewal part or its for influencing distributed memory system 100
He safeguards or power failure.Maintenance can be scheduled, and in some examples, the unscheduled system failure may occur.
Systemic hierarchial 400 includes being with maintenance unit/system domain 402 across one or more system level 1-5
Irrespective of size is not (for example, rank 1-4).Each system domain 402 has active state or inactive state.Distribution Center's module 410 is wrapped
One or more units 420,420a-n are included, and each unit 420 includes one or more racks 430 of resource host 110.
Each unit 420 further include unit cooling 422, cell power 424 (for example, bus duct) and unit rank network 426 (for example,
The network switch).Similarly, each rack 430 includes rack cooling 432, rack power 434 (for example, bus duct) and rack
Rank 436 (for example, network switch) of networking.
System level may include that the first system rank 1, second system rank 2, third system level 3 and the 4th are system-level
Other 4.The first system rank 1 correspond to data processing equipment 112, non-transient memorizer equipment 114 or the network equipment 116 (for example,
NIC resource host or host machine 110,110a-n).Each host machine/resource host 110 has system domain 402.Second
System level 2 corresponds to rack 430, and 430a-n and cooling delivery device 432, power in rack rank host machine 110 are passed
Send device 434 (for example, bus duct) or communication delivery device 436 (for example, the network switch and cable).Each rack 430 or rack
Cooling delivery device 432, power delivery device 434 or the communication delivery device 436 of rank have system domain 402.Third system level 3 is right
It should be in Distribution Center's module 410 and the unit supplied to associated rack 430 cooling 422, cell power 424 or unit rank connection
Any unit 420,420a-n of net 426.Each unit 420 or unit cooling 422, cell power 424 or the networking of unit rank
426 have system domain 402.4th system level 4 corresponds to Distribution Center's module 410.Each Distribution Center's module 410 has
System domain 402.
Fig. 4 A shows critical system level 400a, and wherein each level component of systemic hierarchial 400 is (for example, resource master
Machine 110, rack 430, unit 420 or Distribution Center's module 410) depend on other level component 110,410,420,430.
And Fig. 4 B shows non-critical systemic hierarchial 400b, one of level component 110,410,420,430 has more than one defeated
Enter feeding.In some examples, systemic hierarchial 400 is stored in the non-transient memorizer 204 of its processor 202 by manager 210
On.For example, manager 210 reflects first resource host 110 (and its corresponding processor resource 112a and storage resource 114a)
It is mapped to the first rack 430a, the first rack 430a is mapped to the first bus duct 420a, and the first bus duct 420a is mapped
To the first Distribution Center module 410a.
Manager 210 determined based on the mapping of level component 110,410,420,430 when level component 110,410,
420,430 be subjected to maintenance when which resource host 110 be inactive.Once system domain 402 is mapped to by manager 210
Resource host 110 (therefore being mapped to its corresponding processor resource 112a and storage resource 114a), manager 210 is determined to
The highest level (for example, rank 1-4) of maintenance is executed at which, while maintaining processor or availability of data.
System domain 402 includes any level portion for being subjected to the level component 110,410,420,430 of maintenance and relying on it
Part 110,410,420,430.Therefore, when a level component 110,410,420,430 is subjected to maintenance, the level component 110,
410,420,430 be inactive, and any other level in the system domain 402 of level component 110,410,420,430
Component 110,410,420,430 is also inactive.For example, when resource host 110 is subjected to maintenance, including storage equipment 114,
The 1 system domain 402a of rank of data processor 112 and NIC 116 are in inactive state.When rack 430 is subjected to maintenance,
The 2 system domain 402b of rank of any resource host 110 including rack 430 and dependent on rack 430 is in inactive state.
When unit 420 is (for example, go to appointing for the unit cooling-part 422 of unit 420a, bus duct 424 and/or the network switch 426
Meaning one) be subjected to maintenance when, including unit 420 and dependent in the rank 3 and 4 of unit 420 any level component 110,
410,420,430 it is in inactive state.Finally, when Distribution Center's module 410 is subjected to maintenance, including Distribution Center's module
410 and inactive shape is in dependent on any part 110,410,420,430 in the rank 2 to 4 of Distribution Center's module 410
State.Activity
In some examples, as shown in Figure 4 B, non-critical level component 410,420,430,114 can have dual feedback
It send, i.e., level component 110,410,420,430 depends on two or more other level components 110,410,420,430.Example
Such as, unit 420 can have the feeding from Liang Ge Distribution Center module 410；And/or rack 430 can have from two
The dual feeding of unit 420.As shown, 2 system domain 402b of rank may include two racks 430a and 430n, wherein
Two rack 430n include two feedings from two units 420a, 420n.Therefore, the second rack 430n is two systems domain
A part of 402ca and 402cb.Therefore, the lower rank of systemic hierarchial 400 is maintained, without cause systemic hierarchial 400 compared with
High level loss.This causes the redundancy in system 100, allows data accessibility.Specifically, Distribution Center's module 410
It can be maintained, without losing any unit 420 relied on it.In some examples, rack 430 includes dual power supply rack,
It allows power of the maintenance of bus duct without being lost to the dual power supply rack relied on it.In some examples, it can be tieed up
It holds without causing the system domain 402 interrupted ignored to allow to safeguard in distribution block 330；However, ignored system domain 402
Can be included in distribution block 330, this is because accidental interruption can still cause the loss of block 330.
In some examples, cooling equipment (such as unit cooling 422 and rack cooling 432) is used for cooling unit respectively
420 and rack 430.Unit cooling-part 422 can cool down one or more units 420.Similarly, rack cooling 432 can be with
Cooling one or more rack 430.210 storage resource host 110 of manager is with cooling equipment (that is, unit cooling 422 and rack
Cooling relevance 432).In some implementations, manager 210 consider storage system 100 in be likely to occur it is all can
The maintenance combination of energy is to determine systemic hierarchial 400 or safeguard the combination of level 400.For example, wherein one or more cooling equipment
422, the systemic hierarchial 400 or in which function of 116,426,436 failure of systemic hierarchial 400 or in which the network equipment of 432 failures
Rate distributes the systemic hierarchial 400 of 424,434 failures.
Therefore, when the level component 110,410,420,430 in storage system 100 is maintained, the level component 110,
410,420,430 and be mapped to or dependent on the level component 110,410,420,430 any level component 110,410,
420,430 it is in inactive state.Inactive 110,410,420,430 user 120 of level component can not visit
It asks, and 110,410,420,430 user of level component being in active state may have access to, to allow 120 processing of user/access
By the level component 110,410,420,430 storages/support/maintenance data 312.As previously mentioned, in inactive shape
During state, user 120 can not access resource host 110 associated with the system domain 402 for being subjected to maintenance；And it is therefore, objective
Family end 120 can not access file 310 (that is, block 330 comprising tape copy 330n, data block 330nD and non-data code
Block 330nC).
In some implementations, manager 210 is for example limited based on the mapping of level component 110,410,420,430
Multiple pieces 330 distributed to the storage equipment 114 in any system domain 402.Therefore, if 1 system domain 402 of rank is inactive
, then manager 210 maintains the accessibility to file 310 (or band 320), although certain pieces 330 may be inaccessible by
's.In some examples, for each file 310 (or band 320), 210 determination of manager can be placed on individual system
The maximum number of the block 330 in any storage equipment 114 in domain 402, so that if being directed to the block 330 of file 310 with storage
The associated system domain 402 of storage equipment 114 be subjected to safeguarding, then manager 210 can still obtain file 310.Block
330 maximum number ensures that manager 210 can reconstruct file 310, although certain pieces 330 may be disabled.Certain
In example, the maximum number of block 330 is arranged to lower threshold to adapt to any system failure, while still being able to according to block
330 reconstruct file 310.When block 330 is placed in storage equipment 114 by manager 210, manager 210 ensures in band
It no more than the maximum number of piece 330 is inactive when individual system domain 402 is subjected to maintenance in 320.In addition, manager 210
The data of resource host 110 in system domain 402 can also be for example limited based on the mapping of level component 110,410,420,430
The number of operation is handled on processor 112.Therefore, if 1 system domain 402 of rank is inactive, the maintenance pair of manager 210
The accessibility of operation, although certain processors 112 of resource host 110 are inactive.
In some implementations, as it was earlier mentioned, system 100 can suffer from maintenance or chance failure.Store equipment 114
Certain data 312 of upper storage may have higher wind when its stored storage equipment 114 is in inactive state
Danger becomes completely unavailable.Data 312 can be split so as to since maintenance event has bigger loss wind by manager 210
The data 312 of danger can be resumed or replicate the remainder that data 312 must be replicated or restored without manager 210
(without bigger risk of missing).
In some implementations, block 330 is identified as high availability block 330a or low availability block by manager 210
330b.High availability block 330a has high priority and before low availability block 330b.In some examples, manager
210 determine the availability of block 330 based on data 312 or based on the owner of data 312 or user.
Manager 210 can determine the active redundancy value for each band 320 of file 310 to determine that system 100 is
It is no should be prioritized band 320 for restore (that is, addition copy 330n or storage file 310 reconstructed blocks/partially to improve text
The durability and availability of part 310).Active redundancy value is based on and the associated arbitrary system domain 402 of corresponding band 320 and block
330.In some implementations, number of the active redundancy based on the system domain 402 that can be lost, so that in band 320
Data 312 become unavailable or inaccessible (for example, not restructural).Alternatively, active redundancy is to need to be lost in band 320
The number of the block 330 of mistake, so that the data 312 in band 320 become unavailable or inaccessible (for example, not restructural).This
Can be in all pieces 330 Shi Yingyong in different memory equipment 114 of band 320, and manager 210 is determined in disk rank
The active redundancy value of (system level 1).If the number for losing system domain 402 (or alternatively, lost blocks 330) is equal to or more than
Active redundancy, then system 100 will be unable to reconstruct band 320 (that is, data that system 100 can not read band 312).For example, waiting
There are at least one blocks 330 in one active redundancy bar band 320, so that if the block becomes unavailable, system 100
The data 312 of band 320 can not be read.Two needs of block 330 of active redundancy instruction minimal amount equal to two become unavailable,
System 100 can not just read the data of band 320.
In some implementations, manager 210 is determined in the effective superfluous of each systemic hierarchial rank (for example, rank 1-4)
Residual value.The rank that manager 210 considers particular bands 320 and can determine active redundancy value at it.Manager 210 simulation from
Band 320 removes block 330 to determine active redundancy value.Manager 210 assumes which removes from band 320 by removing block 330
A little blocks 330, wherein the maximum number of block 330 is dependent on the individual node in the selected rank of systemic hierarchial 400.Manager 210
It keeps assuming to remove block 330, until the number of rest block 330 can not reconstruct the data 312 in particular bands 320.Removal follows
The number of ring is active redundancy.
For replica code (described in Fig. 3 A), active redundancy value is comprising at least one health (for example, may have access to)
The number in the selected rank Unique System domain 402 of the systemic hierarchial 400 of block 300, as long as because system 100 is in system domain 402
Retain a block 330 (for example, the block 330n being replicated), then data 312 are redundancies.For example, if band 320 is individually being
There are one or more copy block 330n, then active redundancy is equal to 1 in system domain 402.If band 320 is in a system domain 402
In have instruction one it is available/may have access to block 330, and another system domain 402 have it is another it is available/may have access to block 330, then
Active redundancy is equal to 2.The example with reference to shown in Fig. 4 C, it is assumed that band 320, which has, stores equipment 114a, the second storage first
The three copy block 330n stored on equipment 114b and third storage equipment 114c.Each storage equipment 114a-c is located at different
Rack 430.First storage equipment 114a is located at the first rack 430a, the second storage equipment 114b and is located at the second rack 430b, with
And third storage equipment 114c is located at third rack 430c.As shown, the first rack 430a and the second rack 430b shares phase
Second unit 420b is depended on first unit 420a (for example, bus duct 424) and third rack 430c.Therefore, copy block
330n is located at two ranks 3 system domain 402ca and 402cb.Copy block 330n be also located at three ranks, 2 system domain 402ba,
402bb and 402bc and three rank 4 system domain 402aa, 402ab and 402ac.In addition, first unit 420a and second is single
First 420b all relies on Distribution Center's module 410,410a.Band 320 is storing the rank of equipment 114 (in rank 1)
Active redundancy is equal to 3, because copy block 330n is placed in three different storage equipment 114.Band 320 is in rack 430
The active redundancy of rank (in rank 2) is also equal to 3, this is because copy block 330n is placed in depending on three different racks
In the storage equipment 114 of 430a-c.Band 320 is equal to 2 in the active redundancy of the rank (in rank 3) of unit 420, because of data
312 are placed in the storage equipment 114 for depending on two bus ducts 424 of feeding first unit 420a and second unit 420b.
Band 320 is equal to 1 in the active redundancy of the rank (in rank 4) of Distribution Center's module 410.Therefore, active redundancy value can be by
It is considered the selected rank Unique System domain 402 of the systemic hierarchial 400 comprising at least one health (for example, may have access to) block 300
Number (as long as because system 100 retain a block 330, data 312 be exactly redundancy be used for replicate).
It is more complicated for the active redundancy of erasure codes file with reference to Fig. 4 D and Fig. 4 E, this is because system 100 may nothing
Method simply reduces block 330 and counts to the number in Unique System domain in band 320.
Fig. 4 D illustrates the exemplary system level 400d for Reed-Solomon erasure codes file 310.Assuming that band
There are two code block 330nC and four data block 330nD, a total of six blocks 330 for 320 tools.Reed Solomon Coding 313a allows
The loss of any combination of up to code block 330nC sum or code block 330nC or data block 330nD, wherein file 310 is still
It can so be reconstructed according to remaining data block 330nD and/or code block 330nC.In the case, system 100 can lose more
It is up to two blocks 330 and still all restructural.Block 330 is distributed in six rack R1-R6,430a-430f (rank 2), turn
And it is distributed in four unit 420a-d (for example, rank 3).As shown, the first rack 430a and the second rack 430b depend on
In first unit 420a.Third rack 430c depends on second unit 420b, and the 4th rack 430d and the 5th rack 430e
Depending on third unit 420c.Finally, the 6th rack 430f depends on the 4th unit 420d.In addition, example includes three distributions
Center module 410a-c.First unit 420a and second unit 420b depends on the first Distribution Center module 410a.Third unit
420c depends on the second Distribution Center module P2,410b, and the 4th unit 420d depends on third Distribution Center module 410c.
Therefore, when manager 210 determine rank 2 (that is, rack rank) active redundancy when, manager 210 consideration can remove how much
System domain 402 and system 100 still are able to read data 312 from band 320.In this example, system 100 can remove arbitrarily
Two rack 430a-f and still be able to read data 312.However, if system 100 removes three rack 430a-f, system
100 can not read data 312 to reconstruct band 320.Therefore, active redundancy is equal to 3 in rack rank (rank 2)；Because if
System 100 loses three rack 430a-f, then band 320 is unreadable.As mentioned previously, system 100 can lose up to two
A block 330 and still be able to reconstruct band 320.
Manager 210 can be by assuming that removing unit 420 comes determination unit rank (that is, bus duct rank or rank 3)
Active redundancy, the unit 420 include include band 320 compared with other units 420 of the rest block 330 with band 320
The maximum number of piece 330 (assume worst case).The example with reference to shown in Fig. 4 D, manager 210, which is assumed to remove, includes
The maximum number of piece 330 of the unit 420 compared with other units 420.In the case, first unit 420a (system domain
402ca) and third unit 420c (system domain 402cc) has the maximum number of piece 330, so the selection of manager 210 (for example,
The unit 420 to be removed at random or definitely) is with the active redundancy of the determining rank.Once manager 210 remove unit 420 or
One of 3 system domain 402c of rank, system 100 are just left first unit 420a or third unit 420c and still are able to reconstruct item
Band 320.System 100 then assume remove first unit 420a or third unit 420c another, this cause four it is unavailable
Block 330 (that is, 4 > 3,3 are so that system 100 can not read unavailable piece 330 of number of band 320), it means that item
Band 320 is unreadable after losing two units 420 or two systems domain 402,402c.Therefore, in unit rank (rank 3)
Active redundancy is equal to 2, because system 100 can not weigh in two units 420 or 3 system domain 402c of rank inactive
Structure band 320.
Next, manager 210 considers the active redundancy in Distribution Center's module (rank 4).Applied to the identical of rank 3
Assuming that being also applied to rank 4.Therefore, system 100 removes Distribution Center's module 410, which includes and tool
There are other Distribution Center's modules 410 of the rest block 330 of band 310 compared to the maximum number of piece 330.Refer back to showing for Fig. 4 D
Example, if system 100 removes the first Distribution Center module 410a, three blocks 330 of band 320 are no longer available for reconstruct band
320, so that system 100 can not read band 320.Therefore, the active redundancy of Distribution Center's module level be equal to 1, this be because
For after losing Distribution Center's module 410, band 320 is unreadable.
Fig. 4 E illustrates the exemplary system level 400e for nested coding file 310.Such as previously with reference to Fig. 3 E and figure
Described in 3F, nesting coding file 310 includes data block 330nD, code check block 330nCC, word inspection block 330nWCC and code
Check word checks block 330nCCWC.In some examples, band 320 includes with four numbers of two column arrangements of two blocks 330
According to block 330nD, wherein each column is protected by a code check block 330nCC (being directed to two code check in total), and data block
330nD checks block 330nWC protection by three words.The example in Fig. 4 E is also referred to, the first to the 4th rack 430a-d includes data
Block 330nD, the 5th rack 430e and the 6th rack 430f include code check block 330nCC and the 7th to the 9th rack
430g-430i includes that word checks that (manager 210 does not consider that code check word checks block 330nCCWC for determining to block 330nWCC
The active redundancy of nesting coding file 310).
In each system level, file 310 is encoded for nesting, manager 210 can be determined based on column reconstruct, based on item
Active redundancy with reconstruct or both.For based on column reconstruct, manager 210 only considers data block 330nD and code check
Block 330nCC.In some examples, manager 210 can ignore code check in the active redundancy of the entire band 320 of determination
Block 330nCC.In some implementations, in the active redundancy of the entire band 320 of determination, which code manager 210 considers
Check which block 330nCC arrange C with.For example, if system 100 is lost data block 330nD and secondary series in first row C1
Code check block 330nCC in C2, then band 320 is good and restructural.Therefore, when determining active redundancy value ER, management
" geometry " of block 330 in nested band 320 can be considered in device 210.
In rank 2 (that is, rack rank), manager 210 is associated with the first to the 4th rack 430a-d by considering
The data block 330nD and storage associated with the 5th rack 430e and the 6th rack 430f stored in storage equipment 114 is set
The code check block 330nCC stored on standby 114, to determine the active redundancy of column C.As described in example, each column C includes two numbers
According to block 330nD and a code check block 330nCC, a total of three block 330.Therefore, in order to reconstruct column C, system 100 needs two
A available block 330 (that is, the block 330 stored in equipment is in active state).If two or more blocks 330 are unavailable,
Then system 100 can not reconstruct column C.Therefore, manager 210 determines the active redundancy etc. based on column reconstruct in 2 system domain 402 of rank
In 2, this is because system 100 can not reconstruct column if 2 racks are inactive.Similarly, manager 210 can carry out phase
With hypothesis for determining reconstructing based on column in 4 system domain 402 of rank 3 and rank.Based on column reconstruct in 3 system domain 402 of rank
Active redundancy be equal to 2, it is assumed that the data block 330 from each column C is stored in different units 420, and based on column reconstruct
It is equal to 1 in the active redundancy of 4 system domain 402 of rank.
In addition, manager 210 is stored in storage equipment 114 associated with the first to the 4th rack 430a-d by considering
Data block 330nD and storage equipment 114 associated with the 7th to the 9th rack 430g-i on the word that stores check block
330nWCC, to determine the active redundancy of band 320.In some examples, usually when determining active redundancy value ER, manager
210 ignore code check block 330nC；And in other examples, when determining per-column active redundancy value ER, manager 210
Consider code check block 330nC.Therefore, in order to reconstruct band 320, system 100 needs at least four available blocks 330 (that is, equipment
The block 330 of upper storage is in active state).If four or more piece 330 unavailable, system 100 can not reconstruct band
320.Therefore, system 100 determines that the active redundancy based on band reconstruct in 2 system domain 402 of rank is equal to 4, this is because if
Four rack 430a-d are inactive, then system 100 can not reconstruct band 320.When determining the active redundancy of band 320, management
Device 210 is it is also conceivable to code block 330nC.In addition, block 330 can be considered in manager 210 when determining active redundancy value ER
Geometry (for example, which column C block 330 resides in), this is because in data block 330nD and secondary series C2 in first row C1
The loss (assuming that without other loss) of code check block 330nCC still allow to carry out the reconstruct of band 320 based on independent column C,
And the reconstruct of band 320 may be prevented by losing the data block 330nD in same column and code check block 330nCC.That loses is certain
Geometry (that is, various loss for arranging block 330 in C) may not be supported be based on column reconstruct based on column reconstruct and be compared other types
Reconstruct faster.
Similarly, manager 210 carries out identical hypothesis for determining in 4 system domain 402 of rank 3 and rank based on band
Reconstruct.In the example shown, the active redundancy in 3 system domain 402 of rank is reconstructed equal to 2 based on band, and is based on band weight
Structure is equal to 1 in the active redundancy of 4 system domain 402 of rank.
With reference to Fig. 5, in some implementations, system 100 (for example, manager 210) prioritization data 312 is for extensive
It is multiple.The data 312 stored in storage equipment 114 have one of following three kinds of states: available mode, down state and missing
State.When data 312 are initially stored in storage equipment 114, it is in available mode as shown in frame 502.Work as number
When being in available mode according to 312, the accessible data 312 in users/customers end 120.However, being in unavailable shape in data 312
When state or miss status, users/customers end 120 cannot access data 312, and system 100 can reconstruct data 312 and make it
It is available for users/customers end 120.The unavailable and miss status of data 312 may be the inactive shape due to system domain 402
State.Therefore, if data 312 are associated with inactive system domain 402, data 312 may be at unavailable
State or miss status.Data 312 may also become unavailable for other reasons or lack.With reference to decision box 504, manager
210 determine whether data 312 become unavailable.Unavailable data 312 are to be greater than 0 period not available arbitrary data
312.In frame 506, down state is the transition stage between available mode (frame 502) and miss status (frame 512).When threshold value
Between section TmNot available data 312 are unavailable data 312 (for example, 0 < t < Tm, wherein t is the not available time of data 312,
And TmIt is threshold time).In some examples, TmEqual to 15 to 30 minutes.In decision box 508, as t >=TmWhen, data 312
It is considered missing and changes to miss status (frame 512).Unavailable data 312 are considered as not available data 312, because
It due to rapid system failure or may be maintained in threshold time period (0 < t < Tm) in can use.However, if the system failure or
Threshold time T was persistently grown in maintenancem, then data 312 are considered missing and system 100 can be used in frame 514 and reconstruct missing data
312 (it can be used again).Manager 210 can periodically update the state of data 312, including the currently active of band 320
Redundancy ERC。
In some implementations, data 312 are identified as high availability data 312a or low availability number by manager 210
According to 312b, and reconstructs to have and be less than threshold value active redundancy value ERTThe currently active redundancy value ER of (that is, active redundancy value)CHeight
Usability data 312a, without considering the threshold time T before data 312 are considered missingm.In fact, this accelerates weight
Structure may have the certain high availability data 312a for becoming risk of missing.Accordingly, it is considered to frame 508, as t >=TmFor fictitious time, that is,
Data 312 determine whether data 312 are high availability data 312a in frame 510 still in down state, manager 210, with
And whether the active redundancy ER of data 312 (that is, band 320) is less than threshold value active redundancy value ER (ERC≤ERT).If data
312 be high availability data 312a and ERC≤ERT, then manager 210 initiates the reconstruct of data 312a, bypasses in frame 508
Condition (t >=Tm).In some examples, the not more state of new data 312 before reconstructing data 312 of manager 210；And at it
In his example, data 312 can be converted to miss status from down state in frame 512 by manager 210, this can be with conventional number
According to 312 for reconstructing.However, if data 312 are not the currently active redundancy values of high availability data 312a and data 312
ERCNot less than threshold value active redundancy value ERT, then data 312 are maintained at down state in frame 506.Bypass t >=T of frame 508mItem
Part allows manager 210 to reconstruct before low usability data 312b and in high availability data by permission system 100
312a loses without having arrived at threshold value active redundancy value ER before being reconstructedTHigh availability data 312a, to be prioritized
It is the data 312 of high availability.Threshold value active redundancy value ERTIt can be the config option of system 100.In general, active redundancy value
ER can based on block 330 in system level, its state, the type of coding of band 320 and band 320 state (for example, it is available,
Unavailable or missing).Active redundancy value ER can not indicate how many pieces 330 of band 320 can be lost, but can lose more
Few system domain 402, while still maintaining the redundancy (allowing to reconstruct) of band 320.Losing single extra block 330 can not influence currently
Active redundancy value ERC。
In some implementations, the active redundancy value ER for being classified as the band 320 of high availability is always less than or waits
In the active redundancy value ER for the band 320 for being classified as low availability.For example, it is assumed that three replicated blocks 330 of band 320
In different system domains 402.It is directed to t >=T for first piece 330mIt is unavailable.It is directed to t < T for second piece 330mIt is unavailable；And third block
330 is available.If fruit block 330 is high availability block 330a, then the currently active redundancy value ERCIt is 1, and if fruit block 330 is low available
Property block 330b, then the currently active redundancy value ERCIt is 2, this is because the second missing block 330 is directed to t >=TmIt is not unavailable.Work as item
When band 320 (and its block 330) is classified as high availability, active redundancy value ER is by considering that block 330 lacks t < TmMore accumulated
Polar region determines, so that faster reconstructing when the band 320 has the risk for becoming to lose.
With reference to Fig. 6, in some implementations, one kind is for prioritization data 312 in distributed memory system 100
The method 600 of recovery includes: to use number for including each band 320 with the file 310 of multiple bands 320 of block 330
Determine that 602 bands 320 include high availability block 330a or low availability block 330b according to processing equipment.File 310 can be by
It is classified as high availability or low availability.The band 320 of file and the corresponding blocks 330 of band 320 can be accordingly classified as
High availability or low availability.Method 600 further includes determining that 604 are directed to the every of file 310 using the data processing equipment
The active redundancy value ER of a band 320.The active redundancy value ER is based on block 330 and associated arbitrarily with corresponding band 320
System domain 402.Distributed memory system 100 has the systemic hierarchial 400 including system domain 402.In addition, each system domain 402
With active state or inactive state.The block 330 of band 320 associated with the system domain 402 being in active state is can
Access, and what the block 330 of band 320 associated with inactive system domain 402 was inaccessible by.Block 330
It may also become inaccessible for other reasons, and inaccessible property can not be with the activity of system domain 402/inactive
State is directly related.
When the block 330 of band 320 becomes inaccessible, method 600 includes substantially being stood using data processing equipment
I.e. reconstruct 606, which has, is less than threshold value active redundancy value ERTActive redundancy value ER inaccessible, high availability block 330a.This
Outside, when the block 330 of band 320 becomes inaccessible, this method further includes that 608:1 is reconstructed after threshold time period) it can not
Access, low availability block 330b；And 2) has and be greater than or equal to threshold value active redundancy ERTActive redundancy value ER can not visit
It asks, high availability block 330a.Therefore, the certain high availability block 330a for becoming to lose with high risk (are based on active redundancy value
ER it) receives and is weighed faster relatively than low availability block 330b or other high availability blocks 330a for becoming to lose without high risk
Structure.In addition to or alternatively threshold time period, other parameters can be used for triggering inaccessible piece 330 of reconstruct.For example, client
End 120 can be to 114 request data 312 (for example, block 330) of memory devices of host machine 110, but does not find data
312.In response to not finding data 312, client 120 can notify inaccessible data 312 to manager 210.If pipe
It manages device 210 and confirms that data 312 are inaccessible (for example, being directed to t < TmUnavailable or missing (is directed to t >=TmIt is unavailable)), then it manages
Device 210 can initiate the reconstruct of data 312, without delay (for example, without waiting for threshold time period, such as 15 or 30
Minute).
In some implementations, method 600 further comprises updating needle when system domain 402 is inactive
To the active redundancy value ER of each band 320 of file 310 associated with the system domain 402.Threshold time period can be big
Between about 15 minutes and about 30 minutes.
Systemic hierarchial 400 may include system level.System level includes the first system rank, second system rank,
Three system levels and the 4th system level.The first system rank (rank 1) corresponds to data processing equipment 112, non-transient storage
Device equipment 114 or the host machine of network interface controller 116 110.Each host machine 110 has system domain 402.Second system
Irrespective of size not (rank 2) corresponds to the power delivery device 434 for the rack 430 for accommodating host machine 110, communication delivery device 436 or cold
But delivery device 432.Each power delivery device 434, communication delivery device 436 or the cooling delivery device 432 of rack 430 have system domain
402.Third system level (rank 3) corresponds to the power delivery device 424 of the unit 420 with associated rack 430, communication is passed
Send device 426 or cooling delivery device 422.Each power delivery device 424, communication delivery device 426 or the cooling delivery device of unit 420
422 have system domain 402.4th system level (rank 4) corresponds to Distribution Center's module 410 of unit 420, in each distribution
Core module 410 has system domain 402.
In some examples, for each band 320, this method 600 includes determining for the effective of each system level
Redundancy value ER.Determine that the active redundancy value ER for the duplication band 330n with copy block 330 includes mark in correspondence system
Rank has the number in the Unique System domain 402 of at least one available copies block 330.Determining to be directed to has in second system rank
The active redundancy value ER of the encoding strip thereof 320 of data block 330nD and code block 330nC includes can in mark second system rank
Number when maintaining data accessibility in inactive Unique System domain (402).In addition, determining in third or the
Four system levels with data block 330nD and code block 330nC encoding strip thereof 320 active redundancy value include mark third or
It can be in inactive when maintaining data accessibility in fourth level and there is the maximum number compared with remaining system domain 402
The system domain 402 of purpose block 330.In addition, when more than one system domain 402 has the maximum number of piece 330, this method 600
Including one of Random select system domain 402.
In some implementations, it determines and checks block for data block 330nD, code check block 330nCC and word
The active redundancy value of the nested code strip of 330nWCC further comprises determining one of column active redundancy or band active redundancy.
Determine the number for showing that effect redundancy includes the unique block 330 that can be reconstructed from other blocks 330 in column C in identity column C；And
Determine that band active redundancy includes the unique block 330 that can be reconstructed from other blocks 330 in the band 320 in identification strip band 320
Number.
With reference to Fig. 7, in some implementations, one kind is for prioritization data 312 in distributed memory system 100
The method 700 of recovery includes the active redundancy value that 702 are determined using computation processor for each band 320 of file 310,
File 310 is divided into the band 320 with block 330.Active redundancy value is based on block 330 and associated with corresponding band 320
Arbitrary system domain 402 (ER).When system domain 402 is inactive, this method 700 is directed to including update 704 and system
The active redundancy value of each band 320 of the associated file 310 in domain 402.In addition, this method 700 includes having when band 320
It imitates redundancy value and is less than threshold value active redundancy value ERTWhen, so that 706 band (320) reconstruct.In some examples, this method
700 further comprise that the active redundancy value for being directed to each system level is determined for each band 320.
In some implementations, this method 700 further comprises determining band 320 including high availability block 330 still
Low availability block 330, and postpone the reconstruct of low availability block 330 (for example, about by the reconstruction delay of low availability block 330
Period between 15 minutes and about 30 minutes).
Can Fundamental Digital Circuit, integrated circuit, specially design ASIC (specific integrated circuit), computer hardware,
Firmware, software and/or combination thereof realize the various implementations of system described herein and technology.These various implementations
It may include using the implementation of one or more computer programs, one or more computer programs are including at least one
Be on the programmable system of programmable processor it is executable and/or interpretable, at least one programmable processor can be
It is dedicated or general, it is coupled as receiving data from storage system, at least one input equipment and at least one output equipment
Storage system, at least one input equipment and at least one output equipment are sent to instruction and by data and instruction.
These computer programs (being also known as program, software application or code) include the machine for programmable processor
Instruction, and can come with advanced procedures formula language and/or Object-Oriented Programming Language and/or with assembler language/machine language
It realizes.As it is used herein, term " machine readable media " and " computer-readable medium " refer to for by machine instruction and/
Data are supplied to any computer program product, device and/or equipment of programmable processor (for example, disk, CD, storage
Area, programmable logic device (PLD)), the machine readable media including receiving the machine instruction as machine-readable signal.Term
" machine-readable signal " refers to any signal for machine instruction and/data to be supplied to programmable processor.
(public affairs can be included in the description in Fundamental Digital Circuit or in computer software, firmware or hardware
The structure and its structural equivalents opened) in or the combination of one or more in them in implement to retouch in the present specification
The implementation of the subject content and feature operation stated.In addition, the subject content described in the present specification may be implemented as
One or more computer program products, that is, be encoded on a computer-readable medium with for by data processing equipment operation or
Person is used to control one or more modules of the computer program instructions of the operation of data processing equipment.Computer-readable medium can
Think machine readable storage device, machine readable storage substrate, memory devices, the substance for influencing machine readable transmitting signal
The combination of ingredient or the one or more in them.Term " data processing equipment ", " calculating equipment " and " calculation processing
Device " covers all devices, equipment and the machine for handling data, for example includes programmable processor, computer or more
A processor or computer.In addition to hardware, the apparatus may include creations for the running environment of the computer program in discussing
Code, such as constitute processor firmware, protocol stack, data base management system, operating system or one in them or more
The combined code of item.Transmitting signal is the signal being artificially generated, for example, electric signal, optical signal or electromagnetism that machine generates
Signal, the signal are generated to be used to transmit to appropriate acceptor device to information coding.
Computer program can be write (also referred to as with any type of programming language for including compiling or interpretive language
Using, program, software, software application, script or code), and it can be disposed with any form including be deployed as independence
Program is deployed as the module for being suitable for using in a computing environment, component, subroutine, object or other units.It calculates
Machine program is not the file that must correspond in file system.Program can be stored in the text for keeping other programs or data
In a part of part (for example, one or more script being stored in marking language document), it is exclusively used in the program discussed
In single file or multiple coordinated files are (for example, store the text of one or more module, subprogram or code section
Part) in.Computer program, which can be disposed, to be used on a computer or is being located at a website or distribution in multiple
Website and by being executed on multiple computers of interconnection of telecommunication network.
The process and logic flow described in the present specification can be executed by one or more programmable processor, should
One or more programmable processor executes one or more computer program, by input data operation and life
Movement is executed at output.Process and logic flow can also be by dedicated logic circuit devices (for example, FPGA (field-programmable
Gate array) or ASIC (specific integrated circuit)) execute and device can also be embodied as to dedicated logic circuit device.
For example, the processor for being adapted for carrying out computer program includes both general and special microprocessors and appoints
Any or multiple processor of the digital computer of which kind of class.In general, processor will be from read-only memory or arbitrary access
Memory or the two receive instruction and data.The basic unit of computer be the processor for being acted according to instruction execution with
And for storing instruction with one or more memory devices of data.In general, computer also will include for storing data
One or more mass memory unit (for example, disk, magneto-optic disk perhaps CD) or be operatively coupled for from this
One or more mass memory unit receive data or to one or more mass memory unit send data or
The two.However, computer not necessarily has such equipment.In addition, computer can be embedded in another equipment, example
Such as, mobile phone, personal digital assistant (PDA), Mobile audio player, global positioning system (GPS), etc..It is suitable for depositing
Storage computer program instructions and the computer-readable medium of data include the nonvolatile memory, medium and storage of form of ownership
Device equipment includes for example semiconductor memory devices, for example, EPROM, EEPROM and flash memory device；Disk, example
Such as, internal hard drive or removable disk；Magneto-optic disk；And CD-ROM and DVD-ROM disk.Processor and memory can be by dedicated
Logic circuit apparatus is supplemented or is incorporated in dedicated logic circuit device.
In order to provide the interaction with user, the one or more aspects of present disclosure can be implemented on computers, it should
Computer has for showing the display equipment of information (for example, CRT (cathode-ray tube) LCD (liquid crystal display) is supervised to user
Visual organ perhaps touch screen) and user can be used to provide to computer input keyboard and pointer device for example, mouse or
Tracking ball.Other kinds of equipment can also be used to provide the interaction with user；Appoint for example, the feedback provided a user can be
The sensory feedback of what form, for example, visual feedback, audio feedback or touch feedback；And can with including sound, voice or
Any form of person's tactile input receives input from the user.In addition, computer can pass through the equipment to being used by user
It sends document and receives document (for example, by response to receiving from the web browser on the client device of user from the equipment
Request to the web browser send webpage) to interact with user.
It can implement one or more aspects in present disclosure in computing systems, which includes for example making
For the back-end component of data server or including middleware component (for example, application server) or including front end component (example
Such as, have graphic user interface or Web browser (user can by the graphic user interface or Web browser with
Subject content described in this specification implementation interaction) client computer) or one or more as
Rear end, middleware or front end component any combination.The component of system can be by any digital data communications form or Jie
Matter (for example, communication network) interconnection.The example of communication network includes local area network (" LAN ") and wide area network (" WAN "), internet
(for example, internet) and peer-to-peer network (for example, self-organizing peer-to-peer network).
Computing system may include client and server.Client and server is generally remote from each other and usually passes through
Communication network interaction.The relationship of client and server by run on corresponding computer and mutually have client-clothes
Be engaged in device relationship computer program and generate.In some implementations, server to client device transmission data (for example,
Html page) (for example, for showing data to the user interacted with client device and receiving user's input from the user).
The data (for example, result of user's interaction) generated in client device can be received from client device at server.
Although this specification include many details, should not be construed as limitation present disclosure or
It can be should be understood as with the range of claimed content to the distinctive feature of the specific implementation of present disclosure
Description.In the present specification certain features described in the background of different implementations can also in a single embodiment by
Combination is implemented.On the contrary, the various features described in the background of single implementation can also in various embodiments individually
Or it is carried out in any appropriate sub-portfolio.In addition, though can describe feature as acting in certain combinations above, and
And it is even initially claimed in this way, but one or more feature from claimed combination can be in certain feelings
It is deleted from the combination under condition, and claimed combination can be related to the modification of sub-portfolio or sub-portfolio.
Similarly, it is operated although being described in the accompanying drawings with particular order, this is understood not to require with shown spy
It is fixed sequentially or with successively sequence to execute such operation or execute all shown operations to realize desired result.Certain
In the case of, multitask and parallel processing can be advantageous.In addition, various system units in examples described above
Separation is understood not to require such separation in all embodiments, and should understand that the program element and system of description
Usually it can be integrated in together in single software product or be encapsulated into multiple software product.
Many implementations have been described.It will be appreciated, however, that in the spirit and scope for not departing from present disclosure
In the case of, various modifications can be carried out.Therefore, other implementations are also in scope of the appended claims.For example, weighing
The movement recorded in benefit requirement can be performed by different order and still realize desired result.
Claims (30)
1. method (600) of the one kind for prioritization data (312) to restore in distributed memory system (100), the side
Method (600) includes:
For each band (320) for the file (310) for including multiple bands (320) with block (330), data processing is used
Equipment (202) determines that the band (320) includes high availability block (330a) or low availability block (330b)；
The active redundancy of each band (320) for the file (310) is determined using the data processing equipment (202)
Be worth (ER), the active redundancy value (ER) be based on described piece (330) and with the associated arbitrary system domain of corresponding band (320)
(402), the distributed memory system (100) has the systemic hierarchial (400) including system domain (402), each system domain
(402) there is active state or inactive state, wherein band associated with system domain (402) of the active state are in
(320) block (330) is addressable, and band associated with system domain (402) of the inactive state are in
(320) what block (330) was inaccessible by；And
When block (330) when band (320) becomes inaccessible:
Carry out substantially reconstruct immediately with effective less than threshold value active redundancy value (ER) using the data processing equipment (202)
Inaccessible, the high availability block (330a) of redundancy value (ER)；And
After threshold time period, reconstructed using the data processing equipment (202):
Inaccessible, low availability block (330b)；And
Inaccessible, high availability block with the active redundancy value (ER) for being greater than or equal to the threshold value active redundancy (ERT)
(330a)。
2. further comprising according to the method for claim 1 (600), when system domain (402) are in the inactive state
When, update the described effectively superfluous of each band (320) for being directed to the file (310) associated with the system domain (402)
Residual value (ER).
3. according to the method for claim 1 (600), wherein the threshold time period be included in 15 minutes with 30 minutes it
Between.
4. according to the method for claim 1 (600), wherein the systemic hierarchial (400) include system level (rank 1,2,
3,4) include:
The first system rank (rank 1) corresponds to data processing equipment (112), non-transient memorizer equipment (114) or network and connects
The host machine (110) of mouth controller (116), each host machine (110) have system domain (402)；
Second system rank (rank 2) corresponds to the power delivery device for accommodating the rack (430) of the host machine (110)
(434), delivery device (436) or cooling delivery device (432) are communicated, each power delivery device (434) of the rack (430) is led to
Believe that delivery device (436) or cooling delivery device (432) have system domain (402)；And
Third system level (rank 3) corresponds to the power delivery device of the unit (420) with associated rack (430)
(424), delivery device (426) or cooling delivery device (422) are communicated, each power delivery device (424) of the unit (420) is led to
Believe that delivery device (426) or cooling delivery device (422) have system domain (402)；And
4th system level (rank 4) corresponds to Distribution Center's module (410,410a, 410b) of the unit (420), each
Distribution Center's module (410,410a, 410b) has system domain (402).
5. according to the method for claim 4 (600), further comprising determining for each band (320) for each system
The active redundancy value (ER) of irrespective of size not (rank 1,2,3,4).
6. according to the method for claim 5 (600), wherein determining for the duplication band with copy block (330,330n)
The active redundancy value (ER) of (330n) includes that mark is available at least one in correspondence system rank (rank 1,2,3,4)
The number in the Unique System domain (402) of copy block (330,330n).
7. according to the method for claim 5 (600), having wherein determining and being directed in the second system rank (rank 2)
The active redundancy value (ER) of the encoding strip thereof (320) of data block (330nD) and code block (330nC) includes identifying described the
It being capable of number when maintaining data accessibility in inactive Unique System domain (402) in two system rank (rank 2).
8. according to the method for claim 5 (600), wherein determining in the third or the 4th system level (rank 3
Or rank 4) there is the active redundancy value (ER) of the encoding strip thereof (320) of data block (330nD) and code block (330nC) to wrap
Include can be in when maintaining data accessibility in the mark third or fourth level (rank 3 or rank 4) it is inactive simultaneously
And there is the system domain (402) of compared with remaining system domain (402) the maximum number of piece (330).
9. according to the method for claim 8 (600), wherein when more than one system domain (402) have the maximum number
Block (330) when, randomly choose one of described system domain (402).
10. according to the method for claim 1 (600), wherein determining for data block (330nD), code check block
(330nCC) includes: with the active redundancy value (ER) of the nested code strip (320) of word inspection block (330nWCC)
Determine one of column active redundancy or band active redundancy；
Wherein determine show effect redundancy include can be reconstructed from other blocks (330) in the column (C) in identity column (C) it is unique
The number of block (330)；And
Wherein determining that band active redundancy includes can be from other block (330) in the band (320) in identification strip band (320)
The number of unique block (330) of reconstruct.
11. method (700) of the one kind for prioritization data (312) to restore in distributed memory system (100), the side
Method (700) includes:
The active redundancy value (ER) of each band (320) for file (310), institute are determined using computation processor (202)
Stating file (310) includes the band (320) with block (330), based on described piece (330) and related to corresponding band (320)
The active redundancy value (ER) in the arbitrary system domain (402) of connection, it includes system domain that the distributed memory system (100), which has,
(402) systemic hierarchial (400), each system domain (402) have active state or inactive state；
When system domain (402) is in the inactive state, updates and be directed to the text associated with the system domain (402)
The active redundancy value (ER) of each band (320) of part (310)；And
When the active redundancy value (ER) of band (320) is less than threshold value active redundancy value (ERT), so that the band
(320) it reconstructs.
12. according to the method for claim 11 (700), wherein the systemic hierarchial (400) include system level (1,2,3,
4) include:
The first system rank (rank 1) corresponds to data processing equipment (112), non-transient memorizer equipment (114) or network and connects
The host machine (110) of mouth controller (116), each host machine (110) have system domain (402)；
Second system rank (rank 2) corresponds to the power delivery device for accommodating the rack (430) of the host machine (110)
(434), delivery device (436) or cooling delivery device (432) are communicated, each power delivery device (434) of the rack (430) is led to
Believe that delivery device (436) or cooling delivery device (432) have system domain (402)；And
Third system level (rank 3) corresponds to the power delivery device of the unit (420) with associated rack (430)
(424), delivery device (426) or cooling delivery device (422) are communicated, each power delivery device (424) of the unit (420) is led to
Believe that delivery device (426) or cooling delivery device (422) have system domain (402)；And
4th system level (rank 4) corresponds to Distribution Center's module (410,410a, 410b) of the unit (420), each
Distribution Center's module (410,410a, 410b) has system domain (402).
13. according to the method for claim 12 (700), further comprising determining for each band (320) for each
The active redundancy value (ER) of system level (rank 1,2,3,4).
14. according to the method for claim 12 (700), wherein determining for the duplication item with copy block (330,330n)
The active redundancy value (ER) of band (330,330n) includes identifying to have at least one in correspondence system rank (rank 1,2,3,4)
The number in the Unique System domain (402) of a available copies block (330,330n).
15. according to the method for claim 12 (700), having wherein determining in the second system rank (rank 2)
The active redundancy value (ER) for having the encoding strip thereof (320) of data block (330nD) and code block (330nC) includes described in mark
It being capable of number when maintaining data accessibility in inactive Unique System domain (402) in second system rank (rank 2)
Mesh.
16. according to the method for claim 12 (700), wherein determining in the third or the 4th system level (grade
Other 3 or rank 4) encoding strip thereof (320) with data block (330nD) and code block (330nC) the active redundancy value
It (ER) include identifying in the third or fourth level (rank 3 or rank 4) to be in not when maintaining data accessibility
Activity and the system domain (402) with compared with remaining system domain (402) the maximum number of piece (330).
17. according to the method for claim 16 (700), wherein when more than one system domain (402) have the maximum number
When purpose block (330), one of described system domain (402) is randomly choosed.
18. according to the method for claim 11 (700), wherein determining for data block (330nD), code check block
(330nCC) includes: with the active redundancy value (ER) of the nested code strip (320) of word inspection block (330nWCC)
Determine one of column active redundancy or band active redundancy；
Wherein determine show effect redundancy include can be reconstructed from other blocks (330) in the column (C) in identity column (C) it is unique
The number of block (330)；And
Wherein determining that band active redundancy includes can be from other block (330) in the band (320) in identification strip band (320)
The number of unique block (330) of reconstruct.
19. according to the method for claim 11 (700), further comprising:
Determine that the band (320) includes high availability block (330a) or low availability block (330b)；And
When block (330) when the band (320) becomes inaccessible:
Carry out substantially reconstruct immediately with having less than threshold value active redundancy value (ERT) using the data processing equipment (202)
Imitate inaccessible, the high availability block (330a) of redundancy value (ER)；And
After threshold time period, reconstructed using the data processing equipment (202):
Inaccessible, low availability block (330b)；And
Inaccessible, high availability block with the active redundancy value (ER) for being greater than or equal to the threshold value active redundancy (ERT)
(330a)。
20. further comprising according to the method for claim 19 (700), that the reconstruction delay of low availability block (330b) exists
Period between 15 minutes and 30 minutes.
21. system of the one kind for prioritization data to restore in distributed memory system (100), the system comprises:
Memory host (110), each memory host (110) have non-transient memorizer (114)；
Computer processor (202) is communicated with the memory host (110), and the computer processor (202), which executes, to be referred to
Order is used for:
The slitting across memory host (110) file (310) is managed, each file (310) includes the item with block (330)
Band (320)；
For each band (320) for the file (310) for including multiple bands (320) with block (330), data processing is used
Equipment (202) determines that the band (320) includes high availability block (330a) or low availability block (330b)；
Determine the active redundancy value (ER) of each band (320) for the file (310), active redundancy value (ER) base
In described piece (330) and with the associated arbitrary system domain (402) of corresponding band (320), the distributed memory system
(100) there is the systemic hierarchial (400) including system domain (402), each system domain (402) has active state or inactive shape
State, wherein the block (330) of band (320) associated with system domain (402) of the active state are in is addressable, and
And be inaccessible by with the block (330) in system domain (402) of the inactive state associated band (320)；With
And
When block (330) when band (320) becomes inaccessible:
Substantially immediately inaccessible, Gao Ke of the reconstruct with the active redundancy value (ER) less than threshold value active redundancy value (ERT)
With property block (330a)；And
After threshold time period, reconstruct:
Inaccessible, low availability block (330b)；And
Inaccessible, high availability block with the active redundancy value (ER) for being greater than or equal to the threshold value active redundancy (ERT)
(330a)。
22. system according to claim 21, wherein when system domain (402) is in the inactive state, the meter
Calculation machine processor (202) updates each band (320) for being directed to the file (310) associated with the system domain (402)
The active redundancy value (ER).
23. system according to claim 21, wherein the threshold time period is included between 15 minutes and 30 minutes.
24. system according to claim 21, wherein the systemic hierarchial (400) includes system level (1,2,3,4) packet
It includes:
The first system rank (rank 1) corresponds to data processing equipment (112), non-transient memorizer equipment (114) or network and connects
The host machine (110) of mouth controller (116), each host machine (110) have system domain (402)；
Second system rank (rank 2) corresponds to the power delivery device for accommodating the rack (430) of the host machine (110)
(434), delivery device (436) or cooling delivery device (432) are communicated, each power delivery device (434) of the rack (430) is led to
Believe that delivery device (436) or cooling delivery device (432) have system domain (402)；And
Third system level (rank 3) corresponds to the power delivery device of the unit (420) with associated rack (430)
(424), delivery device (426) or cooling delivery device (422) are communicated, each power delivery device (424) of the unit (420) is led to
Believe that delivery device (426) or cooling delivery device (422) have system domain (402)；And
4th system level (rank 4) corresponds to Distribution Center's module (410,410a, 410b) of the unit (420), each
Distribution Center's module (410,410a, 410b) has system domain (402).
25. system according to claim 24, wherein the computer processor (202) is true for each band (320)
Surely it is directed to the active redundancy value (ER) of each system level (rank 1,2,3,4).
26. system according to claim 24, wherein the computer processor (202) is by mark in correspondence system grade
The not number in the Unique System domain (402) of (rank 1,2,3,4) at least one available copies block (330,330n), to determine
For the active redundancy value (ER) of the duplication band (330n) with copy block (330,330n).
27. system according to claim 24, wherein the computer processor (202) is by identifying the second system
In rank (rank 2) can number when maintaining data accessibility in inactive Unique System domain (402), to determine
For the encoding strip thereof (320) in the second system rank (rank 2) with data block (330nD) and code block (330nC)
The active redundancy value (ER).
28. system according to claim 24, wherein the computer processor (202) is by identifying the third or the
In four ranks (rank 3 or rank 4) can when maintaining data accessibility in it is inactive and with and remaining system domain
(402) system domain (402) for comparing the maximum number of piece (330), is directed to determine in the third or the 4th system level (grade
Other 3 or rank 4) encoding strip thereof (320) with data block (330nD) and code block (330nC) the active redundancy value
(ER)。
29. system according to claim 28, wherein when more than one system domain (402) have described the maximum number of piece
(330) when, the computer processor (202) randomly chooses one of described system domain (402).
30. system according to claim 21, wherein the computer processor (202) passes through the following terms, to determine
For the nested code strip for checking block (330nWCC) with data block (330nD), code check block (330nCC) and word
(320) the active redundancy value (ER):
Determine one of column active redundancy or band active redundancy；
Wherein determine show effect redundancy include can be reconstructed from other blocks (330) in the column (C) in identity column (C) it is unique
The number of block (330)；And
Wherein determining that band active redundancy includes can be from other block (330) in the band (320) in identification strip band (320)
The number of unique block (330) of reconstruct.
Applications Claiming Priority (3)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US14/169,274 US9292389B2 (en) | 2014-01-31 | 2014-01-31 | Prioritizing data reconstruction in distributed storage systems |
US14/169,274 | 2014-01-31 | ||
PCT/US2015/012572 WO2015116483A1 (en) | 2014-01-31 | 2015-01-23 | Prioritizing data reconstruction in distributed storage systems |
Publications (2)
Publication Number | Publication Date |
---|---|
CN105960639A CN105960639A (en) | 2016-09-21 |
CN105960639B true CN105960639B (en) | 2019-05-28 |
Family
ID=53754913
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
CN201580006691.9A Active CN105960639B (en) | 2014-01-31 | 2015-01-23 | Prioritization data reconstruct in distributed memory system |
Country Status (8)
Country | Link |
---|---|
US (3) | US9292389B2 (en) |
EP (2) | EP3100184B1 (en) |
KR (1) | KR101677418B1 (en) |
CN (1) | CN105960639B (en) |
AU (2) | AU2015211305B2 (en) |
DE (1) | DE202015009267U1 (en) |
GB (1) | GB2538654B (en) |
WO (1) | WO2015116483A1 (en) |
Families Citing this family (36)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
JP6273970B2 (en) * | 2014-03-28 | 2018-02-07 | 富士通株式会社 | Storage control device, storage control program, and storage control method |
US10298555B2 (en) * | 2014-04-04 | 2019-05-21 | Zettaset, Inc. | Securing files under the semi-trusted user threat model using per-file key encryption |
US20150331752A1 (en) * | 2014-05-16 | 2015-11-19 | Syed Ali Haider | Method of data storage on cloud data center for reducing processing and storage requirements by engaging user equipment |
US9734007B2 (en) | 2014-07-09 | 2017-08-15 | Qualcomm Incorporated | Systems and methods for reliably storing data using liquid distributed storage |
US9582355B2 (en) * | 2014-07-09 | 2017-02-28 | Qualcomm Incorporated | Systems and methods for reliably storing data using liquid distributed storage |
US9594632B2 (en) | 2014-07-09 | 2017-03-14 | Qualcomm Incorporated | Systems and methods for reliably storing data using liquid distributed storage |
US9823969B2 (en) | 2014-09-02 | 2017-11-21 | Netapp, Inc. | Hierarchical wide spreading of distributed storage |
US9767104B2 (en) | 2014-09-02 | 2017-09-19 | Netapp, Inc. | File system for efficient object fragment access |
US20160062832A1 (en) | 2014-09-02 | 2016-03-03 | Netapp. Inc. | Wide spreading data storage architecture |
US9817715B2 (en) | 2015-04-24 | 2017-11-14 | Netapp, Inc. | Resiliency fragment tiering |
US9431061B1 (en) | 2015-04-24 | 2016-08-30 | Netapp, Inc. | Data write deferral during hostile events |
US9965369B2 (en) | 2015-04-28 | 2018-05-08 | Viasat, Inc. | Self-organized storage nodes for distributed delivery network |
US10360119B2 (en) * | 2015-10-06 | 2019-07-23 | Netapp, Inc. | Data recovery in a distributed storage system |
US9755979B2 (en) | 2015-11-19 | 2017-09-05 | Viasat, Inc. | Enhancing capacity of a direct communication link |
US10379742B2 (en) | 2015-12-28 | 2019-08-13 | Netapp, Inc. | Storage zone set membership |
WO2017113276A1 (en) * | 2015-12-31 | 2017-07-06 | 华为技术有限公司 | Data reconstruction method, apparatus and system in distributed storage system |
US10514984B2 (en) | 2016-02-26 | 2019-12-24 | Netapp, Inc. | Risk based rebuild of data objects in an erasure coded storage system |
US10055317B2 (en) | 2016-03-22 | 2018-08-21 | Netapp, Inc. | Deferred, bulk maintenance in a distributed storage system |
US10157021B2 (en) * | 2016-06-29 | 2018-12-18 | International Business Machines Corporation | Processing incomplete data access transactions |
US10409682B1 (en) * | 2017-02-24 | 2019-09-10 | Seagate Technology Llc | Distributed RAID system |
JP6798007B2 (en) * | 2017-03-28 | 2020-12-09 | 株式会社日立製作所 | Storage system, computer readable recording medium, system control method |
US10474528B2 (en) * | 2017-10-02 | 2019-11-12 | Western Digital Technologies, Inc. | Redundancy coding stripe based on coordinated internal address scheme across multiple devices |
US11385980B2 (en) | 2017-11-13 | 2022-07-12 | Weka.IO Ltd. | Methods and systems for rapid failure recovery for a distributed storage system |
US11561860B2 (en) | 2017-11-13 | 2023-01-24 | Weka.IO Ltd. | Methods and systems for power failure resistance for a distributed storage system |
US10691543B2 (en) * | 2017-11-14 | 2020-06-23 | International Business Machines Corporation | Machine learning to enhance redundant array of independent disks rebuilds |
CN108304214B (en) * | 2017-12-13 | 2022-05-13 | 超聚变数字技术有限公司 | Method and device for verifying integrity of immediate data |
CN108170555B (en) * | 2017-12-21 | 2021-07-20 | 浙江大华技术股份有限公司 | Data recovery method and equipment |
CN110515761B (en) * | 2018-05-22 | 2022-06-03 | 杭州海康威视数字技术股份有限公司 | Data acquisition method and device |
CN108762983B (en) * | 2018-05-23 | 2020-09-01 | Oppo广东移动通信有限公司 | Multimedia data recovery method and device |
US10719397B2 (en) | 2018-06-08 | 2020-07-21 | Samsung Electronics Co., Ltd. | System, device and method for storage device assisted low-bandwidth data repair |
US10929311B2 (en) | 2019-06-26 | 2021-02-23 | EMC IP Holding Company LLC | Stream level uninterrupted backup operation using data probe |
US11068359B2 (en) * | 2019-06-26 | 2021-07-20 | EMC IP Holding Company LLC | Stream level uninterrupted restore operation using data probe |
CN110442535B (en) * | 2019-07-19 | 2021-06-11 | 华中科技大学 | Method and system for improving reliability of distributed solid-state disk key value cache system |
JP2021099624A (en) * | 2019-12-20 | 2021-07-01 | 株式会社日立製作所 | Storage system and rebuild processing method for storage system |
KR20220060155A (en) | 2020-11-04 | 2022-05-11 | 삼성전자주식회사 | A storage server, a method of operating the same storage server and a data center including the same storage server |
US20230237020A1 (en) * | 2022-01-24 | 2023-07-27 | Cohesity, Inc. | Container-based erasure coding |
Citations (5)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US6516425B1 (en) * | 1999-10-29 | 2003-02-04 | Hewlett-Packard Co. | Raid rebuild using most vulnerable data redundancy scheme first |
JP2008242524A (en) * | 2007-03-23 | 2008-10-09 | Nec Software Chubu Ltd | File management device, file management method, program and computer-readable recording medium |
CN101334797A (en) * | 2008-08-04 | 2008-12-31 | 中兴通讯股份有限公司 | Distributed file systems and its data block consistency managing method |
US7739233B1 (en) * | 2003-02-14 | 2010-06-15 | Google Inc. | Systems and methods for replicating data |
CN102193746A (en) * | 2010-03-11 | 2011-09-21 | Lsi公司 | System and method for optimizing redundancy restoration in distributed data layout environments |
Family Cites Families (15)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US7065618B1 (en) * | 2003-02-14 | 2006-06-20 | Google Inc. | Leasing scheme for data-modifying operations |
US7107419B1 (en) * | 2003-02-14 | 2006-09-12 | Google Inc. | Systems and methods for performing record append operations |
US7222119B1 (en) * | 2003-02-14 | 2007-05-22 | Google Inc. | Namespace locking scheme |
US7237141B2 (en) * | 2003-06-19 | 2007-06-26 | Lsi Corporation | Method for recovering data from a redundant storage object |
US8064351B2 (en) | 2005-10-20 | 2011-11-22 | Schrader Electronics, Ltd. | Method for detecting and correcting data errors in an RF data link |
US7653668B1 (en) * | 2005-11-23 | 2010-01-26 | Symantec Operating Corporation | Fault tolerant multi-stage data replication with relaxed coherency guarantees |
US7885928B2 (en) * | 2007-03-08 | 2011-02-08 | Xerox Corporation | Decentralized adaptive management of distributed resource replicas in a peer-to-peer network based on QoS |
US8225006B1 (en) * | 2007-08-30 | 2012-07-17 | Virident Systems, Inc. | Methods for data redundancy across three or more storage devices |
US8225061B2 (en) * | 2009-07-02 | 2012-07-17 | Apple Inc. | Method and apparatus for protected content data processing |
US8285952B2 (en) | 2009-09-17 | 2012-10-09 | Hitachi, Ltd. | Method and apparatus to utilize large capacity disk drives |
US8589535B2 (en) * | 2009-10-26 | 2013-11-19 | Microsoft Corporation | Maintaining service performance during a cloud upgrade |
US8484536B1 (en) * | 2010-03-26 | 2013-07-09 | Google Inc. | Techniques for data storage, access, and maintenance |
US10394757B2 (en) | 2010-11-18 | 2019-08-27 | Microsoft Technology Licensing, Llc | Scalable chunk store for data deduplication |
WO2012147087A1 (en) | 2011-04-29 | 2012-11-01 | Tata Consultancy Services Limited | Archival storage and retrieval system |
US9122535B2 (en) | 2011-11-22 | 2015-09-01 | Netapp, Inc. | Optimizing distributed data analytics for shared storage |
-
2014
- 2014-01-31 US US14/169,274 patent/US9292389B2/en active Active
-
2015
- 2015-01-23 GB GB1614047.7A patent/GB2538654B/en active Active
- 2015-01-23 CN CN201580006691.9A patent/CN105960639B/en active Active
- 2015-01-23 WO PCT/US2015/012572 patent/WO2015116483A1/en active Application Filing
- 2015-01-23 KR KR1020167023620A patent/KR101677418B1/en active IP Right Grant
- 2015-01-23 DE DE202015009267.5U patent/DE202015009267U1/en active Active
- 2015-01-23 AU AU2015211305A patent/AU2015211305B2/en active Active
- 2015-01-23 EP EP15743136.2A patent/EP3100184B1/en active Active
- 2015-01-23 EP EP21187240.3A patent/EP3916559A1/en active Pending
-
2016
- 2016-02-26 US US15/054,780 patent/US9535790B2/en active Active
- 2016-11-22 US US15/358,637 patent/US9823980B2/en active Active
-
2017
- 2017-03-21 AU AU2017201918A patent/AU2017201918B2/en active Active
Patent Citations (5)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US6516425B1 (en) * | 1999-10-29 | 2003-02-04 | Hewlett-Packard Co. | Raid rebuild using most vulnerable data redundancy scheme first |
US7739233B1 (en) * | 2003-02-14 | 2010-06-15 | Google Inc. | Systems and methods for replicating data |
JP2008242524A (en) * | 2007-03-23 | 2008-10-09 | Nec Software Chubu Ltd | File management device, file management method, program and computer-readable recording medium |
CN101334797A (en) * | 2008-08-04 | 2008-12-31 | 中兴通讯股份有限公司 | Distributed file systems and its data block consistency managing method |
CN102193746A (en) * | 2010-03-11 | 2011-09-21 | Lsi公司 | System and method for optimizing redundancy restoration in distributed data layout environments |
Also Published As
Publication number | Publication date |
---|---|
US9823980B2 (en) | 2017-11-21 |
US9292389B2 (en) | 2016-03-22 |
WO2015116483A1 (en) | 2015-08-06 |
AU2015211305A1 (en) | 2016-06-09 |
CN105960639A (en) | 2016-09-21 |
EP3916559A1 (en) | 2021-12-01 |
EP3100184A4 (en) | 2017-11-29 |
KR101677418B1 (en) | 2016-11-17 |
AU2017201918B2 (en) | 2018-06-28 |
US20160179621A1 (en) | 2016-06-23 |
KR20160106187A (en) | 2016-09-09 |
DE202015009267U1 (en) | 2017-01-27 |
GB201614047D0 (en) | 2016-09-28 |
AU2015211305B2 (en) | 2016-12-22 |
GB2538654A (en) | 2016-11-23 |
US9535790B2 (en) | 2017-01-03 |
US20150220398A1 (en) | 2015-08-06 |
EP3100184A1 (en) | 2016-12-07 |
US20170075741A1 (en) | 2017-03-16 |
GB2538654B (en) | 2017-06-14 |
EP3100184B1 (en) | 2021-09-01 |
AU2017201918A1 (en) | 2017-04-13 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
CN105960639B (en) | Prioritization data reconstruct in distributed memory system | |
CN106164899B (en) | It is read from the efficient data of distributed memory system | |
US11947423B2 (en) | Data reconstruction in distributed storage systems | |
CN105765554B (en) | Distribute data on distributed memory system | |
CN104111804B (en) | A kind of distributed file system | |
US9325802B2 (en) | Hierarchical scale unit values for storing instances of data among nodes of a distributed store | |
CN100452046C (en) | Storage method and system for mass file | |
CN103597482A (en) | Storing data on storage nodes | |
CN104750624A (en) | Data Coherency Model and Protocol at Cluster Level | |
JPWO2011027775A1 (en) | Distributed storage system, distributed storage method, distributed storage program and storage node | |
US9311194B1 (en) | Efficient resource utilization in data centers | |
Li et al. | A convergence of key‐value storage systems from clouds to supercomputers | |
CN105849715B (en) | Efficient resource in data center utilizes | |
CN105468296A (en) | No-sharing storage management method based on virtualization platform | |
CN103150225B (en) | Disk full abnormity fault tolerance method of object parallel storage system based on application level agent | |
CN104715044B (en) | A kind of distributed system and its data manipulation method | |
US9898360B1 (en) | Preventing unnecessary data recovery | |
US9460126B1 (en) | Rotational maintenance of database partitions | |
US9436407B1 (en) | Cursor remirroring | |
US11256669B1 (en) | Transaction pipeline materialization schemas |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
C06 | Publication | ||
PB01 | Publication | ||
C10 | Entry into substantive examination | ||
SE01 | Entry into force of request for substantive examination | ||
CB02 | Change of applicant information | ||
CB02 | Change of applicant information |
Address after: American CaliforniaApplicant after: Google limited liability companyAddress before: American CaliforniaApplicant before: Google Inc. |
|
GR01 | Patent grant | ||
GR01 | Patent grant |