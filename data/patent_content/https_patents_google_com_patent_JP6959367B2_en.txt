JP6959367B2 - Dual deblocking filter threshold - Google Patents
Dual deblocking filter threshold Download PDFInfo
- Publication number
- JP6959367B2 JP6959367B2 JP2019568737A JP2019568737A JP6959367B2 JP 6959367 B2 JP6959367 B2 JP 6959367B2 JP 2019568737 A JP2019568737 A JP 2019568737A JP 2019568737 A JP2019568737 A JP 2019568737A JP 6959367 B2 JP6959367 B2 JP 6959367B2
- Authority
- JP
- Japan
- Prior art keywords
- deblocking
- current
- threshold index
- block
- deblocking threshold
- Prior art date
- Legal status (The legal status is an assumption and is not a legal conclusion. Google has not performed a legal analysis and makes no representation as to the accuracy of the status listed.)
- Active
Links
Images
Classifications
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/85—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using pre-processing or post-processing specially adapted for video compression
- H04N19/86—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using pre-processing or post-processing specially adapted for video compression involving reduction of coding artifacts, e.g. of blockiness
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/102—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or selection affected or controlled by the adaptive coding
- H04N19/117—Filters, e.g. for pre-processing or post-processing
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/134—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or criterion affecting or controlling the adaptive coding
- H04N19/136—Incoming video signal characteristics or properties
- H04N19/14—Coding unit complexity, e.g. amount of activity or edge presence estimation
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/169—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding
- H04N19/17—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding the unit being an image region, e.g. an object
- H04N19/176—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding the unit being an image region, e.g. an object the region being a block, e.g. a macroblock
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/42—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals characterised by implementation details or hardware specially adapted for video compression or decompression, e.g. dedicated software implementation
- H04N19/436—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals characterised by implementation details or hardware specially adapted for video compression or decompression, e.g. dedicated software implementation using parallelised computational arrangements
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/80—Details of filtering operations specially adapted for video compression, e.g. for pixel interpolation
- H04N19/82—Details of filtering operations specially adapted for video compression, e.g. for pixel interpolation involving filtering within a prediction loop
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/102—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or selection affected or controlled by the adaptive coding
- H04N19/12—Selection from among a plurality of transforms or standards, e.g. selection between discrete cosine transform [DCT] and sub-band transform or selection between H.263 and H.264
- H04N19/122—Selection of transform size, e.g. 8x8 or 2x4x8 DCT; Selection of sub-band transforms of varying structure or type
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/134—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or criterion affecting or controlling the adaptive coding
- H04N19/157—Assigned coding mode, i.e. the coding mode being predefined or preselected to be further used for selection of another element or parameter
Description
この出願は、送信または保存のためのビデオストリームデータの符号化と復号化に関する。本明細書では、デュアルデブロッキング（dual deblocking）フィルタ閾値を使用した符号化および復号化のためのシステム、方法、および装置の態様が開示される。 This application relates to encoding and decoding video stream data for transmission or storage. This specification discloses aspects of a system, method, and apparatus for encoding and decoding using dual deblocking filter thresholds.
デジタルビデオは、例えば、ビデオ会議を介したリモートビジネス会議、高解像度ビデオエンターテイメント、ビデオ広告、またはユーザにより生成されたビデオの共有などに使用され得る。ビデオデータには大量のデータが含まれるため、高性能の圧縮が送信および保存に有利となり得る。したがって、デュアルデブロッキングフィルタ閾値を使用するビデオコーディングなど、帯域幅が制限されている通信チャネルを介して送信される高解像度ビデオを提供することが有利となり得る。 Digital video can be used, for example, for remote business meetings via video conferences, high resolution video entertainment, video advertising, or sharing of user-generated video. Since video data contains large amounts of data, high performance compression can be advantageous for transmission and storage. Therefore, it may be advantageous to provide high resolution video transmitted over a bandwidth limited communication channel, such as video coding using dual deblocking filter thresholds.
一態様は、デュアルデブロッキングフィルタ閾値を使用したビデオ復号化のための方法である。デュアルデブロッキングフィルタ閾値を使用したビデオ復号化は、符号化ビットストリームを復号化することによって再構成フレームを生成すること、および前記再構成フレームを出力することを含み得る。復号化することは、前記符号化ビットストリームの一部を復号化することにより復号化ブロックを生成すること、前記符号化ビットストリームから第１のデブロッキング閾値インデックスを特定すること、前記符号化ビットストリームから第２のデブロッキング閾値インデックスを特定すること、前記復号化ブロックに基づいて再構成ブロックを生成すること、および前記再構成ブロックを前記再構成フレーム内に含めることを含み得る。前記再構成ブロックを生成することは、前記第１のデブロッキング閾値インデックスおよび前記第２のデブロッキング閾値インデックスに基づいてデブロッキングすることを含み得る。 One aspect is a method for video decoding using a dual deblocking filter threshold. Video decoding using the dual deblocking filter threshold may include generating a reconstructed frame by decoding the encoded bitstream and outputting the reconstructed frame. Decoding means generating a decoding block by decoding a part of the coded bitstream, specifying a first deblocking threshold index from the coded bitstream, and decoding the coded bits. It may include identifying a second deblocking threshold index from the stream, generating a reconstruction block based on the decoding block, and including the reconstruction block within the reconstruction frame. Generating the reconstructed block may include deblocking based on the first deblocking threshold index and the second deblocking threshold index.
別の態様は、デュアルデブロッキングフィルタ閾値を使用したビデオ符号化のための方法である。デュアルデブロッキングフィルタ閾値を使用したビデオ符号化は、入力フレームを符号化することによって符号化フレームを生成すること、および出力ビットストリームを出力することを含み得る。符号化することは、前記符号化フレームを復号化することによって復号化フレームを生成すること、前記復号化フレームを再構成することによって再構成フレームを生成すること、および前記符号化フレームと前記第１のデブロッキング閾値インデックスの表示と前記第２のデブロッキング閾値インデックスの表示とを含む出力ビットストリームを生成することを含み得る。前記復号化フレームを再構成することは、前記復号化フレームをデブロッキングするために複数のデブロッキング閾値インデックスから共有デブロッキング（joint deblocking）閾値インデックスを特定すること、前記複数のデブロッキング閾値インデックスから第１のデブロッキング閾値インデックスを特定することであって、当該第１のデブロッキング閾値インデックスを特定することが前記復号化フレームをデブロッキングするために前記共有デブロッキング閾値インデックスを第２のデブロッキング閾値インデックスとして使用することを含むこと、および前記複数のデブロッキング閾値インデックスから前記第２のデブロッキング閾値インデックスを特定することであって、当該第２のデブロッキング閾値インデックスを特定することが前記復号化フレームをデブロッキングするために前記第１のデブロッキング閾値インデックスを使用することを含むこと、を含み得る。 Another aspect is a method for video coding using dual deblocking filter thresholds. Video coding using the dual deblocking filter threshold can include generating coded frames by encoding input frames and outputting an output bitstream. Coding means generating a decoding frame by decoding the coded frame, generating a reconstructed frame by reconstructing the decoded frame, and the coded frame and the first. It may include generating an output bitstream that includes the display of one deblocking threshold index and the display of the second deblocking threshold index. Reconstructing the decrypted frame is to identify a joint deblocking threshold index from a plurality of deblocking threshold indexes in order to deblock the decrypted frame, from the plurality of deblocking threshold indexes. Identifying the first deblocking threshold index, and identifying the first deblocking threshold index is to deblock the shared deblocking threshold index with a second deblocking in order to deblock the decrypted frame. Decoding includes using as a threshold index and specifying the second deblocking threshold index from the plurality of deblocking threshold indexes, and specifying the second deblocking threshold index. It may include using the first deblocking threshold index to deblock the conversion frame.
別の態様は、デュアルデブロッキングフィルタ閾値を使用したビデオ符号化のための方法である。デュアルデブロッキングフィルタ閾値を使用したビデオ符号化は、符号化ビットストリームの一部を復号化した復号化ブロックを含む復号化フレームを生成することによって再構成フレームを生成すること、前記符号化ビットストリームから第１のデブロッキング閾値インデックスを特定すること、前記符号化ビットストリームから前記第１のデブロッキング閾値インデックスとは異なる第２のデブロッキング閾値インデックスを特定すること、前記第１のデブロッキング閾値インデックスに基づいて第１の方向に前記復号化フレームをデブロッキングすることによって部分デブロッキングフレームを生成すること、および前記第２のデブロッキング閾値インデックスに基づいて第２の方向に前記部分デブロッキングフレームをデブロッキングすることによって前記再構成フレームを生成すること、を含み得る。この方法は、前記再構成フレームを出力することを含み得る。 Another aspect is a method for video coding using dual deblocking filter thresholds. Video coding using the dual deblocking filter threshold creates a reconstructed frame by generating a decoding frame containing a decoding block in which a portion of the coded bitstream is decoded, said the coded bitstream. To identify the first deblocking threshold index from, to identify a second deblocking threshold index different from the first deblocking threshold index from the coded bitstream, to identify the first deblocking threshold index. To generate a partial deblocking frame by deblocking the decrypted frame in a first direction based on, and to generate the partial deblocking frame in a second direction based on the second deblocking threshold index. It may include generating the reconstructed frame by deblocking. This method may include outputting the reconstructed frame.
これらおよび他の変形例の態様については、以下でさらに詳細に説明する。 Aspects of these and other variants will be described in more detail below.
本明細書の記載では添付の図面を参照するが、いくつかの図面に亘る同様の参照番号は特に言及しない限り同様の構成を示す。
ビデオ圧縮スキームは、各画像またはフレームをブロックなどのより小さな部分に分割し、出力内の各ブロックに含まれる情報を制限するための技術を使用して出力ビットストリームを生成することを含み得る。いくつかの実装形態では、出力内の各ブロックに含まれる情報は、空間的冗長性を減らしたり、時間的冗長性を減らしたり、またはそれらの組み合わせを用いたりすることによって制限され得る。例えば、時間的冗長性または空間的冗長性は、エンコーダとデコーダの双方に利用可能な情報に基づいてフレームを予測し、予測したフレームと元のフレームとの差または残差を表す情報を含めることで削減され得る。残差情報は、その残差情報を変換係数に変換し、その変換係数を量子化し、その量子化した変換係数をエントロピーコーディングすることによってさらに圧縮され得る。 A video compression scheme may include splitting each image or frame into smaller pieces, such as blocks, and generating an output bitstream using techniques for limiting the information contained in each block in the output. In some implementations, the information contained in each block in the output can be limited by reducing spatial redundancy, reducing temporal redundancy, or using a combination thereof. For example, temporal or spatial redundancy predicts a frame based on the information available to both the encoder and decoder and includes information that represents the difference or residual between the predicted frame and the original frame. Can be reduced by. The residual information can be further compressed by converting the residual information into conversion coefficients, quantizing the conversion coefficients, and entropy coding the quantized conversion coefficients.
符号化ビットストリームは、その制限された情報からブロックおよびソース画像を再生成するように復号化することができる。復号化フレームは、量子化によって生じるブロック境界に跨がるブロックノイズアーチファクトなどのアーチファクトを含み得る。このアーチファクトを減らすために、垂直ブロック境界や水平ブロック境界などのブロック境界に沿ってデブロッキングフィルタを使用するなどして、復号化フレームがフィルタリングされ得る。ブロック境界に一致した入力画像からオブジェクトエッジなどのエッジコンテンツを保持するために、フィルタリングは、各ブロック境界をフィルタリングするかどうかを決定し、対応するフィルタリングパラメータを特定するための閾値を特定し得る。１つの閾値セットを使用して垂直ブロック境界と水平ブロック境界の双方をフィルタリングすると、フィルタリングの精度が制限され、符号化品質が低下する場合がある。 The coded bitstream can be decoded to regenerate the block and source images from the restricted information. The decoding frame can contain artifacts such as block noise artifacts that straddle the block boundaries caused by quantization. Decrypted frames can be filtered to reduce this artifact, such as by using a deblocking filter along block boundaries such as vertical block boundaries and horizontal block boundaries. In order to retain edge content such as object edges from the input image that matches the block boundaries, filtering can determine whether to filter each block boundary and specify a threshold for identifying the corresponding filtering parameters. Filtering both vertical and horizontal block boundaries using a single threshold set limits the accuracy of filtering and can reduce coding quality.
デュアルデブロッキングフィルタ閾値を使用したビデオコーディングは、垂直ブロック境界などに沿って第１の方向にフィルタリングするための第１のフィルタ閾値の最適セットを特定するとともに、水平ブロック境界などに沿って第２の方向にフィルタリングするための第２のフィルタ閾値の最適セットを特定することにより、精度および符号化品質を向上させ得る。エンコーダは、垂直ブロック境界をフィルタリングするために特定されたフィルタ閾値のセットに対応するデブロッキング閾値インデックスと、水平ブロックをフィルタリングするために特定されたフィルタ閾値のセットに対応する別のデブロッキング閾値インデックスとを特定し得る。エンコーダは、符号化ビットストリーム内にデブロッキング閾値インデックスを示す情報を含め得る。デコーダは、符号化ビットストリームからデブロッキング閾値インデックスを示す情報を抽出し、対応するフィルタ閾値を特定して、第１の方向における第１のフィルタ閾値のセットと第２の方向における第２のフィルタ閾値のセットとを使用して復号化フレームをデブロッキングし得る。 Video coding using dual deblocking filter thresholds identifies the optimal set of first filter thresholds for filtering in the first direction along vertical block boundaries and the like, as well as a second along horizontal block boundaries and the like. By identifying the optimal set of second filter thresholds for filtering in the direction of, accuracy and coding quality can be improved. The encoder has a deblocking threshold index that corresponds to a set of filter thresholds identified to filter vertical block boundaries and another deblocking threshold index that corresponds to a set of filter thresholds identified to filter horizontal blocks. Can be identified. The encoder may include information indicating the deblocking threshold index in the coded bitstream. The decoder extracts information indicating the deblocking threshold index from the encoded bitstream, identifies the corresponding filter threshold, and sets the first filter threshold in the first direction and the second filter in the second direction. Decoding frames can be deblocked using a set of thresholds.
図１は、本開示の実装形態によるコンピューティングデバイス１００の図である。図示されたコンピューティングデバイス１００は、メモリ１１０、プロセッサ１２０、ユーザインターフェース（ＵＩ）１３０、電子通信ユニット１４０、センサ１５０、電源１６０、およびバス１７０を含む。本明細書で使用される「コンピューティングデバイス」という用語は、本明細書に開示される任意の方法またはその方法の任意の一部を実行可能な任意のユニットまたはユニットの組み合わせを含む。
FIG. 1 is a diagram of a
コンピューティングデバイス１００は、パーソナルコンピュータ（ＰＣ）、サーバ、ワークステーション、ミニコンピュータ、またはメインフレームコンピュータなどの固定コンピューティングデバイス、あるいは、携帯電話、携帯情報端末（ＰＤＡ）、ラップトップ、またはタブレットＰＣなどのモバイルコンピューティングデバイスとすることができる。なお、単一のユニットとして図示されているが、コンピューティングデバイス１００の１つまたは複数の要素を任意の数の個別の物理ユニットに統合することもできる。例えば、ＵＩ１３０およびプロセッサ１２０を第１の物理ユニットに統合し、メモリ１１０を第２の物理ユニットに統合することができる。
The
メモリ１１０は、例えば、データ１１２、命令１１４、オペレーティングシステム１１６、またはそれらに関連する任意の情報をコンピューティングデバイス１００の他のコンポーネントによる使用もしくはそのコンポーネントとの通信のために含む、記憶する、通信する、または転送することができる任意の有形デバイスなどの任意の非一時的なコンピュータ利用またはコンピュータ可読媒体を含むことができる。非一時的なコンピュータ利用またはコンピュータ可読媒体は、例えば、ソリッドステートドライブ、メモリカード、リムーバブルメディア、読み取り専用メモリ（ＲＯＭ）、ランダムアクセスメモリ（ＲＡＭ）、ハードディスクやフロッピー（登録商標）ディスクや光ディスクなどの任意のタイプのディスク、磁気もしくは光学カード、特定用途向け集積回路（ＡＳＩＣ）、電子情報の記憶に適した任意のタイプの非一時的なメディア、またはそれらの任意の組み合わせとすることができる。
The
なお、単一のユニットとして図示されているが、メモリ１１０は、ランダムアクセスメモリユニットなどの１つまたは複数の一次メモリユニット、ディスクなどの１つまたは複数の二次データ記憶ユニット、またはそれらの組み合わせなどによる複数の物理ユニットを含み得る。例えば、データ１１２（またはその一部）、命令１１４（またはその一部）、またはその両方は、二次記憶ユニットに記憶されてもよく、対応するデータ１１２を処理したり、対応する命令１１４を実行したり、またはその両方の実行に伴って、一次記憶ユニットにロードもしくは転送されてもよい。いくつかの実装形態では、メモリ１１０またはその一部は取り外し可能なメモリであってもよい。
Although illustrated as a single unit, the
データ１１２は、入力オーディオデータ、符号化オーディオデータ、復号化オーディオデータなどの情報を含むことができる。命令１１４は、本明細書に開示される任意の方法またはその方法の任意の一部を実行するためのコードなどの命令を含むことができる。命令１１４は、ハードウェア、ソフトウェア、またはそれらの任意の組み合わせで実現することができる。例えば、命令１１４は、本明細書に記載される方法、アルゴリズム、態様、またはそれらの組み合わせのいずれかを実現するためにプロセッサ１２０によって実行され得るコンピュータプログラムなどの、メモリ１１０に記憶される情報として実装され得る。
The data 112 can include information such as input audio data, encoded audio data, and decoded audio data.
なお、メモリ１１０に含まれるものとして図示されているが、いくつかの実装形態では、命令１１４またはその一部は、本明細書に記載される方法、アルゴリズム、態様、またはそれらの組み合わせのいずれかを実行するための専用ハードウェアを含むことができる専用プロセッサまたは回路として実装され得る。命令１１４の一部は、同じマシンもしくは異なるマシン上の複数のプロセッサにわたって、あるいはローカルエリアネットワーク、ワイドエリアネットワーク、インターネット、またはそれらの組み合わせなどのネットワークにわたって分散させることができる。
Although illustrated as being contained in
プロセッサ１２０は、デジタル信号または他の電子情報を取り扱うまたは処理することができる、光学プロセッサ、量子プロセッサ、分子プロセッサ、またはそれらの組み合わせを含む既存のまたは今後開発される任意のデバイスまたはシステムを含むことができる。例えば、プロセッサ１２０は、特定用途プロセッサ、中央処理装置（ＣＰＵ）、デジタル信号プロセッサ（ＤＳＰ）、複数のマイクロプロセッサ、ＤＳＰコアに関連する１つまたは複数のマイクロプロセッサ、コントローラ、マイクロコントローラ、特定用途向け集積回路（ＡＳＩＣ）、フィールドプログラマブルゲートアレイ（ＦＰＧＡ）、プログラマブルロジックアレイ、プログラマブルロジックコントローラ、マイクロコード、ファームウェア、任意のタイプの集積回路（ＩＣ）、ステートマシン、またはそれらの組み合わせを含むことができる。本明細書で使用される「プロセッサ」という用語は、単一のプロセッサまたは複数のプロセッサを含む。
ＵＩ１３０は、仮想または物理キーパッド、タッチパッド、ディスプレイ、タッチディスプレイ、スピーカー、マイク、ビデオカメラ、センサ、またはそれらの任意の組み合わせなど、ユーザとのインターフェースが可能な任意のユニットを含むことができる。例えば、ＵＩ１３０を視聴覚ディスプレイデバイスとし、コンピューティングデバイス１００が視聴覚ディスプレイデバイスのＵＩ１３０を用いて、復号化映像などの映像の表示と併せて復号化音声などの音声を提示してもよい。なお、単一のユニットとして図示されているが、ＵＩ１３０が１つまたは複数の物理ユニットを含んでもよい。例えば、ＵＩ１３０は、ユーザとの音声通信を実行するための音声インターフェースと、ユーザとの視覚およびタッチ式の通信を実行するためのタッチディスプレイとを含んでもよい。
The
電子通信ユニット１４０は、無線周波数（ＲＦ）通信媒体、紫外線（ＵＶ）通信媒体、可視光通信媒体、光ファイバー通信媒体、有線通信媒体、またはそれらの組み合わせなどの有線または無線の電子通信媒体１８０を介して信号を送信、受信、または送受信することができる。例えば、図示されるように、電子通信ユニット１４０は、無線信号を介して通信するように構成されたアンテナなどの電子通信インターフェース１４２に動作可能に接続される。
The
電子通信インターフェース１４２は、図１では無線アンテナとして示されているが、図示される無線アンテナ、イーサネット（登録商標）ポートなどの有線通信ポート、赤外線ポート、シリアルポート、あるいは、有線または無線の電子通信媒体１８０とインターフェース可能な任意の他の有線または無線ユニットとすることができる。なお、図１は、単一の電子通信ユニット１４０および単一の電子通信インターフェース１４２を示しているが、任意の数の電子通信ユニットおよび任意の数の電子通信インターフェースを使用することができる。
The
センサ１５０は、例えば、音声検知装置、可視光検知装置、動き検知装置、またはそれらの組み合わせを含み得る。例えば、センサ１５０は、マイクなどの音声検知装置、またはコンピューティングデバイス１００の近くにおける対話または他の発話などのコンピューティングデバイス１００を操作するユーザによって作成された音を検知可能な既存のまたは今後開発される任意の他の音声検知装置を含み得る。別の例では、センサ１５０は、カメラ、またはコンピューティングデバイスを操作するユーザの画像などの画像を検知可能な既存のまたは今後開発される任意の他の画像検知装置を含み得る。なお、単一のセンサ１５０が図示されているが、コンピューティングデバイス１００は複数のセンサ１５０を含んでもよい。例えば、コンピューティングデバイス１００は、コンピューティングデバイス１００のユーザに向かう方向に視野が向けられた第１のカメラと、コンピューティングデバイス１００のユーザから離れる方向に視野が向けられた第２のカメラとを含み得る。
The
電源１６０は、コンピューティングデバイス１００に電力を供給するための任意の適切なデバイスとすることができる。例えば、電源１６０としては、有線の外部電源インターフェース、ニッケルカドミウム（ＮｉＣｄ）やニッケル亜鉛（ＮｉＺｎ）やニッケル水素（ＮｉＭＨ）やリチウムイオン（Ｌｉ−ｉｏｎ）などの１つまたは複数の乾電池、太陽電池、燃料電池、またはコンピューティングデバイス１００に電力を供給可能な任意の他のデバイスが挙げられる。なお、図１では単一の電源１６０が示されているが、コンピューティングデバイス１００は複数の電源１６０、例えばバッテリと有線の外部電源インターフェースとを含んでもよい。
The
また、図では別々のユニットとして示されているが、電子通信ユニット１４０、電子通信インターフェース１４２、ＵＩ１３０、電源１６０、またはそれらの一部が、一つの複合ユニットとして構成されてもよい。例えば、電子通信ユニット１４０、電子通信インターフェース１４２、ＵＩ１３０、および電源１６０は、外部ディスプレイデバイスとインターフェースして、通信、電力、またはその両方を提供することができる通信ポートとして実装されてもよい。
Further, although shown as separate units in the figure, the
メモリ１１０、プロセッサ１２０、ＵＩ１３０、電子通信ユニット１４０、センサ１５０、または電源１６０のうちの１つ以上は、バス１７０を介して動作可能に結合され得る。なお、図１では単一のバス１７０が示されているが、コンピューティングデバイス１００は複数のバスを含んでもよい。例えば、メモリ１１０、プロセッサ１２０、ＵＩ１３０、電子通信ユニット１４０、センサ１５０、およびバス１７０は、バス１７０を介して電源１６０から電力を受け取り得る。別の例では、メモリ１１０、プロセッサ１２０、ＵＩ１３０、電子通信ユニット１４０、センサ１５０、電源１６０、またはそれらの組み合わせは、バス１７０を介して電子信号を送受信するなどして、データを通信し得る。
One or more of the
図１には別途に示されていないが、プロセッサ１２０、ＵＩ１３０、電子通信ユニット１４０、センサ１５０、または電源１６０のうちの１つ以上は、内部バッファまたはレジスタなどの内部メモリを含んでもよい。例えば、プロセッサ１２０は、内部メモリ（図示略）を含み、処理のためにメモリ１１０から内部メモリ（図示略）にデータ１１２を読み込んでもよい。
Although not shown separately in FIG. 1, one or more of the
別々の要素として図示されているが、メモリ１１０、プロセッサ１２０、ＵＩ１３０、電子通信ユニット１４０、センサ１５０、電源１６０、バス１７０、またはそれらの任意の組み合わせは、１つまたは複数の電子ユニット、回路、またはチップに統合することができる。
Although illustrated as separate elements,
図２は、本開示の実装形態によるコンピューティングおよび通信システム２００の図である。図示されるコンピューティングおよび通信システム２００は、コンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃと、アクセスポイント２１０Ａ，２１０Ｂと、ネットワーク２２０とを含む。例えば、コンピューティングおよび通信システム２００は、音声、オーディオ、データ、ビデオ、メッセージング、ブロードキャスト、またはそれらの組み合わせなどの通信を、コンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃなどの１つまたは複数の有線または無線通信デバイスに提供する多元接続システムとすることができる。なお、簡略化のために、図２では３つのコンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃと、２つのアクセスポイント２１０Ａ，２１０Ｂと、１つのネットワーク２２０とを示しているが、任意の数のコンピューティングおよび通信デバイスと、アクセスポイントと、ネットワークを使用することができる。
FIG. 2 is a diagram of a computing and
コンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃは、例えば、図１に示されたコンピューティングデバイス１００などのコンピューティングデバイスとすることができる。例えば、コンピューティングおよび通信デバイス１００Ａ，１００Ｂを、モバイルコンピューティングデバイス、ラップトップ、シンクライアント、またはスマートフォンなどのユーザデバイスとし、コンピューティングおよび通信デバイス１００Ｃを、メインフレームまたはクラスタなどのサーバとすることができる。なお、コンピューティングおよび通信デバイス１００Ａ，１００Ｂをユーザデバイスとし、コンピューティングおよび通信デバイス１００Ｃをサーバとして説明するが、任意のコンピューティングおよび通信デバイスがサーバの機能の一部またはすべてを実行してもよいし、ユーザデバイスの機能の一部またはすべてを実行してもよいし、あるいはサーバとユーザデバイスの機能の一部またはすべてを実行してもよい。例えば、サーバとしてのコンピューティングおよび通信デバイス１００Ｃが、オーディオデータを受信し、符号化し、処理し、記憶し、送信し、またはそれらの組み合わせを実行してもよく、コンピューティングおよび通信デバイス１００Ａ，１００Ｂのうちの一方または両方が、オーディオデータを受信し、復号化し、処理し、記憶し、提示し、またはそれらの組み合わせを実行してもよい。
The computing and
各コンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃとしては、ユーザ機器（ＵＥ）、移動局、固定またはモバイル加入者ユニット、携帯電話、パーソナルコンピュータ、タブレットコンピュータ、サーバ、家庭用電化製品、または任意の類似のデバイスなどを挙げることができ、これらは、ネットワーク２２０などを介して有線または無線通信を実行するように構成することができる。例えば、コンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃは、有線または無線の通信信号を送信または受信するように構成することができる。なお、各コンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃは単一のユニットとして図示されているが、コンピューティングおよび通信デバイスは任意の数の相互接続される要素を含むことができる。
Each computing and
各アクセスポイント２１０Ａ，２１０Ｂは、有線または無線通信リンク１８０Ａ，１８０Ｂ，１８０Ｃを介して、コンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃか、ネットワーク２２０か、またはそれらの両方と通信するように構成された任意のタイプのデバイスとすることができる。例えば、アクセスポイント２１０Ａ，２１０Ｂとしては、基地局、基地トランシーバ局（ＢＴＳ）、ノードＢ、拡張ノードＢ（ｅノードＢ）、ホームノードＢ（ＨノードＢ）、無線ルータ、有線ルータ、ハブ、リレー、スイッチ、または任意の類似の有線または無線デバイスなどを挙げることができる。なお、各アクセスポイント２１０Ａ，２１０Ｂは単一のユニットとして図示されているが、アクセスポイントは任意の数の相互接続される要素を含むことができる。
Each
ネットワーク２２０は、音声、データ、アプリケーション、ボイスオーバーインターネットプロトコル（ＶｏＩＰ）、あるいは、有線または無線通信リンクを介した任意の他の通信プロトコルもしくは通信プロトコルの組み合わせなどのサービスを提供するように構成された任意のタイプのネットワークとすることができる。例えば、ネットワーク２２０は、ローカルエリアネットワーク（ＬＡＮ）、ワイドエリアネットワーク（ＷＡＮ）、仮想プライベートネットワーク（ＶＰＮ）、モバイルもしくはセルラー電話ネットワーク、インターネット、または任意の他の電子通信手段とすることができる。ネットワークは、伝送制御プロトコル（ＴＣＰ）、ユーザデータグラムプロトコル（ＵＤＰ）、インターネットプロトコル（ＩＰ）、リアルタイムトランスポートプロトコル（ＲＴＰ）、ハイパーテキストトランスポートプロトコル（ＨＴＴＰ）、またはそれらの組み合わせなどの通信プロトコルを使用することができる。
コンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃは、有線または無線通信リンクの１つ以上を使用するか、もしくは有線および無線通信リンクの組み合わせを介したネットワーク２２０を通じて互いに通信することができる。例えば、図示されるように、コンピューティングおよび通信デバイス１００Ａ，１００Ｂは無線通信リンク１８０Ａ，１８０Ｂを介して通信することができ、コンピューティングおよび通信デバイス１００Ｃは有線通信リンク１８０Ｃを介して通信することができる。コンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃのいずれも、１つまたは複数の任意の有線または無線通信リンクを使用して通信することができる。例えば、第１のコンピューティングおよび通信デバイス１００Ａは、第１のタイプの通信リンクを使用して第１のアクセスポイント２１０Ａを介して通信することができ、第２のコンピューティングおよび通信デバイス１００Ｂは、第２のタイプの通信リンクを使用して第２のアクセスポイント２１０Ｂを介して通信することができ、第３のコンピューティングおよび通信デバイス１００Ｃは、第３のタイプの通信リンクを使用して第３のアクセスポイント（図示略）を介して通信することができる。同様に、アクセスポイント２１０Ａ，２１０Ｂは、１つまたは複数のタイプの有線または無線通信リンク２３０Ａ，２３０Ｂを介してネットワーク２２０と通信することができる。なお、図２では、ネットワーク２２０を介して通信するコンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃを示しているが、コンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃは、直接有線または無線通信リンクなどの任意の数の通信リンクを介して互いに通信することができる。
The computing and
いくつかの実装形態では、コンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃのうちの１つまたは複数の間の通信が、ネットワーク２２０を介した通信を省略し、データ記憶装置などの別の媒体（図示略）を介したデータの転送を含んでもよい。例えば、サーバとしてのコンピューティングおよび通信デバイス１００Ｃが符号化オーディオデータなどのオーディオデータをポータブルデータ記憶ユニットなどのデータ記憶装置に記憶し、コンピューティングおよび通信デバイス１００Ａ，１００Ｂのうちの一方または両方が、そのデータ記憶装置をコンピューティングおよび通信デバイス１００Ｃから物理的に切断しコンピューティングおよび通信デバイス１００Ａ，１００Ｂのうちの一方に物理的に接続するなどして、データ記憶装置の記憶されたオーディオデータにアクセスしてそのオーディオデータをデータ記憶装置から読み込むまたは取得することができる。
In some implementations, communication between one or more of the computing and
コンピューティングおよび通信システム２００の他の実装形態も可能である。例えば、一つの実装形態において、ネットワーク２２０は、アドホックネットワークとすることができ、アクセスポイント２１０Ａ，２１０Ｂのうちの１つ以上を省略することができる。コンピューティングおよび通信システム２００は、図２に示されていないデバイス、ユニット、または要素を含んでもよい。例えば、コンピューティングおよび通信システム２００は、より多くの通信デバイス、ネットワーク、およびアクセスポイントを含んでもよい。
Other implementations of computing and
図３は、本開示の実装形態による符号化および復号化で使用するためのビデオストリーム３００の図である。ビデオカメラによってキャプチャされたビデオストリームやコンピューティングデバイスによって生成されたビデオストリームなどのビデオストリーム３００は、ビデオシーケンス３１０を含み得る。ビデオシーケンス３１０は、隣接フレーム３２０のシーケンスを含み得る。なお、３つの隣接するフレーム３２０が図示されているが、ビデオシーケンス３１０は、任意の数の隣接フレーム３２０を含むことができる。
FIG. 3 is a diagram of a
隣接フレーム３２０内の各フレーム３３０は、ビデオストリーム内の単一の画像を表し得る。なお、図３には示されていないが、フレーム３３０は１つまたは複数のセグメント、タイル、またはプレーンを含んでもよく、これらは、並列的などのように個別にコーディングまたは処理されてもよい。フレーム３３０は複数のブロック３４０を含み得る。なお、図３には示されていないが、ブロックは複数のピクセルを含むことができる。例えば、ブロックは、１６×１６のピクセル群、８×８のピクセル群、８×１６のピクセル群、または任意の他のピクセル群を含むことができる。本明細書で特に明記しない限り、「ブロック」という用語は、スーパーブロック、マクロブロック、セグメント、スライス、または任意の他のフレーム部分を含むことができる。フレーム、ブロック、ピクセル、またはそれらの組み合わせは、輝度情報、クロミナンス情報、あるいはビデオストリーム（またはその一部）を記憶し変更し通信しまたは表示するのに使用可能な任意の他の情報などの表示情報を含むことができる。
Each
図４は、本開示の実装形態によるエンコーダ４００のブロック図である。エンコーダ４００は、図１に示されたコンピューティングデバイス１００または図２に示されたコンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃなどのデバイスにおいて、例えば、図１に示されたメモリ１１０などのデータ記憶ユニットに記憶されるコンピュータソフトウェアプログラムとして実装可能である。コンピュータソフトウェアプログラムは、図１に示されたプロセッサ１２０などのプロセッサによって実行され得る機械命令を含むことができ、本明細書に記載されるようなビデオデータの符号化をデバイスに実行させ得る。エンコーダ４００は、例えばコンピューティングデバイス１００に含まれる専用ハードウェアとして実装することもできる。
FIG. 4 is a block diagram of the
エンコーダ４００は、図３に示されたビデオストリーム３００などのビデオストリーム４０２を符号化して符号化（圧縮）ビットストリーム４０４を生成することができる。いくつかの実装形態では、エンコーダ４００は、圧縮ビットストリーム４０４を生成するための順方向経路を含み得る。順方向経路は、イントラ／インター予測ユニット４１０、変換ユニット４２０、量子化ユニット４３０、エントロピー符号化ユニット４４０、またはそれらの任意の組み合わせを含むことができる。いくつかの実装形態では、エンコーダ４００は、さらなるブロックの符号化のためにフレームを再構成するための（破線の接続線によって示される）再構成経路を含み得る。再構成経路は、逆量子化ユニット４５０、逆変換ユニット４６０、再構成ユニット４７０、フィルタリングユニット４８０、またはそれらの任意の組み合わせを含み得る。なお、ビデオストリーム４０２を符号化するためにエンコーダ４００の他の変形例の構成を使用することもできる。
The
ビデオストリーム４０２を符号化するために、ビデオストリーム４０２内の各フレームはブロック単位で処理することができる。したがって、現在のブロックがフレーム内のブロックから特定され、その現在のブロックが符号化され得る。
To encode the
イントラ／インター予測ユニット４１０において、現在のブロックは、単一のフレーム内において行われ得るフレーム内予測か、またはフレームとフレームの間で行われ得るフレーム間予測のいずれかを使用して符号化され得る。イントラ予測は、以前に符号化されて再構成された現在のフレーム内のサンプルから予測ブロックを生成することを含み得る。インター予測は、１つまたは複数の以前に構成された参照フレーム内のサンプルから予測ブロックを生成することを含み得る。現在のフレーム内の現在のブロックの予測ブロックを生成することは、動き推定を実行して、参照フレームの適切な参照部分を示す動きベクトルを生成することを含み得る。
In the intra /
イントラ／インター予測ユニット４１０は、現在のブロック（生ブロック（raw block））から予測ブロックを減算して残差ブロックを生成してもよい。変換ユニット４２０は、残差ブロックを例えば周波数領域における変換係数に変換することを含み得るブロックベースの変換を行ってもよい。ブロックベースの変換の例としては、カルーネン・レーベ（Karhunen-Loeve）変換（ＫＬＴ）、離散コサイン変換（ＤＣＴ）、特異値分解変換（ＳＶＤ）、および非対称離散正弦変換（ＡＤＳＴ）が挙げられる。一例では、ＤＣＴは、ブロックを周波数領域に変換することを含み得る。ＤＣＴは、マトリクスの左上に最低周波数（すなわち、ＤＣ）係数を有し、マトリクスの右下に最高周波数係数を有する空間周波数に基づいた変換係数値を使用することを含み得る。
The intra /
量子化ユニット４３０は、変換係数を量子化変換係数または量子化レベルとも呼ばれ得る離散量子値に変換し得る。エントロピー符号化ユニット４４０は、量子化変換係数をエントロピー符号化することでエントロピー符号化係数を生成することができる。エントロピー符号化は確率分布メトリックを使用することを含み得る。エントロピー符号化係数およびブロックの復号に使用される情報（使用される予測のタイプ、動きベクトル、および量子化値を含み得る）は圧縮ビットストリーム４０４に出力され得る。圧縮ビットストリーム４０４は、ランレングス符号化（run-length encoding（ＲＬＥ））およびゼロラン符号化（zero-run conding）などの様々な技術を使用してフォーマットすることができる。
The
再構成経路は、エンコーダ４００と、図５に示されたデコーダ５００などの対応するデコーダとの間の参照フレーム同期を維持するために使用することができる。再構成経路は、以下で説明する復号化プロセスと同様とすることができ、符号化フレームまたはその一部を復号化することを含み得る。この復号化は、符号化ブロックを復号化することを含み得るものであり、逆量子化ユニット４５０で量子化変換係数を逆量子化し、逆変換ユニット４６０で逆量子化変換係数を逆変換して、微分残差ブロックを生成することを含み得る。再構成ユニット４７０は、イントラ／インター予測ユニット４１０によって生成された予測ブロックを微分残差ブロックに追加して復号化ブロックを作成し得る。この復号化ブロックにフィルタリングユニット４８０が適用されることで、ブロックノイズアーチファクトなどの歪みを低減し得る再構成ブロックを生成することができる。なお、図４には１つのフィルタリングユニット４８０が示されているが、復号化ブロックのフィルタリングは、ループフィルタリング、デブロッキングフィルタリング、他のタイプのフィルタリング、または複数のタイプのフィルタリングの組み合わせを含み得る。再構成ブロックは、４８２の破線で示されるように、現在のフレームの別の部分、別のフレーム、またはその両方を符号化するために、参照フレームの一部であり得る再構成ブロックとして記憶またはアクセス可能とされ得る。フレームのデブロッキング閾値インデックス値などのコーディング情報は、４８４の破線で示されるように、符号化されるか、圧縮ビットストリーム４０４に含まれるか、またはその両方とされ得る。
The reconstruction path can be used to maintain reference frame synchronization between the
圧縮ビットストリーム４０４を符号化するためにエンコーダ４００の他の変形例を使用することもできる。例えば、非変換ベースのエンコーダ４００は、変換ユニット４２０を用いることなく残差ブロックを直接量子化することができる。いくつかの実装形態では、量子化ユニット４３０および逆量子化ユニット４５０は、単一のユニットに統合され得る。
Other variants of the
図５は、本開示の実装形態によるデコーダ５００のブロック図である。デコーダ５００は、図１に示されたコンピューティングデバイス１００または図２に示されたコンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃなどのデバイスにおいて、例えば、図１に示されたメモリ１１０などのデータ記憶ユニットに記憶されるコンピュータソフトウェアプログラムとして実装可能である。コンピュータソフトウェアプログラムは、図１に示されたプロセッサ１２０などのプロセッサによって実行され得る機械命令を含むことができ、本明細書に記載されるようなビデオデータの符号化をデバイスに実行させ得る。デコーダ５００は、例えばコンピューティングデバイス１００に含まれる専用ハードウェアとして実装することもできる。
FIG. 5 is a block diagram of the
デコーダ５００は、図４に示された圧縮ビットストリーム４０４などの圧縮ビットストリーム５０２を受信し、その圧縮ビットストリーム５０２を復号化して出力ビデオストリーム５０４を生成し得る。デコーダ５００は、エントロピー復号化ユニット５１０、逆量子化ユニット５２０、逆変換ユニット５３０、イントラ／インター予測ユニット５４０、再構成ユニット５５０、フィルタリングユニット５６０、またはそれらの任意の組み合わせを含み得る。なお、圧縮ビットストリーム４２０を復号化するためにデコーダ５００の他の変形例の構成を使用することもできる。
The
エントロピー復号化ユニット５１０は、例えば、コンテキスト適応バイナリ算術復号化（Context Adaptive Binary Arithmetic Decoding）を使用して圧縮ビットストリーム５０２内のデータ要素を復号化することで、量子化変換係数のセットを生成し得る。逆量子化ユニット５２０は量子化変換係数を逆量子化することができ、逆変換ユニット５３０は逆量子化変換係数を逆変換することで、図４に示された逆変換ユニット４６０によって生成される微分残差ブロックに対応し得る微分残差ブロックを生成することができる。イントラ／インター予測ユニット５４０は、圧縮ビットストリーム５０２からの復号化されたヘッダ情報を使用して、エンコーダ４００で作成された予測ブロックに対応する予測ブロックを生成し得る。その予測ブロックが再構成ユニット５５０において微分残差ブロックに加えられることで復号化ブロックが生成される。この復号化ブロックにフィルタリングユニット５６０が適用されることでブロックノイズアーチファクトなどのアーチファクトを低減することができる。このフィルタリングユニット５６０は、ループフィルタリング、デブロッキングフィルタリング、他のタイプのフィルタリング、または複数のタイプのフィルタリングの組み合わせを含み得るものであり、出力ビデオストリーム５０４として出力され得る再構成ブロックを生成することを含み得る。
The
圧縮ビットストリーム４２０を復号化するためにデコーダ５００の他の変形例を使用することもできる。例えば、デコーダ５００は、フィルタリングユニット５６０を用いることなく出力ビデオストリーム５０４を生成することができる。
Other variants of the
図６は、本開示の実装形態による、図３に示されたフレーム３３０などのフレームの一部６００の表現のブロック図である。図示されるように、フレームの一部６００は、マトリクス内またはデカルト平面に２行２列の４つの６４×６４ブロック６１０を含む。いくつかの実装形態では、１つの６４×６４ブロックは最大コーディング単位のＮ＝６４であり得る。各６４×６４ブロックは、４つの３２×３２ブロック６２０を含み得る。各３２×３２ブロックは、４つの１６×１６ブロック６３０を含み得る。各１６×１６ブロックは、４つの８×８ブロック６４０を含み得る。各８×８ブロック６４０は、４つの４×４ブロック６５０を含み得る。各４×４ブロック６５０は、このデカルト平面またはマトリクス内の対応するブロック内において４行４列で表され得る１６個のピクセルを含み得る。ピクセルは、輝度情報、色情報、位置情報など、フレーム内でキャプチャされた画像を表す情報を含み得る。いくつかの実装形態では、図示されるような１６×１６ピクセルブロックなどのブロックは、輝度ピクセル６６２を含み得る輝度ブロック６６０と、ＵまたはＣｂクロミナンスブロック６７０やＶまたはＣｒクロミナンスブロック６８０などの２つのクロミナンスブロック６７０，６８０とを含み得る。クロミナンスブロック６７０，６８０はクロミナンスピクセル６９０を含み得る。例えば、輝度ブロック６６０が１６×１６個の輝度ピクセル６６２を含み得るとともに、各クロミナンスブロック６７０，６８０が図示されるように８×８個のクロミナンスピクセル６９０を含み得る。なお、ブロックの一つの配置が図示されているが、任意の配置を使用することができる。図６はＮ×Ｎブロックを示すが、いくつかの実装形態ではＮ×Ｍブロックを使用することができる。例えば、３２×６４ブロック、６４×３２ブロック、１６×３２ブロック、３２×１６ブロック、または他のサイズのブロックが使用されてもよい。いくつかの実装形態では、Ｎ×２Ｎブロック、２Ｎ×Ｎブロック、またはそれらの組み合わせが使用されてもよい。
FIG. 6 is a block diagram of a
いくつかの実装形態において、ビデオコーディングは、順序付け式（ordered）ブロックレベルコーディングを含み得る。順序付け式ブロックレベルコーディングは、ラスタスキャン順序などの順序でフレームのブロックをコーディングすることを含み得る。ラスタスキャン順序では、フレームの左上隅（またはフレームの一部分）のブロックからブロックの特定および処理を開始し、左から右に行に沿って、および上の行から下の行に沿って進み、各ブロックを順番に処理して特定する。例えば、フレームの左上の行列の６４×６４ブロックがコーディングされる最初のブロックとされ得るとともに、この最初のブロックのすぐ右の６４×６４ブロックがコーディングされる２番目のブロックとされ得る。そして、上から２行目がコーディングされる２行目とされ、この２行目の左側の列の６４×６４ブロックが１行目の最も右側の列の６４×６４ブロックの後にコーディングされ得るものとなる。 In some implementations, video coding may include ordered block-level coding. Ordered block-level coding can include coding blocks of frames in an order such as raster scan order. In a raster scan sequence, block identification and processing begins at the block in the upper left corner (or part of the frame) of the frame, then from left to right along the rows, and from top to bottom, each. Process and identify blocks in order. For example, the 64x64 block of the matrix at the top left of the frame can be the first block to be coded, and the 64x64 block just to the right of this first block can be the second block to be coded. Then, the second row from the top is defined as the second row, and the 64 × 64 blocks in the left column of the second row can be coded after the 64 × 64 blocks in the rightmost column of the first row. It becomes.
いくつかの実装形態では、ブロックのコーディングは、ラスタスキャン順序でブロック内のより小さなブロック単位をコーディングすることを含み得るクアッドツリー（quad-tree）コーディングを使用することを含み得る。例えば、図６に示されたフレームの部分の左下隅に示される６４×６４ブロックがクアッドツリーコーディングを用いてコーディングされ得る場合、左上の３２×３２ブロックがコーディングされ、次に右上の３２×３２ブロックがコーディングされ、次に左下の３２×３２ブロックがコーディングされ、次に右下の３２×３２ブロックがコーディングされ得る。各３２×３２ブロックがクアッドツリーコーディングを用いてコーディングされ得る場合、左上の１６×１６ブロックがコーディングされ、次に右上の１６×１６ブロックがコーディングされ、次に左下の１６×１６ブロックがコーディングされ、次に右下の１６×１６ブロックがコーディングされ得る。各１６×１６ブロックがクアッドツリーコーディングを用いてコーディングされ得る場合、左上の８×８ブロックがコーディングされ、次に右上の８×８ブロックがコーディングされ、次に左下の８×８ブロックがコーディングされ、次に右下の８×８ブロックがコーディングされ得る。各８×８ブロックがクアッドツリーコーディングを用いてコーディングされ得る場合、左上の４×４ブロックがコーディングされ、次に右上の４×４ブロックがコーディングされ、次に左下の４×４ブロックがコーディングされ、次に右下の４×４ブロックがコーディングされ得る。いくつかの実装形態では、１６×１６ブロックに対して８×８ブロックが省略されてもよく、１６×１６ブロックがクアッドツリーコーディングを用いてコーディングされ得る場合に、左上の４×４ブロックがコーディングされた後、この１６×１６ブロック内の他の４×４ブロックがラスタスキャン順にコーディングされてもよい。 In some implementations, coding a block may include using quad-tree coding, which may involve coding smaller block units within the block in a raster scan order. For example, if the 64x64 blocks shown in the lower left corner of the frame portion shown in FIG. 6 can be coded using quad tree coding, the upper left 32x32 blocks are coded, then the upper right 32x32. Blocks may be coded, then the lower left 32x32 block may be coded, then the lower right 32x32 block may be coded. If each 32x32 block can be coded using quad tree coding, then the upper left 16x16 block is coded, then the upper right 16x16 block is coded, then the lower left 16x16 block is coded. Then the lower right 16x16 block can be coded. If each 16x16 block can be coded using quad tree coding, then the upper left 8x8 block is coded, then the upper right 8x8 block is coded, then the lower left 8x8 block is coded. Then the lower right 8x8 block can be coded. If each 8x8 block can be coded using quad tree coding, then the upper left 4x4 block is coded, then the upper right 4x4 block is coded, then the lower left 4x4 block is coded. Then the lower right 4x4 block can be coded. In some implementations, 8x8 blocks may be omitted for 16x16 blocks, and if 16x16 blocks can be coded using quadtree coding, the upper left 4x4 block is coded. After that, the other 4x4 blocks in this 16x16 block may be coded in raster scan order.
いくつかの実装形態において、ビデオコーディングは、例えば、対応する符号化フレームから元のフレームの情報の一部を省略することにより、元のフレーム（または入力フレーム）に含まれる情報を圧縮することを含み得る。例えば、コーディングは、スペクトル冗長性を低減すること、空間冗長性を低減すること、時間冗長性を低減すること、またはそれらの組み合わせを含み得る。 In some implementations, video coding compresses the information contained in the original frame (or input frame), for example by omitting some of the information in the original frame from the corresponding coded frame. Can include. For example, coding may include reducing spectral redundancy, reducing spatial redundancy, reducing time redundancy, or a combination thereof.
いくつかの実装形態において、スペクトル冗長性を低減することは、ＹＵＶまたはＹＣｂＣｒカラーモデルあるいはカラースペースと呼ばれ得る、輝度成分（Ｙ）と２つのクロミナンス成分（ＵとＶまたはＣｂとＣｒ）とに基づくカラーモデルを使用することを含み得る。ＹＵＶカラーモデルを使用することは、比較的大量の情報を使用してフレームの一部分の輝度成分を表すこと、および比較的少量の情報を使用してそのフレームの部分の各対応するクロミナンス成分を表すことを含み得る。例えば、フレームの一部分は、１６×１６ブロックのピクセルを含み得る高解像度の輝度成分と、各々そのフレームの部分を８×８ブロックのピクセルとして表す２つの低解像度のクロミナンス成分とによって表され得る。ピクセルは、ある値、例えば０〜２５５の範囲内の値を示し得るとともに、例えば８ビットを使用して記憶または送信され得る。なお、この開示はＹＵＶカラーモデルに関して説明されているが、任意のカラーモデルが使用されてもよい。 In some embodiments, reducing spectral redundancy involves a luminance component (Y) and two chrominance components (U and V or Cb and Cr), which can be referred to as the YUV or YCbCr color model or color space. It may include using a color model based on it. Using the YUV color model uses a relatively large amount of information to represent the luminance component of a portion of the frame, and a relatively small amount of information to represent each corresponding chrominance component of that portion of the frame. Can include that. For example, a portion of a frame may be represented by a high resolution luminance component that may contain 16x16 blocks of pixels and two low resolution chrominance components that each represent that portion of the frame as 8x8 blocks of pixels. Pixels can represent a value, eg, a value in the range 0-255, and can be stored or transmitted using, eg, 8 bits. Although this disclosure describes the YUV color model, any color model may be used.
いくつかの実装形態において、空間的冗長性を低減することは、例えば、離散コサイン変換（ＤＣＴ）を使用してブロックを周波数領域に変換することを含み得る。例えば、図４に示された変換ユニット４２０などのエンコーダのユニットが、空間周波数に基づく変換係数値を使用してＤＣＴを実行し得る。
In some implementations, reducing spatial redundancy can include, for example, converting blocks into the frequency domain using the Discrete Cosine Transform (DCT). For example, an encoder unit such as the
いくつかの実装形態において、時間的冗長性を低減することは、フレーム間の類似性を使用して、以前に符号化され復号化され再構成されたビデオストリームのフレームであり得る１つまたは複数の参照フレームに基づいて比較的少量のデータを使用してフレームをエンコードすることを含み得る。例えば、現在のフレームのブロックまたはピクセルは、参照フレームの空間的に対応するブロックまたはピクセルに類似し得る。いくつかの実装形態では、現在のフレームのブロックまたはピクセルは、異なる空間位置における参照フレームのブロックまたはピクセルに類似し、時間的冗長性を低減することは、現在のフレーム内のブロックまたはピクセルの位置と参照フレーム内のブロックまたはピクセルの対応する位置との間の空間差または移動を示す動き情報を生成することを含み得る。 In some implementations, reducing temporal redundancy can be one or more frames of a previously encoded, decoded, and reconstructed video stream using similarities between frames. It may involve encoding a frame with a relatively small amount of data based on the reference frame of. For example, the blocks or pixels in the current frame can resemble the spatially corresponding blocks or pixels in the reference frame. In some embodiments, the blocks or pixels in the current frame are similar to the blocks or pixels in the reference frame at different spatial positions, and reducing temporal redundancy is the position of the blocks or pixels in the current frame. It may include generating motion information indicating the spatial difference or movement between the block or the corresponding position of the block or pixel in the reference frame.
いくつかの実装形態において、時間的冗長性を低減することは、現在のフレームの現在のブロックまたはピクセルに対応する参照フレームの一部を特定することを含み得る。例えば、現在のフレームの現在のブロックまたはピクセルを最大限の効率で符号化するために使用する予測子を生成するための部分を特定するために、メモリに記憶されている参照フレームまたは参照フレームの一部が検索され得る。例えば、この検索は、現在のブロックと参照フレームの一部に基づいて生成された予測ブロックとの間のピクセル値の差が最小化される当該参照フレームの一部を特定し得るものであり、動き検索と呼ばれ得る。いくつかの実装形態では、検索される参照フレームの部分が制限され得る。例えば、検索される参照フレームの部分（検索エリアと呼ばれ得る）は参照フレームの制限された数の行を含み得る。一例では、予測子を生成するための参照フレームの部分を特定することは、検索エリアの部分のピクセルと現在のブロックのピクセルとの間の差分絶対値和（ＳＡＤ）などのコスト関数（cost function）を計算することを含み得る。 In some implementations, reducing temporal redundancy may include identifying the portion of the reference frame that corresponds to the current block or pixel of the current frame. For example, a reference frame or reference frame stored in memory to identify the part for generating the predictor used to encode the current block or pixel of the current frame with maximum efficiency. Some can be searched. For example, this search can identify the part of the reference frame that minimizes the difference in pixel values between the current block and the predicted block generated based on the part of the reference frame. It can be called a motion search. In some implementations, the portion of the referenced frame searched may be limited. For example, the portion of the referenced frame that is searched (which may be called the search area) may contain a limited number of rows of the referenced frame. In one example, identifying the part of the reference frame for generating the predictor is a cost function, such as the sum of the difference absolute values (SAD) between the pixels of the part of the search area and the pixels of the current block. ) Can be included.
いくつかの実装形態では、参照フレーム内において予測子を生成するための参照フレームの部分の位置と現在のフレーム内の現在のブロックとの間の空間差は、動きベクトルとして表され得る。予測ブロックと現在のブロックとの間のピクセル値の差は、差分データ、残差データ、予測誤差、または残差ブロックと呼ばれ得る。いくつかの実装形態では、動きベクトルの生成は動き推定と呼ばれ得るものであり、現在のブロックのピクセルはｆｘ，ｙによるデカルト座標を使用した位置に基づいて示され得る。同様に、参照フレームの検索エリアのピクセルは、ｒｘ，ｙによるデカルト座標を使用した位置に基づいて示され得る。現在のブロックの動きベクトル（ＭＶ）は、例えば、現在のフレームのピクセルと参照フレームの対応するピクセルとの間のＳＡＤに基づいて決定され得る。 In some implementations, the spatial difference between the position of a portion of the reference frame to generate a predictor within the reference frame and the current block within the current frame can be expressed as a motion vector. The difference in pixel values between the predicted block and the current block can be referred to as the difference data, the residual data, the prediction error, or the residual block. In some implementations, the generation of motion vectors can be called motion estimation, and the pixels of the current block can be shown based on their position using Cartesian coordinates by fx , y. Similarly, the pixels in the search area of the reference frame may be shown based on their position using Cartesian coordinates by r x, y. The motion vector (MV) of the current block can be determined, for example, based on the SAD between the pixels of the current frame and the corresponding pixels of the reference frame.
なお、本明細書では明瞭化のためにフレームのマトリクスまたはデカルト表現を参照して説明されているが、フレームは、フレームまたは画像のピクセル値を効率的に表すことができるように任意のデータ構造で記憶され、送信され、処理され、またはそれらの任意の組み合わせが取られ得る。例えば、フレームは、図示されるようなマトリクスなどの二次元データ構造かまたはベクトル配列などの一次元データ構造で記憶され、送信され、処理され、またはそれらの任意の組み合わせが取られ得る。一実装形態では、図示されるような二次元表現などのフレームの表現は、フレームを画像としてレンダリングする際の物理的位置に対応し得る。例えば、フレームの左上隅にあるブロックの左上隅の位置は、フレームを画像としてレンダリングする際の左上隅の物理的位置に対応し得る。 Although described herein with reference to a matrix or Cartesian representation of the frame for clarity, the frame is an arbitrary data structure that can efficiently represent the pixel values of the frame or image. Can be stored, transmitted, processed, or any combination thereof. For example, a frame can be stored, transmitted, processed, or any combination thereof in a two-dimensional data structure such as a matrix as shown or a one-dimensional data structure such as a vector array. In one implementation, the representation of the frame, such as the two-dimensional representation as shown, may correspond to the physical position when rendering the frame as an image. For example, the position of the upper left corner of the block in the upper left corner of the frame may correspond to the physical position of the upper left corner when rendering the frame as an image.
いくつかの実装形態では、ブロックベースのコーディング効率は、予測コーディングのために、入力ブロックを矩形状（正方形を含む）のパーティションであり得る１つまたは複数の予測パーティションに分割することによって改善され得る。いくつかの実装形態では、予測分割を使用するビデオコーディングは、複数の候補予測分割スキームの中から１つの予測分割スキームを選択することを含み得る。例えば、いくつかの実装形態では、６４×６４コーディングユニットの候補予測分割スキームは、４×４，４×８，８×４，８×８，８×１６，１６×８，１６×１６，１６×３２，３２×１６，３２×３２，３２×６４，６４×３２，または６４×６４などの、４×４から６４×６４までのサイズの範囲内において矩形状サイズの予測パーティションを含み得る。いくつかの実装形態では、予測分割を使用するビデオコーディングは、予測パーティション全検索を含み得る。予測パーティション全検索は、それぞれ利用可能な候補予測分割スキームを使用してコーディングユニットを符号化することによって予測分割スキームを選択すること、および最小レート歪みエラーを生成するスキームなどの最適なスキームを選択することを含み得る。 In some implementations, block-based coding efficiency can be improved by dividing the input block into one or more predictive partitions, which can be rectangular (including square) partitions, for predictive coding. .. In some implementations, video coding using predictive splitting may include selecting one predictive splitting scheme from a plurality of candidate predictive splitting schemes. For example, in some implementations, the candidate predictive partitioning scheme for 64x64 coding units is 4x4, 4x8, 8x4, 8x8, 8x16, 16x8, 16x16, 16 Predictive partitions of rectangular size may be included within a size range of 4x4 to 64x64, such as x32, 32x16, 32x32, 32x64, 64x32, or 64x64. In some implementations, video coding using predictive partitioning can include a full search of predictive partitions. Predictive partition full search selects the predictive partitioning scheme by encoding the coding unit using each of the available candidate predictive partitioning schemes, and selects the optimal scheme, such as the one that produces the minimum rate distortion error. May include doing.
いくつかの実装形態において、ビデオフレームの符号化は、ブロック６１０などの現在のブロックを符号化するために予測分割スキームを特定することを含み得る。いくつかの実装形態では、予測分割スキームを特定することは、ブロックを図示されるような６４×６４であり得る最大コーディングユニットサイズの単一の予測パーティションとして符号化するかどうか、または、ブロックを図示されるような３２×３２ブロック６２０、１６×１６ブロック６３０、または８×８ブロック６４０などのサブブロックに対応し得る複数の予測パーティションに分割するかどうかを判定することを含み得るとともに、１つまたは複数のより小さな予測パーティションに分割するかどうかを判定することを含み得る。例えば、６４×６４ブロックは、４つの３２×３２予測パーティションに分割され得る。その４つの３２×３２予測パーティションのうちの３つは、３２×３２予測パーティションとして符号化され得る一方、４つ目の３２×３２予測パーティションは、４つの１６×１６予測パーティションにさらに分割され得る。その４つの１６×１６予測パーティションのうちの３つは、１６×１６予測パーティションとして符号化され得る一方、４つ目の１６×１６予測パーティションは、４つの８×８予測パーティションにさらに分割され得るものとなり、その各々が８×８予測パーティションとして符号化され得る。いくつかの実装形態では、予測分割スキームを特定することは、予測分割決定ツリーを使用することを含み得る。
In some implementations, video frame coding may include specifying a predictive split scheme to encode the current block, such as
いくつかの実装形態において、現在のブロックのビデオコーディングは、複数の候補予測コーディングモードから最適な予測コーディングモードを特定することを含み得る。これにより、様々な統計特性を持つビデオ信号の処理に柔軟性がもたられ、圧縮効率が向上され得る。例えば、ビデオコーダは、各候補予測コーディングモードを評価して、例えば、現在のブロックに対してレート歪みコストなどのエラーメトリックを最小化する予測コーディングモードであり得る最適な予測コーディングモードを特定し得る。いくつかの実装形態では、現在のブロックと対応する予測ブロックとの間の類似性に基づいて利用可能な候補予測コーディングモードのセットを制限することにより、候補予測コーディングモードの検索の複雑さが低減され得る。いくつかの実装形態では、各候補予測コーディングモードの検索の複雑さは指向性改良モード検索（directed refinement mode search）を実行することによって低減され得る。例えば、１６×１６，８×８，４×４などの候補ブロックサイズの限られたセットに対してメトリックが生成されてもよく、各ブロックサイズに関連付けられるエラーメトリックは降順とされてもよく、４×８や８×４ブロックサイズなど追加の候補ブロックサイズが評価されてもよい。 In some implementations, video coding of the current block may include identifying the optimal predictive coding mode from multiple candidate predictive coding modes. This provides flexibility in the processing of video signals with various statistical characteristics and can improve compression efficiency. For example, the video coder may evaluate each candidate predictive coding mode to identify the optimal predictive coding mode that could be the predictive coding mode that minimizes error metrics such as rate distortion cost for the current block, for example. .. Some implementations reduce the complexity of searching for candidate predictive coding modes by limiting the set of candidate predictive coding modes available based on the similarity between the current block and the corresponding predictive block. Can be done. In some implementations, the search complexity of each candidate predictive coding mode can be reduced by performing a directed refinement mode search. For example, metrics may be generated for a limited set of candidate block sizes such as 16x16, 8x8, 4x4, and the error metrics associated with each block size may be in descending order. Additional candidate block sizes, such as 4x8 and 8x4 block sizes, may be evaluated.
いくつかの実装形態では、ブロックベースのコーディング効率は、変換コーディングのために、現在の残差ブロックを矩形状（正方形を含む）のパーティションであり得る１つまたは複数の変換パーティションに分割することによって改善され得る。いくつかの実装形態では、変換分割を使用するビデオコーディングは、均一変換分割スキームを選択することを含み得る。例えば、ブロック６１０などの現在の残差ブロックは、６４×６４ブロックであり得るとともに、６４×６４変換を使用して分割することなく変換され得る。
In some implementations, block-based coding efficiency is achieved by dividing the current residual block into one or more transformation partitions, which can be rectangular (including square) partitions, for transformation coding. Can be improved. In some implementations, video coding using transformation partitioning may involve choosing a uniform transformation partitioning scheme. For example, the current residual block, such as
図６には明示的に示されていないが、残差ブロックは、均一変換分割スキームを使用して変換分割され得る。例えば、６４×６４残差ブロックは、４個の３２×３２変換ブロックを含む均一変換分割スキームを使用するか、１６個の１６×１６変換ブロックを含む均一変換分割スキームを使用するか、６４個の８×８変換ブロックを含む均一変換分割スキームを使用するか、または２５６個の４×４変換ブロックを含む均一変換分割スキームを使用して変換分割され得る。 Although not explicitly shown in FIG. 6, the residual block can be transformed and split using a uniform transform split scheme. For example, the 64x64 residual block uses a uniform conversion division scheme containing four 32x32 conversion blocks, a uniform conversion division scheme containing 16 16x16 conversion blocks, or 64 pieces. A uniform conversion division scheme containing 8x8 conversion blocks of can be used, or a uniform conversion division scheme containing 256 4x4 conversion blocks can be used for conversion division.
いくつかの実装形態では、変換分割を使用するビデオコーディングは、マルチフォーム変換パーティションコーディングを使用して残差ブロックの複数の変換ブロックサイズを特定することを含み得る。いくつかの実装形態では、マルチフォーム変換パーティションコーディングは、現在のブロックサイズ変換を使用して現在のブロックを変換するのか、それとも現在のブロックを分割して各パーティションをマルチフォーム変換パーティションコーディングすることによって現在のブロックを変換するのかを再帰的に判定することを含み得る。例えば、図６に示される左下のブロック６１０が６４×６４残差ブロックであり得る場合、マルチフォーム変換パーティションコーディングは、６４×６４変換を使用して現在の６４×６４残差ブロックをコーディングするのか、それともその６４×６４残差ブロックを４つの３２×３２ブロック６２０などの複数のパーティションに分割して各パーティションをマルチフォーム変換パーティションコーディングすることによってその６４×６４残差ブロックをコーディングするのかを判定することを含み得る。いくつかの実装形態では、現在のブロックを変換分割するかどうかの判定は、現在のブロックサイズ変換を使用して現在のブロックを符号化する場合のコストを、パーティションサイズ変換を使用して各パーティションを符号化する場合のコストの合計と比較することに基づき得る。
In some implementations, video coding using transformation partitioning may involve using multiform transformation partition coding to identify multiple transformation block sizes for residual blocks. In some implementations, multiform transform partition coding either uses the current block size transform to transform the current block, or by splitting the current block and multiform transform partition coding each partition. It may include recursively determining whether to transform the current block. For example, if the lower
図７は、本開示の実装形態によるブロック境界を含む入力フレームの一部分の例を示す。入力フレームの部分７００は、左上に第１のブロック７１０、右上に第２のブロック７２０、左下に第３のブロック７３０、右下に第４のブロック７４０を含む。この入力フレームの部分７００は、第１のブロック７１０と第２のブロック７２０との間の垂直ブロック境界である第１のブロック境界７５０と、第１のブロック７１０と第３のブロック７３０との間の水平ブロック境界である第２のブロック境界７６０と、第３のブロック７３０と第４のブロック７４０との間の垂直ブロック境界である第３のブロック境界７７０と、第２のブロック７２０と第４のブロック７４０との間の水平ブロック境界である第４のブロック境界７８０とを含む。
FIG. 7 shows an example of a part of an input frame including a block boundary according to the embodiment of the present disclosure. The input frame portion 700 includes a
第１のブロック７１０および第２のブロック７２０は、フレームによってキャプチャされた第１のオブジェクトまたは視覚要素に対応するコンテンツを含むことを示す点描の背景で示されている。第３のブロック７３０および第４のブロック７４０は、フレームによってキャプチャされた第２のオブジェクトまたは視覚要素に対応するコンテンツを含むことを示す白色の背景で示されている。フレームによってキャプチャされた第１のオブジェクトと第２のオブジェクトとの間のエッジは、第２のブロック境界７６０と第４のブロック境界７８０に対応し、７９０の太い破線で示されている。
The
なお、図７には明示的に示されていないが、各ブロック７１０，７２０，７３０，７４０はピクセルを含み得る。例えば、各ブロック７１０，７２０，７３０，７４０は、８×８ピクセルブロックであり得る。
Although not explicitly shown in FIG. 7, each
図４に関連して説明した符号化などのような画像またはビデオの符号化は、量子化によって生じるブロック境界に沿った歪みであり得るブロックノイズアーチファクトなどのアーチファクトまたは歪みをもたらし得る。例えば、図７に示された入力フレームの部分７００の符号化は、図８に示された再構成画像部分に示されるようなブロックノイズアーチファクトをもたらし得る。 Image or video coding, such as the coding described in connection with FIG. 4, can result in artifacts or distortions, such as block noise artifacts, which can be distortions along the block boundaries caused by quantization. For example, the coding of portion 700 of the input frame shown in FIG. 7 can result in block noise artifacts as shown in the reconstructed image portion shown in FIG.
図８は、本開示の実装形態によるブロックアーチファクトを含む再構成フレームの一部分の例を示す。図８に示された再構成フレームの部分８００は、この図８に示された再構成フレームの部分８００がブロックノイズアーチファクトを含むという点を除いて、図７に示された入力フレームの部分７００に対応し得る。
FIG. 8 shows an example of a portion of a reconstructed frame containing block artifacts according to the embodiments of the present disclosure. The reconstructed
図８は、左上に第１のブロック８１０、右上に第２のブロック８２０、左下に第３のブロック８３０、右下に第４のブロック８４０を含むとともに、第１のブロック８１０と第２のブロック８２０との間の垂直ブロック境界である第１のブロック境界８５０と、第１のブロック８１０と第３のブロック８３０との間の水平ブロック境界である第２のブロック境界８６０と、第３のブロック８３０と第４のブロック８４０との間の垂直ブロック境界である第３のブロック境界８７０と、第２のブロック８２０と第４のブロック８４０との間の水平ブロック境界である第４のブロック境界８８０とを含む。
FIG. 8 contains a
図８に示された第１のブロック８１０は、この図８に示された第１のブロック８１０が濃い点描を用いて示されるブロックノイズ量子化エラーを示すという点を除いて、図７に示された第１のブロック７１０に対応する。図８に示された第２のブロック８２０は、図７に示された第２のブロック７２０に対応する。図８に示された第３のブロック８３０は、図７に示された第３のブロック７３０に対応する。図８に示された第４のブロック８４０は、この図８に示された第４のブロック８４０が薄い点描を用いて示されるブロックノイズ量子化エラーを示すという点を除いて、図７に示された第４のブロック７４０に対応する。
The
図７に関連して説明したオブジェクトと同様、図８に示された第１のブロック８１０および第２のブロック８２０は、フレームによってキャプチャされた第１のオブジェクトまたは視覚要素に対応するコンテンツを含み、図８に示された第３のブロック８３０および第４のブロック８４０は、フレームによってキャプチャされた第２のオブジェクトまたは視覚要素に対応するコンテンツを含む。フレームによってキャプチャされた第１のオブジェクトと第２のオブジェクトとの間のエッジは、第２のブロック境界８６０と第４のブロック境界８８０に対応し、８９０の太い破線で示されている。
Similar to the objects described in connection with FIG. 7, the
なお、図８には明示的に示されていないが、各ブロック８１０，８２０，８３０，８４０はピクセルを含み得る。例えば、各ブロック８１０，８２０，８３０，８４０は、８×８ピクセルブロックであり得る。
Although not explicitly shown in FIG. 8, each
図８に示された再構成フレームの部分８００のデブロッキングは、第１のブロック境界８５０に沿ったブロックノイズアーチファクトや第３のブロック境界８７０に沿ったブロックノイズアーチファクトなどのブロック境界に沿ったブロックノイズアーチファクトを低減または最小化すること、および、第２のブロック境界８６０および第４のブロック境界８８０に沿ったオブジェクトエッジ８９０を維持または最小限の境界曖昧さとすることを含み、ブロックノイズアーチファクトに対応するブロック間の差と、オブジェクトエッジに対応するブロック間の差とを区別することを含み得る。
The deblocking of
図９は、本開示の実装形態によるピクセルの行にピクセル粒度（pixel granularity）を有するブロックアーチファクトを含む再構成フレームの一部分の例を示す。図９に示された再構成フレームの部分９００は、この図９に示された再構成フレームの部分９００ではピクセルの行にピクセルまたはピクセル位置が明示的に表されており、ブロック境界についての参照は明瞭化のために省略されているという点を除いて、図８に示された再構成フレームの部分８００に対応し得る。
FIG. 9 shows an example of a portion of a reconstructed frame containing block artifacts having pixel granularity in a row of pixels according to the embodiment of the present disclosure. Part 900 of the reconstructed frame shown in FIG. 9 explicitly represents a pixel or pixel position in a row of pixels in
図９は、図８に示された第１のブロック８１０に対応する左上の第１のブロック９１０と、図８に示された第２のブロック８２０に対応する右上の第２のブロック９２０と、図８に示された第３のブロック８３０に対応する左下の第３のブロック９３０と、図８に示された第４のブロック８４０に対応する右下の第４のブロック９４０とを含む。
9 shows the
現在のブロックであり得る第３のブロック９３０は、図９において左から右に順に明瞭化のためにｃ０，ｃ１，ｃ２，ｃ３，ｃ４，ｃ５，ｃ６，ｃ７で表示される、第３のブロック９３０を水平に横切る行に沿ったピクセルなどのピクセルを含み得る。水平に隣接するブロックなどの隣接ブロックであり得る第４のブロック９４０は、図９において左から右に順に明瞭化のためにａ０，ａ１，ａ２，ａ３，ａ４，ａ５，ａ６，ａ７で表示される、第４のブロック９４０を水平に横切る行に沿ったピクセルなどのピクセルを含み得る。
The
第３のブロック９３０のデブロッキングは、現在のブロック（第３のブロック９３０）の行に沿ったピクセルｃ０，ｃ１，ｃ２，ｃ３，ｃ４，ｃ５，ｃ６，ｃ７および水平方向に隣接するブロック（第４のブロック９４０）の行に沿ったピクセルａ０，ａ１，ａ２，ａ３，ａ４，ａ５，ａ６，ａ７のうちの１つ以上に基づいて、図８に示された第４のブロック境界８８０に対応し得る現在のブロック（第３のブロック９３０）と隣接ブロック（第４のブロック９４０）のブロック境界に沿った現在のブロック（第３のブロック９３０）の行のピクセルｃ０，ｃ１，ｃ２，ｃ３，ｃ４，ｃ５，ｃ６，ｃ７の１つ以上をデブロッキングすることを含み得る。
Deblocking of the
第２のブロック１０２０のデブロッキングは、現在のブロック（第２のブロック１０２０）の列に沿ったピクセルｃ０，ｃ１，ｃ２，ｃ３，ｃ４，ｃ５，ｃ６，ｃ７および垂直方向に隣接するブロック（第４のブロック１０４０）の列に沿ったピクセルａ０，ａ１，ａ２，ａ３，ａ４，ａ５，ａ６，ａ７のうちの１つ以上に基づいて、図８に示された第３のブロック境界８７０に対応し得る現在のブロック（第２のブロック１０２０）と垂直方向に隣接するブロック（第４のブロック１０４０）のブロック境界に沿った現在のブロック（第２のブロック１０２０）の列のピクセルｃ０，ｃ１，ｃ２，ｃ３，ｃ４，ｃ５，ｃ６，ｃ７の１つ以上をデブロッキングすることを含み得る。
Deblocking of the
図１０は、本開示の実装形態によるピクセルの列にピクセル粒度（pixel granularity）を有するブロックアーチファクトを含む再構成フレームの一部分の例を示す。図１０に示された再構成フレームの部分１０００は、この図１０に示された再構成フレームの部分１０００ではピクセルの列にピクセルまたはピクセル位置が明示的に表されており、ブロック境界についての参照は明瞭化のために省略されているという点を除いて、図８に示された再構成フレームの部分８００に対応し得る。
FIG. 10 shows an example of a portion of a reconstructed frame containing block artifacts having pixel granularity in a row of pixels according to the embodiment of the present disclosure.
図１０は、図８に示された第１のブロック８１０に対応する左上の第１のブロック１０１０と、図８に示された第２のブロック８２０に対応する右上の第２のブロック１０２０と、図８に示された第３のブロック８３０に対応する左下の第３のブロック１０３０と、図８に示された第４のブロック８４０に対応する右下の第４のブロック１０４０とを含む。
FIG. 10 shows a
現在のブロックであり得る第２のブロック１０２０は、図１０において上から下に順に明瞭化のためにｃ０，ｃ１，ｃ２，ｃ３，ｃ４，ｃ５，ｃ６，ｃ７で表示される、第２のブロック１０２０を垂直に横切る列に沿ったピクセルなどのピクセルを含み得る。垂直に隣接するブロックなどの隣接ブロックであり得る第４のブロック１０４０は、図１０において上から下に順に明瞭化のためにａ０，ａ１，ａ２，ａ３，ａ４，ａ５，ａ６，ａ７で表示される、第４のブロック１０４０を垂直に横切る列に沿ったピクセルなどのピクセルを含み得る。
The
第２のブロック１０２０のデブロッキングは、現在のブロック（第２のブロック１０２０）の列に沿ったピクセルｃ０，ｃ１，ｃ２，ｃ３，ｃ４，ｃ５，ｃ６，ｃ７および垂直方向に隣接するブロック（第４のブロック１０４０）の列に沿ったピクセルａ０，ａ１，ａ２，ａ３，ａ４，ａ５，ａ６，ａ７のうちの１つ以上に基づいて、図８に示された第３のブロック境界８７０に対応し得る現在のブロック（第２のブロック１０２０）と垂直方向に隣接するブロック（第４のブロック１０４０）のブロック境界に沿った現在のブロック（第２のブロック１０２０）の列のピクセルｃ０，ｃ１，ｃ２，ｃ３，ｃ４，ｃ５，ｃ６，ｃ７の１つ以上をデブロッキングすることを含み得る。
Deblocking of the
図１１は、本開示の実装形態によるデュアルデブロッキングフィルタ閾値を用いた符号化１１００の例のフローチャート図である。デュアルデブロッキングフィルタ閾値を用いた符号化１１００は、図４に示されたエンコーダ４００などのエンコーダで実行され得る。例えば、図４に示されたエンコーダ４００のフィルタリングユニット４８０が、デュアルデブロッキングフィルタ閾値を用いた符号化１１００を実行し得る。
FIG. 11 is a flowchart of an example of
デュアルデブロッキングフィルタ閾値を用いた符号化１１００は、１１１０において入力フレームを特定すること、１１２０において入力フレームを符号化すること、１１３０において符号化ビットストリームを出力すること、またはそれらの任意の組み合わせを含み得る。
Coding with dual
入力フレームは、１１１０において特定され得る。例えば、エンコーダは、入力画像かまたは入力ビデオストリームもしくは信号、あるいはその一部を受信またはそれにアクセスし、入力画像かまたは入力ビデオストリームの一部を現在の入力フレームとして特定し得る。 The input frame can be specified at 1110. For example, an encoder may receive or access an input image or an input video stream or signal, or a portion thereof, and identify an input image or a portion of the input video stream as the current input frame.
１１１０で特定された入力フレームは、１１２０において符号化され得る。１１２０で入力フレームを符号化することは、１１２２において符号化フレームを生成すること、１１２４において再構成フレームを生成すること、１１２６においてデブロッキング閾値インデックスを特定すること、１１２８において符号化フレームとデブロッキング閾値インデックスとを出力ビットストリーム内に含めること、またはそれらの組み合わせを含み得る。なお、図１１では別々に示されているが、１１２２で符号化フレームを生成すること、１１２４で再構成フレームを生成すること、１１２６でデブロッキング閾値インデックスを特定すること、および１１２８で符号化フレームとデブロッキング閾値インデックスとを出力ビットストリーム内に含めることが、一体的に実行されてもよい。 The input frame identified in 1110 may be encoded in 1120. Encoding an input frame at 1120 means generating a coded frame at 1122, generating a reconstructed frame at 1124, specifying a deblocking threshold index at 1126, and coding a frame and deblocking at 1128. The threshold index and may be included in the output bitstream, or a combination thereof. Although shown separately in FIG. 11, 1122 is used to generate a coded frame, 1124 is used to generate a reconstructed frame, 1126 is used to specify the deblocking threshold index, and 1128 is used to specify a coded frame. And the deblocking threshold index may be included in the output bitstream integrally.
１１２２で符号化フレームを生成することは、ブロックベースの符号化を使用することを含み得るものであり、本明細書で説明されているかもしくは文脈から明らかである場合を除いて、図４に関連して説明した符号化と同様であり得る。例えば、エンコーダは、予測ブロックを生成し、各予測ブロックと対応する入力ブロックとの差を残差として特定し、残差を変換することによって各変換係数を特定し、変換係数を量子化することによって各量子化変換係数を生成し、各量子化変換係数と動き情報などの他の符号化データとをエントロピーコーディングし得るか、またはそれらの組み合わせを実行し得る。 Generating a coded frame at 1122 may involve the use of block-based coding and is relevant to FIG. 4 unless as described herein or as clear from the context. It can be similar to the coding described above. For example, the encoder generates predictive blocks, identifies the difference between each predictive block and the corresponding input block as a residual, identifies each conversion factor by transforming the residual, and quantizes the conversion factor. Each quantization conversion coefficient can be generated by, and each quantization conversion coefficient can be entropy-coded with other coded data such as motion information, or a combination thereof can be executed.
１１２４で再構成フレームを生成することは、本明細書で説明されているかもしくは文脈から明らかである場合を除いて、図４に関連して説明した再構成と同様であり得る。例えば、エンコーダは、量子化変換係数を逆量子化して各逆量子化変換係数を生成し、逆量子化変換係数を逆変換して各再構成残差を生成し、１１２２で生成された予測ブロックなどの各予測ブロックを特定し、復号化フレームを生成し（各予測ブロックと対応する再構成残差とを組み合わせることによって復号化フレームの各復号化ブロックを生成することを含み得る）、復号化フレームをフィルタリング（ループフィルタリング、デブロッキングフィルタリング、またはその両方など）してアーチファクトを低減しつつ再構成フレームを生成し得るか、またはそれらの組み合わせを実行し得る。なお、１１２４で再構成フレームの生成に関連して説明したが、デブロッキングまたはその一部は、復号化フレームの生成に続いてまたはループフィルタリングに続いて実行されてもよい。再構成フレームは、他のフレームを符号化するために、再構成フレームまたは参照フレームとして記憶されるかまたはアクセス可能とされてもよい。 Generating a reconstruction frame at 1124 may be similar to the reconstruction described in connection with FIG. 4, except as described herein or as clear from the context. For example, the encoder dequantizes the quantization conversion coefficients to generate each inverse quantization conversion coefficient, inversely transforms the inverse quantization conversion coefficient to generate each reconstruction residual, and predictive blocks generated in 1122. Each predictive block such as is identified, a decryption frame is generated (which may include generating each decryption block of the decryption frame by combining each predictive block with the corresponding reconstruction residue), and decoding. Frames can be filtered (loop filtering, deblocking filtering, or both) to generate reconstructed frames while reducing artifacts, or a combination thereof can be performed. Although described in relation to the generation of reconstructed frames in 1124, deblocking or a portion thereof may be performed following the generation of decrypted frames or following loop filtering. The reconstructed frame may be stored or made accessible as a reconstructed frame or a reference frame in order to encode other frames.
デブロッキング閾値インデックスは、１１２６において特定され得る。いくつかの実装形態では、１１２６でデブロッキング閾値インデックスを特定することは、１１２２での符号化フレームの生成に続いて１１２４で再構成フレームの生成と同時に（例えば、組み合わせて）実行されてもよいし、または１１２４で再構成フレームの生成に続いて実行されてもよい。例えば、１１２４での再構成フレームの生成と１１２６でのデブロッキング閾値インデックスの特定は図１１では別々に示されているが、１１２４での再構成フレームの生成に関連して説明したデブロッキングは、デブロッキング閾値インデックスを特定することを含み得る。 The deblocking threshold index can be specified at 1126. In some implementations, identifying the deblocking threshold index at 1126 may be performed simultaneously (eg, in combination) with the generation of the reconstructed frame at 1124 following the generation of the coded frame at 1122. Alternatively, it may be executed following the generation of the reconstructed frame at 1124. For example, the generation of the reconstructed frame at 1124 and the identification of the deblocking threshold index at 1126 are shown separately in FIG. 11, but the deblocking described in connection with the generation of the reconstructed frame at 1124 is It may include identifying the deblocking threshold index.
１１２６でデブロッキング閾値インデックスを特定することは、第１のデブロッキング閾値インデックスを特定すること、第２のデブロッキング閾値インデックスを特定すること、またはその両方を含み得る。デブロッキング閾値インデックスは、定義済みのデブロッキング閾値のセット、グループ、または一群を特定する整数値などのインデックスであり得る。例えば、エンコーダは、定義済みのデブロッキング閾値のセットを含むテーブルまたは他のデータ記憶構造を含み得るかもしくはそれにアクセスし得るものであり、各々定義済みのデブロッキング閾値のセットは、それぞれ対応するデブロッキング閾値インデックスによってインデックス付けされるかまたは一意に特定される。 Identifying the deblocking threshold index at 1126 may include identifying a first deblocking threshold index, identifying a second deblocking threshold index, or both. The deblocking threshold index can be an index such as a defined set of deblocking thresholds, a group, or an integer value that identifies a group. For example, an encoder may include or have access to a table or other data storage structure containing a defined set of deblocking thresholds, and each defined set of deblocking thresholds may each have a corresponding deblocking threshold. Indexed or uniquely identified by the blocking threshold index.
１１２６でデブロッキング閾値インデックスを特定することは、水平または垂直などの第１の方向にフレームをデブロッキングするための第１のデブロッキング閾値インデックスを特定すること、および第１の方向に直交する垂直または水平などの第２の方向にフレームをデブロッキングするための、第１のデブロッキング閾値インデックスとは異なり得る第２のデブロッキング閾値インデックスを特定することを含み得る。 Identifying the deblocking threshold index at 1126 identifies the first deblocking threshold index for deblocking the frame in a first direction, such as horizontal or vertical, and vertical perpendicular to the first direction. Alternatively, it may include identifying a second deblocking threshold index that may differ from the first deblocking threshold index for deblocking the frame in a second direction such as horizontal.
一例では、第１のデブロッキング閾値インデックスはフレームの垂直ブロック境界をデブロッキングするために特定され得るものであり、第２のデブロッキング閾値インデックスはフレームの水平ブロック境界をデブロッキングするために特定され得るものである。デブロッキング閾値インデックスを特定する例は図１２に示されている。 In one example, the first deblocking threshold index can be specified to deblock the vertical block boundaries of the frame, and the second deblocking threshold index can be specified to deblock the horizontal block boundaries of the frame. What you get. An example of identifying the deblocking threshold index is shown in FIG.
符号化フレーム、デブロッキング閾値インデックス、またはその両方は、１１２８において出力ビットストリームすなわち符号化ビットストリーム内に含められ得る。例えば、デブロッキング閾値インデックスは、符号化フレームのフレームヘッダに含められ得る。このフレームヘッダは出力ビットストリーム内に含められ得るものであり、フレームヘッダまたはその一部をエントロピーコーディングすることを含み得る。 The coded frame, the deblocking threshold index, or both can be included in the output bitstream or coded bitstream at 1128. For example, the deblocking threshold index can be included in the frame header of the coded frame. This frame header can be included in the output bitstream and may include entropy coding the frame header or parts thereof.
デブロッキング閾値インデックスを出力ビットストリーム内に含めることは、第１のデブロッキング閾値インデックスの表示を出力ビットストリーム内に含めること、および個別に、第２のデブロッキング閾値インデックスの表示を出力ビットストリーム内に含めることを含み得る。いくつかの実装形態では、第２のデブロッキング閾値インデックスの表示を出力ビットストリーム内に含めることは、第１のデブロッキング閾値インデックスと第２のデブロッキング閾値インデックスとの差などの差分デブロッキング閾値インデックス値を特定すること、および、差分デブロッキング閾値インデックスまたはその表示を第２のデブロッキング閾値インデックスとして出力ビットストリーム内に含めることを含み得る。 Including the deblocking threshold index in the output bitstream means including the display of the first deblocking threshold index in the output bitstream, and individually displaying the display of the second deblocking threshold index in the output bitstream. May include inclusion in. In some embodiments, including the display of the second deblocking threshold index in the output bitstream is a differential deblocking threshold, such as the difference between the first deblocking threshold index and the second deblocking threshold index. Identifying the index value and including the differential deblocking threshold index or its display as a second deblocking threshold index in the output bitstream.
符号化ビットストリームは、１１３０において出力され得る。例えば、符号化ビットストリームまたは出力ビットストリームは、図２に示されたネットワーク２２０などのネットワークを介した信号として送信され得ることで、図１に示されたコンピューティングデバイス１００または図２に示されたコンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃなどのデバイス（図５に示されたデコーダ５００などのデコーダを含み得る）は、ネットワークを介してその信号を受信し、符号化ビデオビットストリームを復号して、現在のフレームに対応する再構成フレームまたはその一部を生成し得る。別の例では、符号化ビットストリームは、図１に示されたコンピューティングデバイス１００または図２に示されたコンピューティングおよび通信デバイス１００Ａ，１００Ｂ，１００Ｃなどのデバイスにおける図１に示されたメモリ１１０などのメモリに記憶済み符号化ビデオとして記憶され得ることで、そのメモリにアクセス可能なそのデバイスまたは任意の他のデバイスが、その記憶済み符号化ビデオを取得し得るとともに、図５に示されたデコーダ５００などのデコーダが、その符号化ビデオを復号して、現在のフレームに対応する再構成フレームまたはその一部を生成し得る。
The coded bitstream can be output at 1130. For example, the encoded bitstream or output bitstream can be transmitted as a signal over a network such as
デュアルデブロッキングフィルタ閾値を用いた符号化の他の実装形態も利用可能である。実装形態では、デュアルデブロッキングフィルタ閾値を用いた符号化の追加の要素を追加したり、特定の要素を組み合わせたり、および／または特定の要素を削除したりすることができる。 Other implementations of coding with dual deblocking filter thresholds are also available. In the implementation, additional elements of coding with dual deblocking filter thresholds can be added, specific elements can be combined, and / or specific elements can be removed.
図１２は、本開示の実装形態によるデブロッキング閾値インデックスを特定１２００する例のフローチャート図である。デブロッキング閾値インデックスを特定１２００することは、図４に示されたエンコーダ４００などのエンコーダに実装され得る。例えば、図４に示されたエンコーダ４００のフィルタリングユニット４８０がデブロッキング閾値インデックスの特定１２００を実行し得る。
FIG. 12 is a flowchart of an example in which the deblocking threshold index according to the embodiment of the present disclosure is specified 1200. Specifying the
デブロッキング閾値インデックスを特定１２００することは、復号化フレームであり得る現在のフレームをデブロッキングするためのデブロッキング閾値インデックスを特定することを含み得るものであり、本明細書で説明されているかもしくは文脈から明らかである場合を除いて、図１１に示されたデブロッキング閾値インデックスの特定１１２６に類似し得る。 Identifying the deblocking threshold index of 1200 may include identifying the deblocking threshold index for deblocking the current frame, which may be a decoded frame, and is described herein or It may resemble the specific 1126 of the deblocking threshold index shown in FIG. 11, except as is apparent from the context.
デブロッキング閾値インデックスを特定１２００することは、１２１０において共有デブロッキング（joint deblocking）閾値インデックスを特定すること、１２２０において第１の個別のデブロッキング閾値インデックスを特定すること、１２３０において第２の個別のデブロッキング閾値インデックスを特定すること、またはそれらの任意の組み合わせを含み得る。
Identifying the
なお、図１２には別途に示されていないが、デブロッキング閾値インデックスを特定１２００することは、候補デブロッキング閾値インデックスを特定することを含み得る。候補デブロッキング閾値インデックスの各々は、それぞれ定義済みのデブロッキング閾値のセットに対応し得るか、またはそれを一意に特定し得る。例えば、エンコーダ、またはエンコーダのデブロッキング閾値インデックス特定ユニットは、候補デブロッキング閾値インデックスおよび対応するデブロッキング閾値のセットを含むテーブル（エンコーダのメモリに記憶されたテーブル、もしくはエンコーダがアクセス可能なテーブルなど）または他のデータ記憶構造からの読み出しを行い得るかもしくはそれにアクセスし得る。一例では、候補デブロッキング閾値インデックスはＮのカーディナリティ（cardinality）を有し、定義済みのデブロッキング閾値のセットはＮのカーディナリティを有し、各候補デブロッキング閾値インデックスはそれぞれ定義済みのデブロッキング閾値のセットに対応し得る。 Although not shown separately in FIG. 12, specifying the deblocking threshold index of 1200 may include specifying the candidate deblocking threshold index. Each of the candidate deblocking threshold indexes can correspond to or uniquely identify a defined set of deblocking thresholds. For example, an encoder, or a deblocking threshold index specific unit of an encoder, is a table containing a candidate deblocking threshold index and a corresponding set of deblocking thresholds (such as a table stored in the encoder's memory or a table accessible to the encoder). Or it can read from or access other data storage structures. In one example, the candidate deblocking threshold index has N cardinality, the defined set of deblocking thresholds has N cardinality, and each candidate deblocking threshold index has its own defined deblocking threshold. Can correspond to a set.
１２１０で共有デブロッキング閾値インデックスを特定することは、フレームをデブロッキングするにあたって共有エラーメトリックなどのメトリックを最小化するデブロッキング閾値のセットに対応するデブロッキング閾値インデックスを特定することを含み得るものであり、フレームをデブロッキングすることは、水平または垂直などの第１の方向においてデブロッキング閾値のセットを用いてフレームをデブロッキングすること、および第１の方向に直交し得る垂直または水平などの第２の方向においてデブロッキング閾値のセットを用いてフレームをデブロッキングすることを含み得る。共有デブロッキング閾値インデックスなどのデブロッキング閾値インデックスを特定する例は図１３に示されている。 Identifying a shared deblocking threshold index at 1210 can include identifying a deblocking threshold index that corresponds to a set of deblocking thresholds that minimizes metrics such as shared error metrics in deblocking frames. Yes, deblocking a frame is deblocking the frame with a set of deblocking thresholds in a first direction, such as horizontal or vertical, and a first, such as vertical or horizontal, which can be orthogonal to the first direction. It may include deblocking frames with a set of deblocking thresholds in two directions. An example of identifying a deblocking threshold index, such as a shared deblocking threshold index, is shown in FIG.
１２２０で第１の個別のデブロッキング閾値インデックスを特定することは、第１の方向において第１の個別のデブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いつつ、第２の方向において１２１０で特定された共有デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いてフレームをデブロッキングするにあたり、エラーメトリックなどのメトリックを最小化するデブロッキング閾値のセットに対応するデブロッキング閾値インデックスを特定することを含み得る。第１の個別のデブロッキング閾値インデックスなどのデブロッキング閾値インデックスを特定する例は図１３に示されている。 Identifying the first individual deblocking threshold index at 1220 is at 1210 in the second direction, using the set of deblocking thresholds corresponding to the first individual deblocking threshold index in the first direction. When deblocking a frame using the set of deblocking thresholds corresponding to the identified shared deblocking threshold index, identify the deblocking threshold index corresponding to the set of deblocking thresholds that minimizes metrics such as error metrics. Can include that. An example of identifying a deblocking threshold index, such as a first individual deblocking threshold index, is shown in FIG.
１２３０で第２の個別のデブロッキング閾値インデックスを特定することは、第１の方向において１２２０で特定された第１の個別のデブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いつつ、第２の方向において第２の個別のデブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いてフレームをデブロッキングするにあたり、エラーメトリックなどのメトリックを最小化するデブロッキング閾値のセットに対応するデブロッキング閾値インデックスを特定することを含み得る。第２の個別のデブロッキング閾値インデックスなどのデブロッキング閾値インデックスを特定する例は図１３に示されている。 Identifying the second individual deblocking threshold index at 1230 is a second, using a set of deblocking thresholds corresponding to the first individual deblocking threshold index identified at 1220 in the first direction. In deblocking a frame with a set of deblocking thresholds corresponding to a second individual deblocking threshold index in the direction of, the deblocking threshold corresponding to a set of deblocking thresholds that minimizes metrics such as error metrics. It may include identifying the index. An example of identifying a deblocking threshold index, such as a second individual deblocking threshold index, is shown in FIG.
図１３は、本開示の実装形態によるデブロッキング閾値インデックスを特定１３００する例のフローチャート図である。デブロッキング閾値インデックスの特定１３００は、図４に示されたエンコーダ４００などのエンコーダで実行され得る。例えば、図４に示されたエンコーダ４００のフィルタリングユニット４８０がデブロッキング閾値インデックスの特定１３００を実行し得る。
FIG. 13 is a flowchart of an example in which the deblocking threshold index according to the embodiment of the present disclosure is specified 1300. Identification of the
デブロッキング閾値インデックスを特定１３００することは、１３１０において現在の候補デブロッキング閾値インデックスを特定すること、１３２０において現在のエラーメトリックを決定すること、１３３０において最小エラーメトリックに対応する候補デブロッキング閾値インデックスを特定すること、またはそれらの任意の組み合わせを含み得る。
Identifying the
現在の候補デブロッキング閾値インデックスは１３１０で特定され得る。現在の候補デブロッキング閾値インデックスを特定することは、図１２に関連して説明した候補デブロッキング閾値インデックスなどの候補デブロッキング閾値インデックスのセットから現在のデブロッキング閾値インデックスを特定することを含み得る。１３１０で現在の候補デブロッキング閾値インデックスを特定することは、デブロッキング閾値の対応するセットを特定することを含み得る。 The current candidate deblocking threshold index can be identified at 1310. Identifying the current candidate deblocking threshold index may include identifying the current deblocking threshold index from a set of candidate deblocking threshold indexes, such as the candidate deblocking threshold index described in connection with FIG. Identifying the current candidate deblocking threshold index at 1310 may include identifying the corresponding set of deblocking thresholds.
例えば、図１２において１２１０で示されるような共有デブロッキング閾値インデックスを特定することがデブロッキング閾値インデックスの特定１３００を含み得るものであり、現在の候補デブロッキング閾値インデックスを特定することは、水平または垂直などの第１の方向と、第１の方向に直交し得る垂直または水平などの第２の方向において、現在のフレームまたはその一部をデブロッキングするための現在の候補デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを特定することを含み得る。 For example, specifying a shared deblocking threshold index as shown by 1210 in FIG. 12 may include specifying 1300 of the deblocking threshold index, and specifying the current candidate deblocking threshold index may be horizontal or Corresponds to the current candidate deblocking threshold index for deblocking the current frame or part of it in a first direction, such as vertical, and a second direction, such as vertical or horizontal, which can be orthogonal to the first direction. It may include identifying a set of deblocking thresholds to do.
別の例では、図１２において１２２０で示されるような、または図１２において１２３０で示されるような個別のデブロッキング閾値インデックスを特定することがデブロッキング閾値インデックスの特定１３００を含み得るものであり、１３１０で現在の候補デブロッキング閾値インデックスを特定することは、第１の方向において現在のフレームまたはその一部をデブロッキングするための現在の候補デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを特定するとともに、第２の方向において異なる個別のデブロッキング閾値インデックス（別々にまたは以前に特定された個別のデブロッキング閾値インデックスなど）に対応するデブロッキング閾値のセットを用いること、または、第１の方向において異なる個別のデブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いるとともに、第２の方向において現在のフレームまたはその一部をデブロッキングするための現在の候補デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを特定することを含み得る。
In another example, identifying individual deblocking threshold indexes, such as those shown at 1220 in FIG. 12 or 1230 in FIG. 12, may include
現在の候補デブロッキング閾値インデックスに対する現在のエラーメトリックは、１３２０において決定され得る。現在のエラーメトリックを決定することは、水平または垂直などの第１の方向において現在の候補デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて現在のフレームまたはその一部をデブロッキングすること、第１の方向に直交し得る垂直または水平などの第２の方向において現在の候補デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて現在のフレームまたはその一部をデブロッキングすること、または、第１の方向および第２の方向において現在の候補デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて現在のフレームまたはその一部をデブロッキングすることを含み得る。 The current error metric for the current candidate deblocking threshold index can be determined at 1320. Determining the current error metric is to deblock the current frame or part of it with a set of deblocking thresholds corresponding to the current candidate deblocking threshold index in a first direction, such as horizontal or vertical. Deblocking the current frame or part of it with a set of deblocking thresholds corresponding to the current candidate deblocking threshold index in a second direction, such as vertical or horizontal, which may be orthogonal to the first direction. Alternatively, it may include deblocking the current frame or a portion thereof with a set of deblocking thresholds corresponding to the current candidate deblocking threshold index in the first and second directions.
例えば、図１２において１２１０で示されるような共有デブロッキング閾値インデックスを特定することがデブロッキング閾値インデックスの特定１３００を含み得るものであり、１３２０で現在のエラーメトリックを決定することは、第１の方向および第２の方向において現在の候補デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて現在のフレームまたはその一部をデブロッキングすることを含み得る。共有デブロッキング閾値インデックスを特定することを含む実装形態では、現在のエラーメトリックは共有エラーメトリックであり得る。 For example, specifying a shared deblocking threshold index as shown by 1210 in FIG. 12 may include specifying a deblocking threshold index of 1300, and determining the current error metric at 1320 is a first step. It may include deblocking the current frame or part of it with a set of deblocking thresholds corresponding to the current candidate deblocking threshold index in the direction and the second direction. In implementations that include identifying a shared deblocking threshold index, the current error metric can be a shared error metric.
別の例では、図１２において１２２０で示されるような、または図１２において１２３０で示されるような個別のデブロッキング閾値インデックスを特定することがデブロッキング閾値インデックスの特定１３００を含み得るものであり、１３２０で現在のエラーメトリックを決定することは、第１の方向において現在の候補デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて現在のフレームまたはその一部をデブロッキングするとともに、第２の方向において異なる個別のデブロッキング閾値インデックス（別々に特定された個別のデブロッキング閾値インデックスなど）に対応するデブロッキング閾値のセットを用いて現在のフレームまたはその一部をデブロッキングすること、または、第２の方向において現在の候補デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて現在のフレームまたはその一部をデブロッキングするとともに、第１の方向において異なる個別のデブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて現在のフレームまたはその一部をデブロッキングすることを含み得る。
In another example, identifying individual deblocking threshold indexes, such as those shown at 1220 in FIG. 12 or 1230 in FIG. 12, may include
１３２０で現在のエラーメトリックを決定することは、候補再構成フレームまたはその一部を生成すること、および、候補再構成フレーム（またはその一部）と対応する入力フレーム（またはその一部）との差に基づいて、例えば、再構成候補フレームと対応する入力フレームとの差分絶対値和（ＳＡＤ：sum of absolute differences）か、差分二乗和（ＳＳＤ：sum of squared differences）か、または別のエラーメトリックを決定することなどによって、現在のエラーメトリックを特定することを含み得る。現在のエラーメトリックを決定する例は図１４に示されている。 Determining the current error metric at 1320 is to generate a candidate reconstruction frame or part of it, and with the candidate reconstruction frame (or part of it) and the corresponding input frame (or part of it). Based on the differences, for example, the sum of absolute differences (SAD) between the reconstruction candidate frames and the corresponding input frames, the sum of squared differences (SSD), or another error metric. May include identifying the current error metric, such as by determining. An example of determining the current error metric is shown in FIG.
複数の候補デブロッキング閾値インデックスのうちの対応する候補デブロッキング閾値インデックスを用いて、第１の方向に現在のフレームまたはその一部をデブロッキングしたり、第２の方向に現在のフレームまたはその一部をデブロッキングしたり、または第１の方向と第２の方向に現在のフレームまたはその一部をデブロッキングしたりすることにそれぞれ対応する各エラーメトリックは、１３２５の破線矢印で示されるように決定され得る。 The corresponding candidate deblocking threshold index of multiple candidate deblocking threshold indexes can be used to deblock the current frame or part of it in the first direction, or the current frame or one in the second direction. Each error metric corresponding to deblocking a part or deblocking the current frame or part of it in the first and second directions is indicated by the dashed arrow at 1325, respectively. Can be decided.
例えば、図１２において１２１０で示されるような共有デブロッキング閾値インデックスを特定することがデブロッキング閾値インデックスの特定１３００を含み得るものであり、１３２０で現在のエラーメトリックを決定することは、複数の候補デブロッキング閾値インデックスのうちの各々対応する１つを用いて、共有エラーメトリックであり得る対応するエラーメトリックを決定することであって、第１の方向および第２の方向において各候補デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて現在のフレームまたはその一部をデブロッキングすることによって当該エラーメトリックを決定することを含み得る。 For example, specifying a shared deblocking threshold index as shown by 1210 in FIG. 12 may include specifying 1300 of the deblocking threshold index, and determining the current error metric at 1320 is a plurality of candidates. Each corresponding one of the deblocking threshold indexes is used to determine the corresponding error metric that can be a shared error metric, with each candidate deblocking threshold index in the first and second directions. It may include determining the error metric by deblocking the current frame or part of it with the set of deblocking thresholds corresponding to.
いくつかの実装形態では、１３１０で現在の候補デブロッキング閾値インデックスを特定することは、複数の候補デブロッキング閾値インデックスの中から、別々に特定される個別のデブロッキング閾値インデックスを特定すること、例えば、第１の方向（または第２の方向）において現在のフレームまたはその一部をデブロッキングするための別々に特定された個別のデブロッキング閾値インデックスや、第２の方向（または第１の方向）において現在のフレームまたはその一部をデブロッキングするための現在の候補デブロッキング閾値インデックスなどを特定することを省略してもよく、また、各エラーメトリックを決定することは、第１の方向および第２の方向において、別々に特定された個別のデブロッキング閾値インデックスを用いて現在のフレームまたはその一部をデブロッキングすることに対応するエラーメトリックを決定することを省略してもよい。 In some embodiments, identifying the current candidate deblocking threshold index at 1310 identifies an individual deblocking threshold index that is identified separately from among a plurality of candidate deblocking threshold indexes, eg. , Separately identified individual deblocking threshold indexes for deblocking the current frame or part of it in the first direction (or second direction), or the second direction (or first direction). In, it may be omitted to specify the current candidate deblocking threshold index for deblocking the current frame or a part thereof, and determining each error metric may be performed in the first direction and the first. In two directions, it may be omitted to use separately identified individual deblocking threshold indexes to determine the error metric corresponding to deblocking the current frame or part thereof.
例えば、図１２において１２２０で示されるような、または図１２において１２３０で示されるような個別のデブロッキング閾値インデックスを特定することがデブロッキング閾値インデックスの特定１３００を含み得るものであり、１３２０で現在のエラーメトリックを決定することは、個別のデブロッキング閾値インデックス（別々に特定された個別のデブロッキング閾値インデックスなど）とは異なる（またはそれ以外の）それぞれの候補デブロッキング閾値インデックスに対応するエラーメトリック（第１のエラーメトリック）を決定することを含み得る。このエラーメトリック（第１のエラーメトリック）の決定は、第１の方向において現在の候補デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて現在のフレームまたはその一部をデブロッキングするとともに、第２の方向において個別のデブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて現在のフレームまたはその一部をデブロッキングすることによって、または、第１の方向において異なる個別のデブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて現在のフレームまたはその一部をデブロッキングするとともに、第２の方向において現在の候補デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて現在のフレームまたはその一部をデブロッキングすることによって行われる。 For example, identifying an individual deblocking threshold index as shown by 1220 in FIG. 12 or 1230 in FIG. 12 may include a specific 1300 deblocking threshold index, which is currently 1320. Determining the error metric for each candidate deblocking threshold index is different from the individual deblocking threshold index (such as a separately identified individual deblocking threshold index) (or any other). It may include determining (first error metric). This error metric (first error metric) is determined by deblocking the current frame or part of it with a set of deblocking thresholds corresponding to the current candidate deblocking threshold index in the first direction. Individual deblocking threshold indexes that differ in the first direction, either by deblocking the current frame or part of it with a set of deblocking thresholds that correspond to the individual deblocking threshold indexes in the second direction. Deblocking the current frame or part of it with the set of deblocking thresholds corresponding to, and the current frame with the set of deblocking thresholds corresponding to the current candidate deblocking threshold index in the second direction. Or it is done by deblocking a part of it.
最小エラーメトリックに対応するデブロッキング閾値インデックスは、１３３０において特定され得る。最小エラーメトリックに対応するデブロッキング閾値インデックスを特定することは、エラーメトリックのセットから最小エラーメトリックを特定することを含み得る。エラーメトリックのセット内の各エラーメトリックは、１３２０で決定されたそれぞれの現在のエラーメトリックに対応し得る。 The deblocking threshold index corresponding to the minimum error metric can be identified at 1330. Identifying the deblocking threshold index corresponding to the minimum error metric can include identifying the minimum error metric from a set of error metrics. Each error metric in the set of error metrics may correspond to the respective current error metric determined in 1320.
例えば、デブロッキング閾値インデックスを特定１３００することが、図１２において１２１０で示されるような共有デブロッキング閾値インデックスを特定することを含み得る場合、１３２０で現在のエラーメトリックを決定することは、各候補デブロッキング閾値インデックスに対応する各デブロッキング閾値のセットを使用して第１の方向および第２の方向に現在のフレームまたはその一部をデブロッキングすることに対応する各エラーメトリックなどのエラーメトリックを決定することを含み得るとともに、１３３０でデブロッキング閾値インデックスを特定することは、１３２０で決定されたエラーメトリックから最小エラーメトリックを特定すること、および最小エラーメトリックに対応する候補デブロッキング閾値インデックスを１３３０でのデブロッキング閾値インデックスとして特定することを含み得る。
For example, if specifying the
別の例では、図１２において１２００で示されるようなデブロッキング閾値インデックスを特定することは、図１２において１２１０で示されるような共有デブロッキング閾値インデックスを特定すること、図１２において１２２０で示されるような第１の個別のデブロッキング閾値インデックスを特定すること、および、図１２において１２３０で示されるような第２の個別のデブロッキング閾値インデックスを特定することを含み得る。 In another example, identifying a deblocking threshold index as shown in 1200 in FIG. 12 identifies a shared deblocking threshold index as shown in 1210 in FIG. 12, as shown in 1220 in FIG. Such as identifying a first individual deblocking threshold index and identifying a second individual deblocking threshold index as shown in 1230 in FIG. 12 may be included.
共有デブロッキング閾値インデックスを特定することは、デブロッキング閾値のセットを用いて第１の方向に現在のフレームまたはその一部をデブロッキングするとともに、そのデブロッキング閾値のセットを用いて第２の方向に現在のフレームまたはその一部をデブロッキングすることに対応する最小共有エラーメトリックを特定することを含み得る。 Identifying a shared deblocking threshold index uses a set of deblocking thresholds to deblock the current frame or part of it in the first direction, and uses that set of deblocking thresholds to deblock the current frame or a portion thereof in the second direction. May include identifying the minimum shared error metric that corresponds to deblocking the current frame or part of it.
第１の個別のデブロッキング閾値インデックスを特定することは、エラーメトリックのセットの中から最小エラーメトリックに対応するデブロッキング閾値インデックスを特定することを含み得るものであって、エラーメトリックのセットは、最小共有エラーメトリックを含むとともに候補エラーメトリックを含み、この候補エラーメトリックは、共有デブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて第１の方向に現在のフレームまたはその一部をデブロッキングするとともに、他のデブロッキング閾値のセットを用いて第２の方向に現在のフレームまたはその一部をデブロッキングすることに対応する。 Identifying the first individual deblocking threshold index can include identifying the deblocking threshold index corresponding to the minimum error metric from within the set of error metrics, and the set of error metrics is It contains the minimum shared error metric as well as the candidate error metric, which deblocks the current frame or part of it in the first direction with a set of deblocking thresholds corresponding to the shared deblocking threshold index. At the same time, it corresponds to deblocking the current frame or a part thereof in the second direction by using another set of deblocking thresholds.
第２の個別のデブロッキング閾値インデックスを特定することは、エラーメトリックのセットの中から最小エラーメトリックに対応するデブロッキング閾値インデックスを特定することを含み得るものであって、エラーメトリックのセットは、第１の個別のデブロッキング閾値インデックスに対応するエラーメトリックを含むとともに候補エラーメトリックを含み、この候補エラーメトリックは、第１の個別のデブロッキング閾値インデックスに対応するデブロッキング閾値のセットを用いて第１の方向に現在のフレームまたはその一部をデブロッキングするとともに、他のデブロッキング閾値のセットを用いて第２の方向に現在のフレームまたはその一部をデブロッキングすることに対応する。 Identifying a second individual deblocking threshold index can include identifying the deblocking threshold index corresponding to the smallest error metric from a set of error metrics, and the set of error metrics is A candidate error metric is included as well as an error metric corresponding to the first individual deblocking threshold index, and the candidate error metric is the first using a set of deblocking thresholds corresponding to the first individual deblocking threshold index. Corresponds to deblocking the current frame or part thereof in one direction and deblocking the current frame or part thereof in the second direction using another set of deblocking thresholds.
図１４は、本開示の実装形態による現在のエラーメトリックを決定１４００する例のフローチャート図である。現在のエラーメトリックの決定１４００は、図４に示されたエンコーダ４００などのエンコーダで実行され得る。例えば、図４に示されたエンコーダ４００のフィルタリングユニット４８０が現在のエラーメトリックの決定１４００を実行し得る。
FIG. 14 is a flowchart of an example in which the current error metric according to the implementation of the present disclosure is determined 1400. The current error
現在のエラーメトリックを決定１４００することは、１４１０において現在のブロックを特定すること、１４２０において再構成ブロックを生成すること、１４３０においてエラーメトリックを決定すること、またはそれらの任意の組み合わせを含み得る。 Determining the current error metric 1400 may include identifying the current block at 1410, generating a reconstructed block at 1420, determining the error metric at 1430, or any combination thereof.
なお、図１４には別途に示されていないが、現在のエラーメトリックを決定１４００することは、水平または垂直などの第１の方向において現在のフレームをデブロッキングするための第１のデブロッキング閾値のセットを特定すること、および第１の方向に直交し得る垂直または水平などの第２の方向において現在のフレームをデブロッキングするための第２のデブロッキング閾値のセットを特定することを含み得る。 Although not shown separately in FIG. 14, determining the current error metric of 1400 is a first deblocking threshold for deblocking the current frame in a first direction such as horizontal or vertical. Can include identifying a set of second deblocking thresholds for deblocking the current frame in a second direction, such as vertical or horizontal, which can be orthogonal to the first direction. ..
第１のデブロッキング閾値のセットは、図１２において１２１０で示されるように特定された共有デブロッキング閾値インデックスなどの共有デブロッキング閾値インデックスに対応し得るか、または、図１２において１２２０で示されるように特定された第１の個別のデブロッキング閾値インデックスなどの第１の個別のデブロッキング閾値インデックスに対応し得る。第２のデブロッキング閾値のセットは、共有の個別のデブロッキング閾値インデックスに対応し得るか、または、図１２において１２３０で示されるように特定された第２の個別のデブロッキング閾値インデックスなどの第２の個別のデブロッキング閾値インデックスに対応し得る。 The first set of deblocking thresholds may correspond to a shared deblocking threshold index, such as the shared deblocking threshold index identified as shown at 1210 in FIG. 12, or as shown at 1220 in FIG. It may correspond to a first individual deblocking threshold index, such as a first individual deblocking threshold index specified in. A second set of deblocking thresholds may correspond to a shared individual deblocking threshold index, or a second, such as a second individual deblocking threshold index identified as shown at 1230 in FIG. It may correspond to two individual deblocking threshold indexes.
現在のフレームの現在のブロックは、１４１０において特定され得る。例えば、現在のフレームは、予測ブロックなどのブロックを含み得るとともに、そのフレームのそれぞれの現在のブロックは、ラスタ順序などのスキャン順序に基づいて特定され得る。なお、図１４には別途に示されていないが、現在のエラーメトリックを決定１４００することは、現在のブロック、現在のブロックに隣接する１つまたは複数の隣接ブロック、またはその両方についての変換ブロックサイズを示す情報を特定することを含み得る。 The current block of the current frame can be identified at 1410. For example, the current frame may contain blocks such as predictive blocks, and each current block of the frame may be identified based on a scan order such as raster order. Although not shown separately in FIG. 14, determining the current error metric of 1400 is a conversion block for the current block, one or more adjacent blocks adjacent to the current block, or both. It may include identifying information indicating the size.
再構成ブロックは、１４２０において生成され得る。現在のフレームが復号化フレームであり得るとともに、１４１０で特定された現在のブロックが復号化ブロックであり得る場合、１４２０で再構成ブロックを生成することは現在のブロックをデブロッキングすることを含み得る。 Reconstruction blocks can be generated at 1420. If the current frame can be a decrypted frame and the current block identified in 1410 can be a decrypted block, then generating a reconstructed block at 1420 can include deblocking the current block. ..
現在のブロックをデブロッキングすることは、現在のブロックを第１の方向にデブロッキングする際に第１のデブロッキング閾値インデックスを使用し、現在のブロックを第２の方向にデブロッキングする際に第２のデブロッキング閾値インデックスを使用して、復号化ブロックであり得る現在のブロックをデブロッキングすることを含み得る。 Deblocking the current block uses the first deblocking threshold index when deblocking the current block in the first direction and the second when deblocking the current block in the second direction. The deblocking threshold index of 2 may be used to include deblocking the current block, which may be a decoding block.
第１のデブロッキング閾値インデックスと第２のデブロッキング閾値インデックスは共有デブロッキング閾値インデックスであってもよいし、第１のデブロッキング閾値インデックスは第２のデブロッキング閾値インデックスと異なっていてもよい。例えば、特定されたデブロッキング閾値インデックスが共有デブロッキング閾値インデックスであり得る場合、現在のブロックをデブロッキングすることは、復号化ブロックを水平方向にデブロッキングする際には、その特定されたデブロッキング閾値インデックスを水平デブロッキング閾値インデックスとして用い、復号化ブロックを垂直方向にデブロッキングする際には、その特定されたデブロッキング閾値インデックスを垂直デブロッキング閾値インデックスとして用いることを含み得るか、または、復号化ブロックを垂直方向に垂直デブロッキングする際には、その特定されたデブロッキング閾値インデックスを垂直デブロッキング閾値インデックスとして用い、復号化ブロックを水平方向に水平デブロッキングする際には、その特定されたデブロッキング閾値インデックスを水平デブロッキング閾値インデックスとして用いることを含み得る。現在のブロックをデブロッキングする例は図１５に示されている。 The first deblocking threshold index and the second deblocking threshold index may be a shared deblocking threshold index, and the first deblocking threshold index may be different from the second deblocking threshold index. For example, if the identified deblocking threshold index can be a shared deblocking threshold index, deblocking the current block means that the identified deblocking when deblocking the decrypted block horizontally. Using the threshold index as the horizontal deblocking threshold index and vertically deblocking the decrypted block may include using the identified deblocking threshold index as the vertical deblocking threshold index, or decoding. The specified deblocking threshold index is used as the vertical deblocking threshold index when vertically deblocking the decrypted block, and the specified deblocking threshold index is used when the decrypted block is horizontally deblocked horizontally. It may include using the deblocking threshold index as the horizontal deblocking threshold index. An example of deblocking the current block is shown in FIG.
図１４に示されるように、現在のエラーメトリックを決定１４００することは、１４２５の破線矢印によって示されるように、現在のフレームのブロック毎にそれぞれの再構成ブロックを生成することを含み得る。例えば、現在のフレームのブロック毎にそれぞれの再構成ブロックが１４２０で生成され得る場合、現在のブロックを第１の方向および第２の方向にデブロッキングすることを含み得る。なお、図１４には別途に示されていないが、現在のエラーメトリックを決定１４００することは、現在のブロックを第１の方向にデブロッキングすることによって現在のフレームのブロック毎にそれぞれ部分再構成ブロックを生成すること、および対応する部分再構成ブロックを第２の方向にデブロッキングすることによって現在のフレームのブロック毎に再構成ブロックを生成することを含み得る。 Determining 1400 for the current error metric, as shown in FIG. 14, may include generating each reconstructed block for each block of the current frame, as indicated by the dashed arrow in 1425. For example, if each reconstructed block could be generated at 1420 for each block of the current frame, it could include deblocking the current block in the first and second directions. Although not shown separately in FIG. 14, determining the current error metric of 1400 is a partial reconstruction of each block of the current frame by deblocking the current block in the first direction. It may include generating blocks and generating reconstructed blocks for each block in the current frame by deblocking the corresponding partially reconstructed blocks in the second direction.
現在のエラーメトリックは、１４３０において決定され得る。現在のエラーメトリックは、現在の再構成フレーム（またはその一部）と対応する入力フレーム（またはその一部）との差に基づいて、例えば、現在の再構成フレームと対応する入力フレームとの差分絶対値和か、差分二乗和か、または別のエラーメトリックを決定することなどによって、決定され得る。 The current error metric can be determined at 1430. The current error metric is based on the difference between the current reconstructed frame (or part of it) and the corresponding input frame (or part of it), for example, the difference between the current reconstructed frame and the corresponding input frame. It can be determined by absolute sum, difference squared sum, or by determining another error metric, and so on.
図１５は、本開示の実装形態による現在のブロックをデブロッキング１５００する例のフローチャート図である。現在のブロックをデブロッキング１５００することは、再構成ブロックを生成することを含み得るものであり、図４に示されたエンコーダ４００などのエンコーダで実行され得る。例えば、図４に示されたエンコーダ４００のフィルタリングユニット４８０が現在のブロックのデブロッキング１５００を実行し得る。
FIG. 15 is a flowchart of an example of
現在のブロックをデブロッキングすることは、第１のデブロッキング閾値インデックスに基づいて、または第１のデブロッキング閾値インデックスと第２のデブロッキング閾値インデックスとに基づいて現在のブロックをデブロッキングすることを含み得る。例えば、第１のデブロッキング閾値インデックスが共有デブロッキング閾値インデックスであり得る場合、現在のブロックをデブロッキングすることは、共有デブロッキング閾値インデックスに基づいて第１の方向に現在のブロックをデブロッキングすること、および共有デブロッキング閾値インデックスに基づいて第２の方向に現在のブロックをデブロッキングすることを含み得る。別の例では、第１のデブロッキング閾値インデックスが第１の個別のデブロッキング閾値インデックスであり得るとともに、第２のデブロッキング閾値インデックスが第２の個別のデブロッキング閾値インデックスであり得る場合、現在のブロックをデブロッキングすることは、第１の個別のデブロッキング閾値インデックスに基づいて第１の方向に現在のブロックをデブロッキングすること、および第２の個別のデブロッキング閾値インデックスに基づいて第２の方向に現在のブロックをデブロッキングすることを含み得る。 Deblocking the current block means deblocking the current block based on the first deblocking threshold index, or based on the first deblocking threshold index and the second deblocking threshold index. Can include. For example, if the first deblocking threshold index can be a shared deblocking threshold index, deblocking the current block will deblock the current block in the first direction based on the shared deblocking threshold index. This can include deblocking the current block in a second direction based on the shared deblocking threshold index. In another example, if the first deblocking threshold index could be the first individual deblocking threshold index and the second deblocking threshold index could be the second individual deblocking threshold index, then now Deblocking a block is deblocking the current block in a first direction based on a first individual deblocking threshold index, and a second based on a second individual deblocking threshold index. May include deblocking the current block in the direction of.
現在のブロックは、ブロック境界、境界線、ブロックエッジ、またはブロック辺を有し得る。例えば、図６〜１０に示されるように、現在のブロックが４つのブロック境界を有し得る場合、上部ブロック境界や下部ブロック境界などの垂直方向における２つのブロック境界と、左ブロック境界や右ブロック境界などの水平方向における２つのブロック境界とを含み得る。現在のブロックが複数の隣接ブロックに対してすぐ隣りに存在し得る場合、例えば、複数の隣接ブロックは、上部ブロック境界に沿って現在のブロックに隣接し得る現在のブロックの上方の隣接ブロック、下部ブロック境界に沿って現在のブロックに隣接し得る現在のブロックの下方の隣接ブロック、左ブロック境界に沿って現在のブロックに隣接し得る現在のブロックの左の隣接ブロック、右ブロック境界に沿って現在のブロックに隣接し得る現在のブロックの右の隣接ブロックなどである。現在のブロックおよび隣接ブロックの各々は、それぞれの変換ブロックに対応し得る。例えば、現在のブロックがＮ×Ｎブロックであり得る場合にＮ×Ｎ変換ブロックに対応してもよいし、またはｘ２Ｎ／ｘ×Ｎ／ｘ変換ブロックなどのより小さな変換ブロックに対応してもよい。 The current block can have block boundaries, boundaries, block edges, or block edges. For example, as shown in FIGS. 6-10, if the current block can have four block boundaries, two vertical block boundaries such as the upper block boundary and the lower block boundary, and the left block boundary and the right block. It may include two block boundaries in the horizontal direction, such as a boundary. If the current block can be immediately adjacent to multiple adjacent blocks, for example, multiple adjacent blocks can be adjacent to the current block along the upper block boundary, the adjacent block above and below the current block. Adjacent blocks below the current block that can be adjacent to the current block along the block boundary, adjacent blocks to the left of the current block that can be adjacent to the current block along the left block boundary, and current along the right block boundary The block to the right of the current block, which may be adjacent to the block of. Each of the current block and the adjacent block can correspond to its own conversion block. For example, the current block corresponding to the smaller transform blocks, such as N × may correspond to the N × N transform block when may be N block, or x 2 N / x × N / x conversion block May be good.
図１５に示されるように、現在のブロックをデブロッキング１５００することは、１５１０において現在の方向を特定すること、１５２０において現在のブロック境界を特定すること、１５３０において現在のデブロッキング閾値のサブセットを特定すること、１５４０においてピクセルを特定すること、１５５０において非平坦度係数（non-flatness factor）を決定すること、１５６０においてデブロッキングするかどうかを決定すること、１５７０においてデブロッキングパラメータを特定すること、またはそれらの組み合わせを含み得る。
As shown in FIG. 15,
現在の方向は１５１０において特定され得る。例えば、現在の方向は、水平または垂直などの第１の方向、またはその第１の方向に直交し得る垂直または水平などの第２の方向として特定され得る。 The current direction can be specified at 1510. For example, the current direction can be specified as a first direction, such as horizontal or vertical, or a second direction, such as vertical or horizontal, which can be orthogonal to that first direction.
１５１０で現在の方向を特定することは、現在のフレームを現在の方向にデブロッキングするための現在のデブロッキング閾値インデックスを特定することを含み得る。例えば、現在のフレームを現在の方向にデブロッキングするための現在のデブロッキング閾値インデックスは、図１３において１３１０で示されるように特定され得る。現在のフレームを現在の方向にデブロッキングするための現在のデブロッキング閾値インデックスを特定することは、現在のフレームを現在の方向にデブロッキングするための現在のデブロッキング閾値インデックスに関連付けられた現在のデブロッキング閾値のセット、グループ、または一群を特定することを含み得る。例えば、エンコーダは、現在のデブロッキング閾値インデックスおよび対応するデブロッキング閾値を含むテーブル（エンコーダのメモリに記憶されたテーブル、もしくはエンコーダがアクセス可能なテーブルなど）または他のデータ記憶構造からの読み出しを行い得るかもしくはそれにアクセスし得る。 Identifying the current direction at 1510 may include identifying the current deblocking threshold index for deblocking the current frame in the current direction. For example, the current deblocking threshold index for deblocking the current frame in the current direction can be specified as shown in 1310 in FIG. Identifying the current deblocking threshold index for deblocking the current frame in the current direction is the current associated with the current deblocking threshold index for deblocking the current frame in the current direction. It may include identifying a set, group, or group of deblocking thresholds. For example, the encoder makes a read from a table containing the current deblocking threshold index and the corresponding deblocking threshold (such as a table stored in the encoder's memory or a table accessible to the encoder) or other data storage structure. You can get or access it.
現在のブロック境界は、１５２０において特定され得る。例えば、現在の方向が垂直であり得る場合、現在のブロックの上辺か、上部境界線か、もしくは上部エッジに対応する水平ブロック境界が現在のブロック境界として特定され得るか、または現在のブロックの下辺か、下部境界線か、もしくは下部エッジに対応する水平ブロック境界が現在のブロック境界として特定され得る。別の例では、現在の方向が水平であり得る場合、現在のブロックの左辺か、左境界線か、もしくは左エッジに対応する垂直ブロック境界が現在のブロック境界として特定され得るか、または現在のブロックの右辺か、右境界線か、もしくは右エッジに対応する垂直ブロック境界が現在のブロック境界として特定され得る。 The current block boundary can be identified at 1520. For example, if the current direction can be vertical, then the top edge of the current block, the top boundary, or the horizontal block boundary corresponding to the top edge can be identified as the current block boundary, or the bottom edge of the current block. Alternatively, the lower boundary, or the horizontal block boundary corresponding to the lower edge, can be identified as the current block boundary. In another example, if the current direction can be horizontal, then the left side of the current block, the left border, or the vertical block border corresponding to the left edge can be identified as the current block border, or the current block border. The right side of the block, the right boundary, or the vertical block boundary corresponding to the right edge can be identified as the current block boundary.
現在のブロック境界をデブロッキングするための現在のデブロッキング閾値のサブセットは１５３０において特定され得る。１５３０で現在のデブロッキング閾値のサブセットを特定することは、１５２０で特定された現在のブロック境界に対応する現在の最小変換ブロックサイズを特定することを含み得る。 A subset of the current deblocking thresholds for deblocking the current block boundary can be identified at 1530. Identifying a subset of the current deblocking thresholds at 1530 may include identifying the current minimum conversion block size corresponding to the current block boundaries identified at 1520.
１５３０で現在のブロック境界に対応する現在の最小変換ブロックサイズを特定することは、現在のブロック境界に沿った各変換ブロックであって、現在のブロックに対応する変換ブロックか、現在のブロック境界に沿って現在のブロックに隣接する変換ブロックか、もしくはその両方を含み得る各変換ブロックの変換ブロックサイズを特定することを含み得る。 Identifying the current minimum conversion block size corresponding to the current block boundary at 1530 is for each conversion block along the current block boundary to the conversion block corresponding to the current block or to the current block boundary. It may include specifying the conversion block size of each conversion block that may include, or both, the conversion blocks adjacent to the current block along.
例えば、図８において、現在のブロックが右上ブロック８２０であり、現在の方向が水平であり、現在のブロック境界８５０が現在のブロック８２０と水平に隣接するブロック８１０との間の垂直境界であり、現在のブロック８２０が１６×１６ブロックであり、現在のブロック８２０の変換ブロックサイズが１６×１６であり、隣接ブロック８１０の変換ブロックサイズが８×８であり、現在の最小変換ブロックサイズが８×８であり得る。
For example, in FIG. 8, the current block is the upper
図１５に示されるように、１５３０で現在のデブロッキング閾値のサブセットを特定することは、現在の最小変換ブロックサイズに基づいて現在のデブロッキング閾値のサブセットを特定することを含み得るものであって、これは、現在のデブロッキング閾値インデックスに基づいて特定されたデブロッキング閾値のセットであり得る現在のデブロッキング閾値のセットから、現在のデブロッキング閾値のサブセットを特定することを含み得る。 Identifying a subset of the current deblocking thresholds at 1530, as shown in FIG. 15, may include identifying a subset of the current deblocking thresholds based on the current minimum conversion block size. , This may include identifying a subset of the current deblocking thresholds from the current set of deblocking thresholds, which may be the set of deblocking thresholds identified based on the current deblocking threshold index.
例えば、現在のデブロッキング閾値インデックスに基づいて特定された現在のデブロッキング閾値のセットが、それぞれ利用可能な変換ブロックサイズに対応するデブロッキング閾値のサブセットを含み得る場合、１５３０で現在のデブロッキング閾値のサブセットを特定することは、現在のデブロッキング閾値のセットから現在の最小変換ブロックサイズに対応するデブロッキング閾値のサブセットを特定することを含み得る。現在のデブロッキング閾値のサブセットは現在のデブロッキング閾値として特定され得る。例えば、デブロッキング閾値の１つ以上が対応する最小変換ブロックサイズに関連付けられ得る場合、現在の最小変換ブロックサイズに関連付けられたデブロッキング閾値のサブセットが現在のデブロッキング閾値として特定され得る。 For example, if the current set of deblocking thresholds identified based on the current deblocking threshold index can contain a subset of the deblocking thresholds corresponding to each available conversion block size, then at 1530 the current deblocking threshold. Identifying a subset of deblocking thresholds may include identifying a subset of deblocking thresholds corresponding to the current minimum conversion block size from the current set of deblocking thresholds. A subset of the current deblocking threshold can be identified as the current deblocking threshold. For example, if one or more of the deblocking thresholds can be associated with the corresponding minimum conversion block size, then a subset of the deblocking thresholds associated with the current minimum conversion block size can be identified as the current deblocking threshold.
いくつかの実装形態では、現在の方向における最初のブロック境界での最小変換ブロックサイズが現在の方向における現在のブロックに対して反対側のブロック境界での以前に特定された最小変換ブロックサイズと一致し得る場合、反対側のブロック境界をデブロッキングするために特定されたデブロッキング閾値が現在のブロック境界をデブロッキングするためのデブロッキング閾値として特定され得る。いくつかの実装形態では、現在の方向における現在のブロック境界での最小変換ブロックサイズが現在の方向における現在のブロックに対して反対側のブロック境界での以前に特定された最小変換ブロックサイズと相違し得る場合、現在のブロック境界をデブロッキングするためのデブロッキング閾値は反対側のブロック境界をデブロッキングするために特定されたデブロッキング閾値とは別に特定され得る。 In some implementations, the minimum conversion block size at the first block boundary in the current direction is one with the previously identified minimum conversion block size at the block boundary opposite the current block in the current direction. If possible, the deblocking threshold specified to deblock the opposite block boundary can be specified as the deblocking threshold to deblock the current block boundary. In some implementations, the minimum conversion block size at the current block boundary in the current direction differs from the previously identified minimum conversion block size at the block boundary opposite the current block in the current direction. If possible, the deblocking threshold for deblocking the current block boundary may be specified separately from the deblocking threshold specified for deblocking the opposite block boundary.
１５３０で現在のデブロッキング閾値のサブセットを特定することは、現在のブロック境界をデブロッキングするための現在のデブロッキング判定閾値を特定することを含み得る。例えば、１５３０で特定された現在のデブロッキング閾値のサブセットが現在のデブロッキング判定閾値を含み得る場合、現在のデブロッキング判定閾値は現在のデブロッキング閾値のサブセットから特定され得る。 Identifying a subset of the current deblocking thresholds at 1530 may include identifying the current deblocking determination threshold for deblocking the current block boundary. For example, if a subset of the current deblocking thresholds identified in 1530 can include the current deblocking thresholds, the current deblocking thresholds can be identified from a subset of the current deblocking thresholds.
現在のピクセルのセット、グループ、または一群などの現在のピクセルは、１５４０において特定され得る。現在のピクセルは、現在のブロック、現在の方向において現在のブロック境界に沿って現在のブロックに隣接する隣接ブロック、またはその両方からのピクセルを含み得る。例えば、１５１０で特定された現在の方向が垂直であり、現在のブロックがピクセルの列を含み、隣接ブロックが対応するピクセルの列を含み得る場合、１５４０で現在のピクセルを特定することは、現在のブロックの現在の列からの定義済みのカーディナリティ、数、またはカウント（Ｎ）のピクセル（例えば、現在のブロック境界に最も近い現在のブロックの現在の列からのＮピクセルなど）を特定することを含み得るとともに、隣接ブロックの現在の列からの定義済みのカーディナリティのピクセル（例えば、現在のブロック境界に最も近い隣接ブロックの現在の列からのＮピクセルなど）を特定することを含み得る。いくつかの実装形態では、現在のブロックから特定されたピクセルのカーディナリティは、隣接ブロックから特定されたピクセルのカーディナリティと異なり得る。 The current pixel, such as the current set, group, or group of pixels, can be identified at 1540. The current pixel may include pixels from the current block, adjacent blocks adjacent to the current block along the current block boundary in the current direction, or both. For example, if the current orientation identified in 1510 is vertical, the current block may contain a column of pixels, and adjacent blocks may contain a column of corresponding pixels, then identifying the current pixel in 1540 is currently Identifying predefined cardinality, number, or count (N) pixels from the current column of a block (for example, N pixels from the current column of the current block closest to the current block boundary) It can also include identifying pixels of defined cardinality from the current column of adjacent blocks, such as N pixels from the current column of adjacent blocks closest to the current block boundary. In some implementations, the pixel cardinality identified from the current block can differ from the pixel cardinality identified from the adjacent block.
非平坦度係数などのメトリックは、１５５０において決定され得る。非平坦度係数は、特定されたピクセルのセットの平坦度または非平坦度を示し得る。例えば、現在の非平坦度係数は、現在のブロックにおいて特定されたピクセルのセット（１５４０で特定された現在のブロックのピクセルなど）の平坦度を示し得るとともに、隣接する非平坦度係数は、隣接ブロックの対応するピクセルの平坦度または非平坦度を示し得る。例えば、平坦度メトリックまたは係数、あるいは非平坦度メトリックまたは係数は、対応するピクセル間の最大差を示し得る。 Metrics such as the non-flatness factor can be determined at 1550. The non-flatness factor can indicate the flatness or non-flatness of the specified set of pixels. For example, the current non-flatness factor can indicate the flatness of a set of pixels identified in the current block (such as the pixels of the current block identified in 1540), while adjacent non-flatness coefficients are adjacent. It can indicate the flatness or non-flatness of the corresponding pixels of the block. For example, a flatness metric or coefficient, or a non-flatness metric or coefficient, can indicate the maximum difference between the corresponding pixels.
例えば、図９において、現在のブロックが左下ブロック９３０であり、現在のブロック境界が現在のブロック９３０と隣接ブロック９４０（隣接する復号化ブロックであり得る）との間の垂直境界であり得る。現在のブロック９４０の各行についてそれぞれの現在の平坦度係数が特定され得るとともに、隣接ブロック９４０の各行についてそれぞれの隣接平坦度係数が特定され得る。一例では、現在のブロック９３０の上から５行目の現在の平坦度係数は、ｃ０，ｃ１，ｃ２，ｃ３，ｃ４，ｃ５，ｃ６，ｃ７と表示されたピクセルに基づいて特定され得るとともに、隣接ブロック９４０の上から５行目の隣接平坦度係数は、ａ０，ａ１，ａ２，ａ３，ａ４，ａ５，ａ６，ａ７と表示されたピクセルに基づいて特定され得る。
For example, in FIG. 9, the current block may be the lower
一例では、現在のブロック（ｃ）９３０の現在の平坦度係数または非平坦度係数は、ｃ４と表示されたピクセルとｃ７と表示されたピクセルとの差の絶対値、ｃ５と表示されたピクセルとｃ７と表示されたピクセルとの差の絶対値、およびｃ６と表示されたピクセルとｃ７と表示されたピクセルとの差の絶対値のうちの最大値に基づいて特定され、次式のように表され得る。 In one example, the current flatness or non-flatness factor of the current block (c) 930 is the absolute value of the difference between the pixel labeled c4 and the pixel labeled c7, and the pixel labeled c5. It is specified based on the absolute value of the difference between the pixel displayed as c7 and the absolute value of the difference between the pixel displayed as c6 and the pixel displayed as c7. Can be done.
Ｎｆ（ｃ）＝ｍａｘ（｜ｃ４−ｃ７｜，｜ｃ５−ｃ７｜，｜ｃ６−ｃ７｜） ［式１］
隣接ブロック（ａ）の対応する隣接平坦度係数または非平坦度係数は、ａ０と表示されたピクセルとａ１と表示されたピクセルとの差の絶対値、ａ０と表示されたピクセルとａ２と表示されたピクセルとの差の絶対値、およびａ０と表示されたピクセルとａ３と表示されたピクセルとの差の絶対値のうちの最大値に基づいて特定され、次式のように表され得る。
Nf (c) = max (| c4-c7 |, | c5-c7 |, | c6-c7 |) [Equation 1]
The corresponding adjacent flatness coefficient or non-flatness coefficient of the adjacent block (a) is displayed as the absolute value of the difference between the pixel displayed as a0 and the pixel displayed as a1 and the pixel displayed as a0 and a2. It is specified based on the absolute value of the difference between the pixels and the absolute value of the difference between the pixel displayed as a0 and the pixel displayed as a3, and can be expressed by the following equation.
Ｎｆ（ａ）＝ｍａｘ（｜ａ０−ａ１｜，｜ａ０−ａ２｜，｜ａ０−ａ３｜） ［式２］
別の例では、図１０において、現在のブロックが右上ブロック１０２０であり、現在のブロック境界が現在のブロック１０２０と垂直に隣接するブロック１０４０との間の水平境界であり得る。現在のブロック１０２０の各列について現在の平坦度係数が特定され得るとともに、隣接ブロック１０４０の各列について隣接平坦度係数が特定され得る。例えば、現在のブロック１０２０の左から５列目の現在の平坦度係数は、ｃ０，ｃ１，ｃ２，ｃ３，ｃ４，ｃ５，ｃ６，ｃ７と表示されたピクセルに基づいて特定され得るとともに、隣接ブロック１０４０の左から５列目の隣接平坦度係数は、ａ０，ａ１，ａ２，ａ３，ａ４，ａ５，ａ６，ａ７と表示されたピクセルに基づいて特定され得る。
Nf (a) = max (| a0-a1 |, | a0-a2 |, | a0-a3 |) [Equation 2]
In another example, in FIG. 10, the current block may be the upper
図１５に示されるように、現在のデブロッキング判定は１５６０において特定され得る。例えば、１５４０で特定されたピクセルをデブロッキングするかどうかは、１５３０で特定された現在のデブロッキング判定閾値と１５５０で決定された非平坦度係数とに基づいて１５６０で判定され得る。例えば、現在のブロック境界がフレームによってキャプチャされたコンテンツのエッジと一致し得る場合、現在のブロック境界に沿ったピクセルのデブロッキングが省略され得る。別の例では、ブロック境界がフレームによってキャプチャされたコンテンツ内のエッジとは不一致であり得る場合、現在のブロック境界に沿ったピクセルがデブロッキングされ得る。 As shown in FIG. 15, the current deblocking determination can be specified at 1560. For example, whether to deblock the pixels identified at 1540 can be determined at 1560 based on the current deblocking determination threshold identified at 1530 and the non-flatness factor determined at 1550. For example, if the current block boundary can match the edge of the content captured by the frame, deblocking of pixels along the current block boundary can be omitted. In another example, pixels along the current block boundary can be deblocked if the block boundary can be inconsistent with the edges in the content captured by the frame.
現在のブロック境界に沿った現在のブロックにおいて１５４０で特定されたピクセルをデブロッキングするかどうかを判定することは、現在のブロックの現在の行または列について１５５０で特定された現在の非平坦度係数（Ｎｆ（ｃ））が１５３０で特定された現在のデブロッキング判定閾値未満であるかどうかを判定すること、および隣接ブロックの隣接非平坦度係数（Ｎｆ（ａ））が現在のデブロッキング判定閾値未満であるかどうかを判定することを含み得る。 Determining whether to deblock the pixels identified at 1540 in the current block along the current block boundary is the current non-flatness factor identified at 1550 for the current row or column of the current block. It is determined whether (Nf (c)) is less than the current deblocking determination threshold specified in 1530, and the adjacent non-flatness coefficient (Nf (a)) of the adjacent block is the current deblocking determination threshold. It may include determining if it is less than.
例えば、現在のブロックの現在の行または列の現在の非平坦度係数（Ｎｆ（ａ））がデブロッキング判定閾値未満であり、隣接ブロックの現在の行または列の隣接非平坦度係数（Ｎｆ（ａ））がデブロッキング判定閾値未満であり得る場合、現在のブロック境界の現在の行または列についてデブロッキングすることを示す判定が特定され得る。 For example, the current non-flatness coefficient (Nf (a)) of the current row or column of the current block is less than the deblocking determination threshold, and the adjacent non-flatness coefficient (Nf (Nf)) of the current row or column of the adjacent block. If a)) can be less than the deblocking determination threshold, a determination indicating deblocking can be identified for the current row or column of the current block boundary.
別の例では、現在のブロックの現在の行または列の現在の非平坦度係数（Ｎｆ（ａ））がデブロッキング判定閾値未満であり、隣接ブロックの現在の行または列の隣接非平坦度係数（Ｎｆ（ａ））が少なくともデブロッキング判定閾値（デブロッキング判定閾値以上など）であり得る場合、現在のブロック境界の現在の行または列についてのデブロッキングを省略することを示す判定が特定され得る。 In another example, the current unflatness coefficient (Nf (a)) of the current row or column of the current block is less than the deblocking determination threshold and the adjacent unflatness coefficient of the current row or column of the adjacent block. If (Nf (a)) can be at least a deblocking determination threshold (such as greater than or equal to the deblocking determination threshold), a determination indicating that deblocking for the current row or column of the current block boundary can be specified. ..
別の例では、現在のブロックの現在の行または列の現在の非平坦度係数（Ｎｆ（ａ））が少なくともデブロッキング判定閾値（デブロッキング判定閾値以上など）であり、隣接ブロックの現在の行または列の隣接非平坦度係数（Ｎｆ（ａ））がデブロッキング判定閾値未満であり得る場合、現在のブロック境界の現在の行または列についてのデブロッキングを省略することを示す判定が特定され得る。 In another example, the current non-flatness coefficient (Nf (a)) of the current row or column of the current block is at least the deblocking threshold (such as greater than or equal to the deblocking threshold) and the current row of adjacent blocks. Alternatively, if the column adjacency non-flatness coefficient (Nf (a)) can be less than the deblocking determination threshold, a determination indicating that deblocking for the current row or column of the current block boundary can be specified. ..
別の例では、現在のブロックの現在の行または列の現在の非平坦度係数（Ｎｆ（ａ））が少なくともデブロッキング判定閾値（デブロッキング判定閾値以上など）であり、隣接ブロックの現在の行または列の隣接非平坦度係数（Ｎｆ（ａ））が少なくともデブロッキング判定閾値（デブロッキング判定閾値以上など）であり得る場合、現在のブロック境界の現在の行または列についてのデブロッキングを省略することを示す判定が特定され得る。 In another example, the current non-flatness coefficient (Nf (a)) of the current row or column of the current block is at least the deblocking threshold (such as greater than or equal to the deblocking threshold) and the current row of adjacent blocks. Alternatively, if the column adjacency non-flatness coefficient (Nf (a)) can be at least a deblocking determination threshold (such as greater than or equal to the deblocking determination threshold), deblocking the current row or column of the current block boundary is omitted. A judgment indicating that can be specified.
１５６０で特定されたデブロッキング判定は１５４０で特定されたピクセルについてデブロッキングすることを示し得るものであり、１５４０で特定されたピクセルをデブロッキングする際のデブロッキングフィルタ、デブロッキングフィルタタイプ、デブロッキングフィルタ強度、またはそれらの組み合わせなどのデブロッキングパラメータまたはデブロッキングフィルタパラメータが１５７０において特定され得る。デブロッキングパラメータを特定することは、デブロッキング判定閾値とは異なり得る１つまたは複数のデブロッキングフィルタ閾値を現在のデブロッキング閾値のサブセットから特定すること、および特定されたデブロッキングフィルタ閾値に基づいてデブロッキングパラメータを特定することを含み得る。例えば、デブロッキングフィルタ閾値は、予測モード、動きベクトルの一貫性、変換ブロックサイズ、変換ブロックタイプなどに基づいて特定または調整され得る。 The deblocking determination specified in 1560 can indicate that the pixel specified in 1540 is deblocked, and the deblocking filter, deblocking filter type, and deblocking when deblocking the pixel specified in 1540. Deblocking or deblocking filter parameters such as filter strength, or a combination thereof, can be specified at 1570. Identifying the deblocking parameter identifies one or more deblocking filter thresholds that may differ from the deblocking determination threshold from a subset of the current deblocking thresholds, and is based on the identified deblocking filter thresholds. It may include specifying deblocking parameters. For example, the deblocking filter threshold can be specified or adjusted based on prediction mode, motion vector consistency, transformation block size, transformation block type, and the like.
現在のブロック境界をデブロッキングすることは、１５６２および１５７２の破線矢印で示されるように、現在のブロックの各行または各列について１５４０でピクセルを特定すること、現在のブロックの各行または各列について１５５０で非平坦度係数を決定すること、現在のブロックの各行または各列について１５６０でデブロッキングするかどうかを判定すること、現在のブロックの各行または各列について１５７０でデブロッキングパラメータを特定すること、またはそれらの組み合わせを含み得る。 Deblocking the current block boundary is identifying pixels at 1540 for each row or column of the current block, as indicated by the dashed arrows in 1562 and 1572, and 1550 for each row or column of the current block. Determining the non-flatness coefficient with, determining whether to deblock at 1560 for each row or column of the current block, identifying the deblocking parameter at 1570 for each row or column of the current block, Or they may include a combination thereof.
現在の方向において現在のブロックをデブロッキングすることは、１５７４の破線矢印で示されるように、現在の方向について１５２０で各ブロック境界を特定すること、それぞれのブロック境界毎に、対応するブロック境界について１５３０で現在のデブロッキング閾値のサブセットを特定すること、対応するブロック境界における現在のブロックの各行または各列について１５４０でピクセルを特定すること、対応するブロック境界における現在のブロックの各行または各列について１５５０で非平坦度係数を決定すること、対応するブロック境界における現在のブロックの各行または各列について１５６０でデブロッキングするかどうかを判定すること、対応するブロック境界における現在のブロックの各行または各列について１５７０でデブロッキングパラメータを特定すること、またはそれらの組み合わせを含み得る。 Deblocking the current block in the current direction means identifying each block boundary at 1520 for the current direction, as indicated by the dashed arrow in 1574, for each block boundary, and for the corresponding block boundary. Identifying a subset of the current deblocking thresholds at 1530, identifying pixels at 1540 for each row or column of the current block at the corresponding block boundary, for each row or column of the current block at the corresponding block boundary. Determining the non-flatness coefficient at 1550, determining whether to deblock at 1560 for each row or column of the current block at the corresponding block boundary, each row or column of the current block at the corresponding block boundary The deblocking parameters can be specified at 1570, or combinations thereof can be included.
現在のブロックをデブロッキングすることは、１５７６の破線矢印で示されるように、１５１０で各方向を特定すること、それぞれの方向毎に、対応する方向について１５２０で各ブロック境界を特定すること、それぞれのブロック境界毎に、対応するブロック境界について１５３０で現在のデブロッキング閾値のサブセットを特定すること、対応するブロック境界における現在のブロックの各行または各列について１５４０でピクセルを特定すること、対応するブロック境界における現在のブロックの各行または各列について１５５０で非平坦度係数を決定すること、対応するブロック境界における現在のブロックの各行または各列について１５６０でデブロッキングするかどうかを判定すること、対応するブロック境界における現在のブロックの各行または各列について１５７０でデブロッキングパラメータを特定すること、またはそれらの組み合わせを含み得る。 Deblocking the current block means identifying each direction at 1510, as indicated by the dashed arrow at 1576, and identifying each block boundary at 1520 for each direction and for the corresponding direction. For each block boundary of, identify a subset of the current deblocking thresholds at 1530 for the corresponding block boundary, identify pixels at 1540 for each row or column of the current block at the corresponding block boundary, the corresponding block. Determining the non-flatness coefficient at 1550 for each row or column of the current block at the boundary, determining whether to deblock at 1560 for each row or column of the current block at the corresponding block boundary, corresponding Deblocking parameters may be specified at 1570 for each row or column of the current block at the block boundary, or a combination thereof.
図１６は、本開示の実装形態によるデュアルデブロッキングフィルタ閾値を用いた復号化１６００の例のフローチャート図である。デュアルデブロッキングフィルタ閾値を用いた復号化１６００は、図５に示されたデコーダ５００などのデコーダで実行され得る。
FIG. 16 is a flowchart of an example of
デュアルデブロッキングフィルタ閾値を用いた復号化１６００は、１６１０において符号化フレームを特定すること、１６２０において復号化フレームを生成すること、１６３０においてデブロッキング閾値インデックスを特定すること、１６４０において再構成フレームを生成すること、１６５０において再構成フレームを出力すること、またはそれらの任意の組み合わせを含み得る。 Decoding 1600 using the dual deblocking filter threshold identifies the coded frame at 1610, generates the decoded frame at 1620, identifies the deblocking threshold index at 1630, and identifies the reconstructed frame at 1640. It may include generating, outputting reconstructed frames at 1650, or any combination thereof.
符号化フレームは１６１０において特定され得る。例えば、デコーダは、符号化ビットストリームを受信またはそれにアクセスし得るとともに、その符号化ビットストリームまたはその一部から符号化フレームを特定し得る。 The coded frame can be specified at 1610. For example, the decoder may receive or access the coded bitstream and may identify the coded frame from the coded bitstream or a portion thereof.
復号化フレームは１６２０において生成され得る。例えば、復号化フレームは、１６１０で特定された符号化フレームを復号化することによって生成され得る。復号化フレームを生成することは、復号化ブロックを生成することを含み得る。復号化ブロックを生成することは、符号化ビットストリームの一部を復号化することを含み得る。 Decrypted frames can be generated at 1620. For example, the decoding frame can be generated by decoding the coded frame identified in 1610. Generating a decrypted frame can include generating a decrypted block. Generating a decryption block can include decoding part of a coded bitstream.
デブロッキング閾値インデックスは、１６３０において特定され得る。例えば、デブロッキング閾値インデックスは、現在の（再構成または復号化）フレームに関連付けられたまたはそれに対応するフレームヘッダなどの符号化ビットストリームからデブロッキング閾値インデックスをデコード、読み取り、または抽出することによって特定され得る。 The deblocking threshold index can be specified at 1630. For example, the deblocking threshold index is identified by decoding, reading, or extracting the deblocking threshold index from a coded bitstream such as the frame header associated with or corresponding to the current (reconstructed or decrypted) frame. Can be done.
デブロッキング閾値インデックスを特定することは、符号化ビットストリームから第１のデブロッキング閾値インデックスを特定すること、符号化ビットストリームから第２のデブロッキング閾値インデックスを特定すること、またはその両方を含み得る。例えば、デブロッキング閾値インデックスを特定することは、水平または垂直などの第１の方向に現在のフレームをデブロッキングするための第１のデブロッキング閾値インデックスを特定すること、および垂直または水平などの第２の方向に現在のフレームをデブロッキングするための第２のデブロッキング閾値インデックスを特定することを含み得る。 Identifying the deblocking threshold index may include identifying the first deblocking threshold index from the encoded bitstream, identifying the second deblocking threshold index from the encoded bitstream, or both. .. For example, identifying a deblocking threshold index identifies a first deblocking threshold index for deblocking the current frame in a first direction, such as horizontal or vertical, and a first, such as vertical or horizontal. It may include identifying a second deblocking threshold index for deblocking the current frame in two directions.
いくつかの実装形態では、第２のデブロッキング閾値インデックスを特定することは、符号化ビットストリームから差分デブロッキング閾値インデックス値などの第２のデブロッキング閾値インデックスを示す情報を抽出すること、および差分デブロッキング閾値インデックス値と第１のデブロッキング閾値インデックスとの合計を第２のデブロッキング閾値インデックスとして特定することを含み得る。いくつかの実装形態では、第２のデブロッキング閾値インデックスを特定することは、第２のデブロッキング閾値インデックスを示す情報が差分デブロッキング閾値インデックス値を含むと判定することを含み得る。 In some embodiments, identifying the second deblocking threshold index extracts information indicating the second deblocking threshold index, such as the differential deblocking threshold index value, from the encoded bitstream, and the difference. It may include specifying the sum of the deblocking threshold index value and the first deblocking threshold index as the second deblocking threshold index. In some implementations, identifying a second deblocking threshold index may include determining that the information indicating the second deblocking threshold index includes a differential deblocking threshold index value.
再構成フレームは、１６４０において生成され得る。再構成フレームを生成することは、復号化フレームをデブロッキングすること（これにより、再構成ブロックを生成することを含み得る）、および再構成ブロックをデブロッキングすることを含み得る。 Reconstruction frames can be generated at 1640. Generating a reconstructed frame may include deblocking the decrypted frame (which may include generating a reconstructed block) and deblocking the reconstructed block.
復号化フレームをデブロッキングすることは、フレームの各復号化ブロックをデブロッキングすることを含み得るものであって、これは、フレームの各復号化ブロックを特定すること、および、各復号化ブロックをデブロッキングすることによって対応する再構成ブロックを生成することを含み得るものであり、これらは、本明細書で説明されているかもしくは文脈から明らかである場合を除いて、図１４において１４１０で示されたブロック特定および図１４において１４２０で示されたブロック再構成と同様であり得る。現在のブロックをデブロッキングすることは、本明細書で説明されているかもしくは文脈から明らかである場合を除いて、図１５に示されたデブロッキングと同様であり得る。例えば、各再構成ブロックは、第１のデブロッキング閾値インデックスおよび第２のデブロッキング閾値インデックスに基づいて対応する復号化ブロックをデブロッキングすることによって生成され得る。再構成ブロックは、再構成フレームに含まれ得る。 Deblocking a decrypted frame can include deblocking each decrypted block of the frame, which identifies each decrypted block of the frame and deblocking each decrypted block. Deblocking may include generating the corresponding reconstituted blocks, which are shown at 1410 in FIG. 14 unless as described herein or as is apparent from the context. It can be similar to the block identification and block reconstruction shown in 1420 in FIG. Deblocking the current block can be similar to the deblocking shown in FIG. 15, except as described herein or as is apparent from the context. For example, each reconstruction block can be generated by deblocking the corresponding decoding block based on the first deblocking threshold index and the second deblocking threshold index. The reconstruction block can be included in the reconstruction frame.
例えば、第１のデブロッキング閾値インデックスが垂直デブロッキング閾値インデックスであり得る場合、再構成フレームを生成することは、第１のデブロッキング閾値インデックスに基づく垂直デブロッキングと、第２のデブロッキング閾値インデックスに基づく水平デブロッキングとを含み得る。別の例では、第１のデブロッキング閾値インデックスが水平デブロッキング閾値インデックスであり得る場合、再構成フレームを生成することは、第１のデブロッキング閾値インデックスに基づく水平デブロッキングと、第２のデブロッキング閾値インデックスに基づく垂直デブロッキングとを含み得る。 For example, if the first deblocking threshold index can be a vertical deblocking threshold index, then generating a reconstructed frame can be a vertical deblocking based on the first deblocking threshold index and a second deblocking threshold index. Can include horizontal deblocking based on. In another example, if the first deblocking threshold index can be a horizontal deblocking threshold index, then generating a reconstructed frame is a horizontal deblocking based on the first deblocking threshold index and a second deblocking. It may include vertical deblocking based on the blocking threshold index.
第１の方向にデブロッキングすることは、第１のデブロッキング閾値インデックスに基づいて復号化フレームを第１の方向にデブロッキングすることにより部分デブロッキングフレームを生成することを含み得る。第２の方向にデブロッキングすることは、第２のデブロッキング閾値インデックスに基づいて部分デブロッキングフレームを第２の方向にデブロッキングすることにより再構成フレームを生成することを含み得る。 Deblocking in the first direction may include generating a partial deblocking frame by deblocking the decoded frame in the first direction based on the first deblocking threshold index. Deblocking in the second direction may include generating a reconstructed frame by deblocking the partial deblocking frame in the second direction based on the second deblocking threshold index.
第１の方向または第２の方向にデブロッキングすることは、対応する（現在の）デブロッキング閾値インデックスに基づいて複数のデブロッキング閾値のセットから現在のデブロッキング閾値（１つのデブロッキング閾値のセットを含み得る）を特定することを含み得る。例えば、デコーダ、またはデコーダのデブロッキング閾値特定ユニットは、デブロッキング閾値のセットを含むテーブル（デコーダのメモリに記憶されたテーブル、もしくはデコーダがアクセス可能なテーブルなど）または他のデータ記憶構造からの読み出しを行い得るかもしくはそれにアクセスし得るとともに、第１のデブロッキング閾値インデックスに対応する第１のデブロッキング閾値のセットと、第２のデブロッキング閾値インデックスに対応する第２のデブロッキング閾値のセットとを特定し得る。 Deblocking in the first or second direction is a set of current deblocking thresholds (one set of deblocking thresholds) from a set of multiple deblocking thresholds based on the corresponding (current) deblocking threshold index. Can include) to specify. For example, a decoder, or a decoder's deblocking threshold-specific unit, reads from a table containing a set of deblocking thresholds (such as a table stored in the decoder's memory or a table accessible to the decoder) or other data storage structure. A set of first deblocking thresholds corresponding to a first deblocking threshold index and a set of second deblocking thresholds corresponding to a second deblocking threshold index, as well as being able to or access to Can be identified.
再構成フレームは、１６５０において出力され得る。例えば、再構成フレームは、ユーザに対する保存または提示用に、図５に示された出力ビデオストリーム５０４などの出力ビデオストリーム内に含まれ得る。
The reconstructed frame can be output at 1650. For example, the reconstructed frame may be included in an output video stream, such as the
本明細書において「例」または「実装形態」という用語は、例、事例、または例証であることを意味するために使用される。本明細書において「例」または「実装形態」と記載された任意の態様または設計は、必ずしも他の態様または設計に対して好ましいまたは有利であるとして解釈されるべきではない。むしろ、「例」または「実装形態」という言葉の使用は、具体的な方法で概念を提示することを意図している。本出願で使用される用語「または」は、排他的な「または」ではなく、包括的な「または」を意味することが意図される。すなわち、他に明記されていない限り、または文脈から明らかでない限り、「ＸはＡまたはＢを含む」とは、任意の自然な包含的置換（natural inclusive permutations）を意味することを意図する。すなわち、「ＸはＡまたはＢを含む」は、ＸがＡを含む場合、ＸがＢを含む場合、ＸがＡおよびＢの両方を含む場合のいずれも満たす。さらに、本出願および添付の特許請求の範囲で使用される「１つ」は、他に明記されない限り、または単数形に向けられる文脈から明らかでない限り、「１つまたは複数」を意味すると一般に解釈されるべきである。さらに、「実装形態」または「一実装形態」という用語の使用は、そのように記載されない限り、同じ実施形態または実装形態を意味することを意図するものではない。本明細書で使用される「決定する」および「特定する」という用語、またはその変形語は、図１に示された複数のデバイスのうちの１つ以上を用いて、選択、確認、計算、検索、受信、決定、確立、取得、または、その他の方法で特定または決定することを含み得る。 As used herein, the term "example" or "implementation" is used to mean an example, case, or illustration. Any aspect or design described herein as an "example" or "implementation" should not necessarily be construed as preferred or advantageous over other aspects or designs. Rather, the use of the term "example" or "implementation" is intended to present the concept in a concrete way. The term "or" as used in this application is intended to mean a comprehensive "or" rather than an exclusive "or". That is, unless otherwise stated or as clear from the context, "X includes A or B" is intended to mean any natural inclusive permutations. That is, "X contains A or B" satisfies all of the cases where X contains A, X contains B, and X contains both A and B. Further, as used in this application and the appended claims, "one" is generally construed to mean "one or more" unless otherwise specified or clear from the context directed to the singular. It should be. Moreover, the use of the terms "implementation" or "one implementation" is not intended to mean the same embodiment or implementation unless otherwise stated. The terms "determine" and "identify", or variants thereof, as used herein are selected, confirmed, calculated, using one or more of the plurality of devices shown in FIG. It may include searching, receiving, determining, establishing, acquiring, or otherwise identifying or determining.
さらに、説明を簡単にするために、図および本明細書での説明は、シーケンスまたは一連のステップまたは段階を含み得るが、本明細書に開示される方法の要素は、様々な順序でおよび／または同時に起こり得る。また、本明細書に開示された方法の要素は、本明細書に明示的に提示および説明されていない他の要素とともに生じ得る。さらに、本明細書で説明される方法の１つまたは複数の要素が、開示された主題による方法の実装形態から省略されてもよい。 Further, for the sake of brevity, the figures and description herein may include sequences or series of steps or steps, but the elements of the methods disclosed herein are in various orders and /. Or it can happen at the same time. Also, the elements of the method disclosed herein can occur with other elements not expressly presented and described herein. In addition, one or more elements of the method described herein may be omitted from the disclosed subject matter implementation of the method.
送信コンピューティングおよび通信デバイス１００Ａおよび／または受信コンピューティングおよび通信デバイス１００Ｂの実装（さらにはそれに記憶されるおよび／またはそれによって実行されるアルゴリズム、方法、命令など）は、ハードウェア、ソフトウェア、または任意の組み合わせで実現することができる。ハードウェアは、例えば、コンピュータ、知的財産（ＩＰ）コア、特定用途向け集積回路（ＡＳＩＣ）、プログラマブル論理アレイ、光プロセッサ、プログラマブルロジックコントローラ、マイクロコード、マイクロコントローラ、サーバ、マイクロプロセッサ、デジタル信号プロセッサ、または他の適切な回路を含むことができる。特許請求の範囲において、「プロセッサ」という用語は、前述のハードウェアのいずれかを単独でまたは組み合わせて含むものとして理解されるべきである。「信号」および「データ」という用語は互換的に使用される。さらに、送信コンピューティングおよび通信デバイス１００Ａおよび受信コンピューティングおよび通信デバイス１００Ｂの部分は、必ずしも同様に実装される必要はない。
Implementations of transmit computing and
さらに、一実装形態では、例えば、送信コンピューティングおよび通信デバイス１００Ａまたは受信コンピューティングおよび通信デバイス１００Ｂは、その実行時に、本明細書に記載された各方法、アルゴリズム、および／または命令のいずれかを実行するコンピュータプログラムを使用して実装することができる。追加的または代替的に、例えば、本明細書に記載された方法、アルゴリズム、または命令のいずれかを実行するための専用ハードウェアを含み得る専用コンピュータ／プロセッサを利用することができる。
Further, in one implementation, for example, the transmit computing and
送信コンピューティングおよび通信デバイス１００Ａおよび受信コンピューティングおよび通信デバイス１００Ｂは、例えば、リアルタイムビデオシステムのコンピュータ上で実装することができる。あるいは、送信コンピューティングおよび通信デバイス１００Ａはサーバに実装され得る一方、受信コンピューティングおよび通信デバイス１００Ｂはハンドヘルド通信デバイスなどのサーバとは別のデバイスに実装され得る。この場合、送信コンピューティングおよび通信デバイス１００Ａは、エンコーダ４００を使用してコンテンツを符号化ビデオ信号に符号化し、その符号化ビデオ信号を通信デバイスに送信することができる。そして、通信デバイスは、デコーダ５００を使用して符号化ビデオ信号を復号化することができる。あるいは、通信デバイスは、通信デバイス上にローカルに記憶されたコンテンツ、例えば、送信コンピューティングおよび通信デバイス１００Ａによって送信されなかったコンテンツを復号化することができる。他の適切な送信コンピューティングおよび通信デバイス１００Ａおよび受信コンピューティングおよび通信デバイス１００Ｂの実装スキームが利用可能である。例えば、受信コンピューティングおよび通信デバイス１００Ｂは、ポータブル通信デバイスではなく、概して設置型のパーソナルコンピュータであってもよく、および／またはエンコーダ４００を含むデバイスがデコーダ５００を含んでもよい。
The transmit computing and
さらに、本開示の実装形態の全部または一部は、例えば有形のコンピュータ使用可能またはコンピュータ可読媒体からアクセス可能なコンピュータプログラム製品の形態を取ることができる。コンピュータ使用可能またはコンピュータ可読媒体は、例えば、任意のプロセッサによって、またはそれに関連して使用するために、プログラムを有形的に収容、記憶、通信、または輸送することができる任意のデバイスであり得る。媒体は、例えば、電子、磁気、光学、電磁気、または半導体デバイスであり得る。他の適切な媒体も利用可能である。 In addition, all or part of the embodiments of the present disclosure may take the form of computer program products accessible from, for example, tangible computer-enabled or computer-readable media. A computer-enabled or computer-readable medium can be, for example, any device that can tangibly contain, store, communicate, or transport a program for use by or in connection with any processor. The medium can be, for example, an electronic, magnetic, optical, electromagnetic, or semiconductor device. Other suitable media are also available.
上記の実装形態は、本出願の容易な理解を可能にするために説明されたものであり限定的なものではない。一方、本開示は、添付の特許請求の範囲内に含まれる様々な変形および均等の構成を包含することを意図しており、その範囲は、法律で許容されるようなすべての変形および均等の構造を包含するように最も広い解釈が与えられるべきである。 The above implementation is described for the sake of easy understanding of the present application and is not limiting. The disclosure, on the other hand, is intended to include the various modifications and equal configurations contained within the appended claims, the scope of which is all modifications and equalities as permitted by law. The broadest interpretation should be given to embrace the structure.
Claims (16)
非一時的なコンピュータ可読媒体に記憶された命令を実行するプロセッサによって符号化ビットストリームを復号化することにより再構成フレームを生成すること、
前記再構成フレームを出力すること、を備え、
前記復号化することが、
前記符号化ビットストリームの一部を復号化することによって復号化ブロックを生成すること、
前記符号化ビットストリームから第１のデブロッキング閾値インデックスであって、第１の定義済みのデブロッキング閾値のセットを示す第１のデブロッキング閾値インデックスを特定すること、
前記符号化ビットストリームから第２のデブロッキング閾値インデックスであって、第２の定義済みのデブロッキング閾値のセットを示す第２のデブロッキング閾値インデックスを特定すること、
前記復号化ブロックに基づいて再構成ブロックを生成することであって、前記第１の定義済みのデブロッキング閾値のセットと前記第２の定義済みのデブロッキング閾値のセットとに基づいてデブロッキングすることを含む、前記再構成ブロックを生成すること、
前記再構成ブロックを前記再構成フレーム内に含めること、
を含み、
前記再構成フレームを生成することにおいて、
前記第１のデブロッキング閾値インデックスが垂直デブロッキング閾値インデックスである場合におけるデブロッキングが、前記第１のデブロッキング閾値インデックスに基づく垂直デブロッキングと、前記第２のデブロッキング閾値インデックスに基づく水平デブロッキングとを含み、
前記第１のデブロッキング閾値インデックスが水平デブロッキング閾値インデックスである場合におけるデブロッキングが、前記第１のデブロッキング閾値インデックスに基づく水平デブロッキングと、前記第２のデブロッキング閾値インデックスに基づく垂直デブロッキングとを含み、
前記デブロッキングすることが、現在のデブロッキング閾値インデックスに基づいて現在のデブロッキング閾値を特定することを含み、
前記現在のデブロッキング閾値インデックスが前記第１のデブロッキング閾値インデックスである場合に、前記現在のデブロッキング閾値が前記第１の定義済みのデブロッキング閾値のセットのうちの第１のデブロッキング閾値であり、
前記現在のデブロッキング閾値インデックスが前記第２のデブロッキング閾値インデックスである場合に、前記現在のデブロッキング閾値が前記第２の定義済みのデブロッキング閾値のセットのうちの第２のデブロッキング閾値であり、
前記現在のデブロッキング閾値を特定することが、
前記現在のデブロッキング閾値インデックスに基づいて複数のデブロッキング閾値から現在のデブロッキング閾値のセットを特定すること、
現在の方向における前記復号化ブロックの現在のブロック境界に対応する現在の最小変換ブロックサイズを特定すること、
前記現在の最小変換ブロックサイズに基づいて、前記現在のデブロッキング閾値のセットからデブロッキング閾値のサブセットを前記現在のデブロッキング閾値として特定すること、を含み、
前記現在のデブロッキング閾値インデックスが前記第１のデブロッキング閾値インデックスである場合、前記現在のデブロッキング閾値のセットは、前記第１の定義済みのデブロッキング閾値のセットであり、
前記現在のデブロッキング閾値インデックスが前記第２のデブロッキング閾値インデックスである場合、前記現在のデブロッキング閾値のセットは、前記第２の定義済みのデブロッキング閾値のセットである、方法。 It's a method
Generating a reconstructed frame by decoding an encoded bitstream with a processor that executes instructions stored on a non-transitory computer-readable medium,
To output the reconstructed frame,
The decoding can be
Generating a decryption block by decoding a portion of the coded bitstream,
Identifying a first deblocking threshold index from the coded bitstream that is a first deblocking threshold index and indicates a first defined set of deblocking thresholds.
Identifying a second deblocking threshold index from the coded bitstream that is a second deblocking threshold index and indicates a second defined set of deblocking thresholds.
Generating a reconstruction block based on the decoding block, which deblocks based on the first set of defined deblocking thresholds and the second set of defined deblocking thresholds. To generate the reconstructed block, including
Including the reconstruction block in the reconstruction frame,
Including
In generating the reconstruction frame,
When the first deblocking threshold index is a vertical deblocking threshold index, the deblocking is vertical deblocking based on the first deblocking threshold index and horizontal deblocking based on the second deblocking threshold index. Including and
When the first deblocking threshold index is the horizontal deblocking threshold index, the deblocking is horizontal deblocking based on the first deblocking threshold index and vertical deblocking based on the second deblocking threshold index. viewing including the door,
The deblocking involves identifying the current deblocking threshold based on the current deblocking threshold index.
When the current deblocking threshold index is the first deblocking threshold index, the current deblocking threshold is at the first deblocking threshold of the first defined set of deblocking thresholds. can be,
When the current deblocking threshold index is the second deblocking threshold index, the current deblocking threshold is at the second deblocking threshold of the second defined set of deblocking thresholds. can be,
Identifying the current deblocking threshold
Identifying the current set of deblocking thresholds from multiple deblocking thresholds based on the current deblocking threshold index,
Identifying the current minimum conversion block size that corresponds to the current block boundary of the decrypted block in the current direction,
Including identifying a subset of the deblocking thresholds as the current deblocking thresholds from the current set of deblocking thresholds based on the current minimum conversion block size.
When the current deblocking threshold index is the first deblocking threshold index, the current set of deblocking thresholds is the set of the first defined deblocking thresholds.
The method, wherein the current deblocking threshold index is the second defined deblocking threshold set when the current deblocking threshold index is the second deblocking threshold index.
前記符号化ビットストリームから差分デブロッキング閾値インデックス値を特定すること、
前記差分デブロッキング閾値インデックス値と前記第１のデブロッキング閾値インデックスとの合計を前記第２のデブロッキング閾値インデックスとして特定すること、
を含む、請求項１または２に記載の方法。 Identifying the second deblocking threshold index can be
Identifying the differential deblocking threshold index value from the coded bitstream,
Specifying the sum of the differential deblocking threshold index value and the first deblocking threshold index as the second deblocking threshold index.
The method according to claim 1 or 2, wherein the method comprises.
前記現在の最小変換ブロックサイズが前記現在のブロック境界と反対側の前記復号化ブロックの第２のブロック境界の第２の最小変換ブロックサイズとは異なると判定したことに応じて、前記現在のデブロッキング閾値が前記第２のブロック境界のデブロッキング閾値とは異なるように前記現在のデブロッキング閾値を特定すること、
前記現在の最小変換ブロックサイズが前記第２の最小変換ブロックサイズに等しいと判定したことに応じて、前記第２のブロック境界のデブロッキング閾値を前記現在のデブロッキング閾値として特定すること、を含む、請求項１に記載の方法。 Identifying the current deblocking threshold
The current threshold is determined in response to the determination that the current minimum conversion block size is different from the second minimum conversion block size of the second block boundary of the decoding block on the opposite side of the current block boundary. Identifying the current deblocking threshold such that the blocking threshold is different from the deblocking threshold of the second block boundary.
Including determining the deblocking threshold of the second block boundary as the current deblocking threshold in response to determining that the current minimum conversion block size is equal to the second minimum conversion block size. , The method according to claim 1.
現在のデブロッキング判定が前記現在のブロック境界をデブロッキングすることを示していることに応じて、前記現在のブロック境界をデブロッキングすること、
前記現在のデブロッキング判定を生成することであって、
前記現在の方向に沿った前記復号化ブロックのピクセル値に基づいて現在の平坦度係数を特定すること、
前記現在の平坦度係数が前記現在のデブロッキング閾値に基づくデブロッキング判定閾値を超えていると判定したことに応じて、前記現在のデブロッキング判定をデブロッキングの省略を示すものとして特定すること、
前記現在の方向に沿った隣接する復号化ブロックのピクセル値に基づいて隣接平坦度係数を特定すること、
前記隣接平坦度係数が前記デブロッキング判定閾値を超えていると判定したことに応じて、前記現在のデブロッキング判定をデブロッキングの省略を示すものとして特定すること、
前記現在の平坦度係数が前記デブロッキング判定閾値内にあり、かつ前記隣接平坦度係数が前記デブロッキング判定閾値内にあると判定したことに応じて、前記現在のデブロッキング判定を、デブロッキングすることを示すものとして特定すること、
によって前記現在のデブロッキング判定を生成すること
を含む、請求項１または４に記載の方法。 The deblocking can be
Deblocking the current block boundary, depending on that the current deblocking determination indicates that the current block boundary is deblocking.
To generate the current deblocking determination,
Identifying the current flatness factor based on the pixel values of the decoding block along the current direction,
Identifying the current deblocking determination as indicating omission of deblocking in response to the determination that the current flatness coefficient exceeds the deblocking determination threshold based on the current deblocking threshold.
Identifying the adjacency flatness factor based on the pixel values of adjacent decoding blocks along the current direction,
Identifying the current deblocking determination as indicating omission of deblocking in response to the determination that the adjacent flatness coefficient exceeds the deblocking determination threshold.
The current deblocking determination is deblocked in response to the determination that the current flatness coefficient is within the deblocking determination threshold and the adjacent flatness coefficient is within the deblocking determination threshold. To identify as an indication of that,
The method of claim 1 or 4 , comprising generating the current deblocking determination by.
前記デブロッキング閾値のサブセットからデブロッキングフィルタ閾値を特定すること、
前記デブロッキングフィルタ閾値に従って、デブロッキングフィルタパラメータを用いて前記現在のブロック境界をデブロッキングすること、を含む、請求項４または５に記載の方法。 Deblocking the current block boundary can
Identifying the deblocking filter threshold from the subset of the deblocking threshold,
Wherein the deblocking filter threshold therefore be deblocking the current block boundary using the deblocking filter parameters, including A method according to claim 4 or 5.
非一時的なコンピュータ可読媒体に記憶された命令を実行するプロセッサによって入力フレームを符号化することにより符号化フレームを生成することであって、
前記符号化フレームを復号化することによって復号化フレームを生成すること、
前記復号化フレームを再構成することによって再構成フレームを生成することであって、
前記復号化フレームをデブロッキングするための複数のデブロッキング閾値インデックスから共有デブロッキング閾値インデックスであって、第１の定義済みのデブロッキング閾値のセットを特定する共有デブロッキング閾値インデックスを特定すること、
前記複数のデブロッキング閾値インデックスから第１のデブロッキング閾値インデックスであって、第２の定義済みのデブロッキング閾値のセットを特定する第１のデブロッキング閾値インデックスを特定することであって、前記復号化フレームをデブロッキングするために前記共有デブロッキング閾値インデックスを第２のデブロッキング閾値インデックスとして使用することを含む、前記第１のデブロッキング閾値インデックスを特定すること、
前記複数のデブロッキング閾値インデックスから前記第２のデブロッキング閾値インデックスであって、第３の定義済みのデブロッキング閾値のセットを特定する前記第２のデブロッキング閾値インデックスを特定することであって、前記復号化フレームをデブロッキングするために前記第１のデブロッキング閾値インデックスを使用することを含む、前記第２のデブロッキング閾値インデックスを特定すること、
を含む前記復号化フレームを再構成すること、
前記符号化フレームと、前記第１のデブロッキング閾値インデックスの表示と、前記第２のデブロッキング閾値インデックスの表示とを含む出力ビットストリームを生成すること、
を含む前記符号化すること、
前記出力ビットストリームを出力すること、
を備え、
前記再構成フレームを生成することが、
前記符号化フレームから符号化ブロックをデコードすることによって復号化ブロックを生成すること、
前記復号化ブロックに基づいて再構成ブロックを生成することであって、前記第１のデブロッキング閾値インデックスと前記第２のデブロッキング閾値インデックスとに基づいてデブロッキングすることを含む、前記再構成ブロックを生成すること、
前記再構成フレーム内に前記再構成ブロックを含めること、
を含み、
前記符号化することにおいて、
前記第１のデブロッキング閾値インデックスが垂直デブロッキング閾値インデックスである場合におけるデブロッキングが、前記第１のデブロッキング閾値インデックスに基づく垂直デブロッキングと、前記第２のデブロッキング閾値インデックスに基づく水平デブロッキングとを含み、
前記第１のデブロッキング閾値インデックスが水平デブロッキング閾値インデックスである場合におけるデブロッキングが、前記第１のデブロッキング閾値インデックスに基づく水平デブロッキングと、前記第２のデブロッキング閾値インデックスに基づく垂直デブロッキングとを含む、方法。 It's a method
Generating encoded frames by encoding input frames by a processor that executes instructions stored on a non-transitory computer-readable medium.
Generating a decoded frame by decoding the encoded frame,
To generate a reconstructed frame by reconstructing the decrypted frame,
Identifying a shared deblocking threshold index that is a shared deblocking threshold index from a plurality of deblocking threshold indexes for deblocking the decrypted frame and that specifies a first defined set of deblocking thresholds.
Decoding by identifying a first deblocking threshold index that is a first deblocking threshold index from the plurality of deblocking threshold indexes and that specifies a second set of defined deblocking thresholds. Identifying the first deblocking threshold index, which comprises using the shared deblocking threshold index as a second deblocking threshold index to deblock the conversion frame.
Identifying the second deblocking threshold index, which is the second deblocking threshold index and specifies a third defined set of deblocking thresholds, from the plurality of deblocking threshold indexes. Identifying the second deblocking threshold index, which comprises using the first deblocking threshold index to deblock the decrypted frame.
Reconstructing the decryption frame containing
Generating an output bitstream that includes the coded frame, the display of the first deblocking threshold index, and the display of the second deblocking threshold index.
The encoding, including
To output the output bitstream,
With
Generating the reconstruction frame can
Generating a decoded block by decoding the encoded block from the encoded frame,
The reconstruction block, which comprises generating a reconstruction block based on the decoding block, comprising deblocking based on the first deblocking threshold index and the second deblocking threshold index. To generate,
Including the reconstruction block in the reconstruction frame,
Including
In the above coding,
When the first deblocking threshold index is a vertical deblocking threshold index, the deblocking is vertical deblocking based on the first deblocking threshold index and horizontal deblocking based on the second deblocking threshold index. Including and
When the first deblocking threshold index is the horizontal deblocking threshold index, the deblocking is horizontal deblocking based on the first deblocking threshold index and vertical deblocking based on the second deblocking threshold index. Methods, including and.
前記符号化フレームに対応するフレームヘッダ内に前記第１のデブロッキング閾値インデックスの表示を含めることか、または、
前記第１のデブロッキング閾値インデックスと前記第２のデブロッキング閾値インデックスとの差を差分デブロッキング閾値インデックス値として特定し、前記出力ビットストリーム内に前記差分デブロッキング閾値インデックス値を含めること、
のうちの少なくとも一方を含む、請求項７に記載の方法。 Generating the output bitstream can
Including the display of the first deblocking threshold index in the frame header corresponding to the coded frame, or
Identifying the difference between the first deblocking threshold index and the second deblocking threshold index as the differential deblocking threshold index value and including the differential deblocking threshold index value in the output bitstream.
7. The method of claim 7 , comprising at least one of the above.
複数の共有エラーメトリックを決定することであって、前記複数の共有エラーメトリックの各々が、前記入力フレームの一部分と、前記複数のデブロッキング閾値インデックスのうちの対応する１つを前記第１のデブロッキング閾値インデックスおよび前記第２のデブロッキング閾値インデックスとして用いて前記復号化フレームをデブロッキングすることにより生成される候補再構成フレームの対応する部分との差異に対応する、前記複数の共有エラーメトリックを決定すること、
前記複数の共有エラーメトリックのうちの最小共有エラーメトリックに対応する前記デブロッキング閾値インデックスを前記共有デブロッキング閾値インデックスとして特定すること、を含む、請求項８に記載の方法。 Identifying the shared deblocking threshold index
Determining a plurality of shared error metrics, each of the plurality of shared error metrics deciphering a portion of the input frame and the corresponding one of the plurality of deblocking threshold indexes. The plurality of shared error metrics corresponding to the differences from the corresponding portion of the candidate reconstruction frame generated by deblocking the decrypted frame using the blocking threshold index and the second deblocking threshold index. To decide,
The method according to claim 8 , wherein the deblocking threshold index corresponding to the minimum shared error metric among the plurality of shared error metrics is specified as the shared deblocking threshold index.
複数の第１のエラーメトリックを決定することであって、前記複数の第１のエラーメトリックの各々が、前記入力フレームの一部分と、前記共有デブロッキング閾値インデックスを前記第２のデブロッキング閾値インデックスとして用いるとともに、前記共有デブロッキング閾値インデックス以外の前記複数のデブロッキング閾値インデックスのうちの対応する１つを前記第１のデブロッキング閾値インデックスとして用いて前記復号化フレームをデブロッキングすることにより生成される候補再構成フレームの対応する部分との差異に対応する、前記複数の第１のエラーメトリックを決定すること、
前記最小共有エラーメトリックを前記共有デブロッキング閾値インデックスに対応する第１のエラーメトリックとして前記複数の第１のエラーメトリック内に含めること、
前記複数の第１のエラーメトリックのうち最小の第１のエラーメトリックに対応するデブロッキング閾値インデックスを前記第１のデブロッキング閾値インデックスとして特定すること、を含む、請求項９に記載の方法。 Identifying the first deblocking threshold index
Determining a plurality of first error metrics, each of the plurality of first error metrics using a portion of the input frame and the shared deblocking threshold index as the second deblocking threshold index. It is generated by using and deblocking the decoding frame by using the corresponding one of the plurality of deblocking threshold indexes other than the shared deblocking threshold index as the first deblocking threshold index. Determining the plurality of first error metrics that correspond to the differences from the corresponding parts of the candidate reconstruction frame.
Including the minimum shared error metric as a first error metric corresponding to the shared deblocking threshold index in the plurality of first error metrics.
The method according to claim 9 , wherein the deblocking threshold index corresponding to the smallest first error metric among the plurality of first error metrics is specified as the first deblocking threshold index.
複数の第２のエラーメトリックを決定することであって、前記複数の第２のエラーメトリックの各々が、前記入力フレームの一部分と、前記第１のデブロッキング閾値インデックスを用いるとともに、前記第１のデブロッキング閾値インデックス以外の前記複数のデブロッキング閾値インデックスのうちの対応する１つを前記第２のデブロッキング閾値インデックスとして用いて前記復号化フレームをデブロッキングすることにより生成される候補再構成フレームの対応する部分との差異に対応する、前記複数の第２のエラーメトリックを決定すること、
前記最小の第１のエラーメトリックを前記第１のデブロッキング閾値インデックスに対応する第２のエラーメトリックとして前記複数の第２のエラーメトリック内に含めること、
前記複数の第２のエラーメトリックのうち最小の第２のエラーメトリックに対応するデブロッキング閾値インデックスを前記第２のデブロッキング閾値インデックスとして特定すること、を含む、請求項１０に記載の方法。 Identifying the second deblocking threshold index can be
Determining a plurality of second error metrics, each of the plurality of second error metrics using a portion of the input frame and the first deblocking threshold index, as well as said first. Candidate reconstruction frames generated by deblocking the decrypted frame using the corresponding one of the plurality of deblocking threshold indexes other than the deblocking threshold index as the second deblocking threshold index. Determining the plurality of second error metrics that correspond to the differences from the corresponding parts,
Inclusion of the smallest first error metric in the plurality of second error metrics as a second error metric corresponding to the first deblocking threshold index.
The method of claim 10 , wherein the deblocking threshold index corresponding to the smallest second error metric of the plurality of second error metrics is specified as the second deblocking threshold index.
前記現在のデブロッキング閾値インデックスが前記第１のデブロッキング閾値インデックスである場合に、前記現在のデブロッキング閾値が前記第２の定義済みのデブロッキング閾値のセットのうちの第１のデブロッキング閾値であり、
前記現在のデブロッキング閾値インデックスが前記第２のデブロッキング閾値インデックスである場合に、前記現在のデブロッキング閾値が前記第３の定義済みのデブロッキング閾値のセットのうちの第２のデブロッキング閾値である、請求項１０または１１に記載の方法。 The deblocking involves identifying the current deblocking threshold based on the current deblocking threshold index.
When the current deblocking threshold index is the first deblocking threshold index, the current deblocking threshold is at the first deblocking threshold of the second defined set of deblocking thresholds. can be,
When the current deblocking threshold index is the second deblocking threshold index, the current deblocking threshold is at the second deblocking threshold of the third defined set of deblocking thresholds. A method according to claim 10 or 11.
前記現在のデブロッキング閾値インデックスに基づいて複数のデブロッキング閾値から現在のデブロッキング閾値のセットを特定すること、
現在の方向における前記復号化ブロックの現在のブロック境界に対応する現在の最小変換ブロックサイズを特定すること、
前記現在の最小変換ブロックサイズに基づいて、前記現在のデブロッキング閾値のセットからデブロッキング閾値のサブセットを前記現在のデブロッキング閾値として特定すること、を含み、
前記現在のデブロッキング閾値インデックスが前記第１のデブロッキング閾値インデックスである場合、前記現在のデブロッキング閾値のセットは、前記第２の定義済みのデブロッキング閾値のセットであり、
前記現在のデブロッキング閾値インデックスが前記第２のデブロッキング閾値インデックスである場合、前記現在のデブロッキング閾値のセットは、前記第３の定義済みのデブロッキング閾値のセットである、請求項１２に記載の方法。 Identifying the current deblocking threshold
Identifying the current set of deblocking thresholds from multiple deblocking thresholds based on the current deblocking threshold index,
Identifying the current minimum conversion block size that corresponds to the current block boundary of the decrypted block in the current direction,
Including identifying a subset of the deblocking thresholds as the current deblocking thresholds from the current set of deblocking thresholds based on the current minimum conversion block size.
When the current deblocking threshold index is the first deblocking threshold index, the current set of deblocking thresholds is the second defined set of deblocking thresholds.
If the current deblocking threshold index is the second deblocking threshold index, said current set of deblocking thresholds, a set of the third predefined deblocking threshold, according to claim 12 the method of.
前記現在の最小変換ブロックサイズが前記現在のブロック境界と反対側の前記復号化ブロックの第２のブロック境界の第２の最小変換ブロックサイズとは異なると判定したことに応じて、前記現在のデブロッキング閾値が前記第２のブロック境界のデブロッキング閾値とは異なるように前記現在のデブロッキング閾値を特定すること、
前記現在の最小変換ブロックサイズが前記第２の最小変換ブロックサイズに等しいと判定したことに応じて、前記第２のブロック境界のデブロッキング閾値を前記現在のデブロッキング閾値として特定すること、を含む、請求項１３に記載の方法。 Identifying the current deblocking threshold
The current threshold is determined in response to the determination that the current minimum conversion block size is different from the second minimum conversion block size of the second block boundary of the decoding block on the opposite side of the current block boundary. Identifying the current deblocking threshold such that the blocking threshold is different from the deblocking threshold of the second block boundary.
Including determining the deblocking threshold of the second block boundary as the current deblocking threshold in response to determining that the current minimum conversion block size is equal to the second minimum conversion block size. , The method according to claim 13.
非一時的なコンピュータ可読媒体に記憶された命令に応答するプロセッサによって再構成フレームを生成することであって、
符号化ビットストリームの一部を復号化することによって、復号化ブロックを含む復号化フレームを生成すること、
前記符号化ビットストリームから第１のデブロッキング閾値インデックスであって、第１の定義済みのデブロッキング閾値のセットを特定する第１のデブロッキング閾値インデックスを読み取ること、
前記符号化ビットストリームから前記第１のデブロッキング閾値インデックスとは異なる第２のデブロッキング閾値インデックスを特定すること、
前記第１のデブロッキング閾値インデックスに基づいて前記復号化フレームを第１の方向にデブロッキングすることにより部分デブロッキングフレームを生成すること、
前記第２のデブロッキング閾値インデックスに基づいて前記部分デブロッキングフレームを第２の方向にデブロッキングすることにより前記再構成フレームを生成すること、
によって前記再構成フレームを生成すること、
前記再構成フレームを出力すること、
を備え、
前記第１のデブロッキング閾値インデックスを読み取ることが、前記再構成フレームに対応するフレームヘッダから前記第１のデブロッキング閾値インデックスを抽出することを含み、
前記第２のデブロッキング閾値インデックスを特定することが、
前記再構成フレームに対応する前記フレームヘッダから前記第２のデブロッキング閾値インデックスを示す情報を抽出すること、
前記第２のデブロッキング閾値インデックスを示す情報が差分デブロッキング閾値インデックス値を含むと判定したことに応じて、前記差分デブロッキング閾値インデックス値と前記第１のデブロッキング閾値インデックスとの合計を前記第２のデブロッキング閾値インデックスとして特定すること、
前記第２のデブロッキング閾値インデックスを示す情報がデブロッキング閾値インデックスを含むと判定したことに応じて、前記デブロッキング閾値インデックスを前記第２のデブロッキング閾値インデックスとして特定すること、
を含み、
前記デブロッキングすることが、現在のデブロッキング閾値インデックスに基づいて現在のデブロッキング閾値を特定することを含み、
前記現在のデブロッキング閾値インデックスが前記第１のデブロッキング閾値インデックスである場合に、前記現在のデブロッキング閾値が前記第１の定義済みのデブロッキング閾値のセットのうちの第１のデブロッキング閾値であり、
前記現在のデブロッキング閾値インデックスが前記第２のデブロッキング閾値インデックスである場合に、前記現在のデブロッキング閾値が第２の定義済みのデブロッキング閾値のセットのうちの第２のデブロッキング閾値であり、
前記現在のデブロッキング閾値を特定することが、
前記現在のデブロッキング閾値インデックスに基づいて複数のデブロッキング閾値から現在のデブロッキング閾値のセットを特定すること、
現在の方向における前記復号化ブロックの現在のブロック境界に対応する現在の最小変換ブロックサイズを特定すること、
前記現在の最小変換ブロックサイズに基づいて、前記現在のデブロッキング閾値のセットからデブロッキング閾値のサブセットを前記現在のデブロッキング閾値として特定すること、を含み、
前記現在のデブロッキング閾値インデックスが前記第１のデブロッキング閾値インデックスである場合、前記現在のデブロッキング閾値のセットは、前記第１の定義済みのデブロッキング閾値のセットであり、
前記現在のデブロッキング閾値インデックスが前記第２のデブロッキング閾値インデックスである場合、前記現在のデブロッキング閾値のセットは、前記第２の定義済みのデブロッキング閾値のセットである、方法。 It's a method
Generating a reconstructed frame by a processor that responds to instructions stored on a non-transitory computer-readable medium.
Generating a decoding frame containing a decoding block by decoding a portion of a coded bitstream,
Reading from the coded bitstream a first deblocking threshold index that is a first deblocking threshold index and identifies a first defined set of deblocking thresholds.
Identifying a second deblocking threshold index from the coded bitstream that is different from the first deblocking threshold index.
Generating a partial deblocking frame by deblocking the decrypted frame in the first direction based on the first deblocking threshold index.
Generating the reconstructed frame by deblocking the partial deblocking frame in a second direction based on the second deblocking threshold index.
To generate the reconstruction frame by
To output the reconstructed frame,
With
Reading the first deblocking threshold index comprises extracting the first deblocking threshold index from the frame header corresponding to the reconstructed frame.
Identifying the second deblocking threshold index can be
Extracting information indicating the second deblocking threshold index from the frame header corresponding to the reconstructed frame.
The sum of the differential deblocking threshold index value and the first deblocking threshold index is calculated according to the determination that the information indicating the second deblocking threshold index includes the differential deblocking threshold index value. Identifying as a deblocking threshold index of 2,
Identifying the deblocking threshold index as the second deblocking threshold index in response to the determination that the information indicating the second deblocking threshold index includes the deblocking threshold index.
Only including,
The deblocking involves identifying the current deblocking threshold based on the current deblocking threshold index.
When the current deblocking threshold index is the first deblocking threshold index, the current deblocking threshold is at the first deblocking threshold of the first defined set of deblocking thresholds. can be,
When the current deblocking threshold index is the second deblocking threshold index, the current deblocking threshold is the second deblocking threshold in the second defined set of deblocking thresholds. ,
Identifying the current deblocking threshold
Identifying the current set of deblocking thresholds from multiple deblocking thresholds based on the current deblocking threshold index,
Identifying the current minimum conversion block size that corresponds to the current block boundary of the decrypted block in the current direction,
Including identifying a subset of the deblocking thresholds as the current deblocking thresholds from the current set of deblocking thresholds based on the current minimum conversion block size.
When the current deblocking threshold index is the first deblocking threshold index, the current set of deblocking thresholds is the set of the first defined deblocking thresholds.
The method, wherein the current deblocking threshold index is the second defined deblocking threshold set when the current deblocking threshold index is the second deblocking threshold index.
Applications Claiming Priority (3)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US15/706,735 | 2017-09-17 | ||
US15/706,735 US10645408B2 (en) | 2017-09-17 | 2017-09-17 | Dual deblocking filter thresholds |
PCT/US2018/031565 WO2019055070A1 (en) | 2017-09-17 | 2018-05-08 | Dual deblocking filter thresholds |
Publications (2)
Publication Number | Publication Date |
---|---|
JP2020524933A JP2020524933A (en) | 2020-08-20 |
JP6959367B2 true JP6959367B2 (en) | 2021-11-02 |
Family
ID=62530531
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
JP2019568737A Active JP6959367B2 (en) | 2017-09-17 | 2018-05-08 | Dual deblocking filter threshold |
Country Status (6)
Country | Link |
---|---|
US (2) | US10645408B2 (en) |
EP (1) | EP3682638A1 (en) |
JP (1) | JP6959367B2 (en) |
KR (1) | KR102294438B1 (en) |
CN (1) | CN110720223B (en) |
WO (1) | WO2019055070A1 (en) |
Families Citing this family (3)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
MX2020002143A (en) * | 2017-12-06 | 2020-07-20 | Fujitsu Ltd | Mode information encoding and decoding method, device, and electronic apparatus. |
WO2021045671A1 (en) * | 2019-09-06 | 2021-03-11 | Telefonaktiebolaget Lm Ericsson (Publ) | Deblocking filter selection in video or image coding |
WO2021194229A1 (en) * | 2020-03-23 | 2021-09-30 | 엘지전자 주식회사 | Method for signaling deblocking filter parameter information in video or image coding system |
Family Cites Families (31)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
EP1209624A1 (en) * | 2000-11-27 | 2002-05-29 | Sony International (Europe) GmbH | Method for compressed imaging artefact reduction |
WO2003021936A2 (en) * | 2001-09-05 | 2003-03-13 | Emblaze Semi Conductor Ltd | Method for reducing blocking artifacts |
EP2899977A1 (en) | 2002-01-31 | 2015-07-29 | Samsung Electronics Co., Ltd | Filtering method and apparatus for reducing block artifacts or ringing noise |
US7227901B2 (en) | 2002-11-21 | 2007-06-05 | Ub Video Inc. | Low-complexity deblocking filter |
US7362810B2 (en) | 2003-05-13 | 2008-04-22 | Sigmatel, Inc. | Post-filter for deblocking and deringing of video data |
US7539248B2 (en) | 2004-04-29 | 2009-05-26 | Mediatek Incorporation | Adaptive de-blocking filtering apparatus and method for MPEG video decoder |
US7983505B2 (en) * | 2007-03-30 | 2011-07-19 | Intel Corporation | Performing deblocking on pixel data |
JP2009004920A (en) * | 2007-06-19 | 2009-01-08 | Panasonic Corp | Image encoder and image encoding method |
KR101647376B1 (en) * | 2009-03-30 | 2016-08-10 | 엘지전자 주식회사 | A method and an apparatus for processing a video signal |
JP5844263B2 (en) * | 2009-10-05 | 2016-01-13 | ビーマル イメージング リミテッドＢｅａｍｒ Ｉｍａｇｉｎｇ Ｌｔｄ． | Apparatus and method for recompressing digital images |
US9185430B2 (en) * | 2010-03-15 | 2015-11-10 | Mediatek Singapore Pte. Ltd. | Deblocking filtering method and deblocking filter |
CN107241604B (en) * | 2010-04-01 | 2020-11-03 | 索尼公司 | Image processing apparatus and method |
TWI600318B (en) | 2010-05-18 | 2017-09-21 | Sony Corp | Image processing apparatus and image processing method |
US8787443B2 (en) * | 2010-10-05 | 2014-07-22 | Microsoft Corporation | Content adaptive deblocking during video encoding and decoding |
US9807424B2 (en) * | 2011-01-10 | 2017-10-31 | Qualcomm Incorporated | Adaptive selection of region size for identification of samples in a transition zone for overlapped block motion compensation |
US20130101027A1 (en) * | 2011-06-20 | 2013-04-25 | Matthias Narroschke | Deblocking control by individual quantization parameters |
KR102010160B1 (en) * | 2011-06-28 | 2019-08-12 | 소니 주식회사 | Image processing device, image processing method and recording medium |
KR102138260B1 (en) * | 2011-09-20 | 2020-07-28 | 엘지전자 주식회사 | Method and apparatus for encoding/decoding image information |
US9807403B2 (en) * | 2011-10-21 | 2017-10-31 | Qualcomm Incorporated | Adaptive loop filtering for chroma components |
CN109246429A (en) * | 2011-11-04 | 2019-01-18 | Lg 电子株式会社 | Method and apparatus for encoding/decoding image information |
KR102032000B1 (en) | 2011-11-04 | 2019-10-14 | 선 페이턴트 트러스트 | Deblocking filtering with modified image block boundary strength derivation |
US9414064B2 (en) * | 2011-11-25 | 2016-08-09 | Sun Patent Trust | Image processing method and image processing apparatus |
KR101373759B1 (en) * | 2012-01-30 | 2014-03-28 | 광운대학교 산학협력단 | Apparatus and method for decoding |
US9344723B2 (en) * | 2012-04-13 | 2016-05-17 | Qualcomm Incorporated | Beta offset control for deblocking filters in video coding |
CN104350753B (en) * | 2012-06-01 | 2019-07-09 | 威勒斯媒体国际有限公司 | Arithmetic decoding device, picture decoding apparatus, arithmetic coding device and picture coding device |
US9270993B2 (en) * | 2012-09-10 | 2016-02-23 | Apple Inc. | Video deblocking filter strength derivation |
US20140192862A1 (en) * | 2013-01-07 | 2014-07-10 | Research In Motion Limited | Methods and systems for prediction filtering in video coding |
WO2014120368A1 (en) * | 2013-01-30 | 2014-08-07 | Intel Corporation | Content adaptive entropy coding for next generation video |
US9906790B2 (en) * | 2014-03-14 | 2018-02-27 | Qualcomm Incorporated | Deblock filtering using pixel distance |
US10038915B2 (en) * | 2014-05-22 | 2018-07-31 | Qualcomm Incorporated | Escape sample coding in palette-based video coding |
US20180091812A1 (en) * | 2016-09-23 | 2018-03-29 | Apple Inc. | Video compression system providing selection of deblocking filters parameters based on bit-depth of video data |
-
2017
- 2017-09-17 US US15/706,735 patent/US10645408B2/en active Active
-
2018
- 2018-05-08 CN CN201880036492.6A patent/CN110720223B/en active Active
- 2018-05-08 KR KR1020197035627A patent/KR102294438B1/en active IP Right Grant
- 2018-05-08 WO PCT/US2018/031565 patent/WO2019055070A1/en active Application Filing
- 2018-05-08 EP EP18729516.7A patent/EP3682638A1/en active Pending
- 2018-05-08 JP JP2019568737A patent/JP6959367B2/en active Active
-
2020
- 2020-04-02 US US16/838,529 patent/US11153588B2/en active Active
Also Published As
Publication number | Publication date |
---|---|
US20200236375A1 (en) | 2020-07-23 |
WO2019055070A1 (en) | 2019-03-21 |
US20190089969A1 (en) | 2019-03-21 |
KR102294438B1 (en) | 2021-08-25 |
KR20200002035A (en) | 2020-01-07 |
EP3682638A1 (en) | 2020-07-22 |
CN110720223A (en) | 2020-01-21 |
CN110720223B (en) | 2022-08-02 |
US11153588B2 (en) | 2021-10-19 |
JP2020524933A (en) | 2020-08-20 |
US10645408B2 (en) | 2020-05-05 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
GB2546888B (en) | Tile copying for video compression | |
US10104398B2 (en) | Super-transform video coding | |
US10694180B2 (en) | Entropy coding transform partitioning information | |
EP3183876B1 (en) | Motion-compensated partitioning | |
WO2017052710A1 (en) | Low-latency two-pass video coding | |
EP3248376B1 (en) | Efficient context handling in arithmetic coding | |
WO2019094080A1 (en) | Block artefact reduction | |
US20170237939A1 (en) | Loop filtering for multiform transform partitioning | |
EP3473006A1 (en) | Context adaptive scan order for entropy coding | |
US11153588B2 (en) | Dual deblocking filter thresholds | |
EP3219103B1 (en) | Alternating block constrained decision mode coding | |
US20230291925A1 (en) | Inter-Intra Prediction With Implicit Models |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
A521 | Request for written amendment filed |
Free format text: JAPANESE INTERMEDIATE CODE: A523Effective date: 20191212 |
|
A621 | Written request for application examination |
Free format text: JAPANESE INTERMEDIATE CODE: A621Effective date: 20191212 |
|
RD03 | Notification of appointment of power of attorney |
Free format text: JAPANESE INTERMEDIATE CODE: A7423Effective date: 20200115 |
|
RD04 | Notification of resignation of power of attorney |
Free format text: JAPANESE INTERMEDIATE CODE: A7424Effective date: 20200121 |
|
A977 | Report on retrieval |
Free format text: JAPANESE INTERMEDIATE CODE: A971007Effective date: 20201217 |
|
A131 | Notification of reasons for refusal |
Free format text: JAPANESE INTERMEDIATE CODE: A131Effective date: 20210104 |
|
A521 | Request for written amendment filed |
Free format text: JAPANESE INTERMEDIATE CODE: A523Effective date: 20210405 |
|
A131 | Notification of reasons for refusal |
Free format text: JAPANESE INTERMEDIATE CODE: A131Effective date: 20210426 |
|
A601 | Written request for extension of time |
Free format text: JAPANESE INTERMEDIATE CODE: A601Effective date: 20210726 |
|
A521 | Request for written amendment filed |
Free format text: JAPANESE INTERMEDIATE CODE: A523Effective date: 20210819 |
|
TRDD | Decision of grant or rejection written | ||
A01 | Written decision to grant a patent or to grant a registration (utility model) |
Free format text: JAPANESE INTERMEDIATE CODE: A01Effective date: 20210913 |
|
A61 | First payment of annual fees (during grant procedure) |
Free format text: JAPANESE INTERMEDIATE CODE: A61Effective date: 20211007 |
|
R150 | Certificate of patent or registration of utility model |
Ref document number: 6959367Country of ref document: JPFree format text: JAPANESE INTERMEDIATE CODE: R150 |