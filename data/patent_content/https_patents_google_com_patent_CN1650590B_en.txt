Embodiment
The invention provides a kind of equipment and method that CDMA able to programme handles that be used for, can search for, receive and follow the tracks of the various next generations and existing cdma communication standard produce any one or a plurality of signal.This realizes on the common hardware structure, and only needs software to upload the demand that is used in the particular air interface in the communication system with solution.The present invention is disclosed herein to be elasticity microcoding CDMA processor parts for example, consider the able to programme relevant or despreading of input signal, and the input rank structure able to programme of a plurality of independent signals of equal consideration source, sampling width (accuracy), repeated sampling (over-sampling) speed and sampling clock.This input rank will be caught data feed-in programmable correlator unit usually then, be used for special disposal.In the processing structure of describing, input source is usually by feed-in input unit (or input register), and the data from analog-digital converter (ADC) or other pretreatment components (for example digital channel filters etc.) are provided usually.A plurality of input sources (for example channel) can be used for supporting a plurality of communication standards, a plurality of antenna (for example split pole antenna) etc.
More specifically, the invention provides a kind of programmable correlator and input rank, can be according to the general microcoding engine operation that comprises, this engine can concentrate deposit hold any code or system specific information file to the longer-term storage unit that is called operand store.Notice that all processors are all according to certain type micro-coded instruction operation, as known in the art.In the invention of describing, use microcode (or the instruction in the memory) as required, thereby in any specific CDMA environment, move.Notice that the control microcode can be present in random access storage device (RAM) technology, read-only memory (ROM) technology, or can install (for example processor) generation by another.In addition, this microcoding engine optionally is included in from the ALU (ALU) under the microcode control of programmable processor, it also can comprise other auxiliary ALU in its structure, to improve the flexibility unit on coprocessor (more near nextport universal digital signal processor NextPort or DSP).
The present invention also has the application except that preferred embodiment described here, and the explanation that provides only is demonstration and explanation the present invention, and should not be considered to limitation of the present invention.Though this specification finishes with the claim that definition is considered to novel characteristics of the present invention, believe that consideration will better understand the present invention below in conjunction with the description of the drawings, identical reference marker is used in continuity in the accompanying drawings.As definition in the present invention, radio telephone is to use the communicator of the electromagnetic wave transmission information of radio frequency range to the base station.General, radio telephone is of portable form, and when using, lifts head usually, near ear.
On the electronic product that is used in any RF of requirement signal transmitting and receiving that notion of the present invention can be favourable, though its application is not limited to these products.Preferably, the radio telephone of communicator partly is the cellular radio that is suitable for personal communication, but also beep-pager, cordless radiotelephone or personal communication service (PCS) radio telephone.The radio telephone part can be according to analog communication standard or digital communication standard structure.The user interface that radio telephone partly generally includes wireless frequency (RF) transmitter, RF receiver, controller, antenna, battery, duplexer filter, frequency synthesizer, signal processor and comprises one of keyboard, display, control switch and microphone at least.The radio telephone part can also comprise paging receiver.Be attached to cell phone, such as the double-direction radio of beep-pager or to select the electronic component in the wireless receiver be known in the art, and can be incorporated in the communicator of the present invention.The present invention may be used on requiring relevant (or dot product) operation, particularly one of data set is in any signal processing problems of two-value.
Fig. 1 shows the general rake receiver structure of using cdma communication device of the present invention.Only be the example purpose, this communicator is embedded in the cellular radio with general cellular radio transceiver circuit well known in the art, does not show for simplicity's sake at this.This cell phone comprises conventional cellular phone hardware (also not showing for simplicity's sake), for example is integrated into the user interface in the compact case, and further comprises antenna system according to the present invention.Each certain wireless devices all can provide and realize this notion and be adopted as the chance that each uses selected device.
General, communication system 100 comprises a plurality of base stations such as base station 102, configuration is used for carrying out radio communication with the mobile radio station of one or more for example radio telephones 104.Radio telephone 104 configurations are used for receiving (and emission) code division multiple access (CDMA) signal, to communicate by letter on one or more available cdma communication standards with a plurality of base stations that comprise base station 102.In this example, communication system 100 operates in 800MHz according to TIA/EIA tentative standard IS-95 " mobile radio station-base station compatible standard that is used for dual mode wideband spread spectrum cellular " operation.Optionally, communication system 100 can be according to other cdma system operations that comprise the 1800MHz pcs system.
Spread-spectrum signal is transmitted to radio telephone 104 in base station 102.In communication period, as known in the art, in the processing that usually said Walsh covers, use activate business symbol on the channel of pseudo noise (PN) and Walsh sign indicating number.For example each mobile radio station of radio telephone 104 is all distributed unique Walsh code by base station 102, thereby is mutually orthogonal to the Channel Transmission of each mobile radio station with to the Channel Transmission of other mobile radio stations.This spread signal is quadriphase PSK (QPSK) modulation, thereby forms homophase (I) and quadrature phase (Q) signal.Use two special-purpose PN sequence extension I and Q signal.Identical I and Q sequence spreading are used in all base stations in communication system 100.Also can import such as 8-PSK 64-QAM, senior polynary (M-ary) modulation scheme of 256-QAM etc.In addition, also can adapt to different bit rates (being every bit (symbol) number of chips).
For example, radio telephone 104 comprises antenna 106, AFE (analog front end) 108, comprises at least one RX path such as the input unit of AD converter (ADC) 110, the programmable processor 114 with programmable correlator 128 and controller or processor 116 (DSP that for example has call processing device).Optionally, can comprise other receiver input paths, for example in multiaerial system, be used for diversity, or in multi-mode system, for example show as ADC109 and ADC111.Any or all of ADC can provide repeated sampling, thereby the sub-chip sampling is provided.Antenna 106 is from the base station 102 and receive the RF signal near other base stations.The RF signal of some reception is directly to send the sighting distance ray of base station.The RF signal of other receptions is indirect raies and postpones in time.The RF signal that receives is converted to electronic signal and offers AFE (analog front end) 108 by antenna 106.This signal of AFE (analog front end) 108 filtering also is provided to baseband I and the conversion of Q signal.Baseband I and Q signal are provided at least one ADC110, are converted into I and Q digital data stream at this, and under the control of programmable processor 114 this are spread and deliver to input rank 113, are used for further processing.
The general utility functions of primary processor 116 control radio telephones 104.Preferably, processor 116 is digital signal processor or microcontroller.This processor response program stored instruction manipulation also comprises that memory 132 is used to store these instruction and other data.Certainly, this processor is also connected to other elements of radio telephone 104.Do not show such connection, thereby do not make the accompanying drawing overcomplicated.Programmable correlator block 128 operation is used for receiving, search and following the tracks of, the subdivision of programmable processor 114 normally, and this processor uses different microcode groups to operate in CDMA, WCDMA and the gps system.Comprising can be random access or read-only memory 130, and uses it for storage and mandatory microcode.Input rank 113 is under the control of programmable correlator 128, and this correlator is also controlled flexible correlator 128, will be by relevant data thereby can control through software microcode.Optionally, can provide the memory of separation to store this microcode.In any of two examples, the micro-code memory piece is connected to the sub-piece of all programmable (being PN cross-bar unit, PN ALU, complex correlator and input rank memory), to control their behavior, though do not show these connections in order to simplify accompanying drawing.
In practice, primary processor 116 can send the message of oriented mission to CDMA processor 114 able to programme, for example " carries out 1 search of 3GPP phase place ".In standard implementation example of the present invention, primary processor 116 is given the jump cursor of programmable processor 128 to the instruction in the command memory 130 of processor 114 already (or vector), or is written into new instruction in memory 130.In case instruct resident or be loaded in the programmable processor 114, it is exactly relatively independent, and management input rank 113, programmable correlator 128 etc. are all carried out by programmable processor 114, rather than primary processor 116.
Usually, the DS-CDMA receiver operates in system acquisition mode at first, it obtains the input spread-spectrum signal (comprising the multi-path signal composition) of all expectations in this pattern, operates in tracing mode then, the data channel of its monitoring multi-path signal profile and demodulation input in this pattern.Catch and generally include the pilot tone sequence spreading of detection from one or more sources.Demodulation input data channel generally includes inter-related task, and for example pilot tone and/or Walsh/OVSF sign indicating number relevant (or data symbol despreading), delay lock loop (DLL) are correlated with and frequency-locked loop (FLL) is relevant.A plurality of active code channels or a plurality of base station have increased the demand of all these basic associative operations.
Traditional rake receiver finger, as be known in the art, all dispensable in the present invention, because also relevant with correct PN phase place from the correct data of input rank by visit, programmable correlator block can be used as receiver finger or searcher.In addition, the present invention by microcode (software) control down offset data or skew PN sequence can carry out in early days/later stage is correlated with.In addition, the programmable processor speed of service can be faster than spreading rate (in real time), thereby correlator before the input of next sampled data set can a plurality of data sequences (for obtain in early days, on time, later stage finger relevant information, multipath ray signal etc.) go up relevant.Usually, programmable correlator and processor structure can be handled some chips or data sampling at every clock or instruction cycle.These concurrent (or parallel) operations allow to realize the high speed processing throughput by the present invention.
Programmable processor 114 comprises the correlator 128 with memory 130 or register file.In an example, AFE (analog front end) 108 detects the signal that radio telephone 104 receives from a plurality of base stations that comprise base station 102.Programmable processor 114 comprises the correlator 128 with memory 130 or register file.Detected data sampling (PN) sequence and predetermined (system-specific) PN sequence that correlator 128 relatively receives from ADC110, this predetermined PN sequence can be stored in the memory 130 or from the feed-in of PN generator, produce the demodulated data stream that is used for primary processor 116.In the example that shows, correlator 128 comprises PN ALU (PN ALU) 144, PN cross-bar unit 143 and the programmable complex correlator 140 with numerically-controlled oscillator (NCO) 141 and local accumulator 142.
Programmable correlator 128 receives I and Q data flow from ADC110.The modulated spread spectrum signal of this sampled data correspondence 102 receptions from the base station comprise direct reception or initial ray and the indirect ray with time delay in this example.In addition, these data can be corresponding directly and the modulated spread signals that receives of other base stations in the communication system 100 of reflection.These data can comprise and are used in the base station 102 and at the PN sequence and the Walsh sign indicating number of all other base stations expansion I and Q channel.
I that correlator 128 relatively detects and Q sample sequence and the predetermined PN sequence that can comprise Walsh or ovsf code.Usually, with this sequence with before input sampling data is relevant, Walsh in predetermined PN sequence and the receiver or ovsf code are by XOR.These sequences can produce and be stored in short-term storage or the register file 130 or direct feed-in programmable correlator 128 by PNALU144 in advance.Note PN generation unit 144 normally based on hardware (ASIC), or software (microcode) is programmable.In an example, predetermined PN sequence is to being applied to the part in the short PN sequence of all base station expansion I and Q channel.Radio telephone 104 comprises the memory element such as memory 130 or memory 132, the value that can store the fixed mode of PN value or produce when needed.Yet, will be appreciated that and can use single memory and be preferred.Predetermined PN sequence comprises fixed mode, and this pattern comprises PN sequence predetermined number of chips, for example as back 512 chips of the PN sequence of short PN sequence.
Searcher receiver device 114 detects the receiving data stream that ADC110 provides under processor 116 controls.These data can comprise detected PN signature sequence, and this sequence correspondence is from the expansion RF signal of one or more base stations reception of for example base station 102.In the embodiment that shows, signal is a quadrature modulation, and each signal all comprises homophase (I) symbol and quadrature phase (Q) symbol.I symbol I PN sequence extension, Q symbol Q PN sequence extension.PN sample sequence that complex correlator 140 relatively detects and predetermined PN sequence, thus the energy that all can receive basic transmission (being the extended code phase place) caught at the fixed time.Preferred predetermined time period such as the IS-95 DS-CDMA communication system of communication system 100 is the 26-2/3 millisecond in acquisition mode, and this is the required time of PN sequence phase that repetition is useful on expansion I and Q channel.Correlator 140 can comprise I channel correlators that is used for the I channel and the Q channel correlators that is used for the Q channel, and the output of two correlators of combination is to improve accuracy.Programmable correlator can comprise task or command register (not shown), and this register comprises the microcode instruction of setting from processor 116.
A novel aspect of the present invention is, using can relevant M chip of per clock cycle and the programmable correlator 140 of N phase place and can be with the elasticity input rank 113 of a plurality of different sampling clock rates storage from the data flow of many A/D, thereby provides the sampled data of catching to arrive correlator 140 with aptitude manner.Optionally, can comprise small-sized PN cross-bar unit 143, it can rearrange the PN sequence that (or rotation) PN ALU144 produces in time, to mate with the time sequencing (or rotation) of input rank sampled data sequence, guarantees to use correct PN to the correct data from input rank.In fact, this provide with correlator in rearranging on the generation PN sign indicating number sequence time of time sequencing coupling of input rank data.This method has greatly reduced the hardware complexity (and implementation cost) of input rank.Favourable, the ratio prior art hardware correlator intellectuality that programmable correlator 140 is intrinsic because correlated measure, the relevant correlation type of adjusting frequency, carrying out, proceed conventional relevant before the kind crystalline substance (seeding) of accumulator or PN code value all can control through microcode.Equally, use this novel method, by using the shielding properties of flexible correlator, the chip of any number of being correlated with, even those can not be divided exactly by M, as described below.To the present invention of equal importance to be elasticity input rank 113 select the ability that correct M continuous data sampling is correlated with based on the sampling phase of sampling precision, repeated sampling rate and expectation.
Complex correlator 140 is parallel correlators, operate in M the data sampling of own elasticity input rank 113, these samplings are the whole chip in interval usually, correlator also M chip with (possible) compound PN sequence is relevant, and these sequences are by elasticity microcoding PN generator or or even the specialized hardware PN generator generation of similar PN ALU144.The center of complex correlator 140 is M shown in Figure 2 bit functional units, and they are assemblied in the complex correlator configuration of Fig. 3.It should be noted that the multiplication block in Fig. 2-Fig. 4 can also be with reversing or the replacement of non-inverse block.Programmable correlator 140 is carried out following two kinds of associative operations to the sampling of each input traffic and is come determining section correlated results (term is also referred to as dot product and or sub-correlation), Iaccum+j*Qaccum:
(DataI*PNI)+(DataQ*PNQ)+j((DataI*PNQ)-(DataQ*PNI))+Iaccum+j*Qaccum(DataI*PNI)+j(DataQ*PNQ)+Iaccum+j*Qaccum
Wherein DataI=is from the real part of the data of input rank, DataQ=is from the imaginary part of the data of input rank, the real part of Iaccum=coherent accumulation, the imaginary part of Qaccum=coherent accumulation, the real part of the PN sequence that PNI=generates, the imaginary part of the PN sequence that PNQ=generates.Usually form by these less dot products or sub-associative operation than the long correlation operation.First equation provides the plural number with cross correlation product relevant (with reference to figure 3), and uses usually.For example, the cross-correlation at least one real number and at least one sequence of complex numbers.In some example, it is relevant to replace plural number, and expectation keeps imaginary data and real part data separating and not cross pollution just looks like that independently actual channel is the same for two of two channel bearings.Second equation provides such relevant (referring to Fig. 2) in the present invention.Optionally, (with reference to figure 4) in the example of relevant real part PN sequence only, exists the PN space to carry out relevant more than the M chip in each clock cycle in the imaginary part side of data path.In fact, by subdivided data (data width is reduced half), in for example telescopic single-instruction multiple-data (SIMD) mode, for extra performance strengthens, the number of chips of will being correlated with is increased to the 2M chip from the M chip.At particular case, for example in global positioning system (GPS), can use relevant and some the channel synchronization pattern in third generation cooperation group project (3GPP) of relevant some Walsh of promotion of such real mode.All these operator schemes all can be controlled by microcode by software.
The present invention uses M one bit functional units (as shown in Figure 5) of efficient parallel operation.Attention can be implemented these functional units easily in the hardware-efficient structure, for example those use the hardware of carry save adder (CSA) (CSA) or Wallace tree structure.M is given for the number of the functional unit of the correct clock rate that obtains data.In case determine just fixing M of CDMA operating system and required processing throughput, or it is that variable (though being usually less than M) is to adapt to the data rate of variation.As an alternative, M can fix, thereby and can shield that correlator can be as needs (for example being used for changing the data rate in WCDMA or the wireless local area network (WLAN) system) be less than M sampling in relevant use.
With reference to figure 5, to each M one bit functional units 139 applicable equations (more than) result's conductively-closed in screen unit 152 as required.Usually, shielding is transparent, and is controlled by microcode.Yet if relevant data sampling number is not the integral multiple of M, for example in 802.11 wireless lan (wlan) systems, but the shielding 152 of user application definition is reduced in the effect of the extra or unnecessary data that adds up in relevant.In any of two examples, from final compound summing stage 150 additions of the related data of each correlator 139 at correlator.
Further novel aspect of the present invention is to comprise at least one local programmable digital control oscillator (NCO) 141 in correlator 140, be provided for the I of the sub-correlated sampling of M and the coincidence frequency offset correction of Q accumulation.Realize by rotation (or complex multiplication) part correlation (or son is relevant) result in the present invention.Attention is for many standard application, required frequency correction (for example sin and cos output) value accuracy very low (normally 1-2 bit), this make complex multiplier realization simply or more direct.Each NCO can be embodied as many bit counter (similar with the modulus offset address register of finding) in general dsp, be used for the current phase place of calculated rate offset correction source or local oscillator, as known to the skilled person.Notice that being implemented on the hardware of multi-frequency corrected programmable correlator is simple relatively, and the relevant treatment speed that can directly cause being used for the multi-frequency skew promotes.Additional correlated results (from each frequency shift (FS) that may or suppose) is stored in the independent accumulation register usually.
In the communication system of coherent correlation operating period requirement frequency and phasing, frequency correction is useful especially.In some cases, for example in GPS or other system, be desirably in than the possible frequency rotation of following the tracks of modulated signal constellation during the long correlation by pre-rotation PN sequence in coherent correlation to the predict frequency error.This is possible by using local NCO to influence final complex conjugate multiplication in correlator.Therefore, use desired frequency immediately and be corrected to M sampling (for example dot product of programmable correlator or sub-correlated results) group.The step-length of NCO counter is set to input sample sequence desired frequency and shifts into direct ratio, decoded traditional sine and the cosine waveform values to determine to use in complex multiplication is handled of the output of counter.Favourable, after combination M chip is relevant, use the NCO offset correction values, this needs hardware still less than other current techiques (for example the applying frequency offset correction values is to the input sample sequence).Described technology is also reused and is used for relevant able to programme relevant (the being dot product) hardware of a plurality of parallel frequencies adjustment.
The above-mentioned advantage that every instruction or clock cycle are handled a plurality of chips becomes possibility by elasticity input rank 113 (as shown in Figure 6) feed-in programmable correlator 140.Usually, sampling is encapsulated into identical basic memory location with Q with I, though other (separation) data configurations also can.The key that provides M data to sample correlator is storage input data in first storehouse 202 of random access storage device (RAM) and second storehouse 204.Each storehouse all is at least the Mx2K bit width, wherein K is the bit number in each real number and imaginary number data sampling (being determined by ADC resolution usually), and required associative operation (in every instruction or the clock cycle chip) number of throughput is handled in corresponding expectation of M or requirement.For example, if M=4, each storehouse is conceptive to have every row four row samplings, though single memory location can be formed in every provisional capital.Dynamic assignment RAM when system initialization (under software control), and only depend on which kind of cdma system of use.Usually, at least one ADC (for example 110 among Fig. 1) provides I and Q sampled data to input rank, fills two storehouses.As directed, this finishes from left to right and from top to bottom.If provide data to input rank more than one ADC (for example 109,111 of Fig. 1), at first use from the sampling of an ADC and fill input rank, be from the sampling of another ADC etc. then.In case fill up, to arrive first earlier (FIFO) mode from first address rewrite RAM.Can use other buffering scheme, double buffering for example, the present invention does not limit.
Optionally, programmable correlator can be write input rank with the dateout result that is correlated with, and usually this formation is used for after a while multistage relevant.In other words, can from the input rank address of corresponding particular sample phase place and time migration, read sampled data, be correlated with, in identical or different write back address input rank, be used for follow-up re-correlation then.All these stored parameters (for example Data Position, repeated sampling rate etc.) are all under the control of software or microcode.Under correlator or processor guidance, control input traffic by multiplexer 208.The address of new sampled data or correlator dateout each free new sampling address and the control of correlator address control line, the row of this line addressing input rank.These all write formation according to whether with new sampled data or correlator dateout by multiplexer 210 and come multichannel to pass on.Address decoder 212 determines to be written to which row of input rank then according to repeated sampling rate and sampling accuracy.
Fig. 7 shows that initial 32 new samplings of input traffic are loaded into the example in two storehouse input ranks, M=4 and repeated sampling rate=2 (being the twice of spreading rate).In this example, each data chips all has two samplings being distributed in the input rank row (first row) (for example 0,1).Two samplings subsequently are arranged in next column (secondary series), or the like.Suppose M=4 and two storehouses arranged then have 16 samplings to be arranged in preceding two row of input rank.The 17th sampling begins at first row once more, but at next line (the third line).Address decode block (Fig. 6 212) is with the arrangement guiding formation of input sample.If for example adopt 4x repeated sampling rate in the system, then four initial inputs of first row comprise sampling 0-3, and next column comprises sampling 4-7 etc., fills up with 32 samplings until initial four lines, repeats then.Therefore, repeated sampling speed has finally defined the input rank mapping.Usually, each sampling comprises I or Q data, can have different the arrangement in the input rank.Yet, should be noted that if only use real mode relevant no Q sample space can be filled with real data, input rank is separated to use an equal 2M correlator effectively.Optionally, half of input sample resolution also can be used 2M encapsulation of data sampling if desired.
Be reading of data from input rank, decoder 206 selects data and forward pass to give correlator (as one of Fig. 2-Fig. 4).Once more, the address of the data that read is provided by new sampling address or correlator address (if data will by re-correlation) under microcode control.Repeated sampling provides column position, and this position is by address decoder 212 feed-in decoders 206.Memory technology of the present invention provides 2M continuous sampling with the input data of two RAM storehouse addressings.Like this, two storehouses provide the advantage that two row addresses being provided by the individual address pointer only are provided, and decoder 212 reads in correlator data.For example, but input sample 0,2,4,6}, sampling 2,4,6, and 8}, { 4,6,8, { 6,8,10,12} is to the M correlator for 10} or sampling in sampling; Only there is the individual address pointer all addresses.Then, when data during not around the memory location, two addresses are identical.If data ring around, the address in storehouse 1 is different with the address in storehouse 2.The benefit that has not had the input rank of two storehouses can need mutiread to get port ram, can increase and implement this RAM cost on hardware.
In actual use, the individual address pointed is from the beginning of the input data M sampling in two storehouses of memory.Decoder 206 provides each address, storehouse, and by selecting a correct M continuous sequence high-resolution is provided from 2M sampling, and it is actually multiplexed from the respective column in each storehouse.The correct address of the RAM that will read is determined in the address that microcode by programmable correlator or processor provides.The of the present invention couple of storehouse embodiment allows the memory technology using a write port, a read port RAM and guarantee not visit simultaneously two (row) addresses in each storehouse of RAM, got rid of the conflict (promptly therefore using the separation RAM of minimal amount to realize input rank) of storage resources like this.
This memory technology is considered the repeated sampling rate and the sampling accuracy of input data, thereby allows M or the continuous full chip of 2M to select.That is, any repeated sampling position that microcode can be chosen in the full chip of data begins, and chooses the M or 2M the sampling of separating with full chip length, thereby obtains the sampling of the inherent identical sampling phase of chip.In addition, input rank can be segmented in the software to accept the data sampling from a plurality of different input sources (for example ADC), can data sampling be placed on the different addresses of input rank according to input source.This performance makes multi-antenna diversity demodulation and two diverse communication systems of parallel receive (for example GPS and 3GPP WCDMA) become possibility.
M sampling from RAM is gone up necessary correct ordering in the time (or rotation), to proofread and correct the sampling of arranging in chronological order.Preferably, by sending the data directly to correlator and rearranging (or rotation) PN chip sequence but not data sampling is realized with low implementation cost as described.Rearrange the PN chip sequence by the time (rotation) in the PN cross-bar unit, PN cross-bar unit operation and barrel shifter are similar, thereby and the input rank time sequencing that is provided to the data sampling of programmable correlator mate.This allows lower door counting equipment, because rotation single-bit PN chip (+/-1) data are easier than rotating required 2K bit data value, the both can be a complex values.Optionally, can use input data cross-bar unit directly to rearrange or the spin data sampling from input rank.
In a preferred embodiment, the present invention provides further processing throughput performance gain by a plurality of (N) different code phases of relevant PN sequence able to programme simultaneously (and add up a plurality of and), as shown in Figure 8.For scanning relevant different code phases, need when given PN sequence set, provide extra sampled data set to be correlated with.In this embodiment, relevant N phase place, and need to use N complex correlator 140.The tolerable quantity that is limited in required hardware separately (for example chip size) to this method.In a preferred embodiment identical sampled data set is used for the correlator that each has a plurality of skew PN sign indicating number sequences, because this method is than the optional method use hardware still less of foregoing description.The preferred realization of N code phases and line correlation provides the individual data collection, and uses extra (for example skew) these phase places of PN sequence scanning.This has increased the weight of the burden of PN generator, will produce the M+N-2 successive bits of PN sequence now, thereby correlator can utilize additional PN sign indicating number sequence data.In many cases, this extra PN information is easy to obtain.For each correlator, can use identical PNALU, PN cross bar and frequency correction (NCO) structure shared or respectively, this has further expanded the processing throughput.Preferably, N complex correlator each (and each independent frequency corrected correlation results) used independent local accumulator.Therefore, can handle (or relevant) M chips/data samples per clock cycle, each crosses over N possibility code phase, and further each crosses over F frequency shift (FS) (being used for the frequency correction coherent correlation as mentioned above), produces MxNxF in theory and handle throughput (per clock cycle chip) in above-mentioned processing structure of the present invention.
The present invention also provides a kind of method 300, and the software programmable that is used for cdma communication system is relevant, as shown in Figure 9.This method comprises the first step 302, provide can and the programmable complex correlator of line correlation M sampling, and input rank with two storehouses random access storage device, memory width 2M is used to write the 2K bit that I and Q sample.Preferably, programmable correlator comprises at least one local digital control generator (NCO) and frequency correction logic.NCO provides the frequency offset correction of the dot product of M data sampling or son relevant (I and Q accumulation) value simultaneously.Next step 304 comprises complex sampling is write input rank.Next step 306 comprises and reads 2M the M in the sampling, and do not have two column addresss to be visited simultaneously in each storehouse of RAM.Next step 308 comprises and line correlation M data sampling.
In practice, this method comprise and rearranging PN sign indicating number that (or rotation) generate with the step of the time sequencing that is provided to the sampled data of correlator from input rank (or rotation) coupling.Programmable correlator provides the relevant complex correlator of parallel plural number of M complex sampling.Preferably, correlation step comprises per clock cycle operation N phase place.Optionally, this method can comprise the step of segmenting input rank, wherein correlation step is included on the twice throughput level (by operating in 2M the data sampling half accuracy of M data sampling of this 2M data sampling request) and will distributes to correlator that the Q sampling is correlated with usually and be used for real mode and be correlated with.All mentioned operations fully under the control of software or microcode, thereby cause the maximum flexibility of hardware.
The invention provides a kind of correlator and memory construction, but the multiple cdma communication system that has now and advise of flexible adaptation.This realizes that by providing unstructured random access storage device to be used for input rank this input rank can be configured to be used for the particular communications system data structure.Also can successfully adapt to different sampling rates, data rate and sampling accuracy.This input rank memory addressing be reduced to simple one write, one read address port.Hardware (for example programmable correlator) also disposes and is used for effectively using this flexible storage technique and multiple operating mode on every side, and all are controlled by microcode all.Programmable correlator comprises at least one local NCO, and it is relevant to be used for frequency offset correction, for example is used in particular for gps system.In addition, the data of correlation energy able to programme on relevant simultaneously a plurality of code phases under the microcode control can also produce significantly improving on the processing speed.In addition, programmable correlator of the present invention can not provide shielding for all parallel correlators provide the data flow of enough data samplings for those.
All these technology allow every instruction or clock cycle to handle mass data sampling (or chip), and this makes whole softwares of cdma communication system (needing hardware configuration to implement usually) realize becoming possibility.Support a plurality of cdma systems by being written into different software control code sets, these control routine collection are all controlled identical basic group of programmable hardware as mentioned above.The combination of all these technology makes the high-throughput processing engine become possibility, and this engine can comprise a plurality of cdma systems with reasonable clock rate, minimizes hardware implementation cost, reduces power consumption.
Be to be understood that wording or term in this employing are to describe only and not limitation purpose.Therefore, expectation the present invention includes all such possibilities, modification, equivalent and the change that falls in the subsidiary claim broad range.