JP2021524213A - Spatial layer rate allocation - Google Patents
Spatial layer rate allocation Download PDFInfo
- Publication number
- JP2021524213A JP2021524213A JP2021502480A JP2021502480A JP2021524213A JP 2021524213 A JP2021524213 A JP 2021524213A JP 2021502480 A JP2021502480 A JP 2021502480A JP 2021502480 A JP2021502480 A JP 2021502480A JP 2021524213 A JP2021524213 A JP 2021524213A
- Authority
- JP
- Japan
- Prior art keywords
- spatial
- coefficient
- input signal
- rate
- video input
- Prior art date
- Legal status (The legal status is an assumption and is not a legal conclusion. Google has not performed a legal analysis and makes no representation as to the accuracy of the status listed.)
- Granted
Links
Images
Classifications
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/30—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using hierarchical techniques, e.g. scalability
- H04N19/33—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using hierarchical techniques, e.g. scalability in the spatial domain
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/102—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or selection affected or controlled by the adaptive coding
- H04N19/124—Quantisation
- H04N19/126—Details of normalisation or weighting functions, e.g. normalisation matrices or variable uniform quantisers
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/102—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or selection affected or controlled by the adaptive coding
- H04N19/124—Quantisation
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/134—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or criterion affecting or controlling the adaptive coding
- H04N19/136—Incoming video signal characteristics or properties
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/134—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or criterion affecting or controlling the adaptive coding
- H04N19/146—Data rate or code amount at the encoder output
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/134—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or criterion affecting or controlling the adaptive coding
- H04N19/146—Data rate or code amount at the encoder output
- H04N19/147—Data rate or code amount at the encoder output according to rate distortion criteria
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/169—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding
- H04N19/17—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding the unit being an image region, e.g. an object
- H04N19/176—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding the unit being an image region, e.g. an object the region being a block, e.g. a macroblock
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/169—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding
- H04N19/18—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding the unit being a set of transform coefficients
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/169—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding
- H04N19/187—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding the unit being a scalable video layer
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/60—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using transform coding
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/90—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using coding techniques not provided for in groups H04N19/10-H04N19/85, e.g. fractals
- H04N19/91—Entropy coding, e.g. variable length coding [VLC] or arithmetic coding
Abstract
方法（４００）は、スケーリングされた映像入力信号（１２０）に対応する変換係数（２２６）を受け取る工程を備える。スケーリングされた映像入力信号（１２０）は、ベース層Ｌ０を含む複数の空間層Ｌを含む。方法はさらに、スケーリングされた映像入力信号からフレームのサンプルＳＦに基づき空間レート係数（３３２）を決定する工程を備える。空間レート係数は、スケーリングされた映像入力信号から形成された符号化ビットストリーム（２０４）の各空間層におけるビットレート割り当てのための係数を定義する。空間レート係数は、ベース層の変換係数毎のビットレートと、変換係数毎のビットの平均レートＲＬとの差によって表される。方法はさらに、空間レート係数とフレームのサンプルとに基づき各空間層にビットレートを割り当てることで、複数の空間層の歪みを低減する工程を含む。The method (400) comprises the step of receiving a conversion factor (226) corresponding to the scaled video input signal (120). The scaled video input signal (120) includes a plurality of spatial layers L including a base layer L0. The method further comprises the step of determining the spatial rate coefficient (332) from the scaled video input signal based on the sample SF of the frame. The spatial rate coefficient defines a coefficient for bit rate allocation in each spatial layer of the coded bitstream (204) formed from the scaled video input signal. The spatial rate coefficient is represented by the difference between the bit rate for each conversion coefficient of the base layer and the average rate RL of the bits for each conversion coefficient. The method further comprises the step of reducing the distortion of the plurality of spatial layers by assigning a bit rate to each spatial layer based on the spatial rate coefficient and the frame sample.
Description
本開示は、スケーラブルな映像符号化（ｖｉｄｅｏ ｃｏｄｉｎｇ）のコンテキストにおける空間層レート割り当てに関する。 The present disclosure relates to spatial layer rate allocation in the context of scalable video coding.
映像（ｖｉｄｅｏ）が広範囲のアプリケーションにおいてますます一般的になるにつれて、映像ストリームは、アプリケーションに応じて複数回、符号化（ｅｎｃｏｄｅｄ）および／または復号化（ｄｅｃｏｄｅｄ）される必要がある場合がある。例えば異なるアプリケーションおよび／または装置は、帯域幅またはリソース制約に準拠する必要がある場合がある。非常に高価であることなく、設定のいくつかの組み合わせを必要とするこれらの要求を満たすために、映像をいくつかの解像度（ｒｅｓｏｌｕｔｉｏｎｓ）に圧縮する高効率のコーデック（ｃｏｄｅｃｓ）が開発されてきた。スケーラブルＶＰ９およびＨ．２６４のようなコーデックでは、映像ビットストリームは、ユーザが異なる解像度（すなわち各空間層の解像度）で元の映像を再構成することを可能にする複数の空間層を含むことができる。スケーラブルな機能を有することによって、映像コンテンツは装置から、限定されたさらなる処理を有する装置に送達され得る。 As video becomes more and more common in a wide range of applications, video streams may need to be coded and / or decoded multiple times depending on the application. For example, different applications and / or devices may need to comply with bandwidth or resource constraints. High-efficiency codecs have been developed to compress video to several resolutions to meet these demands, which require several combinations of settings without being very expensive. .. Scalable VP9 and H.M. In codecs such as 264, the video bitstream can include multiple spatial layers that allow the user to reconstruct the original video at different resolutions (ie, the resolution of each spatial layer). By having a scalable function, the video content can be delivered from the device to a device with limited additional processing.
ビットレートを割り当てる方法を改善する余地がある。 There is room for improvement in the way bitrates are assigned.
本開示の一態様は、ビットレートを割り当てる方法を提供する。この方法は、データ処理ハードウェアにおいて、スケーリングされた映像入力信号に対応する変換係数（Ｔｒａｎｓｆｏｒｍ ｃｏｅｆｆｉｃｉｅｎｔ）を受信する工程を含み、スケーリングされた映像入力信号は複数の空間層を含み、複数の空間層はベース層を含む。この方法はまた、データ処理ハードウェアによって、スケーリングされた映像入力信号からのフレームのサンプル（ｓａｍｐｌｅ ｏｆ ｆｒａｍｅｓ）に基づき、空間レート係数（Ｓｐａｔｉａｌ ｒａｔｅ ｆａｃｔｏｒ）を決定する工程を含む。空間レート係数は、スケーリングされた映像入力信号から形成された符号化ビットストリーム（ｅｎｃｏｄｅｄ ｂｉｔ ｓｔｒｅａｍ）の各空間層における、ビットレート割り当てのための係数を定義する。空間レート係数は、ベース層の変換係数当たりのビットレートと、複数の空間層の変換係数当たりのビットの平均レートとの差によって表される。本方法はまた、空間レート係数とフレームのサンプルとに基づき、各空間層にビットレートを割り当てることによって、符号化ビットストリームの複数の空間層の歪みを低減する工程を含む。 One aspect of the present disclosure provides a method of assigning bit rates. This method includes the step of receiving a conversion coefficient corresponding to the scaled video input signal in the data processing hardware, and the scaled video input signal includes a plurality of spatial layers and a plurality of spatial layers. Includes base layer. The method also includes determining the spatial rate factor based on sample of frames from the scaled video input signal by the data processing hardware. The spatial rate coefficient defines a coefficient for bit rate allocation in each spatial layer of an encoded bitstream formed from a scaled video input signal. The spatial rate coefficient is represented by the difference between the bit rate per conversion factor of the base layer and the average rate of bits per conversion coefficient of the plurality of spatial layers. The method also includes reducing distortion of multiple spatial layers of the encoded bitstream by assigning bit rates to each spatial layer based on spatial rate coefficients and frame samples.
本開示の実装は、以下の任意の特徴のうちの１つまたは複数を含むことができる。いくつかの実装形態では、この方法はまた、データ処理ハードウェアにおいて、スケーリングされた映像入力信号からフレームの第２サンプルを受信する工程と、スケーリングされた映像入力信号からのフレームの第２サンプルに基づき、空間レート係数をデータ処理ハードウェアによって修正（ｍｏｄｉｆｙ）する工程と、データ処理ハードウェアによって、修正された空間レート係数とフレームの第２サンプルとに基づき、各空間層に修正されたビットレートを割り当てる工程とを含む。追加の実装形態では、本方法はまた、データ処理ハードウェアにおいて、スケーリングされた映像入力信号からフレームの第２サンプルを受信する工程と、データ処理ハードウェアによって、フレーム毎ベースで（ｆｒａｍｅ−ｂｙ−ｆｒａｍｅ ｂａｓｉｓ）、指数移動平均に基づき空間レート係数を修正する工程とであって、指数移動平均は少なくともフレームのサンプルとフレームの第２サンプルとに対応する、前記空間レート係数を修正する工程と、修正された空間レート係数に基づき各空間層に、修正されたビットレートをデータ処理ハードウェアによって割り当てる工程とを含む。 Implementations of the present disclosure may include one or more of any of the following features: In some embodiments, this method also involves receiving a second sample of the frame from the scaled video input signal and a second sample of the frame from the scaled video input signal in the data processing hardware. Based on the process of modifying the spatial rate coefficient by the data processing hardware and the modified bit rate for each spatial layer based on the modified spatial rate coefficient and the second sample of the frame by the data processing hardware. Includes the process of allocating. In an additional embodiment, the method also receives a second sample of frames from the scaled video input signal in the data processing hardware and, by the data processing hardware, on a frame-by-frame basis (frame-by-). frame base), a step of modifying the spatial rate coefficient based on the exponential moving average, wherein the exponential moving average corresponds to at least a frame sample and a frame second sample, and a step of modifying the spatial rate coefficient. It includes a step of assigning a modified bit rate to each spatial layer based on the modified spatial rate coefficient by data processing hardware.
一部の例では、スケーリングされた映像入力信号を受信する工程は、映像入力信号を受信する工程と、映像入力信号を複数の空間層にスケーリングする工程と、各空間層をサブブロックに分割する工程と、各サブブロックを変換係数に変換する工程と、各サブブロックに対応する変換係数をスカラー量子化する工程とを含む。スケーリングされた映像入力信号からのフレームのサンプルに基づき空間レート係数を決定する工程は、映像入力信号の全てのフレームにわたる変換ブロックの平均に基づき、各スカラー量子化された変換係数の分散推定（ｖａｒｉａｎｃｅ ｅｓｔｉｍａｔｉｏｎｓ）を決定する工程を含むことができる。ここで、各サブブロックの変換係数は、全てのサブブロックにわたって同一に分布（ｉｄｅｎｔｉｃａｌｌｙ ｄｉｓｔｒｉｂｕｔｅｄ）されてもよい。 In some examples, the process of receiving the scaled video input signal includes the process of receiving the video input signal, the process of scaling the video input signal into a plurality of spatial layers, and dividing each spatial layer into subblocks. It includes a step, a step of converting each subblock into a conversion coefficient, and a step of scalar quantization of the conversion coefficient corresponding to each subblock. The process of determining the spatial rate coefficient based on a sample of frames from a scaled video input signal is a variance estimation of each scalar-quantized conversion coefficient based on the average of the conversion blocks over all frames of the video input signal. It can include a step of determining the estimations). Here, the conversion coefficients of each subblock may be identically distributed across all subblocks.
いくつかの実装形態では、この方法は、データ処理ハードウェアによって、空間レート係数が空間レート係数閾値を満足することを決定する工程も含む。これらの実施形態では、空間レート係数閾値に対応する値が約１．０未満で約０．５よりも大きい場合に、空間レート係数閾値に対応する値は空間レート係数閾値を満たすことができる。空間レート係数は、符号化ビットストリームの各層にビットレートを割り当てるように構成された、単一のパラメータを含むことができる。いくつかの例では、空間レート係数は、分散の積の比率に対応する加重和（ｗｅｉｇｈｔｅｄ ｓｕｍ）を含み、比は、第１空間層からのスカラー量子化された変換係数の推定分散（ｅｓｔｉｍａｔｅｄ ｖａｒｉａｎｃｅｓ）に基づく分子と、第２空間層からのスカラー量子化された変換係数の推定分散に基づく分母とを含む。 In some implementations, the method also includes the step of determining that the spatial rate coefficient satisfies the spatial rate coefficient threshold by the data processing hardware. In these embodiments, the value corresponding to the spatial rate coefficient threshold can satisfy the spatial rate coefficient threshold when the value corresponding to the spatial rate coefficient threshold is less than about 1.0 and greater than about 0.5. The spatial rate factor can include a single parameter configured to assign a bit rate to each layer of the coded bitstream. In some examples, the spatial rate coefficients include a weighted sum corresponding to the ratio of the product of the variances, and the ratios are the estimated variances of the scalar-quantized conversion coefficients from the first spatial layer. ), And a denominator based on the estimated variance of the scalar-quantized conversion coefficients from the second spatial layer.
本開示の別の態様は、ビットレートを割り当てるシステムを提供する。システムは、データ処理ハードウェアと、データ処理ハードウェアに通信するメモリハードウェアとを含む。メモリハードウェアは命令を記憶し、命令はデータ処理ハードウェアによって実行されると、データ処理ハードウェアに動作を実行させる。動作は、スケーリングされた映像入力信号に対応する変換係数を受信する工程を含み、スケーリングされた映像入力信号は複数の空間層を含み、複数の空間層はベース層を含む。動作はまた、スケーリングされた映像入力信号からのフレームのサンプルに基づき、空間レート係数を決定する工程を含む。空間レート係数は、スケーリングされた映像入力信号から形成された符号化ビットストリームの各空間層における、ビットレート割り当てのための係数を定義する。空間レート係数は、ベース層の変換係数当たりのビットレートと、複数の空間層の変換係数当たりのビットの平均レートとの差によって表される。動作はまた、空間レート係数とフレームのサンプルとに基づき、各空間層にビットレートを割り当てることによって、符号化ビットストリームの複数の空間層の歪みを低減する工程を含む。 Another aspect of the present disclosure provides a system for allocating bit rates. The system includes data processing hardware and memory hardware that communicates with the data processing hardware. The memory hardware stores the instructions, and when the instructions are executed by the data processing hardware, it causes the data processing hardware to perform its actions. The operation includes the step of receiving the conversion coefficient corresponding to the scaled video input signal, the scaled video input signal includes a plurality of spatial layers, and the plurality of spatial layers includes a base layer. The operation also includes determining the spatial rate factor based on a sample of frames from the scaled video input signal. The spatial rate coefficient defines a coefficient for bit rate allocation in each spatial layer of a coded bitstream formed from a scaled video input signal. The spatial rate coefficient is represented by the difference between the bit rate per conversion factor of the base layer and the average rate of bits per conversion coefficient of the plurality of spatial layers. The operation also includes the step of reducing distortion of multiple spatial layers of the encoded bitstream by assigning bit rates to each spatial layer based on the spatial rate factor and a sample of frames.
この態様は、以下の任意の特徴のうちの１つ以上を含むことができる。いくつかの実装形態では、動作は、スケーリングされた映像入力信号からフレームの第２サンプルを受信する工程と、スケーリングされた映像入力信号からのフレームの第２サンプルに基づき空間レート係数を修正する工程と、修正された空間レート係数とフレームの第２サンプルとに基づき、各空間層に修正されたビットレートを割り当てる工程とを含む。追加の実装では、動作はさらに、スケーリングされた映像入力信号からフレームの第２サンプルを受信する工程と、フレーム毎のベースで指数移動平均に基づき空間レート係数を修正する工程であって、指数移動平均は少なくともフレームのサンプルとフレームの第２サンプルとに対応する、前記フレームの第２サンプルを修正する工程と、修正されたビットレートを、修正された空間レート係数に基づき各空間層に割り当てる工程とを含む。 This aspect can include one or more of any of the following features: In some embodiments, the operation is the step of receiving a second sample of the frame from the scaled video input signal and the step of modifying the spatial rate coefficient based on the second sample of the frame from the scaled video input signal. And the step of assigning the modified bit rate to each spatial layer based on the modified spatial rate coefficient and the second sample of the frame. In an additional implementation, the operation is further exponential movement, with the step of receiving a second sample of the frame from the scaled video input signal and the step of modifying the spatial rate coefficient based on the exponential moving average on a frame-by-frame basis. A step of modifying the second sample of the frame, the average of which corresponds to at least a sample of the frame and a second sample of the frame, and a step of assigning the modified bit rate to each spatial layer based on the modified spatial rate coefficient. And include.
一部の例では、スケーリングされた映像入力信号を受信する工程は、映像入力信号を受信する工程と、映像入力信号を複数の空間層にスケーリングする工程と、各空間層をサブブロックに分割する工程と、各サブブロックを変換係数に変換する工程と、各サブブロックに対応する変換係数をスカラー量子化する工程とを含む。スケーリングされた映像入力信号からのフレームのサンプルに基づき空間レート係数を決定する工程は、映像入力信号のフレームの全ての変換ブロックにわたる平均に基づき、各スカラー量子化された変換係数の分散推定を決定する工程を含むことができる。ここで、各サブブロックの変換係数は、全てのサブブロックにわたって同一に分布されてもよい。 In some examples, the process of receiving the scaled video input signal includes the process of receiving the video input signal, the process of scaling the video input signal into a plurality of spatial layers, and dividing each spatial layer into subblocks. It includes a step, a step of converting each subblock into a conversion coefficient, and a step of scalar quantization of the conversion coefficient corresponding to each subblock. The step of determining the spatial rate coefficients based on a sample of frames from a scaled video input signal determines the variance estimation of each scalar-quantized conversion factor based on the average over all conversion blocks of the frame of the video input signal. The steps to be performed can be included. Here, the conversion coefficient of each subblock may be uniformly distributed over all the subblocks.
いくつかの実装形態では、動作は、空間レート係数が空間レート係数閾値を満足することを決定する工程も含む。これらの実装形態では、空間レート係数閾値に対応する値は、値が約１．０未満で約０．５よりも大きい場合に、空間レート係数閾値を満たしてもよい。空間レート係数は、符号化ビットストリームの各層にビットレートを割り当てるように構成された、単一のパラメータを含むことができる。いくつかの例では、空間レート係数は、分散の積の比に対応する加重和を含み、比は、第１空間層からのスカラー量子化された変換係数の推定分散に基づく分子と、第２空間層からのスカラー量子化された変換係数の推定分散に基づく分母とを含む。 In some implementations, the operation also includes the step of determining that the spatial rate coefficient satisfies the spatial rate coefficient threshold. In these implementations, the value corresponding to the spatial rate coefficient threshold may satisfy the spatial rate coefficient threshold when the value is less than about 1.0 and greater than about 0.5. The spatial rate factor can include a single parameter configured to assign a bit rate to each layer of the coded bitstream. In some examples, the spatial rate coefficients include a weighted sum corresponding to the ratio of the product of the variances, and the ratios are the molecules based on the estimated variance of the scalar quantized conversion coefficients from the first spatial layer, and the second. Includes a denominator based on the estimated variance of the scalar quantized transformation coefficients from the spatial layer.
本開示の１つ以上の実装の詳細は、添付の図面および以下の明細書に記載されている。他の態様、特徴、および利点は、明細書および図面および特許請求の範囲から明らかになるであろう。 Details of one or more implementations of the present disclosure are given in the accompanying drawings and the following specification. Other aspects, features, and advantages will become apparent from the specification and drawings and the claims.
様々な図面における同様の参照符号は同様の要素を示す。
図１は、レート割り当てシステム１００の例である。レート割り当てシステム１００は、一般に、映像入力信号１２０としてキャプチャされた映像を、ネットワーク１３０を介してリモートシステム１４０に通信する映像ソース装置１１０を含む。リモートシステム１４０において、エンコーダ２００およびアロケータ３００は、映像入力信号１２０を、符号化ビットストリーム２０４に変換する。符号化ビットストリーム２０４は、複数の空間層Ｌ０〜Ｌｉを含み、ｉは空間層Ｌ０〜Ｌｉの数を指定する。各空間層Ｌは、符号化ビットストリーム２０４のスケーラブルな形態である。スケーラブル映像ビットストリームとは、映像ビットストリームをいい、ビットストリームの一部は、いくつかのターゲットデコーダに対して有効なビットストリームを形成するサブストリーム（例えば空間層Ｌ）が生じるように、除去されることができる。より詳細には、サブストリームは、元のキャプチャされた映像の品質よりも低い再構成品質を有する、元の映像入力信号１２０のソースコンテンツ（例えばキャプチャされた映像）を生成する。例えば第１空間層Ｌ１は１２８０×７２０の７２０ｐ高精細度（ＨＤ）解像度を有し、一方でベース層Ｌ０は、映像グラフィックスアダプタ解像度（ＶＧＡ）の拡張形態として６４０×３６０の解像度にスケーリングする。スケーラビリティの点で、一般に、映像は、一時的にスケーラブル（例えばフレームレートによって）であったり、空間的（例えば空間解像度によって）であったり、および／または品質（例えば信号対雑音比ＳＮＲと呼ばれる忠実度（ｆｉｄｅｌｉｔｙ））によったりする。
Similar reference numerals in various drawings indicate similar elements.
FIG. 1 is an example of the
レート割り当てシステム１００は、ユーザ１０、１０ａが映像ソース装置１１０で映像をキャプチャし、キャプチャされた映像を他のユーザ１０、１０ｂ〜１０ｃに通信する例示的な環境である。ここで、キャプチャされた映像をユーザ１０ｂ、１０ｃが映像受信装置１５０、１５０ｂ〜１５０ｃを介して受信する前に、エンコーダ２００およびアロケータ３００は、キャプチャされた映像を、割り当てられたビットストリームレートで、符号化ビットストリーム２０４に変換する。各映像受信装置１５０は、異なる映像解像度を受信および／または処理するように構成することができる。ここで、より大きい層番号ｉを有する空間層Ｌは、より大きい解像度を有する層Ｌを指し、ｉ=０は、複数の空間層Ｌ０〜Ｌｉのビットストリームのうちの最も低いスケーラブルな解像度を有するベース層Ｌ０を指す。図１を参照すると、符号化された映像ビットストリーム２０４は、２つの空間層Ｌ０、Ｌ１を含む。したがって、１つの映像受信装置１５０は、低解像度空間層Ｌ０として映像コンテンツを受信することができ、一方で、別の映像受信装置１５０は、高解像度空間層Ｌ１として映像コンテンツを受信することができる。例えば図１は、ユーザ１０ｂの第１映像受信装置１５０ａを、低解像度空間層Ｌ０を受信する携帯電話機として示し、ラップトップとしての第２受信装置１５０ｂを有するユーザ１０ｃは、高解像度空間層Ｌ１を受信する。
The
異なる映像受信装置１５０ａ〜１５０ｂが異なる空間層Ｌ０〜Ｌｉを受信するとき、各空間層Ｌの映像品質は、受信された空間層ＬのビットレートＢＲおよび／または割り当て係数ＡＦに依存しうる。ここで、ビットレートＢＲは１秒当たりのビット（ｂｉｔｓ ｐｅｒ ｓｅｃｏｎｄ）に対応し、割り当て係数ＡＦは、サンプル当たりのビット（すなわち、変換係数）に対応する。スケーラブルビットストリーム（例えば符号化ビットストリーム２０４）の場合、スケーラブルビットストリームの総ビットレートＢＲｔｏｔは、スケーラブルビットストリームの各空間層Ｌが同様のビットレート制約を受けるように、しばしば制約される。これらの制約のために、１つの空間層Ｌに関連するビットレートＢＲは、別の空間層Ｌの品質を損なうか、またはトレードオフする可能性がある。より詳細には、映像受信装置１５０を介してユーザ１０によって受信された空間層Ｌ上で品質が損なわれた場合、品質はユーザ経験に否定的な効果を生成する可能性がある。例えばリアルタイム通信（ＲＴＣ）アプリケーションを介した通信の形態として映像コンテンツを転送することは、より一般的になりつつある。ＲＴＣアプリケーションのユーザ１０は、アプリケーションの主観的な品質（ｓｕｂｊｅｃｔｉｖｅ ｑｕａｌｉｔｙ）に基づき通信のためのアプリケーションを選択することが多い。したがって、アプリケーションユーザとして、ユーザ１０は、一般に、アプリケーションユーザ１０が受け取る空間層Ｌへの不十分なビットレート割り当てに起因する可能性がある品質問題なしに、前向きな通信体験（ｐｏｓｉｔｉｖｅ ｃｏｍｍｕｎｉｃａｔｉｏｎ ｅｘｐｅｒｉｅｎｃｅ）を有することを望んでいる。前向きなユーザ経験（ｐｏｓｉｔｉｖｅ ｕｓｅｒ ｅｘｐｅｒｉｅｎｃｅ）を確実にすることを支援するために、アロケータ３００は、割り当て係数ＡＦを適応的に通信して、複数の空間層Ｌ０〜Ｌｉのうちの各空間層Ｌに対するビットレートＢＲを決定するように構成される。複数の空間層Ｌ０〜Ｌｉの中で割り当て係数ＡＦを解析的に割り当てることによって、アロケータ３００は、所与の総ビットレートＢＲｔｏｔに対して全ての空間層Ｌ０〜Ｌｉにわたって最高の映像品質を達成しようとする。
When
映像ソース装置１１０は、キャプチャされた映像および／または映像入力信号１２０をネットワーク１３０および／またはリモートシステム１４０に通信することができる任意の計算装置またはデータ処理ハードウェアであってもよい。いくつかの例では、映像ソース装置１１０は、データ処理ハードウェア１１２、メモリハードウェア１１４、および映像キャプチャ装置１１６を含む。いくつかの実装形態では、映像キャプチャ装置１１６は、実際には、キャプチャされた画像のシーケンスを映像コンテンツとして通信することができる画像キャプチャ装置である。例えばいくつかのデジタルカメラおよび／またはウェブカムは、特定の周波数で画像をキャプチャして、知覚される映像コンテンツを形成するように構成される。他の例では、映像ソース装置１１０は、続いてデジタルフォーマットに変換され得る連続的なアナログフォーマットで映像をキャプチャする。いくつかの構成では、映像ソース装置１１０は、キャプチャされたデータ（例えば、アナログまたはデジタル）を、エンコーダ２００によってさらに処理されるフォーマットに最初にエンコードまたは圧縮するためのエンコーダを含む。他の例では、映像ソース装置１１０は、映像ソース装置１１０においてエンコーダ２００にアクセスするように構成される。例えばエンコーダ２００は、リモートシステム１４０上にホストされたウェブアプリケーションであり、映像ソース装置１１０によってネットワーク接続を介してアクセス可能である。例えば他の例では、エンコーダ２００および／またはアロケータ３００の部分または全部は、映像ソース装置１１０上でホストされる。例えば、エンコーダ２００およびアロケータ３００は、映像ソース装置１１０上でホストされるが、リモートシステム１４０は、映像受信装置１５０の復号機能に応じて、および映像受信装置１５０とリモートシステム１４０との間のネットワーク１３０の接続の容量に応じて、空間層Ｌ０〜Ｌｉを含むビットストリームを映像受信装置１５０に中継するバックエンドシステムとして機能する。追加的にまたは代替的に、映像ソース装置１１０は、映像キャプチャ装置１１６を利用して、ユーザ１０ａがネットワーク１３０を介して他のユーザ１０ｂ〜１０ｃに通信するように係わるように、構成されている。
The
映像入力信号１２０は、キャプチャされた映像コンテンツに対応する映像信号である。ここで、映像ソース装置１１０は、映像コンテンツをキャプチャする。例えば図１は、ウェブカメラ１１６を介して映像コンテンツをキャプチャする映像ソース装置１１０を示している。いくつかの例では、映像入力信号１２０は、エンコーダ２００によってデジタルフォーマットに処理されるアナログ信号である。他の例では、映像入力信号１２０は、エンコーダ２００が再量子化プロセスを実行するように、エンコーダ２００の前に何らかのレベルの符号化またはデジタルフォーマット化を受けている。
The
映像ソース装置１１０と同様に、映像受信装置１５０は、ネットワーク１３０および／またはリモートシステム１４０を介して通信されたキャプチャ映像を受信することができる任意の計算装置またはデータ処理ハードウェアであってもよい。いくつかの例では、映像ソース装置１１０および映像受信装置１５０は、映像受信装置１５０が映像ソース装置１１０となり、映像ソース装置１１０が映像受信装置１５０となるような同一の機能で構成される。いずれの場合も、映像受信装置１５０は、少なくともデータ処理ハードウェア１５２およびメモリハードウェア１５４を含む。さらに、映像受信装置１５０は、受信した映像コンテンツ（例えば符号化ビットストリーム２０４の少なくとも１つの層Ｌ）を表示するように構成されたディスプレイ１５６を含む。図１に示すように、ユーザ１０ｂ、１０ｃは、符号化ビットストリーム２０４をビットレートＢＲで空間層Ｌとして受信し、符号化ビットストリーム２０４を映像としてディスプレイ１５６に復号して表示する。いくつかの例では、映像受信装置１５０が符号化ビットストリーム２０４の内容を表示することを可能にするために、映像受信装置１５０はデコーダを含み、またはデコーダに（例えばネットワーク１３０を介して）アクセスするように構成される。
Similar to the
いくつかの実施形態では、エンコーダ２００および／またはアロケータ３００は、クラウド環境の分散システムなどのリモートシステム１４０によってホストされるアプリケーションであり、映像ソース装置１１０および／または映像受信装置１５０を介してアクセスされる。いくつかの実装形態では、エンコーダ２００および／またはアロケータ３００は、映像ソース装置１１０および／または映像受信装置１５０のメモリハードウェア１１４，１５４にダウンロードされたアプリケーションである。エンコーダ２００および／またはアロケータ３００へのアクセスポイントにかかわらず、エンコーダ２００および／またはアロケータ３００は、リモートシステム１４０に通信して、リソース１４２（例えばデータ処理ハードウェア１４４、メモリハードウェア１４６、またはソフトウェアリソース１４８）にアクセスするように構成することができる。リモートシステム１４０のリソース１４２へのアクセスは、エンコーダ２００および／またはアロケータ３００が映像入力信号１２０を符号化ビットストリーム２０４に符号化すること、および／またはビットレートＢＲを符号化ビットストリーム２０４の複数の空間層Ｌ０〜Ｌｉの各空間層Ｌに割り当てることを可能にし得る。任意選択で、リアルタイム通信（ＲＴＣ）アプリケーションは、ユーザ１０，１０ａ〜１０ｃの間で通信するために使用されるリモートシステム１４０のソフトウェアリソース１４８として、組み込み機能としてのエンコーダ２００および／またはアロケータ３００を備える。
In some embodiments, the
図１をさらに詳細に参照すると、３人のユーザ１０、１０ａ〜１０ｃは、リモートシステム１４０によってホストされるＲＴＣアプリケーション（例えばクラウドによってホストされるｗｅｂＲＴＣ映像アプリケーション）を介して通信する。この例では、第１ユーザ１０ａは、第２ユーザ１０ｂおよび第３ユーザ１０ｃとのグループ映像チャットをしている。話している第１ユーザ１０ａの映像を映像キャプチャ装置１１６がキャプチャすると、映像入力信号１２０を介してキャプチャされた映像は、エンコーダ２００およびアロケータ３００によって処理され、ネットワーク１３０を介して通信される。ここで、エンコーダ２００およびアロケータ３００は、ＲＴＣアプリケーションと共に動作して、複数の空間層Ｌ０、Ｌ１を有する符号化ビットストリーム２０４を生成する。ここで各空間層Ｌは、映像入力信号１２０に基づき割り当て係数ＡＦ０、ＡＦ１によって決定される割り当てられたビットレートＢＲ０、ＢＲ１を有する。各映像受信装置１５０ａ、１５０ｂの性能に起因して、チャットする第１ユーザ１０ａの映像を受信する各ユーザ１０ｂ、１０ｃは、映像入力信号１２０に対応する元の映像の異なるスケーリングされたバージョンを受信する。例えば第２ユーザ１０ｂはベース空間層Ｌ０を受信し、第３ユーザ１０ｃは第１空間層Ｌ１を受信する。各ユーザ１０ｂ、１０ｃは、受信した映像コンテンツを、ＲＴＣアプリケーションに通信するディスプレイ１５６ａ、１５６ｂに表示する。ＲＴＣ通信アプリケーションが示されているが、エンコーダ２００および／またはアロケータ３００は、複数の空間層Ｌ０〜Ｌｉを有する符号化ビットストリーム２０４を含む他のアプリケーションで使用されてもよい。
With reference to FIG. 1 in more detail, the three
図２は、エンコーダ２００の例である。エンコーダ２００は、入力２０２としての映像入力信号１２０を、出力２０４としての符号化ビットストリームに変換するように構成されている。個々に示されているが、エンコーダ２００およびアロケータ３００は、単一の装置（例えば図１に点線で示すように）に統合されてもよく、または複数の装置（例えば映像入力装置１１０、映像受信装置１５０、またはリモートシステム１４０）にわたって別々に発生してもよい。エンコーダ２００は、一般に、スケーラ２１０、変換器２２０、量子化器２３０、およびエントロピエンコーダ２４０を含む。図示されていないが、エンコーダ２００は、符号化ビットストリーム２０４を生成するための追加の構成要素を含むことができ、追加の構成要素は、予測成分（例えば動き推定およびイントラ予測）および／またはインループフィルタなどである。予測成分は、変換のために変換器２２０に伝達される残差を生成し、残差は、元の入力フレームからフレームの予測（例えば動き補償またはフレーム内予測）を引いた差分に基づく。
FIG. 2 is an example of the
スケーラ２１０は、映像入力信号１２０を複数の空間層Ｌ０〜Ｌｉにスケーリングするように構成される。いくつかの実装形態では、スケーラ２１０は、空間分解能を低減するために除去され得る映像入力信号１２０の部分を決定することによって、映像入力信号１２０をスケーリングする。部分または複数の部分を除去することによって、スケーラ２１０は、映像入力信号１２０のバージョンを形成し、複数の空間層（例えばサブストリーム）を形成する。スケーラ２１０は、スケーラ２１０がベース空間層Ｌ０を形成するまで、このプロセスを繰り返すことができる。いくつかの例では、スケーラ２１０は、映像入力信号１２０をスケーリングして、設定された数の空間層Ｌ０〜Ｌｉを形成する。他の例では、スケーラ２１０は、サブストリームを復号するためのデコーダが存在しないとスケーラ２１０が判定するまで、映像入力信号１２０をスケーリングするように構成される。スケーラ２１０が、映像入力信号１２０のスケーリングされたバージョンに対応するサブストリームを復号するデコーダが存在しないと判定した場合、スケーラ２１０は、前のバージョン（例えば空間層Ｌ）をベース空間層Ｌ０とする。スケーラ２１０のいくつかの例は、Ｈ．２６４映像圧縮規格の拡張またはＶＰ９符号化フォーマットの拡張のような、スケーラブル映像符号化（ＳＶＣ）拡張に対応するコーデックを含む。
Scaler 210 is configured to scale the
変換器２２０は、スケーラ２１０からの映像入力信号１２０に対応する各空間層Ｌを受け取るように構成される。空間層Ｌ毎に、変換器２２０は、動作２２２において、各空間層Ｌをサブブロックに分割する。各サブブロックを用いて動作２２４において、変換器２２０は、各サブブロックを変換して変換係数２２６を生成する（例えば離散コサイン変換（ＤＣＴ）によって）。変換係数２２６を生成することによって、変換器２２０は、冗長映像データと非冗長映像データとを相関させて、エンコーダ２００による冗長映像データの除去を助けることができる。いくつかの実装形態では、変換係数はまた、アロケータ３００が、空間層Ｌ内の非ゼロ分散を有する変換ブロック毎の係数の数を容易に決定することを可能にする。
The converter 220 is configured to receive each spatial layer L corresponding to the
量子化器２３０は、量子化または再量子化プロセス２３２（スカラー量子化）を実行するように構成される。量子化プロセスは、一般に、入力パラメータ（例えば連続するアナログデータセットから）を、出力値のより小さいデータセットに変換する。量子化プロセスは、アナログ信号をデジタル信号に変換することができるが、ここでは、量子化プロセス２３２（再量子化プロセスとも呼ばれることもある）は、通常、デジタル信号をさらに処理する。映像入力信号１２０の形態に応じて、いずれかのプロセスを交換可能に使用することができる。量子化または再量子化プロセスを使用することによって、データは圧縮されることが可能であるが、より小さいデータセットはより大きいまたは連続的なデータセットの減少であるので、データ損失のいくつかの態様のコストである。ここで、量子化プロセス２３２は、デジタル信号を変換する。いくつかの例では、量子化器２３０は、変換器２２０からの各サブブロックの変換係数２２６を量子化インデックス２３４にスカラー量子化することによって、符号化ビットストリーム２０４の形成に寄与する。ここで、変換係数２２６をスカラー量子化することによって、非可逆的な符号化を可能にして、冗長な映像データ（例えば符号化中に除去され得るデータ）を、貴重な映像データ（例えば除去すべきでないデータ）にコントラストさせるために、各変換係数２２６をスケーリングすることができる。
The
エントロピエンコーダ２４０は、量子化インデックス２３４（すなわち、量子化された変換係数）およびサイド情報を、ビットに変換するように構成される。この変換によって、エントロピエンコーダ２４０は、符号化ビットストリーム２０４を形成する。いくつかの実装形態では、量子化器２３０と共にエントロピエンコーダ２４０は、エンコーダ２００が符号化ビットストリームを形成することを可能にし、ここで各層Ｌ０〜Ｌｉは、アロケータ３００によって決定された割り当て係数ＡＦ０〜ＡＦｉに基づきビットレートＢＲ０〜ＢＲｉを有する。
The
図３は、アロケータ３００の例である。アロケータ３００は、複数の空間層Ｌ０〜Ｌｉに関連する非量子化された変換係数２２６を受信し、各受信された空間層Ｌ０〜Ｌｉについて割り当て係数ＡＦを決定するように構成される。いくつかの実装において、アロケータ３００は、スカラー量子化のための二乗誤差ベースの高速近似に基づき、各割り当て係数ＡＦを決定する。二乗誤差の高速近似によって、システムは、Ｎ個のスカラー量子化器を割り当てるために（高速近似のコンテキストで）最適なビットレートを決定することが可能になる。典型的には、ｎ個のスカラー量子化器に割り当てられる最適ビットレートは、レート−歪み最適化量子化によって決定される。レート−歪み最適化は、ビットレート制約（例えば総ビットレートＢＲｔｏｔ）による歪みの量（すなわち、映像品質の損失）を最小化することによって、映像圧縮中の映像品質を改善することを追求する。ここで、アロケータ３００は、Ｎ個のスカラー量子化器の最適ビットレートを決定する原理を適用し、符号化ビットストリーム２０４の複数の空間層Ｌ０〜Ｌｉの各々にビットレートを割り当てるための最適な割り当て係数を決定する。
FIG. 3 is an example of the
一般的に言えば、スカラー量子化のための自乗誤差の高速近似は、以下の式で表すことができる。 Generally speaking, a fast approximation of the squared error for scalar quantization can be expressed by the following equation.
２量子化問題の平均歪みＤ、すなわちＤ２は、（ｄ０＋ｄ１）／２に等しい。同様に、２量子化問題についての平均レートＲ２は、（ｒ０＋ｒ１）／２に等しい。ここで、ｄｉは第ｉ量子化器による自乗誤差歪みであり、ｒｉは１サンプル当たりのビット単位で第ｉ量子化器に割り当てられたビットレートである。ただし、パラメータｄｉは、ｄｉ（ｒｉ）のような式が適切であるようなレートｒｉの関数であるが、便宜上、ｄｉは単に代わりにｄｉとして表される。ｄ０およびｄ１についての高速近似をＤ２の式に代入すると、次のようになる。 The average distortion D, or D 2 , of the two quantization problem is equal to (d 0 + d 1 ) / 2. Similarly, the average rate R 2 for the 2 quantization problem is equal to (r 0 + r 1 ) / 2. Here, d i is the square error distortion according i quantizer, the r i is the bit rate allocated to the i quantizer in bits per sample. However, the parameter d i is a function of the rate r i, such as a formula is appropriate as d i (r i), for convenience, d i is simply expressed as d i instead. Substituting the fast approximation for d 0 and d 1 into the equation for D 2 , we get:
２量子化器システムのための平均／量子化器の歪みは、ｄａｖｇ＝（ｄ０＋ｄ１）／２として表され、ｄａｖｇを３量子化器の歪み平均の式に代入することによって、Ｄ３＝（ｄ０＋ｄ１＋ｄ２）／３は以下の式をもたらす。 Distortion of the mean / quantizer for 2 quantizer system, d avg = represented as (d 0 + d 1) / 2, by substituting the d avg distortion average formula 3 quantizer, D 3 = (d 0 + d 1 + d 2 ) / 3 gives the following equation.
２空間層レート割り当てシステムの場合、２空間層の平均歪みＤ２は、第１および第２空間層Ｌ０、Ｌ１（すなわち空間層０および空間層１）に対応する平均歪みｄ０およびｄ１の加重和として、以下のように表すことができる。
In the case of a two-spatial layer rate allocation system, the average strain D 2 of the two spatial layers is the average strain d 0 and d corresponding to the first and second spatial layers L 0 , L 1 (that is, the
いくつかの実装形態では、式（３９）は、様々な仮定に起因して異なる形態を有する。式（３９）の２つの異なる形態を以下に示す。 In some implementations, equation (39) has different forms due to various assumptions. Two different forms of equation (39) are shown below.
他の実施態様では、エンコーダ２００は、変換係数２２６をもたらす変換ブロックを導入する。これが発生すると、変数ｓｉ′を導入する変換係数２２６のグループ化に変化が生じ得る。変数ｓｉ′は、式（３９ａ）に示されるように、第ｉ空間層Ｌｉにおける非ゼロ分散を有する変換ブロック当たりの変換係数２２６の平均数に対応する。これに対して、この変数ｓｉ′は、第ｉ空間層Ｌｉにおけるサンプル数Ｓに対応する式（３９ｂ）のｓｉに対応する。さらに、式（３９ａ）において、項Ｐｉ＝Πｋ＝０ Ｓ′ｉ−１σｋ，ｉであり、ここでσｋ，ｉ ２は、第ｉ空間層Ｌｉの変換ブロックの第ｋ係数の分散である。実際的には、式（３９ａ）は、分散の積の比の加重和の式（例えば（１／２）Σｊ＝０ Ｌ−１（ｓｊ′／ｓ′）ｌｏｇ２（Ｐｉ／Ｐｊ））として、第ｉ空間層Ｌｉに対する最適なビットレート割り当てを表す。
In another embodiment, the
図３を参照すると、いくつかの実装形態では、アロケータ３００は、サンプラ３１０と、推定器３２０と、レート決定器３３０とを備える。サンプラ３１０は、複数の空間層Ｌ０〜Ｌｉを有する非量子化変換係数２２６を、アロケータ３００の入力３０２として受け取る。例えば図２は、点線によってアロケータ３００に通信される変換器２２０によって生成された変換係数２２６を示す。受信された非量子化変換係数２２６によって、サンプラ３１０は、映像入力信号１２０のフレームをサンプルＳＦとして識別する。サンプラ３１０によって識別されたサンプルＳＦに基づき、アロケータ３００は、各空間層Ｌについて割り当て係数ＡＦを決定する。いくつかの実施形態では、アロケータ３００は、各空間層Ｌの割り当て係数ＡＦを動的に決定するように構成される。これらの実施態様では、サンプラ３１０は、アロケータ３００が、サンプラ３１０によって識別された各セットのサンプルＳＦに割り当て係数ＡＦを適合させることができるように、フレームサンプルＳＦのセットを反復的に識別するように構成されてもよい。例えばアロケータ３００は、映像入力信号１２０のフレームの第１サンプルＳＦ１に基づき、各空間層Ｌに対する割り当て係数ＡＦを決定する。その後、アロケータ３００は、サンプラ３１０によって識別された映像入力信号１２０のフレームの第２サンプルＳＦ２に基づき、各空間層Ｌ（例えば必要であれば）に適用される割り当て係数ＡＦを調整（ａｄｊｕｓｔ）または修正（ｍｏｄｉｆｙ）する（例えば図３に示されるように、第１サンプルＳＦ１の第１割り当て係数ＡＦ１から、第２サンプルＳＦ２の第２割り当て係数ＡＦ２へと変化する）ように進む。このプロセスは、アロケータ３００が映像入力信号１２０を受信する期間にわたって繰り返し継続することができる。これらの例では、アロケータ３００は、割り当て係数ＡＦを修正し、続いて第１サンプルＳＦ１と第２サンプルＳＦ２との間の変化に基づき（例えば第１空間レート係数３３２１から第２空間レート係数３３２２への）空間レート係数３３２を修正する。追加的にまたは代替的に、アロケータ３００は、指数移動平均を使用して、フレーム毎に割り当て係数ＡＦを修正することができる。指数移動平均は、一般に、現在のフレームに対して決定された割り当て係数ＡＦを、以前のフレームからの割り当て係数ＡＦの加重平均で重み付けする加重移動平均である。言い換えると、ここでは、割り当て係数ＡＦに対する各修正は、現在の割り当て係数ＡＦおよび以前の割り当て係数ＡＦを有する加重平均である。
Referring to FIG. 3, in some implementations, the
推定器３２０は、エンコーダ２００からの各変換係数の分散推定３２２を決定するように構成されている。いくつかの構成では、推定器３２０は、変換器２２０からの各ブロック内の変換係数２２６が同様に分布されていると仮定する。この仮定に基づき、変換係数２２６の分散は、映像入力信号１２０のサンプルフレームＳＦ内の全ての変換ブロックにわたって平均することで推定できる。例えば以下の式は、第ｉ空間層Ｌｉにおける第ｋ変換係数２２６を、ランダム変数Ｅｋ，ｉとしてモデル化する。
The
レート決定器３３０は、サンプラ３１０によって識別された映像入力信号１２０からのフレームのサンプルＳＦに基づき、空間レート係数３３２を決定するように構成される。いくつかの例では、空間レート係数３３２は、符号化ビットストリーム２０４の各空間層Ｌ０〜ＬｉにおけるビットレートＢＲを決定するための係数を規定する。空間レート係数３３２は、空間層Ｌｉ−１に割り当てられたビットレートと、空間層Ｌｉに割り当てられたビットレートとの比である。空間層Ｌ０および空間層Ｌ１を有する２空間の例では、空間レート係数は０．５に等しく、空間層Ｌ１に割り当てられたビットレートが５００ｋｂｐｓに等しく、空間層Ｌ０に割り当てられたビットレートが２５０ｋｂｐｓ（すなわち、５００ｋｂｐｓの０．５倍）に等しい。これらの実施形態では、空間レート係数３３２の値は、ベース層Ｌ０の割り当て係数ＡＦと平均レートＲＬとの差（例えば式（３９）の表現ｒ＊ ０−ＲＬ）に等しく設定される。ここで、割り当て係数ＡＦは、ベース層Ｌ０の変換係数当たりのビットに対応し（ｒ＊ｏとも呼ばれる）、平均レートＲＬは、複数の空間層Ｌ０〜Ｌｉの変換係数当たりのビットに対応する。いくつかの構成では、２つの空間層についての実験結果は、空間レート係数３３２が式ｓｒｆ=０．６５＋（ｒ＊ ０−ＲＬ）／２０に対応することを示している。空間レート係数３３２は、単一のパラメータとして、アロケータ３００が、符号化ビットストリーム２０４の各層Ｌに対するビットレートＢＲを容易にチューニングまたは修正することを可能にすることができる。
Rate determination unit 330, based on the sample S F frames from the
２つの空間層について説明されているが、アロケータ３００は、空間レート係数３３２および／または割り当て係数ＡＦを、任意の数の空間層Ｌ０〜Ｌｉに適用することができる。例えばアロケータ３００は、２つの空間層の各組について割り当て係数ＡＦおよび／または空間レート係数３３２を決定する。３つの層Ｌ０〜Ｌ２を用いて説明するために、アロケータ３００は、ベース層Ｌ０および第１層Ｌ１の割り当て係数ＡＦを決定し、それから第１層Ｌ１および第２層Ｌ２について割り当て係数ＡＦを決定する。各割り当て係数ＡＦを使用して、空間レート係数３３２と、ベース層Ｌ０および第１層Ｌ１に対する１つの空間レート係数３３２と、第１層Ｌ１および第２層Ｌ２に対する第２空間レート係数３３２とを決定することができる。２つの空間層の各セットの空間速度係数３３２を用いて、アロケータ３００は、空間レート係数３３２および／または割り当て係数ＡＦを平均（例えば加重平均、算術平均、幾何学的平均など）して、任意の数の空間層Ｌ０〜Ｌｉの平均空間レート係数および／または平均割り当て係数を生成することができる。
Although described for two spatial layers,
いくつかの例では、アロケータ３００が空間レート係数３３２に基づきビットレートＢＲを決定するのを助けるために、空間レート係数３３２は、空間レート係数閾値３３４を満たさなければならない（例えば、値の範囲内にある）。いくつかの実装形態では、値が約１．０未満および約０．５より大きい範囲内にあるとき、値は空間レート係数閾値３３４を満たす。他の実装形態では、空間レート係数閾値３３４は、値のより狭い範囲（例えば、０．５５〜０．９５、０．６５〜０．８５、０．５１〜０．９９、０．６５〜１．０、０．７５〜１．０など）に対応するか、または値のより広い範囲（例えば、０．４０〜１．２０、０．３５〜０．９５、０．４９〜１．０５、０．４２〜１．１７、０．７５〜１．３８など）に対応する。いくつかの構成では、空間レート係数３３２が空間レート係数閾値３３４に対応する値の範囲外である場合、アロケータ３００は、空間レート係数閾値３３４を満たすように空間レート係数３３２を調整する。例えば空間レート係数閾値３３４が０．４５〜０．９５の範囲である場合、この範囲外の空間レート係数３３２は、範囲の最も近い最大値に調整される（例えば０．３の空間レート係数３３２は、０．４５の空間レート係数３３２に調整され、１．８２の空間レート係数３３２は、０．９５の空間レート係数３３２に調整される）。
In some instances, in
決定された空間レート係数３３２に基づき、アロケータ３００は、総ビットレートＢＲｔｏｔに対する制約にさらされる複数の空間層Ｌ０〜Ｌｉの歪みを低減することによって、映像品質を最適化するように構成される。歪みを低減するために、アロケータ３００は、フレームのサンプルＳＦに対して計算された空間レート係数３３２に基づいて、各空間層ＬへのビットレートＢＲに影響を与える（例えば、エンコーダ２００がビットレートＢＲを決定するのを助ける）。例えば符号化ビットストリーム２０４が２つの空間層Ｌ０、Ｌｉを含む場合、アロケータ３００は、割り当て係数ＡＦを決定し、割り当て係数ＡＦは、次に、空間レート係数３３２を決定し、式ＢＲ１=ＢＲｔｏｔ／（１＋ｓｒｆ）に対応する第１ビットレートＢＲ１と、式ＢＲ０=（ＢＲｔｏｔ＊ｓｒｆ）／（１＋ｓｒｆ）に対応する第２ビットレートＢＲ０とを生成するために使用される。ここでＢＲｔｏｔは、全体のビットストリーム（すなわち、全ての空間層Ｌ０、Ｌ１）を符号化するのに利用可能な総ビットレートに対応する。
Based on the
図４は、レート割り当てシステム１００を実装する方法４００の一例である。動作４０２において、方法４００は、データ処理ハードウェア５１０において、映像入力信号１２０に対応する変換係数２２６（例えば非量子化された変換係数）を受信する。映像入力信号１２０は複数の空間層Ｌ０〜Ｌｉを含み、複数の空間層Ｌ０〜Ｌｉはベース層Ｌ０を含む。動作４０４において、方法４００は、データ処理ハードウェア５１０によって、映像入力信号１２０からのフレームのサンプルＳＦに基づき、空間レート係数３３２を決定する。空間レート係数３３２は、符号化ビットストリーム２０４の各空間層Ｌにおけるレート割り当ての係数を定義し、空間レート係数３３２は、ベース層Ｌ０の変換係数当たりのビットレートと、複数の空間層Ｌ０〜Ｌｉの変換係数当たりのビットの平均レートＲＬとの差によって表される。動作４０６において、方法４００は、データ処理ハードウェア５１０によって、空間レート係数３３２およびフレームのサンプルＳＦに基づき、各空間層ＬにビットレートＢＲを割り当てることによって、符号化ビットストリーム２０４の複数の空間層Ｌ０〜Ｌｉの歪みｄを低減する。
FIG. 4 is an example of a
図５は、本文書に記載されているシステムおよび方法、例えば、エンコーダ２００および／またはアロケータ３００を実装するために使用され得る例示的な計算装置５００の概略図である。計算装置５００は、ラップトップ、デスクトップ、ワークステーション、携帯情報端末、サーバ、ブレードサーバ、メインフレーム、および他の適切なコンピュータなどの様々な形態のデジタルコンピュータを表すことが意図されている。ここに示された構成要素、それらの接続および関係、およびそれらの機能は、例示的なものに過ぎず、本明細書に記載および／または特許請求された本発明の実施を制限することを意図するものではない。
FIG. 5 is a schematic representation of an exemplary
計算装置５００は、データ処理ハードウェア５１０と、メモリハードウェア５２０と、記憶装置５３０と、メモリ５２０および高速拡張ポート５５０に接続される高速インタフェース／コントローラ５４０と、低速バス５７０および記憶装置５３０に接続する低速インタフェース／コントローラ５６０とを含む。各構成要素５１０、５２０、５３０、５４０、５５０、および５６０は、様々なバスを使用して相互接続され、共通のマザーボード上に、または適宜他の方法で実装することができる。プロセッサ５１０は、メモリ５２０または記憶装置５３０に格納された命令を含む、計算装置５００内で実行するための命令を処理して、高速インタフェース５４０に結合されたディスプレイ５８０などの外部入出力装置上のグラフィカルユーザインタフェース（ＧＵＩ）のためのグラフィカル情報を表示することができる。他の実装形態では、複数のプロセッサおよび／または複数のバスを、複数のメモリおよびメモリのタイプと共に、適切に使用することができる。また、複数の計算装置５００は必要な動作の一部を提供する各装置（例えばサーババンク、ブレードサーバのグループ、またはマルチプロセッサシステム）に接続されてもよい。
The
メモリ５２０は、計算装置５００内に非一時的に情報を格納する。メモリ５２０は、コンピュータ可読媒体、揮発性メモリユニット（複数）、または不揮発性メモリユニット（複数）であってもよい。非一時的メモリ５２０は、計算装置によって使用されるための一時的または永続的なベースで、プログラム（例えば命令のシーケンス）またはデータ（例えばプログラム状態情報）を記憶するために使用される物理的装置であってもよい。不揮発性メモリの例には、フラッシュメモリおよび読み出し専用メモリ（ＲＯＭ）／プログラム可能読み出し専用メモリ（ＰＲＯＭ）／消去可能プログラマブル読み出し専用メモリ（ＰＲＯＭ）／電子的消去可能プログラマブル読み出し専用メモリ（ＥＥＰＲＯＭ）（例えばブートプログラムのようにファームウェアに典型的に使用される）が含まれるが、これらに限定されない。揮発性メモリの例は、ランダムアクセスメモリ（ＲＡＭ）、ダイナミックランダムアクセスメモリ（ＤＲＡＭ）、スタティックランダムアクセスメモリ（ＳＲＡＭ）、相変化メモリ（ＰＣＭ）、ならびにディスクまたはテープを含むが、これらに限定されない。
The
記憶装置５３０は、計算装置５００のための大容量記憶を提供することができる。一部の実施形態では、記憶装置５３０はコンピュータ可読媒体である。様々な異なる実施形態では、記憶装置５３０は、フロッピー（登録商標）ディスク装置、ハードディスク装置、光ディスク装置、またはテープ装置、フラッシュメモリまたは他の同様の固体メモリ装置であったり、または記憶領域ネットワークまたは他の構成の装置を含む装置のアレイであったりしてもよい。追加の実装形態では、コンピュータプログラム製品は、情報キャリアに実体的に具体化される。コンピュータプログラム製品は、実行されると上述のような１つ以上の方法を実行する命令を含む。情報キャリアは、メモリ５２０、記憶装置５３０、またはプロセッサ５１０上メモリなどのコンピュータ可読媒体である。
The
高速コントローラ５４０は、計算装置５００に対する帯域幅集中の動作を管理し、低速コントローラ５６０は、より低い帯域幅集中の動作を管理する。このような職務の割り当ては、例示的なものに過ぎない。いくつかの実施形態では、高速コントローラ５４０は、メモリ５２０に、（例えばグラフィックスプロセッサまたはアクセラレータを介して）ディスプレイ５８０に、および高速拡張ポート５５０に結合される。高速拡張ポート５５０は、様々な拡張カード（図示せず）を受け入れることができる。いくつかの実施形態では、低速コントローラ５６０は、記憶装置５３０および低速拡張ポート５９０に結合される。様々な通信ポート（例えばＵＳＢ、ブルートゥース（登録商標）、イーサネット（登録商標）、無線イーサネット（登録商標））を含むことができる低速拡張ポート５９０は、キーボード、ポインティングデバイス、スキャナなどの１つまたは複数の入出力装置に結合され得たり、スイッチまたはルータなどのネットワークデバイスに例えばネットワークアダプタを介して結合され得たりする。
The high-
計算装置５００は、図面に示すように、いくつかの異なる形態で実装することができる。例えば計算装置５００は、標準サーバ５００ａとしてまたは複数のサーバ５００ａからなるグループ内の複数回として、ラップトップコンピュータ５００ｂとして、またはラックサーバシステム５００ｃの一部として、実装されてもよい。
The
本明細書に記載されたシステムおよび技術の様々な実装は、デジタル電子および／または光回路、集積回路、特別に設計されたＡＳＩＣ（特定用途向け集積回路）、コンピュータハードウェア、ファームウェア、ソフトウェア、および／またはそれらの組合せで実現することができる。これらの様々な実装は、少なくとも１つのプログラマブルプロセッサを含むプログラマブルシステムで実行可能および／または解釈可能な１つまたは複数のコンピュータプログラム内の実装を含むことができる。少なくとも１つのプログラマブルプロセッサは、専用または一般の用途で、データおよび命令を受信したりデータおよび命令を送信したりするように、記憶システム、少なくとも１つの入力装置、および少なくとも１つの出力装置に結合される。 Various implementations of the systems and technologies described herein include digital electronic and / or optical circuits, integrated circuits, specially designed ASICs (application specific integrated circuits), computer hardware, firmware, software, and / Or a combination thereof. These various implementations can include implementations in one or more computer programs that are executable and / or interpretable in a programmable system that includes at least one programmable processor. At least one programmable processor is coupled to a storage system, at least one input device, and at least one output device to receive data and instructions and transmit data and instructions for dedicated or general use. NS.
これらのコンピュータプログラム（プログラム、ソフトウェア、ソフトウェアアプリケーションまたはコードとしても知られている）は、プログラマブルプロセッサのための機械命令を含み、高レベル手続きおよび／またはオブジェクト指向のプログラミング言語でおよび／またはアセンブリ／機械言語で実施することができる。本明細書で使用されるように、用語「機械可読媒体」および「コンピュータ可読媒体」は、プログラマブルプロセッサに機械命令および／またはデータを提供するために使用される任意のコンピュータプログラム製品、非一時的なコンピュータ可読媒体、装置および／またはデバイス（例えば磁気ディスク、光ディスク、メモリ、プログラマブルロジックデバイス（ＰＬＤｓ））を指し、機械可読信号として機械命令を受信する機械可読媒体を含む。用語「機械可読信号」は、機械命令および／またはデータをプログラマブルプロセッサに提供するために使用される任意の信号を指す。 These computer programs (also known as programs, software, software applications or code) include machine instructions for programmable processors in high-level procedural and / or object-oriented programming languages and / or assembly / machines. Can be implemented in language. As used herein, the terms "machine readable medium" and "computer readable medium" are any computer program products used to provide machine instructions and / or data to programmable processors, non-transitory. Computer-readable media, devices and / or devices (eg, magnetic disks, optical disks, memories, programmable logic devices (PLDs)), including machine-readable media that receive machine instructions as machine-readable signals. The term "machine readable signal" refers to any signal used to provide machine instructions and / or data to a programmable processor.
本明細書に記載されたプロセスおよび論理フローは、１つ以上のコンピュータプログラムを実行して、入力データ上で動作して出力を生成することによって機能を実行する１つまたは複数のプログラマブルプロセッサによって実行することができる。プロセスおよび論理フローはまた、専用ロジック回路、例えばＦＰＧＡ（フィールド プログラマブル ゲート アレイ）またはＡＳＩＣ（特定用途向け集積回路）によって実行することもできる。コンピュータプログラムの実行に適したプロセッサは、例として、汎用マイクロプロセッサおよび専用マイクロプロセッサの両方、および任意の種類のデジタルコンピュータの任意の１つ以上のプロセッサを含む。一般に、プロセッサは、読み出し専用メモリまたはランダムアクセスメモリまたは両方から、命令およびデータを受け取る。コンピュータの本質的な要素は、命令を実行するためのプロセッサと、命令およびデータを格納するための１つまたは複数のメモリ装置とを含む。一般に、コンピュータはまた、データを記憶するための１つまたは複数の大容量記憶装置、例えば磁気、光磁気ディスク、または光ディスクからデータを受信するか、これら大容量記憶装置にデータを送信するか、または両方ができるように、これら大容量記憶装置を備えるかまたはこれら大容量記憶装置に動作可能に結合される。しかし、コンピュータはそのような装置を有する必要はない。コンピュータプログラム命令およびデータを格納するのに適したコンピュータ可読媒体は、例えばＥＰＲＯＭ、ＥＥＰＲＯＭ、およびフラッシュメモリ装置のような半導体メモリ装置、例えば内部ハードディスクまたは取り外し可能ディスクのような磁気ディスク、光磁気ディスク、ならびにＣＤ−ＲＯＭおよびＤＶＤ−ＲＯＭディスクを例として含む、全ての形態の不揮発性メモリ、媒体、およびメモリ装置を含む。プロセッサおよびメモリは、専用ロジック回路によって補うことができ、または専用ロジック回路に組み込むことができる。 The processes and logical flows described herein are run by one or more programmable processors that run one or more computer programs to perform functions by running on input data and producing outputs. can do. Processes and logic flows can also be performed by dedicated logic circuits, such as FPGAs (Field Programmable Gate Arrays) or ASICs (Application Specific Integrated Circuits). Suitable processors for running computer programs include, for example, both general purpose and dedicated microprocessors, and any one or more processors of any type of digital computer. Generally, the processor receives instructions and data from read-only memory and / or random access memory. Essential elements of a computer include a processor for executing instructions and one or more memory devices for storing instructions and data. In general, a computer also receives data from one or more mass storage devices for storing data, such as magnetic, magneto-optical disks, or optical disks, or sends data to these mass storage devices. They either include or are operably coupled to these mass storage devices so that they can do both. However, the computer does not have to have such a device. Computer-readable media suitable for storing computer program instructions and data include semiconductor memory devices such as EPROMs, EEPROMs, and flash memory devices, such as magnetic disks such as internal hard disks or removable disks, magneto-optical disks, etc. Also included are all forms of non-volatile memory, media, and memory devices, including CD-ROMs and DVD-ROM disks as examples. The processor and memory can be supplemented by dedicated logic circuits or incorporated into dedicated logic circuits.
ユーザとの対話を提供するために、本開示の１つ以上の態様は、ユーザに情報を表示するための例えばＣＲＴ（ブラウン管）、ＬＣＤ（液晶ディスプレイ）モニタ、またはタッチスクリーンなどのディスプレイ装置を有するコンピュータ上で実施することができ、コンピュータは付加的に、ユーザがコンピュータに入力を提供することができるキーボードおよびポインティング装置、例えばマウスまたはトラックボールを備えることができる。他の種類の装置を使用して、ユーザとの対話を提供することができ、例えばユーザに提供されるフィードバックは、視覚フィードバック、聴覚フィードバック、または触覚フィードバックのような感覚フィードバックの任意の形態とすることができ、ユーザからの入力は、音響、音声、または触覚入力を含む任意の形態で受信することができる。さらにコンピュータは、例えばユーザのクライアント装置上のウェブブラウザから受信された要求に応答して、ユーザのクライアント装置上のウェブブラウザにウェブページを送信することによって、ユーザによって使用される装置にドキュメントを送信し、該装置からドキュメントを受信することによって、ユーザと対話することができる。 To provide interaction with the user, one or more aspects of the disclosure include a display device, such as a CRT (Brown Tube), LCD (Liquid Crystal Display) monitor, or touch screen, for displaying information to the user. It can be implemented on a computer, which can additionally be equipped with a keyboard and pointing device, such as a mouse or trackball, on which the user can provide input to the computer. Other types of devices can be used to provide interaction with the user, eg, the feedback provided to the user may be in any form of sensory feedback, such as visual feedback, auditory feedback, or tactile feedback. The input from the user can be received in any form, including acoustic, voice, or tactile input. In addition, the computer sends the document to the device used by the user, for example, by sending a web page to the web browser on the user's client device in response to a request received from the web browser on the user's client device. And by receiving the document from the device, you can interact with the user.
いくつかの実装が記載されている。それにもかかわらず、本開示の趣旨および範囲から逸脱することなく、様々な変更がなされ得ることが理解されるであろう。したがって、他の実施形態は、以下の請求項の範囲内である。 Several implementations are listed. Nevertheless, it will be appreciated that various changes can be made without departing from the spirit and scope of this disclosure. Therefore, other embodiments are within the scope of the following claims.
Claims (21)
前記データ処理ハードウェア（５１０）によって、スケーリングされた前記映像入力信号（１２０）からのフレームのサンプル（ＳＦ）に基づき空間レート係数（３３２）を決定する工程（３３２）であって、前記空間レート係数（３３２）は、スケーリングされた前記映像入力信号（１２０）から形成された符号化ビットストリーム（２０４）の各空間層（Ｌ）におけるビットレート割り当て係数を定義し、前記空間レート係数（３３２）は、前記ベース層（Ｌ０）の前記変換係数（２２６）毎のビットレートと、前記複数の空間層（Ｌ）の前記変換係数（２２６）毎のビットの平均レート（ＲＬ）との差によって表される、前記空間レート係数（３３２）を決定する工程と、
前記データ処理ハードウェア（５１０）によって、前記空間レート係数（３３２）とフレームの前記サンプル（ＳＦ）とに基づき、各空間層（Ｌ）に前記ビットレートを割り当てることによって、前記符号化ビットストリーム（２０４）の前記複数の空間層（Ｌ）に対する歪みを低減する工程と
を備える、方法（４００）。 In the data processing hardware (510), a step of receiving a conversion coefficient (226) corresponding to a scaled video input signal (120), wherein the scaled video input signal (120) is a plurality of spatial layers (120). The step of receiving the conversion coefficient (226) including L), the plurality of spatial layers (L) including the base layer (L 0), and
Wherein the data processing hardware (510), comprising the steps of: determining the spatial rate coefficient (332) based on the sample (S F) of the frame from scaled the video input signal (120) (332), said space The rate coefficient (332) defines a bit rate allocation coefficient in each spatial layer (L) of the coded bitstream (204) formed from the scaled video input signal (120), and the spatial rate coefficient (332). ) Is the bit rate of the base layer (L 0 ) for each conversion coefficient (226) and the average rate (RL ) of the bits of the plurality of spatial layers (L) for each conversion coefficient (226). The step of determining the spatial rate coefficient (332) represented by the difference, and
By the data processing hardware (510), on the basis of said samples of said spatial rate coefficient (332) frame (S F), by allocating the bit rate in each spatial layer (L), the coded bit stream The method (400) comprising the step of reducing the strain on the plurality of spatial layers (L) according to (204).
前記データ処理ハードウェア（５１０）において、スケーリングされた前記映像入力信号（１２０）からフレームの第２サンプル（ＳＦ）を受信する工程と、
前記データ処理ハードウェア（５１０）によって、スケーリングされた前記映像入力信号（１２０）からのフレームの前記第２サンプル（ＳＦ）に基づき、前記空間レート係数（３３２）を修正する工程と、
前記データ処理ハードウェア（５１０）によって、修正された前記空間レート係数（３３２）とフレームの前記第２サンプル（ＳＦ）とに基づき、各空間層（Ｌ）に修正された前記ビットレートを割り当てる工程と
を備える、請求項１に記載の方法（４００）。 The method further
In the data processing hardware (510), comprising: receiving a scaled second sample frame from the video input signal (120) (S F),
By the data processing hardware (510), and based on the scaled second sample frame from the video input signal (120) (S F), modifying the spatial rate coefficient (332) step,
By the data processing hardware (510), on the basis of said spatial rate coefficients that are fixed (332) and said second sample frame (S F), allocating the bit-rate that has been modified in each spatial layer (L) The method (400) according to claim 1, further comprising a step.
前記データ処理ハードウェア（５１０）において、スケーリングされた前記映像入力信号（１２０）からフレームの第２サンプル（ＳＦ）を受信する工程と、
前記データ処理ハードウェア（５１０）によって、指数移動平均に基づきフレーム毎に前記空間レート係数（３３２）を修正する工程であって、前記指数移動平均は少なくともフレームの前記サンプル（ＳＦ）とフレームの前記第２サンプル（ＳＦ）とに対応する、前記空間レート係数（３３２）を修正する工程と、
前記データ処理ハードウェア（５１０）によって、修正された前記ビットレートを、修正された前記空間レート係数（３３２）に基づき各空間層（Ｌ）に割り当てる工程と
を備える、請求項１または２に記載の方法（４００）。 The method further
In the data processing hardware (510), comprising: receiving a scaled second sample frame from the video input signal (120) (S F),
The step of modifying the spatial rate coefficient (332) frame by frame based on the exponential moving average by the data processing hardware (510), wherein the exponential moving average is at least the sample ( SF ) of the frame and the frame. corresponding to the second sample (S F), the step of modifying the spatial rate coefficient (332),
The first or second aspect of claim 1 or 2, further comprising a step of allocating the modified bit rate to each spatial layer (L) based on the modified spatial rate coefficient (332) by the data processing hardware (510). Method (400).
前記映像入力信号（１２０）を受信する工程と、
前記映像入力信号（１２０）を前記複数の空間層（Ｌ）にスケーリングする工程と、
各空間層（Ｌ）をサブブロックに分割する工程と、
各サブブロックを前記変換係数（２２６）に変換する工程（２２６）と、
各サブブロックに対応する前記変換係数（２２６）をスカラー量子化する工程と
を備える、請求項１〜３のいずれか一項に記載の方法（４００）。 The step of receiving the scaled video input signal (120) is
The step of receiving the video input signal (120) and
A step of scaling the video input signal (120) to the plurality of spatial layers (L), and
The process of dividing each space layer (L) into sub-blocks,
The step (226) of converting each subblock into the conversion coefficient (226), and
The method (400) according to any one of claims 1 to 3, further comprising a step of scalar quantization of the conversion coefficient (226) corresponding to each subblock.
前記映像入力信号（１２０）のフレームの全ての変換ブロックにわたる平均に基づき、各スカラー量子化（２１０）された前記変換係数（２２６）の分散推定（３２２）を決定する工程を備える、
請求項４に記載の方法（４００）。 Wherein the step of determining the spatial rate coefficient (332) on the basis of scaled the video input signal (120) to the sample of the frame (S F) is
It comprises a step of determining the variance estimation (322) of each scalar quantized (210) conversion factor (226) based on the average over all conversion blocks of the frame of the video input signal (120).
The method according to claim 4 (400).
請求項４または５に記載の方法（４００）。 The conversion factor (226) of each subblock is uniformly distributed across all subblocks.
The method (400) according to claim 4 or 5.
請求項１〜６のいずれか一項に記載の方法（４００）。 The spatial rate coefficient (332) includes a single parameter configured to assign the bit rate to each layer (L) of the coded bitstream (204).
The method (400) according to any one of claims 1 to 6.
請求項１〜７のいずれか一項に記載の方法（４００）。 The method further comprises the step of determining whether the spatial rate coefficient (332) satisfies the spatial rate coefficient threshold (334) by the data processing hardware (510).
The method (400) according to any one of claims 1 to 7.
請求項８に記載の方法（４００）。 When the value corresponding to the spatial rate coefficient threshold (334) is less than about 1.0 and greater than about 0.5, the value corresponding to the spatial rate coefficient threshold (334) is the spatial rate coefficient threshold (334). Meet,
The method according to claim 8 (400).
前記加重和は、分散の積の比に対応し、
前記比は、第１空間層（Ｌ）からのスカラー量子化（２１０）された前記変換係数（２２６）の推定分散に基づく分子と、第２空間層（Ｌ）からのスカラー量子化（２１０）された前記変換係数（２２６）の推定分散に基づく分母とを備える、
請求項１〜９のいずれか一項に記載の方法（４００）。 The spatial rate coefficient (332) includes a weighted sum.
The weighted sum corresponds to the product ratio of the variances.
The ratios are the molecule based on the estimated dispersion of the conversion factor (226) scalar-quantized (210) from the first space layer (L) and the scalar quantization (210) from the second space layer (L). With a denominator based on the estimated variance of the conversion factor (226).
The method (400) according to any one of claims 1 to 9.
前記データ処理ハードウェア（５１０）に通信するメモリハードウェア（５２０）と
を備えるシステム（１００）であって、
前記メモリハードウェア（５２０）は命令を記憶し、前記命令は前記データ処理ハードウェア（５１０）上で実行されると前記データ処理ハードウェア（５１０）に、
スケーリングされた映像入力信号（１２０）に対応する変換係数（２２６）を受信する工程であって、スケーリングされた前記映像入力信号（１２０）は複数の空間層（Ｌ）を含み、前記複数の空間層（Ｌ）はベース層（Ｌ０）を含む、前記変換係数（２２６）を受信する工程と、
スケーリングされた前記映像入力信号（１２０）からフレームのサンプル（ＳＦ）に基づき空間レート係数（３３２）を決定する工程であって、前記空間レート係数（３３２）は、スケーリングされた前記映像入力信号（１２０）から形成された符号化ビットストリーム（２０４）の各空間層（Ｌ）におけるビットレート割り当て係数を定義し、前記空間レート係数（３３２）は、前記ベース層（Ｌ０）の前記変換係数（２２６）毎のビットレートと、複数の空間層（Ｌ）の前記変換係数（２２６）毎のビットの平均レート（ＲＬ）との差によって表される、前記空間レート係数（３３２）を決定する工程と、
前記空間レート係数（３３２）とフレームの前記サンプル（ＳＦ）とに基づき、各空間層（Ｌ）に前記ビットレートを割り当てることによって、前記符号化ビットストリーム（２０４）の前記複数の空間層（Ｌ）の歪みを低減する工程と
を備える動作を実行させる、システム（１００）。 Data processing hardware (510) and
A system (100) including memory hardware (520) that communicates with the data processing hardware (510).
The memory hardware (520) stores an instruction, and when the instruction is executed on the data processing hardware (510), the data processing hardware (510) receives the instruction.
A step of receiving a conversion coefficient (226) corresponding to a scaled video input signal (120), wherein the scaled video input signal (120) includes a plurality of spatial layers (L) and the plurality of spaces. The layer (L) includes the base layer (L 0 ), the step of receiving the conversion coefficient (226), and
A process of determining the spatial rate coefficient (332) on the basis of scaled the video input signal (120) to the sample (S F) of the frame, the space rate coefficient (332) is scaled the video input signal The bit rate allocation coefficient in each spatial layer (L) of the coded bit stream (204) formed from (120) is defined, and the spatial rate coefficient (332) is the conversion coefficient of the base layer (L 0). The spatial rate coefficient (332), which is represented by the difference between the bit rate for each (226) and the average rate (RL ) of the bits for each conversion coefficient (226) of the plurality of spatial layers (L), is determined. And the process to do
Based on said spatial rate coefficient (332) and the sample frame (S F), by allocating the bit rate in each spatial layer (L), wherein the plurality of spatial layers of coded bit stream (204) ( A system (100) that performs an operation comprising a step of reducing the distortion of L).
スケーリングされた前記映像入力信号（１２０）からフレームの第２サンプル（ＳＦ）を受信する工程と、
スケーリングされた前記映像入力信号（１２０）からフレームの前記第２サンプル（ＳＦ）に基づき、前記空間レート係数（３３２）を修正する工程と、
修正された前記空間レート係数（３３２）とフレームの前記第２サンプル（ＳＦ）とに基づき、修正された前記ビットレートを各空間層（Ｌ）に割り当てる工程と
を備える、請求項１１に記載のシステム（１００）。 The above operation further
From scaled the video input signal (120) receiving a second sample (S F) of the frame,
Based from scaled the video input signal (120) in said second sample frame (S F), the step of modifying the spatial rate coefficient (332),
Based on a modified the spatial rate coefficient (332) and said second sample frame (S F), and a step of assigning a modified the bit rate each spatial layer (L), according to claim 11 System (100).
スケーリングされた前記映像入力信号（１２０）から、フレームの第２サンプル（ＳＦ）を受信する工程と、
指数移動平均に基づき前記空間レート係数（３３２）を修正する工程であって、前記指数移動平均は少なくともフレームの前記サンプル（ＳＦ）とフレームの前記第２サンプル（ＳＦ）とに基づく、前記空間レート係数（３３２）を修正する工程と、
修正された前記空間レート係数（３３２）に基づき、修正された前記ビットレートを各空間層（Ｌ）に割り当てる工程と
を備える、請求項１１または１２に記載のシステム（１００）。 The above operation further
From scaled the video input signal (120), comprising: receiving a second sample of the frame (S F),
A process of modifying the spatial rate coefficient based on the exponential moving average (332), the exponential moving average is based on said sample (S F) and said second sample frame of at least a frame (S F), the The process of correcting the spatial rate coefficient (332) and
The system (100) according to claim 11 or 12, further comprising a step of assigning the modified bit rate to each spatial layer (L) based on the modified spatial rate coefficient (332).
前記映像入力信号（１２０）を受信する工程と、
前記映像入力信号（１２０）を前記複数の空間層（Ｌ）にスケーリングする工程と、
各空間層（Ｌ）をサブブロックに分割する工程と、
各サブブロックを前記変換係数（２２６）に変換する工程と、
各サブブロックに対応する前記変換係数（２２６）をスカラー量子化する工程と
を備える、請求項１１〜１３のいずれか一項に記載のシステム（１００）。 The step of receiving the scaled video input signal (120) is further further.
The step of receiving the video input signal (120) and
A step of scaling the video input signal (120) to the plurality of spatial layers (L), and
The process of dividing each space layer (L) into sub-blocks,
The step of converting each subblock into the conversion coefficient (226), and
The system (100) according to any one of claims 11 to 13, further comprising a step of scalar quantization of the conversion coefficient (226) corresponding to each subblock.
前記映像入力信号（１２０）のフレームの全ての変換ブロックにわたる平均に基づき、各スカラー量子化された前記変換係数（２２６）の分散推定（３２２）を決定する工程を含む、
請求項１４に記載のシステム（１００）。 Determining a spatial rate coefficient (332) based on the scaled frame samples from the video input signal (120) (S F) is
A step of determining the variance estimation (322) of each scalar-quantized conversion factor (226) based on the average over all conversion blocks of the frame of the video input signal (120).
The system (100) according to claim 14.
請求項１４または１５のシステム（１００）。 The conversion factor (226) of each subblock is uniformly distributed across all subblocks.
The system (100) of claim 14 or 15.
請求項１１〜１６のいずれか一項に記載のシステム（１００）。 The spatial rate coefficient (332) comprises a single parameter configured to assign the bit rate to each layer (L) of the coded bitstream (204).
The system (100) according to any one of claims 11 to 16.
請求項１１〜１７のいずれか一項に記載のシステム（１００）。 The operation further comprises a step of determining that the spatial rate coefficient (332) satisfies the spatial rate coefficient threshold (334).
The system (100) according to any one of claims 11 to 17.
請求項１８に記載のシステム（１００）。 When the value corresponding to the spatial rate coefficient threshold (334) is less than about 1.0 and greater than about 0.5, the value corresponding to the spatial rate coefficient threshold (334) is the spatial rate coefficient threshold (334). Meet,
The system (100) according to claim 18.
前記加重和は分散の積の比に対応し、
前記比は、第１空間層（Ｌ）からのスカラー量子化された前記変換係数（２２６）の推定分散に基づく分子と、第２空間層（Ｌ）からのスカラー量子化された前記変換係数（２２６）の推定分散に基づく分母とを備える、
請求項１１〜１９のいずれか一項に記載のシステム（１００）。 The spatial rate coefficient (332) includes a weighted sum.
The weighted sum corresponds to the product ratio of the variances,
The ratios are a molecule based on the estimated dispersion of the scalar-quantized conversion factor (226) from the first space layer (L) and the scalar-quantized conversion factor (L) from the second space layer (L). 226) with a denominator based on the estimated variance,
The system (100) according to any one of claims 11 to 19.
前記データ処理ハードウェア（５１０）によって、スケーリングされた前記映像入力信号（１２０）からのフレームのサンプル（ＳＦ）に基づき割り当て係数を決定する工程であって、前記割り当て係数は受信された前記非量子化変換係数（２２６）の分散の推定に対応する、前記割り当て係数を決定する工程と、
前記データ処理ハードウェア（５１０）によって、前記割り当て係数とフレームの前記サンプル（ＳＦ）とに基づき、各空間層（Ｌ）にビットレートを割り当てる工程と
を備える、方法（４００）。 In the data processing hardware (510), in the step of receiving the non-quantization conversion coefficient (226) corresponding to the scaled video input signal (120), the scaled video input signal (120) is a plurality of. The step of receiving the non-quantization conversion coefficient (226) including the space layer (L), and
By the data processing hardware (510), a step of determining an allocation coefficient based on the frame of the sample (S F) from the scaled the video input signal (120), the allocation coefficient received the non The step of determining the allocation coefficient, which corresponds to the estimation of the variance of the quantization conversion coefficient (226), and
By the data processing hardware (510), on the basis of said samples of said allocation coefficient and the frame (S F), and a step of assigning a bit rate to each space layer (L), the method (400).
Applications Claiming Priority (3)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US201862703623P | 2018-07-26 | 2018-07-26 | |
US62/703,623 | 2018-07-26 | ||
PCT/US2019/038626 WO2020023167A1 (en) | 2018-07-26 | 2019-06-23 | Spatial layer rate allocation |
Publications (2)
Publication Number | Publication Date |
---|---|
JP2021524213A true JP2021524213A (en) | 2021-09-09 |
JP6978633B2 JP6978633B2 (en) | 2021-12-08 |
Family
ID=67185762
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
JP2021502480A Active JP6978633B2 (en) | 2018-07-26 | 2019-06-23 | Spatial layer rate allocation |
Country Status (6)
Country | Link |
---|---|
US (3) | US11032549B2 (en) |
EP (1) | EP3827588A1 (en) |
JP (1) | JP6978633B2 (en) |
KR (2) | KR102525584B1 (en) |
CN (2) | CN112514387B (en) |
WO (1) | WO2020023167A1 (en) |
Families Citing this family (1)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
WO2022188633A1 (en) * | 2021-03-12 | 2022-09-15 | Telefonaktiebolaget Lm Ericsson (Publ) | Method and apparatus for rate control |
Family Cites Families (10)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US6501797B1 (en) * | 1999-07-06 | 2002-12-31 | Koninklijke Phillips Electronics N.V. | System and method for improved fine granular scalable video using base layer coding information |
EP1833257A1 (en) | 2006-03-06 | 2007-09-12 | THOMSON Licensing | Method and apparatus for bit rate control in scalable video signal encoding using a Rate-Distortion optimisation |
US20080101410A1 (en) * | 2006-10-25 | 2008-05-01 | Microsoft Corporation | Techniques for managing output bandwidth for a conferencing server |
WO2011084918A1 (en) | 2010-01-06 | 2011-07-14 | Dolby Laboratories Licensing Corporation | High performance rate control for multi-layered video coding applications |
US20110310961A1 (en) * | 2010-06-17 | 2011-12-22 | Microsoft Corporation | Video rate control based on transform-coefficients histogram |
EP2479994B1 (en) * | 2011-01-19 | 2017-03-15 | BlackBerry Limited | Method and device for improved multi-layer data compression |
US9392274B2 (en) * | 2012-03-22 | 2016-07-12 | Qualcomm Incorporated | Inter layer texture prediction for video coding |
KR102257542B1 (en) | 2012-10-01 | 2021-05-31 | 지이 비디오 컴프레션, 엘엘씨 | Scalable video coding using subblock-based coding of transform coefficient blocks in the enhancement layer |
US20140098880A1 (en) * | 2012-10-05 | 2014-04-10 | Qualcomm Incorporated | Prediction mode information upsampling for scalable video coding |
US9591316B2 (en) | 2014-03-27 | 2017-03-07 | Intel IP Corporation | Scalable video encoding rate adaptation based on perceived quality |
-
2019
- 2019-06-23 EP EP19736913.5A patent/EP3827588A1/en active Pending
- 2019-06-23 CN CN201980049466.1A patent/CN112514387B/en active Active
- 2019-06-23 CN CN202310024039.6A patent/CN116016935A/en active Pending
- 2019-06-23 US US16/449,413 patent/US11032549B2/en active Active
- 2019-06-23 JP JP2021502480A patent/JP6978633B2/en active Active
- 2019-06-23 KR KR1020217002315A patent/KR102525584B1/en active IP Right Grant
- 2019-06-23 WO PCT/US2019/038626 patent/WO2020023167A1/en active Application Filing
- 2019-06-23 KR KR1020237013501A patent/KR20230058541A/en not_active Application Discontinuation
-
2021
- 2021-05-26 US US17/303,285 patent/US11632555B2/en active Active
-
2023
- 2023-03-31 US US18/194,570 patent/US20230239480A1/en active Pending
Also Published As
Publication number | Publication date |
---|---|
KR20230058541A (en) | 2023-05-03 |
EP3827588A1 (en) | 2021-06-02 |
US20210281850A1 (en) | 2021-09-09 |
KR20210022117A (en) | 2021-03-02 |
US20230239480A1 (en) | 2023-07-27 |
US11032549B2 (en) | 2021-06-08 |
CN116016935A (en) | 2023-04-25 |
JP6978633B2 (en) | 2021-12-08 |
US20200036981A1 (en) | 2020-01-30 |
KR102525584B1 (en) | 2023-04-24 |
CN112514387A (en) | 2021-03-16 |
US11632555B2 (en) | 2023-04-18 |
CN112514387B (en) | 2023-02-03 |
WO2020023167A1 (en) | 2020-01-30 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
KR101644208B1 (en) | Video encoding using previously calculated motion information | |
KR100664929B1 (en) | Method and apparatus for effectively compressing motion vectors in video coder based on multi-layer | |
KR101744654B1 (en) | Motion based dynamic resolution multiple bit rate video encoding | |
KR100781525B1 (en) | Method and apparatus for encoding and decoding FGS layers using weighting factor | |
JP7024106B2 (en) | High speed DST-7 | |
KR101266667B1 (en) | Dual-mode compression of images and videos for reliable real-time transmission | |
EP3643069B1 (en) | Effective encoding for screen data | |
US11818382B2 (en) | Temporal prediction shifting for scalable video coding | |
JP2021521751A (en) | Merge mode methods and devices with additional intermediate candidates in video coding | |
CN103098471A (en) | Method and apparatus of layered encoding/decoding a picture | |
JP2021517788A (en) | Methods for video coding and their equipment and computer programs | |
JP2022500901A (en) | Data processing methods, devices, and computer programs to be coded | |
US20150350654A1 (en) | Video quality adaptation with frame rate conversion | |
US20230239480A1 (en) | Spatial Layer Rate Allocation | |
WO2021092821A1 (en) | Adaptively encoding video frames using content and network analysis | |
JP2022504379A (en) | Intra mode selection in intra prediction | |
US11825088B2 (en) | Adaptively encoding video frames based on complexity | |
WO2023245460A1 (en) | Neural network codec with hybrid entropy model and flexible quantization | |
KR20130086294A (en) | Video rate control based on transform-coefficients histogram | |
MX2008012360A (en) | Method of assigning priority for controlling bit rate of bitstream, method of controlling bit rate of bitstream, video decoding method, and apparatus using the same. | |
CN117678219A (en) | Vertex position compression based on temporal prediction |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
A621 | Written request for application examination |
Free format text: JAPANESE INTERMEDIATE CODE: A621Effective date: 20210115 |
|
A871 | Explanation of circumstances concerning accelerated examination |
Free format text: JAPANESE INTERMEDIATE CODE: A871Effective date: 20210115 |
|
A131 | Notification of reasons for refusal |
Free format text: JAPANESE INTERMEDIATE CODE: A131Effective date: 20210713 |
|
A521 | Request for written amendment filed |
Free format text: JAPANESE INTERMEDIATE CODE: A523Effective date: 20211006 |
|
TRDD | Decision of grant or rejection written | ||
A01 | Written decision to grant a patent or to grant a registration (utility model) |
Free format text: JAPANESE INTERMEDIATE CODE: A01Effective date: 20211026 |
|
A61 | First payment of annual fees (during grant procedure) |
Free format text: JAPANESE INTERMEDIATE CODE: A61Effective date: 20211111 |
|
R150 | Certificate of patent or registration of utility model |
Ref document number: 6978633Country of ref document: JPFree format text: JAPANESE INTERMEDIATE CODE: R150 |