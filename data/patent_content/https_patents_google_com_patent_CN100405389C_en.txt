Summary of the invention
According to a first aspect of the invention, provide a kind of for the marking of representative character distributes the method for adaptive template, this method comprises: extract a plurality of stroke vector paragraphs from marking; In each a plurality of probability distribution functions (PDF) of storage with reference to the stroke vector paragraph, for the stroke vector paragraph of each extraction is determined an immediate PDF, and distribute adaptive template for marking, wherein adaptive template comprises a plurality of identifiers, be used to the immediate PDF of the stroke vector paragraph identification storage of each extraction, and with marking be connected to its representative character so that in adaptive dictionary, store.
The PDF of a plurality of storages can be by the form storage with a PDF dictionary and a PDF code book; Wherein, the number that is stored in the PDF in the PDF code book is less than the PDF number that is stored in the PDF dictionary, and each PDF in the PDF dictionary with one in the PDF code book identification the pointer of the most similar PDF be associated.
PDF in the PDF code book can select based on utilizing relative entropy (Kullback-Leiblerdivergence) calculated distortion to measure the quantification that PDF in the PDF dictionary is carried out.
Each PDF with reference to the stroke vector paragraph of storage can be associated with different reference characters.
This method may also be included as adaptive template and distribute an age value ToL and store the ToL of adaptive template and distribution in adaptive dictionary.
The step of storing adaptive template may also comprise the existing project (existing entry) that has maximum ToL in the adaptive dictionary of replacing, and the ToL value of other existing project is increased by a scheduled volume.
According to a second aspect of the invention, provide a kind of method of discerning the marking of representing character, this method comprises: extract a plurality of stroke vector paragraphs from marking; In each a plurality of PDF of storage with reference to the stroke vector paragraph, for the stroke vector paragraph of each extraction is determined an immediate PDF, and search for adaptive template dictionary to determine the identification and matching of marking based on the immediate PDF that determines, wherein each adaptive template all contains a plurality of identifiers, is used to the PDF of a storage of each stroke vector paragraph identification of reference character.
This method may also comprise distributes a new adaptive template according to a first aspect of the invention.
According to a third aspect of the present invention, provide a kind of electronic installation, having comprised: a user interface is used to import the marking of representing character; A storage unit; With a processor.Wherein processor extracts a plurality of stroke vector paragraphs from marking; In a plurality of each PDF of cell stores with reference to the stroke vector paragraph, for the stroke vector paragraph of each extraction is determined an immediate PDF, and be that marking distributes an adaptive template, adaptive template contains a plurality of identifiers, be used to the immediate PDF of the stroke vector paragraph identification storage of each extraction, and with marking be connected to its representative character so that in the adaptive dictionary of storage unit, store.
The PDF of a plurality of storages can be stored in the storage unit by the form with a PDF dictionary and a PDF code book; The number that wherein is stored in the PDF in the PDF code book is less than the PDF number that is stored in the PDF dictionary, and each PDF in the PDF dictionary with one in the PDF code book identification the pointer of the most similar PDF be associated.
PDF dictionary and PDF code book can be stored in the read-only memory element of storage unit.
PDF in the PDF code book can select based on utilizing the relative entropy calculated distortion to measure the quantification that PDF in the PDF dictionary is carried out.
Each PDF with reference to the stroke vector paragraph of storage can be associated with different reference characters.
Processor can also distribute an age value ToL for adaptive template, and stores the ToL of adaptive template and distribution in the adaptive dictionary of storage unit.
Processor can be replaced the existing project that has maximum ToL in the adaptive dictionary, and the ToL value of other existing project is increased by a scheduled volume.
Adaptive dictionary can be stored in the random access memory device or flash element of storage unit.
According to a fourth aspect of the present invention, provide a kind of electronic installation, having comprised: a user interface is used to import the marking of representing character; A storage unit; With a processor.Wherein, processor extracts a plurality of stroke vector paragraphs from marking; In each a plurality of PDF of cell stores with reference to the stroke vector paragraph, for the stroke vector paragraph of each extraction is determined an immediate PDF, and in storage unit, search for the identification and matching of adaptive dictionary with definite marking based on the immediate PDF that determines, the adaptive template of in the adaptive dictionary each all contains a plurality of identifiers, is used to the PDF of a storage of each stroke vector paragraph identification of reference character.
Processor can distribute a new adaptive template for input character, and this adaptive template contains an identifier array, is used to the immediate PDF of each stroke vector paragraph identification storage, so that store in adaptive dictionary.
The invention DETAILED DESCRIPTION OF THE PREFERRED
Fig. 2 has illustrated a kind of electronic installation 201.Described device 201 is a kind of hand-held PDA telephone sets, comprising: a radio frequency communications unit 202, and it links to each other with a processor 203 and communicates by letter; The communication that also links to each other of the user interface of touch-screen 205 forms (being typically LCD) and an optional keyboard 206 with processor 203.
Processor 203 comprises an encoder/decoder 211, this encoder/decoder has the code ROM (read-only memory) (ROM) 212 that is associated of storage data, is used for voice and other signal of being sent and receive by electronic installation 201 are carried out Code And Decode.Processor 203 also comprises a microprocessor 213, links to each other with the character ROM (read-only memory) (ROM) 214 that is associated with encoder/decoder 211 by common bus 218.Microprocessor 213 also links to each other with a static programmable memory 216 with a random access memory (RAM) 204 by common bus 218.Except other feature and function, these static programmable memory 216 storages are used for adaptive template, an identifier that has telephone number and be associated (people's who is associated with each number the name) database of character recognition.
The auxiliary output of microprocessor 213 links to each other with an alarm module 215, and this alarm module typically comprises loudspeaker, Vib. and related driving device.Character ROM (read-only memory) 214 storage is used for code that text message is decoded or encoded, and text message receives in touch-screen 205 or 206 inputs of optional keyboard and by communication unit 202.In this embodiment, character ROM (read-only memory) 214 is gone back the operational code (OC) of storage microprocessor 213 and is used for the fixedly recognition dictionary of character recognition.Operational code (OC) is used for running application on electronic installation 201.
Radio frequency communications unit 202 is one and has the receiver of antenna 207 and the composite set of transmitter.Communication unit 202 has a transceiver 208, links to each other with antenna 207 through radio frequency amplifier 209.Transceiver 208 also links to each other with a modulator/demodulator composite set 210 that communication unit 202 is connected to processor 203.
Fig. 3 has shown the process flow diagram according to the sorter with user's adaption function of an example embodiment of the present invention.In frame 301, import a marking of representing character, for example utilize the touch-screen of handheld device such as PDA telephone set 201 (Fig. 2) to import.
For marking, that square frame 302 is carried out is level and smooth, remove make an uproar, size normalization and extract the stroke vector paragraph.Smoothly be performed such: by (x y) averages, and (x y) finishes to replace the coordinate figure of this point with the mean value that calculates to the coordinate of a point and its consecutive point.Through after the smoothing processing, be removed by the point of the redundancy of generating high frequency noise.The point of these redundancies is coordinate figure (x, y) those identical points of point (predecessor) of replacing with their.Then, this mark is scaled to and is fit to a standard rectangular size, such as 180 * 180 of embodiments of the invention.
A stroke section in example embodiment is the line segment between the local maximum deflection of marking changes.The stroke vector paragraph is the bivector o that derives from each section
t=(d
x, d
y), d wherein
xAnd d
yBe in the starting point of line segment and the difference of the coordinate between the end point.Depend on the complicacy of marking, the quantity of stroke vector paragraph may change.
Square frame 303 and 304 is formed the search phase 308 of the process flow diagram 300 of example embodiment.In the search phase 308, each the stroke Duan Youyi probability distribution function (PDF) that extracts at square frame 302 carries out modelling, and for example, the form of probability distribution function is
Gaussian Mixture PDF.As shown in Figure 4, each character model in fixing recognition dictionary is a Gaussian Mixture PDF sequence (b
1, b
2... b
N), for example 402, N is the average stroke number of character.DYNAMIC PROGRAMMING (DP) process is used for according to the stroke section of extracting as 406, with modelling the stroke section remove to mate each character model of storage as 402 (the fixedly PDF sequences in the dictionary).Character model with maximum match score is exactly the recognition result of marking 404.
A technician of this area will appreciate that, is stored in the character model in the fixing recognition dictionary, such as 402, and the storehouse of the training sample of collecting before stemming from.For each training sample, represent the stroke section of the marking of a given character to be extracted out.A character model, i.e. the sequence of the Gaussian Mixture PDF of the stroke section of each extraction is by modelling and be connected to the character of sample marking representative.
Get back to Fig. 3, in example embodiment, the search that square frame 304 is carried out in adaptive dictionary.The details of adaptive dictionary can be described below.In square frame 305,, will produce a new character model (in square frame 306) and carry out the renewal (in square frame 307) of adaptive dictionary if the character of an input is not correctly discerned after search procedure 308.In the example embodiment, square frame 306 and 307 details can be described below.
An ideographic character collection such as Chinese character set, has a plurality of vocabulary, and each character has many strokes (see Fig. 4, character 404 and line segment are as 406).Because each stroke section is all by such as Gaussian Mixture PDF modelling, fixedly recognition dictionary used in square frame 403 may take very large storage space.In example embodiment, all the Gauss PDF in the square frame 303 are quantized into the Gauss PDF of some (such as 256) in code book.In the Gauss PDF of example embodiment troops, two Gauss PDF N (; μ
i, ∑
i) and N (; μ
j, ∑
j) between distortion measurement be used as relative entropy (Kullback-Leibler (KL) divergence) and calculate.Two Gauss PDF N (; μ
i, ∑
i) and N (; μ
j, ∑
j) relative entropy be defined as:
The mark of " tr[] " representing matrix wherein.
As further reference, the reader can directly consult " S.Kullback Information Theoryand Statistics.New York:Wiley, 1959 ", and in other words, this book is incorporated this instructions with way of reference.
Go out as shown in Figure 5, in example embodiment, (promptly writing a Chinese character in simplified form symbol or individualized character) marking 501 of user's establishment is split into line segment model sequence.In the line segment model sequence each has a Gauss PDF, and for each the Gauss PDF in the fixing recognition dictionary 502, such as 500, finds a most similar PDF who is called coded word 504 in code book 506.Thereby in the embodiment of example, each used in the square frame 203 (Fig. 2) PDF is actually an index as 500: in this index point code book in 256 coded words one, and such as 504.
Fig. 6 has illustrated the method that produces a new adaptive template in the example embodiment.In example embodiment, the marking for the representative character of input in square frame 601 through after the pre-service to mark, extracts a stroke vector paragraph sequence { o with T stroke vector paragraph in square frame 602
1, o
2, o
3... o
T.Set counter i=0 (square frame 603), and be each stroke vector paragraph o
iDetermine immediate Gauss's coded word N (; μ
j, ∑
j), wherein
(square frame 604).Set A[i]=j (square frame 605), be identified as immediate Gauss's coded word that i strokes vector determined.Repeat square frame 604 and 605, up to i=T (square frame 606).In example embodiment, identifier A[0..N-1] be used as the adaptive template that marking is connected to the character of its representative and distribute.
The character of marking representative may be confirmed as the part of the initial input of this marking, for example, and by the choice set that obtains in a plurality of characters from be presented at PDA telephone set (Fig. 2) touch-screen 205 201, that be in mode of learning (Fig. 2).But, should be realized that, in different example embodiment, the character of marking representative may be determined at the different point that produces new adaptive template, is included in to determine array of indexes A[0..T-1 in the process of adding adaptive template in adaptive dictionary] (square frame 607) afterwards.
The fixedly recognition dictionary of mentioning in the square frame 303 of Fig. 3 can be stored among the ROM214, and adaptive dictionary (square frame 304 of Fig. 3) is stored in the storer 216 and when powering up and is loaded among the RAM 204 simultaneously.The available RAM 204 of a handwriting engine may be very limited, such as, only can store 100 adaptive templates.In example embodiment,, provide the method for a kind of adaptive dictionary of renewal (square frame 307 of Fig. 3) as introduction with reference to figure 7.
Each existing adaptive template has an increasing integer to be used for writing down its age value (ToL), and this numeral has identified the order that each adaptive template is stored in fact in adaptive dictionary.For the marking of each character of input in square frame 701, stroke vector paragraph sequence is extracted out (square frame 702), and with fixedly recognition dictionary and adaptive dictionary in adaptive template matches (square frame 703).Comprise with the matching process of adaptive template: in each PDF of a plurality of storages, for the stroke vector paragraph of each extraction is determined immediate PDF with reference to the stroke vector paragraph; With adaptive template of search, this adaptive template identification and the identical PDF of PDF that determines for the stroke vector paragraph that extracts.
There is two-way to export to square frame 704 and 708 from square frame 703.The input that consideration is given square frame 708 from square frame 703, if the candidate at top (C1) comes from adaptive dictionary (square frame 708), the ToL value of this template is changed to 0 (square frame 709) so; Perhaps, if determine that at square frame 708 candidate (C1) at top comes from adaptive dictionary, walk around square frame 710 so, the ToL value is constant.
The input that consideration is given square frame 704 from square frame 703, in square frame 704, if the candidate character need add in the adaptive dictionary, promptly candidate C1 (square frame 703) is not the correct identification of institute's input character, as mentioned above according to Fig. 6, just produces a new adaptive template.Otherwise program stops.
If in step 704, determine that the candidate character need add in the adaptive dictionary, detect in square frame 705 so whether adaptive dictionary is full.If adaptive dictionary is discontented, just adds a new template (square frame 710) in dictionary and also the ToL value of this template is changed to 0.If adaptive dictionary is full, find template so with maximum ToL value, it is replaced (square frame 706) with new template.The ToL value of this new template is changed to 0 equally.At last, the ToL value that increases all existing adaptive templates (for example: ToL=ToL+1) (square frame 707).Should be noted that the counting of the ToL value of some character may become excessive owing to all ToL values in square frame 707 have all increased, it may be suitable therefore these count values being carried out the normalization processing, for example, and by whole ToL values are used divisions of integer.
Example embodiment provides identification to rely on the method for user's character.Based on line segment match classifying and Gauss PDF clustered approach at random, example embodiment provides a kind of adaptive template generation method and a kind of dictionary updating method to improve the availability of handwriting recognition (HWR) product to the specific user.Thereby the user can write the individualized mark that the character of relative complex is write a Chinese character in simplified form.This marking is associated with the character of complexity by code book and can be used in input character in equipment.
A technician of this area will appreciate that, the of the present invention many modification shown in and change can be made in a particular embodiment, and do not break away from the present invention the main idea or the scope of wide in range description.Therefore, no matter aspect which, it is illustrative and not restrictive that these embodiment should be considered to.