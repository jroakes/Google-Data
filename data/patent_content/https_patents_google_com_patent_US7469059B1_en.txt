US7469059B1 - Reorganization of raw image data for processing - Google Patents
Reorganization of raw image data for processing Download PDFInfo
- Publication number
- US7469059B1 US7469059B1 US11/015,980 US1598004A US7469059B1 US 7469059 B1 US7469059 B1 US 7469059B1 US 1598004 A US1598004 A US 1598004A US 7469059 B1 US7469059 B1 US 7469059B1
- Authority
- US
- United States
- Prior art keywords
- grayscale
- reorganized
- image data
- raw
- color
- Prior art date
- Legal status (The legal status is an assumption and is not a legal conclusion. Google has not performed a legal analysis and makes no representation as to the accuracy of the status listed.)
- Expired - Fee Related, expires
Links
Images
Classifications
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/169—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding
- H04N19/186—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the coding unit, i.e. the structural portion or semantic portion of the video signal being the object or the subject of the adaptive coding the unit being a colour or a chrominance component
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N1/00—Scanning, transmission or reproduction of documents or the like, e.g. facsimile transmission; Details thereof
- H04N1/46—Colour picture communication systems
- H04N1/64—Systems for the transmission or the storage of the colour picture signal; Details therefor, e.g. coding or decoding means therefor
- H04N1/648—Transmitting or storing the primary (additive or subtractive) colour signals; Compression thereof
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N23/00—Cameras or camera modules comprising electronic image sensors; Control thereof
- H04N23/80—Camera processing pipelines; Components thereof
- H04N23/84—Camera processing pipelines; Components thereof for processing colour signals
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N2209/00—Details of colour television systems
- H04N2209/04—Picture signal generators
- H04N2209/041—Picture signal generators using solid-state devices
- H04N2209/042—Picture signal generators using solid-state devices having a single pick-up sensor
- H04N2209/045—Picture signal generators using solid-state devices having a single pick-up sensor using mosaic colour filter
Definitions
- the present invention relates generally to image data processing. More specifically, systems and methods for reorganization of raw image data captured by a camera for improved image processing are disclosed.
- JPEG Joint Photographic Experts Group
- JPEG Joint Photographic Experts Group
- any large moves to tone and/or color may exaggerate the 8-by-8-pixel blocks that form the foundation of JPEG compression.
- some cameras allow the setting of various parameters (e.g., color space, sharpness value, tone curve and/or contrast setting) for the conversion of raw data captured by the camera's sensor to the output JPEG image, such adjustment of parameters is time consuming and thus generally impractical to employ on a per-shot basis.
- Another issue with the compression performed by the camera is that many cameras can capture at least 12 bits, or 4096 shades, of tonal information per pixel.
- the JPEG format is limited to 8 bits per channel per pixel.
- the built-in raw converter in the camera compresses or throws away a large amount of the captured data that cannot be recovered and thus cannot be utilized in the manipulation of the output image or data.
- the capturing and recording of images in electronic form and outputting of compressed JPEG images may be employed in various applications.
- One exemplary application is the scanning of books, magazines, and/or other printed material into digital form. Such scanning of printed material has become more common with the advent of improved imaging, storage and distribution techniques.
- the conversion of printed material into electronic form allows institutions such as libraries, universities, bookstores, and private enterprises to reduce the cost of storage, facilitate remote access, enable simultaneous access by multiple users, facilitate search and retrieval of information, and/or protect information in rare or out-of-print works from loss or destruction.
- the recorded image can then be manipulated or otherwise processed.
- Digitally recorded bound documents can be de-warped, reformatted, supplemented with additional information, compressed, and/or processed with optical character recognition (OCR) software, and indexed to facilitate electronic search.
- OCR optical character recognition
- the method generally includes separately compressing each color component, e.g., RGB, of raw grayscale image data to generate a reorganized grayscale data output file by a first processor, outputting the reorganized output file to a second processor, and performing color decoding to generate a color image output by the second processor.
- the raw grayscale image data may be that of an image of a target captured by a digital camera in an image capturing system.
- the second processor is separate from the first processor that records the raw grayscale image data of the image captured and may be physically external to the camera.
- the reorganized grayscale data output file may be in a reorganized pattern of an 16 ⁇ 16 array, the 16 ⁇ 16 array being composed of 2 ⁇ 2 arrays of 8 ⁇ 8 embedded color-specific array.
- the raw grayscale image data can be a 2N ⁇ 2N array and the reorganized grayscale data output may include 4 N ⁇ N arrays where N is a factor of 8.
- the reorganized grayscale data output file may include four separate grayscale data files.
- the second processor may also perform additional image processing tasks such as white balance, colorimetric rendering, gamma correction, noise reduction, antialiasing, and/or sharpening.
- the reorganized grayscale data output file may be in a reorganized pattern of an 16 ⁇ 16 array, the 16 ⁇ 16 array being composed of 2 ⁇ 2 arrays of 8 ⁇ 8 embedded color-specific array.
- the raw grayscale image data may be in a first two-dimensional spatial array pattern and the reorganized grayscale data output file may be in a second two-dimensional spatial array pattern that segregates each color component.
- Each element of raw grayscale image data can be associated with a color component and corresponds to a respective element in the reorganized grayscale data output file according to the color component of the element and according to its respective position within the raw grayscale image data.
- the raw grayscale image data is in a Bayer color filter array pattern and the reorganized grayscale data output file is in a special raw format that can be quickly generated by the camera with some compression such that the output data file is at least somewhat compressed but without serious JPEG artifacts.
- the reorganized grayscale data output file can be subsequently used in a demosaicing operation that interpolates and generates a full resolution RGB type image.
- a system for processing raw grayscale image data generally includes a digital camera configured to capture an image of a target and having a first processor internal thereto configured to record the raw grayscale image data of the image, the first processor being further configured to compress each color component of the raw grayscale image data separately to generate a reorganized grayscale data output file, and a second processor different from the first processor configured to perform color decoding to generate a color image output.
- FIG. 1 illustrates a Bayer color filter array used by digital cameras.
- FIG. 2 illustrates a suitable reorganization of the raw grayscale RGB grayscale data from data generated by the Bayer color filtering array of FIG. 1 .
- FIG. 3 is a flowchart of an exemplary process for processing of raw image data captured by the camera's sensor.
- Digital camera generally have sensors that capture raw data in grayscale.
- a raw file is a record of the raw (unprocessed) data in grayscale captured by the sensor.
- Typical conventional cameras utilize a built-in converter to convert the grayscale raw data to color images compressed using JPEG compression.
- digital cameras often use an image sensor composed of a two-dimensional area array of photosensitive detectors or photosites to collect light (photons) that are recorded in the image capture.
- the array is made up of rows and columns of photosensitive detectors, typically using a charge-coupled device (CCD) or a complementary metal oxide semiconductor (CMOS) technology to form the image.
- CCD charge-coupled device
- CMOS complementary metal oxide semiconductor
- each element of the array contributes one pixel to the final image.
- Each photosensitive detector produces a charge proportional to the amount of light that impinges on the detector, i.e., the detector simply counts the number of photons.
- most sensors use color filtering to look at the light in its three primary colors (red-green-blue or RGB) in order to capture a full color image.
- CFA color filter array
- each element in the array of photosensitive detectors can be covered by a color filter such that each element captures only red, green, or blue light.
- Many cameras apply the color filters in a Bayer pattern 44 as shown in FIG. 1 .
- the Bayer filter pattern alternates a row of red and green filters with a row of blue and green filters such that there are as many green pixels as there are blue and red pixels combined.
- the colored pixels are divided in this way in order to create an image that will be perceived as true color by the human eye because the human eye is not equally sensitive to all three colors.
- each element captures only one color. For example, each red-filtered element produces a grayscale value proportional to the amount of red light reaching the corresponding sensor. Similarly, each green-filtered element produces a grayscale value proportional to the amount of green light reaching the corresponding sensor and each blue-filtered element produces a grayscale value proportional to the amount of blue light reaching the corresponding sensor.
- the raw output from a color filter sensor with a Bayer filter pattern is a mosaic of separate red, green and blue pixels of differing intensity.
- Each pixel in the sensor image is the output of a red, green or blue sensor.
- Conventional digital cameras commonly have built-in raw converters to convert the grayscale raw output of the color filter array into a color image by interpolating the missing color information for each pixel from its neighbors, a process known as demosaicing. Demosaicing converts the mosaic of separate colors into an equally sized mosaic of true colors.
- Each colored pixel can be used more than once and the true color of a single pixel can be determined by averaging the values from the closest surrounding pixels.
- the built-in raw converter may also perform various other tasks such as white balance, colorimetric interpretation, gamma correction, noise reduction, antialiasing, amplitude correction for radial distance (or input ray angle), and/or sharpening, although different raw converters may use different algorithms for such tasks such that the same image may appear differently when processed using different raw converters.
- the built-in raw converter in the camera then compresses the color image using JPEG compression.
- the digital camera may reorganize or rearrange and compress the raw image data and output the reorganized raw image data so that the demosaicing may be performed externally of the camera.
- the pixels of the raw image data may be reorganized in a manner that allows high quality compression of the reorganized raw data using the digital camera's internal JPG compression.
- various other raw configurations may also be implemented.
- the digital cameras of an image capturing system may each be configured to output grayscale data rather than compressed, e.g., JPEG, color images, thereby shifting the color decoding process from the built-in converter in the camera to a processor separate from that involved with the capturing and recording of image data.
- the processor for performing the color decoding process is generally physically located external to the camera although the camera may be configured to house such a separate processor internally.
- the camera's processor may reorganize the grayscale color raw data in a modified JPEG format to compress each color component (e.g., red, green, blue) separately.
- each color component e.g., red, green, blue
- FIG. 2 illustrates a suitable reorganization 46 of the grayscale raw data. As shown, the RGB grayscale data is reorganized into a 16 ⁇ 16 array 46 .
- the 16 ⁇ 16 array is organized as a 2 ⁇ 2 array of 8 ⁇ 8 embedded color-specific arrays as shown in FIG. 2 .
- each 8 ⁇ 8 embedded color-specific array contains only corresponding same-colored elements from the Bayer color filtering array.
- the raw grayscale image data is a 2N ⁇ 2N array and the reorganized grayscale data output includes 4 N ⁇ N arrays where N is a factor of 8.
- the reorganized grayscale data output of 4 N ⁇ N arrays may be stored in a single grayscale data file or four separate grayscale data files, for example.
- FIG. 2 illustrates the reorganized pattern, i.e., one building block or section, and that the entire reorganized data file is generally composed of multiples of the reorganized pattern shown.
- the highlighted 2 ⁇ 2 block is positioned at row 2 , column 1 within the Bayer color filter array 44 .
- the R (red) element of the 2 ⁇ 2 block is repositioned or reorganized to the corresponding 8 ⁇ 8 embedded R array and to a corresponding position within the embedded R array, i.e., row 2 , column 1 within the embedded R array.
- the B (blue) element and the two G (green) elements are similarly reorganized from the Bayer color filter array 44 to the reorganized array 46 .
- the reorganized grayscale RGB data is output to a separate processor for color decoding and compression.
- FIG. 3 is a flowchart of an exemplary process 50 for processing of raw image data captured by the camera's sensor.
- an image of a target is captured using a digital camera.
- the image may be recorded in a raw grayscale image data file in a Bayer color filter array pattern, for example.
- each color component in the raw grayscale image data file is reorganized and compressed separately to generate compressed reorganized grayscale raw data output.
- the raw grayscale image data may be reorganized so that pixels in each 8 ⁇ 8 block are from the same color dimension or component.
- the reorganized grayscale raw data may then be compressed using JPG, for example.
- JPG for example.
- RGB color space is used, although various other color spaces or color representations may be employed.
- block 54 is generally performed by the internal built-in processor of the digital camera, the camera and process may alternatively be configured to output the raw grayscale image data file so that block 54 may be performed by a separate processor.
- the compressed reorganized grayscale image with each set of color components separately compressed is outputted, thereby bypassing demosaicing and/or various other image processing algorithms of the camera.
- a processor separate from that performing the image data recording performs color decoding (demosaicing) and/or other image processing tasks to generate the color image output. Examples of the other image processing tasks may include, for example, white balance, colorimetric rendering, gamma correction, noise reduction, antialiasing, and/or sharpening.
- the image processing processor is typically physically external to the camera and may be for example, embodied in a separate computer to which the image data is off loaded.
- grayscale RGB data improves the ability to compress images within the digital camera.
- outputting data in grayscale by bypassing the camera's internal demosaicing and other image processing algorithms provides greater control and flexibility over the color decoding and compression processes and thus improves the quality of the resulting output image, as the various parameters that affect the output image quality can generally be controlled and manipulated external to the camera when the grayscale file is converted to the color image.
Abstract
Description
Claims (19)
Priority Applications (1)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US11/015,980 US7469059B1 (en) | 2004-12-17 | 2004-12-17 | Reorganization of raw image data for processing |
Applications Claiming Priority (1)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US11/015,980 US7469059B1 (en) | 2004-12-17 | 2004-12-17 | Reorganization of raw image data for processing |
Publications (1)
Publication Number | Publication Date |
---|---|
US7469059B1 true US7469059B1 (en) | 2008-12-23 |
Family
ID=40134270
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
US11/015,980 Expired - Fee Related US7469059B1 (en) | 2004-12-17 | 2004-12-17 | Reorganization of raw image data for processing |
Country Status (1)
Country | Link |
---|---|
US (1) | US7469059B1 (en) |
Cited By (7)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US20070189603A1 (en) * | 2006-02-06 | 2007-08-16 | Microsoft Corporation | Raw image processing |
US20080090986A1 (en) * | 2006-10-16 | 2008-04-17 | Garo Khanarian | Heat stable aryl polysiloxane compositions |
US20090046170A1 (en) * | 2006-04-19 | 2009-02-19 | Linzer Elliot N | Digital video camera non-integer-ratio bayer domain scaler |
US20090154551A1 (en) * | 2007-12-12 | 2009-06-18 | Samsung Techwin Co., Ltd. | Apparatus for recording/reproducing moving picture, and recording medium thereof |
US20100128039A1 (en) * | 2008-11-26 | 2010-05-27 | Kwang-Jun Cho | Image data processing method, image sensor, and integrated circuit |
US20140015996A1 (en) * | 2012-07-12 | 2014-01-16 | Sumit Chawla | Image Capture Accelerator |
CN105657385A (en) * | 2015-12-31 | 2016-06-08 | 上海集成电路研发中心有限公司 | Compression method for original image data |
Citations (7)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US5765176A (en) * | 1996-09-06 | 1998-06-09 | Xerox Corporation | Performing document image management tasks using an iconic image having embedded encoded information |
US5825830A (en) * | 1995-08-17 | 1998-10-20 | Kopf; David A. | Method and apparatus for the compression of audio, video or other data |
US6633679B1 (en) * | 1999-03-23 | 2003-10-14 | Teletechnologies, Ltd. | Visually lossless still image compression for CMYK, CMY and Postscript formats |
US6760127B1 (en) * | 2000-06-01 | 2004-07-06 | Xerox Corporation | Multi-level semi-vector error diffusion |
US6961085B2 (en) * | 2000-10-02 | 2005-11-01 | Mega Chips Corporation | Digital image processing and data compression circuit |
US7024138B2 (en) * | 2003-02-28 | 2006-04-04 | Canon Kabushiki Kaisha | Image forming apparatus, and replenishing developer kit |
US7266250B2 (en) * | 2000-01-19 | 2007-09-04 | Xerox Corporation | Methods for generating anti-aliased text and line graphics in compressed document images |
-
2004
- 2004-12-17 US US11/015,980 patent/US7469059B1/en not_active Expired - Fee Related
Patent Citations (7)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US5825830A (en) * | 1995-08-17 | 1998-10-20 | Kopf; David A. | Method and apparatus for the compression of audio, video or other data |
US5765176A (en) * | 1996-09-06 | 1998-06-09 | Xerox Corporation | Performing document image management tasks using an iconic image having embedded encoded information |
US6633679B1 (en) * | 1999-03-23 | 2003-10-14 | Teletechnologies, Ltd. | Visually lossless still image compression for CMYK, CMY and Postscript formats |
US7266250B2 (en) * | 2000-01-19 | 2007-09-04 | Xerox Corporation | Methods for generating anti-aliased text and line graphics in compressed document images |
US6760127B1 (en) * | 2000-06-01 | 2004-07-06 | Xerox Corporation | Multi-level semi-vector error diffusion |
US6961085B2 (en) * | 2000-10-02 | 2005-11-01 | Mega Chips Corporation | Digital image processing and data compression circuit |
US7024138B2 (en) * | 2003-02-28 | 2006-04-04 | Canon Kabushiki Kaisha | Image forming apparatus, and replenishing developer kit |
Non-Patent Citations (1)
Title |
---|
Zhang et al., "Fractal Color Image Compression Using Vector Distortion Measure", IEEE, vol. 3, Oct. 1995, pp. 276-279. * |
Cited By (18)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US8577187B2 (en) * | 2006-02-06 | 2013-11-05 | Microsoft Corp. | Raw image processing |
US20070189603A1 (en) * | 2006-02-06 | 2007-08-16 | Microsoft Corporation | Raw image processing |
US20120026178A1 (en) * | 2006-02-06 | 2012-02-02 | Microsoft Corporation | Raw image processing |
US8098964B2 (en) * | 2006-02-06 | 2012-01-17 | Microsoft Corp. | Raw image processing |
US8131071B2 (en) | 2006-04-19 | 2012-03-06 | Ambarella, Inc. | Digital video camera non-integer-ratio Bayer domain scaler |
US7646910B1 (en) * | 2006-04-19 | 2010-01-12 | Ambarella, Inc. | Digital video camera non-integer-ratio Bayer domain scaler |
US7965888B2 (en) | 2006-04-19 | 2011-06-21 | Ambarella, Inc. | Digital video camera non-integer-ratio bayer domain scaler |
US20110211756A1 (en) * | 2006-04-19 | 2011-09-01 | Linzer Elliot N | Digital video camera non-integer-ratio bayer domain scaler |
US20090046170A1 (en) * | 2006-04-19 | 2009-02-19 | Linzer Elliot N | Digital video camera non-integer-ratio bayer domain scaler |
US20080090986A1 (en) * | 2006-10-16 | 2008-04-17 | Garo Khanarian | Heat stable aryl polysiloxane compositions |
US8142895B2 (en) * | 2006-10-16 | 2012-03-27 | Rohm And Haas Company | Heat stable aryl polysiloxane compositions |
US20090154551A1 (en) * | 2007-12-12 | 2009-06-18 | Samsung Techwin Co., Ltd. | Apparatus for recording/reproducing moving picture, and recording medium thereof |
US20100128039A1 (en) * | 2008-11-26 | 2010-05-27 | Kwang-Jun Cho | Image data processing method, image sensor, and integrated circuit |
US20140015996A1 (en) * | 2012-07-12 | 2014-01-16 | Sumit Chawla | Image Capture Accelerator |
US9288413B2 (en) * | 2012-07-12 | 2016-03-15 | Gopro, Inc. | Image capture accelerator |
US9686493B2 (en) | 2012-07-12 | 2017-06-20 | Gopro, Inc. | Image capture accelerator |
US10089710B2 (en) | 2012-07-12 | 2018-10-02 | Gopro, Inc. | Image capture accelerator |
CN105657385A (en) * | 2015-12-31 | 2016-06-08 | 上海集成电路研发中心有限公司 | Compression method for original image data |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
US8106957B2 (en) | Image signal processing apparatus, and image signal processing method | |
US6943831B2 (en) | Method and apparatus to extend the effective dynamic range of an image sensing device and use residual images | |
US6366318B1 (en) | CFA correction for CFA images captured at partial resolution | |
JP5280448B2 (en) | Image processing apparatus, image processing method, image processing program, and semiconductor integrated circuit | |
JP4840967B2 (en) | Imaging apparatus, image processing method, program, and storage medium | |
JP5045421B2 (en) | Imaging apparatus, color noise reduction method, and color noise reduction program | |
EP2193656B1 (en) | Multi-exposure pattern for enhancing dynamic range of images | |
US20070159542A1 (en) | Color filter array with neutral elements and color image formation | |
WO2012164896A1 (en) | Image processing device, image processing method, and digital camera | |
US20070153099A1 (en) | Image signal processing apparatus, imaging apparatus, image signal processing method and computer program thereof | |
JP3968121B2 (en) | Image compression method | |
US8532370B2 (en) | Image processing apparatus and image processing method | |
US8305459B2 (en) | Image processing apparatus and camera module | |
US8248496B2 (en) | Image processing apparatus, image processing method, and image sensor | |
CN101682788B (en) | Signal processing method and signal processing device | |
US7072509B2 (en) | Electronic image color plane reconstruction | |
JP2002084547A (en) | Image data size converting processor, digital camera, and image data size converting processing record medium | |
US20060050956A1 (en) | Signal processing apparatus, signal processing method, and signal processing program | |
US8111298B2 (en) | Imaging circuit and image pickup device | |
JP2003346143A (en) | Image processing method and image processing program | |
US8237829B2 (en) | Image processing device, image processing method, and imaging apparatus | |
US7469059B1 (en) | Reorganization of raw image data for processing | |
WO2007082289A2 (en) | Color filter array with neutral elements and color image formation | |
Lukac | Single-sensor digital color imaging fundamentals | |
JP2003052051A (en) | Image signal processing method, image signal processor, imaging apparatus and recording medium |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
AS | Assignment |
Owner name: GOOGLE INC., CALIFORNIAFree format text: ASSIGNMENT OF ASSIGNORS INTEREST;ASSIGNORS:LEFEVERE, FRANCOIS-MARIE;SARIC, MARIN;BLOOMBERG, DAN S.;REEL/FRAME:016121/0605Effective date: 20041216 |
|
STCF | Information on status: patent grant |
Free format text: PATENTED CASE |
|
CC | Certificate of correction | ||
FPAY | Fee payment |
Year of fee payment: 4 |
|
FPAY | Fee payment |
Year of fee payment: 8 |
|
AS | Assignment |
Owner name: GOOGLE LLC, CALIFORNIAFree format text: CHANGE OF NAME;ASSIGNOR:GOOGLE INC.;REEL/FRAME:044101/0610Effective date: 20170929 |
|
FEPP | Fee payment procedure |
Free format text: MAINTENANCE FEE REMINDER MAILED (ORIGINAL EVENT CODE: REM.); ENTITY STATUS OF PATENT OWNER: LARGE ENTITY |
|
LAPS | Lapse for failure to pay maintenance fees |
Free format text: PATENT EXPIRED FOR FAILURE TO PAY MAINTENANCE FEES (ORIGINAL EVENT CODE: EXP.); ENTITY STATUS OF PATENT OWNER: LARGE ENTITY |
|
STCH | Information on status: patent discontinuation |
Free format text: PATENT EXPIRED DUE TO NONPAYMENT OF MAINTENANCE FEES UNDER 37 CFR 1.362 |
|
FP | Lapsed due to failure to pay maintenance fee |
Effective date: 20201223 |