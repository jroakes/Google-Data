CN109983508A - Fast Flourier color constancy - Google Patents
Fast Flourier color constancy Download PDFInfo
- Publication number
- CN109983508A CN109983508A CN201780070543.2A CN201780070543A CN109983508A CN 109983508 A CN109983508 A CN 109983508A CN 201780070543 A CN201780070543 A CN 201780070543A CN 109983508 A CN109983508 A CN 109983508A
- Authority
- CN
- China
- Prior art keywords
- input picture
- annular
- coloration
- image
- chroma histogram
- Prior art date
- Legal status (The legal status is an assumption and is not a legal conclusion. Google has not performed a legal analysis and makes no representation as to the accuracy of the status listed.)
- Granted
Links
- 238000005286 illumination Methods 0.000 claims abstract description 157
- 238000000034 method Methods 0.000 claims abstract description 145
- 238000009826 distribution Methods 0.000 claims abstract description 20
- 230000002708 enhancing effect Effects 0.000 claims description 52
- 230000006870 function Effects 0.000 claims description 48
- 238000012549 training Methods 0.000 claims description 27
- 239000003086 colorant Substances 0.000 claims description 14
- 238000012937 correction Methods 0.000 claims description 12
- 238000003384 imaging method Methods 0.000 claims description 12
- 238000013507 mapping Methods 0.000 claims description 10
- 238000010801 machine learning Methods 0.000 claims description 7
- 239000011159 matrix material Substances 0.000 claims description 6
- 238000005315 distribution function Methods 0.000 claims description 3
- 238000012545 processing Methods 0.000 description 21
- 238000004891 communication Methods 0.000 description 17
- 238000005516 engineering process Methods 0.000 description 15
- 230000008901 benefit Effects 0.000 description 11
- 230000009466 transformation Effects 0.000 description 11
- 238000010586 diagram Methods 0.000 description 10
- 230000005540 biological transmission Effects 0.000 description 9
- 238000004040 coloring Methods 0.000 description 9
- 238000003860 storage Methods 0.000 description 8
- 230000008859 change Effects 0.000 description 7
- 238000006243 chemical reaction Methods 0.000 description 6
- 238000013500 data storage Methods 0.000 description 6
- 230000001413 cellular effect Effects 0.000 description 4
- 238000009499 grossing Methods 0.000 description 4
- 238000013459 approach Methods 0.000 description 3
- 230000007774 longterm Effects 0.000 description 3
- 230000007935 neutral effect Effects 0.000 description 3
- 230000003287 optical effect Effects 0.000 description 3
- 238000003825 pressing Methods 0.000 description 3
- 230000000712 assembly Effects 0.000 description 2
- 238000000429 assembly Methods 0.000 description 2
- 230000000295 complement effect Effects 0.000 description 2
- 238000010276 construction Methods 0.000 description 2
- 238000007667 floating Methods 0.000 description 2
- 230000010365 information processing Effects 0.000 description 2
- 239000004973 liquid crystal related substance Substances 0.000 description 2
- 230000007246 mechanism Effects 0.000 description 2
- 238000012986 modification Methods 0.000 description 2
- 230000004048 modification Effects 0.000 description 2
- 238000010606 normalization Methods 0.000 description 2
- 230000004044 response Effects 0.000 description 2
- 239000004065 semiconductor Substances 0.000 description 2
- 230000035945 sensitivity Effects 0.000 description 2
- 239000007787 solid Substances 0.000 description 2
- 241001354471 Pseudobahia Species 0.000 description 1
- 241000638935 Senecio crassissimus Species 0.000 description 1
- 230000003213 activating effect Effects 0.000 description 1
- 239000000654 additive Substances 0.000 description 1
- 230000000996 additive effect Effects 0.000 description 1
- 230000003321 amplification Effects 0.000 description 1
- 238000004458 analytical method Methods 0.000 description 1
- 230000006399 behavior Effects 0.000 description 1
- 230000015572 biosynthetic process Effects 0.000 description 1
- 210000004556 brain Anatomy 0.000 description 1
- 238000004587 chromatography analysis Methods 0.000 description 1
- 238000013527 convolutional neural network Methods 0.000 description 1
- 125000004122 cyclic group Chemical group 0.000 description 1
- 230000007423 decrease Effects 0.000 description 1
- 238000001514 detection method Methods 0.000 description 1
- 239000004744 fabric Substances 0.000 description 1
- 238000011478 gradient descent method Methods 0.000 description 1
- 230000005389 magnetism Effects 0.000 description 1
- 238000004519 manufacturing process Methods 0.000 description 1
- 239000000463 material Substances 0.000 description 1
- 238000005259 measurement Methods 0.000 description 1
- 229910044991 metal oxide Inorganic materials 0.000 description 1
- 150000004706 metal oxides Chemical class 0.000 description 1
- 238000013508 migration Methods 0.000 description 1
- 230000005012 migration Effects 0.000 description 1
- 238000003199 nucleic acid amplification method Methods 0.000 description 1
- 230000008447 perception Effects 0.000 description 1
- 230000005622 photoelectricity Effects 0.000 description 1
- 238000007781 pre-processing Methods 0.000 description 1
- 238000002203 pretreatment Methods 0.000 description 1
- 230000008569 process Effects 0.000 description 1
- 238000005070 sampling Methods 0.000 description 1
- 230000003595 spectral effect Effects 0.000 description 1
- 230000003068 static effect Effects 0.000 description 1
- 238000007619 statistical method Methods 0.000 description 1
- 210000000352 storage cell Anatomy 0.000 description 1
- 238000006467 substitution reaction Methods 0.000 description 1
- 238000012360 testing method Methods 0.000 description 1
- 230000001960 triggered effect Effects 0.000 description 1
- 238000012800 visualization Methods 0.000 description 1
- 238000005303 weighing Methods 0.000 description 1
Classifications
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06T—IMAGE DATA PROCESSING OR GENERATION, IN GENERAL
- G06T5/00—Image enhancement or restoration
- G06T5/40—Image enhancement or restoration by the use of histogram techniques
-
- G06T5/60—
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06T—IMAGE DATA PROCESSING OR GENERATION, IN GENERAL
- G06T7/00—Image analysis
- G06T7/90—Determination of colour characteristics
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06T—IMAGE DATA PROCESSING OR GENERATION, IN GENERAL
- G06T2207/00—Indexing scheme for image analysis or image enhancement
- G06T2207/10—Image acquisition modality
- G06T2207/10024—Color image
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06T—IMAGE DATA PROCESSING OR GENERATION, IN GENERAL
- G06T2207/00—Indexing scheme for image analysis or image enhancement
- G06T2207/20—Special algorithmic details
- G06T2207/20048—Transform domain processing
- G06T2207/20056—Discrete and fast Fourier transform, [DFT, FFT]
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06T—IMAGE DATA PROCESSING OR GENERATION, IN GENERAL
- G06T2207/00—Indexing scheme for image analysis or image enhancement
- G06T2207/20—Special algorithmic details
- G06T2207/20076—Probabilistic image processing
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06T—IMAGE DATA PROCESSING OR GENERATION, IN GENERAL
- G06T2207/00—Indexing scheme for image analysis or image enhancement
- G06T2207/20—Special algorithmic details
- G06T2207/20081—Training; Learning
Abstract
Provide the method for white balance image.These methods include the chroma histogram that the pixel of input picture is determined for input picture.Identified histogram is annular chroma histogram, and annular chrominance space below is corresponding with the package version of standard, planar chrominance space.Then by annular chroma histogram and colour filter convolution to generate two-dimentional thermal map, estimation illumination coloration present in input picture is then determined using the two dimension thermal map.This may include by bivariate von Mises distribution or some other round and/or annular Probability Distribution Fitting to identified two dimension thermal map.For estimate input picture illumination chromatic value these methods relative to for determine image light source chromatic value other methods have reduced calculating cost and increased speed.
Description
Cross reference to related applications
This application claims the preferential of the U.S. Provisional Patent Application No.62/422,496 submitted on November 15th, 2016
Power, entire contents are incorporated herein by reference.
Background technique
The white balance or color correction of image refer to such processing: changing the color of the image of scene, be used for correction
The color of the illumination of the image is generated, the aesthetic feeling of image is improved or some other benefits are provided.Color correction may include using
The information of " true " color (for example, reference color present in the color or scene of palette) about picture material determines
The color of illumination, and change using identified color the color of image.In other embodiments, color correction may include
It determines determined by the statistics (for example, the histogram for determining the color value of pixel in image) of the color of pixel in image and use
Count the color to predict illumination.
Summary of the invention
Various applications include adjusting the color of image, for example, to compensate the attribute of image capture apparatus, such as generating
The relative spectral sensitivity of the pixel of the camera of image, to compensate the illumination being present in the scene indicated by image, and/or change
The aesthetic feeling of kind image.The processing can be referred to as color correction or white balance, and can be characterized as being determination and illuminate scene
The coloration of illumination is to allow the image capture of scene.The processing can also include determining the statistics of image (for example, determining image
Distribution of color in pixel) and adjustment image pixel color (for example, each Color Channel of zoomed image) so that adjustment
The statistics of image afterwards and the expected statistics of scene match (for example, the average color in image is made to be grey).However, this
Kind statistical method is performed poor under the scene for violating its basic assumption.
Present disclose provides the various methods for color correction problem to be converted to Object identifying and/or test problems.
These methods include the histogram that the color (for example, coloration) of pixel of image is constructed in the chrominance space of transformation, so that
The conversion of the histogram determined in the chrominance space of transformation is corresponding with the integral illumination coloration of image is changed.In this transformation
It may include the chrominance information that logarithmic transformation is applied to the pixel of image that histogram is generated in color space.Then it can be used
Identifying Technique of Object determines the coloration of the illumination in image, for example, to be located in the histogram determined in the chrominance space of transformation
The mass center of figure.This technology may include colour filter (for example, via convolution) being applied to histogram and using straight after colour filter
Position corresponding with the coloration of the illumination indicated in image is (for example, pass through selection in chrominance space of the square figure to determine transformation
The maximum value of histogram after colour filter).
However, determining that the illumination coloration of the image in the case where desired chroma resolution is horizontal may need in this way
Determine the convolution of very big histogram and/or the big colour filter with so big histogram.These processing may be meter
Intensity is calculated, is hampered using certain systems (for example, digital camera) and is implemented them and/or hamper their " real-time "
Ground is applied to video flowing.In order to accelerate the processing, the color of image can be determined in (wrapped) annular chrominance space of package
Spend histogram.That is, each element of this histogram can indicate the rule being located in the chrominance space of transformation in image
The quantity for the pixel at point set being then spaced.As a result, chrominance space " package " surrounds two edges of histogram.Pass through
Using this " package ", the size of identified histogram can be substantially reduced without sacrificing the resolution ratio in chrominance space.Cause
This, this method can be used for determining the illumination coloration of image within the shorter time and/or using less computing capability.Once
This method is used to determine the illumination coloration in " package " chrominance space, so that it may determine the illumination in the chrominance space not wrapped up
Coloration (for example, being handled via anti-aliasing).
Use can be determined based on the corpus of training image and the illumination coloration of its determination true (ground-truth)
In (multiple) colour filter for executing context of methods.The corpus of training image can be used according to gradient decline or some other technologies
Colour filter is trained in library.Then it can send trained colour filter to and/or be incorporated to cellular phone, camera or can be generated
In image and the other equipment for being applied thereon trained colour filter.
Therefore, this method can be related to obtaining input picture.Input picture can have the white point indicated by chromatic value,
Definition white in the input image.The first example embodiment can also relate to the color based on input picture, generate input picture
Two-dimensional chromaticity histogram.The first example embodiment can also relate to two-dimensional chromaticity histogram and colour filter convolution to create two
Dimension figure, can be considered as " thermal map (heat map) ".Entry in two-dimentional thermal map can indicate corresponding with each entry
Each tone has how close corresponding estimation to the white point of input picture.More specifically, the entry in two-dimentional thermal map can indicate
The white point of each tone corresponding with each entry and input picture has how close multiple estimations-that is, each of thermal map
Entry may include the estimation to corresponding tone.In some implementations, convolution executes in a frequency domain, and specifically, Fu
Vertical leaf transformation can be used for convolution.The first example embodiment can be additionally related to select to indicate in the figure most in a two dimensional
The entry for the particular value in threshold value being worth greatly, and it is based on selected entry, input picture is coloured to form output image.
Selected entry can define tone, more specifically define the tone of illumination, can be referred to as illumination coloration.Therefore, more
Specifically, this can be related to selecting specific estimation to the associated corresponding multiple estimations of selected entry, can be by
It is considered estimation illumination coloration.Based on the specific estimation, input picture can be coloured to form output image.Therefore, the party
Method can be related to determining the illumination coloration of input picture based on two-dimentional thermal map, and be schemed based on identified illumination coloration to input
The output image of color correction is generated as coloring.More specifically, this can pass through the color by color of image value divided by illumination
Value is realized, because input image pixels color is usually the product of true colors and illuminating color.
As described above, annular chroma histogram may include the histogram of the coloration of input picture, such as in two-dimentional u and v
In.As an example, annular may mean that each of two dimensions dimension package is surround so that input picture is more than one
A chromatic value is mapped to the identical value in annular chroma histogram.This can be realized by using modular arithmetic, so that bigger
Chromatic value " package is surround " arrives smaller chromatic value.
In some implementations, each element of annular chroma histogram can be opposite with multiple pixels of input picture
It answers, multiple pixel has chromatic value at the corresponding position set in chrominance space.In some instances, for annular coloration
Location sets of the element-specific of histogram in chrominance space can be regularly spaced apart in chrominance space.
As previously mentioned, in some implementations, executing convolution in coloration frequency domain.Annular chroma histogram helps to make
With periodicity or cyclic convolution, such as Fourier transformation, this can reduce calculated load.It can be for example using true based on determining
Illumination coloration and the loss function of estimation illumination coloration learn convolution colour filter.In such a case, it is possible to by period n ×
The heavy new parameter of learning right of n " image " turns to Fourier transformation vector, quickly to learn.
As previously mentioned, annular shade mapping is considered problem being aliased into lesser size.Therefore, selection 2D figure
In entry (actually selection tone) can impliedly be related to anti-aliasing.This anti-aliasing can be clearly directed to more than one
Disambiguation between the possible estimation illumination coloration of kind.This can be realized in many ways.For example, can choose estimation illumination
Coloration is to provide the average image color (" grey-world anti-aliasing ") as neutral as possible；It or in careful initial selected is straight
In the case where square figure span, it can be assumed that center of the estimation illumination coloration as close possible to histogram.Other methods are also possible
's.
In some implementations, annular chroma histogram includes the histogram of the logarithm coloration of input picture.This is that have
Benefit, because within this space, the coloring of image is only to convert histogram.However, this is not important, because if without this
Kind approach, this method is still feasible, although may have more limited range.
Therefore, in some implementations, this method may include anti-aliasing being carried out to selected entry, and be based on going
The selected entry of aliasing colours to form output image input picture.This can pass through the average color of determining input picture
Angle value simultaneously selects specific estimated brightness to execute from multiple estimations associated with selected entry, thus based on specific
Estimated brightness to input picture colour to form output image so that the output picture showing is more a greater degree of than input picture
Muted color.Additionally or alternatively, anti-aliasing may include that spy is selected from multiple estimations associated with selected entry
Fixed estimated brightness, so that specific estimated brightness is estimated than any other in multiple estimations associated with selected entry
Meter is all closer to the center of annular chroma histogram.
In some implementations, this method, which may further include, determines penalty values based on selected entry and is based on
Penalty values update colour filter.For example, penalty values can determine that the loss function depends on X-Y scheme, such as takes from loss function
The global shape of pattern certainly in figure and/or distribution.Training image training colour filter can be used；Penalty values can be used for basis
The back-propagation method or colour filter is updated according to another machine learning algorithm that such as gradient rises or falls.
In some implementations, selection indicates the particular value in the threshold value of the maximum value in thermal map in a two dimensional
Entry may include: to be distributed every color probability distribution Function Mapping associated with particular value to bivariate von Mises,
It is middle to be distributed using mean value and covariance matrix bivariate von Mises.
Colour filter can be determined by the machine learning on multiple training images, in particular with associated determination
True white point.This may include minimizing loss function to determine colour filter.Loss function can be based on or including by average
The negative log-likelihood for the Gaussian Profile that value and covariance matrix define.
It in some implementations, may include being applied to colour filter to input picture coloring based on selected entry
Image.Colour filter can be parameterized by selected entry.Export image can than input picture more white balance.
Can digital picture for example be obtained by capturing the calculating equipment of digital picture.This method then may include by
Input picture is configured smaller than n × n image of digital picture.For example, each pixel of input picture can be and digital picture
In the associated value of pixel set summation, separated by the multiple of n on dimension in office.
In some instances, a kind of method may include obtaining input picture by calculating equipment.Input picture may include
Multiple pixels with corresponding color.Second example embodiment can also include that the color of the pixel based on input picture generates
Annular chroma histogram.Each element of annular chroma histogram can be corresponding with multiple pixels of input picture, multiple
Pixel has chromatic value at the corresponding position set in chrominance space, so that for the element-specific of annular chroma histogram
Location sets in chrominance space are regularly spaced apart in chrominance space.Second example embodiment can also relate to annular color
Histogram and colour filter convolution are spent to generate two-dimentional thermal map.Second example embodiment can also relate to determine the illumination of input picture
Coloration, wherein based on two-dimentional thermal map.Second example embodiment can also include, based on identified illumination coloration, scheming to input
The output image of color correction is generated as coloring.
The annular chroma histogram of second example embodiment can be annular logarithm chroma histogram.The ring of second embodiment
The central element of shape chroma histogram can be located in the central area of annular chroma histogram, so that in chrominance space and annular
A specific position in the corresponding location sets of the central element of chroma histogram is corresponding with expected illumination coloration.?
In some examples of second embodiment, determine that the illumination coloration of input picture may include: that (i) selects annular chroma histogram
One element；(ii) it is selected from location sets corresponding with the selected element of annular chroma histogram in chrominance space
Position in chrominance space；And (iii) determines the illumination coloration of input picture based on the selected position in chrominance space.
Second embodiment can also relate to determine the average chrominance of input picture.In such an example, out of chrominance space with annular
It may include: from coloration that the position in chrominance space is selected in the corresponding location sets of selected element of chroma histogram
Position most like with the average chrominance of input picture in chrominance space is selected in location sets in space.In some examples
In, determine that the illumination coloration of input picture can include determining that the round average value of two-dimentional thermal map based on two-dimentional thermal map.Based on two
Dimension thermal map determines that the illumination coloration of input picture can also include determining two-dimentional thermal map about the round average value determined in this way
Covariance.The round average value and covariance of the two-dimentional thermal map determined in this way can be distributed flat with bivariate von Mises
Mean value and covariance are corresponding.
In some examples of second embodiment, input picture is the first input picture, and this method further include: (i)
The second input picture is obtained, which includes more than second a pixels with the second corresponding color；(ii) based on the
The color of the pixel of two input pictures generates the second annular chroma histogram, wherein each member of the second annular chroma histogram
Element is corresponding with multiple pixels of the second input picture, and multiple pixel has at the second corresponding position set in chrominance space
There is chromatic value, and the wherein second position collection in the chrominance space of the second element-specific of chroma histogram annular for second
Conjunction is regularly spaced apart in chrominance space；(iii) by the second annular chroma histogram and colour filter convolution to generate the two or two
Tie up thermal map；And (iv) determines the second input figure based on the second two-dimentional thermal map and the illumination coloration determined for the first input picture
Second illumination coloration of picture.
Second embodiment can be additionally related to (i) and determine enhancing image based on input picture, wherein enhancing image includes tool
There are other multiple pixels of other corresponding color；(ii) it is straight to generate the annular coloration of enhancing for the color of the pixel based on enhancing image
Fang Tu, wherein each element for enhancing annular chroma histogram is corresponding with enhancing multiple pixels of image, multiple pixel exists
There is chromatic value, and wherein for enhancing annular chroma histogram in addition at other corresponding position set in chrominance space
Other location sets of the element-specific in chrominance space are regularly spaced apart in chrominance space；(iii) annular color will be enhanced
Degree histogram and other colour filter convolution are to generate the two-dimentional thermal map of enhancing；And (iv) wherein determines the illumination color of input picture
Degree includes determining illumination coloration based on the two-dimentional thermal map of enhancing.
Method described herein can be stored in the processing of the program instruction in the memory of image capture device by execution
Device executes, which, which can be embodied in, calculates in equipment.
In some instances, a kind of method may include: (i) by the multiple input pictures of calculating equipment acquisition, wherein described
Each input picture in multiple input pictures includes multiple pixels with corresponding color；(ii) multiple photographs are obtained by server
Light colour degree, it is plurality of illumination coloration in each illumination coloration and the corresponding input picture in multiple input pictures it is corresponding；
(iii) color of the pixel based on the first input picture in multiple input pictures generates annular chroma histogram, wherein annular
Each element of chroma histogram and multiple pixels of the first input picture are corresponding, phase of multiple pixel in chrominance space
Answering has chromatic value at location sets, and wherein for the position in the chrominance space of the element-specific of annular chroma histogram
It is integrated into chrominance space and is regularly spaced apart；(iv) by annular chroma histogram and colour filter convolution, to generate two-dimentional thermal map；
(v) the estimation illumination coloration for determining the first input picture, wherein determining the illumination coloration based on two-dimentional thermal map；(vi) estimation is determined
Illuminate the difference in coloration and multiple illumination colorations between the first illumination coloration corresponding with the first input picture；(vii) it is based on
Identified estimation illumination coloration and first illuminates the difference between coloration to update colour filter, to generate the colour filter updated；With
And (viii) sends the instruction of the colour filter updated from server to remote system.
Described in detail below, these and other aspect, advantage and alternative solution pair are read by suitably referring to attached drawing
It will become obvious in those of ordinary skill in the art.Moreover, it should be understood that in its of the Summary and this document
The description that his place provides is intended to illustrate theme claimed by way of example, and not limitation.
Detailed description of the invention
Fig. 1 depicts three tones of image according to example embodiment and the associated coloration histogram of each tone
Figure.
Fig. 2 depicts chroma histogram according to example embodiment.
Fig. 3 depicts the statistical fit to example thermal map according to example embodiment.
Fig. 4 depicts the colour filter determined using training image collection according to example embodiment.
Fig. 5 depicts the front view, right view and rearview of digital camera devices according to example embodiment.
Fig. 6 depicts the block diagram of the calculating equipment with image capture capabilities according to example embodiment.
Fig. 7 is flow chart according to example embodiment.
Fig. 8 is flow chart according to example embodiment.
Fig. 9 is flow chart according to example embodiment.
Specific embodiment
This document describes exemplary method, equipment and systems.It should be appreciated that word " example " and " exemplary " is used herein
In expression " being used as example, example or explanation ".Here depicted as " example " or " exemplary " any embodiment or feature not
Centainly it is interpreted than other embodiments or feature more preferably or more advantage.The range of theme proposed in this paper is not being departed from
In the case of, it can use other embodiments, and other changes can be carried out.
Therefore, example embodiment described herein is not intended to limit.As general description herein and show in the accompanying drawings
All aspects of this disclosure out can be arranged, be replaced, combined, separated and designed with a variety of different configurations, it is all these all
Consider herein.
In addition, unless context indicates otherwise, otherwise each feature shown in the accompanying drawings can be in combination with one another.Cause
This, in terms of attached drawing should usually be considered as the composition of one or more whole implementation examples, it should be understood that and the not all feature pair shown
In each embodiment be required.
I. example color model
In a general sense, this section describes the modes that color can be indicated in computer screen or image file.
It may be useful in the context of information image processing techniques described in following part.
Multiple color model can be used to be digitally represented captured image.For example, R-G-B (RGB) color model
It can be used for showing image on electronic output device (such as computer screen).RGB is a kind of additive color model, wherein red, green
Color and blue light are added together to generate chromatography in various ways.For example, cyan can be formed by combining green and blue, it is yellow
Color can be formed by the way that combination is red with green, and magenta can be formed by the way that combination is red with blue, and white can lead to
Cross combination red, green and blue are formed.
The specific pixel of RGB image can be expressed as three plane tuples (R, G, B), each of which plane can be changed to from 0
Predefined maximum value (for example, 255).If all planes are 0, result can be black.If all planes are all located
In maximum value, then result can be most bright denotable white.(it is logical that planes of color described herein is referred to as color
Road.)
Another color model is YCbCr.In some implementations, this color model can be used as the substitution tables of image
Show.Specifically, Y plane can indicate the brightness of pixel, and Cb and Cr plane can respectively indicate blue yellow chromaticity and red green
Degree.For example, blue yellow chromaticity can be indicated by the blue pixel value in RGB image divided by the green pixel values in RGB image, and
And red green degree can be indicated by the red pixel value in RGB image divided by the green pixel values in RGB image.Therefore,
YCbCr color model and RGB color model have clearly defined relationship, and can be relatively easily converted into RGB and from
RGB conversion.
II. example white balance
White balance is that digital camera devices or associated software can be to a kind of adjustment that capture image carries out, to attempt
Ensure the practical white that the white in image suitably reflects in the real-world scene of shooting image.It is appreciated that white balance, it is first
The concept for first understanding colour temperature is helpful.
Colour temperature measures the quality of light based on the ratio of blue light amount and feux rouges amount in image or scene.Colour temperature is with Kelvin
(K) degree is that unit indicates.Image or scene ratio with higher color temperature (that is, biggish Kelvin's value) have compared with low color temperature (that is,
Lesser Kelvin's value) image or scene there are more blues.Therefore, the light of " colder " colour temperature with higher, and compared with
Warm light has lower colour temperature.
Human eye and brain are adapted to different colour temperatures.For example, either under sunburst or with incandescent bulb
It is watched in bright room, white object is considered as white by the mankind.Digital camera devices usually have the color for measuring scene
The built-in sensors of temperature, and can be used algorithm to handle the capture image of scene, so that final result will be as close to the mankind
What perception scene.This white made in image is referred to as white balance or colour correction with adjustment as the white phase in scene.
Such processing may include estimating the coloration of the illumination for illuminating scene (so that the original capture for allowing image is white balance
) and illuminate coloration using estimation to adjust the color (for example, by image colorant) of image.Current white balance algorithm
The inaccurate estimation of control light colour degree may be generated.As a result, the white point of the image of white balance may be in this way
The white point of scene representated by image is dissimilar.(white point of image indicates the chromatic value that " white " is defined in image.)
It is white flat that the embodiments herein provides the high quality that can be operated together with the extensive imaging sensor hardware of type
Weighing apparatus technology.These technologies are designated as needing computing resource more less than previous algorithm (for example, memory, processor period),
Allow using technique described herein come in software in real time or near real-time the image that obtains carry out white balance (for example,
There is provided indicates the white balance video flowing of the view from imaging sensor at any time).This can be eliminated to various imaging sensors
Or equipment provides the needs of the white balance algorithm of hardware specific.
In order to realize that input picture is converted to the histogram in two-dimensional chromaticity space by the target, the embodiments herein.Directly
Multiple pixels in each element representation input picture of square figure, corresponding position of multiple pixel in two-dimensional chromaticity space
With color (or chromatic value).Therefore, input picture is converted into the shape in chrominance space.Specified chrominance space, so that right
The conversion of object (for example, the histogram with input picture is corresponding) in chrominance space and the coloring to the image and/or should
The white point of image or the variation of white balance are corresponding.For example, the element of chroma histogram can be according to logarithmic scale in two-dimentional color
It spends in space and is spaced apart (that is, chroma histogram can be logarithm chroma histogram).It therefore, can be using for the object in image
Physical examination is surveyed and/or the technology of positioning determines the white point (and/or illuminating coloration accordingly) of input picture.It may then based on institute
Determining white point carries out coloring to input picture or otherwise handles, to generate the output image of white balance.
Because, need not embodiment described herein the problem of white balance is converted to object detection and positioning
In order to which these algorithms are applied to be shot with different images acquisition equipment (for example, different imaging sensors, different cameras)
Image and calibrate these algorithms.It means that for example, if camera generates the image for being colored as cyan always and another
One camera generates the image for being colored as purple always, then identical white balance output figure can be generated in the white balance algorithm of this paper
As (assuming that there is similar radiancy attribute-black level to be corrected for two images, image is linear, etc.).This meaning
If taste the white balance algorithm of this paper be trained in the hardware captured image by a manufacturer (for example, by one
Or multiple machine learning or other technologies as described herein), then it should stand good catches in by the hardware of another manufacturer
The image obtained.
This characteristic of algorithm described herein also simplifies training.In general, implementing white balance for new camera sensor
Algorithm relates to the use of the biggish image data set of the sensor collection, and the light source colour of each image of manual annotations, this is
Slow and expensive proposition.But method described herein is utilized, white balance can be trained to calculate based on publicly available image
Method, so that white balance algorithm reproduces the white balance of those images.
The white balance algorithm of this paper not only can be generated high quality as a result, but also at present with the existing skill in academic documents
Art is compared reduces 10%-12% in terms of error, and calculating speed improves 250-3000 times.In addition, the method improve current
The prior art, because current state of the art is not designed to be promoted between different imaging sensors.In addition, herein
Algorithm allow to determine complete Posterior distrbutionp on possible Illuminant chromaticity space.When by the algorithm be applied to video flowing it is white
When balancing image, this posterior information can be used for realizing time smoothing.
For formally construction problem, perfect photometric linearity image is considered, wherein having occurred that black-level correction simultaneously
And without pixel value saturation (for example, the color intensity in each Color Channel of pixel is lower than certain threshold values, such as
255).For convenience, log space expression can be used below.
As described above, rgb pixel [Ir, Ig, Ib] it can be " true " or white balance color [Wr, Wg, Wb] with the light of scene
Source [Lr, Lg, Lb] product.Therefore:
Ir=WrLr (1)
Ig=WgLg (2)
Ib=WbLb (3)
Nevertheless, equation (1), (2) and (3) is the over-simplification of problem, because they have ignored shade, reflection spy
Property, spatial variations illumination etc..Anyway, I is given, target is the white balance image pixel W for estimating L and thus generating estimation
=I/L.For this purpose, the chrominance representation of I and W can be defined:
Iu=log(Ig/Ir) (4)
Iv=log (Ig/Ib) (5)
Wu=log (Wg/Wr) (6)
Wv=log(Wg/Wb) (7)
It can be based on this mapping (for example, based on the I determined according to equation (4) and (5) for the pixel of input pictureu
And Iv) it is that input picture generates chroma histogram.Width/position case (bin) of this histogram be can specify in order in color
Spend the specific application and/or mapping in space.It is, for example, possible to use the equally spaced casees in this space to generate coloration histogram
Figure.This chroma histogram in logarithm chrominance space with rule space case is properly termed as logarithm chroma histogram.
Due to the absolute zoom for not needing clearly to consider W in the embodiments herein, the problem of estimating light source L into
One step is reduced to the coloration of estimation L, can be only meant as two numbers:
Lu=log (Lg/Lr) (8)
Lv=log (Lg/Lb) (9)
According to the property of logarithm, the formula of equation (1), (2) and (3) can be rewritten in logarithm chrominance space are as follows:
Wu=Iu-Lu (10)
Wv=Iv-Lv (11)
Thus, the white balance for correcting image, which is reduced to, determines two amounts: LuAnd Lv.Since absolute scale is fuzzy, from
Rgb space is to (Lu, Lv) the inverse mapping in the space UV be uncertain.Accordingly, it is determined that LuAnd Lv, it can be assumed that L is to allow to restore
(Lr, Lg, Lb) unit norm:
This logarithm coloration formula ratio RGB formula be easier to using.Have 2 unknown numbers rather than 3, and presence and W
Linear restriction relevant with I rather than multiplication constrain.
In order to determine these values (L of the input picture I with true illumination Lu,Lv) and final (Lr,Lg,Lb), it can be with structure
Make two-dimensional chromaticity histogram N.In the histogram, N (u, v) indicate I in coloration close to (u, v) pixel quantity.It is formal:
Wherein square brackets indicate indicator function, and ε is the case width of histogram.There are rule in logarithm chrominance space
The case being then spaced, according to equation (16) determine chroma histogram be properly termed as logarithm chroma histogram.
After constructing histogram N, it can be normalized to constant-quality.Furthermore, it is possible to using in each case
Counting square root, this can improve the validity of histogram feature.As long as nevertheless, identical to entire Use of Histogram
Transformation, it is any it is specific normalization be all possible.
Fig. 1 includes the correspondence coloration histogram of each image in three colored versions and bottom row of identical image in top row
Figure (determines) according to above equation (16).Fig. 1, which is depicted using different luminance levels, shows different pixel color/colorations
Black white image.In the color version of image in Fig. 1, the image in left column is colored as green-yellow, the figure in middle column
As being colored as reddish yellow by the image in white balance and right column.
Being moved to right end from the left end of the x-axis of each chroma histogram indicates the blue yellow hue of associated image from master
It leads blue and changes into leading yellow.Similarly, being moved to bottom end from the top of the y-axis of each chroma histogram indicates to be associated
The red green tune of image change into leading green from leading red.Generally speaking, each chroma histogram is indicated to have and be fallen into
The relative populations of the pixel of the coloration of each position on the x-y chromatic diagram.Therefore, the point cluster instruction in left column chroma histogram
Green and yellow tone, the point cluster in middle column chroma histogram indicate neutral (white balance) tone and right column coloration histogram
Point cluster instruction red and yellow tone in figure.
The center of each cluster indicates the white point of associated image, and the origin of chroma histogram has been seen to the mankind
Come " white ".It is straight that the center of point cluster in chroma histogram by making the image after coloring to image colorant is located at coloration
Near the origin of square figure, neutralc tint may be implemented.
The chroma histogram of each image is that the version of the conversion of other chroma histograms (is ignored and introduced by histogram operation
Sampling), and the shape of histogram does not change.Therefore, only by the conversion in histogram space come possible to image colorant
It will affect the chroma histogram of image.This is to be equal to offset logarithm by the result-adjustment RGB channel for defining u and v as former state herein
Chrominance channel.Brightness does not influence this conversion.
Identity property between image colorant and histogram map migration is conducive to white balance as described herein.Specifically, Bai Ping
The method of accounting can be operated by following steps: consider some or all of possible tones of image, to each rendered image into
Row scoring, the estimation for then providing top score tone (or more precisely, its is inverse) as input picture illuminate coloration.Example
Such as, it is expected that tone associated with middle column chroma histogram has highest score, so that white balance algorithm is by input picture
Color is neutrality.
Briefly, expensive proposition may be looked like by carrying out the scoring, because it is needed to all possible tone
Strong search is carried out, wherein applying some score functions at each tone.However, if score function is the line of histogram case
Property combination, then this strong search is actually the convolution of N and some colour filter F, and there is many ways in which and can make convolution
Operation is effective.
Therefore, in high level, white balance algorithm can execute following steps: (i) constructs chroma histogram from input picture I
The histogram and some colour filter F convolution, and (iii) are used the illumination of high scoring (for example, highest scoring) by N, (ii)
To generateMore elegant:
Wherein * is convolution operator.
However, executing such convolution sum to full-scale chroma histogram (for example, chroma histogram as depicted in fig. 1)
Maximum search may computationally exist unacceptably expensive.For example, using memory available on digital camera, processor
Execute what such operation may to generate digital camera with special speed (for example, 30 hertz) with processor speed
Image can not execute this white balance processing (for example, the viewfinder display for digital camera generates white balance figure in real time
Picture).
In order to reduce execute algorithm as described herein needed for calculating cost and/or time, can determine lesser coloration
Histogram.This chroma histogram can indicate " package " version of larger chroma histogram, so that the chroma histogram of package
Each element representation input picture in, near the position of any one of multiple aturegularaintervals positions in chrominance space
Sum of all pixels with coloration.Indicate the coloration histogram that this size of " package " version of biggish flat chrominance space reduces
Figure is properly termed as annular chroma histogram.Because relative to the color of the pixel of the element representation by annular chroma histogram
It spends, opposite edges of the degree of approach in annular chroma histogram around annular chroma histogram.For example, along this annular
The left edge of histogram some upright position the first element, with close to along histogram left edge it is adjacent with the first element
Third element it is the same, close to along chroma histogram right hand edge some upright position second element.
This shows by way of example in Fig. 2.Fig. 2 shows the example chroma histograms 210 in flat chrominance space
(for example, flat logarithm chrominance space, is similar to those shown in Fig. 1).The value of the element of flat chroma histogram 210 is logical
It crosses shade to show, darker shade is corresponding with higher histogram counts.For generating the identical of flat chroma histogram 210
Image can be used for determining annular chroma histogram.Example ring corresponding to input picture identical with flat chroma histogram 210
Shape chroma histogram 250 is also shown in FIG. 2.The value of the element of annular chroma histogram 250 is shown by shade, darker yin
Shadow is corresponding with higher histogram counts.
Since annular chroma histogram 250 indicates the package version of flat chroma histogram 210, annular coloration histogram
Multiple Non-overlapping Domains of the area maps of Figure 25 0 to flat chroma histogram 210.These regions are in Fig. 2 by dotted line level
It is shown with vertical line.Therefore, the phase of each position of annular chroma histogram 250 and/or element and flat chroma histogram 210
Answer position and/or element set corresponding.For example, the first element 260 of annular chroma histogram 250 and flat chroma histogram
210 the first aturegularaintervals element set 220a-i is corresponding.In another example, second yuan of annular chroma histogram 250
Element 265 is corresponding with the Second Rule space elements set 225a-i of flat chroma histogram 210.In another example, by ring
The specific position 270 in annular chrominance space that shape chroma histogram 250 indicates indicates flat with by flat chroma histogram 210
The location sets 230a-i of aturegularaintervals in smooth chrominance space is corresponding.
Therefore, each element (for example, 260) of annular chroma histogram 250 is corresponding with multiple pixels of input picture,
Multiple pixel has chromatic value at the corresponding position set (for example, 220a-i) in chrominance space.In addition, for annular color
The location sets spent in the chrominance space of the element-specific of histogram are regularly spaced apart in chrominance space.Therefore, in Fig. 2 institute
In the annular histogram shown, NTColoration set { u of its coloration close to aturegularaintervals in (u, v) instruction input picture In,m,vn,m}
Any one of coloration pixel number.It is formal:
Wherein i, j are 0 index, and n is the case number (for example, n=64) in annular chroma histogram, and h is case size (for example, h
, and (u=1/32)lo,vlo) it is histogram source of graph (being shown in Fig. 2 as example initial position 241).According to equation
(18) chroma histogram of case determining, in logarithm chrominance space with aturegularaintervals can be referred to as logarithm coloration histogram
Figure.Such as by being scaled annular histogram with unit mass, by application softmax function, or by applying one
Other a little pretreatments, can normalize determining annular histogram N before any subsequent operationT。
It then can be by determining annular chroma histogram NTWith colour filter F convolution to generate two-dimentional thermal map, the Two-Dimensional Heat
Figure is that the illumination likelihood of coloration present in input picture is related to special color angle value.Due to annular 250 table of chroma histogram
Show the histogram of package, it is possible to this convolution is executed using Fast Fourier Transform (FFT) technology, for example, to reduce convolution
It calculates cost and/or improves the speed of convolution.It may then based on two-dimentional thermal map generated and determine illumination coloration, such as pass through
Determine the position of the maximum value in two dimension thermal map.Then coloration can be illuminated using estimation according to various, for example, to generate
The white balance version of input picture can be used for updating or otherwise train colour filter F or some other application to generate
Error signal (for example, based on input picture estimation illumination coloration and it is known illumination coloration between difference).
However, due in each position of annular chroma histogram 250 and/or element and flat chroma histogram 210
Different location set is corresponding, and therefore corresponding from different potential illumination coloration set, it is therefore necessary to execute anti-aliasing
Step.This illustrates by way of example:
μ←f(NT*F) (19)
Wherein f is the function that chromaticity position is determined based on two-dimentional thermal map, and μ is based on two-dimentional thermal map NT* the annular color of F estimation
The chromaticity position in histogram is spent, de_alias is to determine the function of illumination coloration (for example, passing through based on input chromaticity position μ
The selection output illumination coloration from coloration set associated with μ), andIt is the value of the determination of output illumination coloration.
Position in identified annular chrominance space can carry out anti-aliasing to the corresponding positions in flat chrominance space in various ways
Set (for example, to illumination coloration of prediction).Before determining chromaticity position, function f may include normalized function, softmax
Function or some other preconditioned functions or algorithm.
In some instances, the illumination coloration for determining input picture may include: the ring that (i) selection is determined from input picture
The element-specific of shape chroma histogram 250；(ii) out of chrominance space with the selected element phase of annular chroma histogram 250
The position in chrominance space is selected in corresponding location sets；And (iii) is true based on the selected position in chrominance space
Determine the illumination coloration of input picture.This is shown in Fig. 2 by the example element 270 of annular chroma histogram 250.Example element
270 is corresponding with the location sets 230a-i in the chrominance space of flat chroma histogram 210.It can select by various methods
A specific position in location sets 230a-i.
Can the degree of approach (for example, average log chromatic value of input picture) based on the average chrominance with input picture from
The specific position is selected in the set.For example, can selected element out of chrominance space with annular chroma histogram 250
Specific position is selected in 270 corresponding location sets 230a-i, which is flat with input picture in chrominance space
The equal most like position of coloration.It is neutral vacation that this determination, which can be the average color based on scene represented by input picture,
(if so-called " grey-world " anti-aliasing technology).Additionally or alternatively, it can be selected based on some other considerations or information
It selects the specific position in location sets 230a-i, such as is connect based on the illumination coloration of the determination with additional input image
Recency, wherein the additional input image is temporally close to just determine the input picture of illumination coloration (for example, based on field for it
The illumination coloration of scape is less likely the hypothesis of sudden change in a short time).
In some instances, it is possible to specify pair between the element of annular chroma histogram 250 and the position of chrominance space
It should be related to, so that center (so-called " gray scale light " anti-aliasing corresponding with expected illumination coloration of annular chroma histogram 250
Technology).In such an example, the central element of annular chroma histogram (for example, 275) is located at annular chroma histogram 250
Central area in.The corresponding relationship between position in the element and flat chrominance space of annular chroma histogram 250 refers to
Fixed (is arranged u for example, passing throughloAnd vloValue), so that color corresponding with the central element 275 of annular chroma histogram 250
The specific position (for example, 245) spent in the location sets in space is corresponding with expected illumination coloration 245 (for example, white
The chromaticity position (u, v) of light).
It can determine that estimation illumination coloration (itself can be as based on two-dimentional thermal map as described above using various methods
Upper described ground anti-aliasing).For example, the element in thermal map with maximum value can be selected from two-dimentional thermal map, or have
The element of value in the threshold value of such maximum value.It additionally or alternatively, can be by probability distribution or some other round systems
Metering is fitted to two-dimentional thermal map, and one or more parameters of this fitting distribution or statistic can be used (for example, average
Coloration) come estimate illuminate coloration.Can relative to the package of the chrominance space indicated by annular chromatic diagram 250 circular nature Lai
Specify this probability distribution or statistic.
For example, can determine round average value based on such two-dimentional thermal map, and for determining that estimation illuminates coloration (example
Such as, by the way that round average value is applied to anti-aliasing method and/or some other method function).Round average value is for true
The statistic for determining " average value " of variable (for example, variable with circular distribution), in round or other annulus (examples
Such as, annular space) on define.This circle average value takes into account the fact that: round due to the ring topology of circular space
The opposite value of " edge " nearby of the value of one " edge " in space nearby close to circular space.Therefore, positioned at circular space
The round average value of the set of the value of one or the other adjacent edges is the value of an adjacent edges of circular space, and the value
Set arithmetic mean of instantaneous value may be position that not can accurately reflect the quality of value set, in circular space some centres
Value.
Additionally it is possible to determine the covariance of the two-dimentional thermal map about this round average value and for providing some benefits.
For example, this covariance is determined for the round average value of the determination of preceding input images and adding for determining illumination coloration
Power combination (for example, in order to time smoothing sequence of the estimation illumination coloration of video flowing).In particular example, identified circle
Shape average value and covariance can be corresponding with the bivariate von Mises mean value being distributed and covariance.
This is illustrated by way of example:
P←f(NT*F) (21)
(μ, ∑) ← fit_bvm (P) (22)
Wherein f is based on annular chroma histogram NTThe preconditioned functions of two-dimentional thermal map P, μ are determined with the convolution of colour filter F
It is the round mean value of P, Σ is the covariance of P, and fit_bvm is the letter by bivariate von Mises fitting of distribution to two-dimentional thermal map P
Number, de_alias are to determine the function of illumination coloration (for example, by from coloration set associated with μ based on round average value mu
Middle selection output illumination coloration), andIt is the value of the determination of output illumination coloration.Before determining chromaticity position, letter
Number f may include normalized function, softmax function or some other preconditioned functions or algorithm.For example, f can be it is following
The softmax function of form:
It is distributed using von Mises to determine that estimation illumination coloration can provide respectively based on two-dimentional thermal map as described herein
Kind benefit.The ring indicated by annular chroma histogram 250 is suitable for for the bivariate von Mises distribution that annular space defines
Shape chrominance space.This is shown in FIG. 3, and it includes three example two dimensional thermal maps.For each thermal map,Average value
" x " and dotted ellipse is used to indicate respectively with covariance.Average value and covariance are two by simply determining thermal map
Therefore dimension average value and covariance simultaneously wrap up thermal map without considering that the space below being indicated by thermal map is ring-shaped come what is determined
Edge the fact that.On the contrary, being distributed according to von Mises, for each thermal map, the round average value determined is (by "+" symbol
Indicate) and covariance (being indicated by solid oval) consider the annular of two-dimentional thermal map, the property of package.As a result, with first
The beginning average value of determination is compared with covariance, and round average value and covariance more accurately reflect the structure in thermal map, especially
It is when the "center" of thermal map is close to the edge of thermal map (for example, being shown in the centre of Fig. 3 and right side example thermal map).
Determine bivariate von Mises distribution (or other round probability point appropriate of two-dimentional thermal map as described herein
Cloth) it can also provide and estimate that the illumination time smoothing of sequence of coloration is related (for example, the sequence of the input picture for video flowing
Column) and/or to the training related (for example, by providing complete Posterior distrbutionp on thermal map) of colour filter or other algorithm parameters
Benefit.In some instances, it is that the first input picture determines the first illumination coloration that method described herein, which can be used,.So
Afterwards, the second illumination coloration can be determined to the second input picture based on the first illumination coloration, and methods herein can be used
Two-dimentional thermal map is determined based on the second input picture.(or other are round, two dimension is general by the von Mises determined for the second image thermal map
Rate distribution) combination of the first illumination coloration and the second image thermal map can be notified to generate the second illumination coloration.For example, can root
It is combined according to the first image illumination coloration and to the directional weight of the second image thermal map round average value determined or other statistics
To determine the second image illumination coloration.
Colour filter F can be trained or otherwise determined based on example image set and its known illumination coloration.
Regardless of the method that determines, colour filter F reflects the distribution of color in white balance scene.Further, since the annular color combined with F
The shift invariant of degree histogram is assessed as convolution, so F is unrelated with the tone of training image.Therefore, the colour filter F of study
It is not limited to specific imaging sensor or image capture device, and can be applied to use various imaging sensors or image
Capture device captured image determines illumination coloration, without any special calibration or registration process.
Training to colour filter F may include using method described herein come to multiple training images in training set
Determine corresponding estimation illumination coloration.It then can be by each known illumination of the image in estimation illumination coloration and training set
Coloration is compared, and these differences can be used for for example updating colour filter according to gradient descent method or other machines learning algorithm
Device.The loss determined in this way can be by the element backpropagation of method described herein, in order to train colour filter in this way
(that is, each function described herein, algorithm or other steps can be analysis upper differentiable).
In some instances, loss function can be used, this difference is converted to the penalty values that can be used for updating colour filter
(for example, passing through backpropagation).The pattern in two-dimentional thermal map (for example, von Mises is distributed) can be considered in this loss function
Global shape or distribution.For example, according to following equation, certain color filter and input training image loss may with relative to
The negative log-likelihood for inputting the Gauss of the true illumination coloration of training image is related:
WhereinWithIt is the coloration of the real light sources of trained input picture, and μ and Σ are for input training figure respectively
As the round average value and covariance of determining two-dimentional thermal map are (for example, be distributed phase with the bivariate von Mises for being fitted to thermal map
It is corresponding).This loss function can be enhanced by addition Item, for example, to reduce the norm of the coefficient of colour filter F.
Then it can be used according to the colour filter of this method training to additional image (such as being captured by cellular phone
Image) estimation illumination coloration.In some instances, this may include server or other systems to can capture additional image
Another system (for example, mobile phone, digital camera) send training colour filter instruction (for example, send include training colour filter
The application data of device).This transmission may include wirelessly or non-wirelessly transmission to running equipment (for example, via honeycomb number
According to network).Additionally or alternatively, this transmission may include during the manufacture of this equipment (for example, in this equipment
During programming, and/or during the programming of memory or equipment other assemblies) trained colour filter is supplied to equipment.
III. the example extension of white balance method
The above method can extend in various ways, to improve the accuracy or other properties of thus estimation illumination coloration,
Or provide some other benefits.For example, for determining and/or pre-processing based on the convolution of colour filter and annular chroma histogram
The function of two-dimentional thermal map can be enhanced by biasing figure and/or gain diagram.Such enhancing can be provided to allow algorithm not
Different estimations is weighted with ground (for example, based on expectation to lamp) and illuminates coloration, relative to specific hue space anchor
Cover half type (for example, to compensate the chroma offset invariance of annular chroma histogram), or some other benefits are provided.Additionally
Or alternatively, enhancing image (for example, to emphasize the edge or other features in input picture) can be determined based on input picture,
And the illumination coloration of input picture can be estimated using those enhancing images in conjunction with input picture.In some embodiments,
By using the information (for example, estimation illumination coloration) from time upper first image (for example, prior frame of video flowing), when
Between smoothly can be used for improving image illumination coloration estimation (for example, image of video flowing).
It, can be from single image I construction and the single annular histogram N that classifies instead of algorithm as explanationT, come from " enhancing "
Image collection { IC(it may include original input picture) histogram set of graphs { NCCan be combined and/or colour filter (for example,
By applying corresponding colour filter FC) to generate two-dimentional thermal map (its illumination coloration for being then determined for input picture).
These enhancing images can reflect the edge and spatial statistics of input picture I, so that model can be combined in addition to independent picture
Multiple chrominance information sources except plain color degree.
Can by simply applying common image processing operations to I, such as using colour filter group, intermediate value colour filter,
Morphology operations etc., to construct these enhancings image { IC}.But the image for constructing chroma histogram should reflect scaling colours
The channel of input picture is mapped to deviate in chroma histogram space.This means that enhancing image should retain this attribute, and will
Every channel scales the same offset being mapped in histogram space.Accordingly, it is possible to which there are limited possible enhancing image collections
For using.
It can be proved that it is defeated that mapping should retain scalar multiplication-for the scaling colours to be met/histogram shifting property
Entering colour filter (scaled-then-filtered) version after the scaling in the channel in image I should be equal to the colour filter retraction in the channel
Put (filtered-then-scaled) version.In addition, the output of mapping should be non-negative, because can be using these values
Logarithm.In addition, selection calculates upper cheap enhancing to be advantageously performed, because method described herein can be with limited
It is executed in the equipment (for example, digital camera) of computing resource.
For each pixel in input picture, exemplary enhancing is the local degree of the absolute deviation in determining input picture
Amount.This is illustrated by following formula:
Wherein x and y is the pixel index in input picture I, and enhancing image E and c is Color Channel index.It then can be with
Additional annular chroma histogram is determined based on enhancing image, and enhances two-dimentional thermal map with colour filter convolution to generate.Then,
The enhancing two dimension thermal map can be used in combination with the two-dimentional thermal map determined from the annular chroma histogram of input picture, defeated with determination
Enter the illumination coloration of image.It can learn and enhance image rings shape chroma histogram convolution via described method is similar to
Colour filter.
The above method includes determining illumination coloration based on annular chroma histogram.As described above, this annular histogram pair
In the offset in the annular space of annular chroma histogram be constant.It therefore, can for the colour filter of this histogram study
The ability for indicating the information about expected light source can be lacked directly.In order to provide the energy for indicating this inference to methods herein
Power, can use gain and/or biasing figure, (it can be if elsewhere herein is for described by annular chroma histogram colour filter
As be trained) Lai Zengqiang this method.This gain and/or biasing figure can before normalization be applied to colour filter with
The convolution of annular chroma histogram, von Mises fitting of distribution or for determining illumination color from such annular chroma histogram
Other processing of degree.
This is illustrated by way of example:
Wherein NCIt is annular chroma histogram (for example, respectively according to the enhanced edition of the pixel of input picture and input picture
Two histograms of this determination), FCIt is the colour filter applied to annular chroma histogram, B is biasing figure, and G is to be applied to colour filter
The gain diagram of the sum of the convolution of device and annular histogram, and f be applied to generate output mapping P function (for example,
Softmax function).Then output figure P can be used for determining the illumination coloration of input picture (for example, by by bivariate von
Mises fitting of distribution carries out anti-aliasing to P and to its round average value), to determine that this estimation of input picture illuminates coloration
Difference between known " true " illumination coloration with determination (for example, can be used for updating B, G or NCOne or more of damage
Lose functional value), or some other benefits are provided.
The biasing figure B additionally applied can indicate " preference " of specific illumination coloration (for example, since those colorations are being instructed
Practicing particularly is indicated in image collection).When certain colorations are involved (multiple) colour filter and (multiple) annular coloration histograms
When the convolution of figure, the gain diagram G by multiplication applied to colour filter-histogram convolution summation element can be indicated to these colors
The amplification deviation of degree.Offset map B, gain map G and colour filter FCIt can train as described above for histogram colour filter
Device F.For example, can usually determine that the estimation of training image illuminates coloration using these yuan based on training image.It then can be with base
Coloration and known " true " illumination coloration are illuminated in the estimation of training image to apply loss function, scheme B, gain to determine to bias
Scheme G and colour filter FCPenalty values (for example, in conjunction with von Mises be distributed parameter, the parameter fitting to use B, G and FCUsing
Algorithm output).Then identified penalty values can be used to update B, G and FC(for example, being passed via using for example reversed
The iterative processing broadcast).
Fig. 4 depicts based on training image set and corresponding " determining true " illumination coloration the colour filter and figure trained
Visualization, as described above.Leftmost colour filter 410 is applied to the annular color determined from the pixel of input picture by convolution
Spend histogram.Left center colour filter 420 is applied to the picture from the enhancing image determined according to above equation (26) by convolution
The annular chroma histogram that element determines.Right Centered Graphs 430 are gain diagram G as described above, and Figure 44 0 of rightmost is as above
The offset map B.
In some instances, method described herein can be modified to allow to time upper neighbouring input picture (example
Such as, the frame of video or video flowing) determine illumination coloration time smoothing.It is, for example, possible to use for specific input picture
Estimation illumination coloration or relative statistics are (for example, the round average value determined, covariance or its determined from two-dimentional thermal map
He counts) operation estimation of the Lai Gengxin for these parameters of video flowing.In an illustrative embodiment, for being indicated by video flowing
Scene in illumination coloration average value and covariance operation estimation can be it is true for the first image collection of video flowing
Fixed.When obtaining additional image (for example, being captured by the imaging sensor of digital camera) of video flowing, appended drawings can be determined
The average value and covariance of coloration are illuminated as present in.It is then possible to use the average value and association side that determine from additional image
Difference is estimated to update the operation of the illumination coloration of average value and covariance to(for) video flowing.
This is illustrated by following formula:
Wherein ΣtAnd μtIt is the operation estimation for the average value and covariance for updating front lit coloration, Σ respectively0And μ0Respectively
It is the estimation from the additional input image average value determined and covariance.Σt+1And μt+1It is the average value that coloration is illuminated after updating
Operation estimation and α with covariance are to define the parameter of the expected variance of illumination coloration at any time.
IV. example system and image capture device
As the image capture device of such as camera becomes more popular, they may be used as independent hardware device or
It is integrated into the equipment of various other types.For example, camera and video camera are frequently incorporated into wireless computer device now
(for example, mobile phone), tablet computer, laptop computer, video game interface, home automation device, even automobile and
In other kinds of vehicle.
One or more apertures that the physical assemblies of camera may include light to be entered by it, for capturing the figure by light representations
One or more recording surfaces of picture and in front of each aperture at least part of image is focused on one or more
Lens on a recording surface.Aperture can be fixed dimension or adjustable.In analogue camera, recording surface can be photograph
Phase film.In digital camera, recording surface may include electronic image sensor (for example, charge-coupled device (charge
Coupled device, CCD) or complementary metal oxide semiconductor (complementary metal-oxide-
Semiconductor, CMOS) sensor), by captured image be transferred to data storage cell (for example, memory) neutralize/
Or captured image is stored wherein.
One or more shutters may be coupled to lens or recording surface or near.Each shutter may be at: close stance
It sets, in the closed position, light is stopped to reach recording surface；Or open position allows light to reach record in the open position
Surface.The position of each shutter can be controlled by shutter release button.For example, shutter can default it is in the closed position.When fast
Door button be triggered (for example, pressing) when, shutter can from closed position change to open position for a period of time, referred to as shutter week
Phase.During the shutter period, image can be captured on recording surface.In shutter end cycle, shutter can change go back to pass
Closed position.
Alternatively, shutter processing can be electronics.For example, before the electronic shutter " opening " of ccd image sensor,
Sensor can be reset to remove any residue signal in its photodiode.When electronic shutter stays open, photoelectricity two
Pole pipe can stored charge.When shutter close or later, these charges can be transferred to long term data storage.It is both mechanically and electrically fast
The combination of door is also possible.
No matter which kind of type, can activate and/or control shutter by other things in addition to shutter release button.Example
Such as, shutter can be activated by soft key, timer or some other triggers.Herein, term " image capture " can refer to
Any mechanical and/or electronic shutter processing for leading to record one or more images, but regardless of how triggering or control at shutter
Reason.
It can the size by aperture, the brightness of the light into aperture and the length in shutter period (also referred to as shutter length
Or exposure length) combination determine the exposure of captured image.Furthermore it is possible to which number and/or analog gain are applied to figure
Picture, to influence to expose.In some embodiments, term " total exposure length " or " total exposure time " can refer to that shutter length multiplies
With the gain of specific aperture scale.Herein, term " total exposure time " or " TET " should be interpreted to may be that shutter is long
Any other measurement for the signal response quautity that degree, time for exposure or control are generated by the light of arrival recording surface.
Every time when triggering image capture, camera can capture one or more images.As long as image capture holding is touched
It sends out (for example, while pressing shutter release button), video camera can be with special speed (for example, 24 images per second or frame) even
Continuous capture image.Some digital cameras can open shutter when camera apparatus or application are activated, and shutter can be kept
In the position until camera apparatus or application are deactivated.When the shutter is opened, camera apparatus or application can be caught on view finder
Obtain and show the expression of scene.When triggering image capture, the different digitized map of the one or more of current scene can be captured
Picture.
Camera-even analogue camera-may include the software for controlling one or more camera functions and/or setting,
Aperture size, TET, gain etc..In addition, some cameras may include during or after capturing these images to image into
The software of line number word processing.Although above description relates generally to camera, it may be especially relevant with digital camera.
As previously mentioned, digital camera can be autonomous device or integrated with other equipment.As an example, Fig. 5 shows number
The formation factor of code camera apparatus 500.Digital camera devices 500 can be such as mobile phone, tablet computer or wearable
Calculate equipment.However, other embodiments are also possible.Digital camera devices 500 may include various elements, such as main body
502, Front camera 504, multielement display 506, shutter release button 508 and other buttons 510.Digital camera devices 500 may be used also
To include rearmounted camera 512.Front camera 504 can be located at the side of main body 502, usually user oriented in operation, or
In side identical with multielement display 506.Rearmounted camera 512 can be located at one opposite with Front camera 504 of main body 512
Side.Reference camera is that preposition or postposition is arbitrary, and digital camera devices 500 may include positioned at each side of main body 502
Multiple cameras.
Multielement display 506 can indicate cathode-ray tube (cathode ray tube, CRT) display, light-emitting diodes
Pipe (light emitting diode, LED) display, liquid crystal (liquid crystal, LCD) display, plasma are shown
The display of device or any other type known in the art.In some embodiments, multielement display 506 can show by
The present image or can be caught by these magazine one or both that Front camera 504 and/or rearmounted camera 512 capture
The digital representation for the image for obtaining or being recently captured.Therefore, multielement display 506 may be used as the view finder of any camera.It is more
Element display 506 can also support touch screen and/or there are sensitive functions, can adjust digital camera devices 500
Any aspect setting and/or configuration.
Front camera 504 may include imaging sensor and associated optical element, such as lens.Front camera 504 can
To provide zoom capabilities or can have fixed focal length.In other embodiments, Interchangeable lens can be with Front camera
504 are used together.Front camera 504 can have variable mechanical aperture and mechanical and/or electronic shutter.Front camera 504 is also
It is configurable to capturing still image, video image or the two.In addition, Front camera 504 can represent monoscopic, solid or
More view cameras.Rearmounted camera 512 can be arranged similarly or differently.In addition, Front camera 504, rearmounted camera 512 or this two
Person can be the array of one or more cameras.
Any of Front camera 504 and rearmounted camera 512 or both may include light fixture or and illumination group
Part is associated, which provides the light field for illuminating target object.For example, light fixture can provide the flash of light of target object
Or constant illumination.Light fixture can be additionally configured to provide light field, the light field include structure light, polarised light and have specific light
Compose one or more of the light of content.In the context of the embodiments herein, it is known that and for restoring three-dimensional from object
The other kinds of light field of (3D) model is possible.
Any of Front camera 504 and rearmounted camera 512 or both may include ambient light sensor or and ring
Border optical sensor is associated, and ambient light sensor can determine that the environment for the scene that camera can capture is bright continuously or at intervals
Degree.In some equipment, the display that ambient light sensor can be used for adjusting screen associated with camera (for example, view finder) is bright
Degree.When determining ambient brightness is high, the luminance level of screen can be increased so that screen is easier to watch.When determining environment
When brightness is low, the luminance level of screen can be reduced, screen is also made to be easier to watch and potentially save electric power.In addition, ring
The input of border optical sensor can be used for determining the TET of associated camera, or help to carry out the determination.
Digital camera devices 500 can be configured as using multielement display 506 and Front camera 504 or rearmounted camera
512 capture the image of target object.Captured image can be multiple static images or video flowing.It can be by activating shutter
Button 508 presses the soft key on multielement display 506 or triggers image capture by some other mechanism.Depending on reality
Existing mode, can in specified time interval automatic capture image, such as when pressing shutter release button 508, in the suitable of target object
When under lighting condition, in mobile digital camera 500 preset distance of equipment when or according to predetermined capture plan automatic capture image.
As described above, the function of digital camera devices 500 or another type of digital camera be desirably integrated into such as without
In the calculating equipment of line computation equipment, cellular phone, tablet computer, laptop computer etc..For exemplary purposes, Fig. 6 is
The simplified block diagram of some components of Example Computing Device 600 is shown, Example Computing Device 600 can be configured and/or operate be
It captures image and/or executes one or more methods described herein.As shown in fig. 6, calculating equipment 600 may include phase unit
Part 624.Alternatively, image acquisition components can be lacked by calculating equipment 600, and be can be configured as and provided some other benefits
Place, for example, executing one or more of method described elsewhere herein.
As an example, not a limit, calculate equipment 600 can be cellular mobile telephone (for example, smart phone), camera,
Video camera, facsimile machine, computer (such as desktop computer, notebook, tablet computer or handheld computer), personal digital assistant
(personal digital assistant, PDA), home automation components, digital video recorder (digital video
Recorder, DVR), DTV, remote controler, wearable computing devices or equipped at least some image captures and/or image
The equipment of some other types of processing capacity.It should be appreciated that the physics phase of such as digital camera can be indicated by calculating equipment 600
Machine equipment, camera applications with the specific physical hardware platform of software operation or are configured as executing camera function on it
Other combinations of hardware and software.In some instances, calculating equipment 600 can be server, cloud computing system or lacks
Photomoduel and some other system or equipments for being configured as execution some operations as described herein.
As shown in fig. 6, calculating equipment 600 may include that communication interface 602, user interface 604, processor 606, data are deposited
Storage device 608 and photomoduel 624, it is all these can be by system bus, network or other connection mechanisms 610 communicatedly
It links together.
Communication interface 602 can permit calculating equipment 600 and use analog or digital modulation and other equipment, access network
And/or transmission network is communicated.Therefore, communication interface 602 can promote circuit switching and/or packet switching communication, such as
Plain old telephone service (plain old telephone service, POTS) communication and/or Internet Protocol
(Internet protocol, IP) or other packet communications.For example, communication interface 602 may include chipset and antenna,
It is arranged to carry out wireless communication with radio access network or access point.Moreover, communication interface 602 can use or including
The form of wireline interface, such as Ethernet, universal serial bus (Universal Serial Bus, USB) or high-definition multimedia
The port interface (High-Definition Multimedia Interface, HDMI).Communication interface 602 can also be taken or wrap
Include the form of wireless interface, such as Wifi,Global positioning system (global positioning
System, GPS) or wide area wireless interface (for example, WiMAX or 3GPP long term evolution (LTE)).However, it is possible in communication interface
The physical layer interface of other forms and other kinds of standard or proprietary communication protocol are used on 602.In addition, communication interface 602
May include multiple physical communication interfaces (for example, Wifi interface,Interface and wide area wireless interface).
User interface 604 can be used for allowing to calculate equipment 600 and interact with the mankind or non-human user, such as connect from user
It receives and inputs and provide a user output.Therefore, user interface 604 may include input module, such as keypad, keyboard, touch-sensitive
Or there is sensitive panel, computer mouse, trace ball, control stick, microphone etc..User interface 604 can also include one or
Multiple output precisions, such as display screen, such as can be with presence sensitivity panel combination.Display screen can based on CRT, LCD and/
Or LED technology or other technologies that are currently known or developing later.User interface 604 can be additionally configured to via loudspeaker,
Speaker receptacle, audio output port, audio output apparatus, earphone and/or other similar equipment generate audible output.
In some embodiments, user interface 604 may include as the camera for calculating the support of equipment 600 and/or taking the photograph
The display of the view finder of camera function.In addition, user interface 604 may include convenient for configuration and auto-focusing camera function and capture
One or more buttons, switch, knob, and/or the driver plate of image (for example, capture picture).These buttons, switch, knob and/
Or some or all of driver plate can be realized by there is sensitive panel.
Processor 606 may include that one or more general processors (for example, microprocessor) and/or one or more are special
With processor, for example, digital signal processor (digital signal processor, DSP), graphics processing unit
(graphics processing unit, GPU), floating point unit (floating point unit, FPU), network processing unit or
Specific integrated circuit (application-specific integrated circuit, ASIC).In some cases, dedicated
Processor can be able to carry out image procossing, image alignment, white balance, to image colorant, to image boundary adjust and generate
Chroma histogram or other information related with methods described herein and other possibilities.Data storage device 608 can wrap
One or more volatibility and/or non-volatile storage components are included, such as magnetism, optics, flash memory or organic memory device, and
It can be integrated with processor 606 in whole or in part.Data storage device 608 may include removable and/or non-removable
Component.
Processor 606 can be able to carry out be stored in data storage device 608 program instruction 618 (for example, compiling or
Uncompiled programmed logic and/or machine code), to execute various functions described herein.Therefore, data storage device 608
It may include non-transitory computer-readable medium, be stored thereon with program instruction, which holds by calculating equipment 600
Make to calculate any method, processing or operation disclosed in the execution this specification of equipment 600 and/or attached drawing when row.Processor 606 is held
Line program instruction 618 can make processor 606 use data 612.
As an example, program instruction 618 may include operating system 622 (for example, operating system nucleus, one or more
Device driver, and/or other modules) and be mounted on calculate equipment 600 on one or more application program 620 (for example, phase
Machine function, address book, Email, web-browsing, social networks and/or game application).Similarly, data 612 may include
Operating system data 616 and application data 614.Operating system data 616 can be accessed mainly by operating system 622, and be answered
It can mainly be accessed by one or more application program 620 with data 614.It can be arranged in using data 614 to calculating equipment
In the visible or hiding file system of 600 user.
Application program 620 can pass through one or more application programming interface (application programming
Interfaces, API) it is communicated with operating system 622.For example, these API can read and/or be written in order to application program 620
The information of information, reception and/or display about user interface 604 is sent or received using data 614, via communication interface 602,
Etc..In some instances, method described herein can be used to estimate image in one or more of application program 620
It illuminates coloration, illuminate coloration based on such estimation to these image colorants, to execute this coloring or other behaviour to video flowing
Make (for example, to white balance is carried out by the video flowing that view finder provides on the screen or during video capture) or executes
Some other operations as described herein.It in such an example, may include described herein for executing using data 614
The colour filter or other information of one or more methods in method.
In some dialects, application program 620 may be simply referred to as " app ".In addition, application program 620 can by one or
Multiple application on site shops or application market, which download to, calculates equipment 600.However, application program can also be otherwise (all
Such as via web browser or by calculating the physical interface (for example, USB port) in equipment 600) it is mounted on calculating equipment 600
On.
Photomoduel 624 may include but be not limited to aperture, shutter, recording surface (for example, photographic film and/or image pass
Sensor), lens and/or shutter release button.Photomoduel can be controlled at least partially through the software executed by processor 606
624。
V. exemplary operations
Fig. 7 is the flow chart for showing example embodiment.Embodiment shown in Fig. 7 can be by calculating equipment (such as digital phase
Machine equipment 500 calculates equipment 600) Lai Zhihang.However, the embodiment can by other kinds of equipment or equipment subsystem Lai
It executes.In addition, the embodiment can be combined with any aspect or feature disclosed in this specification or attached drawing.
Method 700 includes obtaining input picture (710).Method 700 further includes that the color based on input picture generates input
The annular chroma histogram (720) of image.Method 700 further includes by annular chroma histogram and colour filter convolution (730).The volume
Product defines X-Y scheme.Method 700 further includes the particular value that selection indicates in the threshold value of the maximum value in figure in a two dimensional
Entry (740).Method 700 further includes being coloured to input picture based on selected entry to form output image (750).
Method 700 may include additional step, feature or other elements.For example, what a part as method 700 generated
Annular chroma histogram can be annular logarithm chroma histogram.Method 700, which can also comprise, carries out selected entry
Anti-aliasing, and input picture is coloured to form output image based on selected entry, it may include based on anti-aliasing
Selected entry input picture is coloured to form output image.Carrying out anti-aliasing to selected entry can wrap
Include the average color angle value that (i) determines input picture；And (ii) is selected from multiple estimations associated with selected entry
Specific estimated brightness, so that being coloured input picture to form output image based on the specific estimated brightness, so that output
Image shows muted color more a greater degree of than input picture.Additionally or alternatively, anti-aliasing is carried out to selected entry
It may include selecting specific estimated brightness from multiple estimations associated with selected entry, so that the specific estimation
Brightness ratio multiple estimated values associated with selected entry in any other estimation all closer to annular coloration histogram
The center of figure.Method 700 can also determine penalty values based on selected entry including (i)；And (ii) according to penalty values more
New colour filter.In some instances, the item of the particular value in the threshold value of maximum value of the expression in thermal map is selected in a two dimensional
Mesh may include by every color probability distribution Function Mapping associated with particular value to bivariate von Mises distribution, wherein
It is distributed using average value and covariance matrix bivariate von Mises.It, can be by having in some such examples
There is the machine learning on multiple training images of the true white point of associated determination to determine colour filter.By having correlation
Machine learning on multiple training images of the true white point of the determination of connection determines that colour filter may include: to minimize loss letter
Number is to determine colour filter.This loss function can the negative logarithm based on the Gaussian Profile with average value and covariance matrix seemingly
So.It may include being applied to colour filter to input picture coloring based on selected entry in some embodiments of method 700
Image, wherein colour filter is by selected entry parameter.In some embodiments of method 700, obtaining input picture can be with
It include: that (i) obtains digital picture；And input picture is configured smaller than n × n image of digital picture by (ii), wherein inputting
Each pixel of image be value associated with the pixel set in digital picture and, quilt on pixel set dimension in office
The multiple of n separates.In such embodiments, obtaining digital picture may include capturing the calculating equipment of digital picture.In side
In some embodiments of method 700, output image more white balance than input picture.
Fig. 8 is the flow chart for showing example embodiment.Embodiment shown in Fig. 8 can be by calculating equipment (such as digital phase
Machine equipment 500 calculates equipment 600) Lai Zhihang.However, the embodiment can by other kinds of equipment or equipment subsystem Lai
It executes.In addition, the embodiment can be combined with any aspect or feature disclosed in this specification or attached drawing.
Method 800 includes obtaining input picture (810) by calculating equipment.Input picture includes have corresponding color multiple
Pixel.The color that method 800 also comprises the pixel based on input picture generates annular chroma histogram (820).The ring of generation
Each element of shape chroma histogram and multiple pixels of input picture are corresponding, and multiple pixel is each in chrominance space
There is chromatic value at location sets.Location sets in the chrominance space of element-specific for annular chroma histogram are in coloration
It is regularly spaced apart in space.Method 800 further includes by annular chroma histogram and colour filter convolution to generate two-dimentional thermal map
(830).Method 800 further includes that the illumination coloration (840) of input picture is determined based on two-dimentional thermal map.Method 800 further includes being based on
Identified illumination coloration colours input picture, to generate the output image (850) of color correction.
Method 800 may include additional step, feature or other elements.For example, what a part as method 800 generated
Annular chroma histogram can be annular logarithm chroma histogram.In some embodiments of method 800, annular chroma histogram
Central element be located in the central area of annular chroma histogram, wherein in the location sets in chrominance space with annular coloration
The corresponding specific position of the central element of histogram is corresponding with expected illumination coloration.In some realities of method 800
It applies in mode, determines that the illumination coloration of input picture includes: the element that (i) selects annular chroma histogram；(ii) from color
The position selected in chrominance space in location sets corresponding with the annular selected element of chroma histogram is spent in space；
And (iii) determines the illumination coloration of input picture based on the selected position in chrominance space.Method 800 can also include
Determine the average chrominance of input picture.In such embodiments, out of chrominance space and selected by annular chroma histogram
The corresponding location sets of element in select chrominance space in position may include: from the location sets in chrominance space
Select position most like with the average chrominance of input picture in chrominance space.In some embodiments of method 800, it is based on two
Dimension thermal map determines that the illumination coloration of input picture includes the round average value for determining two-dimentional thermal map.Method 800 it is some in this way
Embodiment in, the illumination coloration of input picture is determined based on two-dimentional thermal map further include: determine about identified round average
The covariance of the two-dimentional thermal map of value.In some such embodiments of method 800, the identified circle of two-dimentional thermal map is average
Value and covariance are corresponding with the bivariate von Mises mean value being distributed and covariance.Method 800 can also include: that (i) is obtained
Second input picture, wherein the second input picture includes more than second a pixels with the second corresponding color；(ii) it is based on second
The color of the pixel of input picture generates the second annular chroma histogram, wherein each element of the second annular chroma histogram
Corresponding with multiple pixels of the second input picture, multiple pixel has coloration at the second position set in chrominance space
Value, wherein the second position in the chrominance space of the second element-specific of chroma histogram annular for second is integrated into coloration sky
It is interior to be regularly spaced apart；(iii) by the second annular chroma histogram and colour filter convolution to generate the second two-dimentional thermal map；And
(iv) based on the second two-dimentional thermal map and the illumination coloration determined for the first input picture, the second illumination of the second input picture is determined
Coloration.Method 800 can also include: (i) based on the determining enhancing image of input picture, wherein enhancing image includes having other phase
Answer other multiple pixels of color；(ii) color of the pixel based on enhancing image, generating enhances annular chroma histogram, wherein
The each element for enhancing annular chroma histogram is corresponding with enhancing multiple pixels of image, and multiple pixel is in chrominance space
Other corresponding position set at there is chromatic value, wherein for the coloration for the other element-specific for enhancing annular chroma histogram
Other location sets in space are regularly spaced apart in chrominance space；And (iii) will enhance annular chroma histogram with
Other colour filter convolution enhances two-dimentional thermal map to generate, wherein determining that the illumination coloration of input picture includes based on enhancing two dimension
Thermal map determines illumination coloration.In some embodiments of method 800, obtaining input picture includes operation imaging sensor to generate
Input picture.
Fig. 9 is the flow chart for showing example embodiment.Embodiment shown in Fig. 9 can be by calculating equipment (such as digital phase
Machine equipment 500 calculates equipment 600) Lai Zhihang.However, the embodiment can by other kinds of equipment or equipment subsystem Lai
It executes.In addition, the embodiment can be combined with any aspect or feature disclosed in this specification or attached drawing.
Method 900 includes obtaining multiple input pictures (910) by calculating equipment.Each input figure in multiple input pictures
As including multiple pixels with corresponding color.Method 900, which is also comprised, obtains multiple illumination colorations (920) by server.It is more
Each illumination coloration in a illumination coloration and the corresponding input picture in multiple input pictures are corresponding.Method 900 further includes
The color of pixel based on the first input picture in multiple input pictures generates annular chroma histogram (930).Annular coloration
Each element of histogram and multiple pixels of the first input picture are corresponding, corresponding positions of multiple pixel in chrominance space
Setting has chromatic value at set.For the location sets in the chrominance space of the element-specific of annular chroma histogram in coloration sky
It is interior to be regularly spaced apart.Method 900 further includes by annular chroma histogram and colour filter convolution to generate two-dimentional thermal map
(940).Method 900 also comprises estimation illumination coloration (950) that the first input picture is determined based on two-dimentional thermal map.Method 900
Further include determine estimation illumination coloration with it is multiple illumination colorations in it is corresponding with the first input picture first illuminate colorations it
Between difference (960).Method 900 further includes being updated based on the difference between identified estimation illumination coloration and the first illumination coloration
Colour filter, to generate the colour filter (970) updated.Method 900 further includes being sent the instruction of the colour filter of update by server
To remote system (980).
Method 900 may include additional step, feature or other elements.For example, what a part as method 900 generated
Annular chroma histogram can be annular logarithm chroma histogram.In some embodiments of method 900, annular chroma histogram
Central element be located in the central area of annular chroma histogram, and in the location sets in chrominance space with annular coloration
The corresponding specific position of the central element of histogram is corresponding with expected illumination coloration.In some realities of method 900
It applies in example, determines that the estimation illumination coloration of the first input picture includes: the element that (i) selects annular chroma histogram；
(ii) chrominance space is selected from location sets corresponding with the selected element of annular chroma histogram in chrominance space
Interior position；(iii) determine that the estimation of the first input picture illuminates coloration based on the selected position in chrominance space.Method
900 can also include determine the first input picture average chrominance, and out of chrominance space with the institute of annular chroma histogram
It may include: from the position collection in chrominance space that the position in chrominance space is selected in the corresponding location sets of the element of selection
Close position most like with the average chrominance of the first input picture in selection chrominance space.In some embodiments of method 900,
Determine that the estimation illumination coloration of the first input picture comprises determining that the round average value of two-dimentional thermal map based on two-dimentional thermal map.In side
In some embodiments of method 900, determine that the estimation of the first input picture illuminates coloration based on two-dimentional thermal map further include: determine two dimension
The covariance about identified round average value of thermal map.In some such embodiments of method 900, identified two
Round average value and the covariance for tieing up thermal map are corresponding with the bivariate von Mises average value being distributed and covariance.Method 900
It can also include: (i) based on the determining enhancing image of the first input picture, wherein enhancing image includes having other corresponding color
In addition multiple pixels；(ii) color of the pixel based on enhancing image, generating enhances annular chroma histogram, wherein enhancing annular
Each element of chroma histogram is corresponding with enhancing multiple pixels of image, other phase of multiple pixel in chrominance space
Answering has chromatic value at location sets, wherein in the chrominance space for the other element-specific for enhancing annular chroma histogram
In addition location sets are regularly spaced apart in chrominance space；And (iii) will enhance annular chroma histogram and other filter
Color device convolution is to generate other enhancing two dimension thermal map, wherein the estimation illumination coloration for determining the first input picture includes: to be based on
Enhance two-dimentional thermal map and determines estimation illumination coloration.In some embodiments of method 900, sent more from server to remote system
The instruction of new colour filter includes: to send image capture device for the instruction of the colour filter of update.
VI. conclusion
The present disclosure is not limited to specific embodiment described in this application, it is intended to illustrate various aspects.Such as art technology
Personnel in the case where without departing from the scope it will be apparent that can carry out many modifications and variations.In addition to it is enumerated herein that
Except a little method and apparatus, the description from front, the equivalent method and apparatus of function within the scope of the disclosure are for this field skill
It is obvious for art personnel.These modifications and variations are intended to come within the scope of the appended claims.
The various feature and function that disclosed system, apparatus and method have been described with reference to the drawings are discussed in detail above.This
Example embodiment described in text and attached drawing is not intended to limit.In the case where not departing from the range of theme proposed in this paper,
It can use other embodiments, and other changes can be carried out.It is easily understood that as this paper general description and attached
The aspect of the disclosure shown in figure can be arranged, be replaced, combined, separated and designed with a variety of different configurations, it is all this
A bit all it is expressly contemplated that in this.
According to example embodiment, about in attached drawing and as discussed in this article any or all message flow chart, scene and
Flow chart, each step, block and/or communication can indicate the processing of information and/or the transmission of information.Alternate embodiment is included in
In the range of these example embodiments.In these alternative embodiments, for example, be described as step, block, transmission, communication, request,
The function of response and/or message can be executed with order in a different order that is shown or discussing, including substantially concurrent or opposite
Sequence, this depends on the function that is related to.Furthermore, it is possible to by more or fewer pieces and/or function be discussed herein it is any
Ladder diagram, scene are used together with flow chart, and these ladder diagrams, scene and flow chart can partly or wholly each other
Combination.
The step of indicating information processing or block, which can correspond to can be configured as, executes method described herein or technology
Specific logical function circuit.Alternately or in addition, indicate information processing the step of or block can correspond to module, section or
A part (including related data) of program code.Program code may include that can be referred to by the one or more that processor executes
It enables, for realizing the specific logical function or movement in this method or technology.Program code and/or related data can store
On any kind of computer-readable medium, such as including the storage equipment of disk, hard drive or other storage mediums.
Computer-readable medium can also include non-transitory computer-readable medium, such as computer-readable medium,
Storing data in a short period of time, such as register memory, processor cache and random access memory (RAM).It calculates
Machine readable medium can also include non-transitory computer-readable medium, the longer period store program code and/or
Data.Therefore, computer-readable medium may include second level or persistently long-term storage, such as read-only memory (ROM), CD
Or disk, compact disc read-only memory (CD-ROM).Computer-readable medium can also be any other volatibility or non-volatile
Storage system.Computer-readable medium is considered computer readable storage medium, such as tangible storage device.
In addition, the step of indicating one or more information transmission or block can correspond to the software in same physical equipment
And/or the information transmission between hardware module.However, other information transmission can be in the software module in different physical equipments
And/or between hardware module.
Specific arrangements shown in the drawings are not construed as limiting.It should be understood that other embodiments may include giving
More or fewer each elements shown in figure.Furthermore, it is possible to combine or omit some shown elements.In addition, example is implemented
Example may include element not shown in figures.
In addition, any enumerate of element, block or step in this specification or claim is for purposes of clarity.Cause
This, this enumerate is not necessarily to be construed as requiring or imply that these elements, block or step are followed specific arrangements or held with particular order
Row.
Although various aspects and embodiment have been disclosed herein, other aspect and embodiment are for art technology
It will be apparent for personnel.Various aspects disclosed herein and embodiment are for purposes of illustration rather than restricted
, real range is indicated by appended claims.
Claims (37)
1. a kind of method, comprising:
Obtain input picture；
Color based on input picture generates the annular chroma histogram of input picture；
By annular chroma histogram and colour filter convolution, wherein the Defined X-Y scheme；
Selection indicates the entry of the particular value in the threshold value of maximum value in the drawings in the X-Y scheme；And
Based on selected entry, input picture is coloured to form output image.
2. the method as described in claim 1, wherein the annular chroma histogram is annular logarithm chroma histogram.
3. such as method of any of claims 1-2, further includes:
Anti-aliasing is carried out to selected entry, and the selected entry based on anti-aliasing colours to be formed input picture
Export image.
4. method as claimed in claim 3, wherein including: to selected entry progress anti-aliasing
Determine the average color angle value of input picture；And
Specific estimated brightness is selected from multiple estimations associated with selected entry, so that specifically estimating based on described
Meter brightness colours input picture to form output image and cause to export image presentation muted color more a greater degree of than input picture.
5. the method as claimed in claim 3 or 4, wherein including: to selected entry progress anti-aliasing
Select specific estimated brightness from multiple estimations associated with selected entry so that it is described specifically estimate it is bright
In degree annular chroma histogram all more closer than any other estimation in multiple estimations associated with selected entry
The heart.
6. method according to any one of claims 1 to 5, further includes:
Penalty values are determined based on selected entry；And
Colour filter is updated based on the penalty values.
7. such as method of any of claims 1-6, wherein selection indicates in the thermal map in the X-Y scheme
The entry of particular value in the threshold value of maximum value includes:
Every color probability distribution Function Mapping associated with the particular value is distributed to bivariate von Mises, wherein making
The bivariate von Mises distribution is estimated with average value and covariance matrix.
8. the method as described in any one of aforementioned claim, further includes:
Colour filter is determined using the machine learning on multiple training images of the true white point of associated determination.
9. method according to claim 8, wherein being schemed by multiple training in the true white point of associated determination
Determine that colour filter includes: as upper machine learning
Loss function is minimized to determine colour filter, wherein the loss function is to be based on being defined with average value and covariance matrix
Gaussian Profile negative log-likelihood.
10. method as claimed in any one of claims 1-9 wherein is wrapped wherein being coloured based on selected entry to input picture
It includes:
By colour filter be applied to image, and wherein the colour filter by selected entry parameter.
11. such as method of any of claims 1-10, wherein acquisition input picture includes:
Obtain digital picture；And
Input picture is configured smaller than to n × n image of digital picture, wherein each pixel of input picture is and digital picture
In the associated value of pixel set sum, separated by the multiple of n on the pixel set dimension in office.
12. method as claimed in claim 11, wherein acquisition digital picture includes:
It calculates equipment and captures digital picture.
13. such as method of any of claims 1-12, wherein output image than input picture more white balance.
14. a kind of method, comprising:
Input picture is obtained by calculating equipment, wherein input picture includes multiple pixels with corresponding color；
The color of pixel based on input picture generates annular chroma histogram, wherein each element of annular chroma histogram
Corresponding with multiple pixels of input picture, corresponding position of the multiple pixel in chrominance space has chromatic value,
In the location sets in the chrominance space of the element-specific of annular chroma histogram are regularly spaced apart in chrominance space；
By annular chroma histogram and colour filter convolution, to generate two-dimentional thermal map；
The illumination coloration of input picture is determined, wherein determining illumination coloration based on the two-dimentional thermal map；And
Based on identified illumination coloration, input picture is coloured to generate the output image of color correction.
15. method as claimed in claim 14, wherein the annular chroma histogram is annular logarithm chroma histogram.
16. the method as described in any one of claim 14-15, wherein the central element of the annular chroma histogram is located at
It is described annular chroma histogram central area in, and wherein in the location sets in the chrominance space with the ring
The corresponding specific position of the central element of shape chroma histogram is corresponding with expected illumination coloration.
17. the method as described in any one of claim 14-16, wherein determining that the illumination coloration of input picture includes:
Select an element in the element of annular chroma histogram；
Chrominance space is selected from location sets corresponding with the selected element of annular chroma histogram in chrominance space
Interior position；And
The illumination coloration of input picture is determined based on the position in selected chrominance space.
18. method as claimed in claim 17, further includes:
Determine the average chrominance of input picture；
Wherein coloration is selected from location sets corresponding with the selected element of annular chroma histogram in chrominance space
Position in space includes: from selecting to be most similar to the flat of input picture in chrominance space in the location sets in chrominance space
The position of equal coloration.
19. the method as described in any one of claim 14-18, wherein determining the input picture based on the two-dimentional thermal map
Illumination coloration comprise determining that the round average value of the two-dimentional thermal map.
20. method as claimed in claim 19, wherein determining the illumination coloration of the input picture based on the two-dimentional thermal map
Further include: determine the covariance about identified round average value of the two-dimentional thermal map.
21. method as claimed in claim 20, wherein the round average value of identified two dimension thermal map and covariance and double changes
Average value and the covariance for measuring von Mises distribution are corresponding.
22. the method as described in any one of claim 14-21, wherein the input picture is the first input picture, and
The method also includes:
The second input picture is obtained, wherein the second input picture includes more than second a pixels with the second corresponding color；
The color of pixel based on the second input picture generates the second annular chroma histogram, wherein the second annular coloration histogram
Each element of figure and multiple pixels of the second input picture are corresponding, and the multiple pixel is second corresponding in chrominance space
There is chromatic value, wherein the in the chrominance space of the second element-specific of chroma histogram annular for second at location sets
Two location sets are regularly spaced apart in chrominance space；
By the second annular chroma histogram and colour filter convolution, to generate the second two-dimentional thermal map；And
Based on the second two-dimentional thermal map and the illumination coloration determined for the first input picture, the second illumination of the second input picture is determined
Coloration.
23. the method as described in any one of claim 14-22, further includes:
Enhancing image is determined based on input picture, wherein enhancing image includes other multiple pixels with other corresponding color；
The color of pixel based on enhancing image, generating enhances annular chroma histogram, wherein enhancing annular chroma histogram
Each element is corresponding with enhancing multiple pixels of image, and the multiple pixel is in chrominance space at the set of other corresponding position
With chromatic value, wherein for the other location sets in the chrominance space for the other element-specific for enhancing annular chroma histogram
It is regularly spaced apart in chrominance space；And
Annular chroma histogram and other colour filter convolution will be enhanced, enhance two-dimentional thermal map to generate；
The illumination coloration for wherein determining input picture includes determining illumination coloration based on the two-dimentional thermal map of enhancing.
24. the method as described in any one of claim 14-23, wherein obtain input picture include operation imaging sensor with
Generate input picture.
25. a kind of image capture device, comprising:
Imaging sensor；
At least one processor；
Memory；And
Program instruction stored in memory holds image capture device when being executed by least one described processor
Method of the row as described in any one of claim 1-24.
26. a kind of product, including non-transitory computer-readable medium, are stored thereon with program instruction, described program instruction exists
Make to calculate method of the equipment execution as described in any one of claim 1-24 when being executed as calculating equipment.
27. a kind of method, comprising:
Multiple input pictures are obtained by calculating equipment, each input picture in the multiple input picture includes having corresponding face
Multiple pixels of color；
Multiple illumination colorations are obtained by server, wherein it is the multiple illumination coloration in each illumination coloration with it is the multiple defeated
The corresponding input picture entered in image is corresponding；
The color of pixel based on the first input picture in the multiple input picture generates annular chroma histogram, wherein
Each element of annular chroma histogram and multiple pixels of the first input picture are corresponding, and the multiple pixel is in chrominance space
There is chromatic value, wherein for the position in the chrominance space of the element-specific of annular chroma histogram at interior corresponding position set
It sets to be integrated into chrominance space and be regularly spaced apart；
By annular chroma histogram and colour filter convolution, to generate two-dimentional thermal map；
The estimation illumination coloration of the first input picture is determined, wherein determining the illumination coloration based on the two-dimentional thermal map；
Determine the first illumination color corresponding with the first input picture in the estimation illumination coloration and the multiple illumination coloration
Difference between degree；
Colour filter is updated based on the difference between identified estimation illumination coloration and the first illumination coloration, to generate the filter updated
Color device；And
The instruction of the colour filter updated is sent from server to remote system.
28. method as claimed in claim 27, wherein the annular chroma histogram is annular logarithm chroma histogram.
29. the method as described in any one of claim 27-28, wherein the central element of the annular chroma histogram is located at
It is described annular chroma histogram central area in, and wherein in the location sets in the chrominance space with the ring
The corresponding specific position of the central element of shape chroma histogram is corresponding with expected illumination coloration.
30. the method as described in any one of claim 27-28, wherein determining the estimation illumination color of first input picture
Degree includes:
Select an element in the element of annular chroma histogram；
Chrominance space is selected from location sets corresponding with the selected element of annular chroma histogram in chrominance space
Interior position；And
Determine that the estimation of the first input picture illuminates coloration based on the position in selected chrominance space.
31. method as claimed in claim 30, further includes:
Determine the average chrominance of the first input picture；
Wherein coloration is selected from location sets corresponding with the selected element of annular chroma histogram in chrominance space
Position in space include: from the location sets in chrominance space select chrominance space in be most similar to the first input picture
The position of average chrominance.
32. the method as described in any one of claim 27-31, wherein determining first input based on the two-dimentional thermal map
The estimation illumination coloration of image comprises determining that the round average value of the two-dimentional thermal map.
33. method as claimed in claim 32, wherein determining the estimation of first input picture based on the two-dimentional thermal map
Illuminate coloration further include: determine the covariance about identified round average value of the two-dimentional thermal map.
34. method as claimed in claim 33, wherein the round average value of identified two dimension thermal map and covariance and double changes
Average value and the covariance for measuring von Mises distribution are corresponding.
35. the method as described in any one of claim 27-34, further includes:
Enhancing image is determined based on the first input picture, wherein enhancing image includes other multiple pictures with other corresponding color
Element；
The color of pixel based on enhancing image, generating enhances annular chroma histogram, wherein enhancing annular chroma histogram
Each element is corresponding with enhancing multiple pixels of image, other corresponding position set of the multiple pixel in chrominance space
Place has chromatic value, wherein for the other position collection in the chrominance space for the other element-specific for enhancing annular chroma histogram
Conjunction is regularly spaced apart in chrominance space；And
Annular chroma histogram and other colour filter convolution will be enhanced, to generate other enhancing two dimension thermal map；
The estimation illumination coloration for wherein determining the first input picture includes determining estimation illumination coloration based on the two-dimentional thermal map of enhancing.
36. the method as described in any one of claim 27-35, wherein sending update from the server to remote system
The instruction of colour filter includes: to send image capture device for the instruction of the colour filter of update.
37. a kind of product including non-transitory computer-readable medium, is stored thereon with program instruction, described program instruction exists
The calculating equipment is made to execute the method as described in any one of claim 27-36 when being executed as calculating equipment.
Applications Claiming Priority (3)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US201662422496P | 2016-11-15 | 2016-11-15 | |
US62/422,496 | 2016-11-15 | ||
PCT/US2017/061568 WO2018093785A1 (en) | 2016-11-15 | 2017-11-14 | Fast fourier color constancy |
Publications (2)
Publication Number | Publication Date |
---|---|
CN109983508A true CN109983508A (en) | 2019-07-05 |
CN109983508B CN109983508B (en) | 2023-07-25 |
Family
ID=60574730
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
CN201780070543.2A Active CN109983508B (en) | 2016-11-15 | 2017-11-14 | Fast fourier color constancy |
Country Status (4)
Country | Link |
---|---|
US (1) | US10949958B2 (en) |
EP (1) | EP3542347B1 (en) |
CN (1) | CN109983508B (en) |
WO (1) | WO2018093785A1 (en) |
Cited By (3)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
CN112204957A (en) * | 2019-09-20 | 2021-01-08 | 深圳市大疆创新科技有限公司 | White balance processing method and device, movable platform and camera |
CN113657925A (en) * | 2021-07-28 | 2021-11-16 | 黄淮学院 | Civil engineering cost management method based on artificial intelligence |
CN116761081A (en) * | 2021-06-07 | 2023-09-15 | 荣耀终端有限公司 | Algorithm for automatic white balance of AI (automatic input/output) and electronic equipment |
Families Citing this family (11)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US10970876B2 (en) * | 2017-12-08 | 2021-04-06 | Panton, Inc. | Methods and apparatus for image locating relative to the global structure |
CN109005397B (en) * | 2018-08-31 | 2020-04-14 | 建荣半导体（深圳）有限公司 | Image white balance adjusting method and device, image processing chip and storage device |
US10896341B2 (en) * | 2018-11-15 | 2021-01-19 | International Business Machines Corporation | Efficient defect localization/segmentation for surface defect inspection |
US11455535B2 (en) * | 2019-08-22 | 2022-09-27 | Mahmoud Afifi | Systems and methods for sensor-independent illuminant determination |
US11403783B2 (en) * | 2019-11-14 | 2022-08-02 | Alibaba Group Holding Limited | Techniques to dynamically gate encoded image components for artificial intelligence tasks |
WO2021118556A1 (en) | 2019-12-11 | 2021-06-17 | Google Llc | Color calibration of display modules using a reduced number of display characteristic measurements |
US20220156899A1 (en) * | 2020-11-16 | 2022-05-19 | Samsung Electronics Co., Ltd. | Electronic device for estimating camera illuminant and method of the same |
US20220164601A1 (en) * | 2020-11-20 | 2022-05-26 | Mediatek Inc. | Methods and Apparatuses of Contrastive Learning for Color Constancy |
US11924590B2 (en) * | 2021-04-13 | 2024-03-05 | Teledyne Flir Commercial Systems, Inc. | Image color correction systems and methods |
JP2022163465A (en) * | 2021-04-14 | 2022-10-26 | 日本電気株式会社 | Receiving device and parameter generation method for demodulation |
US11893769B2 (en) | 2021-06-04 | 2024-02-06 | Vade Usa, Incorporated | Data collection for object detectors |
Citations (5)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US6366319B1 (en) * | 1997-07-03 | 2002-04-02 | Photronics Corp. | Subtractive color processing system for digital imaging |
CN102404582A (en) * | 2010-09-01 | 2012-04-04 | 苹果公司 | Flexible color space selection for auto-white balance processing |
US20140125836A1 (en) * | 2012-11-05 | 2014-05-08 | Nvidia Corporation | Robust selection and weighting for gray patch automatic white balancing |
US20140226900A1 (en) * | 2005-03-01 | 2014-08-14 | EyesMatch Ltd. | Methods for extracting objects from digital images and for performing color change on the object |
US9336582B1 (en) * | 2015-04-17 | 2016-05-10 | Google Inc. | Convolutional color correction |
-
2017
- 2017-11-14 CN CN201780070543.2A patent/CN109983508B/en active Active
- 2017-11-14 US US16/342,911 patent/US10949958B2/en active Active
- 2017-11-14 WO PCT/US2017/061568 patent/WO2018093785A1/en unknown
- 2017-11-14 EP EP17809111.2A patent/EP3542347B1/en active Active
Patent Citations (5)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US6366319B1 (en) * | 1997-07-03 | 2002-04-02 | Photronics Corp. | Subtractive color processing system for digital imaging |
US20140226900A1 (en) * | 2005-03-01 | 2014-08-14 | EyesMatch Ltd. | Methods for extracting objects from digital images and for performing color change on the object |
CN102404582A (en) * | 2010-09-01 | 2012-04-04 | 苹果公司 | Flexible color space selection for auto-white balance processing |
US20140125836A1 (en) * | 2012-11-05 | 2014-05-08 | Nvidia Corporation | Robust selection and weighting for gray patch automatic white balancing |
US9336582B1 (en) * | 2015-04-17 | 2016-05-10 | Google Inc. | Convolutional color correction |
Cited By (4)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
CN112204957A (en) * | 2019-09-20 | 2021-01-08 | 深圳市大疆创新科技有限公司 | White balance processing method and device, movable platform and camera |
CN116761081A (en) * | 2021-06-07 | 2023-09-15 | 荣耀终端有限公司 | Algorithm for automatic white balance of AI (automatic input/output) and electronic equipment |
CN113657925A (en) * | 2021-07-28 | 2021-11-16 | 黄淮学院 | Civil engineering cost management method based on artificial intelligence |
CN113657925B (en) * | 2021-07-28 | 2023-08-22 | 黄淮学院 | Civil engineering cost management method based on artificial intelligence |
Also Published As
Publication number | Publication date |
---|---|
US10949958B2 (en) | 2021-03-16 |
US20200051225A1 (en) | 2020-02-13 |
CN109983508B (en) | 2023-07-25 |
EP3542347A1 (en) | 2019-09-25 |
WO2018093785A1 (en) | 2018-05-24 |
EP3542347B1 (en) | 2022-01-05 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
CN109983508A (en) | Fast Flourier color constancy | |
CN107431790B (en) | Method and non-transitory computer-readable medium for image procossing | |
Pierson et al. | Tutorial: luminance maps for daylighting studies from high dynamic range photography | |
US10237527B2 (en) | Convolutional color correction in digital images | |
Fairchild | The HDR photographic survey | |
CN106211804B (en) | Automatic white balance is carried out using to the colour measurement of raw image data | |
Jiang et al. | Learning the image processing pipeline | |
Cheng et al. | Beyond white: Ground truth colors for color constancy correction | |
US9875724B2 (en) | Method and electronic device for adjusting display | |
CN105245863B (en) | The image processing apparatus and its control method and picture pick-up device of progress white balance control | |
Akyüz et al. | Color appearance in high-dynamic-range imaging | |
CN109792478A (en) | System and method based on focus target information adjustment focus | |
CN107707789B (en) | Method, computing device and storage medium for providing a color high resolution image of a scene | |
TW200925492A (en) | Image sensor apparatus and method for scene illuminant estimation | |
CN110930341A (en) | Low-illumination image enhancement method based on image fusion | |
Zhang et al. | Improved and robust spectral reflectance estimation | |
Tian et al. | Automating the design of image processing pipelines for novel color filter arrays: Local, linear, learned (L3) method | |
US9030575B2 (en) | Transformations and white point constraint solutions for a novel chromaticity space | |
Garud et al. | A fast color constancy scheme for automobile video cameras | |
McCann et al. | Chromaticity limits in color constancy calculations | |
CN106210554B (en) | A method of synthesis high dynamic range images | |
Guarnera et al. | Absolute colorimetric characterization of a dslr camera | |
Kamath et al. | Prediction of illuminance on the work plane using low dynamic unprocessed image data | |
US20230206592A1 (en) | Method and electronic device for digital image enhancement on display | |
TWI259706B (en) | Method for processing image in a digital image capturing system and digital image capturing system |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
PB01 | Publication | ||
PB01 | Publication | ||
SE01 | Entry into force of request for substantive examination | ||
SE01 | Entry into force of request for substantive examination | ||
GR01 | Patent grant | ||
GR01 | Patent grant |