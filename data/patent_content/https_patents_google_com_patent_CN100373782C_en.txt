Summary of the invention
According to an aspect of the present invention, provide a kind of baseband signal of handling so that the device in order to the low level signal that amplifies to be provided, the amplification of described low level signal will improve the performance of multi-channel transmitter, and described device comprises in combination:
The first transition matrix module is coupled at least one input signal, is used to provide a plurality of output signals, and each described output signal comprises the version combination after the phase shift of described at least one input signal;
Processing unit is coupled to described output signal, is used for according to each described output signal of pre-defined algorithm correction, so that a plurality of revised output signals to be provided;
The second transition matrix module is coupled to described revised output signal, is used to decompose described revised output signal, and so that at least one output baseband signal to be provided, each described output baseband signal is corresponding to one of them described input signal; And
Compensation functions module, be set up and be incorporated into one of them of described a plurality of revised output signal and described output baseband signal by mutual coupling, with compensate described a plurality of revise back output signals and described output baseband signal described one of them, make described output baseband signal be used to generate the low level signal that will improve described multi-channel transmitter performance.
According to another aspect of the present invention, provide a kind of multi-channel transmitter, used the simulation fourier transform matrix for power amplifier is redundant, and have the improvement performance, described multi-channel transmitter comprises in combination:
Be used to handle the device of baseband signal, described device further comprises:
The first fourier transform matrix module, described module is coupled at least one input signal, is used to provide a plurality of output signals, and each described output signal comprises the combination of the version after the phase shift of described input signal;
Be coupled to the processing unit of described output signal, be used for according to each described output signal of pre-defined algorithm correction, so that a plurality of revised output signals to be provided;
Be coupled to described a plurality of second fourier transform matrix module of revising the back output signal, be used to decompose described revised output signal, so that at least one output baseband signal to be provided, each described output baseband signal is corresponding to a described input signal; And
Be set up and mutual coupling is incorporated into described a plurality of one of them compensation functions module of revising back output signals and described output baseband signal, with compensate according to feedback signal described a plurality of revise back output signals and described output baseband signal described one of them;
Frequency mixer is used for each described output baseband signal is converted to radiofrequency signal, so that at least one radiofrequency signal to be provided;
The first simulation fourier transform matrix module is used to provide a plurality of amplifier input signals, and each described amplifier input signal comprises the combination of the version after the phase shift of described radiofrequency signal;
Power amplifier has a plurality of amplifiers, and so that the output signal after a plurality of amplifications to be provided, each amplifier has one of them the input that is coupled to described a plurality of amplifier input signals, and described a plurality of one of them of back output signal of amplifying is provided;
Sampler, be used for described a plurality of amplifier input signals and described a plurality of a plurality of signals that the amplify the back output signal described compensation functions module that is coupled back, in wherein said a plurality of signal each is represented one of them of described a plurality of amplifier input signal and described a plurality of amplifications back output signal, and described a plurality of signals are corresponding to described feedback signal; And
The second simulation fourier transform matrix module is coupled to the output signal after described a plurality of amplification, sends signal so that corresponding to described output baseband signal at least one to be provided one to one.
According to a further aspect of the invention, provide a kind of,, said method comprising the steps of to improve the method for multi-channel transmitter performance for the redundant simulation fourier transform matrix that uses of power amplifier:
A plurality of output signals are provided, and each output signal comprises the combination of the version after the phase shift of at least one input signal;
According to each described output signal of pre-defined algorithm correction, so that a plurality of revised output signals to be provided;
Decompose described revised output signal, so that at least one output baseband signal to be provided, each described output baseband signal is corresponding to one of them described input signal;
Compensate described a plurality of one of them of back output signals and described output baseband signal revised according to feedback signal;
Each described output baseband signal is converted to radiofrequency signal, so that at least one radiofrequency signal to be provided;
Generate a plurality of amplifier input signals, each described amplifier input signal comprises the combination of the version after the phase shift of described radiofrequency signal, and described amplifier input signal is corresponding to described revised output signal;
The power amplifier that use has a plurality of amplifiers amplifies described a plurality of amplifier input signal, so that the output signal after a plurality of amplifications to be provided, each amplifier has one of them the input that is coupled to described a plurality of amplifier input signals, and described a plurality of one of them of back output signal of amplifying is provided;
Described a plurality of amplifier input signals and described a plurality of a plurality of signal coupling covering of amplifying in the output signal of back are repaid functional module, in wherein said a plurality of signal each represent described a plurality of amplifier input signal and described a plurality of amplify the back output signal described one of them, described a plurality of signals are corresponding to described feedback signal; And
Decompose the output signal after described a plurality of amplification, send signal so that corresponding to described output baseband signal at least one to be provided one to one.
According to a further aspect of the invention, provide a kind of baseband signal of handling so that the device in order to the low level signal that amplifies to be provided, described low level amplification will improve the performance of multi-channel transmitter, and described device comprises in combination:
The first transformation matrix module is coupled at least one input signal, is used to provide a plurality of output signals, and each described output signal comprises the combination of the version after the phase shift of described at least one input signal;
Processing unit is coupled to described output signal, is used for according to each described output signal of pre-defined algorithm predistortion, so that the output signal after a plurality of predistortions to be provided; And
The second transformation matrix module is coupled to the output signal after the described predistortion, is used to decompose the output signal after the described predistortion, and so that at least one output baseband signal to be provided, each described output baseband signal is corresponding to one of them of described output signal; And
Compensation functions module, be set up and be incorporated into output signal after described a plurality of predistortion and one of them of described output baseband signal by mutual coupling, with compensate output signal after described a plurality of predistortion and described output baseband signal described one of them, make described output baseband signal be used to generate the low level signal that will improve described multi-channel transmitter performance.
Embodiment
Put it briefly, the present invention relates to use transmitter, perhaps or rather, provide professional communication system to the user who works therein to communication unit.Especially discuss and disclose the different inventions designs and the principle that realize in the method and apparatus that uses baseband conversion with improvement multichannel amplifier performance, described multichannel amplifier is that load allocating is simulated fourier transform matrix with redundant the use.The communication system that cherishes a special interest be configured or develop those, for example use modulation format, for example QPSK, DQPSK, OQPSK, BPSK, QAM and require the spread spectrum of cost efficiency high availability linear transmitter or GSM, GPRS, CDMA, IDEN, 2.5G and the 3G system of its variant and development.
As following further discussion, different inventive principle and combination thereof are advantageously used in mainly the signal that will run at base band place structure and process amplifier, therefore reduced the various problems relevant with known system, and still promote to be provided, use the cost of these principles or its equivalent effective, high-performance and high availability transmitter.
The present open optimum way that obtains and use different embodiments of the invention with further explanation is provided.This open understanding that also is used to strengthen to inventive principle and advantage thereof, and limit the present invention anything but.The present invention is only defined by the claim that is included in the modification of carrying out in the application checking process and the equivalent of disclosed claim.
Should also be appreciated that, if any, the use of relational terms, for example first and second, top and bottom etc. only are used to an entity or action are different from another, rather than necessarily require or imply the relation or the order of any reality between these entities or the action.Most invention functions and inventive principle is the most handy or at software program or instruction and integrated circuit (IC), for example the IC of application-specific realizes.Though by for example up duration, current techniques, and the possible huge effort that economic consideration promoted and a lot of design alternative, but the guidance of disclosed here design of those of ordinary skill and principle will can generate this software instruction and program and IC with minimum experiment down at an easy rate.Therefore, in order to reduce the principle of the invention and the obscure danger of design, if any, will be limited in being primarily aimed on the principle and design of preferred embodiment to the further discussion of this software and IC.
With reference to figure 1, introduce the rough schematic view of Communications System Segment 100.Fig. 1 represents to close with antenna system 103 mutual coupling, and the base station 101 of covering is provided for the user in the general overlay area.Described antenna system 103 is the sector gain systems with 3 sectors 107,109,111, and each sector is general to cover 120 degree, although other that form array in the overlay area are arranged, for example 6 sectors or multiple antenna etc. are suitable.Usually, the base station will provide diverse signal each sector to antenna, and may provide multiple signal to arrive one or more sectors.Even when using omnidirectional antenna, the base station also will often need provide multiple signal to arrive the omnirange structure.In any case the base station is all 113 general by dedicated links, for example T1 terrestrial links etc. further are coupled to base controller and switch, and finally are coupled to public switched telephone system.
The base station is mainly handled and is arrived and from subscriber equipment or portable or mobile device user and system or the network radio link based on land or above ground portion.The base station generally can be regarded as comprising and is incorporated into communication and controlled function 119, receiver function 117 and transmitter function 115 by mutual coupling.Each these function is can be quite complicated with the title of itself, and comprises redundant system.Described Receiver And Transmitter function or piece must comprise the dozens of Receiver And Transmitter.These base stations and antenna system are general known or provided by a plurality of providers, Motorola etc. for example, and when according to principle disclosed herein and Change In Design and structure transmitter, can realize improved performance and cost advantage.
With reference to figure 2, will discuss and introduce the simplified block diagram of the preferred embodiment of transmitter 200 now.Fig. 2 transmitter uses FTM for power amplifier is redundant, and have and improve performance, the multi-channel transmitter that provides proper signal to drive amplifier in the transmitter, described improvement in performance be since the maximum power that reduces requires or by use that baseband conversion produced by predistorted input signal etc.Multi-channel transmitter is used to describe the transmitter with a plurality of parallel paths and amplifier stage, for example may run into or may especially be fit to amplify transmitter signal or that be applicable to driving TM that transformation matrix (TM) is produced, each TM is preferably simulation or radio frequency line rate matrix, for example Fourier TM (FTM) or Bu Tele matrix.Improved performance is produced by the maximum power requirement by the peak value of restriction baseband signal and the reduction that average proportions is finished, described baseband signal generates the signal that is provided for amplifier successively, and therefore generation is exaggerated signal, or by the predistortion baseband signal is produced for input signal is offered amplifier, described predistortion makes unwanted result be offset amplifier, is perhaps produced by other possible Base-Band Processing technology.Compensate function is an add ons of Base-Band Processing, and described compensate function compensation baseband signal is with solution arrival amplifier or by the changeability in a plurality of signal paths of transmitter.Carry out described processing at the base band place, rather than handle input signal as usually, they are at first by base band TM, and are processed, and by the second base band TM, each base band TM is digital baseband FTM preferably then.
Use the simulation fourier transform matrix for power amplifier is redundant, and have a multi-channel transmitter that improves performance and comprise device 201, be used to handle baseband signal so that be provided for driving the suitable low level signal of described multi-channel transmitter amplifier stage.This device comprises transformation matrix (TM), preferably be coupled at least one input signal, and be coupled to the digital Fourier TM (FTM) 203 of processing unit 205 therefrom, described processing unit 205 is carried out Base-Band Processing so that revised signal to the two TM are provided, the 2nd preferably opposite with FTM 203 FTM 207, described the 2nd FTM 207 decompose the limited output signal of peak values to provide the output baseband signal to frequency mixer 209.Described frequency mixer 209 is transformed to the radiofrequency signal that is coupled to first simulation or RF FTM 211 with these baseband signals, and described first simulation or RFFTM 211 provide the amplifier input signal that comprises described radiofrequency signal phase-shifted version combination.These amplifier input signals are exaggerated device 213 and amplify, the output signal that is exaggerated then is decomposed, perhaps may or reconfigure more accurately by the radio frequency or the second simulation FTM 215 so that be provided for the driven antenna structure, 103 transmission signal 251 for example.
Below, majorities most or all residual matrixs all will be supposed in the base band employed TM among the employed TM and radio frequency, for example FTM 211,215th, preferred embodiment FTM.But, also exist multiple other forms of TM to work well equally.For example, known Bu Tele matrix will be worked well equally.Note, for optimal performance, for the input and output matrix that surrounds amplifier 213 selects the TM of what form all will determine the matrix form that should use for the whole advantages that realize the principle of the invention and design in base band.In addition, base band TM is driven for input, and input, and therefore produce signal for output export very importantly, and this is driven for input corresponding to RF TM, input, and so send the signal that they generate, the mode of output for output.
In any case in more detail, FTM 203 and FTM 207 preferably are combined in the digital FTM that realizes in the software by digital signal processor (DSP) or application-specific IC (ASIC) or its.FTM 203 is coupled at least one input signal 217, and be preferably in a plurality of inputs and be coupled to a plurality of sort signal 217-219, and provide a plurality of output signals or FTM output signal 221, wherein according to the FTM technology that below will further discuss, each described output signal comprises the combination of one or more input signal phase-shifted version, and preferably includes the combination of a plurality of input signals.Described input signal is preferably planned the baseband signal transmitted on one or more radio channels, channel is interpreted as that here plan is in particular coverage or one or more carrier waves of covering are provided for particular coverage.
Typical example is a plurality of input signals, and each comprises plan on one or more carrier frequencies, and in a mountain area of a plurality of sectors, for example the sign indicating number of 107,109 or 111 interior transmission divides time-division, or frequency division multiple access baseband signal.Notice that FTM can have the available input of Duoing than available input signal.In this example, directly stop remaining or unnecessary input with suitable resistance.In this case, described output FTM will have the many output of specific output signal, and stop unnecessary output once more.For example, use 4 * 4 matrixes usually, represent four inputs and four outputs.In this case, if transmitter is driving three sector antenna systems, for example 103, each FTM input and an output will be terminated in the array so, and other three are coupled to or provide actual signal.
Although the CDM array may be typically, but, institute modulates and the particular form of channel access no matter using, principle discussed herein and design all will have application and favourable equally, certain described modulation can bear or reach this degree so that modulation can be born by Base-Band Processing for example caused distortion of peak-limitation or predistortion.For example, modulation except CDMA and cut-in method, for example TDMA or FDMA, what be used to differently therefore that the baseband signal of GSM, GPRS, EDGE, TETRA, iDEN, CDMA, W-CDMA, CDMA2000,2.5G or 3G will work equally is good.
Device 201 and concrete processing unit 205 also comprise a plurality of Base-Band Processing functions, and each described Base-Band Processing function is coupled in described a plurality of output signal 221.Described processing unit handles and revises each output signal from FTM 203 in the following manner according to pre-defined algorithm, make them and linear power amplifier is more compatible or littler to the demand of linear power amplifier.The example of this processing comprises or the whole peak value that limits each described a plurality of FTM output signal, perhaps uses the described a plurality of output signals of pre-defined algorithm predistortion so that a plurality of revised output signals 225 to be provided.
As below will going through, with reference to figure 3-6, preferred method for limiting is the amplitude limit function that limits each described FTM output signal peak value by use.The preferably so-called fenestrate amplitude limit function of this amplitude limit function, described fenestrate amplitude limit function have reduced the probability of peak value above the predetermined value of each revised output signal 225 according to the predetermined function peak limiting.Show,, can realize the further improvement of amplifier or transmitter performance so if described amplitude limit function back connects the undesired signal of filter to reduce to be produced by described amplitude limit function that is coupled to described amplitude limit function output.In some example, when the connection of described filter back is coupled to described filter output and further limits the second amplitude limit function of the filtered version peak value of each FTM output signal, realized added improvement.This generally is regarded as slight amplitude limiter, wherein only cuts out or limit the very fraction of any peak value.
In the example that uses predistortion, processing unit 205 uses predistortion function correction output signal, described predistortion function according to predetermined function with each described predistorted output signal, reduce to effect, wherein to these non-linear simulations of carrying out certain form by the different non-linear caused transmission signal of amplifier.For example, known amplifier gain will descend at higher incoming signal level place, and it is often similar to anti-index to transmit curve.Therefore can reduce thus owing to the effect of amplifier nonlinearity according to shaping of index deltoid or predistorted input signal output signal.This can be called as the linearisation of amplifier or make amplifier linearisation.Notice that predistortion generally includes phase predistortion and amplitude, this is because also will be along with input signal amplitude changes by the phase shift of amplifier.
In any case, revised output signal 225 preferably directly is coupled to or is coupled to the 2nd FTM207 by compensate function 206, therefore also be coupled to the 2nd FTM207 by output signal 227 after the correction that compensates, described the 2nd FTM207 decomposes revised output signal, so that at least one to be provided, best a plurality of output baseband signal 229, each described output baseband signal are corresponding one by one and correspond respectively to input signal 219-217, and wherein turn in sequence is the result that FTM handles.Therefore, for each input baseband signal at FTM203 place, will there be an output baseband signal at the FTM207 place.
Described compensate function 206, error correction matrix preferably, be set up and be incorporated into a plurality of correction back output signal shown in Figure 2 by mutual coupling or from one in the output baseband signal of described the 2nd FTM 207 (not marking), and preferably operationally compensate this group signal according to feedback signal 226, it is coupled and comprises described a plurality of revised output signal or described output baseband signal.When described compensate function 206 fashionable by mutual coupling between processing unit 205 and the 2nd FTM 207 as described, it is set to can be preferably according to described feedback signal 226, for the variation in a plurality of paths between described compensate function and the sampler discussed below operationally compensates described a plurality of revised output signal.When described compensate function is coupled to output baseband signal (not marking) and before frequency mixer 209 time, it operationally is the described output baseband signal of compensating for variations in a plurality of paths between the compensate function of coupling here and the described sampler, preferably according to described feedback signal 226.Described compensate function can be from simple relatively situation, for example where be positioned at and fix or transformable gain and phase compensation are applied to from described a plurality of each signal of one revising back output signals and described output baseband signal by feedback signal according to described compensation, to having feedback information and possible about modulation type, symbol rate, the situation of the relative complex of feedback such as Base-Band Processing forward direction information.
In any case described output baseband signal is coupled to frequency mixer 209, be transformed to a plurality of radiofrequency signals 231 there.As described, described frequency mixer 209 comprises a plurality of frequency mixer arrays, each described frequency mixer array is coupled to from the output baseband signal of compensate function in described the 2nd FTM or the option means, and each described frequency mixer array provides the corresponding signal of radiofrequency signal 231.With reference to the top frequency mixer and consider that each is all similar, digital to analog converter 233 will be exported baseband signal and be converted to analog signal, behind described digital to analog converter 233, carry out suitable filtering (clearly not marking), and this analog signal and LO signal 235 are provided for generally well-known frequency mixer 237, be used for described analog signal is upconverted to the radio frequency that is suitable for transmitting, and the back connects frequency and selects gain stage 239 as usually known, so that generate and provide radiofrequency signal 231.Each described output baseband signal by from base band frequency or approximately the bit rate of per second one megabit be converted to analog signal, for example transmit radio frequency and be 800 to 1000MHz or 1.8GHz to 2.2GHz or higher.
In described multi-channel transmitter, also comprise the first simulation FTM 211, the described first simulation FTM 211 is coupled at least one, best a plurality of radiofrequency signal 231, and a plurality of amplifier input signals 241 operationally are provided, and each described amplifier input signal 241 comprises the phase-shifted version combination of described one or more radiofrequency signals.They are provided for power amplifier 213, described power amplifier comprises a plurality of amplifiers that are coupled to described a plurality of amplifier input signal 241, each amplifier has and is coupled in the described amplifier input signal one input, and wherein each these signal is preferably corresponding to described of revising back output signal 225.Each amplifier operationally amplifies described amplifier input signal, and the output signal that is exaggerated is provided, and wherein said a plurality of amplifiers provide the output signal 249 after a plurality of amplifications.
In described transmitter, also comprise sampler 245, described sampler is used to described compensate function is returned in a plurality of part couplings that comprise the group of described a plurality of amplifier input signal 241 (as shown) or described a plurality of amplification back output signals 249 (not marking), each described part is represented an input or the output signal among described a plurality of amplifier input signal 241 and described a plurality of amplifier output signal 249 one, states a plurality of parts corresponding to described feedback signal in described compensate function place.In other words, comprise that the sampler that slightly is coupled strip transmission line can be positioned at the side of inputing or outputing of amplifier, perhaps be positioned at the output of described the 2nd RF FTM215 thus, and amplifier input signal 241 shown in therefore being coupled to or the output signal 249 that is exaggerated, the transmission signal 251 that does not perhaps mark.No matter where be positioned at, these a plurality of parts all are coupled to frequency mixer 253, and are down-converted to base band by local oscillator (LO), and they are converted to digital signal by analog to digital converter 255 there.These digital signals jointly comprise described feedback signal 226.
With reference to compensate function 206 or error correction matrix, can as following, determine again.For this reason, consider such system, XA=Y+E, wherein X is an input matrix 233, and Y is an output matrix 243, and A is unknown matrix 247, and E is the mistake matrix.Can in the least square mode, find out described matrix A by separating described system equation XA=Y+E for E is minimized.Separating of this equation system is A=(X
TX)
-1X
TY.In our example, output matrix 243 is the output (being designated as Y in Fig. 2) of a described RF FTM 211, and input matrix 223 is the output (being designated as X in Fig. 2) of described processing unit 205.Described matrix A or unknown matrix 247 are described second base band FTM 207, described upconversion path (233,237,239) etc., and the combination of a described RF FTM 211 (being designated as A in Fig. 2).If any mistake needs compensation, so described compensate function 206 or error correction matrix (are designated as A in Fig. 2
-1) the compensation upconversion path frequency response and when base band FTM 207 effect is little, compensate imbalance among the described RF FTM.Can find this compensate function or error correction matrix by the actual test system of using suitable test signal by sample plot.In fact, little pilot tone is the proper signal that is used to distinguish different paths.
Last element of transmitter is to be coupled to described a plurality of amplifications back output signal 249, sends signal and is used to drive corresponding one by one and corresponds respectively to the radio frequency or the simulation FTM 215 of best a plurality of transmission signals of a plurality of antennas 251 of described input signal 217-219 to provide one to one corresponding at least one of described at least one input signal 217.Basically, described simulation FTM 215 decomposition are exaggerated back its combination of the phase-shifted version of the radiofrequency signal of original contents separately.Notice that when signal passed two FTM, they also will be by turn in sequence.Just as known, the signal that is provided to described simulation or RF FTM is arranged very important in the mode identical with described input signal 217 to 219.Although the suitable operation to preferred embodiment is very important, this is very trifling for those of ordinary skill, and is realized by the suitable connection of described a plurality of frequency mixers 209.Note, the matrix that the disclosed and principle introduced and design are mainly used in any size, and described matrix not need as here be square matrix.Known analog FTM, and simulation FTM can have different sizes, for example from provider, 4 * 4 matrixes of Anaren Microwave for example.Described FTM is a series of hybrid combining devices, and described hybrid combining device is at specific phase angle combinatorial input signal.The typical bandwidth that is used for described matrix is the 200MHz with 0.5dB insertion loss.
In any case, as institute introduce and discuss like that, preferably be provided with and construct described multi-channel transmitter, so as on multiple sector transmission yard branch, time-division, or frequency division multiple address signal.Described input FTM and output FTM preferably have the digital FTM of one or more base-band input signals at described input FTM place, and described processing unit preferably includes fenestrate amplitude limit function or predistortion function or the combination of the two, and described radio frequency FTM 211,215th, simulation or RF FTM.By this way, in order to limit to the demand of described a plurality of power amplifiers or in order to provide pre-distorted signals to the amplifier that is offset by the undesired signal that described amplifier generated, therefore and reduce respectively that maximum power requires or skew does not need the result to improve the performance of described multichannel amplifier therefrom, sentence the form that expression is input to the signal of described a plurality of radio-frequency amplifiers in base band and handle described baseband signal.
With reference to figure 3, to discuss and introduce the block diagram of the preferred embodiment of device 201 parts now, described device 201 is handled the low level signal of baseband signal to be provided for amplifying, described low level will be improved the performance of multi-channel transmitter, more specifically, reduce to be applicable to peak value and the average ratio or the maximum power requirement of above-mentioned transmitter.Shown in and described device mainly or basically is applicable to and preferably realize with the form of integrated circuit, for example in the ASIC that comprises DSP and support hardware etc.Some discuss nature will be repetition, and some will introduce multiple function and the processing that briefly introduces previously in detail.Here the device 201 of Jie Shaoing has reduced the maximum power requirement of multi-channel transmitter, and by reducing to represent that the signal peak and the average ratio (PAR) that will be provided to the amplitude characteristic of the signal of each power amplifier in the described multi-channel transmitter realize.Device 201 specific embodiment can with predistortion function, introduced above for example or its sub together or combination use.The transition matrix of being mentioned above described device comprises (TM), described TM is coupled at least one input signal 217, preferably is coupled to a plurality of input signal 217-219.Described TM is used to provide the preferably digital FTM 203 of a plurality of output signals 221, and wherein each signal comprises described one or more input signal phase-shifted version combination.In addition, comprise processing unit 205 in described device 201, described processing unit is coupled to described a plurality of output signal 221, and operationally according to each described output signal of pre-defined algorithm correction, so that a plurality of revised output signals to be provided.More particularly, in described embodiment, described processing unit is used to limit each peak value of described a plurality of output signals.Described revised output signal is coupled to the 2nd TM, the input of the second digital FTM 207 preferably, (see figure 2), described the 2nd TM operationally decomposes described revised output signal 225, so that a plurality of output baseband signals 229 to be provided, described output baseband signal 229 is applicable to and generates a plurality of low level signals, in particular for driving the radiofrequency signal that therefore described simulation FTM 211 also drives described multi-channel transmitter, each described output baseband signal is corresponding to a described input signal.
Described device also comprises compensate function (not marking), just as previously mentioned, described compensate function is set up and mutual coupling is incorporated into one that comprises described a plurality of groups of revising back output signals 225 or described output baseband signal 229, so that compensate described a plurality of suitable group of revising back output signals or described output baseband signal, make described output baseband signal be applicable to that generation will improve the low level signal of described multi-channel transmitter performance.More specifically, described compensate function operationally is the described a plurality of corrections of the compensating for variations in a plurality of paths in described multi-channel transmitter back output signal when being incorporated between described processing unit and described the 2nd TM by mutual coupling, preferably according to feedback signal, wherein said feedback signal is from described multi-channel transmitter.When being coupled to described output baseband signal, described compensate function compensates those signals in an identical manner for identical reason.Operationally described a plurality of correction back output signals or described output baseband signal are gained and phase compensation by means of the compensate function among the concise and to the point embodiment who discusses of Fig. 8 below.
Described device, specifically be described digital FTM 203, preferably be coupled to a plurality of input signals, each described input signal comprises that plan is in radio channel, for example on the sector in a plurality of sectors or the baseband signal of transmitting on the fan antenna of multiple sector antenna structure, for example sign indicating number branch, time-division or frequency division multiple access baseband signal.Note, just as known, a baseband signal, for example IS-95 CDMA can comprise pilot tone, paging, and synchronizing signal, and to each multiple carrier wave nearly 61 voice or data payload signal.The typical bit rate of IS-95 baseband signal is about 1.3M bits per second, and other versions of CDMA can reach higher.
Such just as represented, described device or processing unit 205 preferably include amplitude limit function 301, and described amplitude limit function comprises the clip block or the operation that are used for each described output signal 221, limit the peak value of each described output signal.The preferably fenestrate amplitude limit function of this amplitude limit function 301, the amplitude limit of carrying out the phase counterweight are so that according to the predetermined function peak limiting, and having reduced peak value will be above each described probability of revising back output signal predetermined value.After filter 303 preferably was connected on described amplitude limit function, described filter 303 was coupled to the output of each described amplitude limit function 301, and reduce by described amplitude limit function caused unwanted, the higher frequency signal.The second amplitude limit function 305 that is coupled to each described filter 303 output is preferably arranged in described filter back, the described second amplitude limit function preferably with amplitude limiter similarly, but further limit each described peak value of output signal 225 afterwards of revising at slighter clip level place.Advantageously, described device 201 is suitable for realizing with the integrated circuit form, for example is apprised of DSP or the ASIC or the combination of the two of the those of ordinary skill approval of principle disclosed herein and design.
Can pass through following matrix description 4 * 4 digital FTM:
|
Vout1 |
Vout2 |
Vout3 |
Vout4 |
Vin1 |
0.5∠0 |
0.5∠-90 |
0.5∠-90 |
0.5∠-180 |
Vin2 |
0.5∠-90 |
0.5∠-1?80 |
0.5∠0 |
0.5∠-90 |
Vin3 |
0.5∠-90 |
0.5∠0 |
0.5∠-180 |
0.5∠-90 |
Vin4 |
0.5∠-1?80 |
0.5∠-90 |
0.5∠-90 |
0.5∠0 |
Also can use following formulate:
Vout1＝0.5·Vinl∠0°+0.5·Vin2∠-90°+0.5·Vin3∠-90°+0.5·Vin4∠-180°
Vout2＝0.5·Vinl∠-90°+0.5·Vin2∠-180°+0.5·Vin3∠0°+0.5·Vin4∠-90°
Vout3＝0.5·Vinl∠-90°+0.5·Vin2∠0°+0.5·Vin3∠-180°+0.5·Vin4∠-90°
Vout4＝0.5·Vin1∠-180°+0.5·Vin2∠-90°+0.5·Vin3∠-90°+0.5·Vin4∠0°
Relation between described matrix or described output signal Vout of described formulate and the input signal Vin.Proved and suitably directly in DSP, carried out these computings.
Introduce described amplitude limit function in more detail in conjunction with Fig. 4 now.At first, we will discuss certain definition so that the reader understands described amplitude limit process better.The peak factor of signal is defined as the maximum-to-average-power ratio rate.Although know the described peak value of signal and average ratio (PAR) of great use, integral distribution curve (CDF) provides the better understanding of truly adding up essence about envelope power.With following formula definition CDF and complementary integral distribution curve CCDF.
CCDF＝1-F(x)
In essence, CCDF shows drawing of PAR from 0 to 100%.Because peak level and very important, so use distribution curve very convenient at the time quantum of described peak factor place or above consumption.Briefly, the shape of CCDF is very important.For disclosed purpose, peak factor is defined as 0.01% PAR.For example, the PAR of 10dB will represent that the probability signal power of existence 0.01% will be greater than the above 10dB of average power.
Wish the peak value of described amplitude limit function restricting signal, and generate as far as possible little noise or interference or unwanted signal power simultaneously.In order to generate the low limitation of interference elimination measuring, the discontinuous minimum in the waveform is very important.Described fenestrate amplitude limit algorithm is the good method that satisfies these requirements.In Base-Band Processing, digitally carry out amplitude limit, make that data can be processed in non real-time.The various ways of fenestrate amplitude limit algorithm all will be applicable to this purpose.With reference to figure 4, introduce the algorithm that uses two threshold value restricting signal 401 peak values.The soft limiting threshold value is designated as Tclp, and the hard-limiting threshold value is called as Tsat.The user determines the value of these threshold values according to the particular system sample plot of setting up.The first step of window amplitude limit algorithm is the peak value that scanning surpasses described amplitude gate limit value in the input waveform.In case identified the signal peak that surpasses described threshold value, will use hard-limiting or soft limiting.The peak value index is designated as t among Fig. 4
Max407.Under the soft limiting situation, with the peak value part of contrary Hanning window 403 curling waveforms.As those of ordinary skills will realize, the window of multiple other types also will suitably be worked.Following equation is represented Hanning window, h
j, window amplitude limit function, w
j, and window length, L.
h
j＝[1-cos(2πj/(L-1))]/2
w
j(n)＝1+(c-1)·h
j
j＝0，1，2，...，L-1
Calculate described window amplitude limit function, make t after curl described window and signal
MaxThe peak value at place will equal the Tclp level, represent at 405 places.Therefore, surpass Tclp but be lower than the peak value of Tsat for any, the customization window will be calculated and be applied to local maximum is reduced to the Tclp level.Following weighting is substituted into top equation will calculate desirable window function.
Because the part of a filtering signal, thus will occur near peak region that some are discontinuous, but they should be littler than those relevant with hard-limiting.
At certain point, may find that described window amplitude limiter works hard, make to generate than the more a plurality of interference of hard-limiting.If such situation, using constant amplitude limit weighting rather than variable limit weighting so will be best measure.Following equation has been described the amplitude limit weighting of this situation.
Under the hard-limiting situation, will change described signal value and mate described Tclp threshold value.
Form with DSP realizes filter 303, satisfies following general property.Described filter should have flat band and lead to, to keep the characteristic of any previous channel or pulse shaping filter.In addition, need rapid excessive frequency band and suitable decay will satisfy channel rules to guarantee filtered waveform.
With reference to figure 5, be expressed as the power spectral density of the point of 1-4 in the presentation graphs 3.In Fig. 3 device 201, use two amplitude limit functions 301,305.The threshold value that the first amplitude limit function is set is a low level, to produce heavy amplitude limit.To the output filtering of first amplitude limiter, to eliminate the interference that is produced by heavy amplitude limit function.After filtering, the signal quilt that obtains is amplitude limit once more.The threshold value that the second amplitude limit function is set is with the described signal of amplitude limit slightly.Because described second amplitude limit certain frequency spectrum will occur and increase again, but because amplitude limit is slight, so should accept.It is that cost increases reducing of peak value and average ratio with slight deterioration in each input adjacent channel power (ACP) of power amplifier that this method allows the user.But if described power amplifier is operated in its rated power, the non-linear of power amplifier may will produce the adjacent-channel interference that surpasses each input signal so.Therefore, the actual ACP performance in antenna output place may not worsen because comprising the described second amplitude limit function.On the contrary, the caused PAR of the second amplitude limit function reduces to cause the improved ACP of antenna output place, although the ACP of power amplifier input worsens.
Use the output of the first window amplitude limiter, waveform 1, the standard I S-95 channel filtering that can find to have the 3dB corner frequency of 590Khz and 45dB decay is at any window amplitude limit or the further filtering described frequency spectrum of shaping how in the past.The PAR of primary signal 0.01% is 9.75dB.Use amplitude limit function 301 with of the rising of described signal from 0.01%PAR amplitude limit energy outside 4.57dB has caused the band shown in the waveform 2 of 9.75dB.The signal that is limited then is filtered, produces the frequency spectrum shown in the waveform 3.Though ACP is fine after filtering, peak value and average ratio have been increased to 0.01% 5.62dB of place.The described signal of amplitude limit makes 0.01% PAR turn back to 4.66dB for the second time, but has generated the additional interference shown in the waveform 4.Notice that described interference still is lower than the original noise radix of being set up by channel model.
Fig. 6 represents how peak value and average ratio change in the entire process chain.Table with reference to following different information summary of being correlated with Fig. 6 waveform.The change of peak value and average ratio can be decomposed variation in the maximum power and the variation in the average power, as shown in the table.Use waveform 1 as a reference, see that the 301 performed amplitude limit operations of amplitude limit function shown in the waveform 2 have reduced the maximum power of signal widely, and average power is reduced to littler degree.After to signal filtering, because the decay of filter band in logical, the average power of waveform 3 descends slightly, but because the change of signal in the complex plane, maximum power has increased.Reduce in order to recover some PAR that loses, signal is by the amplitude limit second time, although very slight.The result is the reducing of other dB in the maximum power, and average power remains unchanged relatively, shown in waveform 4.
|
Point 1 |
Point 2 |
Point 3 |
Point 4 |
Peak power (dB) |
0 |
-6.430 |
-5.754 |
-6.909 |
Feng Zhigongshuai @0.01% (dB) |
0 |
-6.435 |
-5.655 |
-6.629 |
Average power (dB) |
0 |
-1.255 |
-1.525 |
-1.539 |
Use peak value to reduce the input of waveform, can measure following improvement as power amplifier.At the rated output power place, the waveform that is limited has 6 to the better ACP performance of 7dB, and keeps and the identical efficient of limiting waveform not., be higher than rated power 3dB ground operate power amplifier product and caused and run on rated power as input ground with the waveform that is limited, have the not identical ACP of power amplifier of limiting waveform.3dB more highland driving power amplifier causes 50% efficiency improvement.These results are typical, are changed but may what return according to power amplifier.
As mentioned above, the device of handling baseband signal comprises processing unit, in one embodiment, described processing unit also comprises predistortion function or the predistorter according to each described output signal of function predistortion, reduces the non-linear induced effects by multi-channel transmitter.In simpler known embodiment, known pre-distortion algorithms, and for example during generating amplifier, be stored in the memory.This system or predistorter provide the error correction of minimum number, and this is because of its incompatibility and can not solves for example temperature, the variation in the caused PA characteristic of time and load variations.Classical example is the static table of comparisons.The described table of comparisons is the table of the contrary value of expression PA translation function.Especially, for amplitude predistortion, should be and corresponding the input range that requires output amplitude table together.Should table ' output amplitude is looked into desirable output based on ' known input ' in the part, to produce ' input range, desired ' by the predistortion input range ' of part from table.This provides from ' known input, to ' predistortion input range, conversion.There is similar table in phase bit position for predistortion.Should in factory, the table of comparisons be deposited in the memory, perhaps when configuration device, load.This predistortion function is known.
In complex embodiments more, by down-conversion and feed back to the output that the Digital Signal Processing territory provides PA, to adapt to pre-distortion parameters.This system provides than the more error correction of non-adaptive system.Here, can produce the model in path forward based on the digitized version of known base band input and PA output.Then, produce the upset of described model forward, i.e. predistortion function.Produce this upset by the sampling basis according to sampling.This system will follow the tracks of the variation in the PA translation function, and therefore more error correction are provided.Used filtered tapped delay transmission line (TDL) method to simulate the path forward of PA, in following document, introduce this method: Proc.IEEEVeh.Technol.Conf., 2001, Sean McBeath among the pp 2243-2247, DannyPinckley, and J.R.Cruz, " W-CDMA Power Amplifier Modeling ".Filtered TDL model representation is as the PA of linear filter, after connect the tapped delay transmission line model, after connect other linear filters.In brief, filtered TDL model is that the height of PA is accurately based on the model of memory.But, can use any model here, common selection is the simple multinomial model or the table of comparisons.Importantly allow to change parameter.Model based on complicated memory is prepared for more error correction of the PA characteristic of use predistortion.
The performance map of Fig. 7 presentation graphs 2 transmitters, wherein processing unit 205 carries out predistortion according to memoryless multinomial model.Use above-mentioned definite compensate function or matrix, two carrier wave W-CDMA signals 701,703 pass this predistortion function, and pass described compensate function 206.Pass the 2nd FTM 207 then, filter with the simulation upconversion path, passes a RF FTM 211 then, uses the non-linear PA that simulates 213 of multinomial that has in the amplitude of obviously returning, and preferably passes the 2nd RF FTM 215.Described predistortion model or contrary PA characteristic are modeled as the 10 rank multinomials of po=10 in the equation.Amplifier is represented as 11 rank multinomials, po=11 in the equation.Described multinomial is defined as follows:
In this simulated experiment, PA has only amplitude compression, does not therefore need the phase place error correction.Therefore, only need a multinomial.10 rank multinomials are contrary being similar to of 11 rank multinomials.The output of the 2nd RF FTM should have all advantages of predistortion.Fig. 7 have predistortion 707 by performance and do not have predistortion 705 system representation this point.From Fig. 7, can be clear that pre-distorted signals is passed the FTM sequence by transmission correctly, with the result who obtains wishing, i.e. the intermodulation at amplifier place reduces, and the intermodulation of therefore output place reduces.Owing to be used for the model of described amplifier, relatively significantly analog result is a part, and described model is that almost ideal error correction is prepared.In real system, may not realize the so improvement more, but if this has represented amplifier model well, and therefore predistortion function is very accurate, what can be realized so.
The block diagram of the optional embodiment of Fig. 8 presentation graphs 2 transmitters.Have with the clauses and subclauses of Fig. 2 same tag just number or piece work and presentation graphs 2 in it identical clauses and subclauses, and no longer further discuss.Compensate function 806 differences, and before frequency mixer 209, be coupled to output baseband signal from FTM206, and to the variation in a plurality of paths in the multi-channel transmitter, operationally each described output baseband signal is carried out gain compensation 809 and phase compensation 811 according to the feedback signal 826 from dsp controller 813, described feedback signal derives from the multi-channel transmitter at sampler 245 places.This method is very useful in such system, and described system has the minimum frequency selectivity in a plurality of paths on the interested frequency, therefore needs the minimum frequency selective error correction.Under this situation, amplitude and phase place error correction can be used as compensate function.Certainly, can carry out described compensate function on the end inputing or outputing of the second base band FTM 206.
As summary, and under the situation of the method that we have discussed by means of installation drawing, provide following introduction to method for optimizing.We have discussed and have introduced the method for improving performance in the multi-channel transmitter, and described method is to redundant transformation matrix, for example fourier transform matrix of using of power amplifier.Described method comprises provides a plurality of output signals, and each described output signal comprises the combination of one or more input signal phase-shifted version; According to the pre-defined algorithm correction, preferably each described output signal is carried out amplitude limit, predistortions etc. are to provide a plurality of revised output signals; And decompose described revised output signal then, so that one or more output baseband signals to be provided, each described output baseband signal is corresponding to a described input signal.In described method, also comprise best according to feedback signal, to a process that compensates in the one group of signal that comprises described a plurality of revised output signal or described output baseband signal, described one group of signal comprises what signal depends on described compensating operation or process where carrying out in described method.
In order to use said method in transmitter, described method also comprises each described output baseband signal is converted to radiofrequency signal, so that one or more radiofrequency signals to be provided; Generate a plurality of amplifier input signals, each described amplifier input signal comprises the combination of described radiofrequency signal phase-shifted version, and wherein said amplifier input signal is corresponding to described revised output signal; The power amplifier that use has a plurality of amplifiers amplifies described amplifier input signal, so that the output signal after a plurality of amplifications to be provided, wherein each amplifier has the input of being coupled in the described amplifier input signal one, and described of being amplified to output in the signal is provided; Described a plurality of amplifier input signals or described a plurality of a plurality of port coupling covering of one of amplifying the back output signal are repaid process, each port is represented described a plurality of amplifier input signal and described a plurality of of amplifying the back output signal, and wherein said a plurality of ports are corresponding to described feedback signal; And decompose the output signal after described a plurality of amplification then, so that the one or more transmission signals corresponding to described output baseband signal to be provided one to one.
The described process of a plurality of output signals that provides is preferably used the first digital FTM, and the revised output signal of described decomposition is used the second digital FTM, the wherein said first digital FTM is coupled to a plurality of input signals, each described input signal comprises that the sign indicating number that is used for transmitting divides on radio channel, time-division, and in the frequency division multiple access baseband signal one.Described step according to each described output signal of pre-defined algorithm correction also comprises according to predetermined function predistortion or each described output signal of amplitude limit, and described predetermined function is to reduce by the effect of the transmission signal that each described amplifier nonlinearity produced or reduce will be above the probability of predetermined value for each described revised output signal peak value.To reduce the unwanted signal that produces by described filtering to the step of each described output signal filtering after the amplitude limit.
An aspect, compensation process or process comprise according to feedback signal, to a plurality of signal paths between revised output signal and the output signal that is exaggerated with the described a plurality of revised output signals of compensating for variations in handling.On the other hand, described compensation process also comprises according to described feedback signal, to the described output baseband signal of compensating for variations in a plurality of signal paths between described output baseband signal and the described output signal that is exaggerated and the processing.Note, if described feedback signal comes from described amplifier input signal, (use to described input amplifier signals sampling) so if any, the variable part of described compensation or described compensation can only solve in the signal path variation up to sampled point, and any further compensation, for example being used for the compensation that the signal path by described amplifier changes will be open loop.In one form, compensation comprise to described revised output signal or shown in the compensation of output baseband signal gain and phase place.
Said method and device, and inventive principle and design is attempted and will reduce to use the caused problem of prior art transmitter of TM and conventional Base-Band Processing technology.Use these in baseband signal place development and handle these signals to reduce or to reduce peak value on average remarkable improvement dark green or that showed transmitter performance with the principle of predistortion attribute, described baseband signal has verily represented to appear at the signal on the power amplifier input.
Discussed with having introduced and be used to revise baseband signal and compensate such signal so that the different embodiment of the method and apparatus that promotes to require with the maximum power that is improved transmitter performance and reduction to transmitter.Wish these embodiment or will in a lot of wide area networks, use according to other embodiments of the invention.Use inventive principle disclosed herein and design advantageously to allow or prepare for the multi-channel transmitter of low-cost high practicability, in current and communication system in the future, will need such multi-channel transmitter, and this will help the user and the provider of this system.
Disclosure herein wish to explain formed according to the present invention like this with use different embodiment, rather than limit that it is real, hope and clearly scope and essence.The present invention is only by claim and the modification that may carry out in the present patent application process, with and the equivalent definition.