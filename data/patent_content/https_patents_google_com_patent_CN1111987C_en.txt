Specific embodiment:
The control of power in the spread spectrum communication system comprises the speed of determining unit far away and is that power control thresholding is specified a desired value according to determined speed.Give birth to instantaneous threshold value according to frame quality information and the limited production of power control gate.The energy of a power control group of unit far away emission is compared with instantaneous threshold value, determine power adjustment commands.Power adjustment commands is sent to far unit, and instruction is its power of the corresponding adjustment in unit far.This threshold regulating method has reduced ground far away unit power level and has been higher than the time of essential level, thereby has reduced the hazardous noise in the system.
Put it briefly, the method for power controlling in communication system proposed by the invention comprises the speed of determining unit far away and is the step that power control thresholding is specified a target gate according to the speed of unit far away.
Another embodiment of the method for power controlling in communication system proposed by the invention comprises the energy of determining received signal and determines the far step of the speed of unit.Determine power control gate limit value according to speed, and received energy is compared with power control gate limit value.Then, send a power adjustment commands according to comparative result to unit far away.
The embodiment of the equipment of power controlling in communication system proposed by the invention comprise a speed calculation machine that is used for determining the speed of unit far away with one with the speed calculation machine be connected, be used for basis far the speed of unit determine the target gate computer of target gate.
Another embodiment of the method for power controlling in communication system proposed by the invention comprises that according to statistical property be the step that power control thresholding is specified a target gate.
Fig. 1 is for receiving the far block diagram of the preferred embodiment of the base station receiver 100 of unit emitted power control group.The orthogonal coding spread spectrum digital signal 130 that is received by reception antenna 131 becomes in-phase component 140 and quadrature component 138 by despreading and demodulation 136 after receiver 132 amplifies.Then, component 138,140 through the digital sampling point of despreading is divided into a series of predetermined groups (as a series of 64 sampling point length groups) of length that are made of some signal samples, input is the quadrature decoder device of quick Hadamard (Hadamard) converter 142,144 forms respectively, thus these two orthogonal intersection code signal components respectively by despreading become a plurality of signal components 146,160 through despreading (for example input be 64 sampling point length groups the time just produce 64 through despread signal).In addition, Walsh (walsh) the affix symbol that the orthogonal code that each is specific that the output signal 146,160 of each converter all has a correspondence identifies from one group of mutually orthogonal sign indicating number (for example, the input be 64 sampling point length groups the time, can the affix data symbol of one 6 bit long is corresponding with the converter output signal, with the orthogonal code of corresponding those the 64 specific bit long of indication converter output signal).From each branch roads output of receiver 100 respectively organize the energy value addition in adder 164 that has the identical walsh affix the signal 156, draw one group of energy and value 166.The energy value that has affix i in this group energy and the value 166 is corresponding to producing this group energy and the signal sampling point group of value 166 and the tolerance of i the corresponding credibility of Walsh symbol.Have the energy of corresponding affix and the group of value and deliver to soft-decision metrics generator 168, determine the single metric of each encoded data bits, thereby obtain single group set soft-decision data 170.The set soft-decision data 170 by deinterleaver 172 deinterleavings after, carry out the seemingly decoding of final maximum by decoder 176 again.
Fig. 2 is to the block diagram of the preferred embodiment of the CDMA transmitter 200 of unit transmitting power adjustment order far away.In a preferred embodiment, power adjustment commands is a power control bit, and for example: " 0 " bit indication far increases average output power in the unit, and " 1 " bit indication far reduces average output power in the unit.Transmitter 200 preferably one resemble the TIA/EIA/IS-95A defined transmitter.Transmitter 200 comprises convolution coder 212, interleaver 216, orthogonal encoder 220, modulator 224, upconverter 228 and antenna 229.
During operation, signal 210 (traffic channel data bit) is received with specific bit speed (as being 9.6 kilobits/second) by convolution coder 212.The bit of the traffic channel data 210 of input typically has voice, the clear data that is transformed into data by vocoder, or the combination of these two kinds of data.The encryption algorithm (as convolution or block encoding algorithm) that after a kind of being convenient to of convolution coder 212 usefulness with data symbol by maximum likelihood decoding is data bit is encoded into data symbol with regular coding speed with the data bit 210 of input.For example, convolution coder 212 is weaved into the regular coding rate (promptly 1/2) of two data symbols to input data bit 210 (input rate is 9.6 kilobits/second) coding with a data bit, then the speed of convolution coder 212 dateout symbols 214 is 19.2 Kilo Symbols Per Seconds.
Then, data symbol 214 input interleavers 216.216 pairs of inputs of interleaver data symbol 214 carries out interweaving of symbol level.In interleaver 216, data symbol 214 is imported the matrix of the predetermined length piece of a specified data symbol 214 one by one.Data symbol 214 connects a row ground with row and inserts memory cell in the mode input matrix of matrix, and the mode that connects delegation's emptying matrix with delegation is exported from the memory cell in the matrix.Usually, matrix is a square formation, and line number equals columns; Also can select other forms of matrix for use then, with the output distance that interweaves between the data symbol that does not interweave that increases input in succession.Interleaver 216 is with data symbol rate (i.e. 19.2 Kilo Symbols Per Seconds) output the data symbol 218 through interweave identical with input.Predetermined length by matrix predetermined data symbolic blocks depends on the maximum data symbol number that can launch with the predetermined symbol rate in a scheduled time length transmission block.For example, if the predetermined length of transmission block is 20 milliseconds, then the predetermined length of data symbol block is that 19.2 Kilo Symbols Per Seconds multiply by 20 milliseconds, equals 384 data symbols, has stipulated one 16 * 24 matrix.
Data symbol 218 input orthogonal encoders 220 through interweaving.Orthogonal encoder 220 with each through interweaving and ciphered data symbol 218 and an orthogonal code (for example being 64 yuan of walsh codes) exclusive-OR.For example, in 64 yuan of orthogonal codings, through interweave and ciphered data symbol 218 each all use one to have the orthogonal code of 64 symbols or its radix-minus-one complement to replace.These 64 yuan of orthogonal codes are preferably corresponding with each walsh code that draws from 64 * 64 hadamard matrix, and walsh code is only corresponding with delegation or row in the matrix.Orthogonal encoder 220 is output and data symbol 218 corresponding walsh code or its radix-minus-one complements of importing with mark-hold speed (for example being 19.2 Kilo Symbols Per Seconds) 222 constantly.
The sequence of walsh code 222 is modulated into the form that can transmit on a communication channel by modulator 224.Spreading code is user's special symbol sequence exclusive user code in other words conj.or perhaps, selects speed (chip rate) (for example being 1.228 million slices/second) output with fixing sheet.In addition, encrypt generation I channel and Q channel code frequency expansion sequence through resulting every of user code spread spectrum coding by a pair of short pseudo noise code (so-called " weak point " be dried relatively long code).I channel and Q channel code frequency expansion sequence are controlled by the power that drives the pair of orthogonal sinusoidal signal this offset of sinusoidal signal are carried out bi-phase modulated.This offset of sinusoidal output signal is transformed into rf frequency through upconverter 228 additions, bandpass filtering, again through amplify, after the filtering by antenna 229 radiation, finish the transmission of channel data bits 210.
Fig. 3 illustration in cdma system, control the equipment 300 of reverse channel power according to the preferred embodiment of the present invention.Equipment 300 comprises accumulator 301, comparing unit 303, instantaneous thresholding computer 305, speed calculation machine 307 and target gate computer 309.The working condition of equipment 300 is as follows: the input speed signal computer 307 that receives from unit far away calculates the far speed of unit (following will the detailed description in detail) by it.The ground far away unit speed input target gate computer 309 of speed calculation machine 307 outputs.Target gate computer 309 bases far unit speed are determined a target door limit value.(following will the detailed description in detail) delivers to instantaneous thresholding computer 305.Instantaneous thresholding computer 305 is adjusted threshold value according to frame quality information and target gate, determines an instantaneous thresholding, delivers to comparing unit 303.When determining power adjustment commands, far the energy of unit just compares with this instantaneous threshold value.Also can be illustrated below the details of the instantaneous thresholding of relevant calculation.
The unit, ground far away that receives power control group at interval in the Walsh symbol energy (from the energy of unit reception far away) of transmission deliver to accumulator 301 after after testing.Accumulator 301 calculates the far energy of unit, and this value is delivered to comparing unit 303.The comparing unit 303 far energy of unit is compared with instantaneous threshold value, determines the value of power control bit to send to far unit according to comparative result, instructs the far corresponding increase in unit or reduce power.
Fig. 4 is the flow chart of preferred enforcement embodiment of the equipment 300 of control chart 3.This logic flow starts from step 405, and speed calculation machine 307 receives from the signal of unit far away, calculates the far speed of unit.In step 410, calculate the target door limit value then, deliver to instantaneous thresholding computer 305 by target gate computer 309.Instantaneous thresholding computer 305 is determined instantaneous threshold value (step 415), delivers to comparing unit 303.Comparing unit 303 is compared power control group energy in step 425 after step 420 receives power control group energy with instantaneous thresholding.At last,, calculate power control bit, send to far unit according to comparative result in step 430.
Fig. 5 illustration according to the equipment 500 of another embodiment of the present invention control reverse channel power.Equipment 500 comprises accumulator 310, comparing unit 303, instantaneous thresholding computer 305, speed calculation machine 307 and target gate computer 509.The working condition of equipment 500 is as follows: the signal input rate computer 307 that receives from unit far away calculates the far speed of unit by it.The ground far away unit speed input target gate computer 509 of speed calculation machine 307 outputs.In addition, target gate computer 509 is gone back the received frame quality information.In this embodiment, target gate computer 509 is determined the target door limit value according to far unit speed and frame quality information, and this desired value is delivered to instantaneous thresholding computer 305.In another embodiment, target gate computer 509 can be only according to determining the target door limit value such as the such statistical property of frame quality information.Then, instantaneous thresholding computer 305 is adjusted threshold value according to frame quality information and target gate, determines an instantaneous thresholding, delivers to comparing unit 303.
The unit, ground far away that receives is delivered to accumulator 301 at Walsh symbol energy that power control group is transmitted at interval after after testing.Accumulator 301 calculates the far energy of unit, and this value is delivered to comparing unit 303.The comparing unit 303 far energy of unit is compared with instantaneous threshold value, determines the value of power control bit to send to far unit according to comparative result, instructs the far corresponding increase in unit or reduce power.
Far unit speed is estimated:
Since from one far the bandwidth of the fading signal that receives of unit far the speed of unit is relevant with this, therefore can determine the far valuation of unit speed by the bandwidth of estimation fading signal.In a preferred embodiment, adopted the decline model of classics, travelling carriage travels by the unlimited field of a very little scattering object, thereby produces the power spectrum S (f) of U-shaped.Suppose it is the electric field of a perpendicular polarization, have
S wherein
0A constant is given in the received power density in the suitable small neighbourhood of transmission carrier frequency; And f is the independent frequency variable.
Electric field (J
0) real part (R) for postponing be for the corresponding correlation function of τ:
R (v, τ)=J
0(β v τ) wherein:
β＝2π/λ
V=is unit speed far
The lagged variable of τ=independently
And
Estimate f
mJust can obtain the valuation of v.For the f of S (f), standard deviation is:
If carrier frequency is 900MHz (the exemplary operation frequency of CDMA), then have
If v=1.06 σ has frequency shift (FS) f
0, then available spectrum is
S′(f)＝S(f-f
0)
Can be similar to f by the intermediate value between the both side edges of estimating asymmetric spectrum normally
0Mobile station speed can be estimated by the second-order moment around mean (variance) of obtaining observed power spectrum, and the frequency shift (FS) between transmitting and receiving can obtain by estimating first moment (average).
For example, obtain the speed valuation by the standard deviation of the power spectrum of measuring viewed far unit.Far the power spectrum of unit can be similar to by carrying out the following step:
(1) calculated data is selected the plural rapid fourier change (FFT) of piece (see figure 6);
(2) form the mould square of Fourier transformation;
(3) mould of several Fourier transformations square is averaged;
(4) item that is lower than a thresholding in average is set to zero.
If the peak value of power spectral density (PSD) is designated as PSD
Max, then in square calculates, do not comprise that value is lower than PSD
Max/ 3.5 spectral line.Usually this thresholding is the inverse function of signal to noise ratio.
Fig. 6 illustration the block diagram of the speed calculation machine 307 among Fig. 3.Speed calculation machine 307 comprises RF front end 601, fast Hadamard transform (FHT) decoder 603, data selector 605 and discrete fourier transition device (DFT) 607.The working condition of velocity calculator 307 is as follows: decode from the quick Hadamard decoder 603 of signal input conversion through mixing, down-conversion and despreading of radio-frequency front-end 601 outputs.The quick Hadamard decoder 603 of conversion is called the Walsh symbol in this case with the quick Hadamard data of the speed output transform of 4800Hz.On typical working point, select the Walsh affix in nearly 20% and do not meet launch the affix of Walsh symbol, that is to say, have 20% in to select the Walsh affix be wrong.The quick Hadamard data of conversion enter selector 605, can be used as the quick Hadamard output of the plural conversion of selecting affix in meeting and send discrete fourier transition 607 to; Perhaps, be that wrong supplementary can be utilized if which affix of indication is arranged, corresponding soft-decision output can be left out so and (promptly be set to o+j
0).This supplementary can be by obtaining the frame recompile with CRC (CRC), can be referring to " channel coefficients method of estimation and equipment in the digital radio frequency communication system " (attorney docket CE 02963R Sexton), and for referencial use at these row.Each group that is made of the bit of 6 recompiles can be real Walsh affix.CRC may occur is such false declaration incident that is correctly decoded with a frame newspaper that in fact is not correctly decoded.For the CRC of one 12 bit, the probability that this false declaration incident occurs is roughly 0.025%.By being designated as " closely similar " collection and being preserved, can be further improved having the peaked FHT output of N.In this case, deleted, but from N " closely similar " value, chosen a suitable value.If correct affix is not one in these values of being preserved, so just deleted.Under extreme case, N=64 just need not delete.Also have a kind of modification, according to have still less the error symbol of the frame by CRC than other frames, the Walsh symbol of choosing in therefore using is not unless frame passes through CRC.
In a preferred embodiment, the design parameter of discrete fourier transition is:
1. calculate and import item number (used herein is 2 frames, 192 symbols) in the single discrete fourier transition;
2. Shu Chu discrete fourier transition medium frequency count (4*192);
3; The discrete fourier transition number that is averaged before computation of mean values and the variance (5, promptly per 10 incoming frames on average once);
4. filter the skew that directly draws from average and variance and the time constant of velocity estimation.
In another embodiment, utilize power control bit stream to calculate the far speed of unit.Under the situation of low velocity, power control bit stream presents the cycle with channel more corresponding regular lifting/lowering patterns coherence time.When not having signal fadeout, this mode class is similar to " 11111000001111100000 ".Therefore, can obtain the speed indication by some discrete component of search in the frequency translation of power control bit stream.If determine most of Energy distribution in a few predetermined group of frequencies, the speed of unit is low velocity so far, otherwise far the speed of unit is exactly high-speed.In this embodiment, take following these steps:
1. the power control bit of buffer memory 2 frames flows (32 bit);
2. after buffer is full, these bits are carried out 32 yuan fast Hadamard transform, be treated to-1 and be treated to 1 with 0 with 1;
3. check 32 outputs,, then speed is defined as being lower than 10 miles per hours (mph), otherwise is defined as being higher than 10 miles per hours if 50% Energy distribution is arranged on 8 or still less scheduled item.
Target gate is estimated:
The data rate that Fig. 7 shows for 9.6 kilobits/second will reach 1% the required E of frame deletion rate (FER)
b/ N
oAnd the typical relation curve between the unit speed far away.In a preferred embodiment, speed calculation machine 307 provides far unit speed to target gate computer 309, and target gate computer 309 with desired frame deletion rate as parameter from E
b/ N
oTry to achieve target gate in the table to speed.The target gate computer 309 utilizations far speed of unit are adjusted target gate according to the target gate tables that are stored in the target gate computer 309 for desired frame deletion rate.
In conjunction with as described in Fig. 5, another embodiment of the present invention is except far also utilizing the frame quality information to determine target gate the target velocity as the front.In this embodiment, target gate by target gate computer 509 from E
b/ N
oDraw in the table to speed, till detecting excessive frame deletion or excessive poor quality frame (representing) by the frame quality information.For example, target gate computer 509 usefulness far unit speed are determined target gate, when target gate computer 509 is determined the average frame poor quality, target gate are increased 0.1dB.In one section particular time interval, detect full-rate vocodings of some differences and just can adopt above-mentioned method of adjustment when adjusting.On the contrary, when target gate computer 509 determined that the average frame quality is higher than a thresholding, target gate was just reduced 0.1dB.
As mentioned above, an alternative embodiment of the invention is only utilized the frame quality information when determining target gate.There is several method to can be used to determine adjust thresholding how with when.Can use all or some method wherein.
Fig. 8 illustration according to the target gate computer 509 among Fig. 5 of the preferred embodiments of the present invention structures.Target gate computer 509 comprises finite impulse response (FIR) filter 801, adder 802 and 803, switch 804 and logical block 805.The working condition of target gate computer 509 is as follows: full-rate vocoding quality information input finite impulse response filter 801." first in first out " buffer of limited impulse filter 801 usefulness is stored each value of N full-rate vocoding quality information value.In this embodiment, if frame speed information can not determine that just use can be determined the rate information of frame recently.The mass value input finite impulse response filter 801 of " up-to-date " full-rate vocoding, the mass value of replacement " the oldest " full-rate vocoding in limited impulse filter 801.The number of the poor quality frame that finite impulse response filter 801 will exist in its buffer is exported to adder 802.Adder 802 calculates in finite impulse response filter 801 the poor of the number of the deleted frame that exists and a target frame deletion value.(error-fe (k) exports to logical block 805 from adder 802 for the current number of the deleted frame that exists during the inherent time interval k of desired value and finite impulse response filter 801 poor.Logical block 805 is determined a value (k2*error-fe (k)) that is used for adjusting the current goal threshold value.In a preferred embodiment, if error_fe (k) greater than 0, k2=30 then; If error-fe (k) is less than 0, k2=20 then; If error-fe (k) equals 0, then k2=0.This adjusted value is exported once by switch 804 every n2 frames, wherein n2=75.Adjusted value is exported to adder 803 when switch 804 is connected, be added on the current goal thresholding, produces a target gate of having upgraded.
Fig. 9 illustration another embodiment of the target gate computer 509 among Fig. 5.In this embodiment, the time interval of target gate computer 509 between the full-rate vocoding of difference will become and increase target gate when too small.Target gate computer 509 comprises: good in succession full-rate vocoding counter 915, good full rate and subrate frame counter 916, addition unit 802 and 803, logical block 917.In a preferred embodiment, good full rate adds subrate frame counter 916 and good in succession full-rate vocoding counter 915 all be reset to zero when having a poor full-rate vocoding to be detected.If the rate information of frame be can not determine, just use the rate information that to determine frame recently.Good in succession full-rate vocoding counter 915 number of good full-rate vocoding (nc-gfr) is in succession exported to adder 802.Adder 802 calculates minimum time between nc-gfr and the full speed rate variance frame thresholding, and (MIF's is poor, and MIF and desired full speed rate variance (i.e. deletion) frame rate is inversely proportional to.Adder 80 will resulting poor (e-fr-tbbf (k)=nc-gfr-MIF) exports to logical block 917 for frame period k.Good full rate adds subrate frame counter 916 has added number (ng-frpsr) from first-class subrate frame to the number of the good full-rate vocoding of logical block 917 outputs since a last full speed rate variance frame occurring.Logical block 917 is determined a target gate adjustment amount (zck) according to input e-fr-tbbf (k) and ng-frpsr).Process is as follows:
if(e_fr_tbbf(k)＜MIF)then if(ng_frpsr＞MIF)then z(k)＝a2*(1-(1/MIF))*nc_bfr+b2 else z(k)＝(a2*(1-(1/MIF))*nc_gfr+b2)/c2 end if end if
Wherein
The desired full speed rate variance of MIF=d2/ frame per second in a preferred embodiment, a2=256, b2=100, c2=4, and d2=0.6.Adjustment amount z (k) exports to adder 803, with the addition of current goal thresholding.
Figure 10 illustration another embodiment of the target gate computer 509 among Fig. 5.In this embodiment, target gate computer 509 will become in the number of good subrate frame in succession and reduce target gate when too much.Target gate computer 509 comprises good in succession subrate frame counter 1001, adder 802 and 803, logical block 1002.Good in succession subrate frame counter 1001 resets when having a poor subrate frame to be detected.In this embodiment, if the rate information of frame can not determine that just use can be determined the rate information of frame recently.
The working condition of target gate computer 509 is as follows: good in succession subrate frame counter 1001 has been exported subrate number (nc-gsr) to adder 802.Adder 1001 calculates poor by the given good subrate thresholding in succession of product (nc-gsr-thresh*CSRg-idex) of nc-gfr and.Parameter nc-gsr-shresh represents a desired minimum interval between subrate difference frame.This desired between subrate difference frame minimum interval and desired full speed rate variance frame (for example delete frame) rate between following relation arranged:
The desired full speed rate variance of nc-gsr-thresh=d3/ frame per second wherein, d3 is set to 2/5 in this preferred embodiment.Parameters C SRg-index just increases progressively once when each nc-gfr surpasses thresholding.Nc-gsr and CSRg-index when having a full rate or subrate difference frame to be detected just respectively again for becoming 0 and 1.Adder 802 will be exported to logical block 1002 for frame period k resulting poor (e-cgsr (k)=nc-gsr-(nc-gsr-thresh*CSRg-index)).Logical block 1002 is determined a new adjustment amount (z (k)) that is added on the target gate, and process is as follows:
if(e_cgsr(k)＞0)then if(iw(k)＞w(k))then iw(k+1)＝w(k) z(k)＝0 else if(w(k)＞thresh1) z(k)＝k6*CSRg_index else z(k)＝k7*CSRg_index end if end if CSRg_index＝CSRg_index+1 end if
Wherein, w (k) is in the current goal threshold level, and iw (k) is instantaneous thresholding.In a preferred embodiment, k6=30, k7=10, and thresh1=nominal target threshold level (deciding) on hardware and system.Adjustment amount z (k) exports to adder 803.Adder 803 deducts adjustment amount z (k) with the current goal thresholding, produces the target gate upgraded.
Figure 11 illustration another embodiment of the target gate computer 509 among Fig. 5.In this embodiment, target gate computer 509 is used for will becoming in the number of good full-rate vocoding in succession and reduces target gate when too much.If the rate information of frame be can not determine, just use the rate information that to determine frame recently.Target gate computer 509 comprises good in succession full-rate vocoding counter 1151, addition unit 802 and 803, logical block 1152.Good in succession full-rate vocoding counter 1151 just resets when having a poor full-rate vocoding to be detected.Good in succession full-rate vocoding counter 1151 has been exported the number (nc-gft) of full-rate vocoding to adder 802.Adder 802 calculates poor by the given good full rate thresholding in succession of product (nc-gft-thresh*CFRg-index) of nc-gft and.Parameter nc-gft-thresh represents a desired minimum interval between full speed rate variance frame.This desired between full speed rate variance frame minimum interval and desired full speed rate variance frame (for example delete frame) rate between following relation arranged:
The desired full speed rate variance of nc-gfr-thresh=d4/ frame per second wherein, d4 is set to 3/2 in this preferred embodiment.
Parameters C SRg-index just increases progressively once when each nc-gfr surpasses thresholding.Nc-gfr and CFRg-index just reset to 0 and 1 respectively when having a full rate or subrate difference frame to be detected or when having the several difference of subrate in succession frames to be detected.Adder 802 will resulting poor (e-cgfr (k)=nc-gfr-(nc-gfr-thresh* (FRg-index)) exports to logical block 1152 for frame period k.Logical block 1152 is determined a new adjustment amount (z (k)) that is added on the target gate, and process is as follows:
if(e_cgfr(k)＞0)then if(iw(k)＞w(k))then iw(k+1)＝w(k) z(k)＝0 else if(w(k)＞thresh1) z(k)＝k3*CFRg_index else z(k)＝k4*CFRg_index end if end if CFRg_index＝CFRg_index+1 end if
Wherein, w (k) is in the current goal threshold level, and iw (k) is instantaneous thresholding.In this preferred embodiment, k3=50, k4=30, and thresh1=nominal target threshold level (deciding) on hardware and system.Adjustment amount z (k) exports to adder 803.Adder 803 deducts adjustment amount z (k) with the current goal thresholding, produces the target gate upgraded.
Figure 12 illustration another embodiment of the target gate computer 509 among Fig. 5.In this embodiment, target gate computer 509 increases target gate when the number of poor subrate frame will become too many in succession.In this embodiment, if the rate information of frame can not determine that just use can be determined the rate information of frame recently.Target gate computer 509 comprises poor in succession subrate frame counter 1201, addition unit 803, logical block 1202.The working condition of target gate computer 509 is as follows: poor in succession subrate frame counter 1201 is to the number (nc-bsr) of the poor in succession subrate frame of logical block 1202 outputs.Poor in succession subrate frame counter 1201 just resets when having a good frame to be detected.Logical block 1202 is determined a new adjustment amount (z (k)) that is added on the target gate (w (k)), and process is as follows:
if(nc_bsr＞thresh2)then
z(k)＝k5*nc_bsr
end?if
In this preferred embodiment, k5=10, and thresh2=1.Adjustment amount z (k) exports to adder 803.Adder 803 adds adjustment amount z (k) with the current goal thresholding.
In another embodiment, the computational process of adjustment amount iz (k) is as follows:
if(nc_bsr＞thresh2)then
iz(k)＝SR_StepUp
End if wherein, SR-StepUp is the increment that is added on the instantaneous thresholding, is set to 30 in this preferred embodiment.
Instantaneous thresholding calculates:
The instantaneous thresholding that comparing unit 303 is used for carrying out power control is a kind of " sawtooth " type thresholding, and target gate is set by target gate computer 309.In one embodiment, instantaneous thresholding begins at the value place identical with target gate at first, increases progressively when whenever detecting a poor frame then, and falls progressively when whenever detecting a good frame.In this embodiment, if instantaneous thresholding is higher than target gate, instantaneous thresholding increases a smaller amount.In a preferred embodiment, when instantaneous thresholding is higher than target gate, a full speed of every appearance rate variance frame, instantaneous thresholding increases 0.5dB; And when instantaneous thresholding is lower than target gate, a full speed of every appearance rate variance frame, instantaneous thresholding increases 1.0dB.Instantaneous thresholding increase also is directly proportional with the number that occurs difference subrate frame in succession.
On the contrary, instantaneous thresholding reduces than very fast when whenever receiving a good full-rate vocoding in the base station, and after instantaneous thresholding was reduced to target gate, the change rate of instantaneous thresholding just reduced.In this preferred embodiment, during more than or equal to target gate, whenever receive a good full-rate vocoding at instantaneous thresholding, instantaneous thresholding reduces 0.1dB; And during less than target gate, whenever receiving a good full-rate vocoding at instantaneous thresholding, instantaneous thresholding reduces 0.01dB.Except above-mentioned situation, if FER becomes apparently higher than desired value, instantaneous thresholding can increase a bigger amount (being 1.5dB in a preferred embodiment).Action can very promptly overcome any temporary interference like this.
In another embodiment, during to movement conversion, do not increase instantaneous thresholding from static whenever detecting far the unit even also detect poor quality frame yet.Increasing instantaneous thresholding has like this avoided large quantities of poor frames can occurring when the vehicle setting in motion.After detecting far unit stop motion, just carry out relatively shorter average, with rapid estimating user setting in motion when again.
Figure 13 illustration the time-domain diagram of the instantaneous threshold value that draws according to the preferred embodiment of the present invention.At time t=0, instantaneous thresholding begins in identical value with target gate.Owing to do not detect poor frame, instantaneous thresholding reduces with the speed that whenever detects a good frame decline 0.01dB.Detect a poor frame at time t=2, because this moment, instantaneous thresholding was lower than target gate, therefore instantaneous thresholding increases 1.0dB.After having increased 1.0dB, instantaneous thresholding just is higher than target gate, and therefore instantaneous thresholding reduces with the speed that whenever detects a good frame decline 0.1dB, after being reduced to target gate, reduces with the speed that whenever detects a good frame decline 0.01dB.
Then, at time t=12, far the unit begins to quicken, and target gate is with regard to corresponding increase.At time t=19, detect a poor frame, instantaneous thresholding increases 1.0dB once more.At time t=20, detect another difference frame, but current instantaneous thresholding only increases 0.5dB, because this moment, instantaneous thresholding was higher than target gate.At last, at time t=21, far the unit reduces speed now, and target gate reduces with regard to corresponding.
In another embodiment, instantaneous thresholding is from the value identical with target gate, when whenever detecting a poor full-rate vocoding, increase progressively (in this preferred embodiment, adjustment amount is approximately 1.5dB) or increase progressively (in this preferred embodiment, the approximate whole 0.1dB that is of adjustment amount) in whenever detecting in succession subrate difference frame the time.Instantaneous thresholding when whenever detecting a good frame, successively decrease (in this preferred embodiment, adjustment amount is approximately 0.05dB).In this embodiment, instantaneous thresholding can be got back to target gate (after receiving abundant good frame) all the time, is not lower than target gate but do not allow to drop to.When the target gate level increases, if instantaneous thresholding just is arranged to this value at that time less than new target door limit value.
Compare with instantaneous thresholding as described above by the energy of the unit, ground far away that will receive and to control the power of backward channel, the overall performance of system is improved, compare with the method for prior art, can making far, the average transmit power decline of unit reaches 0.5dB.Because reduced the transmitting power of unit, ground far away, system interference also just reduces, thereby total networking capacity can be increased.
More than explanation that the present invention and concrete condition and accompanying drawing are done and do not mean that it is scope restriction of the present invention.For example, target velocity and come the estimating target thresholding far away with mean F ER value.The present inventor thinks and can carry out various modifications to the present invention within the scope of the invention according to spirit of the present invention, so all such modifications all should belong to the scope of patent protection of the present invention of claims regulation.