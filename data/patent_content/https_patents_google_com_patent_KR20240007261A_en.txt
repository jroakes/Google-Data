KR20240007261A - Use large-scale language models to generate automated assistant response(s) - Google Patents
Use large-scale language models to generate automated assistant response(s) Download PDFInfo
- Publication number
- KR20240007261A KR20240007261A KR1020237042963A KR20237042963A KR20240007261A KR 20240007261 A KR20240007261 A KR 20240007261A KR 1020237042963 A KR1020237042963 A KR 1020237042963A KR 20237042963 A KR20237042963 A KR 20237042963A KR 20240007261 A KR20240007261 A KR 20240007261A
- Authority
- KR
- South Korea
- Prior art keywords
- assistant
- outputs
- output
- llm
- modified
- Prior art date
Links
- 230000004044 response Effects 0.000 title claims abstract description 94
- 238000000034 method Methods 0.000 claims abstract description 175
- 238000012545 processing Methods 0.000 claims abstract description 105
- 230000008569 process Effects 0.000 claims abstract description 34
- 230000001755 vocal effect Effects 0.000 claims description 45
- 230000015654 memory Effects 0.000 claims description 28
- 238000012986 modification Methods 0.000 description 20
- 230000004048 modification Effects 0.000 description 20
- 238000010801 machine learning Methods 0.000 description 19
- 238000010586 diagram Methods 0.000 description 9
- 238000005259 measurement Methods 0.000 description 9
- 230000000007 visual effect Effects 0.000 description 9
- 230000026676 system process Effects 0.000 description 8
- 238000004891 communication Methods 0.000 description 6
- 230000000694 effects Effects 0.000 description 6
- 230000003993 interaction Effects 0.000 description 6
- 230000009471 action Effects 0.000 description 5
- 230000006870 function Effects 0.000 description 5
- 238000009877 rendering Methods 0.000 description 5
- 230000007704 transition Effects 0.000 description 5
- 240000008574 Capsicum frutescens Species 0.000 description 4
- 230000002452 interceptive effect Effects 0.000 description 4
- 238000013507 mapping Methods 0.000 description 4
- 235000012736 patent blue V Nutrition 0.000 description 4
- 241000282412 Homo Species 0.000 description 3
- 238000001514 detection method Methods 0.000 description 3
- 238000005516 engineering process Methods 0.000 description 3
- 230000008901 benefit Effects 0.000 description 2
- 230000008859 change Effects 0.000 description 2
- 238000012937 correction Methods 0.000 description 2
- 230000007613 environmental effect Effects 0.000 description 2
- 239000012530 fluid Substances 0.000 description 2
- 230000007246 mechanism Effects 0.000 description 2
- 230000002093 peripheral effect Effects 0.000 description 2
- JTJMJGYZQZDUJJ-UHFFFAOYSA-N phencyclidine Chemical compound C1CCCCN1C1(C=2C=CC=CC=2)CCCCC1 JTJMJGYZQZDUJJ-UHFFFAOYSA-N 0.000 description 2
- 230000000306 recurrent effect Effects 0.000 description 2
- 230000033764 rhythmic process Effects 0.000 description 2
- 238000013528 artificial neural network Methods 0.000 description 1
- 230000003190 augmentative effect Effects 0.000 description 1
- 238000013475 authorization Methods 0.000 description 1
- 230000005540 biological transmission Effects 0.000 description 1
- 230000001413 cellular effect Effects 0.000 description 1
- 230000001149 cognitive effect Effects 0.000 description 1
- 238000013481 data capture Methods 0.000 description 1
- 230000001815 facial effect Effects 0.000 description 1
- 239000011521 glass Substances 0.000 description 1
- 230000000977 initiatory effect Effects 0.000 description 1
- 230000003287 optical effect Effects 0.000 description 1
- 238000012552 review Methods 0.000 description 1
- 230000006403 short-term memory Effects 0.000 description 1
- 230000002123 temporal effect Effects 0.000 description 1
- 238000013518 transcription Methods 0.000 description 1
- 230000035897 transcription Effects 0.000 description 1
- 238000002604 ultrasonography Methods 0.000 description 1
Classifications
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L15/00—Speech recognition
- G10L15/08—Speech classification or search
- G10L15/18—Speech classification or search using natural language modelling
- G10L15/183—Speech classification or search using natural language modelling using context dependencies, e.g. language models
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F40/00—Handling natural language data
- G06F40/30—Semantic analysis
- G06F40/35—Discourse or dialogue representation
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L15/00—Speech recognition
- G10L15/22—Procedures used during a speech recognition process, e.g. man-machine dialogue
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L15/00—Speech recognition
- G10L15/22—Procedures used during a speech recognition process, e.g. man-machine dialogue
- G10L2015/226—Procedures used during a speech recognition process, e.g. man-machine dialogue using non-speech characteristics
- G10L2015/228—Procedures used during a speech recognition process, e.g. man-machine dialogue using non-speech characteristics of application context
Abstract
사용자와 자동화된 어시스턴트 간의 대화 세션의 일부로서, 구현예는 어시스턴트 쿼리를 포함하는 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하고, 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 쿼리에 대한 응답일 것으로 각각 예측되는 어시스턴트 출력 세트를 결정하고, 대형 언어 모델(LLM) 출력(들)을 사용하여, 수정된 어시스턴트 출력 세트를 생성하기 위해 대화 세션의 컨텍스트 및 어시스턴트 출력을 프로세싱하고, 그리고 음성 발화에 응답하여 수정된 어시스턴트 출력 세트 중에서 주어진 수정된 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 할 수 있다. 일부 구현예에서, LLM 출력(들)은 온라인 방식으로 후속적으로 사용하기 위해 오프라인 방식으로 생성될 수 있다. 추가적 또는 대안적 구현예에서, LLM 출력(들)은 음성 발화가 수신될 때 온라인 방식으로 생성될 수 있다.As part of a conversational session between a user and an automated assistant, an implementation may receive an audio data stream capturing a spoken utterance containing an assistant query, each predicted to be a response to the assistant query, based on audio data stream processing. Determine a set of assistant outputs, use the large language model (LLM) output(s), process the context of the conversation session and the assistant output to generate a set of modified assistant outputs, and the modified assistant in response to the spoken utterance. A given modified assistant output from among the output sets may be provided for presentation to the user. In some implementations, LLM output(s) may be generated offline for subsequent use in an online manner. In additional or alternative implementations, the LLM output(s) may be generated in an on-line manner when a spoken utterance is received.
Description
사람은 본 명세서에서 "자동화된 어시스턴트"("챗봇", "인터랙티브 퍼스널 어시스턴트", "지능형 퍼스널 어시스턴트", "개인 음성 어시스턴트", "대화형 에이전트들"로도 지칭됨)로 지칭되는 인터렉티브 소프트웨어 어플리케이션과의 사람-컴퓨터 간 대화에 참여할 수 있다. 자동화된 어시스턴트는 일반적으로 음성 발화를 해석하고 응답하는 컴포넌트 파이프라인에 의존한다. 예를 들어, 자동 스피치 인식(ASR) 엔진은 ASR 가설(예: 용어(들) 및/또는 기타 토큰(들)의 시퀀스)과 같은 ASR 출력을 생성하기 위해 사용자의 음성 발화에 대응하는 오디오 데이터를 프로세싱할 수 있다. 또한, NLU(자연어 이해) 엔진은 ASR 출력(또는 터치/입력)을 프로세싱하여 사용자가 음성 발화(또는 터치/기입된 입력)를 제공할 때 표현한 요청(예: 의도) 및 선택적으로 의도와 연관된 파라미터(들)에 대한 슬롯 값(들)과 같은 NLU 출력을 생성할 수 있다. 결국, NLU 출력은 다양한 이행 컴포넌트에 의해 프로세싱되어 음성 발화에 대한 응답은 응답 콘텐츠 및/또는 음성 발화에 응답하여 수행될 수 있는 하나 이상의 액션과 같은 이행 출력을 생성할 수 있다. Humans interact with interactive software applications, referred to herein as “automated assistants” (also referred to as “chatbots,” “interactive personal assistants,” “intelligent personal assistants,” “personal voice assistants,” and “conversational agents”). You can participate in human-computer conversations. Automated assistants typically rely on a pipeline of components to interpret and respond to spoken utterances. For example, an automatic speech recognition (ASR) engine collects audio data corresponding to the user's speech utterances to generate ASR output, such as ASR hypotheses (e.g., sequences of term(s) and/or other token(s)). Can be processed. Additionally, a natural language understanding (NLU) engine processes ASR output (or touch/input) to determine the request (e.g. intent) expressed by the user when providing a spoken utterance (or touch/written input) and optionally parameters associated with the intent. Can produce NLU output such as slot value(s) for (s). Ultimately, the NLU output can be processed by various transitional components to produce transitional outputs, such as response content and/or one or more actions that can be performed in response to the spoken utterance, in response to the spoken utterance.
일반적으로, 자동화된 어시스턴트와의 대화 세션은 음성 발화를 제공하는 사용자에 의해 개시되며, 자동화된 어시스턴트는 앞서 언급한 컴포넌트 파이프라인을 사용하여 음성 발화에 응답할 수 있다. 사용자는 추가 음성 발화를 제공하여 대화 세션을 계속할 수 있으며, 자동화된 어시스턴트는 앞서 언급한 컴포넌트 파이프라인을 사용하여 추가 음성 발화에 다시 응답할 수 있다. 다르게 말하면, 이러한 대화 세션은 일반적으로 사용자가 대화 세션에서 차례로 음성 발화를 제공하고, 자동화된 어시스턴트가 대화 세션에서 추가 차례로 음성 발화에 응답하고, 사용자가 대화 세션에서 차례로 추가 음성 발화를 제공하고, 자동화된 어시스턴트가 대화 세션에서 추가 차례로 추가 음성 발화에 응답한다는 점에서 턴-기반이다. 하지만, 사용자의 입장에서 볼 때, 이러한 턴-기반 대화 세션은 사람이 실제로 서로 어떻게 대화하는지를 반영하지 않기 때문에 자연스럽지 않을 수 있다. Typically, a conversational session with an automated assistant is initiated by a user providing a spoken utterance, and the automated assistant can respond to the spoken utterance using the previously mentioned component pipeline. The user can continue the conversation session by providing additional speech utterances, and the automated assistant can respond back to the additional speech utterances using the component pipeline mentioned earlier. Put differently, these conversation sessions typically involve a user providing vocal utterances in turns in a conversation session, an automated assistant responding to voice utterances in turns in a conversation session, a user providing additional voice utterances in turns in a conversation session, and an automated assistant responding to voice utterances in turns in a conversation session. It is turn-based in the sense that the assistant responds to additional vocal utterances in turn during the conversation session. However, from the user's perspective, these turn-based conversation sessions may not seem natural because they do not reflect how people actually talk to each other.
예를 들어, 제1 사람이 대화 세션 중에 제2 사람에게 초기 생각을 전달하기 위해 음성 발화(예: "I’m going to the beach today")을 제공하는 경우, 제2 사람은 제1 사람에 대한 응답을 공식화하는 대화 세션의 컨텍스트에서 음성 발화를 고려할 수 있다(예: "sounds fun, what are you going to do at the beach?", "nice, have you looked at the weather?" 등). 특히, 제2 사람은 제1 사람에 응답하여, 제1 사람이 대화 세션에 자연스럽게 참여하도록 하는 음성 발화를 제공할 수 있다. 다르게 말하면, 대화 세션 동안 제1 사람과 제2 사람 모두 대화 세션을 주도하는 사람 중 한 사람 없이도 자연스러운 대화를 촉진하기 위해 음성 발화를 제공할 수 있다. For example, if a first person provides a vocal utterance (e.g., “I'm going to the beach today”) to convey an initial thought to a second person during a conversational session, the second person responds to the first person by Spoken utterances can be considered in the context of a conversational session in which a response is formulated (e.g., “sounds fun, what are you going to do at the beach?”, “nice, have you looked at the weather?”, etc.). In particular, the second person may respond to the first person and provide vocal utterances that allow the first person to naturally participate in the conversation session. In other words, during a conversation session, both the first person and the second person can provide vocal utterances to facilitate natural conversation without one of the people leading the conversation session.
그러나 위의 예에서 제2 사람이 자동화된 어시스턴트로 교체되면, 자동화된 어시스턴트는 제1 사람이 대화 세션에 계속 참여하도록 하는 응답을 제공하지 못할 수 있다. 예를 들어, 제1 사람이 "I’m going to the beach today"라는 음성 발화를 제공하는 것에 응답하여, 자동화된 어시스턴트는 대화 세션을 촉진하기 위한 추가 응답을 제공하지 않고, 제1 사람에게 해변에서 무엇을 하려고 하는지 사전적으로 묻는 것, 제1 사람이 자주 방문하는 해변에 대한 일기예보를 사전적으로 조회하고 응답에 일기예보를 포함시키는 것, 일기예보에 기초하여 사전적으로 일부 추론을 하는 것 등과 같이 자동화된 어시스턴트가 대화 세션을 촉진하기 위해 일부 액션을 수행하거나 및/또는 일부 응답을 제공할 수 있음에도 불구하고 단순히 "sounds fun" 또는 "nice"라고 응답할 수 있다. 그 결과, 제1 사람의 음성 발화에 응답하여 자동화된 어시스턴트에 의해 제공된 응답은 상기 응답이 다수의 사람들 간의 자연적 대화를 반영하기 않을 수 있으므로 제1 사람에 맞지 않을 수 있다. 또한, 제1 사람은 자동화된 어시스턴트가 사전적으로 제공할 수 있는 특정 정보(예: 해변의 일기 예보)를 명시적으로 요청하기 위해 추가 음성 발화를 제공해야 할 수 있으며, 이에 따라 자동화된 어시스턴트를 향한 음성 발화의 양이 증가하고 이러한 음성 발화를 프로세싱하는데 활용되는 클라이언트 디바이스의 리소스를 낭비하게 된다.However, in the example above, if the second person is replaced by an automated assistant, the automated assistant may not be able to provide a response that would keep the first person engaged in the conversation session. For example, in response to a first person providing the vocal utterance “I'm going to the beach today,” the automated assistant may direct the first person to the beach without providing any further response to facilitate the conversation session. such as asking a priori what the first person is going to do, proactively looking up the weather forecast for a beach that the first person frequents and including the weather forecast in the response, making some inference a priori based on the weather forecast, etc. Although the automated assistant may perform some actions and/or provide some responses to facilitate the conversation session, it may simply respond with “sounds fun” or “nice.” As a result, a response provided by an automated assistant in response to a first person's vocal utterance may not be tailored to the first person because the response may not reflect a natural conversation between multiple people. Additionally, the first person may need to provide additional vocal utterances to explicitly request certain information (e.g., the weather forecast at the beach) that the automated assistant can proactively provide, thereby providing additional voice utterances to the automated assistant. The volume of voice utterances increases and the client device's resources utilized for processing these voice utterances are wasted.
본 명세서에 설명된 구현예는 자동화된 어시스턴트가 대화 세션 동안 사용자와 자연스러운 대화를 수행할 수 있게 하는 것에 관한 것이다. 일부 구현예는 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신할 수 있다. 오디오 데이터 스트림은 클라이언트 디바이스의 하나 이상의 마이크에 의해 생성될 수 있으며, 음성 발화는 어시스턴트 쿼리를 포함할 수 있다. 일부 구현예는 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 출력 세트를 추가로 결정하고, 어시스턴트 출력 세트와 대화 세션의 컨텍스트를 프로세싱하여 LLM을 사용하여 생성된 하나 이상의 대규모 언어 모델(LLM) 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성할 수 있다. 하나 이상의 LLM 출력 각각은 대화 세션의 컨텍스트의 적어도 일부와 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 기초하여 결정될 수 있다. 일부 구현예는 상기 수정된 어시스턴트 출력 세트 중에서 주어진 수정된 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 할 수 있다. 또한, 하나 이상의 LLM 출력 각각은 예를 들어 하나 이상의 어휘에 걸친 하나 이상의 단어 및/또는 문구의 시퀀스에 대한 확률 분포를 포함할 수 있고, 확률 분포에 기초하여 시퀀스에서 하나 이상의 단어 및/또는 문구를 하나 이상의 LLM 출력으로 선택할 수 있다. 또한, 대화 세션의 컨텍스트는 하나 이상의 컨텍스트 신호에 기초하여 결정될 수 있고, 하나 이상의 컨텍스트 신호는 예를 들어 시간, 요일, 클라이언트 디바이스의 위치, 클라이언트 디바이스의 환경에서 감지된 주변 소음, 사용자 프로필 데이터, 소프트웨어 애플리케이션 데이터, 클라이언트 디바이스 사용자의 알려진 환경에 관한 환경 데이터, 사용자와 자동화된 어시스턴트 간의 대화 세션의 대화 기록 및/또는 기타 컨텍스트 신호를 포함한다. Implementations described herein relate to enabling an automated assistant to conduct a natural conversation with a user during a conversation session. Some implementations may receive an audio data stream that captures a user's vocal utterance. The audio data stream may be generated by one or more microphones on the client device, and the voice utterance may include an assistant query. Some implementations may further determine a set of assistant outputs based on processing the audio data stream, and process the set of assistant outputs and the context of the conversation session using one or more large-scale language model (LLM) outputs generated using the LLM. You can create a modified assistant output set. Each of the one or more LLM outputs may be determined based on at least a portion of the context of the conversation session and one or more assistant outputs included in the assistant output set. Some implementations may allow a given modified assistant output from among the set of modified assistant outputs to be provided for presentation to a user. Additionally, each of the one or more LLM outputs may include, for example, a probability distribution for a sequence of one or more words and/or phrases spanning one or more vocabularies, and, based on the probability distribution, one or more words and/or phrases from the sequence. You can select from more than one LLM output. Additionally, the context of a conversation session may be determined based on one or more context signals, such as time of day, day of the week, location of the client device, ambient noise detected in the environment of the client device, user profile data, software, etc. It includes application data, environmental data about the client device user's known environment, conversation records of conversation sessions between the user and the automated assistant, and/or other context signals.
일부 구현예에서, 어시스턴트 출력 세트는 스트리밍 ASR(자동 스피치 인식) 모델을 사용하여, 오디오 데이터 스트림 프로세싱에 기초하여 결정되어, ASR 출력 스트림을 생성할 수 있고, ASR 출력 스트림은 음성 발화에 대응할 것으로 예측된 하나 이상의 인식된 용어 또는 문구, 음성 발화에 대응할 것으로 예측되는 하나 이상의 음소, 하나 이상의 인식된 용어 또는 문구 각각과 연관된 하나 이상의 예측된 측정값 및/또는 하나 이상의 예측된 음소 및/또는 기타 ASR 출력을 포함한다. 또한, ASR 출력은 자연 언어 이해(NLU) 모델을 사용하여 프로세싱되어 NLU 출력 스트림을 생성할 수 있고, NLU 출력 스트림은 음성 발화를 제공할 때 사용자의 하나 이상의 예측된 의도 및 하나 이상의 예측된 의도와 연관된 하나 이상의 파라미터에 대한 하나 이상의 대응하는 슬롯 값을 포함한다. 더욱이, NLU 데이터의 스트림은 어시스턴트 출력 세트를 생성하기 위해 하나 이상의 제1 당사자(1P) 및/또는 서드파티(3P) 시스템에 의해 프로세싱될 수 있다. 본 명세서에 사용된 바와 같이, 하나 이상의 1P 시스템은 본 명세서에 설명된 자동화된 어시스턴트를 개발 및/또는 유지 관리하는 동일한 엔터티에 의해 개발 및/또는 유지 관리되는 시스템을 포함하고(예: 일반 퍼블리셔), 하나 이상의 3P 시스템은 본 명세서에서 설명된 자동화된 어시스턴트를 개발 및/또는 유지 관리하는 엔터티와 별개인 엔터티에 의해 개발 및/또는 유지 관리되는 시스템이다. 특히, 본 명세서에 설명된 어시스턴트 출력 세트는 음성 발화에 응답하기 위해 일반적으로 고려되는 어시스턴트 출력을 포함한다. 그러나, 청구된 기법을 사용함으로써, 위에 설명된 방식으로 생성된 어시스턴트 출력 세트는 수정된 어시스턴트 출력 세트를 생성하기 위해 추가로 프로세싱될 수 있다. 특히, 어시스턴트 출력 세트는 하나 이상의 LLM 출력을 사용하여 수정될 수 있으며, 주어진 수정된 어시스턴트 출력은 수정된 어시스턴트 출력 세트로부터 선택되어 음성 발화 수신에 응답하여 사용자에게 제시하기 위해 제공될 수 있다.In some implementations, an assistant output set may be determined based on audio data stream processing using a streaming Automatic Speech Recognition (ASR) model to generate an ASR output stream, wherein the ASR output stream is predicted to correspond to a spoken utterance. one or more recognized terms or phrases, one or more phonemes predicted to correspond to a spoken utterance, one or more predicted measurements and/or one or more predicted phonemes and/or other ASR output associated with each of the one or more recognized terms or phrases. Includes. Additionally, the ASR output may be processed using a natural language understanding (NLU) model to generate an NLU output stream, the NLU output stream comprising one or more predicted intents of the user and one or more predicted intents when providing the speech utterance. Contains one or more corresponding slot values for one or more associated parameters. Moreover, the stream of NLU data may be processed by one or more first party (1P) and/or third party (3P) systems to generate assistant output sets. As used herein, one or more 1P systems includes systems developed and/or maintained by the same entity that develops and/or maintains the automated assistants described herein (e.g., a general publisher) , one or more 3P systems are systems that are developed and/or maintained by an entity that is separate from the entity that develops and/or maintains the automated assistants described herein. In particular, the set of assistant outputs described herein includes assistant outputs generally considered to respond to vocal utterances. However, by using the claimed techniques, an assistant output set generated in the manner described above can be further processed to produce a modified assistant output set. In particular, the set of assistant outputs may be modified using one or more LLM outputs, and a given modified assistant output may be selected from the set of modified assistant outputs and provided for presentation to the user in response to receiving a spoken utterance.
예를 들어, 클라이언트 디바이스의 사용자가 "Hey Assistant, I’m thinking about going surfing today"라는 음성 발화를 제공한다고 가정한다. 이 예에서, 자동화된 어시스턴트는 어시스턴트 출력 세트 및 수정된 어시스턴트 출력 세트를 생성하기 위해 위에 설명된 방식으로 음성 발화를 프로세싱할 수 있다. 본 예에서 어시스턴트 출력 세트에 포함되는 어시스턴트 출력은 예를 들어 "That sounds like fun!", "Sounds fun!" 등을 포함할 수 있다. 또한, 이 예에서 수정된 어시스턴트 출력 세트에 포함된 어시스턴트 출력은 예를 들어 "That sounds like fun, how long have you been surfing?", "Enjoy it, but if you’re going to Example Beach again, be prepared for some light showers" 등을 포함할 수 있다. 특히, 어시스턴트 출력 세트에 포함된 어시스턴트 출력은 대화 세션에서 클라이언트 디바이스의 사용자를 추가로 참여시키는 방식으로 대화 세션을 구동하는 어시스턴트 출력을 포함하지 못하지만, 수정된 어시스턴트 출력 세트에 포함된 어시스턴트 출력은 컨텍스트적으로 관련 정보(예: "but if you’re going to Example Beach again, be prepared for some light showers")를 제공하고 및/또는 대화 세션의 컨텍스트 내에서 클라이언트 디바이스의 사용자와 공감하는 컨텍스트적으로 관련된 질문(예: "how long have you been surfing?")을 물어 대화 세션에서 클라이언트 디바이스의 사용자를 추가로 참여시키는 방식으로 대화 세션을 구동하는 어시스턴트 출력을 포함한다. For example, assume that the user of the client device provides the voice utterance “Hey Assistant, I’m thinking about going surfing today.” In this example, the automated assistant may process the spoken utterance in the manner described above to produce an assistant output set and a modified assistant output set. In this example, assistant outputs included in the assistant output set are, for example, "That sounds like fun!", "Sounds fun!" It may include etc. Additionally, the assistant output included in the modified assistant output set in this example would be, for example, "That sounds like fun, how long have you been surfing?", "Enjoy it, but if you're going to Example Beach again, be" May include “prepared for some light showers”, etc. In particular, assistant output included in an assistant output set may not include assistant output that drives the conversation session in a way that further engages the user of the client device in the conversation session, but assistant output included in the modified assistant output set may not be contextual. contextually relevant questions that provide relevant information (e.g., "but if you're going to Example Beach again, be prepared for some light showers") and/or resonate with the user of the client device within the context of the conversation session. Includes assistant output that drives the conversation session by further engaging the user of the client device in the conversation session by asking (e.g., “how long have you been surfing?”).
일부 구현예에서, 수정된 어시스턴트 응답 세트는 온라인 방식으로 생성되는 하나 이상의 LLM 출력을 사용하여 생성될 수 있다. 예를 들어, 음성 발화를 수신하는 것에 응답하여, 자동화된 어시스턴트는 위에서 설명한 방식으로 어시스턴트 출력 세트가 생성되도록 할 수 있다. 또한, 음성 발화를 수신하는 것에 응답하여, 자동화된 어시스턴트는 어시스턴트 출력 세트, 대화 세션의 컨텍스트 및/또는 음성 발화에 포함된 어시스턴트 쿼리가 하나 이상의 LLM을 사용하여 프로세싱되게 하여 하나 이상의 LLM을 사용하여 생성된 하나 이상의 LLM 출력에 기초하여 수정된 어시스턴트 출력 세트를 생성한다. In some implementations, a modified assistant response set may be generated using one or more LLM outputs generated in an online manner. For example, in response to receiving a spoken utterance, an automated assistant may cause a set of assistant outputs to be generated in the manner described above. Additionally, in response to receiving the spoken utterance, the automated assistant may cause a set of assistant output, the context of the conversation session, and/or assistant queries contained in the spoken utterance to be processed using the one or more LLMs to produce a set of assistant outputs using one or more LLMs. Generates a set of modified assistant outputs based on one or more LLM outputs.
추가적 또는 대안적 구현예에서, 수정된 어시스턴트 응답 세트는 오프라인 방식으로 생성되는 하나 이상의 LLM 출력을 사용하여 생성될 수 있다. 예를 들어, 음성 발화를 수신하기 전에, 자동화된 어시스턴트는 어시스턴트 활동 데이터베이스(클라이언트 디바이스의 사용자의 제한된 어시스턴트 활동일 수 있음)로부터 복수의 어시스턴트 쿼리들 및 복수의 어시스턴트 쿼리들 각각에 대한 대응하는 이전 대화 세션의 대응하는 컨텍스트를 획득할 수 있다. 또한, 자동화된 어시스턴트는 복수의 어시스턴트 쿼리들 중 주어진 어시스턴트 쿼리에 대해, 주어진 어시스턴트 쿼리에 대해 위에서 설명한 방식으로 어시스턴트 출력 세트가 생성되도록 할 수 있다. 또한, 자동화된 어시스턴트는 어시스턴트 출력 세트, 대화 세션의 컨텍스트 및/또는 주어진 어시스턴트 쿼리가 하나 이상의 LLM을 사용하여 프로세싱되게 하여, 하나 이상의 LLM을 사용하여 생성된 하나 이상의 LLM 출력에 기초하여 수정된 어시스턴트 출력 세트를 생성한다. 이 프로세스는 복수의 쿼리들 각각과 자동화된 어시스턴트에 의해 획득된 이전 대화 세션의 대응 컨텍스트에 대해 반복될 수 있다.In additional or alternative implementations, the modified assistant response set may be generated using one or more LLM outputs generated in an offline manner. For example, before receiving a spoken utterance, the automated assistant retrieves from an assistant activity database (which may be limited assistant activity of the user of the client device) a plurality of assistant queries and a corresponding previous conversation for each of the plurality of assistant queries. The corresponding context of the session can be obtained. Additionally, the automated assistant may cause an assistant output set to be generated in the manner described above for a given assistant query among a plurality of assistant queries. Additionally, an automated assistant can cause a set of assistant outputs, the context of a conversation session, and/or a given assistant query to be processed using one or more LLMs to produce modified assistant output based on one or more LLM outputs generated using one or more LLMs. Create a set. This process can be repeated for each of the plurality of queries and the corresponding context from a previous conversation session obtained by the automated assistant.
또한 자동화된 어시스턴트는 사용자의 클라이언트 디바이스에서 액세스 가능한 메모리에서 하나 이상의 LLM 출력을 인덱싱할 수 있다. 일부 구현예에서, 자동화된 어시스턴트는 복수의 어시스턴트 쿼리들에 포함된 하나 이상의 용어에 기초하여 하나 이상의 LLM이 메모리에 인덱싱되도록 할 수 있다. 추가적 또는 대안적 구현예에서, 자동화된 어시스턴트는 복수의 어시스턴트 쿼리들 각각에 대한 대응 임베딩(예를 들어, word2vec 임베딩 또는 다른 저차원 표현)을 생성하고, 대응 임베딩 각각을 어시스턴트 쿼리 임베딩 공간에 매핑하여 하나 이상의 LLM 출력을 인덱싱한다. 추가적 또는 대안적 구현예에서, 자동화된 어시스턴트는 대응하는 이전 컨텍스트에 포함된 하나 이상의 컨텍스트 신호에 기초하여 하나 이상의 LLM이 메모리에 인덱싱되도록 할 수 있다. 추가적 또는 대안적 구현예에서, 자동화된 어시스턴트는 대응하는 컨텍스트 각각에 대해 대응하는 임베딩을 생성하고, 대응하는 임베딩 각각을 컨텍스트 임베딩 공간에 매핑하여 하나 이상의 LLM 출력을 인덱싱할 수 있다. 추가적 또는 대안적 구현예에서, 자동화된 어시스턴트는 복수의 어시스턴트 쿼리들 각각에 대한 어시스턴트 출력 세트에 포함된 어시스턴트 출력의 하나 이상의 용어 또는 문구에 기초하여 하나 이상의 LLM가 메모리에 인덱싱되도록 할 수 있다. 추가적 또는 대안적 구현예에서, 자동화된 어시스턴트는 어시스턴트 출력 세트에 포함된 어시스턴트 출력 각각에 대한 대응 임베딩(예를 들어, word2vec 임베딩 또는 다른 저차원 표현)을 생성하고, 대응 임베딩 각각을 어시스턴트 쿼리 임베딩 공간에 매핑하여 하나 이상의 LLM 출력을 인덱싱한다. The automated assistant may also index one or more LLM outputs in memory accessible on the user's client device. In some implementations, an automated assistant can cause one or more LLMs to be indexed in memory based on one or more terms included in a plurality of assistant queries. In an additional or alternative implementation, the automated assistant generates a corresponding embedding (e.g., a word2vec embedding or other low-dimensional representation) for each of the plurality of assistant queries, and maps each corresponding embedding to the assistant query embedding space to Indexes one or more LLM outputs. In additional or alternative implementations, the automated assistant may cause one or more LLMs to be indexed in memory based on one or more context signals contained in a corresponding previous context. In additional or alternative implementations, the automated assistant may index one or more LLM outputs by generating a corresponding embedding for each corresponding context and mapping each of the corresponding embeddings to the context embedding space. In an additional or alternative implementation, the automated assistant may cause one or more LLMs to be indexed in memory based on one or more terms or phrases in the assistant output included in the assistant output set for each of the plurality of assistant queries. In an additional or alternative implementation, the automated assistant generates a corresponding embedding (e.g., a word2vec embedding or other low-dimensional representation) for each of the assistant outputs included in the assistant output set, and stores each of the corresponding embeddings in the assistant query embedding space. Index one or more LLM outputs by mapping to .
따라서, 음성 발화가 추후에 사용자의 클라이언트 디바이스에서 수신되면, 자동화된 어시스턴트는 복수의 쿼리들에 포함된 하나 이상의 어시스턴트 쿼리에 대응하는 현재 어시스턴트 쿼리, 하나 이상의 대응하는 이전 컨텍스트에 대응하는 현재 컨텍스트 및/또는 하나 이상의 이전 어시스턴트 출력에 대응하는 하나 이상의 현재 어시스턴트 출력에 기초하여 이전에 생성된 하나 이상의 LLM 출력을 식별할 수 있다. 예를 들어, 하나 이상의 LLM 출력이 이전 어시스턴트 쿼리에 대한 대응하는 임베딩에 기초하여 인덱싱되는 구현예에서, 자동화된 어시스턴트는 현재 어시스턴트 쿼리에 대한 임베딩이 생성되어 어시스턴트 쿼리 임베딩 공간에 매핑되도록 할 수 있다. 또한, 자동화된 어시스턴트는 쿼리 임베딩 공간에서 현재 어시스턴트 쿼리에 대한 임베딩과 임계값을 만족하는 이전 어시스턴트 쿼리에 대한 대응하는 임베딩 사이의 거리에 기초하여 현재 어시스턴트 쿼리가 이전 어시스턴트 쿼리에 대응된다고 결정할 수 있다. 자동화된 어시스턴트는 이전 어시스턴트 쿼리 프로세싱에 기초하여 생성된 하나 이상의 LLM 출력을 메모리로부터 얻을 수 있고, 수정된 어시스턴트 출력 세트를 생성할 때 하나 이상의 LLM 출력을 활용할 수 있다. 또한, 예를 들어, 하나 이상의 LLM이 복수의 어시스턴트 쿼리들에 포함된 하나 이상의 용어에 기초하여 인덱싱되는 구현예에서, 자동화된 어시스턴트는 예를 들어 현재 어시스턴트 쿼리와 복수의 이전 어시스턴트 쿼리들 사이의 편집 거리를 결정하여 현재 어시스턴트 쿼리에 대응하는 이전 어시스턴트 쿼리를 식별할 수 있다. 유사하게, 자동화된 어시스턴트는 이전 어시스턴트 쿼리 프로세싱에 기초하여 생성된 하나 이상의 LLM 출력을 메모리로부터 획득하고, 수정된 어시스턴트 출력 세트를 생성할 때 하나 이상의 LLM 출력을 활용할 수 있다. Accordingly, when a spoken utterance is later received at the user's client device, the automated assistant may generate a current assistant query corresponding to one or more assistant queries included in the plurality of queries, a current context corresponding to one or more corresponding previous contexts, and/ Alternatively, one or more previously generated LLM outputs may be identified based on one or more current assistant outputs that correspond to one or more previous assistant outputs. For example, in an implementation where one or more LLM outputs are indexed based on corresponding embeddings for previous assistant queries, the automated assistant can cause an embedding for the current assistant query to be generated and mapped to the assistant query embedding space. Additionally, the automated assistant may determine that the current assistant query corresponds to a previous assistant query based on the distance in the query embedding space between the embedding for the current assistant query and the corresponding embedding for the previous assistant query that satisfies the threshold. The automated assistant can obtain from memory one or more LLM outputs generated based on previous assistant query processing and utilize the one or more LLM outputs when generating a modified set of assistant outputs. Additionally, for example, in an implementation in which one or more LLMs are indexed based on one or more terms included in a plurality of assistant queries, the automated assistant may perform an edit function, for example, between the current assistant query and the plurality of previous assistant queries. By determining the distance, we can identify previous assistant queries that correspond to the current assistant query. Similarly, an automated assistant may obtain from memory one or more LLM outputs generated based on previous assistant query processing and utilize the one or more LLM outputs when generating a set of modified assistant outputs.
일부 구현예에서, 하나 이상의 LLM 출력 외에도, 어시스턴트 쿼리 및/또는 대화 세션의 컨텍스트 프로세싱에 기초하여 추가 어시스턴트 쿼리가 생성될 수 있다. 예를 들어, 어시스턴트 쿼리 및/또는 대화 세션의 컨텍스트를 프로세싱할 때 자동화된 어시스턴트는 NLU 데이터 스트림에 기초하여 주어진 어시스턴트 쿼리와 연관된 의도를 결정할 수 있다. 또한, 자동화된 어시스턴트는 주어진 어시스턴트 쿼리와 연관된 의도에 기초하여, 어시스턴트 쿼리와 연관된 의도와 관련된 적어도 하나의 관련 의도를 식별할 수 있다(예를 들어, 상기 의도와 클라이언트 디바이스에 액세스할 수 있는 데이터베이스 또는 메모리의 적어도 하나의 관련 의도의 매핑에 기초하여 및/또는 하나 이상의 기계 학습(ML) 모델 또는 경험적으로 정의된 규칙을 사용하여 주어진 어시스턴트 쿼리와 연관된 의도 프로세싱에 기초하여). 더욱이, 자동화된 어시스턴트는 적어도 하나의 관련 의도에 기초하여 추가적인 어시스턴트 쿼리를 생성할 수 있다. 예를 들어, 어시스턴트 쿼리가 사용자가 해변에 갈 것임을 나타낸다고 가정한다(예: "Hey assistant, I’m going to the beach today"). 이 예에서 추가 어시스턴트 쿼리는 예를 들어 "what’s the weather at Example Beach?"에 대응할 수 있다(예를 들어 사용자가 일반적으로 방문하는 Example Beach라는 해변의 날씨 정보를 사전적으로 확인하기 위해). 특히, 클라이언트 디바이스의 사용자에게 제시하기 위한 추가 어시스턴트 쿼리가 제공되지 않을 수도 있다.In some implementations, in addition to one or more LLM outputs, additional assistant queries may be generated based on context processing of the assistant query and/or conversation session. For example, when processing an assistant query and/or the context of a conversation session, an automated assistant can determine the intent associated with a given assistant query based on the NLU data stream. Additionally, based on the intent associated with a given assistant query, the automated assistant may identify at least one related intent associated with the intent associated with the assistant query (e.g., a database accessible to the intent and the client device, or based on a mapping of at least one associated intent in memory and/or based on processing the intent associated with a given assistant query using one or more machine learning (ML) models or empirically defined rules). Moreover, the automated assistant may generate additional assistant queries based on at least one relevant intent. For example, assume the assistant query indicates that the user is going to the beach (e.g., “Hey assistant, I’m going to the beach today”). In this example, an additional Assistant query could correspond to, for example, “what’s the weather at Example Beach?” (e.g., to proactively check weather information for a beach named Example Beach that the user typically visits). In particular, no additional assistant queries may be provided for presentation to the user of the client device.
오히려, 이러한 구현예에서, 추가 어시스턴트 쿼리 프로세싱에 기초하여 추가 어시스턴트 출력이 결정될 수 있다. 예를 들어, 자동화된 어시스턴트는 추가 어시스턴트 출력으로서 날씨 정보를 얻기 위해 구조화된 요청을 하나 이상의 1P 및/또는 3P 시스템에 전송할 수 있다. 또한 날씨 정보에 따르면 Example Beach에 비가 올 것으로 예상된다고 가정한다. 이러한 구현예의 일부 버전에서, 자동화된 어시스턴트는 수정된 추가 어시스턴트 출력 세트를 생성하기 위해 하나 이상의 LLM 출력 및/또는 하나 이상의 추가 LLM 출력을 사용하여 추가 어시스턴트가 프로세싱되도록 할 수 있다. 따라서 위에 제공된 초기 예에서, "Hey Assistant, I’m thinking about going surfing today"라는 음성 발화를 수신하는 것에 응답하여 사용자에게 제공되는 수정된 어시스턴트 출력의 초기 세트 중 주어진 수정된 어시스턴트 출력은 "Enjoy it"일 수 있고, 수정된 추가 어시스턴트 출력 세트 중 주어진 수정된 추가 어시스턴트 출력은 "but if you’re going to Example Beach again, be prepared for some light showers"일 수 있다. 다르게 말하면, 자동화된 어시스턴트Rather, in such implementations, additional assistant output may be determined based on additional assistant query processing. For example, an automated assistant may send structured requests to one or more 1P and/or 3P systems to obtain weather information as additional assistant output. Also assume that according to the weather information, it is expected to rain at Example Beach. In some versions of this implementation, the automated assistant may cause additional assistants to be processed using one or more LLM outputs and/or one or more additional LLM outputs to generate a set of modified additional assistant outputs. Thus, in the initial example provided above, of the initial set of modified assistant outputs presented to the user in response to receiving the spoken utterance "Hey Assistant, I'm thinking about going surfing today", a given modified assistant output would be "Enjoy it" ", and a given modified additional assistant output among the set of modified additional assistant outputs may be "but if you're going to Example Beach again, be prepared for some light showers." In other words, automated assistants
다양한 구현예에서, 수정된 어시스턴트 출력 세트를 생성할 때, 활용되는 하나 이상의 LLM 출력 각각은 복수의 이종 파라미터 세트 중 대응하는 파라미터 세트를 사용하여 생성될 수 있다. 복수의 이종 파라미터 세트들 각각은 자동화된 어시스턴트에 대한 이종 성격과 연관될 수 있다. 상기 구현예 중 일부 버전에서, 단일 LLM을 활용하여 이종 성격 각각에 대한 대응하는 파라미터 세트를 사용하여 하나 이상의 대응하는 LLM 출력을 생성할 수 있고, 상기 구현예의 다른 버전에서, 다수의 LLM을 활용하여 이종 성격 각각에 대한 대응하는 파라미터 세트를 사용하여 하나 이상의 대응하는 LLM 출력을 생성할 수 있다. 따라서, 수정된 어시스턴트 출력 세트 중 주어진 수정된 어시스턴트 출력이 사용자에게 제시하기 위해 제공되면, 이는 상이한 성격의 운율 속성(예: 이러한 다양한 성격의 억양, 종지, 음높이, 일시정지, 템포, 스트레스, 리듬 등)을 통해 다양한 동적 컨텍스트 성격을 반영할 수 있다. In various implementations, when generating a modified assistant output set, each of the one or more LLM outputs utilized may be generated using a corresponding parameter set from a plurality of heterogeneous parameter sets. Each of the plurality of heterogeneous parameter sets may be associated with a heterogeneous personality for the automated assistant. In some versions of the above implementations, a single LLM may be utilized to generate one or more corresponding LLM outputs using corresponding parameter sets for each of the heterogeneous personalities, and in other versions of the above implementations multiple LLMs may be utilized One or more corresponding LLM outputs can be generated using the corresponding parameter sets for each heterogeneous personality. Accordingly, when a given set of modified assistant outputs is provided for presentation to a user, it has prosodic properties of different natures (e.g. intonation, cadence, pitch, pause, tempo, stress, rhythm, etc. of these different natures). ) can reflect various dynamic context characteristics.
특히, 본 명세서에 기술된 이러한 성격 응답은 서로 다른 성격의 운율 속성을 반영할 뿐만 아니라, 서로 다른 성격의 서로 다른 어휘 및/또는 서로 다른 성격의 서로 다른 말하기 스타일(예: 장황한 말하기 스타일, 간결한 말하기 스타일 등)을 반영할 수 있다. 예를 들어, 사용자에게 제시하기 위해 제공되는 주어진 수정된 어시스턴트 출력은 자동화된 어시스턴트에 의해 활용될 제1 어휘 및/또는 사용자에게 청각적으로 제시하기 위해 수정된 어시스턴트 출력을 제공하는데 활용되는 운율 속성 세트와 관련하여 자동화된 어시스턴트의 제1 성격을 반영하는 제1 파라미터 세트를 사용하여 생성될 수 있다. 대안적으로, 사용자에게 제시하기 위해 제공되는 수정된 어시스턴트 출력은 자동화된 어시스턴트에 의해 활용될 제2 어휘 및/또는 사용자에게 청각적으로 제시하기 위해 수정된 어시스턴트 출력을 제공하는데 활용되는 제2 운율 속성 세트와 관련하여 자동화된 어시스턴트의 제2 성격을 반영하는 제2 파라미터 세트를 사용하여 생성될 수 있다. In particular, these personality responses described herein not only reflect the prosodic properties of different personalities, but also the different vocabularies of different personalities and/or the different speaking styles of different personalities (e.g., verbose speaking style, concise speaking style). style, etc.). For example, a given modified assistant output provided for presentation to a user may include a first vocabulary to be utilized by the automated assistant and/or a set of prosodic properties utilized to provide the modified assistant output for auditory presentation to the user. It may be created using a first set of parameters that reflect the first personality of the automated assistant in relation to. Alternatively, the modified assistant output provided for presentation to the user may include a second vocabulary to be utilized by the automated assistant and/or a second prosodic property utilized to provide the modified assistant output for aural presentation to the user. A second parameter set may be created using a second parameter set that reflects a second personality of the automated assistant with respect to the set.
따라서, 자동화된 어시스턴트는 자동화된 어시스턴트에 의해 활용되는 어휘와 사용자에게 청각적으로 제시하기 위해 수정된 어시스턴트 출력을 렌더링하는데 활용되는 운율 속성 둘 모두에 기초하여 사용자에게 제시하기 위한 수정된 어시스턴트 출력을 제공하는데 활용되는 성격을 동적으로 적응시킬 수 있다. 특히, 자동화된 어시스턴트는 사용자로부터 수신된 이전 음성 발화 및 자동화된 어시스턴트에 의해 제공되는 이전 어시스턴트 출력 및/또는 본 명세서에 기술된 임의의 다른 컨텍스트 신호를 포함하는 대화 세션의 컨텍스트에 기초하여 수정된 어시스턴트 출력을 제공하는데 활용되는 이들 성격을 동적으로 적응시킬 수 있다. 결과적으로, 자동화된 어시스턴트에 의해 제공되는 수정된 어시스턴트 출력은 클라이언트 디바이스의 사용자와 더 잘 공감할 수 있다. 더욱이, 주어진 대화 세션 전반에 걸쳐 사용되는 성격은 주어진 대화 세션의 컨텍스트가 업데이트됨에 따라 동적으로 적응될 수 있다는 점에 유의해야 한다.Accordingly, the automated assistant provides modified assistant output for presentation to the user based on both the vocabulary utilized by the automated assistant and the prosodic properties utilized to render the modified assistant output for auditory presentation to the user. The personality used can be dynamically adapted. In particular, the automated assistant is an assistant that is modified based on the context of the conversation session, including previous vocal utterances received from the user and previous assistant output provided by the automated assistant and/or any other context signals described herein. These characteristics can be dynamically adapted to be used to provide output. As a result, the modified assistant output provided by the automated assistant may better resonate with the user of the client device. Furthermore, it should be noted that the personality used throughout a given conversation session may be dynamically adapted as the context of a given conversation session is updated.
일부 구현예에서, 자동화된 어시스턴트는 하나 이상의 순위 기준에 따라 어시스턴트 출력 세트(즉, 하나 이상의 LLM 출력을 사용하여 생성되지 않음)에 포함된 어시스턴트 출력 및 수정된 어시스턴트 출력(즉, 하나 이상의 LLM 출력을 사용하여 생성됨)의 순위를 매길 수 있다. 따라서, 사용자에게 제시하기 위해 제공될 주어진 어시스턴트 출력을 선택할 때, 자동화된 어시스턴트는 어시스턴트 출력 세트와 수정된 어시스턴트 출력 세트 둘 모두로부터 선택할 수 있다. 하나 이상의 순위 기준은 예를 들어, 어시스턴트 출력 세트 및 수정된 어시스턴트 출력 세트에 포함된 각각의 어시스턴트 출력이 음성 발화에 포함된 어시스턴트 쿼리, NLU 출력 스트림에 포함된 하나 이상의 의도 및/또는 기타 순위 기준에 대해 어떻게 응답하는지를 나타내는 하나 이상의 예측 측정값(예를 들어, ASR 출력 스트림을 생성할 때 생성된 ASR 측정값, NLU 출력 스트림을 생성할 때 생성된 NLU 측정값, 어시스턴트 출력을 생성할 때 생성된 이행 측정값)을 포함할 수 있다. 예를 들어, 클라이언트 디바이스 사용자의 의도가 사용자가 사실적 답변을 원한다는 것을 나타내는 경우(예를 들어 "why is the sky blue?"라는 어시스턴트 쿼리를 포함하는 음성 발화 제공에 기초함), 사용자가 어시스턴트 쿼리에 대한 간단한 답변을 원할 가능성이 높기 때문에 자동화된 어시스턴트는 하나 이상의 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 승격할 수 있다. 그러나 클라이언트 디바이스 사용자의 의도가 사용자가 더 개방형 입력을 제공했음을 나타내는 경우(예를 들어, "what time is it?"라는 어시스턴트 쿼리를 포함하는 음성 발화 제공에 기초함), 자동화된 어시스턴트는 사용자가 더 대화적인 측면을 선호할 가능성이 높기 때문에 수정된 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 승격할 수 있다. In some implementations, an automated assistant can select assistant outputs included in a set of assistant outputs (i.e., not generated using one or more LLM outputs) and modified assistant outputs (i.e., one or more LLM outputs) according to one or more ranking criteria. (generated using) can be ranked. Accordingly, when selecting a given assistant output to be presented for presentation to the user, the automated assistant may select from both the assistant output set and the modified assistant output set. One or more ranking criteria may be used to determine whether each assistant output included in the assistant output set and the modified assistant output set matches, for example, an assistant query included in a speech utterance, one or more intents included in an NLU output stream, and/or other ranking criteria. One or more predictive measurements that indicate how the response will respond (e.g., ASR measurements generated when generating an ASR output stream, NLU measurements generated when generating an NLU output stream, transitions generated when generating assistant output) measurement values) may be included. For example, if the client device user's intent indicates that the user wants a factual answer (for example, based on providing a spoken utterance that includes the Assistant query "why is the sky blue?"), the user may respond to the Assistant query Because you'll likely want a simple answer to your question, an automated assistant can promote one or more assistant outputs that are included in one or more assistant output sets. However, if the client device user's intent indicates that the user has provided more open-ended input (for example, based on providing a spoken utterance that includes the assistant query "what time is it?"), the automated assistant may be able to provide more open-ended input. Since you likely prefer the conversational aspect, you can promote one or more assistant outputs included in the modified assistant output set.
일부 구현예에서, 수정된 어시스턴트 출력 세트를 생성하기 전에, 자동화된 어시스턴트는 수정된 어시스턴트 출력 세트를 생성할지 여부도 결정할 수 있다. 상기 구현예 중 일부 버전에서, 자동화된 어시스턴트는 NLU 데이터 스트림에 의해 표시된 바와 같이 음성 발화를 제공할 때 사용자의 예측된 의도 중 하나 이상에 기초하여 수정된 어시스턴트 출력 세트를 생성할지 여부를 결정할 수 있다. 예를 들어, 음성 발화가 자동화된 어시스턴트에게 검색을 수행하도록 요청한다고 자동화된 어시스턴트가 결정하는 구현예에서(예를 들어, "Why is the sky blue?"라는 어시스턴트 쿼리), 사용자가 사실적인 답변을 찾고 있기 때문에 자동화된 어시스턴트는 수정된 어시스턴트 출력 세트를 생성하지 않기로 결정할 수 있다. 그러한 구현예의 추가적 또는 대안적 버전에서, 자동화된 어시스턴트는 하나 이상의 어시스턴트 출력을 수정하는 것과 연관된 하나 이상의 계산 비용에 기초하여 수정된 어시스턴트 출력 세트를 생성할지 여부를 결정할 수 있다. 하나 이상의 어시스턴트 출력을 수정하는 것과 연관된 하나 이상의 계산 비용은 예를 들면, 배터리 소비, 하나 이상의 어시스턴트 출력을 수정하는 것과 연관된 프로세서 소비 또는 하나 이상의 어시스턴트 출력을 수정하는 것과 연관된 레이턴시 중 하나 이상을 포함할 수 있다. 예를 들어, 클라이언트 디바이스가 저전력 모드에 있는 경우, 자동화된 어시스턴트는 클라이언트 디바이스의 배터리 소모를 줄이기 위해 수정된 어시스턴트 출력 세트를 생성하지 않기로 결정할 수 있다.In some implementations, prior to generating the modified assistant output set, the automated assistant may also determine whether to generate the modified assistant output set. In some versions of the above implementations, the automated assistant may determine whether to produce a modified set of assistant outputs based on one or more of the user's predicted intentions when providing the spoken utterance, as indicated by the NLU data stream. . For example, in an implementation where the automated assistant determines that a spoken utterance requests the automated assistant to perform a search (e.g., the assistant query “Why is the sky blue?”), the user may provide a factual answer. Because it is looking for an automated assistant, it may decide not to produce a modified set of assistant output. In additional or alternative versions of such implementations, the automated assistant may determine whether to generate a set of modified assistant outputs based on one or more computational costs associated with modifying one or more assistant outputs. One or more computational costs associated with modifying one or more assistant outputs may include, for example, one or more of battery consumption, processor consumption associated with modifying one or more assistant outputs, or latency associated with modifying one or more assistant outputs. there is. For example, if the client device is in a low-power mode, the automated assistant may decide not to produce a modified set of assistant output to reduce battery drain on the client device.
본 명세서에 기술된 기법을 사용함으로써, 하나 이상의 기술적 이점이 달성될 수 있다. 비제한적인 일례로서, 본 명세서에 설명된 기법은 자동화된 어시스턴트가 대화 세션 동안 사용자와 자연스러운 대화에 참여할 수 있게 한다. 예를 들어, 자동화된 어시스턴트는 본질적으로 더 대화적인 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력을 생성할 수 있다. 따라서, 자동화된 어시스턴트는 사용자가 직접 요청하지 않은 대화 세션과 연관된 컨텍스트 정보를 사전적으로 제공할 수 있어서(예를 들어, 본 명세서에 설명된 추가 어시스턴트 쿼리를 생성하고 추가 어시스턴트 쿼리에 기초하여 결정된 추가 어시스턴트 출력을 제공함으로써), 수정된 어시스턴트 출력이 사용자에게 공감되도록 한다. 또한, 수정된 어시스턴트 출력은 대화 세션 전체에 걸쳐 컨텍스트적으로 적응되는 어휘와 수정된 어시스턴트 출력을 청각적으로 렌더링하는데 활용되는 운율 속성 둘 모두의 측면에서 다양한 성격으로 생성될 수 있으며, 그에 따라 수정된 어시스턴트 출력이 훨씬 더 사용자와 공감할 수 있게 한다. 이는 클라이언트 디바이스에서 계산 리소스를 보존하는 다양한 기술적 이점을 가져오고, 대화 세션이 더 빠르고 효율적인 방식으로 종료되도록 하거나 대화 세션의 양을 줄일 수 있다. 예를 들어, 대화 세션과 컨텍스트적으로 관련된 정보를 요청해야 하는 사용자의 발생 횟수를 감소시킬 수 있으므로 클라이언트 디바이스에서 수신되는 사용자 입력의 양이 감소될 수 있다. 이는 정보가 사용자에게 제시하기 위해 자동화된 어시스턴트에 의해 사전적으로 제공될 수 있기 때문이다. 또한, 예를 들어, 하나 이상의 LLM 출력이 오프라인 방식으로 생성되고 후속적으로 온라인 방식으로 활용되는 구현예에서 런타임 시 레이턴시가 감소될 수 있다. By using the techniques described herein, one or more technical advantages may be achieved. As a non-limiting example, the techniques described herein allow an automated assistant to engage in a natural conversation with a user during a conversation session. For example, an automated assistant may use one or more LLM outputs to produce modified assistant output that is more interactive in nature. Accordingly, an automated assistant can proactively provide context information associated with a conversational session that was not directly requested by the user (e.g., generate additional assistant queries as described herein and determine additional assistant queries based on the additional assistant queries). by providing output), ensuring that the modified assistant output resonates with the user. Additionally, modified assistant output can be generated with a variety of characters, both in terms of vocabulary that is contextually adapted across conversation sessions and in terms of prosodic properties utilized to aurally render the modified assistant output, and thus the modified assistant output. Makes assistant output much more relatable to users. This brings a variety of technical benefits that preserve computational resources on the client device, allow conversation sessions to terminate in a faster and more efficient manner, or reduce the volume of conversation sessions. For example, the amount of user input received at the client device can be reduced by reducing the number of times a user must request information contextually related to a conversation session. This is because information can be provided proactively by an automated assistant for presentation to the user. Additionally, latency at runtime may be reduced, for example, in implementations where one or more LLM outputs are generated in an offline manner and subsequently utilized in an online manner.
본 명세서에서 사용되는 "대화 세션"은 사용자와 자동화된 어시스턴트(일부 경우에 다른 사람 참가자) 사이의 논리적으로 자체 포함된 교환을 포함할 수 있다. 자동화된 어시스턴트는 세션들 간의 시간의 경과, 세션들 간의 사용자 컨텍스트의 변화(예를 들어, 위치, 예정된 미팅 전/중/후 등), 사용자와 자동화된 어시스턴트 사이의 대화 이외의 사용자와 클라이언트 디바이스 사이의 하나 이상의 개입 인터렉션들의 검출(예를 들어, 사용자가 잠시 동안 애플리케이션을 전환하고, 사용자는 멀어졌다가 나중에 독립형 음성 활성화 제품으로 돌아옴), 세션들 사이의 클라이언트 디바이스의 잠금/슬립, 자동화된 어시스턴트와의 인터페이스에 사용되는 클라이언트 디바이스의 변경 등과 같은 다양한 신호들에 기초하여 사용자와의 다수의 대화 세션들을 구별할 수 있다. 특히, 주어진 대화 세션 동안 사용자는 음성 입력, 타이핑 입력 및/또는 터치 입력을 포함하지만 이에 제한되지 않는 다양한 입력 양식을 사용하여 자동화된 어시스턴트와 인터렉션할 수 있다.As used herein, a “conversational session” may include a logically self-contained exchange between a user and an automated assistant (and in some cases other human participants). The automated assistant may not be able to detect the passage of time between sessions, changes in user context between sessions (e.g. location, before/during/after a scheduled meeting, etc.), or any interaction between the user and the client device other than the conversation between the user and the automated assistant. Detection of one or more intervening interactions (e.g., the user switches applications for a moment, the user walks away and later returns to the standalone voice-activated product), locking/sleeping the client device between sessions, automated assistants and Multiple conversation sessions with a user can be distinguished based on various signals, such as a change in the client device used in the interface. In particular, during a given conversation session, a user may interact with the automated assistant using a variety of input modalities, including but not limited to voice input, typing input, and/or touch input.
상기 설명은 본 명세서에 개시된 단지 일부 구현예의 개요로서 제공된다. 이러한 구현예 및 기타 구현예에 대한 추가 설명은 본 명세서에서 더 자세히 설명된다.The above description is provided as an overview of only some implementations disclosed herein. Additional descriptions of these and other implementations are described in more detail herein.
본 명세서에 개시된 기법은 클라이언트 디바이스에서 로컬로, 하나 이상의 네트워크를 통해 클라이언트 디바이스에 연결된 서버(들)에 의해 원격으로 및/또는 둘 모두를 통해 구현될 수 있음을 이해해야 한다.It should be understood that the techniques disclosed herein may be implemented locally on a client device, remotely by server(s) connected to the client device through one or more networks, and/or both.
도 1은 본 개시의 다양한 양태를 시연하고 본 명세서에 개시된 구현예가 구현될 수 있는 예시적 환경의 블록도를 도시한다.
도 2는 다양한 구현예에 따라 어시스턴트 출력(들)을 생성할 때 대규모 언어 모델을 활용하는 예시적 프로세스 흐름을 도시한다.
도 3은 다양한 구현예에 따라 온라인 방식으로 후속 사용을 위해 오프라인 방식으로 어시스턴트 출력(들)을 생성할 때 대규모 언어 모델을 활용하는 예시적 방법을 나타내는 흐름도를 도시한다.
도 4는 다양한 구현예에 따라 어시스턴트 쿼리 생성에 기초하여 어시스턴트 출력(들)을 생성할 때 대규모 언어 모델을 활용하는 예시적 방법을 나타내는 흐름도를 도시한다.
도 5는 다양한 구현예에 따라 어시스턴트 성격 응답 생성에 기초하여 어시스턴트 출력(들)을 생성할 때 대규모 언어 모델을 활용하는 예시적 방법을 나타내는 흐름도를 도시한다.
도 6은 다양한 구현에 따라 자동화된 어시스턴트가 어시스턴트 출력(들)을 생성할 때 대규모 언어 모델(들)을 활용하는 사용자와 자동화된 어시스턴트 사이의 대화 세션의 비제한적인 예를 도시한다.
도 7은 다양한 구현예에 따른 컴퓨팅 디바이스의 예시적 아키텍처를 도시한다.1 illustrates a block diagram of an example environment demonstrating various aspects of the present disclosure and in which implementations disclosed herein may be implemented.
2 illustrates an example process flow utilizing a large-scale language model when generating assistant output(s) according to various implementations.
3 depicts a flow diagram illustrating an example method of utilizing a large-scale language model in generating assistant output(s) in an offline manner for subsequent use in an online manner according to various implementations.
4 shows a flow diagram illustrating an example method of utilizing a large-scale language model in generating assistant output(s) based on assistant query generation according to various implementations.
Figure 5 depicts a flow diagram illustrating an example method of utilizing a large-scale language model in generating assistant output(s) based on assistant personality response generation according to various implementations.
6 depicts a non-limiting example of a conversational session between a user and an automated assistant in which the automated assistant utilizes large-scale language model(s) in generating assistant output(s) according to various implementations.
7 illustrates an example architecture of a computing device according to various implementations.
이제 도 1로 돌아가면, 본 개시의 다양한 양태를 시연하고 본 명세서에 개시된 구현예가 구현될 수 있는 예시적 환경(100)의 블록도가 도시된다. 예시적 환경(100)은 클라이언트 디바이스(110) 및 자연스러운 대화 시스템(120)을 포함할 수 있다. 일부 구현예에서, 자연스러운 대화 시스템(120)은 클라이언트 디바이스(110) 상에서 로컬적으로 구현될 수 있다. 추가적 또는 대안적 구현예에서, 자연스러운 대화 시스템(120)은 도 1에 도시된 바와 같이 클라이언트 디바이스(110)로부터 원격으로 구현될 수 있다(예: 원격 서버). 이러한 구현예에서, 클라이언트 디바이스(110) 및 자연스러운 대화 시스템(120)은 하나 이상의 유선 또는 무선 근거리 통신망(Wi-Fi LAN을 포함하는 "LAN", 메시 네트워크, Bluetooth, 근거리 통신 등) 또는 광역 네트워크(인터넷을 포함한 "WAN")와 같은 하나 이상의 네트워크(199)를 통해 서로 통신적으로 연결될 수 있다. Turning now to FIG. 1 , a block diagram of an example environment 100 is shown that demonstrates various aspects of the disclosure and in which implementations disclosed herein may be implemented. Example environment 100 may include a client device 110 and a natural conversation system 120. In some implementations, natural conversation system 120 may be implemented locally on client device 110. In additional or alternative implementations, natural conversation system 120 may be implemented remotely from client device 110 (e.g., a remote server), as shown in Figure 1. In this implementation, client device 110 and natural conversation system 120 are connected to one or more wired or wireless local area networks (“LANs” including Wi-Fi LANs, mesh networks, Bluetooth, near field communications, etc.) or wide area networks ( They may be communicatively connected to each other through one or more networks 199, such as a “WAN” including the Internet.
클라이언트 디바이스(110)는 예를 들어, 데스크톱 컴퓨터, 랩톱 컴퓨터, 태블릿, 모바일폰, 차량의 컴퓨팅 디바이스(예를 들어, 차량 내 통신 시스템, 차량 내 엔터테인먼트 시스템, 차량 내 네비게이션 시스템), 단독형 인터렉티브 스피커(선택적으로 디스플레이 포함), 스마트 텔레비전과 같은 스마트 기기 및/또는 컴퓨팅 디바이스를 포함하는 사용자의 웨어러블 장치(예를 들어, 컴퓨팅 디바이스를 구비한 사용자의 시계, 컴퓨팅 디바이스를 구비한 사용자의 안경, 가상 또는 증강 현실 컴퓨팅 디바이스)일 수 있다. 추가적 및/또는 대안적 클라이언트 디바이스이 제공될 수 있다.Client device 110 may include, for example, a desktop computer, a laptop computer, a tablet, a mobile phone, a computing device in a vehicle (e.g., an in-vehicle communication system, an in-vehicle entertainment system, an in-vehicle navigation system), and a stand-alone interactive speaker. (optionally including a display), a smart device, such as a smart television, and/or a user's wearable device, including a computing device (e.g., a user's watch with a computing device, a user's glasses with a computing device, a virtual or It may be an augmented reality computing device). Additional and/or alternative client devices may be provided.
클라이언트 디바이스(110)는 자동화된 어시스턴트 클라이언트(114)를 실행한다. 자동화된 어시스턴트 클라이언트(114)의 인스턴스는 클라이언트 디바이스(110)의 운영 체제와 별개의 애플리케이션일 수 있거나(예를 들어, 운영 체제 "상에" 설치됨), 또는 대안적으로 클라이언트 디바이스(110)의 운영 체제에 의해 직접 구현될 수 있다. 자동화된 어시스턴트 클라이언트(114)는 도 1에 도시된 바와 같이 클라이언트 디바이스(110)에서 로컬로 구현되거나 원격으로 구현되고 하나 이상의 네트워크(199)를 통해 호출되는 자연스러운 대화 시스템(120)과 인터렉션할 수 있다. 자동화된 어시스턴트 클라이언트(114)(및 선택적으로 다른 원격 시스템(예: 서버(들)과의 인터렉션들에 의한)는 사용자의 관점에서 사용자가 사람-대-컴퓨터 대화에 참여할 수 있게 하는 자동화된 어시스턴트(115)의 논리적 인스턴스로 보이는 것을 형성할 수 있다. 이러한 자동화된 어시스턴트(115)의 인스턴스가 도 1에 도시되고, 클라이언트 디바이스(110)의 자동화된 어시스턴트 클라이언트(114)와 자연스러운 대화 시스템(120)을 포함하는 점선으로 둘러싸여 있다. 따라서, 클라이언트 디바이스(110)상에서 실행되는 자동화된 어시스턴트 클라이언트(114)를 사용하는 사용자는 사실상 자동화된 어시스턴트(115)의 자신의 논리적 인스턴스(또는 가정 또는 다른 그룹의 사용자 사이에서 공유되는 자동화된 어시스턴트(115)의 논리적 인스턴스)를 사용할 수 있음을 이해해야 한다. 간결함과 단순화를 위해, 본 명세서에 사용된 자동화된 어시스턴트(115)는 클라이언트 디바이스(110)에서 로컬로 실행되고 및/또는 자연스러운 대화 시스템(120)을 구현할 수 있는 하나 이상의 원격 서버에서 원격으로 실행되는 자동화된 어시스턴트 클라이언트(114)를 지칭할 것이다. Client device 110 runs automated assistant client 114. An instance of automated assistant client 114 may be an application separate from the operating system of client device 110 (e.g., installed “on” the operating system), or alternatively, may be an application that is separate from the operating system of client device 110. It can be implemented directly by the system. Automated assistant client 114 may interact with a natural conversation system 120 implemented locally or remotely on client device 110 as shown in FIG. 1 and invoked over one or more networks 199. . Automated assistant client 114 (and optionally by interactions with other remote systems (e.g., server(s))) is an automated assistant that allows a user to engage in human-to-computer conversations from the user's perspective ( 115. An instance of such automated assistant 115 is shown in Figure 1, and can be used to form a natural conversation system 120 with an automated assistant client 114 on a client device 110. Accordingly, a user using the automated assistant client 114 running on the client device 110 may in effect have his or her own logical instance of the automated assistant 115 (or household or other group of users). It should be understood that a logical instance of automated assistant 115 may be used (a logical instance of automated assistant 115 shared in. For brevity and simplicity, automated assistant 115 as used herein may run locally on client device 110 and /or may refer to an automated assistant client (114) executing remotely on one or more remote servers capable of implementing a natural conversation system (120).
다양한 구현예에서, 클라이언트 디바이스(110)는 하나 이상의 사용자 인터페이스 입력 디바이스를 사용하여 클라이언트 디바이스(110)의 사용자에 의해 제공된 사용자 입력을 검출하도록 구성된 사용자 입력 엔진(111)을 포함할 수 있다. 예를 들어, 클라이언트 디바이스(110)는 클라이언트 디바이스(110)의 환경에서 사용자의 음성 발화 또는 기타 소리에 대응하는 오디오 데이터와 같은 오디오 데이터를 캡처하는 하나 이상의 마이크가 장착될 수 있다. 추가적으로 또는 대안적으로, 클라이언트 디바이스(110)는 비전 컴포넌트 중 하나 이상의 시야에서 검출된 이미지 및/또는 움직임(예를 들어, 제스처)에 대응하는 비전 데이터를 캡처하도록 구성된 하나 이상의 비전 컴포넌트를 갖추고 있을 수 있다. 추가적으로 또는 대안적으로, 클라이언트 디바이스(110)에는 클라이언트 디바이스(110)에 대한 터치 입력에 대응하는 신호(들)를 캡처하도록 구성되는 하나 이상의 터치 감지 컴포넌트(예를 들어, 키보드 및 마우스, 스타일러스, 터치 스크린, 터치 패널, 하나 이상의 하드웨어 버튼 등)가 장착될 수 있다. In various implementations, client device 110 may include a user input engine 111 configured to detect user input provided by a user of client device 110 using one or more user interface input devices. For example, client device 110 may be equipped with one or more microphones that capture audio data, such as audio data corresponding to a user's vocal utterances or other sounds in the environment of client device 110. Additionally or alternatively, client device 110 may be equipped with one or more vision components configured to capture vision data corresponding to detected images and/or movements (e.g., gestures) in the field of view of one or more of the vision components. there is. Additionally or alternatively, client device 110 includes one or more touch-sensitive components (e.g., keyboard and mouse, stylus, touch It may be equipped with a screen, a touch panel, one or more hardware buttons, etc.).
다양한 구현예에서, 클라이언트 디바이스(110)는 하나 이상의 사용자 인터페이스 출력 디바이스를 사용하여 클라이언트 디바이스(110)의 사용자에게 청각적 및/또는 시각적 제시를 위한 콘텐츠를 제공하도록 구성된 렌더링 엔진(112)을 포함할 수 있다. 예를 들어, 클라이언트 디바이스(110)에는 클라이언트 디바이스(110)를 통해 사용자에게 청각적 제시하기 위해 콘텐츠가 제공되게 하는 하나 이상의 스피커가 장착될 수 있다. 추가적으로 또는 대안적으로, 클라이언트 디바이스(110)에는 클라이언트 디바이스(110)를 통해 사용자에게 시각적으로 제시하기 위해 콘텐츠가 제공되게 하는 디스플레이 또는 프로젝터가 장착될 수 있다. In various implementations, client device 110 may include a rendering engine 112 configured to provide content for audible and/or visual presentation to a user of client device 110 using one or more user interface output devices. You can. For example, client device 110 may be equipped with one or more speakers that allow content to be presented for audible presentation to a user via client device 110 . Additionally or alternatively, client device 110 may be equipped with a display or projector that allows content to be provided for visual presentation to a user via client device 110 .
다양한 구현예에서, 클라이언트 디바이스(110)는 대응하는 사용자(들)로부터 승인을 받아 검출된 존재, 특히 사람의 존재를 표시하는 신호를 제공하도록 구성된 하나 이상의 존재 센서(113)를 포함할 수 있다. 상기 구현예 중 일부에서, 자동화된 어시스턴트(115)는 클라이언트 디바이스에서(또는 클라이언트 디바이스(110)의 사용자와 연관된 다른 컴퓨팅 디바이스에서)의 사용자의 존재에 적어도 부분적으로 기초하여 음성 발화를 만족시키기 위해 클라이언트 디바이스(110)(또는 클라이언트 디바이스(110)의 사용자와 연관된 다른 컴퓨팅 디바이스)를 식별할 수 있다. 발화 발화는 클라이언트 디바이스(110) 및/또는 클라이언트 디바이스(110)의 사용자와 연관된 다른 컴퓨팅 디바이스(들)에서 (예를 들어, 렌더링 엔진(112)을 통해) 응답 콘텐츠를 렌더링함으로써, 클라이언트 디바이스(110) 및/또는 클라이언트 디바이스(110)의 사용자와 연관된 다른 컴퓨팅 디바이스(들)가 제어되게 하고 및/또는 클라이언트 디바이스(110) 및/또는 클라이언트 디바이스(110)의 사용자와 연관된 다른 컴퓨팅 디바이스(들)가 음성 발화를 만족시키기 위해 임의의 기타 액션을 수행하게 함으로써 만족될 수 있다. 본 명세서에 설명된 바와 같이, 자동화된 어시스턴트(115)는 사용자가 근처에 있거나 최근에 근접했던 곳에 기초하여 클라이언트 디바이스(110)(또는 기타 클라이언트 디바이스(들))를 결정할 때 존재 센서(113)에 기초하여 결정된 데이터를 활용하고, 대응하는 명령을 해당 클라이언트 디바이스(110)(또는 기타 컴퓨팅 디바이스(들))에만 제공할 수 있다. 일부 추가적 또는 대안적 구현예에서, 자동화된 어시스턴트(115)는 임의의 사용자(들)(임의의 사용자 또는 특정 사용자)가 현재 클라이언트 디바이스(110)(또는 다른 컴퓨팅 디바이스)에 근접해 있는지 여부를 결정하는데 존재 센서(113)에 기초하여 결정된 데이터를 활용할 수 있고, 선택적으로 클라이언트 디바이스(110)(또는 다른 컴퓨팅 디바이스(들)에 근접한 사용자(들)에 기초하여 클라이언트 디바이스(110)(또는 다른 컴퓨팅 디바이스(들))로 및/또는 그로부터 데이터가 제공되는 것을 억제할 수 있다. In various implementations, client device 110 may include one or more presence sensors 113 configured to provide a signal indicative of a detected presence, particularly the presence of a person, with authorization from the corresponding user(s). In some of the above implementations, automated assistant 115 may interact with a client to satisfy a spoken utterance based at least in part on the user's presence at the client device (or on another computing device associated with the user of client device 110). Device 110 (or another computing device associated with a user of client device 110) may be identified. Speech Speech is performed on client device 110 by rendering response content (e.g., via rendering engine 112) on client device 110 and/or other computing device(s) associated with a user of client device 110. ) and/or cause other computing device(s) associated with the user of client device 110 to be controlled and/or cause client device 110 and/or other computing device(s) associated with the user of client device 110 to be controlled. This can be satisfied by performing any other action to satisfy the voice utterance. As described herein, automated assistant 115 may use presence sensor 113 to determine client device 110 (or other client device(s)) based on where the user is nearby or has recently been. Data determined based on the data may be utilized, and corresponding commands may be provided only to the corresponding client device 110 (or other computing device(s)). In some additional or alternative implementations, automated assistant 115 is configured to determine whether any user(s) (any user or a specific user) is currently in proximity to client device 110 (or another computing device). Data determined based on presence sensor 113 may be utilized and, optionally, based on user(s) in proximity to client device 110 (or other computing device(s)). may suppress data from being provided to and/or therefrom.
존재 센서(113)는 다양한 형태일 수 있다. 예를 들어, 클라이언트 디바이스(110)는 사용자의 존재를 검출하기 위해 사용자 입력 엔진(111)에 대해 위에서 설명된 사용자 인터페이스 입력 컴포넌트 중 하나 이상을 활용할 수 있다. 추가적으로 또는 대안적으로, 클라이언트 디바이스(110)는 시야 내의 오브젝트로부터 방사되는 적외선("IR") 광을 측정하는 패시브 적외선("PIR") 센서와 같은 다른 유형의 광 기반 존재 센서(113)가 장착될 수 있다. Presence sensor 113 may take various forms. For example, client device 110 may utilize one or more of the user interface input components described above for user input engine 111 to detect the presence of a user. Additionally or alternatively, the client device 110 may be equipped with another type of light-based presence sensor 113, such as a passive infrared ("PIR") sensor that measures infrared ("IR") light emitted from objects within the field of view. It can be.
추가적으로 또는 대안적으로, 일부 구현예에서, 존재 센서(113)는 사람 존재 또는 디바이스 존재와 연관된 다른 현상을 검출하도록 구성될 수 있다. 예를 들어, 일부 실시예에서, 클라이언트 디바이스(110)는 예를 들어, 사용자에 의해 휴대/작동되는 다른 컴퓨팅 디바이스(예를 들어, 모바일 디바이스, 웨어러블 컴퓨팅 디바이스 등) 및/또는 다른 컴퓨팅 디바이스에 의해 발산된 다양한 유형의 무선 신호(예를 들어, 라디오와 같은 음파, 초음파, 전자기 등)를 검출하는 존재 센서(113)를 구비할 수 있다. 예를 들어, 클라이언트 디바이스(110)는 다른 컴퓨팅 디바이스(들)에 의해 검출될 수 있는 초음파 또는 적외선과 같이 사람이 인식할 수 없는 파동을 방출하도록 구성될 수 있다(예를 들어, 초음파 지원 마이크와 같은 초음파/적외선 수신기를 통해). Additionally or alternatively, in some implementations, presence sensor 113 may be configured to detect human presence or other phenomena associated with device presence. For example, in some embodiments, client device 110 may be connected to, for example, by another computing device (e.g., mobile device, wearable computing device, etc.) and/or other computing device carried/operated by a user. It may be provided with a presence sensor 113 that detects various types of emitted wireless signals (for example, sound waves such as radio, ultrasonic waves, electromagnetic waves, etc.). For example, client device 110 may be configured to emit waves that are not perceptible to humans, such as ultrasound or infrared, that can be detected by other computing device(s) (e.g., with an ultrasound-enabled microphone and via the same ultrasonic/infrared receiver).
추가적으로, 또는 대안적으로, 클라이언트 디바이스(110)는 사용자에 의해 휴대/작동되는 다른 컴퓨팅 디바이스(들)(예를 들어, 모바일 디바이스, 웨어러블 컴퓨팅 디바이스 등)에 의해 검출되고 사용자의 특정한 위치를 결정하는데 사용되는 무선파(예를 들어, Wi-Fi, 블루투스, 셀룰러 등)와 같은 다른 유형의 사람이 감지할 수 없는 파동을 방출할 수 있다. 일부 구현예에서, GPS 및/또는 Wi-Fi 삼각 측량은 예를 들어 클라이언트 디바이스(110)에 대한 또는 그로부터의 GPS 및/또는 Wi-Fi 신호에 기초하여 사람의 위치를 검출하는데 사용될 수 있다. 다른 구현예에서, 비행 시간(time-of-flight), 신호 강도 등과 같은 다른 무선 신호 특성은 사용자가 휴대/작동하는 다른 컴퓨팅 디바이스(들)에 의해 방출된 신호에 기초하여 특정한 사람의 위치를 결정하기 위해 클라이언트 디바이스(110)에 의해 단독으로 또는 집합적으로 사용될 수 있다. 추가적으로 또는 대안적으로, 일부 구현예에서, 클라이언트 디바이스(110)는 사용자의 목소리로부터 사용자를 인식하기 위한 화자 식별(SID) 및/또는 사용자의 얼굴을 캡처하는 비전 데이터로부터 사용자를 인식하기 위한 얼굴 식별(FID)을 수행할 수 있다. Additionally, or alternatively, client device 110 may be detected by other computing device(s) (e.g., mobile device, wearable computing device, etc.) carried/operated by the user and used to determine the user's specific location. Other types of radio waves used (e.g. Wi-Fi, Bluetooth, cellular, etc.) may emit waves that cannot be detected by humans. In some implementations, GPS and/or Wi-Fi triangulation may be used to detect a person's location, for example, based on GPS and/or Wi-Fi signals to or from client device 110. In other implementations, other wireless signal characteristics, such as time-of-flight, signal strength, etc., determine the location of a particular person based on signals emitted by other computing device(s) carried/operated by the user. It may be used singly or collectively by the client device 110 to do this. Additionally or alternatively, in some implementations, client device 110 may use speaker identification (SID) to recognize a user from the user's voice and/or facial identification to recognize the user from vision data that captures the user's face. (FID) can be performed.
일부 구현예에서, 스피커의 움직임은 예를 들어 클라이언트 디바이스(110)의 존재 센서(113)(및 선택적으로 클라이언트 디바이스(110)의 GPS 센서, Soli 칩 및/또는 가속도계)에 의해 결정될 수 있다. 일부 구현예에서, 이러한 검출된 움직임에 기초하여, 사용자의 위치가 예측될 수 있으며, 이 위치는 임의의 콘텐츠가 사용자의 위치에 대한 클라이언트 디바이스(110) 및/또는 다른 컴퓨팅 디바이스(들)의 근접성에 적어도 부분적으로 기초하여 클라이언트 디바이스(110) 및/또는 다른 컴퓨팅 디바이스(들)에서 렌더링되게 한 경우 사용자의 위치인 것으로 가정된다. 일부 구현예에서, 사용자는 특히 마지막 참여 이후 많은 시간이 지나지 않았다면, 자동화된 어시스턴트(115)와 참여한 마지막 위치에 있는 것으로 단순히 가정될 수 있다. In some implementations, the movement of the speaker may be determined, for example, by presence sensor 113 of client device 110 (and optionally a GPS sensor, Soli chip, and/or accelerometer of client device 110). In some implementations, based on this detected movement, the user's location may be predicted, which location determines whether any content is related to the proximity of the client device 110 and/or other computing device(s) to the user's location. It is assumed to be the user's location when rendered on client device 110 and/or other computing device(s) based at least in part on . In some implementations, the user may simply be assumed to be in the last location where they engaged with automated assistant 115, especially if not much time has passed since their last engagement.
또한, 클라이언트 디바이스(110) 및/또는 자연스러운 대화 시스템(120)은 데이터 및 소프트웨어 애플리케이션의 저장을 위한 하나 이상의 메모리, 데이터에 액세스하고 애플리케이션을 실행하기 위한 하나 이상의 프로세서 및 하나 이상의 네트워크(199)를 통해 통신을 지원하는 다른 컴포넌트를 포함할 수 있다. 일부 구현예에서, 하나 이상의 소프트웨어 애플리케이션은 클라이언트 디바이스(110)에 로컬로 설치될 수 있는 반면, 다른 구현예에서, 하나 이상의 소프트웨어 애플리케이션은 원격으로(예를 들어, 하나 이상의 서버에 의해) 호스팅될 수 있고 하나 이상의 네트워크(199)를 통해 클라이언트 디바이스(110)에 의해 액세스될 수 있다. Additionally, client device 110 and/or natural conversation system 120 may have one or more memories for storage of data and software applications, one or more processors for accessing data and executing applications, and one or more networks 199 . May include other components that support communication. In some implementations, one or more software applications may be installed locally on client device 110, while in other implementations, one or more software applications may be hosted remotely (e.g., by one or more servers). and may be accessed by client device 110 via one or more networks 199.
일부 구현예에서, 자동화된 어시스턴트(115)에 의해 수행되는 동작은 자동화된 어시스턴트 클라이언트(114)를 통해 클라이언트 디바이스(110)에서 로컬로 구현될 수 있다. 도 1에 도시된 바와 같이, 자동화된 어시스턴트 클라이언트(114)는 ASR(Automatic Speech Recognition) 엔진(130A1), NLU(Natural Language Understanding) 엔진(140A1), LLM(Large Language Model) 엔진(150A1) 및 TTS(Text-to-Speech) 엔진(160A1)을 포함할 수 있다. 일부 구현예에서, 자동화된 어시스턴트(115)에 의해 수행되는 동작은 자연스러운 대화 시스템(120)이 도 1에 도시된 바와 같이 클라이언트 디바이스(110)로부터 원격으로 구현되는 경우와 같이 다수의 컴퓨터 시스템에 걸쳐 분산될 수 있다. 이러한 구현예에서, 자동화된 어시스턴트(115)는 자연스러운 대화 시스템(120)의 ASR 엔진(130A2), NLU 엔진(140A2), LLM 엔진(150A2) 및 TTS 엔진(160A2)을 추가적으로 또는 대안적으로 활용할 수 있다. In some implementations, operations performed by automated assistant 115 may be implemented locally on client device 110 via automated assistant client 114. As shown in Figure 1, the automated assistant client 114 includes an Automatic Speech Recognition (ASR) engine 130A1, a Natural Language Understanding (NLU) engine 140A1, a Large Language Model (LLM) engine 150A1, and a TTS (Text-to-Speech) engine 160A1. In some implementations, the operations performed by automated assistant 115 may span multiple computer systems, such as when natural conversation system 120 is implemented remotely from client device 110 as shown in FIG. 1 . can be dispersed. In such implementations, automated assistant 115 may additionally or alternatively utilize the ASR engine 130A2, NLU engine 140A2, LLM engine 150A2, and TTS engine 160A2 of natural conversation system 120. there is.
이들 엔진 각각은 하나 이상의 기능을 수행하도록 구성될 수 있다. 예를 들어, ASR 엔진(130A1 및/또는 130A2)은 기계 학습(ML) 모델(들) 데이터베이스(115A)에 저장된 스트리밍 ASR 모델(들)(예를 들어, 순환 신경망(RNN) 모델, 트랜스포머 모델, 및/또는 ASR을 수행할 수 있는 임의의 다른 유형의 ML 모델)을 사용하여 음성 발화를 캡처하고 ASR 출력 스트림을 생성하기 위해 클라이언트 디바이스(110)의 마이크(들)에 의해 생성되는 오디오 데이터 스트림을 프로세싱할 수 있다. 특히, 스트리밍 ASR 모델은 오디오 데이터 스트림이 생성됨에 따라 ASR 출력 스트림을 생성하는데 활용될 수 있다. 또한, NLU 엔진(140A1 및/또는 140A2)은 ML 모델(들) 데이터베이스(115A)에 저장된 NLU 모델(예를 들어, LSTM(Long Short-Term Memory), GRU(Gated Recurrent Unit), 및 /또는 NLU를 수행할 수 있는 다른 유형의 RNN 또는 다른 ML 모델) 및/또는 문법 기반 규칙(들)을 사용하여, ASR 출력 스트림을 생성하기 위해 NLU 출력 스트림을 프로세싱할 수 있다. 더욱이, 자동화된 어시스턴트(115)는 NLU 출력이 프로세싱되어 이행 데이터의 스트림을 생성하게 할 수 있다. 예를 들어, 자동화된 어시스턴트(115)는 하나 이상의 네트워크(199)(또는 하나 이상의 애플리케이션 프로그래밍 인터페이스(API))를 통해 하나 이상의 제1-당사자(1P) 시스템(191) 및/또는 하나 이상의 네트워크(199)를 통해 하나 이상의 서드파티(3P) 시스템(192)에 하나 이상의 구조화된 요청을 전송할 수 있고, 이행 데이터 스트림을 생성하기 위해 하나 이상의 1P 시스템(191) 및/또는 3P 시스템(192)으로부터 이행 데이터를 수신한다. 하나 이상의 구조화된 요청은 예를 들어 이행 데이터 스트림에 포함된 NLU 데이터를 포함할 수 있다. 이행 데이터 스트림은 예를 들어 ASR 엔진(130A1 및/또는 130A2)에 의해 프로세싱되는 오디오 데이터 스트림에서 캡처된 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답일 것으로 예측되는 어시스턴트 출력 세트에 대응할 수 있다.Each of these engines can be configured to perform one or more functions. For example, ASR engines 130A1 and/or 130A2 may store streaming ASR model(s) (e.g., recurrent neural network (RNN) models, transformer models, etc.) stored in machine learning (ML) model(s) database 115A. and/or any other type of ML model capable of performing ASR) to capture the audio utterance and generate an ASR output stream. Can be processed. In particular, the streaming ASR model can be utilized to generate an ASR output stream as the audio data stream is generated. Additionally, the NLU engine 140A1 and/or 140A2 may store NLU models (e.g., Long Short-Term Memory (LSTM), Gated Recurrent Unit (GRU), and/or NLU model(s) stored in the ML model(s) database 115A. The NLU output stream can be processed to generate an ASR output stream, using other types of RNNs or other ML models) and/or grammar-based rule(s) that can perform Moreover, automated assistant 115 can cause the NLU output to be processed to generate a stream of transition data. For example, automated assistant 115 may interact with one or more first-party (1P) systems 191 and/or one or more networks (199) via one or more networks (199) (or one or more application programming interfaces (APIs)). 199) may send one or more structured requests to one or more third-party (3P) systems 192, and may receive fulfillment from one or more 1P systems 191 and/or 3P systems 192 to generate a fulfillment data stream. Receive data. One or more structured requests may include NLU data included in, for example, a fulfillment data stream. The transition data stream may correspond to a set of assistant outputs that are expected to be responses to assistant queries included in voice utterances captured, for example, in audio data streams processed by ASR engines 130A1 and/or 130A2.
또한, LLM 엔진(150A1 및/또는 150A2)은 ASR 엔진(130A1 및/또는 130A2)에 의해 프로세싱된 오디오 데이터 스트림에 캡처된 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답일 것으로 예측되는 어시스턴트 출력 세트를 프로세싱할 수 있다. 본 명세서에 설명된 바와 같이(예를 들어, 도 2-6과 관련하여), 일부 구현예에서, LLM 엔진(150A1 및/또는 150A2)은 수정된 어시스턴트 출력 세트를 생성하기 위해 하나 이상의 LLM 출력을 사용하여 어시스턴트 출력 세트가 수정되게 할 수 있다. 상기 구현예 중 일부 버전에서(예를 들어, 도 3과 관련하여 설명된 바와 같이), 자동화된 어시스턴트(115)는 LLM 출력 중 하나 이상이 오프라인 방식으로 생성되게 하고(예를 들어, 대화 세션 동안 수신되는 음성 발화에 응답하지 않음), 후속적으로 수정된 어시스턴트 출력 세트를 생성하기 위해 온라인 방식(예를 들어, 대화 세션 중에 음성 발화가 수신될 때)으로 활용될 수 있다. 이러한 구현예의 추가적 또는 대안적 버전에서(예를 들어, 도 4 및 도 5와 관련하여 설명된 바와 같이), 자동화된 어시스턴트(115)는 LLM 출력 중 하나 이상이 온라인 방식으로 생성되게 할 수 있다(예를 들어, 대화 세션 동안 음성 발화가 수신될 때). 이러한 구현예에서, 하나 이상의 LLM 출력은 모델(들) 데이터베이스(115A)에 저장된 하나 이상의 LLM(예를 들어, Meena, RNN 및/또는 임의의 LLM과 같은 하나 이상의 트랜스포머 모델)을 사용하여, 어시스턴트 출력 세트(예를 들어, 이행 데이터 스트림), 음성 발화가 수신되는 대화 세션의 컨텍스트(예를 들어, 컨텍스트 데이터베이스(110A)에 저장된 하나 이상의 컨텍스트 신호에 기초하여), 음성 발화에 포함된 어시스턴트 쿼리에 대응하는 인식된 텍스트 및/또는 자동화된 어시스턴트(115)가 LLM 출력 중 하나 이상을 생성할 때 활용할 수 있는 다른 정보를 프로세싱하는 것에 기초하여 생성될 수 있다. 하나 이상의 LLM 출력 각각은 예를 들어 하나 이상의 어휘에 걸친 하나 이상의 단어 및/또는 문구의 시퀀스에 대한 확률 분포를 포함할 수 있고, 확률 분포에 기초하여 시퀀스에서 하나 이상의 단어 및/또는 문구를 하나 이상의 LLM 출력으로 선택할 수 있다. 다양한 구현예에서, 하나 이상의 LLM 출력은 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 수정하는데 후속적 활용을 위해 LLM 출력(들) 데이터베이스(150A)에 저장될 수 있다. Additionally, the LLM engine 150A1 and/or 150A2 processes a set of assistant outputs that are predicted to be responses to assistant queries included in voice utterances captured in the audio data stream processed by the ASR engine 130A1 and/or 130A2. can do. As described herein (e.g., with respect to FIGS. 2-6), in some implementations, LLM engines 150A1 and/or 150A2 produce one or more LLM outputs to generate a set of modified assistant outputs. You can use to allow the assistant output set to be modified. In some versions of the above implementations (e.g., as described with respect to Figure 3), automated assistant 115 causes one or more of the LLM outputs to be generated in an offline manner (e.g., during a conversation session). does not respond to incoming spoken utterances), and may subsequently be utilized in an online manner (e.g., when spoken utterances are received during a conversation session) to generate a modified set of assistant outputs. In an additional or alternative version of this implementation (e.g., as described in connection with FIGS. 4 and 5), automated assistant 115 may cause one or more of the LLM outputs to be generated in an online manner ( For example, when spoken utterances are received during a conversation session). In this implementation, the one or more LLM outputs use one or more LLMs (e.g., one or more transformer models such as Meena, RNN, and/or any LLM) stored in the model(s) database 115A to produce an assistant output. Set (e.g., a transition data stream), the context of the conversation session in which the spoken utterance is received (e.g., based on one or more context signals stored in context database 110A), corresponding to an assistant query included in the spoken utterance may be generated based on processing recognized text and/or other information that automated assistant 115 may utilize in generating one or more of the LLM outputs. Each of the one or more LLM outputs may include, for example, a probability distribution for a sequence of one or more words and/or phrases spanning one or more vocabularies, and, based on the probability distribution, one or more words and/or phrases from the sequence. It can be selected as LLM output. In various implementations, one or more LLM outputs may be stored in the LLM output(s) database 150A for subsequent use in modifying one or more assistant outputs included in an assistant output set.
더욱이, 일부 구현예에서, TTS 엔진(160A1 및/또는 160A2)은 ML 모델(들) 데이터베이스(115A)에 저장된 TTS 모델(들)을 사용하여, 텍스트 데이터(예를 들어, 자동화된 어시스턴트(115)에 의해 공식화된 텍스트)를 프로세싱하여 컴퓨터 생성 합성 스피치를 포함하는 합성된 스피치 오디오 데이터를 생성한다. 텍스트 데이터는 예를 들어 이행 데이터 스트림에 포함된 어시스턴트 출력 세트로부터의 하나 이상의 어시스턴트 출력, 수정된 어시스턴트 출력 세트로부터의 하나 이상의 수정된 어시스턴트 출력 및/또는 본 명세서에 기술된 임의의 기타 텍스트 데이터에 대응할 수 있다. 특히, ML 모델(들) 데이터베이스(115A)에 저장된 ML 모델(들)은 클라이언트 디바이스(110)에 로컬로 저장된 온디바이스 ML 모델이거나 클라이언트 디바이스(110) 및/또는 자연스러운 대화 시스템(120)이 클라이언트 디바이스(110)에서 로컬로 구현되지 않는 경우 원격 시스템 둘 모두가 액세스 가능한 공유 ML 모델일 수 있다. 추가적 또는 대안적 구현예에서, 이행 데이터 스트림에 포함된 어시스턴트 출력 세트로부터의 하나 이상의 어시스턴트 출력에 대응하는 오디오 데이터, 수정된 어시스턴트 출력 세트로부터의 하나 이상의 수정된 어시스턴트 출력 및/또는 여기에 설명된 임의의 다른 텍스트 데이터는 메모리 또는 클라이언트 디바이스(110)에 의해 액세스 가능한 하나 이상의 데이터베이스에 저장될 수 있으므로, 자동화된 어시스턴트는 오디오 데이터를 사용자에게 청각적으로 제시하기 위해 제공할 때 임의의 합성 스피치 오디오 데이터를 생성하기 위해 TTS 엔진(160A1 및/또는 160A2)을 사용할 필요가 없도록 한다.Moreover, in some implementations, TTS engine 160A1 and/or 160A2 uses TTS model(s) stored in ML model(s) database 115A to generate text data (e.g., automated assistant 115 Processes the text formulated by ) to generate synthesized speech audio data containing computer-generated synthesized speech. The text data may correspond, for example, to one or more assistant outputs from an assistant output set included in the fulfillment data stream, one or more modified assistant outputs from a modified assistant output set, and/or any other text data described herein. You can. In particular, the ML model(s) stored in the ML model(s) database 115A may be an on-device ML model stored locally on the client device 110 or an on-device ML model stored locally on the client device 110 and/or the natural conversation system 120 on the client device. At 110, it may be a shared ML model that is accessible to both remote systems if not implemented locally. In additional or alternative implementations, audio data corresponding to one or more assistant outputs from the assistant output set included in the fulfillment data stream, one or more modified assistant outputs from the modified assistant output set, and/or any of the assistant outputs described herein. The other text data may be stored in memory or in one or more databases accessible by client device 110 so that the automated assistant may use any synthetic speech audio data when presenting the audio data for audible presentation to the user. Eliminates the need to use the TTS engine (160A1 and/or 160A2) to generate
다양한 구현예에서, ASR 출력 스트림은 예를 들어, 오디오 데이터 스트림에서 캡처된 사용자의 음성 발화(들)에 대응하는 것으로 예측되는 ASR 가설 스트림(예: 용어 가설 및/또는 전사 가설), 각 ASR 가설에 대한 하나 이상의 대응하는 예측된 값(예: 확률, 로그 가능성 및/또는 기타 값), 오디오 데이터 스트림에서 캡처된 사용자의 음성 발화(들)에 대응하는 것으로 예측되는 복수의 음소들 및/또는 기타 ASR 출력을 포함할 수 있다. 이러한 구현예의 일부 버전에서, ASR 엔진(130A1 및/또는 130A2)은 ASR 가설 중 하나 이상을 음성 발화에 대응하는 인식된 텍스트로 선택할 수 있다(예를 들어 대응 예측 값에 기초하여). In various implementations, the ASR output stream may include, for example, a stream of ASR hypotheses (e.g., terminology hypotheses and/or transcription hypotheses), each ASR hypothesis predicted to correspond to the user's speech utterance(s) captured in the audio data stream. one or more corresponding predicted values (e.g., probability, log-likelihood, and/or other values) for, a plurality of phonemes predicted to correspond to the user's speech utterance(s) captured in the audio data stream, and/or other May include ASR output. In some versions of this implementation, ASR engine 130A1 and/or 130A2 may select one or more of the ASR hypotheses as recognized text corresponding to the speech utterance (e.g., based on a corresponding prediction value).
다양한 구현예에서, NLU 출력의 스트림은 예를 들어, 인식된 텍스트의 용어 중 하나 이상(예를 들어, 모두)에 대해 인식된 텍스트의 하나 이상의 주석을 포함하는 주석이 달린 인식된 텍스트의 스트림을 포함할 수 있다. 예를 들면, NLU 엔진(140A1 및/또는 140A2)은 용어들에 그들의 문법적 역할들로 주석을 달도록 구성된 품사 태그기(도시되지 않음)를 포함할 수 있다. 추가적으로 또는 대안적으로, NLU 엔진(140A1 및/또는 140A2)은 사람들(예를 들어, 문학적 캐릭터, 유명인, 공인 등을 포함), 조직들, 위치들(실제 및 가상) 등에 대한 참조들과 같은 인식된 텍스트의 하나 이상의 세그먼트들에서 엔터티 참조들을 주석을 달도록 구성된 엔터티 태그기(entity tagger)(도시되지 않음)를 포함할 수 있다. 일부 구현예에서, 엔터티들에 관한 데이터는 지식 그래프(도시되지 않음)와 같은 하나 이상의 데이터베이스에 저장될 수 있다. 일부 구현예에서, 지식 그래프는 알려진 엔터티(및 경우에 따라 엔터티 속성)를 나타내는 노드뿐만 아니라 노드를 연결하고 엔터티 사이의 관계를 나타내는 에지를 포함할 수 있다. 엔터티 태그기는 높은 입상도(예를 들어, 사람들과 같은 엔터티 클래스에 대한 모든 참조들의 식별을 가능하게 하기 위해) 및/또는 낮은 입상도(예를 들어, 특정한 사람과 같은 특정한 엔터티에 대한 모든 참조들의 식별을 가능하게 하기 위해)에서 엔터티에 대한 참조들을 주석을 달을 수 있다. 엔터티 태그기는 특정한 엔터티를 리졸브(resolve)하기 위해 자연어 입력의 콘텐츠에 의존할 수 있고 및/또는 선택적으로 특정한 엔터티를 리졸브하기 위해 지식 그래프 또는 다른 엔터티 데이터베이스와 통신할 수 있다. In various implementations, the stream of NLU output may be a stream of annotated recognized text, for example, containing one or more annotations of the recognized text for one or more (e.g., all) of the terms of the recognized text. It can be included. For example, NLU engines 140A1 and/or 140A2 may include a part-of-speech tagger (not shown) configured to annotate terms with their grammatical roles. Additionally or alternatively, NLU engines 140A1 and/or 140A2 may perform recognition functions such as references to people (including, e.g., literary characters, celebrities, public figures, etc.), organizations, locations (real and virtual), etc. and an entity tagger (not shown) configured to annotate entity references in one or more segments of text. In some implementations, data about entities may be stored in one or more databases, such as a knowledge graph (not shown). In some implementations, a knowledge graph may include nodes that represent known entities (and, in some cases, entity properties) as well as edges that connect the nodes and represent relationships between the entities. Entity taggers can be either high granularity (to enable identification of all references to a class of entities, e.g. people) and/or low granularity (to enable identification of all references to a specific entity, e.g. a specific person). You can annotate references to entities (to enable identification). The entity tagger may rely on the content of the natural language input to resolve specific entities and/or may optionally communicate with a knowledge graph or other entity database to resolve specific entities.
추가적으로 또는 대안적으로, NLU 엔진(140A1 및/또는 140A2)은 추가적으로 및/또는 대안적으로 하나 이상의 컨텍스트적 큐(cue)들에 기초하여 동일한 엔터티에 대한 참조인 그룹 또는 "클러스터"로 구성된 공동참조 리졸버(coreference resolver)(도시되지 않음)를 포함할 수 있다. 예를 들어, 공동참조 리졸버는 자연어 입력 "buy them"을 수신하기 바로 직전에 렌더링된 클라이언트 디바이스 알림에서 언급된 "theatre tickets"에 기초하여, 자연어 입력 "buy them"에서 "them"이라는 용어를 "buy theatre tickets"으로 해석하는데 활용될 수 있다. 일부 구현예에서, NLU 엔진(140A1 및/또는 140A2)의 하나 이상의 컴포넌트는 NLU 엔진(140A1 및/또는 140A2)의 하나 이상의 다른 컴포넌트로부터의 주석에 의존할 수 있다. 예를 들면, 일부 구현예에서, 엔터티 태그기는 특정한 엔터티에 대한 모든 언급에 주석을 다는 것에 있어 공동참조 리졸버로부터의 주석에 의존할 수 있다. 또한, 예를 들면, 일부 구현예에서, 공동참조 리졸버는 동일한 엔터티에 대한 참조를 클러스터링하는 것에 있어 엔터티 태그기로부터의 주석에 의존할 수 있다. Additionally or alternatively, NLU engine 140A1 and/or 140A2 may additionally and/or alternatively configure coreferences into groups or “clusters” of references to the same entity based on one or more contextual cues. May include a coreference resolver (not shown). For example, the co-reference resolver might resolve the term "them" in the natural language input "buy them" based on "theatre tickets" mentioned in the client device notification rendered immediately before receiving the natural language input "buy them". It can be used to interpret “buy theater tickets.” In some implementations, one or more components of NLU engine 140A1 and/or 140A2 may rely on annotations from one or more other components of NLU engine 140A1 and/or 140A2. For example, in some implementations, an entity tagger may rely on annotations from a coreference resolver to annotate all references to a particular entity. Additionally, for example, in some implementations, a co-reference resolver may rely on annotations from an entity tagger in clustering references to the same entity.
비록 도1은 단일 사용자를 갖는 단일의 클라이언트 디바이스에 대해 설명되었지만, 이는 예를 위한 것이며 제한하려는 의도가 아님을 이해해야 한다. 예를 들어, 사용자의 하나 이상의 추가 클라이언트 디바이스도 본 명세서에 설명된 기법을 구현할 수 있다. 예를 들어, 클라이언트 디바이스(110), 하나 이상의 추가적인 클라이언트 디바이스, 및/또는 사용자의 임의의 다른 컴퓨팅 디바이스는 본 명세서에 설명된 기법을 이용할 수 있는 디바이스들의 생태계를 형성할 수 있다. 이러한 추가 클라이언트 디바이스 및/또는 컴퓨팅 디바이스는 (예를 들어, 네트워크(들)(199)를 통해) 클라이언트 디바이스(110)와 통신할 수 있다. 또 다른 예로서, 주어진 클라이언트 디바이스는 공유 설정(예: 사용자 그룹, 가구)에서 여러 사용자에 의해 활용될 수 있다. Although Figure 1 is illustrated with respect to a single client device with a single user, it should be understood that this is by way of example and not intended to be limiting. For example, one or more additional client devices of a user may also implement the techniques described herein. For example, client device 110, one or more additional client devices, and/or any other computing device of a user may form an ecosystem of devices that can utilize the techniques described herein. These additional client devices and/or computing devices may communicate with client device 110 (e.g., via network(s) 199). As another example, a given client device may be utilized by multiple users in a shared setting (e.g., user group, household).
본 명세서에 설명된 바와 같이, 자동화된 어시스턴트(115)는 LLM 출력 중 하나 이상을 사용하여 어시스턴트 응답 세트를 수정할지 여부를 결정하고 및/또는 LLM 출력 중 하나 이상에 기초하여 하나 이상의 수정된 어시스턴트 출력 세트를 결정할 수 있다. 자동화된 어시스턴트(115)는 자연스러운 대화 시스템(120)을 활용하여 이러한 결정을 내릴 수 있다. 다양한 구현예에서, 그리고 도 1에 도시된 바와 같이, 자연스러운 대화 시스템(120)은 추가적으로 또는 대안적으로 오프라인 출력 수정 엔진(170), 온라인 출력 수정 엔진(180) 및/또는 순위 엔진(190)을 포함할 수 있다. 오프라인 출력 수정 엔진(170)은 예를 들어, 어시스턴트 활동 엔진(171) 및 인덱싱 엔진(172)을 포함할 수 있다. 또한, 온라인 출력 수정 엔진(180)은, 예를 들어, 어시스턴트 쿼리 엔진(181) 및 어시스턴트 성격 엔진(182)을 포함할 수 있다. 자연스러운 대화 시스템(120)의 이러한 다양한 엔진은 도 2-5를 참조하여 더 자세히 설명된다.As described herein, automated assistant 115 uses one or more of the LLM outputs to determine whether to modify the assistant response set and/or one or more modified assistant outputs based on one or more of the LLM outputs. You can decide on a set. Automated assistant 115 may utilize natural conversation system 120 to make this decision. In various implementations, and as shown in Figure 1, natural conversation system 120 may additionally or alternatively include an offline output modification engine 170, an online output modification engine 180, and/or a ranking engine 190. It can be included. Offline output modification engine 170 may include, for example, assistant activity engine 171 and indexing engine 172. Online output modification engine 180 may also include, for example, an assistant query engine 181 and an assistant personality engine 182. These various engines of natural conversation system 120 are described in more detail with reference to Figures 2-5.
이제 도 2를 참조하면, 어시스턴트 출력(들)을 생성할 때 LLM을 활용하는 예시적 프로세스 흐름(200)이 도시된다. 도 1의 클라이언트 디바이스의 하나 이상의 마이크에 의해 생성된 오디오 데이터(201)의 인스턴스는 ASR 출력(203) 스트림을 생성하기 위해 ASR 엔진(130A1 및/또는 130A2)에 의해 프로세싱될 수 있다. 또한, ASR 출력(203)은 NLU 출력(204)의 스트림을 생성하기 위해 NLU 엔진(140A1 및/또는 140A2)에 의해 프로세싱될 수 있다. 일부 구현예에서, NLU 엔진(140A1 및/또는 140A2)은 클라이언트 디바이스(110)의 사용자와 사용자의 클라이언트 디바이스(110)에서 적어도 부분적으로 실행되는 자동화된 어시스턴트(115) 사이의 대화 세션의 컨텍스트(202)를 프로세싱할 수 있다. 이러한 구현예의 일부 버전에서, 대화 세션의 컨텍스트(202)는 클라이언트 디바이스(110)에 의해 생성된 하나 이상의 컨텍스트 신호(예를 들어, 시간, 요일, 클라이언트 디바이스(110)의 위치, 클라이언트 디바이스(110)의 환경에서 검출된 주변 소음 및/또는 클라이언트 디바이스(110)에 의해 생성된 다른 컨텍스트 신호)에 기초하여 결정될 수 있다. 이러한 구현예의 추가 또는 대안 버전에서, 대화 세션의 컨텍스트(202)는 클라이언트 디바이스(110)에서 액세스 가능한 컨텍스트 데이터베이스(110A)에 저장된 하나 이상의 컨텍스트 신호(예를 들어, 사용자 프로필 데이터, 소프트웨어 애플리케이션 데이터, 클라이언트 디바이스(110) 사용자의 알려진 환경에 관한 환경 데이터, 사용자와 자동화된 어시스턴트(115) 사이의 진행 중인 대화 세션의 대화 이력 및/또는 사용자와 자동화된 어시스턴트(115) 사이의 하나 이상의 이전 대화 세션의 이력 대화 이력 및/또는 컨텍스트 데이터베이스(110A)에 저장된 다른 컨텍스트 데이터)에 기초하여 결정될 수 있다. 또한, NLU 출력(204) 스트림은 하나 이상의 어시스턴트 출력(205) 세트를 포함하는 이행 데이터 스트림을 생성하기 위해 1P 시스템(191) 및/또는 3P 시스템 중 하나 이상에 의해 프로세싱될 수 있고, 하나 이상의 어시스턴트 출력 세트(205)에 포함된 하나 이상의 어시스턴트 출력 각각은 오디오 데이터(201) 스트림에서 캡처된 음성 발화에 대한 응답일 것으로 예측된다. Referring now to Figure 2, an example process flow 200 is shown utilizing LLM in generating assistant output(s). Instances of audio data 201 generated by one or more microphones of the client device of FIG. 1 may be processed by ASR engines 130A1 and/or 130A2 to generate ASR output 203 streams. Additionally, ASR output 203 may be processed by NLU engine 140A1 and/or 140A2 to generate a stream of NLU output 204. In some implementations, NLU engines 140A1 and/or 140A2 provide context 202 of a conversational session between a user of client device 110 and automated assistant 115 executing at least in part on the user's client device 110. ) can be processed. In some versions of this implementation, the context 202 of the conversation session may include one or more context signals generated by the client device 110 (e.g., time, day of the week, location of the client device 110, client device 110 may be determined based on ambient noise detected in the environment and/or other context signals generated by the client device 110). In additional or alternative versions of this implementation, the context 202 of the conversation session may include one or more context signals (e.g., user profile data, software application data, client Environmental data regarding the known environment of the device 110 user, conversation history of an ongoing conversation session between the user and automated assistant 115, and/or history of one or more previous conversation sessions between the user and automated assistant 115. It may be determined based on conversation history and/or other context data stored in the context database 110A. Additionally, the NLU output 204 stream may be processed by one or more of the 1P system 191 and/or the 3P system to generate a transition data stream comprising one or more sets of assistant outputs 205, one or more assistants. Each of the one or more assistant outputs included in output set 205 is expected to be a response to a spoken utterance captured in the audio data 201 stream.
일반적으로, LLM을 활용하지 않는 턴 기반 대화 세션에서, 순위 엔진(190)은 하나 이상의 순위 기준에 따라 하나 이상의 어시스턴트 출력(205) 세트에 포함된 하나 이상의 어시스턴트 출력 각각의 순위를 지정하기 위해 하나 이상의 어시스턴트 출력(205) 세트를 프로세싱할 수 있고, 해당 자동화된 어시스턴트(115)는 음성 발화 수신에 응답하여 클라이언트 디바이스(110)의 사용자에게 제시하기 위해 제공될 하나 이상의 어시스턴트 출력(205) 세트로부터 하나 이상의 주어진 어시스턴트 출력(207)을 선택할 수 있다. 일부 구현예에서, 선택된 하나 이상의 주어진 어시스턴트 출력(207)은 선택된 하나 이상의 주어진 어시스턴트 출력(207)에 대응하는 합성 스피치를 포함하는 합성 스피치 오디오 데이터를 생성하기 위해 TTS 엔진(160A1 및/또는 160A2)에 의해 프로세싱될 수 있으며, 렌더링은 엔진(112)은 클라이언트 디바이스(110)의 사용자에게 청각적으로 제시하기 위해 합성된 스피치 오디오 데이터가 클라이언트 디바이스(110)의 스피커(들)에 의해 청각적으로 렌더링되게 할 수 있다. 추가적 또는 대안적 구현예에서, 렌더링 엔진(112)은 클라이언트 디바이스(110)의 사용자에게 시각적으로 제시하기 위해 선택된 하나 이상의 주어진 어시스턴트 출력(207)에 대응하는 텍스트 데이터가 클라이언트 디바이스(110)의 디스플레이에 의해 시각적으로 렌더링되게 할 수 있다.Typically, in a turn-based conversation session that does not utilize LLM, ranking engine 190 may use one or more ranking engines to rank each of one or more assistant outputs included in the set of one or more assistant outputs 205 according to one or more ranking criteria. The set of assistant outputs 205 may be processed, and the automated assistant 115 may, in response to receiving the spoken utterance, receive one or more outputs from the set of assistant outputs 205 to be provided for presentation to the user of the client device 110. A given assistant output 207 can be selected. In some implementations, the selected one or more given assistant outputs 207 are coupled to the TTS engine 160A1 and/or 160A2 to generate synthesized speech audio data comprising synthesized speech corresponding to the selected one or more given assistant outputs 207. The rendering engine 112 causes the synthesized speech audio data to be audibly rendered by the speaker(s) of the client device 110 for audible presentation to the user of the client device 110. can do. In an additional or alternative implementation, the rendering engine 112 may cause text data corresponding to one or more given assistant outputs 207 selected to be displayed visually to the user of the client device 110. It can be rendered visually.
그러나, 청구된 기술을 사용할 때, 자동화된 어시스턴트(115)는 또한 하나 이상의 어시스턴트 출력(205) 세트가 LLM 엔진(150A1 및/또는 150A2)에 의해 프로세싱되어 하나 이상의 수정된 어시스턴트 출력(206) 세트를 생성하게 할 수 있다. 일부 구현예에서, 하나 이상의 LLM 출력은 오프라인 출력 수정 엔진(170)을 사용하여 (예를 들어, 클라이언트 디바이스(110)의 마이크 중 하나 이상에 의해 생성된 오디오 데이터(201) 스트림을 수신하기 전에) 오프라인 방식으로 이전에 생성될 수 있고, 하나 이상의 LLM 출력은 LLM 출력(들) 데이터베이스(150A)에 저장될 수 있다. 도 3과 관련하여 설명한 바와 같이, 하나 이상의 LLM 출력은 대응하는 어시스턴트 쿼리 및/또는 대응하는 어시스턴트 쿼리가 수신된 대응하는 대화 세션의 대응하는 컨텍스트에 기초하여 LLM 출력(들) 데이터베이스(150A)에 이전에 인덱싱될 수 있다. 또한, LLM 엔진(150A1 및/또는 150A2)은 오디오 데이터(201) 스트림에 캡처된 음성 발화에 포함된 어시스턴트 쿼리가 대응하는 어시스턴트 쿼리와 일치하는지 및 어시스턴트 쿼리가 수신된 대화 세션의 컨텍스트(202)가 대응하는 어시스턴트 쿼리가 수신된 대응하는 대화 세션의 대응하는 컨텍스트와 일치하는지 결정할 수 있다. LLM 엔진(150A1 및/또는 150A2)은 하나 이상의 어시스턴트 출력 세트(205)를 수정하기 위해 대응하는 어시스턴트 쿼리에 의해 인덱싱된 하나 이상의 LLM 출력 및/또는 어시스턴트 쿼리와 일치하는 대응 컨텍스트를 획득할 수 있다. 더욱이, 하나 이상의 어시스턴트 출력(205) 세트는 하나 이상의 LLM 출력에 기초하여 수정될 수 있으며, 그에 따라 하나 이상의 수정된 어시스턴트 출력(206) 세트가 생성될 수 있다. However, when using the claimed techniques, automated assistant 115 may also cause one or more sets of assistant outputs 205 to be processed by LLM engine 150A1 and/or 150A2 to produce one or more sets of modified assistant outputs 206. It can be created. In some implementations, one or more LLM outputs use an offline output modification engine 170 (e.g., before receiving the audio data 201 stream generated by one or more of the microphones of the client device 110). One or more LLM outputs, which may have been previously generated in an offline manner, may be stored in the LLM output(s) database 150A. As described in relation to Figure 3, one or more LLM outputs are transferred to the LLM output(s) database 150A based on the corresponding assistant query and/or the corresponding context of the corresponding conversation session in which the corresponding assistant query was received. can be indexed. Additionally, the LLM engine 150A1 and/or 150A2 determines whether an assistant query included in a voice utterance captured in the audio data 201 stream matches a corresponding assistant query and the context 202 of the conversation session in which the assistant query was received. It may be determined whether the corresponding assistant query matches the corresponding context of the corresponding conversation session received. The LLM engine 150A1 and/or 150A2 may obtain one or more LLM outputs indexed by the corresponding assistant query and/or a corresponding context matching the assistant query to modify the one or more assistant output sets 205 . Moreover, one or more sets of assistant outputs 205 may be modified based on one or more LLM outputs, thereby generating one or more sets of modified assistant outputs 206.
추가적 또는 대안적 구현예에서, 하나 이상의 LLM 출력은 온라인 출력 수정 엔진(180)을 사용하여 (예를 들어, 클라이언트 디바이스(110)의 마이크 중 하나 이상에 의해 생성된 오디오 데이터(201) 스트림을 수신하는 것에 응답하여) 온라인 방식으로 생성될 수 있다. 도 4 및 5와 관련하여 설명된 바와 같이, 하나 이상의 LLM 출력은 ML 모델(들) 데이터베이스(115A)에 저장된 하나 이상의 LLM을 사용하여, 하나 이상의 어시스턴트 출력 세트(205), 오디오 데이터(201) 스트림에서 캡처된 음성 발화에 포함된 어시스턴트 쿼리에 대응하는 인식된 텍스트(예: ASR 출력(203) 스트림에 포함된), 및/또는 하나 이상의 LLM 출력을 생성하기 위한 클라이언트 디바이스(110)의 사용자와 자동화된 어시스턴트(115) 사이의 대화 세션의 컨텍스트(202)를 프로세싱하는 것에 기초하여 생성될 수 있다. 또한, 하나 이상의 어시스턴트 출력(205) 세트는 하나 이상의 LLM 출력에 기초하여 수정될 수 있으며, 그에 따라 하나 이상의 수정된 어시스턴트 출력(206) 세트가 생성될 수 있다. 다르게 말하면, 이들 구현예에서, LLM 엔진(150A1 및/또는 150A2)은 ML 모델(들) 데이터베이스(115A)에 저장된 하나 이상의 LLM을 사용하여 하나 이상의 수정된 어시스턴트 출력 세트(206)를 직접 생성할 수 있다.In an additional or alternative implementation, one or more LLM outputs receive a stream of audio data 201 generated by one or more of the microphones of the client device 110 (e.g., using the online output modification engine 180). can be created online (in response to 4 and 5, one or more LLM outputs may be used to produce one or more assistant output sets 205, audio data 201 streams, using the one or more LLMs stored in the ML model(s) database 115A. Users and automation on a client device 110 to generate recognized text (e.g., included in the ASR output 203 stream) corresponding to an assistant query included in a captured speech utterance, and/or one or more LLM outputs. It may be generated based on processing the context 202 of the conversation session between the assistant 115. Additionally, one or more sets of assistant outputs 205 may be modified based on one or more LLM outputs, thereby generating one or more sets of modified assistant outputs 206. Stated differently, in these implementations, LLM engine 150A1 and/or 150A2 may directly generate one or more modified assistant output sets 206 using one or more LLMs stored in ML model(s) database 115A. there is.
이러한 구현예에서, 그리고 LLM을 활용하지 않는 위에 설명된 일반적인 턴 기반 대화 세션과 대조적으로, 순위 엔진(190)은 하나 이상의 어시스턴트 출력(205) 세트 및 하나 이상의 수정된 어시스턴트 출력(206) 세트를 프로세싱하여, 하나 이상의 순위 기준에 따라 하나 이상의 어시스턴트 출력(205) 세트 및 하나 이상의 수정된 어시스턴트 출력(206) 세트 둘 모두에 포함된 하나 이상의 어시스턴트 출력 각각에 순위를 매길 수 있다. 따라서, 하나 이상의 주어진 어시스턴트 출력(207)을 선택할 때, 자동화된 어시스턴트(207)는 하나 이상의 어시스턴트 출력(205) 세트와 하나 이상의 수정된 어시스턴트 출력(206) 세트 중에서 선택할 수 있다. 특히, 하나 이상의 수정된 어시스턴트 출력(206)의 세트에 포함된 어시스턴트 출력은 하나 이상의 어시스턴트 출력(205)의 세트에 기초하여 생성될 수 있고, 동일하거나 유사한 정보를 전달할 수 있을 뿐만 아니라, 대화의 컨텍스트(202)와 관련되고(예를 들어, 도 4와 관련하여 설명된 바와 같음) 및/또는 자동화된 어시스턴트와 자연스럽고, 유동적이고 및/또는 성격을 가지는 추가 정보와 함께 동일하거나 유사한 정보를 전달할 수 있어서, 하나 이상의 주어진 어시스턴트 출력(107)이 클라이언트 디바이스(110)의 사용자와 더 잘 공감하도록 한다.In this implementation, and in contrast to the typical turn-based conversation session described above that does not utilize LLM, the ranking engine 190 processes one or more sets of assistant outputs 205 and one or more sets of modified assistant outputs 206. Thus, each of the one or more assistant outputs included in both the set of one or more assistant outputs 205 and the set of one or more modified assistant outputs 206 may be ranked according to one or more ranking criteria. Accordingly, when selecting one or more given assistant outputs 207 , automated assistant 207 may select between one or more sets of assistant outputs 205 and one or more sets of modified assistant outputs 206 . In particular, the assistant output included in the set of one or more modified assistant outputs 206 may be generated based on the set of one or more assistant outputs 205 and may convey the same or similar information as well as the context of the conversation. 202 (e.g., as described with respect to FIG. 4) and/or convey the same or similar information along with additional information that is natural, fluid, and/or in nature with the automated assistant. , allowing one or more given assistant outputs 107 to better resonate with the user of the client device 110 .
하나 이상의 순위 기준은, 예를 들어, 하나 이상의 어시스턴트 출력 세트(205) 및 하나 이상의 수정된 어시스턴트 출력 세트(206)에 포함된 어시스턴트 출력 각각이 얼마나 오디오 데이터(201) 스트림에서 캡처된 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답일 것으로 예측되는지를 나타내는 하나 이상의 예측된 측정치(예: 예를 들어, ASR 출력(203)의 스트림을 생성할 때 ASR 엔진(130A1 및/또는 130A2)에 의해 생성된 ASR 측정치, NLU 출력(204)의 스트림을 생성할 때 NLU 엔진(140A1 및/또는 140A2)에 의해 생성된 NLU 측정치), NLU 출력(204) 스트림에 포함된 하나 이상의 의도, 사용자에게 제시하기 위해 제공된 경우 어시스턴트 출력 각각에 자동화된 어시스턴트와 얼마나 자연스러고, 유창하고 및/또는 성격을 가지는지 결정하기 위해 하나 이상의 어시스턴트 출력 세트(205) 및 하나 이상의 수정된 어시스턴트 출력 세트(206) 각각을 프로세싱하는 분류자로부터 도출된 측정치, 및/또는 기타 순위 기준을 포함할 수 있다. 예를 들어, 클라이언트 디바이스(110)의 사용자의 의도가 사용자가 사실적 답변을 원한다는 것을 나타내는 경우(예를 들어 "why is the sky blue?"라는 어시스턴트 쿼리를 포함하는 음성 발화 제공에 기초함), 사용자가 어시스턴트 쿼리에 대한 간단한 답변을 원할 가능성이 높기 때문에 순위 엔진(190)은 하나 이상의 어시스턴트 출력 세트(205)에 포함된 하나 이상의 어시스턴트 출력을 승격할 수 있다. 그러나 클라이언트 디바이스(110)의 사용자의 의도가 사용자가 더 개방형 입력을 제공했음을 나타내는 경우(예를 들어, "what time is it?"라는 어시스턴트 쿼리를 포함하는 음성 발화 제공에 기초함), 순위 엔진(190)은 사용자가 더 대화적인 측면을 선호할 가능성이 높기 때문에 하나 이상의 수정된 어시스턴트 출력 세트(206)에 포함된 하나 이상의 어시스턴트 출력을 승격할 수 있다. The one or more ranking criteria may include, for example, how much of each of the assistant outputs included in the one or more assistant output sets 205 and the one or more modified assistant output sets 206 are included in the spoken utterance captured in the audio data 201 stream. One or more predicted measurements (e.g., ASR measurements generated by ASR engines 130A1 and/or 130A2 when generating a stream of ASR output 203) that indicate what is expected to be a response to an assistant query , NLU measurements generated by the NLU engine 140A1 and/or 140A2 when generating the stream of NLU output 204), one or more intents included in the stream of NLU output 204, and an assistant, if provided for presentation to a user. Derived from a classifier that processes each of the one or more sets of assistant outputs 205 and one or more sets of modified assistant outputs 206 to determine how natural, fluent and/or characteristic each of the outputs is with the automated assistant. measured measurements, and/or other ranking criteria. For example, if the user's intent on client device 110 indicates that the user wants a factual answer (e.g., based on providing a spoken utterance containing the assistant query “why is the sky blue?”), the user Ranking engine 190 may promote one or more assistant outputs included in one or more assistant output sets 205 because it is likely that the assistant will want a simple answer to the query. However, if the user's intent at client device 110 indicates that the user has provided more open-ended input (e.g., based on providing a spoken utterance containing the assistant query “what time is it?”), the ranking engine ( 190) may promote one or more assistant outputs included in one or more modified assistant output sets 206 because the user is likely to prefer a more conversational aspect.
비록 도 1 및 2는 음성 기반 대화 세션과 관련하여 설명되었지만, 이들은 예시를 위해 제공되고 제한하려는 의도가 아님을 이해해야 한다. 오히려, 본 명세서에 설명된 기법은 사용자의 입력 방식에 관계없이 활용될 수 있다는 것이 이해되어야 한다. 예를 들어, 사용자가 어시스턴트 쿼리로서 타이핑된 입력 및/또는 터치 입력을 제공하는 일부 구현예에서, 자동화된 어시스턴트(115)는 NLU 출력(204)의 스트림을 생성하기 위해 NLU 엔진(140A1 및/또는 140A2)을 사용하여 타이핑된 입력을 프로세싱할 수 있고(예: 오디오 데이터 스트림(201)의 프로세싱을 건너뛰기), LLM 엔진(150A1 및/또는 150A2)은 위에서 설명한 것과 동일하거나 유사한 방식으로 하나 이상의 수정된 어시스턴트 출력(206) 세트를 생성할 때 어시스턴트 쿼리에 대응하는 텍스트 입력(예를 들어, 타이핑된 입력 및/또는 터치 입력으로부터 파생됨)을 활용할 수 있다. Although Figures 1 and 2 are described in relation to a voice-based conversation session, it should be understood that they are provided for illustrative purposes and are not intended to be limiting. Rather, it should be understood that the techniques described herein can be utilized regardless of the user's input method. For example, in some implementations where a user provides typed input and/or touch input as an assistant query, automated assistant 115 may use NLU engine 140A1 and/or NLU engine 140A1 to generate a stream of NLU output 204. 140A2) can be used to process typed input (e.g., skipping processing of the audio data stream 201), and the LLM engine (150A1 and/or 150A2) can make one or more modifications in the same or similar manner as described above. Text input (e.g., derived from typed input and/or touch input) corresponding to the assistant query may be utilized when generating the set of assistant output 206.
이제 도 3으로 돌아가면, 온라인 방식으로 후속 사용을 위해 오프라인 방식으로 어시스턴트 출력(들)을 생성할 때 대규모 언어 모델을 활용하는 예시적 방법(300)을 나타내는 흐름도를 도시한다. 편의상, 방법(300)의 동작은 도 2의 프로세스 흐름(200)으로부터 동작을 수행하는 시스템을 참조하여 기술된다. 방법(300)의 이 시스템은 컴퓨팅 디바이스(들)(예를 들어, 도 1의 클라이언트 디바이스(110), 도 6의 클라이언트 디바이스(610) 및/또는 도 7의 클라이언트 디바이스(710), 하나 이상의 서버 및/또는 기타 컴퓨팅 디바이스)의 하나 이상의 프로세서, 메모리 및/또는 다른 컴포넌트(들)을 포함한다. 추가로, 방법(300)의 동작이 특정한 순서로 도시되었지만, 이는 그러한 제한을 의미하지 않는다. 하나 이상의 동작들은 재순서화, 생략 및/또는 추가될 수 있다.Turning now to Figure 3, a flow diagram is shown representing an example method 300 of utilizing a large-scale language model in generating assistant output(s) in an offline manner for subsequent use in an online manner. For convenience, the operation of method 300 is described with reference to a system performing the operations from process flow 200 of FIG. 2. This system of method 300 includes computing device(s) (e.g., client device 110 of FIG. 1, client device 610 of FIG. 6, and/or client device 710 of FIG. 7), one or more servers. and/or other computing devices). Additionally, although the operations of method 300 are shown in a particular order, this is not intended to be such a limitation. One or more operations may be reordered, omitted, and/or added.
블록(352)에서, 시스템은 자동화된 어시스턴트로 향하는 복수의 어시스턴트 쿼리들 및 복수의 어시스턴트 쿼리들 각각에 대한 대응하는 이전 대화 세션의 대응하는 컨텍스트를 획득한다. 예를 들어, 시스템은 도 1 및 도 2의 오프라인 출력 수정 엔진의 어시스턴트 활동 엔진(171)이 복수의 어시스턴트 쿼리는 예를 들어, 도 1에 도시된 어시스턴트 활동 데이터베이스(170A)로부터 수신되었던 이전 대화 세션의 대응 컨텍스트와 복수의 어시스턴트 쿼리를 얻게 할 수 있다. 일부 구현예에서, 복수의 어시스턴트 쿼리 및 복수의 어시스턴트 쿼리가 수신되었던 이전 대화 세션의 대응 컨텍스트는 클라이언트 디바이스의 사용자(예를 들어, 도 1의 클라이언트 디바이스(110)의 사용자)와 연관된 것으로 제한될 수 있다. 다른 구현예에서, 복수의 어시스턴트 쿼리 및 복수의 어시스턴트 쿼리가 수신되었던 이전 대화 세션의 대응 컨텍스트는 각각의 클라이언트 디바이스의 복수의 사용자(예를 들어, 도 1의 클라이언트 디바이스(110)의 사용자를 포함할 수 있고, 포함하지 않을 수 있음)와 연관된 것들로 제한될 수 있다. At block 352, the system obtains a plurality of assistant queries directed to the automated assistant and a corresponding context of a corresponding previous conversation session for each of the plurality of assistant queries. For example, the system may allow the assistant activity engine 171 of the offline output modification engine of FIGS. 1 and 2 to retrieve a plurality of assistant queries from, for example, previous conversation sessions that were received from the assistant activity database 170A shown in FIG. 1. You can obtain the corresponding context and multiple assistant queries. In some implementations, the plurality of assistant queries and the corresponding context of a previous conversation session in which the plurality of assistant queries were received may be limited to those associated with the user of the client device (e.g., the user of client device 110 in Figure 1). there is. In another implementation, the plurality of assistant queries and the corresponding context of a previous conversation session in which the plurality of assistant queries were received may include a plurality of users of each client device (e.g., users of client device 110 of FIG. 1). may or may not include) and may be limited to those related to
블록(354)에서, 시스템은 하나 이상의 LLM을 사용하여 복수의 어시스턴트 쿼리 중 주어진 어시스턴트 쿼리를 프로세싱하여 하나 이상의 대응하는 LLM 출력을 생성하고, 여기서 하나 이상의 대응하는 LLM 출력 각각은 주어진 어시스턴트 쿼리에 대한 응답일 것으로 예측된다. 하나 이상의 대응하는 LLM 출력 각각은 예를 들어 하나 이상의 어휘에 걸친 하나 이상의 단어 및/또는 문구의 시퀀스에 대한 확률 분포를 포함할 수 있고, 확률 분포에 기초하여 시퀀스에서 하나 이상의 단어 및/또는 문구를 하나 이상의 대응하는 LLM 출력으로 선택할 수 있다. 다양한 구현예에서, 주어진 어시스턴트 쿼리에 대한 하나 이상의 대응하는 LLM 출력을 생성할 때, 시스템은 하나 이상의 LLM을 사용하고 어시스턴트 쿼리와 함께, 어시스턴트 쿼리, 주어진 어시스턴트 쿼리가 수신되었던 대응하는 이전 대화 세션의 대응하는 컨텍스트 및/또는 주어진 어시스턴트 쿼리에 대한 응답일 것으로 예측되는 어시스턴트 출력 세트를 프로세싱할 수 있다(예를 들어, 도 2와 관련하여 설명된 바와 같이 ASR 엔진(130A1 및/또는 130A2), NLU 엔진(140A1 및/또는 140A2), 하나 이상의 1P 시스템(191) 및/또는 3P 시스템(192)을 사용하여 주어진 어시스턴트 쿼리에 대응하는 오디오 데이터를 프로세싱하는 것에 기초하여 생성됨). 일부 구현예에서, 시스템은 주어진 어시스턴트 쿼리에 대응하는 인식된 텍스트를 프로세싱할 수 있는 반면, 추가적 또는 대안적 구현예에서 시스템은 주어진 어시스턴트 쿼리를 포함하는 음성 발화를 캡처하는 오디오 데이터를 프로세싱할 수 있다. 일부 구현예에서, 시스템은 LLM 엔진(150A1)이 사용자(예를 들어, 도 1의 클라이언트 디바이스(110)의 사용자)의 클라이언트 디바이스에서 로컬로 하나 이상의 LLM을 사용하여 주어진 어시스턴트 쿼리를 프로세싱하게 할 수 있고, 반면, 다른 구현예에서, 시스템은 LLM 엔진(150A2)이 사용자의 클라이언트 디바이스로부터 원격으로(예를 들어, 원격 서버(들)에서) 하나 이상의 LLM을 사용하여 주어진 어시스턴트 쿼리를 프로세싱하게 할 수 있다. 본 명세서에 설명된 바와 같이, 하나 이상의 대응하는 LLM 출력은 자동화된 어시스턴트에 의해 제공될 수 있는 일반적인 어시스턴트 출력의 것보다 더 자연스러운 대화 출력을 반영할 수 있으며, 이는 자동화된 어시스턴트가 더 유동적인 방식으로 대화 세션을 구동할 수 있게 하여, 하나 이상의 대응하는 LLM 출력에 기초하여 수정된 어시스턴트 출력은 수정된 어시스턴트 출력을 인식하는 사용자와 공감할 가능성이 더 높다. At block 354, the system processes a given assistant query of a plurality of assistant queries using one or more LLMs to generate one or more corresponding LLM outputs, where each of the one or more corresponding LLM outputs is a response to the given assistant query. It is predicted that it will be. Each of the one or more corresponding LLM outputs may, for example, include a probability distribution for a sequence of one or more words and/or phrases across one or more vocabularies, and, based on the probability distribution, to select one or more words and/or phrases from the sequence. You can select one or more corresponding LLM outputs. In various implementations, when generating one or more corresponding LLM outputs for a given assistant query, the system uses one or more LLMs and, together with the assistant query, the assistant query, the corresponding previous conversation session in which the given assistant query was received. Process the context and/or set of assistant outputs expected to be in response to a given assistant query (e.g., an ASR engine 130A1 and/or 130A2, as described with respect to FIG. 2, an NLU engine ( 140A1 and/or 140A2), generated based on processing audio data corresponding to a given assistant query using one or more 1P systems 191 and/or 3P systems 192). In some implementations, the system may process recognized text corresponding to a given assistant query, while in additional or alternative implementations the system may process audio data that captures a spoken utterance that includes the given assistant query. . In some implementations, the system may cause LLM engine 150A1 to process a given assistant query using one or more LLMs locally on the client device of the user (e.g., the user of client device 110 in Figure 1). While in other implementations, the system may cause LLM engine 150A2 to process a given assistant query using one or more LLMs remotely from the user's client device (e.g., on remote server(s)). there is. As described herein, one or more corresponding LLM outputs may reflect more natural conversational output than that of typical assistant output that may be provided by an automated assistant, which allows the automated assistant to interact in a more fluid manner. By enabling conversational sessions to be driven, assistant outputs modified based on one or more corresponding LLM outputs are more likely to resonate with users who recognize the modified assistant outputs.
일부 구현예에서, 하나 이상의 대응하는 LLM 출력에 더하여, 추가 어시스턴트 쿼리는 LLM 모델 중 하나 이상을 사용하여 주어진 어시스턴트 쿼리 및/또는 주어진 어시스턴트 쿼리가 수신되었던 대응하는 이전 대화 세션의 대응하는 컨텍스트를 프로세싱하는 것에 기초하여 생성될 수 있다. 예를 들어, 주어진 어시스턴트 쿼리 및/또는 주어진 어시스턴트 쿼리가 수신되었던 대응하는 이전 대화 세션의 대응하는 컨텍스트를 프로세싱할 때, LLM 중 하나 이상은 주어진 어시스턴트 쿼리와 연관된 의도를 결정할 수 있다(예를 들어, 도 2의 NLU 엔진(140A1 및/또는 140A2)을 사용하여 생성된 NLU 출력(204) 스트림에 기초함). 또한, 하나 이상의 LLM은 주어진 어시스턴트 쿼리와 연관된 의도에 기초하여, 주어진 어시스턴트 쿼리와 연관된 의도와 관련된 적어도 하나의 관련 의도를 식별할 수 있다(예를 들어, 상기 의도와 클라이언트 디바이스(110)에 액세스할 수 있는 데이터베이스 또는 메모리의 적어도 하나의 관련 의도의 매핑에 기초하여 및/또는 하나 이상의 기계 학습(ML) 모델 또는 경험적으로 정의된 규칙을 사용하여 주어진 어시스턴트 쿼리와 연관된 의도 프로세싱에 기초하여). 더욱이, 하나 이상의 LLM은 적어도 하나의 관련 의도에 기초하여 추가적인 어시스턴트 쿼리를 생성할 수 있다. 예를 들어, 어시스턴트 쿼리가 사용자가 아직 저녁을 먹지 않았음을 나타낸다고 가정한다(예를 들어, "I’m feeling pretty hungry"라는 주어진 어시스턴트 쿼리가 먹고 싶다고 나타내는 사용자의 의도와 연관된 대응하는 이전 대화 세션의 대응하는 컨텍스트에 의해 표시된 사용자의 실제 주거지에서 저녁에 수신됨). 이 예에서, 추가 어시스턴트 쿼리는 예를 들어, "what types of cuisine has the user indicated he/she prefers?"(예를 들어, 먹고 싶다는 사용자의 의도와 연관된 관련 요리 유형 의도를 반영), "what restaurants nearby are open?"(예를 들어, 먹고 싶다고 나타내는 사용자의 의도와 연관된 관련 레스토랑 검색 의도를 반영함) 및/또는 기타 추가 어시스턴트 쿼리에 대응할 수 있다. In some implementations, in addition to one or more corresponding LLM outputs, the additional assistant query uses one or more of the LLM models to process the given assistant query and/or the corresponding context of the corresponding previous conversation session in which the given assistant query was received. It can be created based on For example, when processing a given assistant query and/or the corresponding context of the corresponding previous conversation session in which the given assistant query was received, one or more of the LLMs may determine the intent associated with the given assistant query (e.g. Based on the NLU output 204 stream generated using the NLU engine 140A1 and/or 140A2 of Figure 2). Additionally, the one or more LLMs may identify, based on the intent associated with the given assistant query, at least one related intent associated with the intent associated with the given assistant query (e.g., access to client device 110 with the intent). (may be based on a mapping of at least one associated intent in a database or memory and/or based on processing intents associated with a given assistant query using one or more machine learning (ML) models or empirically defined rules). Moreover, one or more LLMs may generate additional assistant queries based on at least one relevant intent. For example, assume that an assistant query indicates that the user has not yet eaten dinner (e.g., "I'm feeling pretty hungry"). received in the evening at the user's actual residence indicated by the corresponding context of ). In this example, additional Assistant queries would be, for example, "what types of cuisine has the user indicated he/she prefers?" (e.g., reflecting relevant cuisine type intents associated with the user's intent to eat), "what restaurants are open nearby?" (e.g., reflecting relevant restaurant search intent associated with the user's intent indicating a desire to eat) and/or other additional assistant queries.
이러한 구현예에서, 추가 어시스턴트 쿼리 프로세싱에 기초하여 추가 어시스턴트 출력이 결정될 수 있다. 추가 어시스턴트 쿼리가 "what types of cuisine has the user indicated he/she prefers?"인 위의 예에서, 클라이언트 디바이스(110)에 로컬로 저장된 하나 이상의 1P 시스템(191)으로부터의 사용자 프로필 데이터가 사용자가 지중해 요리와 인도 요리를 선호한다고 표시했는지 확인하기 위해 활용될 수 있다. 사용자가 지중해 요리와 인도 요리를 선호한다는 것을 나타내는 사용자 프로필 데이터에 기초하여, 하나 이상의 대응하는 LLM 출력을 수정하여 지중해 요리 및/또는 인도 요리가 사용자에게 식욕을 돋우는지 여부를 사용자에게 질문할 수 있다(예: "how does Mediterranean cuisine or Indian cuisine sound for dinner"). In such implementations, additional assistant output may be determined based on additional assistant query processing. In the above example where the additional Assistant query is "what types of cuisine has the user indicated he/she prefers?", user profile data from one or more 1P systems 191 stored locally on the client device 110 indicates that the user has Mediterranean cuisine. It can be used to check if you have indicated a preference for cuisine and Indian cuisine. Based on user profile data indicating that the user prefers Mediterranean and Indian cuisine, one or more corresponding LLM outputs may be modified to ask the user whether Mediterranean and/or Indian cuisine is appetizing to the user. (e.g. “how does Mediterranean cuisine or Indian cuisine sound for dinner”).
추가 어시스턴트 쿼리가 "what restaurants nearby are open?"인 위의 예에서, 1P 시스템(191) 및/또는 3P 시스템(192) 중 하나 이상으로부터의 레스토랑 데이터는 사용자의 기본 거주지 근처에 어떤 레스토랑이 열었는지 결정하는데 활용될 수 있다(선택적으로 사용자 프로필 데이터에 기초하여 지중해 요리와 인도 요리를 제공하는 레스토랑으로 제한됨). 결과에 기초하여, 하나 이상의 대응하는 LLM 출력을 수정하여 사용자의 기본 거주지 근처에 영업하는 하나 이상의 레스토랑 목록을 사용자에게 제공할 수 있다(예: "Example Mediterranean Restaurant is open until 9:00 PM and Example Indian Restaurant is open until 10:00 PM"). 특히, 위의 LLM을 사용하여 초기에 생성된 추가 어시스턴트 쿼리(예: 위 예에서 "what types of cuisine has the user indicated he/she prefers?", "what types of cuisine has the user indicated he/she prefers?")는 하나 이상의 대응하는 LLM 출력에 포함되지 않을 수 있으며, 결과적으로 사용자에게 제공되지 않을 수 있다. 오히려, 추가 어시스턴트 쿼리에 기초하여 결정된 추가 어시스턴트 출력(예: "how does Mediterranean cuisine or Indian cuisine sound for dinner" 및 "Example Mediterranean Restaurant is open until 9:00 PM and Example Indian Restaurant is open until 10:00 PM")은 하나 이상의 대응하는 LLM 출력에 포함될 수 있으며, 결과적으로 사용자에게 제시하기 위해 제공될 수 있다. In the example above where the additional Assistant query is “what restaurants nearby are open?”, restaurant data from one or more of the 1P system 191 and/or 3P system 192 would determine which restaurants are open near the user's primary residence. may be used to make decisions (optionally limited to restaurants serving Mediterranean and Indian cuisine based on user profile data). Based on the results, one or more corresponding LLM outputs can be modified to provide the user with a list of one or more restaurants operating near the user's primary residence, such as "Example Mediterranean Restaurant is open until 9:00 PM and Example Indian Restaurant is open until 10:00 PM"). In particular, additional assistant queries initially generated using the LLM above, such as "what types of cuisine has the user indicated he/she prefers?" ?") may not be included in one or more corresponding LLM outputs and, as a result, may not be provided to the user. Rather, additional assistant output determined based on additional assistant queries, such as "how does Mediterranean cuisine or Indian cuisine sound for dinner" and "Example Mediterranean Restaurant is open until 9:00 PM and Example Indian Restaurant is open until 10:00 PM ") may be included in one or more corresponding LLM outputs, which may in turn be provided for presentation to the user.
추가적 또는 대안적 구현예에서, 하나 이상의 대응하는 LLM 출력(및 선택적으로 추가 어시스턴트 쿼리에 기초하여 결정된 추가 어시스턴트 출력(들)) 각각은 하나 이상의 LLM의 복수의 이종 파라미터 세트의 대응하는 파라미터 세트를 사용하여 생성될 수 있다. 복수의 이종 파라미터 세트들 각각은 자동화된 어시스턴트에 대한 이종 성격과 연관될 수 있다. 상기 구현예 중 일부 버전에서, 단일 LLM을 활용하여 이종 성격 각각에 대한 대응하는 파라미터 세트를 사용하여 하나 이상의 대응하는 LLM 출력을 생성할 수 있고, 상기 구현예의 다른 버전에서, 다수의 LLM을 활용하여 이종 성격 각각에 대한 대응하는 파라미터 세트를 사용하여 하나 이상의 대응하는 LLM 출력을 생성할 수 있다. 예를 들어, 단일 LLM을 활용하여 제1 성격을 반영하는 제1 파라미터 세트를 사용하여 제1 LLM 출력을 생성하고(예: 주어진 어시스턴트 쿼리가 "I’m feeling pretty hungry"에 대응하는 위 예의 요리사 성격); 제2 성격을 반영하는 제2 파라미터 세트를 사용하여 제2 LLM 출력을 생성하고(예: 주어진 어시스턴트 쿼리가 "I’m feeling pretty hungry"에 대응하는 위의 예에서 집사 성격); 그리고 복수의 다른 이질적인 성격들에 대해서도 마찬가지이다. 또한, 예를 들어, 제1 LLM은 제1 성격을 반영하는 제1 파라미터 세트를 사용하여 제1 LLM 출력을 생성하는데 활용될 수 있고(예: 주어진 어시스턴트 쿼리가 "I’m feeling pretty hungry"에 대응하는 위의 예에서 요리사 성격); 제2 LLM은 제2 성격을 반영하는 제2 파라미터 세트를 사용하여 제2 LLM 출력을 생성하는데 활용될 수 있고(예: 주어진 어시스턴트 쿼리가 "I’m feeling pretty hungry"에 대응하는 위의 예에서 집사 성격); 그리고 복수의 다른 이질적인 성격들에 대해서도 마찬가지이다. 따라서, 대응하는 LLM 출력이 사용자에게 제시하기 위해 제공되면, 이는 상이한 성격의 운율 속성(예: 이러한 다양한 성격의 억양, 종지, 음높이, 일시정지, 템포, 스트레스, 리듬 등)을 통해 다양한 동적 컨텍스트 성격을 반영할 수 있다. 추가적으로 또는 대안적으로, 사용자는 (예를 들어, 본 명세서에 설명된 자동화된 어시스턴트와 연관된 자동화된 어시스턴트 애플리케이션의 설정을 통해) 지속적인 방식으로(예를 들어, 항상 집사 성격을 사용함) 및/또는 상황에 맞는 방식으로(예: 아침과 저녁에는 집사 성격을 사용하고 오후에는 다른 성격을 사용함) 자동화된 어시스턴트에 의해 활용될 하나 이상의 성격을 정의할 수 있다. In additional or alternative implementations, each of the one or more corresponding LLM outputs (and optionally the additional assistant output(s) determined based on the additional assistant query) each uses a corresponding parameter set of the plurality of heterogeneous parameter sets of the one or more LLMs. It can be created. Each of the plurality of heterogeneous parameter sets may be associated with a heterogeneous personality for the automated assistant. In some versions of the above implementations, a single LLM may be utilized to generate one or more corresponding LLM outputs using corresponding parameter sets for each of the heterogeneous personalities, and in other versions of the above implementations multiple LLMs may be utilized One or more corresponding LLM outputs can be generated using the corresponding parameter sets for each heterogeneous personality. For example, a single LLM can be leveraged to generate a first LLM output using a first set of parameters that reflect a first personality (e.g., the chef in the above example where the given assistant query corresponds to "I'm feeling pretty hungry") personality); generate a second LLM output using a second set of parameters reflecting a second personality (e.g., the butler personality in the above example where the given assistant query corresponds to “I’m feeling pretty hungry”); And the same goes for the other heterogeneous personalities of the plural. Additionally, for example, a first LLM may be utilized to generate a first LLM output using a first set of parameters that reflect a first personality (e.g., if a given assistant query is "I'm feeling pretty hungry") corresponding chef personality in the example above); The second LLM can be utilized to generate a second LLM output using a second set of parameters that reflect the second personality (e.g., in the example above where the given assistant query corresponds to "I'm feeling pretty hungry") butler personality); And the same goes for the other heterogeneous personalities of the plural. Therefore, when the corresponding LLM output is provided for presentation to the user, it can be used to describe various dynamic context personalities through prosodic properties of different natures (e.g. intonation, cadence, pitch, pause, tempo, stress, rhythm, etc. of these different natures). can reflect. Additionally or alternatively, the user may (e.g., through settings of an automated assistant application associated with an automated assistant described herein) in an ongoing manner (e.g., always use the butler personality) and/or circumstances. You can define one or more personalities to be utilized by the automated assistant in a way that suits your needs (e.g., using a butler personality in the morning and evening, and a different personality in the afternoon).
특히, 본 명세서에 기술된 이러한 성격 응답은 서로 다른 성격의 운율 속성을 반영할 뿐만 아니라, 서로 다른 성격의 어휘 및/또는 서로 다른 성격의 서로 다른 말하기 스타일(예: 장황한 말하기 스타일, 간결한 말하기 스타일, 친절한 성격, 냉소적 성격 등)을 반영할 수 있다. 예를 들어, 위에 설명된 요리사 성격은 특정 요리사 어휘를 가질 수 있으므로 요리사 성격에 대한 파라미터 세트를 사용하여 생성된 하나 이상의 대응하는 LLM 출력에 대한 하나 이상의 단어 및/또는 문구의 시퀀스에 대한 확률 분포가 다른 성격(예: 과학자 성격, 사서 성격 등)에 대한 다른 단어 및/또는 문구의 시퀀스보다 요리사가 사용하는 단어 및/또는 문구의 시퀀스를 촉진하도록 할 수 있다. 따라서, 대응하는 LLM 출력 중 하나 이상이 사용자에게 제시하기 위해 제공되면, 다양한 성격의 운율 속성뿐만 아니라 다양한 성격의 정확하고 현실적인 어휘 측면에서 다양한 동적 컨텍스트적 성격을 반영할 수 있고, 하나 이상의 대응하는 LLM 출력이 다양한 컨텍스트적 시나리오에서 사용자에게 더 잘 공감하도록 한다. 더욱이, 다양한 성격의 어휘 및/또는 말하기 스타일이 다양한 수준의 세분화로 정의될 수 있음을 이해해야 한다. 위의 예를 계속하면, 위에서 설명한 셰프 성격은 지중해 요리와 연관된 추가 어시스턴트 쿼리에 기초하여 지중해 요리에 대해 질문할 때 특정 지중해 요리사 어휘를 가질 수 있고, 인도 요리와 연관된 추가 어시스턴트 쿼리에 기초하여 인도 요리에 대해 질문할 때 특정 인도 셰프 어휘를 가질 수 있다. In particular, these personality responses described herein not only reflect the prosodic properties of different personalities, but also the vocabulary of different personalities and/or the different speaking styles of different personalities (e.g., verbose speaking style, concise speaking style; It can reflect a friendly personality, a cynical personality, etc.) For example, the chef personality described above may have a specific chef vocabulary, such that the probability distribution for one or more sequences of words and/or phrases for one or more corresponding LLM outputs generated using the parameter set for the chef personality is You can have it promote sequences of words and/or phrases used by the chef over other sequences of words and/or phrases for other personalities (e.g., scientist personality, librarian personality, etc.). Accordingly, when one or more of the corresponding LLM outputs are provided for presentation to a user, they may reflect the diverse dynamic contextual nature in terms of accurate and realistic vocabularies of the various natures as well as the prosodic properties of the various natures of the one or more corresponding LLMs. Make the output resonate better with users in a variety of contextual scenarios. Moreover, it should be understood that different personalities of vocabulary and/or speaking styles can be defined at different levels of granularity. Continuing with the example above, the Chef personality described above could have a specific Mediterranean Chef vocabulary when asking about Mediterranean cuisine based on additional assistant queries associated with Mediterranean cuisine, and Indian cuisine based on additional assistant queries associated with Indian cuisine. You may have a specific Indian chef vocabulary when asking questions about.
블록(356)에서, 시스템은 상기 주어진 어시스턴트 쿼리 및/또는 상기 주어진 어시스턴트 쿼리에 대한 대응하는 이전 대화 세션의 대응하는 컨텍스트에 기초하여 클라이언트 디바이스(예: 도 1의 LLM 출력(들) 데이터베이스)에서 액세스할 수 있는 메모리에서 하나 이상의 대응하는 LLM 출력을 인덱싱한다. 예를 들어, 시스템은 도 1 및 도 2의 오프라인 출력 수정 엔진의 인덱싱 엔진(172)이 LLM 출력(들) 데이터베이스(150A)에서 하나 이상의 대응하는 LLM 출력을 인덱싱하게 할 수 있다. 일부 구현예에서, 인덱싱 엔진(172)은 주어진 어시스턴트 쿼리에 포함된 하나 이상의 용어 및/또는 어진 어시스턴트 쿼리가 수신되었던 대응하는 이전 대화 세션의 대응하는 컨텍스트에 포함된 하나 이상의 컨텍스트 신호에 기초하여 하나 이상의 대응하는 LLM 출력을 인덱싱할 수 있다. 추가적 또는 대안적 구현예에서, 인덱싱 엔진(172)은 주어진 어시스턴트 쿼리의 임베딩(예를 들어, word2vec 임베딩 또는 임의의 다른 저차원 표현)이 생성되도록 할 수 있으며 및/또는 주어진 어시스턴트 쿼리가 수신되었던 대응하는 이전 대화 세션의 대응하는 컨텍스트에 포함된 하나 이상의 컨텍스트 신호가 생성되도록 할 수 있고, 이러한 임베딩 중 하나 이상이 임베딩 공간(예: 저차원 공간)에 매핑될 수 있다. 이러한 구현예에서, LLM 출력(들) 데이터베이스(150A)에 인덱싱된 하나 이상의 대응하는 LLM 출력은 어시스턴트 출력 세트를 수정하기 위해 온라인 출력 수정 엔진(180)에 의해 후속적으로 활용될 수 있다(예를 들어, 도 3의 방법(300)의 블록(362, 364, 366)과 관련하여 아래에 기술됨). 다양한 구현예에서, 시스템은 추가적으로 또는 대안적으로 주어진 어시스턴트 쿼리(그러나 LLM 엔진(150A1 및/또는 150A2)을 사용하여 생성되지 않음)에 응답할 것으로 예측되는 하나 이상의 어시스턴트 출력(예를 들어, 도 2와 관련하여 설명된 바와 같은 하나 이상의 어시스턴트 출력(205))을 생성할 수 있고, 하나 이상의 대응하는 LLM 출력은 추가적으로 또는 대안적으로 하나 이상의 어시스턴트 출력에 의해 인덱싱될 수 있다. At block 356, the system accesses at a client device (e.g., the LLM output(s) database of Figure 1) based on the given assistant query and/or the corresponding context of the corresponding previous conversation session for the given assistant query. Indexes one or more corresponding LLM outputs in memory. For example, the system may cause the indexing engine 172 of the offline output modification engine of FIGS. 1 and 2 to index one or more corresponding LLM outputs in the LLM output(s) database 150A. In some implementations, indexing engine 172 may determine one or more terms based on one or more terms included in a given assistant query and/or one or more context signals included in the corresponding context of a corresponding previous conversation session in which the given assistant query was received. The corresponding LLM output can be indexed. In additional or alternative implementations, indexing engine 172 may cause an embedding (e.g., a word2vec embedding or any other low-dimensional representation) of a given assistant query to be generated and/or generate a corresponding may cause one or more context signals to be generated that are contained in a corresponding context of a previous conversation session, and one or more of these embeddings may be mapped to an embedding space (e.g., a low-dimensional space). In this implementation, one or more corresponding LLM outputs indexed in the LLM output(s) database 150A may be subsequently utilized by the online output modification engine 180 to modify the assistant output set (e.g. For example, described below with respect to blocks 362, 364, and 366 of method 300 of Figure 3). In various implementations, the system may additionally or alternatively display one or more assistant outputs predicted to respond to a given assistant query (but not generated using LLM engines 150A1 and/or 150A2) (e.g., Figure 2 and one or more corresponding LLM outputs may additionally or alternatively be indexed by the one or more assistant outputs.
일부 구현예에서, 그리고 블록(358)에 표시된 바와 같이, 시스템은 대응하는 LLM 출력 중 하나 이상을 검토 및/또는 수정하기 위한 사용자 입력을 선택적으로 수신할 수 있다. 예를 들어, 사람 검토자는 하나 이상의 LLM 모델을 사용하여 생성된 하나 이상의 대응하는 LLM 출력을 분석하고, 하나 이상의 대응하는 LLM 출력에 포함된 하나 이상의 용어 및/또는 문구를 변경함으로써 대응하는 LLM 출력 중 하나 이상을 수정할 수 있다. 또한, 예를 들어 사람 검토자는 하나 이상의 대응하는 LLM 출력의 인덱스를 다시 인덱싱하고, 폐기하고 및/또는 수정할 수 있다. 따라서, 이러한 구현예에서, 하나 이상의 LLM을 사용하여 생성된 하나 이상의 대응하는 LLM 출력은 하나 이상의 대응하는 LLM 출력의 품질을 보장하기 위해 사람 검토자에 의해 선별될 수 있다. 또한 폐기되지 않고 재인덱싱되거나 선별된 LLM 출력을 활용하여 LLM을 오프라인 방식으로 수정하거나 재트레이닝할 수 있다.In some implementations, and as indicated at block 358, the system may optionally receive user input to review and/or modify one or more of the corresponding LLM outputs. For example, a human reviewer may analyze one or more corresponding LLM outputs generated using one or more LLM models, and change one or more terms and/or phrases included in the one or more corresponding LLM outputs to determine the length of the corresponding LLM output. You can edit more than one. Additionally, for example, a human reviewer may re-index, discard, and/or modify the index of one or more corresponding LLM outputs. Accordingly, in such implementations, one or more corresponding LLM outputs generated using one or more LLMs may be screened by a human reviewer to ensure the quality of the one or more corresponding LLM outputs. Additionally, LLMs can be modified or retrained offline by leveraging non-discarded re-indexed or curated LLM output.
블록(360)에서, 시스템은 LLM 중 하나 이상을 사용하여 프로세싱되지 않은 블록(352)에서 획득된 복수의 어시스턴트 쿼리에 포함된 추가 어시스턴트 쿼리가 있는지 여부를 결정한다. 블록(360)의 반복에서, 시스템이 하나 이상의 LLM을 사용하여 프로세싱되지 않은 블록(352)에서 획득된 복수의 어시스턴트 쿼리에 포함된 추가 어시스턴트 쿼리가 있다고 결정하면, 시스템은 블록(354)으로 복귀하고 그리고 주어진 어시스턴트 쿼리가 아닌 추가 어시스턴트와 관련된 블록(354 및 356)의 추가 반복을 수행한다. 이들 동작은 블록(352)에서 획득된 복수의 어시스턴트 쿼리에 포함된 어시스턴트 쿼리 각각에 대해 반복될 수 있다. 다르게 말하면, 시스템은 어시스턴트 쿼리 각각에 대한 하나 이상의 대응하는 LLM 출력 및/또는 복수의 어시스턴트 쿼리 중 대응하는 쿼리가 하나 이상의 대응하는 LLM 출력이 활용되게 하기 전에 수신된 대응하는 이전 대화 세션의 대응하는 컨텍스트를 인덱싱할 수 있다. At block 360, the system determines whether there are additional assistant queries included in the plurality of assistant queries obtained at block 352 that were not processed using one or more of the LLMs. In an iteration of block 360, if the system determines that there are additional assistant queries included in the plurality of assistant queries obtained at block 352 that have not been processed using one or more LLMs, the system returns to block 354 and Then, perform additional iterations of blocks 354 and 356 related to additional assistants other than the given assistant query. These operations may be repeated for each assistant query included in the plurality of assistant queries obtained at block 352. Stated differently, the system may generate one or more corresponding LLM outputs for each assistant query and/or the corresponding context of a corresponding previous conversation session received before the corresponding query among the plurality of assistant queries caused the one or more corresponding LLM outputs to be utilized. can be indexed.
블록(360)의 반복에서, 시스템이 하나 이상의 LLM을 사용하여 프로세싱되지 않은 블록(352)에서 획득된 복수의 어시스턴트 쿼리에 포함된 추가 어시스턴트 쿼리가 없다고 결정하면, 시스템은 블록(362)으로 진행할 수 있다. 블록(362)에서, 시스템은 클라이언트 디바이스의 하나 이상의 마이크로폰에 의해 생성된 오디오 데이터 스트림을 모니터링하여 오디오 데이터 스트림이 자동화된 어시스턴트로 향하는 클라이언트 디바이스 사용자의 음성 발화를 캡처하는지 여부를 결정할 수 있다. 예를 들어, 시스템은 오디오 데이터의 스트림에 포함된 하나 이상의 특정 단어 또는 문구를 모니터링할 수 있다(예를 들어, 핫워드 검출 모델을 사용하여 자동화된 어시스턴트를 호출하는 하나 이상의 특정 단어 또는 문구를 모니터링함). 또한, 예를 들어, 시스템은 선택적으로 하나 이상의 다른 신호(예: 클라이언트 디바이스의 비전 센서에 의해 캡처된 하나 이상의 제스처, 클라이언트 디바이스로 향하는 시선 등)에 추가하여 클라이언트 디바이스로 향하는 스피치를 모니터링할 수 있다. 블록(362)의 반복에서, 시스템이 오디오 데이터의 스트림이 자동화된 어시스턴트로 향하는 클라이언트 디바이스 사용자의 음성 발화를 캡처하지 않는다고 결정하면, 시스템은 블록(362)에서 오디오 데이터의 스트림을 계속 모니터링할 수 있다. 블록(362)의 반복에서, 시스템이 오디오 데이터의 스트림이 자동화된 어시스턴트로 향하는 클라이언트 디바이스 사용자의 음성 발화를 캡처한다고 결정하면, 시스템은 블록(364)으로 진행할 수 있다.If, in an iteration of block 360, the system determines that no additional assistant queries are included in the plurality of assistant queries obtained at block 352 that have not been processed using one or more LLMs, the system may proceed to block 362. there is. At block 362, the system can monitor the audio data stream generated by one or more microphones on the client device to determine whether the audio data stream captures a vocal utterance of the client device user destined for the automated assistant. For example, the system may monitor one or more specific words or phrases included in a stream of audio data (e.g., use a hotword detection model to monitor one or more specific words or phrases that invoke an automated assistant). box). Additionally, for example, the system may optionally monitor speech directed to the client device in addition to one or more other signals (e.g., one or more gestures captured by vision sensors on the client device, gaze directed toward the client device, etc.) . In an iteration of block 362, if the system determines that the stream of audio data does not capture the client device user's spoken utterances directed to the automated assistant, the system may continue to monitor the stream of audio data at block 362. . In an iteration of block 362, if the system determines that a stream of audio data captures the client device user's spoken utterances directed to the automated assistant, the system may proceed to block 364.
블록(364)에서, 시스템은 상기 오디오 데이터 스트림을 프로세싱하는 것에 기초하여, 상기 음성 발화가 복수의 어시스턴트 쿼리들 중 하나에 대응하는 현재 어시스턴트 쿼리를 포함하고 및/또는 상기 음성 발화가 복수의 어시스턴트 쿼리들 중 하나에 대한 대응하는 이전 대화 세션의 대응하는 컨텍스트에 대응하는 현재 대화 세션의 현재 컨텍스트에서 수신되었다고 결정한다. 예를 들어, 시스템은 ASR 엔진(130A1 및/또는 130A2)을 사용하여 오디오 데이터의 스트림(예를 들어, 도 2의 오디오 데이터(201)의 스트림)을 프로세싱하여, ASR 출력의 스트림(예를 들어, 도 2의 ASR 출력(203)의 스트림)을 생성한다. 또한, 시스템은 NLU 출력의 스트림(예를 들어, 도 2의 NLU 출력(204)의 스트림)을 생성하기 위해 NLU 엔진(140A1 및/또는 140A2)을 사용하여 ASR 출력의 스트림을 프로세싱할 수 있다. 또한 ASR 출력 스트림 및/또는 NLU 출력 스트림에 기초하여 시스템은 현재 어시스턴트 쿼리를 식별할 수 있다. 일부 구현예에서, 시스템은 1P 시스템(191) 및/또는 3P 시스템 중 하나 이상이 ASR 출력의 스트림 및/또는 NLU 출력의 스트림을 프로세싱하게 함으로써 하나 이상의 어시스턴트 출력 세트(예를 들어, 도 2의 하나 이상의 어시스턴트 출력(205))를 더 결정할 수 있다. At block 364, the system determines, based on processing the audio data stream, that the spoken utterance includes a current assistant query that corresponds to one of a plurality of assistant queries and/or that the spoken utterance corresponds to a plurality of assistant queries. Determine that one of the corresponding contexts of the corresponding previous conversation session has been received in the current context of the corresponding current conversation session. For example, the system may use the ASR engine 130A1 and/or 130A2 to process a stream of audio data (e.g., the stream of audio data 201 in FIG. 2) to produce a stream of ASR output (e.g. , stream of the ASR output 203 in Figure 2). Additionally, the system may process the stream of ASR output using NLU engines 140A1 and/or 140A2 to generate a stream of NLU output (e.g., a stream of NLU output 204 in FIG. 2). Additionally, based on the ASR output stream and/or NLU output stream, the system may identify the current assistant query. In some implementations, the system can configure one or more sets of assistant outputs (e.g., one of FIG. 2 The above assistant output (205) can be further determined.
일부 구현예에서 상기 방법은 도 3에 도시된 바와 같이, 시스템은 현재 어시스턴트 쿼리의 하나 이상의 용어 또는 문구가 대응하는 하나 이상의 대응하는 LLM 출력이 인덱싱되었던 복수의 어시스턴트 쿼리들 중 하나의 하나 이상의 용어 또는 문구에 대응하는지 결정하기 위해 온라인 출력 수정 엔진(180)을 활용할 수 있다(예: 정확한 일치 기법, 소프트 일치 기법, 편집 거리 기법, 음성 유사성 기법, 임베딩 기법 등과 같이 용어나 문구가 서로 일치하는지 여부를 결정하는 알려진 기법을 사용하여). 현재 어시스턴트 쿼리의 하나 이상의 용어 또는 문구가 복수의 어시스턴트 쿼리들 중 하나의 하나 이상의 용어 또는 문구에 대응한다는 결정에 응답하여, 시스템은 (예를 들어, LLM 출력(들) 데이터베이스(150A)로부터) 블록(356)의 반복에서 인덱싱되고 복수의 어시스턴트 쿼리들 중 하나와 연관된 대응하는 LLM 출력 중 하나 이상을 획득할 수 있다. 예를 들어, 현재 쿼리에 "I’m hungry"라는 문구를 포함하면, 시스템은 주어진 어시스턴트 쿼리와 관련하여 설명한 위의 예에서 생성된 대응하는 LLM 출력 중 하나 이상을 획득할 수 있다. 예를 들어, 시스템은 현재 쿼리의 용어와 주어진 어시스턴트 쿼리의 용어 사이의 편집 거리 비교에 기초하여, 위에서 설명한 현재 쿼리와 주어진 어시스턴트 쿼리가 둘 모두 "I’m hungry"라는 문구를 포함하고 있음을 결정할 수 있다. 또한, 예를 들어, 시스템은 현재 어시스턴트 쿼리의 임베딩을 생성하고 현재 쿼리의 임베딩을 블록(356)과 관련하여 위에서 설명한 임베딩 공간에 매핑할 수 있다. 또한, 시스템은 임베딩 공간 내에서 현재 쿼리에 대해 생성된 임베딩과 거리 임계값을 만족하는 주어진 어시스턴트 쿼리에 대해 이전에 생성된 임베딩 사이의 거리에 기초하여, 현재 어시스턴트 쿼리가 주어진 어시스턴트 쿼리에 대응한다고 결정할 수 있다. In some implementations, the method, as shown in Figure 3, the system determines that one or more terms or phrases in the current assistant query correspond to one or more corresponding LLM outputs in one of a plurality of assistant queries for which one or more terms or phrases have been indexed. An online output modification engine 180 may be utilized to determine whether a term or phrase matches a phrase (e.g., exact match technique, soft match technique, edit distance technique, phonetic similarity technique, embedding technique, etc.). using known techniques to determine). In response to determining that one or more terms or phrases in the current assistant query correspond to one or more terms or phrases in one of the plurality of assistant queries, the system determines (e.g., from LLM output(s) database 150A) a block In an iteration of 356, one or more of the corresponding LLM outputs indexed and associated with one of the plurality of assistant queries may be obtained. For example, if the current query includes the phrase “I’m hungry,” the system may obtain one or more of the corresponding LLM outputs generated in the example above described in relation to the given assistant query. For example, the system may determine that the current query described above and the given assistant query both contain the phrase "I'm hungry" based on a comparison of the edit distance between the terms in the current query and the terms in the given assistant query. You can. Additionally, for example, the system may generate an embedding of the current assistant query and map the embedding of the current query into the embedding space described above with respect to block 356. Additionally, the system may determine that the current assistant query corresponds to a given assistant query based on the distance within the embedding space between an embedding generated for the current query and a previously generated embedding for a given assistant query that satisfies the distance threshold. You can.
도 3의 방법(300)의 추가적 또는 대안적 구현예에서, 시스템은 온라인 출력 수정 엔진(180)을 활용하여 현재 어시스턴트 쿼리가 수신된 경우 검출된 하나 이상의 컨텍스트 신호는 복수의 어시스턴트 쿼리들 중 하나가 수신되었던 하나 이상의 대응하는 컨텍스트 신호에 대응한다고 결정한다(예: 동일한 요일에 수신됨, 동일한 날짜, 동일한 위치, 동일한 주변 소음이 클라이언트 디바이스의 환경에 존재함, 대화 세션 동안 음성 발화의 특정 시퀀스로 수신됨 등). 현재 어시스턴트 쿼리와 연관된 하나 이상의 컨텍스트 신호가 복수의 어시스턴트 쿼리들 중 하나의 하나 이상의 컨텍스트 신호에 대응한다는 결정에 응답하여, 시스템은 (예를 들어, LLM 출력(들) 데이터베이스(150A)로부터) 블록(356)의 반복에서 인덱싱되고 복수의 어시스턴트 쿼리들 중 하나와 연관된 대응하는 LLM 출력 중 하나 이상을 획득할 수 있다. 예를 들어, 현재 쿼리가 사용자의 기본 거주지에서 저녁에 수신되었던 경우, 시스템은 주어진 어시스턴트 쿼리와 관련하여 설명한 위의 예에서 생성된 대응하는 LLM 출력 중 하나 이상을 획득할 수 있다. 예를 들어, 시스템은 현재 쿼리와 설명된 주어진 어시스턴트 쿼리 모두가 "저녁"이라는 시간적 컨텍스트 신호 및 "기본 거주지"라는 위치 컨텍스트 신호와 연관되어 있다고 결정할 수 있다. 또한, 예를 들어, 시스템은 현재 어시스턴트 쿼리와 연관된 하나 이상의 컨텍스트 신호의 임베딩을 생성하고 현재 쿼리와 연관된 하나 이상의 컨텍스트 신호의 임베딩을 블록(356)과 관련하여 위에서 설명한 임베딩 공간에 매핑할 수 있다. 또한, 시스템은 임베딩 공간에서, 현재 쿼리와 연관된 하나 이상의 컨텍스트 신호의 생성된 임베딩과 거리 임계값을 만족하는 주어진 어시스턴트 쿼리와 연관된 하나 이상의 컨텍스트 신호에 대해 이전에 생성된 임베딩 사이의 거리에 기초하여, 현재 어시스턴트 쿼리와 연관된 하나 이상의 컨텍스트 신호가 주어진 어시스턴트 쿼리와 연관된 하나 이상의 컨텍스트 신호에 대응한다고 결정할 수 있다. In an additional or alternative implementation of the method 300 of FIG. 3, the system may utilize the online output modification engine 180 to determine that when a current assistant query is received, the one or more context signals detected are one of a plurality of assistant queries. Determine that it corresponds to one or more corresponding context signals that were received (e.g., received on the same day of the week, same date, same location, same ambient noise present in the environment of the client device, received in a specific sequence of vocal utterances during a conversation session) etc.). In response to determining that the one or more context signals associated with the current assistant query correspond to one or more context signals of one of the plurality of assistant queries, the system determines (e.g., from LLM output(s) database 150A) block ( In an iteration of 356), one or more of the corresponding LLM outputs indexed and associated with one of the plurality of assistant queries may be obtained. For example, if the current query was received in the evening at the user's primary residence, the system may obtain one or more of the corresponding LLM outputs generated in the example above described in relation to the given assistant query. For example, the system may determine that both the current query and the given assistant query described are associated with a temporal context signal of “evening” and a location context signal of “primary residence.” Additionally, for example, the system may generate an embedding of one or more context signals associated with the current assistant query and map the embeddings of one or more context signals associated with the current query into the embedding space described above with respect to block 356. Additionally, based on the distance in the embedding space between a generated embedding of one or more context signals associated with the current query and a previously generated embedding for one or more context signals associated with a given assistant query that satisfies a distance threshold, It may be determined that one or more context signals associated with the current assistant query correspond to one or more context signals associated with a given assistant query.
특히, 시스템은 현재 어시스턴트 쿼리에 응답하여 사용자에게 제시하기 위해 제공될 하나 이상의 현재 어시스턴트 출력을 생성할 때 하나 이상의 대응하는 LLM 출력이 활용되도록 결정할 때 현재 어시스턴트 쿼리가 수신된 대화 세션의 컨텍스트(예: 검출된 하나 이상의 컨텍스트 신호)와 현재 어시스턴트 쿼리 중 하나 또는 둘 모두를 활용할 수 있다. 다양한 구현예에서, 시스템은 현재 어시스턴트 쿼리에 응답하여 사용자에게 제시하기 위해 제공될 하나 이상의 현재 어시스턴트 출력을 생성할 때 하나 이상의 대응하는 LLM 출력이 활용되도록 결정할 때 현재 어시스턴트 쿼리에 대해 생성된 하나 이상의 어시스턴트 출력을 추가적으로 또는 대안적으로 활용할 수 있다. 예를 들면, 시스템은 추가적으로 또는 대안적으로 현재 어시스턴트 쿼리(그러나 LLM 엔진(150A1 및/또는 150A2)을 사용하여 생성되지 않음)에 응답할 것으로 예측되는 하나 이상의 어시스턴트 출력(예를 들어, 도 2와 관련하여 설명된 바와 같은 하나 이상의 어시스턴트 출력(205))을 생성할 수 있고, 현재 어시스턴트 쿼리에 대한 응답일 것으로 예측된 하나 이상의 어시스턴트 출력이 상기 기술된 다양한 기법을 사용하여 복수의 어시스턴트 쿼리들 중 하나에 대해 하나 이상의 이전에 생성된 어시스턴트 출력에 대응한다고 결정할 수 있다. In particular, when generating one or more current assistant outputs to be presented to the user in response to the current assistant query, the system will consider the context of the conversation session in which the current assistant query was received when determining which one or more corresponding LLM outputs will be utilized, e.g. It can leverage one or both of the following: one or more context signals detected) and the current assistant query. In various implementations, the system determines that one or more corresponding LLM outputs will be utilized when generating one or more current assistant outputs to be provided for presentation to the user in response to the current assistant query. The output can be utilized additionally or alternatively. For example, the system may additionally or alternatively generate one or more assistant outputs (e.g., FIGS. 2 and 2 One or more assistant outputs 205 as described in relation to one another, wherein one or more assistant outputs predicted to be a response to a current assistant query are one of a plurality of assistant queries using various techniques described above. It may be determined that corresponds to one or more previously generated assistant outputs.
블록(366)에서, 시스템은 자동화된 어시스턴트가 클라이언트 디바이스의 사용자에게 제시하기 위해 제공될 하나 이상의 현재 어시스턴트 출력을 생성할 때 대응하는 LLM 출력 중 하나 이상을 활용하게 한다. 예를 들어, 시스템은 하나 이상의 순위 기준에 따라, 하나 이상의 어시스턴트 출력(예를 들어, 도 2와 관련하여 설명된 바와 같이 하나 이상의 어시스턴트 출력(205)) 및 하나 이상의 대응하는 LLM 출력(예를 들어, 도 2와 관련하여 설명된 바와 같은 하나 이상의 수정된 어시스턴트 출력(206))에 순위를 매길 수 있다. 또한, 시스템은 하나 이상의 어시스턴트 출력과 하나 이상의 대응하는 LLM 출력 중에서 하나 이상의 현재 어시스턴트 출력을 선택할 수 있다. 더욱이, 시스템은 클라이언트 디바이스의 사용자에게 제시하기 위해 하나 이상의 현재 어시스턴트 출력이 시각적 및/또는 청각적으로 렌더링되게 할 수 있다. At block 366, the system causes the automated assistant to utilize one or more of the corresponding LLM outputs in generating one or more current assistant outputs to be provided for presentation to the user of the client device. For example, the system may determine, according to one or more ranking criteria, one or more assistant outputs (e.g., one or more assistant outputs 205 as described with respect to FIG. 2) and one or more corresponding LLM outputs (e.g. , one or more modified assistant outputs 206) may be ranked, as described with respect to FIG. 2 . Additionally, the system may select one or more current assistant outputs from one or more assistant outputs and one or more corresponding LLM outputs. Moreover, the system may cause one or more current assistant outputs to be visually and/or audibly rendered for presentation to the user of the client device.
도 3의 방법(300)의 구현예가 오프라인 방식으로 하나 이상의 대응하는 LLM 출력을 생성하는 것(예: 하나 이상의 LLM을 사용하여 대응하는 LLM 출력을 생성하기 위해 오프라인 출력 수정 엔진(170)을 활용하고, LLM 출력(들) 데이터베이스(150A)에서 하나 이상의 대응하는 LLM 출력을 인덱싱함으로써) 및 온라인 방식으로 하나 이상의 대응하는 LLM 출력을 후속적으로 활용하는 것(예: 현재 어시스턴트 쿼리에 기초하여 LLM 출력(들) 데이터베이스(150A)로부터 활용하기 위해 결정하기 위해 온라인 출력 수정 엔진(180)을 활용함으로써)을 설명하였지만, 이는 예시를 위한 것이며 제한하려고 하는 것이 아님을 이해해야 한다. 예를 들어, 도 4 및 도 5와 관련하여 아래에 설명된 바와 같이, 온라인 출력 수정 엔진(180)은 바람직한 구현예에서 온라인 방식으로 LLM 엔진(150A1 및/또는 150A2)을 추가적으로 또는 대안적으로 활용할 수 있다.An implementation of method 300 of FIG. 3 may include generating one or more corresponding LLM outputs in an offline manner (e.g., utilizing an offline output modification engine 170 to generate corresponding LLM outputs using one or more LLMs). , by indexing one or more corresponding LLM outputs in the LLM output(s) database 150A) and subsequently utilizing one or more corresponding LLM outputs in an online manner (e.g., LLM output(s) based on the current assistant query ( s) by utilizing the online output modification engine 180 to determine for use from the database 150A), it should be understood that this is for illustrative purposes only and is not intended to be limiting. For example, as described below with respect to FIGS. 4 and 5, online output modification engine 180 may additionally or alternatively utilize LLM engines 150A1 and/or 150A2 in an online manner in preferred embodiments. You can.
이제 도 4로 돌아가면, 어시스턴트 쿼리 생성에 기초하여 어시스턴트 출력(들)을 생성할 때 대형 언어 모델을 활용하는 예시적 방법(400)을 나타내는 흐름도가 도시되어 있다. 편의상, 방법(400)의 동작은 도 2의 프로세스 흐름(200)으로부터 동작을 수행하는 시스템을 참조하여 기술된다. 방법(400)의 이 시스템은 컴퓨팅 디바이스(들)(예를 들어, 도 1의 클라이언트 디바이스(110), 도 6의 클라이언트 디바이스(610) 및/또는 도 7의 클라이언트 디바이스(710), 하나 이상의 서버 및/또는 기타 컴퓨팅 디바이스)의 하나 이상의 프로세서, 메모리 및/또는 다른 컴포넌트(들)을 포함한다. 추가로, 방법(400)의 동작이 특정한 순서로 도시되었지만, 이는 그러한 제한을 의미하지 않는다. 하나 이상의 동작들은 재순서화, 생략 및/또는 추가될 수 있다.Turning now to Figure 4, a flow diagram is shown representing an example method 400 of utilizing a large language model in generating assistant output(s) based on assistant query generation. For convenience, the operation of method 400 is described with reference to a system performing the operations from process flow 200 of FIG. 2. This system of method 400 includes computing device(s) (e.g., client device 110 of FIG. 1, client device 610 of FIG. 6, and/or client device 710 of FIG. 7), one or more servers. and/or other computing devices). Additionally, although the operations of method 400 are shown in a particular order, this is not intended to be such a limitation. One or more operations may be reordered, omitted, and/or added.
블록(452)에서, 시스템은 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하며, 음성 발화는 자동화된 어시스턴트로 향하는 어시스턴트 쿼리를 포함하고, 음성 발화는 사용자와 자동화된 어시스턴트 간의 대화 세션 동안 수신된다. 일부 구현예에서, 시스템은 하나 이상의 조건이 만족된다는 결정에 응답하여 어시스턴트 쿼리를 캡처하는지 결정하기 위해 오디오 데이터 스트림만 프로세싱할 수 있다. 예를 들어, 시스템은 오디오 데이터의 스트림에 포함된 하나 이상의 특정 단어 또는 문구를 모니터링할 수 있다(예를 들어, 핫워드 검출 모델을 사용하여 자동화된 어시스턴트를 호출하는 하나 이상의 특정 단어 또는 문구를 모니터링함). 또한, 예를 들어, 시스템은 선택적으로 하나 이상의 다른 신호(예: 클라이언트 디바이스의 비전 센서에 의해 캡처된 하나 이상의 제스처, 클라이언트 디바이스로 향하는 시선 등)에 추가하여 클라이언트 디바이스로 향하는 스피치를 모니터링할 수 있다. At block 452, the system receives an audio data stream that captures the user's vocal utterance, where the vocal utterance includes an assistant query directed to the automated assistant, and where the vocal utterance is received during a conversational session between the user and the automated assistant. . In some implementations, the system may process only the audio data stream to determine whether to capture an assistant query in response to determining that one or more conditions are met. For example, the system may monitor one or more specific words or phrases included in a stream of audio data (e.g., use a hotword detection model to monitor one or more specific words or phrases that invoke an automated assistant). box). Additionally, for example, the system may optionally monitor speech directed to the client device in addition to one or more other signals (e.g., one or more gestures captured by vision sensors on the client device, gaze directed toward the client device, etc.) .
블록(454)에서, 시스템은 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 출력 세트를 결정하고, 세트에 포함된 어시스턴트 출력 각각은 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답이다. 예를 들어, 시스템은 ASR 엔진(130A1 및/또는 130A2)을 사용하여 오디오 데이터의 스트림(예를 들어, 오디오 데이터(201)의 스트림)을 프로세싱하여, ASR 출력의 스트림(예를 들어, ASR 출력(203))을 생성한다. 또한, 시스템은 NLU 출력의 스트림(예를 들어, NLU 출력(204)의 스트림)을 생성하기 위해 NLU 엔진(140A1 및/또는 140A2)을 사용하여 ASR 출력의 스트림(예: 오디오 데이터(201)의 스트림)을 프로세싱할 수 있다. 더욱이, 시스템은 하나 이상의 1P 시스템(191) 및/또는 3P 시스템(192)이 NLU 출력의 스트림(예를 들어, NLU 출력(204)의 스트림)을 프로세싱하게 하여 어시스턴트 출력 세트(205)(예를 들어, 어시스턴트 출력 세트)를 생성할 수 있다. 특히, 어시스턴트 출력 세트는 음성 발화에 응답할 때 여기에 설명된 기법을 활용하지 않는 것(즉, 본 명세서에 기술된 어시스턴트 출력을 수정하는 것에서 LLM 엔진(150A1) 및/또는 LLM 엔진(150A1)을 활용하지 않는 기법)을 고려할 수 있는 하나 이상의 후보 어시스턴트 출력에 대응할 수 있다. At block 454, the system determines, based on audio data stream processing, a set of assistant outputs, each of the assistant outputs included in the set being a response to an assistant query included in the voice utterance. For example, the system may use the ASR engine 130A1 and/or 130A2 to process a stream of audio data (e.g., a stream of audio data 201) to produce a stream of ASR output (e.g., ASR output (203)). Additionally, the system may use the NLU engines 140A1 and/or 140A2 to generate a stream of NLU output (e.g., a stream of NLU output 204) to generate a stream of ASR output (e.g., a stream of audio data 201). stream) can be processed. Moreover, the system may cause one or more 1P systems 191 and/or 3P systems 192 to process a stream of NLU outputs (e.g., a stream of NLU outputs 204) to create an assistant output set 205 (e.g. For example, you can create an assistant output set). In particular, the assistant output set may include LLM engine 150A1 and/or LLM engine 150A1 that does not utilize the techniques described herein (i.e., modifies the assistant output described herein) when responding to spoken utterances. (deprecated techniques) can correspond to one or more candidate assistant outputs that can be considered.
블록(456)에서, 시스템은 어시스턴트 출력 세트와 대화 세션의 컨텍스트를 프로세싱하여 (1) LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하고, 상기 하나 이상의 LLM 출력 각각은 대화 세션의 컨텍스트와 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 적어도 기초하여 결정되며, 그리고 (2) 대화 세션의 컨텍스트의 적어도 일부 및 음성 발화에 포함된 어시스턴트 쿼리의 적어도 일부에 기초하여 음성 발화와 관련된 추가 어시스턴트 쿼리를 생성한다. 다양한 구현예에서, 각각의 LLM 출력은 오디오 데이터 스트림에서 캡처된 음성 발화에 포함된 어시스턴트 쿼리에 기초하여 추가로 결정될 수 있다. 일부 구현예에서, 수정된 어시스턴트 출력 세트를 생성할 때, 하나 이상의 LLM 출력은 오프라인 방식으로 이전에 생성되었을 수 있다(예를 들어, 도 3과 관련하여 상기 기술된 바와 같이 음성 발화를 수신하고 오프라인 출력 수정 엔진(170)을 사용하기 전에). 이러한 구현예에서, 시스템은 오디오 데이터 스트림에서 캡처된 음성 발화에 포함된 어시스턴트 쿼리가 하나 이상의 LLM 출력이 이전에 생성되었던 이전 어시스턴트 쿼리에 대응하는지, 대화 세션의 컨텍스트가 이전 어시스턴트 쿼리가 수신되었던 이전 대화 세션의 이전 컨텍스트에 대응하는지, 및/또는 블록(454)에서 결정된 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력이 이전 쿼리에 기초하여 결정된 하나 이상의 이전 어시스턴트 출력에 대응하는지 결정할 수 있다. 또한, 시스템은 도 3의 방법(300)과 관련하여 설명된 바와 같이, 이전 어시스턴트 쿼리, 이전 컨텍스트, 및/또는 어시스턴트 쿼리, 컨텍스트 및/또는 어시스턴트 출력 세트에 각각 포함된 하나 이상의 어시스턴트 출력에 대응하는 하나 이상의 이전 어시스턴트 출력에 기초하여 인덱싱된 하나 이상의 LLM 출력(예를 들어, 온라인 출력 수정 엔진(180)을 사용하여)을 얻을 수 있고, 하나 이상의 LLM 출력을 수정된 어시스턴트 출력 세트로 활용할 수 있다. At block 456, the system processes the set of assistant outputs and the context of the conversational session to (1) generate a set of modified assistant outputs using the LLM outputs, wherein each of the one or more LLM outputs includes the context of the conversational session and the assistant outputs; is determined based at least on one or more assistant outputs included in the set, and (2) generates additional assistant queries associated with the spoken utterance based on at least a portion of the context of the conversation session and at least a portion of the assistant queries included in the spoken utterance. . In various implementations, each LLM output may be further determined based on assistant queries included in the voice utterance captured in the audio data stream. In some implementations, when generating a set of modified assistant outputs, one or more LLM outputs may have previously been generated in an offline manner (e.g., by receiving a spoken utterance as described above with respect to Figure 3 and generating the set of LLM outputs offline). before using the power correction engine 170). In such implementations, the system determines whether an assistant query included in a spoken utterance captured in an audio data stream corresponds to a previous assistant query for which one or more LLM outputs were previously produced, and whether the context of the conversation session is a previous conversation in which the previous assistant query was received. It may be determined that one or more assistant outputs included in the set of assistant outputs determined at block 454 correspond to a previous context in the session, and/or one or more assistant outputs included in the set of assistant outputs determined at block 454 correspond to one or more previous assistant outputs determined based on the previous query. Additionally, the system may provide one or more assistant outputs corresponding to a previous assistant query, a previous context, and/or one or more assistant outputs each included in a set of assistant queries, contexts, and/or assistant outputs, as described with respect to method 300 of FIG. One or more LLM outputs may be obtained (e.g., using an online output modification engine 180) indexed based on one or more previous assistant outputs, and the one or more LLM outputs may be utilized as a set of modified assistant outputs.
추가적 또는 대안적 구현예에서, 수정된 어시스턴트 출력 세트를 생성할 때, 시스템은 적어도 대화 세션의 컨텍스트 및/또는 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 온라인 방식으로 프로세싱하여(예: 음성 발화를 수신하고 온라인 출력 수정 엔진(180)을 사용하는 것에 응답하여) 하나 이상의 LLM 출력을 생성한다. 예를 들어, 시스템은 LLM 엔진(150A1 및/또는 150A2)이 하나 이상의 LLM을 사용하여 대화 세션의 컨텍스트, 어시스턴트 쿼리 및/또는 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 프로세싱하게 하여 수정된 어시스턴트 출력 세트를 생성한다. 하나 이상의 LLM 출력은 하나 이상의 LLM 출력을 오프라인 방식으로 생성하는 것과 관련하여 도 3의 방법(300)의 블록(354)과 관련하여 위에 설명된 것과 동일하거나 유사한 방식으로 온라인 방식으로 생성될 수 있지만, 클라이언트 디바이스에서 음성 발화가 수신되는 것에 응답하여 생성될 수 있다. 예를 들어, 시스템은 도 3의 방법(300)의 블록(354)과 관련하여 전술한 바와 같이, 하나 이상의 LLM을 사용하여, 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 프로세싱하여 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력 각각에 대한 하나 이상의 성격 응답을 생성할 수 있다. 다르게 말하면, 어시스턴트 출력 세트에 포함된 각각의 어시스턴트 출력은 제한된 어휘 및 각 어시스턴트 출력과 연관된 운율 속성 측면에서 일관된 성격을 가질 수 있다. 그러나, 수정된 어시스턴트 출력 세트를 생성하기 위해 어시스턴트 출력 세트에 포함된 어시스턴트 출력 각각을 프로세싱할 때, 수정된 어시스턴트 출력 각각은 하나 이상의 수정된 어시스턴트 출력을 생성할 때 하나 이상의 LLM을 사용하는 함수로서 훨씬 더 큰 어휘를 가질 수 있고, 그리고 수정된 어시스턴트 출력 각각과 연관된 운율 특성의 측면에서 훨씬 더 큰 변화를 갖는다. 결과적으로, 수정된 어시스턴트 출력 각각은 자동화된 어시스턴트와의 대화 세션에 참여하는 사용자와 더 잘 공감하는 컨텍스트적으로 관련된 어시스턴트 출력에 대응할 수 있다.In additional or alternative implementations, when generating a modified assistant output set, the system processes online at least the context of the conversation session and/or one or more assistant outputs included in the assistant output set (e.g., a speech utterance). and generate one or more LLM outputs (in response to receiving and using the online output modification engine 180). For example, the system may cause an LLM engine (150A1 and/or 150A2) to use one or more LLMs to process one or more assistant outputs included in the context of a conversation session, an assistant query, and/or a set of assistant outputs to produce modified assistant output. Create a set. The one or more LLM outputs may be generated in an online manner in the same or similar manner as described above with respect to block 354 of method 300 of FIG. 3 with respect to generating one or more LLM outputs in an offline manner; It may be generated in response to receiving a vocal utterance at the client device. For example, the system may use one or more LLMs to process one or more assistant outputs included in an assistant output set into an assistant output set, as described above with respect to block 354 of method 300 of Figure 3. You can generate one or more personality responses for each of one or more included assistant outputs. In other words, each assistant output included in the assistant output set may have a consistent character in terms of limited vocabulary and prosodic properties associated with each assistant output. However, when processing each of the assistant outputs included in the assistant output set to produce a set of modified assistant outputs, each modified assistant output is much more complex as a function of using one or more LLMs in producing one or more modified assistant outputs. It can have a larger vocabulary, and much greater variation in terms of prosodic features associated with each modified assistant output. As a result, each of the modified assistant outputs may correspond to contextually relevant assistant output that better resonates with users engaging in a conversational session with the automated assistant.
유사하게, 일부 구현예에서, 추가 어시스턴트 쿼리를 생성할 때, 추가 어시스턴트는 오프라인 방식으로 이전에 생성되었을 수 있다(예를 들어, 도 3과 관련하여 상기 기술된 바와 같이 음성 발화를 수신하고 오프라인 출력 수정 엔진(170)을 사용하기 전에). 이러한 구현예에서, 오프라인 방식으로 이전에 생성되었던 하나 이상의 LLM 출력을 얻는 것과 관련하여 위에 설명된 것과 유사하게, 시스템은 도 3의 방법(300)과 관련하여 설명된 바와 같이, 이전 어시스턴트 쿼리, 이전 컨텍스트, 및/또는 어시스턴트 쿼리, 컨텍스트 및/또는 어시스턴트 출력 세트에 각각 포함된 하나 이상의 어시스턴트 출력에 대응하는 하나 이상의 이전 어시스턴트 출력에 기초하여 인덱싱된 추가 어시스턴트 쿼리를 얻을 수 있고, 이전에 생성된 추가 어시스턴트 쿼리를 추가 어시스턴트 쿼리로 활용할 수 있다. Similarly, in some implementations, when creating an additional assistant query, the additional assistant may have previously been created in an offline manner (e.g., receive voice utterances as described above with respect to Figure 3 and output offline before using the correction engine 170). In this implementation, similar to that described above with respect to obtaining one or more previously generated LLM outputs in an offline manner, the system may perform a previous assistant query, as described with respect to method 300 of FIG. 3 . Additional assistant queries may be obtained indexed based on context, and/or assistant queries, one or more previous assistant outputs corresponding to one or more assistant outputs each included in the context and/or assistant output sets, and additional assistant queries previously created. The query can be used as an additional assistant query.
또한, 유사하게, 추가적 또는 대안적 구현예에서, 추가 어시스턴트 쿼리를 생성할 때, 시스템은 적어도 대화 세션의 컨텍스트 및/또는 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 온라인 방식으로 프로세싱하여(예: 음성 발화를 수신하고 온라인 출력 수정 엔진(180)을 사용하는 것에 응답하여) 추가 어시스턴트 쿼리를 생성한다. 예를 들어, 시스템은 LLM 엔진(150A1 및/또는 150A2)이 하나 이상의 LLM을 사용하여 대화 세션의 컨텍스트, 어시스턴트 쿼리 및/또는 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 프로세싱하게 하여 추가 어시스턴트 쿼리를 생성한다. 추가 어시스턴트 쿼리는 추가 어시스턴트 쿼리를 오프라인 방식으로 생성하는 것과 관련하여 도 3의 방법(300)의 블록(354)과 관련하여 위에 설명된 것과 동일하거나 유사한 방식으로 온라인 방식으로 생성될 수 있지만, 클라이언트 디바이스에서 음성 발화가 수신되는 것에 응답하여 생성될 수 있다. 일부 구현예에서, 본 명세서에 설명된 하나 이상의 LLM은 특정 기능을 수행하는데 전용인 복수의 서로 다른 레이어들을 가질 수 있다. 예를 들어, 하나 이상의 LLM 중 하나 이상의 제1 레이어는 여기에 설명된 성격 응답을 생성하는데 활용될 수 있고, 하나 이상의 LLM 중 하나 이상의 제2 레이어는 여기에 설명된 추가 어시스턴트 쿼리를 생성하는데 활용될 수 있다. 추가적 또는 대안적 구현예에서, 하나 이상의 LLM은 여기에 설명된 추가 어시스턴트 쿼리를 생성할 때 하나 이상의 LLM에 포함되지 않은 하나 이상의 추가 레이어와 통신할 수 있다. 예를 들어, 하나 이상의 LLM 중 하나 이상의 레이어는 여기에 설명된 성격 응답을 생성하는데 활용될 수 있고, 하나 이상의 LLM과 통신하는 다른 ML 모델의 하나 이상의 추가 레이어는 여기서 설명된 추가 어시스턴트 쿼리를 생성하는데 활용될 수 있다. 성격 응답과 추가 어시스턴트 쿼리의 비제한적인 예는 아래의 도 6과 관련하여 더 자세히 설명된다.Similarly, in additional or alternative implementations, when generating an additional assistant query, the system processes in an online manner at least one or more assistant outputs included in the context of the conversation session and/or the assistant output set, e.g. receives the voice utterance and generates additional assistant queries (in response to using the online output modification engine 180). For example, the system may cause an LLM engine (150A1 and/or 150A2) to use one or more LLMs to process one or more assistant outputs included in the context of a conversation session, an assistant query, and/or an assistant output set to generate additional assistant queries. Create. Additional assistant queries may be generated online in the same or similar manner as described above with respect to block 354 of method 300 of Figure 3 with respect to generating additional assistant queries in an offline manner, but on a client device. It may be generated in response to receiving a vocal utterance. In some implementations, one or more LLMs described herein may have multiple different layers dedicated to performing specific functions. For example, one or more first layers of the one or more LLMs may be utilized to generate personality responses described herein, and one or more second layers of the one or more LLMs may be utilized to generate additional assistant queries described herein. You can. In additional or alternative implementations, one or more LLMs may communicate with one or more additional layers not included in the one or more LLMs when generating additional assistant queries described herein. For example, one or more layers of one or more LLMs may be utilized to generate a personality response as described herein, and one or more additional layers of another ML model in communication with one or more LLMs may be utilized to generate additional assistant queries as described herein. It can be utilized. Non-limiting examples of personality responses and additional assistant queries are described in more detail with respect to Figure 6 below.
블록(458)에서, 시스템은 추가 어시스턴트 쿼리에 기초하여, 상기 추가 어시스턴트 쿼리에 대한 응답인 추가 어시스턴트 출력을 결정한다. 일부 구현예에서, 시스템은 추가 어시스턴트 쿼리가 도 2의 어시스턴트 쿼리 프로세싱과 관련하여 설명된 것과 동일하거나 유사한 방식으로 1P 시스템(191) 및/또는 3P 시스템(192) 중 하나 이상에 의해 프로세싱되게 하여 추가 어시스턴트 출력을 생성한다. 일부 구현예에서, 추가 어시스턴트 출력은 단일의 추가 어시스턴트 출력일 수 있는 반면, 다른 구현예에서, 추가 어시스턴트 출력은 추가 어시스턴트 출력 세트에 포함될 수 있다(예를 들어, 도 2의 추가 어시스턴트 출력(205) 세트와 유사). 추가적 또는 대안적 구현예에서, 추가 어시스턴트 쿼리는 예를 들어 음성 발화를 제공한 사용자의 사용자 프로필 데이터 및/또는 자동화된 어시스턴트에 액세스 가능한 임의의 다른 데이터에 기초하여 추가 어시스턴트 출력에 직접 매핑될 수 있다.At block 458, based on the additional assistant query, the system determines additional assistant output that is a response to the additional assistant query. In some implementations, the system causes additional assistant queries to be processed by one or more of the 1P system 191 and/or 3P system 192 in the same or similar manner as described with respect to assistant query processing in Figure 2. Generates assistant output. In some implementations, the additional assistant output may be a single additional assistant output, while in other implementations, the additional assistant output may be included in a set of additional assistant outputs (e.g., additional assistant output 205 in FIG. 2 similar to sets). In additional or alternative implementations, additional assistant queries may be mapped directly to additional assistant outputs, for example, based on user profile data of the user who provided the spoken utterance and/or any other data accessible to the automated assistant. .
블록(460)에서, 시스템은 추가 어시스턴트 쿼리에 대한 응답인 추가 어시스턴트 출력에 기초하여, 상기 수정된 추가 어시스턴트 출력 세트를 생성하기 위해 수정된 어시스턴트 출력 세트를 프로세싱한다. 일부 구현예에서, 시스템은 블록(456)에서 생성된 수정된 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력 각각에 수정된 어시스턴트 출력 중 하나 이상의 추가 어시스턴트 출력을 앞에 추가하거나 첨부할 수 있다. 추가적 또는 대안적 구현예에서, 그리고 블록(460A)에 표시된 바와 같이, 시스템은 추가 어시스턴트 출력 및 대화 세션의 컨텍스트를 프로세싱하여 블록(456)에서 활용된 하나 이상의 LLM 출력을 사용하여 수정된 추가 어시스턴트 출력 세트 및/또는 블록(456)에서 활용된 하나 이상의 LLM출력에 더하여, 대화 세션의 컨텍스트의 적어도 일부 및 추가 어시스턴트 출력의 적어도 일부에 기초하여 생성된 하나 이상의 추가 LLM 출력을 생성한다. 수정된 추가 어시스턴트 출력 세트는 수정된 어시스턴트 출력 세트를 생성하는 것과 관련하여 위에서 설명된 것과 동일하거나 유사한 방식으로 생성될 수 있지만, 어시스턴트 출력 세트가 아닌 추가 어시스턴트 출력에 기초한다(예를 들어, 오프라인 방식으로 생성된 하나 이상의 LLM 출력을 사용하여 및/또는 온라인 방식으로 LLM 엔진(150A1 및/또는 150A2)을 사용하여). At block 460, the system processes the modified set of assistant outputs to generate the modified set of additional assistant outputs based on the additional assistant output that is in response to the additional assistant query. In some implementations, the system may prepend or append one or more additional assistant outputs of the modified assistant outputs to each of the one or more assistant outputs included in the set of modified assistant outputs generated at block 456. In an additional or alternative implementation, and as indicated at block 460A, the system processes the additional assistant output and the context of the conversation session to produce modified additional assistant output using one or more LLM outputs utilized at block 456. In addition to the one or more LLM outputs utilized in set and/or block 456, generate one or more additional LLM outputs generated based on at least a portion of the additional assistant output and at least a portion of the context of the conversation session. A modified additional assistant output set may be created in the same or similar manner as described above for creating a modified assistant output set, but based on additional assistant outputs rather than an assistant output set (e.g., in an offline manner). using one or more LLM outputs generated by and/or in an online manner using the LLM engine (150A1 and/or 150A2).
블록(462)에서, 시스템은 상기 수정된 어시스턴트 출력 세트로부터 주어진 수정된 어시스턴트 출력 및/또는 수정된 추가 어시스턴트 출력 세트로부터 주어진 수정된 추가 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 한다. 일부 구현예에서, 시스템은 순위 엔진(190)이 하나 이상의 순위 기준에 따라 수정된 어시스턴트 출력 세트에 포함된 하나 이상의 수정된 어시스턴트 출력 각각(및 선택적으로 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력 각각)의 순위를 매기게 할 수 있고, 수정된 어시스턴트 출력 세트로부터 주어진 수정된 어시스턴트 출력(또는 어시스턴트 출력 세트로부터 주어진 어시스턴트 출력)을 선택한다. 또한, 시스템은 순위 엔진(190)이 하나 이상의 순위 기준에 따라, 수정된 추가 어시스턴트 출력 세트에 포함된 하나 이상의 수정된 추가 어시스턴트 출력 각각(및 선택적으로 추가 어시스턴트 출력)의 순위를 매기게 할 수 있고, 수정된 추가 어시스턴트 출력 세트로부터 주어진 추가 수정된 어시스턴트 출력(또는 주어진 추가 어시스턴트 출력으로 추가 어시스턴트 출력)을 선택한다. 이러한 구현예에서, 시스템은 주어진 수정된 어시스턴트 출력과 주어진 추가 어시스턴트 출력을 결합할 수 있고, 주어진 수정된 어시스턴트 출력 및 주어진 추가 어시스턴트 출력이 자동화된 어시스턴트와의 대화 세션에 참여하는 클라이언트 디바이스의 사용자에게 시각적 및/또는 청각적 제시를 위해 제공되게 한다.At block 462, the system causes the modified assistant output given from the modified assistant output set and/or the modified additional assistant output given from the modified additional assistant output set to be provided for presentation to the user. In some implementations, the system allows ranking engine 190 to rank each of one or more modified assistant outputs included in a set of modified assistant outputs (and optionally each of one or more assistant outputs included in a set of assistant outputs) according to one or more ranking criteria. and select a given modified assistant output from the modified assistant output set (or a given assistant output from the assistant output set). Additionally, the system may cause ranking engine 190 to rank each of one or more modified additional assistant outputs (and optionally additional assistant outputs) included in the set of modified additional assistant outputs according to one or more ranking criteria; , selects a given additional modified assistant output (or an additional assistant output with a given additional assistant output) from a set of modified additional assistant outputs. In such implementations, the system may combine a given modified assistant output and a given additional assistant output, and the given modified assistant output and the given additional assistant output may be provided to a user of a client device participating in a conversational session with the automated assistant. and/or be provided for auditory presentation.
이제 도 5로 돌아가면, 어시스턴트 성격 응답 생성에 기초하여 어시스턴트 출력(들)을 생성할 때 대형 언어 모델을 활용하는 예시적 방법(500)을 나타내는 흐름도가 도시되어 있다. 편의상, 방법(500)의 동작은 도 2의 프로세스 흐름(200)으로부터 동작을 수행하는 시스템을 참조하여 기술된다. 방법(500)의 이 시스템은 컴퓨팅 디바이스(들)(예를 들어, 도 1의 클라이언트 디바이스(110), 도 6의 클라이언트 디바이스(610) 및/또는 도 7의 클라이언트 디바이스(710), 하나 이상의 서버 및/또는 기타 컴퓨팅 디바이스)의 하나 이상의 프로세서, 메모리 및/또는 다른 컴포넌트(들)을 포함한다. 추가로, 방법(500)의 동작이 특정한 순서로 도시되었지만, 이는 그러한 제한을 의미하지 않는다. 하나 이상의 동작들은 재순서화, 생략 및/또는 추가될 수 있다.Turning now to Figure 5, a flow diagram is shown representing an example method 500 of utilizing a large language model in generating assistant output(s) based on assistant personality response generation. For convenience, the operation of method 500 is described with reference to a system performing the operations from process flow 200 of FIG. 2. This system of method 500 includes computing device(s) (e.g., client device 110 of FIG. 1, client device 610 of FIG. 6, and/or client device 710 of FIG. 7), one or more servers. and/or other computing devices). Additionally, although the operations of method 500 are shown in a particular order, this is not intended to be such a limitation. One or more operations may be reordered, omitted, and/or added.
블록(552)에서, 시스템은 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하며, 음성 발화는 자동화된 어시스턴트로 향하는 어시스턴트 쿼리를 포함하고, 음성 발화는 사용자와 자동화된 어시스턴트 간의 대화 세션 동안 수신된다. 블록(554)에서, 시스템은 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 출력 세트를 결정하고, 세트에 포함된 어시스턴트 출력 각각은 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답이다. 도 5의 방법(500)의 블록(552 및 554)의 동작은 도 4의 방법(400)의 블록(452 및 454)에 대해 설명된 것과 동일하거나 유사한 방식으로 수행될 수 있다.At block 552, the system receives an audio data stream that captures the user's vocal utterances, where the vocal utterances include assistant queries directed to the automated assistant, and where the vocal utterances are received during a conversational session between the user and the automated assistant. . At block 554, the system determines, based on audio data stream processing, a set of assistant outputs, each of the assistant outputs included in the set being a response to an assistant query included in the voice utterance. The operations of blocks 552 and 554 of method 500 of FIG. 5 may be performed in the same or similar manner as described for blocks 452 and 454 of method 400 of FIG. 4.
블록(556)에서, 시스템은 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 수정할지 여부를 결정한다. 시스템은 예를 들어 음성 발화를 제공하는 사용자의 의도(예: NLU 출력(204) 스트림에 포함됨), 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력(예: 어시스턴트 출력 세트(205), 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 수정하는 것과 연관된 하나 이상의 계산 비용(예: 배터리 소비, 프로세서 소비, 레이턴시 등), 자동화된 어시스턴트와의 인터렉션 기간 및/또는 기타 고려사항에 기초하여, 하나 이상의 어시스턴트 출력을 수정할지 여부를 결정할 수 있다. 예를 들어, 사용자의 의도가 음성 발화를 제공한 사용자가 빠른 및/또는 사실에 기반한 답변을 기대하고 있음을 나타내는 경우(예: why is the sky blue?", "what’s the weather?", "what time is it" 등), 일부 경우에, 시스템은 음성 발화에 응답하는 콘텐츠를 제공할 때 지연 시간과 계산 리소스 소비를 줄이기 위해 하나 이상의 어시스턴트 출력을 수정하지 않도록 결정할 수 있다. 또한, 예를 들어, 사용자의 클라이언트 디바이스가 절전 모드에 있는 경우, 시스템은 배터리 전력을 절약하기 위해 어시스턴트 출력 중 하나 이상을 수정하지 않기로 결정할 수 있다. 또한, 예를 들어, 사용자가 임계 기간(예: 30초, 1분 등)을 초과하는 기간의 세션으로 대화에 참여했다면 시스템은 보다 빠르고 효율적인 방식으로 대화 세션을 마무리하기 위해 하나 이상의 어시스턴트 출력을 수정하지 않기로 결정할 수 있다.At block 556, the system determines whether to modify one or more assistant outputs included in the assistant output set. The system may include, for example, the user's intent to provide a spoken utterance (e.g., contained in the NLU output 204 stream), one or more assistant outputs contained in the assistant output set (e.g., assistant output set 205), Modify one or more assistant outputs based on one or more computational costs (e.g., battery consumption, processor consumption, latency, etc.) associated with modifying one or more assistant outputs, the duration of interaction with the automated assistant, and/or other considerations. You can decide whether or not to make modifications, for example, if the user's intent indicates that the user providing the spoken utterance is expecting a quick and/or fact-based answer, such as "why is the sky blue?", " "what's the weather?", "what time is it", etc.), in some cases, the system may decide not to modify one or more assistant outputs to reduce latency and computational resource consumption when providing content in response to a spoken utterance. Additionally, for example, if the user's client device is in sleep mode, the system may decide not to modify one or more of the Assistant outputs to save battery power. Additionally, for example, if the user If you have engaged in a conversation with a session of duration longer than 30 seconds (e.g. 30 seconds, 1 minute, etc.), the system may decide not to modify one or more assistant outputs in order to conclude the conversation session in a faster and more efficient manner.
블록(556)의 반복에서, 시스템이 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 수정하지 않기로 결정하면, 시스템은 블록(558)으로 진행할 수 있다. 블록(558)에서, 시스템은 어시스턴트 출력 세트로부터 주어진 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 한다. 예를 들어, 시스템은 순위 엔진(190)이 하나 이상의 순위 기준에 따라 어시스턴트 출력 세트에 포함된 각각의 어시스턴트 출력의 순위를 매기게 하고, 순위에 기초하여 사용자에게 시각적 및/또는 청각적으로 제기하기 위해 제공될 주어진 어시스턴트 출력을 선택할 수 있다.If, in the iteration of block 556, the system determines not to modify one or more assistant outputs included in the assistant output set, the system may proceed to block 558. At block 558, the system causes the given assistant output from the assistant output set to be provided for presentation to the user. For example, the system may cause ranking engine 190 to rank each assistant output included in a set of assistant outputs according to one or more ranking criteria, and visually and/or audibly present to the user based on the ranking. You can select a given assistant output to be provided for.
블록(556)의 반복에서, 시스템이 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 수정하기로 결정하면, 시스템은 블록(560)으로 진행할 수 있다. 블록(560)에서, 시스템은 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하고, 하나 이상의 LLM 출력 각각은 대화 세션의 컨텍스트 및/또는 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 기초하여 결정되며, 하나 이상의 LLM 출력 각각은 자동화된 어시스턴트에 대해, 복수의 서로 다른 성격들 중 대응하는 성격을 반영한다. 도 3의 방법(300)의 블록(354)과 관련하여 설명된 바와 같이, 하나 이상의 LLM 출력은 자동화된 어시스턴트의 다양한 성격을 반영하기 위해 다양한 서로 다른 파라미터를 사용하여 생성될 수 있다. 다양한 구현예에서, 각각의 LLM 출력은 오디오 데이터 스트림에서 캡처된 음성 발화에 포함된 어시스턴트 쿼리에 기초하여 추가로 결정될 수 있다. 일부 구현예에서, 시스템은 상기 기술된 바와 같이 오프라인 방식으로 이전에 생성되었던 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트(및 선택적으로 어시스턴트 쿼리)를 프로세싱할 수 있고, 추가적 또는 대안적 구현예에서, 시스템은 상기 기술된 바와 같이 온라인 방식으로 수정된 어시스턴트 출력 세트를 생성하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트(및 선택적으로 어시스턴트 쿼리)를 프로세싱할 수 있다. 도 4의 방법(400)과 관련하여 상기 언급된 바와 같이, 성격 응답과 추가 어시스턴트 쿼리의 비제한적인 예는 아래의 도 6과 관련하여 더 자세히 설명된다.If, in an iteration of block 556, the system determines to modify one or more assistant outputs included in the assistant output set, the system may proceed to block 560. At block 560, the system processes a set of assistant outputs and the context of the conversation session to generate a set of modified assistant outputs using the one or more LLM outputs, each of the one or more LLM outputs being a context of the conversation session and/or the assistant The determination is made based on one or more assistant outputs included in the output set, wherein each of the one or more LLM outputs reflects a corresponding one of a plurality of different personalities for the automated assistant. As described with respect to block 354 of method 300 of FIG. 3, one or more LLM outputs may be generated using a variety of different parameters to reflect the various characteristics of the automated assistant. In various implementations, each LLM output may be further determined based on assistant queries included in the voice utterance captured in the audio data stream. In some implementations, the system uses one or more LLM outputs that were previously generated in an offline manner as described above to generate a modified assistant output set and the context of the conversation session (and optionally an assistant query). and, in additional or alternative implementations, the system processes the assistant output set and the context of the conversation session (and optionally the assistant query) to generate a modified assistant output set in an online manner as described above. can do. As noted above with respect to method 400 of FIG. 4, non-limiting examples of personality responses and additional assistant queries are described in more detail with respect to FIG. 6 below.
블록(562)에서, 시스템은 어시스턴트 출력 세트로부터 주어진 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 한다. 일부 구현예에서, 시스템은 순위 엔진(190)이 하나 이상의 순위 기준에 따라 수정된 어시스턴트 출력 세트에 포함된 하나 이상의 수정된 어시스턴트 출력 각각(및 선택적으로 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력 각각)의 순위를 매기게 할 수 있고, 수정된 어시스턴트 출력 세트로부터 주어진 수정된 어시스턴트 출력(또는 어시스턴트 출력 세트로부터 주어진 어시스턴트 출력)을 선택한다. 또한, 시스템은 주어진 수정된 어시스턴트 출력이 사용자에게 시각적 및/또는 청각적 제시하기 위해 제공되게 할 수 있다.At block 562, the system causes the given assistant output from the assistant output set to be provided for presentation to the user. In some implementations, the system allows ranking engine 190 to rank each of one or more modified assistant outputs included in a set of modified assistant outputs (and, optionally, each of one or more assistant outputs included in a set of assistant outputs) according to one or more ranking criteria. and select a given modified assistant output from the modified assistant output set (or a given assistant output from the assistant output set). Additionally, the system may cause given modified assistant output to be provided for visual and/or auditory presentation to the user.
비록 도 5는 추가 어시스턴트 쿼리를 생성하는 것과 관련하여 설명되지 않았지만, 이는 예를 위한 것이며 제한하려는 의도가 아님을 이해해야 한다. 오히려, 도 4의 방법(400)에서 추가 어시스턴트 쿼리를 생성하는 것은 도 4는 대화 세션을 촉진하고 사용자의 보다 자연스러운 대화 경험을 제공하는 것과 관련하여 제공될 수 있는 컨텍스트적으로 관련된 추가 어시스턴트 출력이 있다는 결정에 기초한다는 것이 이해되어야 하며, 사용자에게 제시하기 위해 제공되는 임의의 어시스턴트 출력이 사람간 대화 세션을 더 잘 반영하고, 사용자와 자동화된 어시스턴트 간의 대화 세션이 사용자와 더 잘 공감하도록 한다. 또한, 도 3 및 4가 어시스턴트 출력 세트를 수정할지 여부를 결정하는 것과 관련하여 설명되었지만, 이는 예를 위한 것이며 제한하려는 의도가 아님을 이해해야 한다. 오히려, 하나 이상의 LLM을 사용하여 어시스턴트 응답 세트의 수정을 트리거할지 여부를 결정하는 것은 도 3, 4 및 도 5의 예시적인 방법 중 임의의 방법으로 수행될 수 있다는 것이 이해되어야 한다. Although Figure 5 is not illustrated in relation to creating additional assistant queries, it should be understood that this is by way of example and not intended to be limiting. Rather, generating additional assistant queries in method 400 of Figure 4 means that there are additional, contextually relevant assistant outputs that can be provided in connection with facilitating the conversation session and providing a more natural conversational experience for the user. It should be understood that the decision-making basis is such that any assistant output provided for presentation to the user better reflects a human-to-human conversational session, and a conversational session between the user and the automated assistant better resonates with the user. Additionally, although Figures 3 and 4 are described in relation to determining whether to modify an assistant output set, it should be understood that this is by way of example and not intended to be limiting. Rather, it should be understood that determining whether to trigger modification of an assistant response set using one or more LLMs may be performed in any of the example methods of FIGS. 3, 4, and 5.
이제 도 6으로 돌아가면, 자동화된 어시스턴트가 어시스턴트 출력을 생성할 때 하나 이상의 LLM을 활용하는 사용자와 자동화된 어시스턴트 사이의 대화 세션의 비제한적인 예가 도시되어 있다. 본 명세서에 설명된 바와 같이, 일부 구현예에서, 자동화된 어시스턴트는 수정된 어시스턴트 출력 세트를 생성하기 위해 이전에 오프라인 방식으로 생성되었던 하나 이상의 LLM 출력을 활용할 수 있다(예를 들어, 도 3의 방법(300)과 관련하여 위에서 설명된 바와 같이). 예를 들어, 자동화된 어시스턴트는 하나 이상의 LLM 출력이 이전에 생성되었던 이전 어시스턴트 쿼리가 음성 발화에 포함된 어시스턴트 쿼리에 대응하는지, 이전 대화 세션의 이전 컨텍스트가 사용자와 음성 발화가 수신된 자동화된 어시스턴트 사이의 대화 세션의 컨텍스트에 대응하는지, 및/또는 하나 이상의 이전 어시스턴트 출력이 음성 발화에 포함된 어시스턴트 쿼리에 대한 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 대응하는지 결정할 수 있다. 또한, 자동화된 어시스턴트는 이전 어시스턴트 쿼리, 이전 컨텍스트, 및/또는 이전 어시스턴트 출력 세트에 포함된 이전 어시스턴트 출력 중 하나 이상에 따라 인덱싱된(예를 들어, LLM 출력(들) 데이터베이스(150A)에서) 하나 이상의 LLM 출력을 얻을 수 있고, 하나 이상의 LLM 출력을 수정된 어시스턴트 출력 세트로 활용한다. 추가적 또는 대안적 구현예에서, 자동화된 어시스턴트는 하나 이상의 LLM을 사용하여 어시스턴트 쿼리, 대화 세션의 컨텍스트 및/또는 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력이 프로세싱되게 하여, 온라인 방식으로(예를 들어, 도 4의 방법(400) 및 도 5의 방법(500)과 관련하여 전술한 바와 같이) 수정된 어시스턴트 출력 세트로서 활용될 하나 이상의 LLM 출력을 생성한다. 따라서, 도 6의 비제한적인 예는 본 명세서에 설명된 기법에 따른 LLM의 활용이 어떻게 사용자와 자동화된 어시스턴트 사이의 자연스러운 대화를 향상시키는지를 설명하기 위해 제공된다. Turning now to Figure 6, a non-limiting example of a conversational session between a user and an automated assistant is shown where the automated assistant utilizes one or more LLMs when generating assistant output. As described herein, in some implementations, an automated assistant may utilize one or more LLM outputs that were previously generated offline to generate a set of modified assistant outputs (e.g., the method of FIG. 3 (as explained above in relation to (300)). For example, an automated assistant can determine whether one or more LLM outputs previously generated correspond to assistant queries included in the spoken utterance, and whether previous context from previous conversation sessions exists between the user and the automated assistant from which the spoken utterance was received. corresponds to the context of a conversation session, and/or whether one or more previous assistant outputs correspond to one or more assistant outputs included in a set of assistant outputs for an assistant query included in the spoken utterance. Additionally, the automated assistant may be one that is indexed (e.g., in the LLM output(s) database 150A) according to one or more of the previous assistant queries, previous contexts, and/or previous assistant outputs included in the previous assistant output set. You can obtain more than one LLM output, and utilize one or more LLM outputs as a set of modified assistant outputs. In additional or alternative implementations, the automated assistant uses one or more LLMs to cause one or more assistant outputs included in an assistant query, the context of a conversation session, and/or an assistant output set to be processed in an online manner (e.g. , as described above with respect to method 400 of FIG. 4 and method 500 of FIG. 5), to generate one or more LLM outputs to be utilized as a set of modified assistant outputs. Accordingly, the non-limiting example of Figure 6 is provided to illustrate how utilization of LLM according to the techniques described herein enhances natural conversations between a user and an automated assistant.
클라이언트 디바이스(610)(예: 도 1의 클라이언트 디바이스(110)의 인스턴스)는 예를 들어 음성 발화 및/또는 다른 가청 입력에 기초하여 오디오 데이터를 생성하는 마이크(들), 합성된 스피치 및/또는 다른 가청 출력을 청각적으로 렌더링하는 스피커(들), 및/또는 시각적 출력을 시각적으로 렌더링하기 위한 디스플레이(680)를 포함하는 다양한 사용자 인터페이스 컴포넌트를 포함할 수 있다. 또한, 클라이언트 디바이스(610)의 디스플레이(680)는 클라이언트 디바이스(610)가 하나 이상의 액션들을 수행하게 하기 위해 클라이언트 디바이스(610)의 사용자와 인터렉션할 수 있는 다양한 시스템 인터페이스 엘리먼트들(681, 682, 683)(예: 하드웨어 및/또는 소프트웨어 인터페이스 엘리먼트)을 포함할 수 있다. 클라이언트 디바이스(610)의 디스플레이(680)는 사용자가 터치 입력에 의해(예를 들어, 사용자 입력을 디스플레이(680) 또는 그 일부를 향하게 함으로써(예: 텍스트 입력 상자로(미도시), 키보드로(미도시) 또는 디스플레이(680)의 다른 부분에)) 및/또는 음성 입력에 의해(예를 들어, 마이크로폰 인터페이스 엘리먼트(684)를 선택함으로써 또는 마이크로폰 인터페이스 엘리먼트(684)를 선택할 필요없이 클라이언트 디바이스(610)에서 단순히 말함으로써(즉, 자동화된 어시스턴트는 음성 입력을 활성화하기 위한 하나 이상의 용어 또는 문구, 제스처(들), 시선(들), 입 움직임(들), 입술 움직임(들) 및/또는 다른 조건을 모니터링할 수 있음)) 디스플레이(680)에 렌더링된 콘텐츠와 인터렉션하게 한다. 도 6에 도시된 클라이언트 디바이스(610)는 모바일폰인 것으로 도시되지만, 이는 예시를 위한 것이며 제한하려는 의도가 아님을 이해해야 한다. 예를 들어, 클라이언트 디바이스(610)는 디스플레이가 있는 독립형 스피커, 디스플레이가 없는 독립형 스피커, 홈 자동화 디바이스, 차량 내 시스템, 랩톱, 데스크톱 컴퓨터, 및/또는 클라이언트 디바이스(610)의 사용자와 사람 대 컴퓨터 대화 세션에 참여하는 자동화된 어시스턴트를 실행할 수 있는 임의의 다른 디바이스일 수 있다. Client device 610 (e.g., an instance of client device 110 in Figure 1) may include microphone(s), synthesized speech, and/or audio data that generates audio data, for example, based on vocal utterances and/or other audible input. It may include various user interface components, including speaker(s) to audibly render other audible output, and/or a display 680 to visually render visual output. Additionally, the display 680 of the client device 610 includes various system interface elements 681, 682, and 683 that can interact with a user of the client device 610 to cause the client device 610 to perform one or more actions. ) (e.g., hardware and/or software interface elements). Display 680 of client device 610 may be displayed when a user uses touch input (e.g., by directing user input toward display 680 or a portion thereof, e.g., into a text entry box (not shown), through a keyboard). client device 610 (not shown) or on another portion of display 680) and/or by voice input (e.g., by selecting microphone interface element 684 or without selecting microphone interface element 684). ) by simply speaking (i.e., the automated assistant can use one or more terms or phrases, gesture(s), gaze(s), mouth movement(s), lip movement(s), and/or other conditions to activate speech input. can be monitored)) to interact with content rendered on the display 680. Although the client device 610 shown in FIG. 6 is shown as being a mobile phone, it should be understood that this is for illustrative purposes only and is not intended to be limiting. For example, client device 610 may be a standalone speaker with a display, a standalone speaker without a display, a home automation device, an in-vehicle system, a laptop, a desktop computer, and/or a human-to-computer conversation with a user of client device 610. It may be any other device capable of running an automated assistant joining the session.
예를 들어, 클라이언트 디바이스(610)의 사용자가 "Hey Assistant, what time is it?"라는 음성 발화(652)를 제공한다고 가정한다. 이 예에서, 자동화된 어시스턴트는 ASR 엔진(130A1 및/또는 130A2)을 사용하여 음성 발화(652)을 캡처하는 오디오 데이터가 프로세싱되어 ASR 출력의 스트림을 생성하게 할 수 있다. 또한, 자동화된 어시스턴트는 NLU 엔진(140A1 및/또는 140A2)을 사용하여 ASR 출력의 스트림이 프로세싱되어 NLU 출력의 스트림을 생성하게 할 수 있다. 더욱이, 자동화된 어시스턴트는 NLU 출력의 스트림이 1P 시스템(191) 및/또는 3P 시스템(192) 중 하나 이상에 의해 프로세싱되어 하나 이상의 어시스턴트 출력 세트를 생성하게 할 수 있다. 어시스턴트 출력 세트는 예를 들어 "8:30 AM", "Good morning, it’s 8:30 AM" 및/또는 클라이언트 디바이스(610)의 사용자에게 현재 시간을 전달하는 임의의 다른 출력을 포함할 수 있다.For example, assume that the user of the client device 610 provides the voice utterance 652, “Hey Assistant, what time is it?” In this example, the automated assistant may use ASR engine 130A1 and/or 130A2 to cause audio data capturing speech utterance 652 to be processed to produce a stream of ASR output. Additionally, the automated assistant may use the NLU engine 140A1 and/or 140A2 to cause the stream of ASR output to be processed to produce a stream of NLU output. Moreover, the automated assistant may cause the stream of NLU output to be processed by one or more of the 1P system 191 and/or 3P system 192 to produce one or more sets of assistant outputs. The assistant output set may include, for example, “8:30 AM,” “Good morning, it’s 8:30 AM,” and/or any other output that conveys the current time to the user of client device 610.
도 6의 예에서, 자동화된 어시스턴트는 수정된 어시스턴트 출력 세트를 생성하기 위해 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 수정하기로 결정했다고 가정한다. 예를 들어, 자동화된 어시스턴트는 음성 발화(652)에 포함된 어시스턴트 쿼리가 자동화된 어시스턴트가 사용자에게 제시하기 위한 현재 시간을 제공하도록 요청한다고 결정할 수 있다. 자동화된 어시스턴트는 하나 이상의 LLM 출력이 이전에 생성되어 자동화된 어시스턴트가 사용자에게 제시하기 위한 현재 시간을 제공하도록 요청하는 이전 어시스턴트 쿼리의 인스턴스가 도 6의 음성 발화(652)에 포함된 어시스턴트 쿼리에 대응하고, 이전 대화 세션의 이전 컨텍스트는 도 6의 사용자와 자동화된 어시스턴트 사이의 대화 세션의 컨텍스트에 대응하고(예를 들어, 자동화된 어시스턴트가 아침에 현재 시간을 제공하도록 사용자가 요청함(및 선택적으로 대화 세션을 개시하여 요청함), 클라이언트 디바이스(610)가 특정 위치에 위치함 및/또는 다른 컨텍스트 신호), 및/또는 하나 이상의 이전 어시스턴트 출력이 도 6의 음성 발화(652)에 포함된 어시스턴트 쿼리에 대한 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 대응한다고 결정할 수 있다. 또한, 자동화된 어시스턴트는 이전 어시스턴트 쿼리, 이전 컨텍스트, 및/또는 이전 어시스턴트 출력 세트에 포함된 이전 어시스턴트 출력 중 하나 이상에 따라 인덱싱된(예를 들어, LLM 출력(들) 데이터베이스(150A)에서) 하나 이상의 LLM 출력을 얻을 수 있고, 하나 이상의 LLM 출력을 수정된 어시스턴트 출력 세트로 활용한다. 또한 예를 들어, 자동화된 어시스턴트는 하나 이상의 LLM을 사용하여 어시스턴트 쿼리, 대화 세션의 컨텍스트 및/또는 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력이 프로세싱되게 하여, 온라인 방식으로 수정된 어시스턴트 출력 세트로서 활용될 하나 이상의 LLM 출력을 생성한다.In the example of Figure 6, assume that the automated assistant has decided to modify one or more assistant outputs included in the assistant output set to produce a modified assistant output set. For example, the automated assistant may determine that the assistant query included in voice utterance 652 requests the automated assistant to provide the current time for presentation to the user. The automated assistant responds to an assistant query included in voice utterance 652 of FIG. 6 with an instance of a previous assistant query requesting that one or more LLM outputs have previously been generated to provide the current time for the automated assistant to present to the user. and the previous context of the previous conversation session corresponds to the context of the conversation session between the user and the automated assistant in Figure 6 (e.g., the user requests that the automated assistant provide the current time in the morning (and optionally an assistant query (requested by initiating a conversation session), client device 610 is located at a particular location, and/or other context signals), and/or one or more previous assistant outputs are included in voice utterance 652 of FIG. 6 It may be determined that it corresponds to one or more assistant outputs included in the assistant output set for . Additionally, the automated assistant may be one that is indexed (e.g., in the LLM output(s) database 150A) according to one or more of the previous assistant queries, previous contexts, and/or previous assistant outputs included in the previous assistant output set. You can obtain more than one LLM output, and utilize one or more LLM outputs as a set of modified assistant outputs. Additionally, for example, an automated assistant may use one or more LLMs to cause an assistant query, the context of a conversation session, and/or one or more assistant outputs contained in the assistant output set to be processed and utilized as an online modified assistant output set. Generates one or more LLM outputs to be
도 6의 예에서, 또한, 자동화된 어시스턴트가 "Good morning"이라는 수정된 어시스턴트 출력(654)을 제공하기로 결정했다고 가정한다. 더욱이, 수정된 어시스턴트 출력(654)은 음성 발화(652)에 포함된 어시스턴트 쿼리에 응답하는 측면에서 기능적이다(예를 들어, "It’s 8:30 AM"). 그러나, 수정된 어시스턴트 출력(654)은 사용자에게 개인화되거나 맞춤화되고 어시스턴트 쿼리에 응답하는 측면에서 기능적일 뿐만 아니라, 수정된 어시스턴트 출력(654)은 또한 대화 세션의 사용자를 추가로 참여하게 함으로써 사용자와 자동화된 어시스턴트 간 대화 세션을 주도하게 할 수 있다(예: "Any fun plans today?"). 음성 발화(652) 프로세싱에 기초하여 원래 생성된 어시스턴트 출력 세트를 수정하는데 하나 이상의 LLM 출력을 사용하는 것과 관련하여 여기에 설명된 기법을 사용하지 않으면, 자동화된 어시스턴트는 클라이언트 디바이스(610)의 사용자에게 인사말(예: "Good morning")을 제공하지 않고, 클라이언트 디바이스(610)의 사용자에게 이름을 부르지 않고, 단순히 "It’s 8:30 AM"라고 응답할 수 있다. 도 6에서, 또한 클라이언트 디바이스(610)의 사용자가 "Yes, I’m thinking about going to the beach"라는 음성 발화(656)를 제공한다고 가정한다. 이 예에서, 자동화된 어시스턴트는 음성 발화(656)를 캡처하는 오디오 데이터가 프로세싱되어 하나 이상의 LLM 출력을 사용하지 않고 생성되는 어시스턴트 출력 세트를 생성하게 할 수 있다. 또한, 자동화된 어시스턴트는 음성 발화(656)에 포함된 어시스턴트 쿼리, 어시스턴트 출력 세트, 및/또는 대화 세션의 컨텍스트가 프로세싱되어 하나 이상의 어시스턴트 출력을 사용하여 결정되는 수정된 어시스턴트 출력 세트를 생성하게 할 수 있고(예: 오프라인 및/또는 온라인 방식으로), 선택적으로 어시스턴트 쿼리에 기초하여 추가 어시스턴트 쿼리를 생성하게 할 수 있다. In the example of FIG. 6 , also assume that the automated assistant decides to provide modified assistant output 654 that reads “Good morning.” Moreover, modified assistant output 654 is functional in terms of responding to assistant queries included in voice utterance 652 (e.g., “It’s 8:30 AM”). However, not only is the modified assistant output 654 functional in terms of being personalized or customized to the user and responding to assistant queries, the modified assistant output 654 can also provide interaction between the user and the automation by further engaging the user in the conversation session. You can lead a conversation session between enabled assistants (e.g. “Any fun plans today?”). Without using the techniques described herein regarding using one or more LLM outputs to modify a set of assistant outputs originally generated based on speech utterance 652 processing, the automated assistant may provide the user of the client device 610 with Rather than providing a greeting (e.g., "Good morning") or calling the user of client device 610 by name, the user may simply respond with "It's 8:30 AM." 6, it is also assumed that the user of client device 610 provides voice utterance 656, “Yes, I’m thinking about going to the beach.” In this example, the automated assistant may cause audio data capturing voice utterance 656 to be processed to produce a set of assistant outputs that are generated without using one or more LLM outputs. Additionally, the automated assistant may cause the assistant query included in the voice utterance 656, the assistant output set, and/or the context of the conversation session to be processed to produce a modified assistant output set determined using one or more assistant outputs. (e.g., offline and/or online), and may optionally generate additional assistant queries based on the assistant query.
이 예에서, 어시스턴트 출력 세트에 포함되는(즉, 하나 이상의 LLM 출력을 사용하지 않고 생성되는) 어시스턴트 출력은 음성 발화(656)에 포함된 어시스턴트 쿼리가 자동화된 어시스턴트에게 임의의 액션을 수행할 것을 요청하지 않기 때문에 제한될 수 있다. 예를 들어, 어시스턴트 출력 세트에 포함된 어시스턴트 출력은 "Sounds fun!", "Surf’s up!", "That sounds like fun!" 및/또는 음성 발화에 반응하는 기타 어시스턴트 출력이 포함될 수 있고, 대화 세션에서 클라이언트 디바이스(610)의 사용자를 더 이상 참여시키지 않는다. 다르게 말하면, 어시스턴트 출력 세트에 포함되는 어시스턴트 출력은 본 명세서에 설명된 바와 같이 하나 이상의 LLM 출력을 사용하여 어시스턴트 출력이 생성되지 않기 때문에 어휘의 변화 측면에서 제한될 수 있다. 그럼에도 불구하고, 자동화된 어시스턴트는 어시스턴트 출력 세트에 포함된 어시스턴트 출력을 활용하여 하나 이상의 LLM 출력을 사용하여 하나 이상의 어시스턴트 출력을 수정하는 방법을 결정할 수 있다.In this example, the assistant output included in the assistant output set (i.e., generated without using one or more LLM outputs) is one in which an assistant query included in a voice utterance 656 requests the automated assistant to perform an arbitrary action. It may be limited because it is not done. For example, the assistant outputs included in the assistant output set are “Sounds fun!”, “Surf’s up!”, and “That sounds like fun!” and/or other assistant output that responds to voice utterances and no longer engages the user of client device 610 in the conversation session. In other words, the assistant output included in the assistant output set may be limited in terms of vocabulary variation because the assistant output is not generated using one or more LLM outputs as described herein. Nonetheless, the automated assistant may utilize the assistant outputs included in the assistant output set to determine how to modify one or more assistant outputs using one or more LLM outputs.
더욱이, 도 3 및 도 4와 관련하여 설명된 바와 같이, 자동화된 어시스턴트는 어시스턴트 쿼리에 기초하고 하나 이상의 LLM 또는 하나 이상의 LLM과 통신하는 별개의 ML 모델을 사용하여 추가 어시스턴트 쿼리를 생성할 수 있다. 예를 들어, 도 6의 예에서, 클라이언트 디바이스(610)의 사용자에 의해 제공되는 음성 발화(656)은 사용자가 해변에 가려고 함을 나타낸다. 사용자가 해변에 갈 의도가 있음을 나타내는 음성 발화(656)과 연관된 의도의 식별에 기초하여, 자동화된 어시스턴트는 클라이언트 디바이스(610)의 사용자가 자주 방문하는 해변의 날씨를 검색하는 것과 연관된 관련 의도를 결정할 수 있다(예를 들어, "Half Moon Bay"라는 이름의 예시적 해변). 관련 의도 식별에 기초하여, 자동화된 어시스턴트는 "Half Moon Bay"의 위치 파라미터를 사용하여 "What’s the weather?"라는 추가 어시스턴트 쿼리를 생성할 수 있고, 1P 시스템(191) 및/또는 3P 시스템(192) 중 하나 이상에 쿼리를 제출하여 예를 들어, "Half Moon Bay"에서는 비가 내리고 하루 종일 쌀쌀한 기온이 유지될 것이라는 "Half Moon Bay"에 대한 "날씨"를 포함하는 추가 어시스턴트 출력을 획득한다. 일부 구현예에서, 자동화된 어시스턴트는 하나 이상의 LLM 출력 및/또는 하나 이상의 추가 LLM 출력을 사용하여 결정되는 수정된 추가 어시스턴트 출력 세트를 생성하기 위해 추가 어시스턴트 출력 및/또는 대화 세션의 컨텍스트가 프로세싱되게 할 수 있다. Moreover, as described in connection with FIGS. 3 and 4 , the automated assistant may generate additional assistant queries based on the assistant query and using one or more LLMs or a separate ML model in communication with one or more LLMs. For example, in the example of Figure 6, vocal utterance 656 provided by the user of client device 610 indicates that the user is about to go to the beach. Based on identification of the intent associated with the vocal utterance 656 indicating that the user intends to go to the beach, the automated assistant determines the relevant intent associated with retrieving the weather for beaches that the user of client device 610 frequently visits. (e.g., an exemplary beach named “Half Moon Bay”). Based on the identification of the relevant intent, the automated assistant may generate an additional assistant query “What's the weather?” using the location parameter of “Half Moon Bay”, which may then be sent to the 1P system 191 and/or the 3P system 192 ) to obtain additional assistant output that includes "weather" for "Half Moon Bay," for example, that it will rain in "Half Moon Bay" and that chilly temperatures will remain throughout the day. In some implementations, the automated assistant may cause additional assistant outputs and/or the context of the conversation session to be processed to produce a set of modified additional assistant outputs determined using one or more LLM outputs and/or one or more additional LLM outputs. You can.
도 6의 예에서, 자동화된 어시스턴트는 하나 이상의 순위 기준에 따라 어시스턴트 출력 세트 및 수정된 어시스턴트 출력 세트에 포함된 어시스턴트 출력의 순위를 매길 수 있고, 순위에 기초하여 하나 이상의 어시스턴트 출력을 선택할 수 있다(예: "Sounds fun!"라는 주어진 어시스턴트 출력을 선택한다.) 또한, 자동화된 어시스턴트는 수정된 추가 어시스턴트 출력 세트에 포함된 어시스턴트 출력 및 추가 어시스턴트 출력이 하나 이상의 순위 기준에 따라 순위가 지정되도록 할 수 있고, 순위에 기초하여 어시스턴트 출력 중 하나 이상을 선택할 수 있다(예: "But if you’re going to Half Moon Bay again, expect rain and chilly temps"라는 주어진 추가 어시스턴트 출력을 선택). 더욱이, 자동화된 어시스턴트는 선택된 주어진 어시스턴트 출력과 선택된 주어진 추가 어시스턴트 출력을 결합할 수 있으며, 그 결과 "Sounds fun! But if you’re going to Half Moon Bay again, expect rain and chilly temps"라는 수정된 어시스턴트 출력(658)을 생성하고, 클라이언트 디바이스(610)의 사용자에게 시각적 및/또는 청각적 제시하기 위해 상기 수정된 어시스턴트 출력(658)이 제공되게 할 수 있다. 따라서, 이 예에서, 자동화된 어시스턴트는 음성 발화(656)을 프로세싱하고, 음성 발화와 연관된 추가 컨텍스트 정보(예를 들어, 클라이언트 디바이스(610)의 사용자가 방문할 가능성이 있는 해변의 날씨)를 제공하여 대화 세션에서 클라이언트 디바이스(610)의 사용자를 추가로 참여하게 할 수 있다. 여기에 설명된 기술이 없으면, 자동화된 어시스턴트가 날씨 정보를 결정하고 제공할 수 있음에도 불구하고 클라이언트 디바이스(610)의 사용자는 자동화된 어시스턴트로부터 날씨 정보를 사전에 요청해야 할 수 있으며, 이에 따라 클라이언트 디바이스(610)에서 사용자 입력량이 증가하고 증가된 양의 사용자 입력을 프로세싱하는데 계산 리소스가 낭비되며, 또한 클라이언트 디바이스(610)의 사용자의 인지 부하를 증가시킨다. In the example of Figure 6, the automated assistant can rank the assistant outputs included in the assistant output set and the modified assistant output set according to one or more ranking criteria and select one or more assistant outputs based on the rankings ( Example: select a given assistant output called "Sounds fun!") Additionally, an automated assistant can have assistant outputs and additional assistant outputs included in the modified set of additional assistant outputs ranked according to one or more ranking criteria. and can select one or more of the assistant outputs based on their ranking (e.g., select the given additional assistant output "But if you're going to Half Moon Bay again, expect rain and chilly temps"). Moreover, the automated assistant can combine selected given assistant outputs with selected given additional assistant outputs, resulting in a modified assistant called "Sounds fun! But if you're going to Half Moon Bay again, expect rain and chilly temps" Output 658 may be generated and the modified assistant output 658 may be provided for visual and/or auditory presentation to the user of client device 610. Accordingly, in this example, the automated assistant processes the spoken utterance 656 and provides additional context information associated with the spoken utterance (e.g., weather at a beach the user of client device 610 is likely to visit) This allows additional users of the client device 610 to participate in the conversation session. Without the techniques described herein, although the automated assistant may be capable of determining and providing weather information, the user of client device 610 may be required to proactively request weather information from the automated assistant, thereby The amount of user input increases at 610 and computational resources are wasted in processing the increased amount of user input, which also increases the cognitive load of the user of the client device 610.
도 6의 예에서, 클라이언트 디바이스(610)의 사용자가 "Oh no … thanks for the heads up, can you remind me to check the weather again in two hours?"라는 음성 발화(660)를 제공한다고 가정한다. 이 예에서, 자동화된 어시스턴트는 음성 발화(660)를 캡처하는 오디오 데이터가 프로세싱되어 하나 이상의 LLM 출력을 사용하지 않고 생성되는 어시스턴트 출력 세트를 생성하게 할 수 있다. 또한, 자동화된 어시스턴트는 음성 발화(660)에 포함된 어시스턴트 쿼리, 어시스턴트 출력 세트, 및/또는 대화 세션의 컨텍스트가 프로세싱되어 하나 이상의 어시스턴트 출력을 사용하여 결정되는 수정된 어시스턴트 출력 세트를 생성하게 할 수 있다(예: 오프라인 및/또는 온라인 방식으로). 음성 발화(660)의 프로세싱에 기초하여, 자동화된 어시스턴트는 클라이언트 디바이스(610)의 사용자에게 "Half Moon Bay"의 날씨를 확인하도록 상기시키는 오전 10시 30분(예를 들어, 대화 세션 후 2시간)에 대한 알림을 설정하기로 결정하거나 또는 오전 10시 30분에 "Half Moon Bay"의 날씨를 클라이언트 디바이스(610) 사용자에게 능동적으로 제공한다. 또한, 자동화된 어시스턴트는 수정된 어시스턴트 출력 세트로부터 (즉, 하나 이상의 LLM 출력을 사용하여 생성됨) 수정된 어시스턴트 출력(662) "Sure thing, I set the reminder and hope the weather clears up for you"이 클라이언트 디바이스(610)의 사용자에게 시각적 및/또는 청각적 제시하기 위해 제공되게 할 수 있다. 특히, 도 6의 예에서 수정된 어시스턴트 출력(662)은 날씨가 맑아지기를 바라는 바람을 사용자에게 표시한다는 점에서 대화 세션과 관련하여 컨텍스트적이다. 대조적으로, 어시스턴트 출력 세트에 포함된 어시스턴트 출력(즉, 하나 이상의 LLM 출력을 사용하지 않고 생성됨)은 대화 세션의 컨텍스트를 고려하지 않고 미리 알림이 설정되었다는 표시만 제공할 수 있다. In the example of Figure 6, assume that the user of the client device 610 provides the voice utterance 660, "Oh no... thanks for the heads up, can you remind me to check the weather again in two hours?" In this example, the automated assistant may cause audio data capturing voice utterance 660 to be processed to produce a set of assistant outputs that are generated without using one or more LLM outputs. Additionally, the automated assistant may cause the assistant query included in the voice utterance 660, the assistant output set, and/or the context of the conversation session to be processed to produce a modified assistant output set determined using one or more assistant outputs. available (e.g. offline and/or online). Based on the processing of the voice utterance 660, the automated assistant may remind the user of the client device 610 to check the weather in “Half Moon Bay” at 10:30 a.m. (e.g., 2 hours after the conversation session). ) or actively provide the weather for "Half Moon Bay" to the user of the client device 610 at 10:30 am. Additionally, the automated assistant can be generated from a set of modified assistant outputs (i.e., generated using one or more LLM outputs) so that the modified assistant output 662 "Sure thing, I set the reminder and hope the weather clears up for you" is generated by the client. It may be provided for visual and/or auditory presentation to the user of device 610. In particular, the modified assistant output 662 in the example of Figure 6 is contextual with respect to the conversation session in that it indicates to the user a wish for the weather to clear. In contrast, assistant output included in an assistant output set (i.e., generated without using one or more LLM outputs) may only provide an indication that a reminder has been set without considering the context of the conversation session.
비록 도 6은 하나 이상의 LLM 출력을 사용하고, 특정 음성 발화 및 대화 세션의 컨텍스트에 기초하여 특정 수정된 어시스턴트 출력을 생성하고, 사용자에게 제시하기 위해 제공될 특정 수정된 어시스턴트 출력을 선택하는 것과 관련하여 설명되었지만, 이는 예시를 위한 것이며 제한하려는 의도가 아니라는 점을 이해해야 한다. 오히려, 여기에 설명된 기술은 임의의 사용자와 자동화된 어시스턴트의 대응 인스턴스 사이의 임의의 대화 세션에 활용될 수 있다는 것이 이해되어야 한다. 또한, 사용자와 자동화된 어시스턴트 사이의 대화 세션에 대응하는 전사가 클라이언트 디바이스(610)의 디스플레이(680)에 표시되어 있지만, 이는 예시를 위한 것이며 제한하려는 의도가 아니라는 것도 이해되어야 한다. 예를 들어, 클라이언트 디바이스가 디스플레이를 포함하는지 여부에 관계없이 자동화된 어시스턴트를 실행할 수 있는 임의의 디바이스에서 대화 세션이 수행될 수 있다는 것이 이해되어야 한다.Although Figure 6 relates to using one or more LLM outputs, generating specific modified assistant outputs based on the context of specific speech utterances and conversation sessions, and selecting specific modified assistant outputs to be presented for presentation to the user. Although described, it should be understood that this is for illustrative purposes only and is not intended to be limiting. Rather, it should be understood that the techniques described herein may be utilized in any conversational session between any user and a corresponding instance of an automated assistant. Additionally, while a transcript corresponding to a conversational session between a user and an automated assistant is displayed on display 680 of client device 610, it should be understood that this is for illustrative purposes only and is not intended to be limiting. For example, it should be understood that a conversational session may be conducted on any device capable of executing an automated assistant, regardless of whether the client device includes a display.
또한, 도 6의 대화 세션에서 사용자에게 제시하기 위해 제공된 어시스턴트 출력이 본 명세서에 설명된 다양한 성격 응답을 포함할 수 있다는 것이 이해되어야 한다. 예를 들어, 수정된 어시스턴트 출력(654)은 자동화된 어시스턴트에 의해 활용될 제1 어휘 및/또는 사용자에게 청각적으로 제시하기 위해 수정된 어시스턴트 출력(654)을 제공하는데 활용되는 운율 속성 세트와 관련하여 자동화된 어시스턴트의 제1 성격을 반영하는 제1 파라미터 세트를 사용하여 생성될 수 있다. 대안적으로, 수정된 어시스턴트 출력(658)은 자동화된 어시스턴트에 의해 활용될 제2 어휘 및/또는 사용자에게 청각적으로 제시하기 위해 수정된 어시스턴트 출력(658)을 제공하는데 활용되는 제2 운율 속성 세트와 관련하여 자동화된 어시스턴트의 제2 성격을 반영하는 제2 파라미터 세트를 사용하여 생성될 수 있다. 이 예에서 제1 성격은 예를 들어 아침 인사를 제공하고, 사용자의 현재 시간 요청에 응답하고, 사용자에게 당일 계획이 있는지 묻는데 활용되는 집사 또는 가정부의 성격을 반영할 수 있다. 또한, 제2 인격은 예를 들어 해변에 가는 것이 재미있을 것 같지만 낮에 해변 날씨가 이상적이지 않을 수 있음을 나타내는데 활용되는 기상 예보관, 서퍼 또는 인명 구조원(또는 이들의 조합)의 성격을 반영할 수 있다. 예를 들어, 사용자가 해변에 갈 계획을 표시했기 때문에 서퍼 성격을 활용하여 수정된 어시스턴트 출력(658)의 일부 "Sounds fun!" 메시지를 제공할 수 있고, 자동화된 어시스턴트는 사용자에게 날씨 정보를 제공하기 때문에 기상 예보관의 성격은 "But if you’re going to Half Moon Bay again, expect rain and chilly temps"라는 메시지를 제공하기 위해 활용될 수 있다.Additionally, it should be understood that the assistant output provided for presentation to the user in the conversational session of Figure 6 may include various personality responses described herein. For example, modified assistant output 654 may relate to a first vocabulary to be utilized by an automated assistant and/or a set of prosodic properties utilized to provide modified assistant output 654 for auditory presentation to a user. It can be created using a first parameter set that reflects the first personality of the automated assistant. Alternatively, the modified assistant output 658 may include a second vocabulary to be utilized by the automated assistant and/or a second set of prosodic properties utilized to provide the modified assistant output 658 for aural presentation to the user. may be created using a second parameter set that reflects the second personality of the automated assistant in relation to In this example, the first personality may reflect the personality of a butler or housekeeper, for example, utilized to provide a good morning greeting, respond to the user's request for the current time, and ask the user if they have plans for the day. Additionally, the second personality may reflect the personality of a weather forecaster, surfer, or lifeguard (or a combination of these), for example utilized to indicate that going to the beach may seem fun, but the beach weather during the day may not be ideal. You can. For example, a portion of Assistant output 658 modified using the surfer personality because the user indicated plans to go to the beach: "Sounds fun!" Since the automated assistant provides weather information to the user, the weather forecaster personality can be leveraged to provide the message "But if you're going to Half Moon Bay again, expect rain and chilly temps." It can be.
따라서, 자동화된 어시스턴트는 자동화된 어시스턴트에 의해 활용되는 어휘와 사용자에게 청각적으로 제시하기 위해 수정된 어시스턴트 출력을 렌더링하는데 활용되는 운율 속성 둘 모두에 기초하여 사용자에게 제시하기 위한 수정된 어시스턴트 출력을 제공하는데 활용되는 성격을 동적으로 적응시킬 수 있다. 특히, 자동화된 어시스턴트는 사용자로부터 수신된 이전 음성 발화 및 자동화된 어시스턴트에 의해 제공되는 이전 어시스턴트 출력 및/또는 본 명세서에 기술된 임의의 다른 컨텍스트 신호를 포함하는 대화 세션의 컨텍스트에 기초하여 수정된 어시스턴트 출력을 제공하는데 활용되는 이들 성격을 동적으로 적응시킬 수 있다. 결과적으로, 자동화된 어시스턴트에 의해 제공되는 수정된 어시스턴트 출력은 클라이언트 디바이스의 사용자와 더 잘 공감할 수 있다.Accordingly, the automated assistant provides modified assistant output for presentation to the user based on both the vocabulary utilized by the automated assistant and the prosodic properties utilized to render the modified assistant output for auditory presentation to the user. The personality used can be dynamically adapted. In particular, the automated assistant is an assistant that is modified based on the context of the conversation session, including previous vocal utterances received from the user and previous assistant output provided by the automated assistant and/or any other context signals described herein. These characteristics can be dynamically adapted to be used to provide output. As a result, the modified assistant output provided by the automated assistant may better resonate with the user of the client device.
더욱이, 비록 도 6은 사용자가 대화 세션 전체에 걸쳐 음성 발화를 제공하는 것과 관련하여 기술되었지만, 이는 예를 위한 것이며 제한하려는 의도가 아님을 이해해야 한다. 예를 들어, 사용자는 대화 세션 전체에 걸쳐 타이핑 입력 및/또는 터치 입력을 추가적으로 또는 대안적으로 제공할 수 있다. 이러한 구현예에서, 자동화된 어시스턴트는 NLU 출력의 스트림을 생성하기 위해(예를 들어, 선택적으로 ASR 엔진(130A1 및/또는 130A2)을 사용하는 임의의 프로세싱을 건너뜀) 타이핑된 입력을 프로세싱할 수 있고((예를 들어, NLU 엔진(140A1 및/또는 140A2)을 사용), 위에서 설명한 것과 동일하거나 유사한 방식으로 하나 이상의 수정된 어시스턴트 출력 세트를 생성함에 있어서, 타이핑된 입력 및/또는 터치 입력으로부터 도출된 어시스턴트 쿼리에 대응하는 NLU 데이터 스트림 및 텍스트 입력을 프로세싱할 수 있다(예를 들어, LLM 엔진(150A1 및/또는 150A2) 사용).Moreover, although Figure 6 is described with respect to a user providing vocal utterances throughout a conversation session, it should be understood that this is by way of example and not intended to be limiting. For example, a user may additionally or alternatively provide typing input and/or touch input throughout a conversation session. In such implementations, the automated assistant may process the typed input (e.g., optionally skipping any processing using the ASR engines 130A1 and/or 130A2) to generate a stream of NLU output. and (e.g., using NLU engines 140A1 and/or 140A2) and derived from typed input and/or touch input in generating one or more sets of modified assistant outputs in the same or similar manner as described above. NLU data streams and text inputs corresponding to the generated assistant queries may be processed (e.g., using the LLM engine (150A1 and/or 150A2)).
이제 도 7으로 돌아가면, 본 명세서에 기술된 기법들의 하나 이상의 양태들을 수행하기 위해 선택적으로 활용될 수 있는 예시적 컴퓨팅 디바이스(710)의 블록도가 도시된다. 일부 구현예에서, 클라이언트 디바이스, 클라우드 기반 자동화된 어시스턴트 컴포넌트(들) 및/또는 다른 컴포넌트(들) 중 하나 이상은 예시적 컴퓨팅 디바이스(710) 중 하나 이상의 컴포넌트를 포함할 수 있다. Turning now to FIG. 7 , a block diagram of an example computing device 710 that may optionally be utilized to perform one or more aspects of the techniques described herein is shown. In some implementations, one or more of the client device, cloud-based automated assistant component(s), and/or other component(s) may include one or more components of example computing device 710.
컴퓨팅 디바이스(710)는 일반적으로 적어도 하나의 프로세서(714)를 포함하며, 버스 서브시스템(712)을 통해 다수의 주변 디바이스들과 통신한다. 이들 주변 디바이스들은 예를 들면, 메모리 서브시스템(725) 및 파일 저장 서브시스템(726)을 포함하는 저장 서브시스템(724), 사용자 인터페이스 출력 디바이스(720), 사용자 인터페이스 입력 디바이스(722) 및 네트워크 인터페이스 서브시스템(716)을 포함할 수 있다. 입력 및 출력 디바이스는 컴퓨팅 디바이스(710)와 사용자 인터렉션을 하게 한다. 네트워크 인터페이스 서브시스템(716)은 외부 네트워크에 대한 인터페이스를 제공하며, 다른 컴퓨팅 디바이스들의 대응하는 인터페이스 디바이스들과 연결된다. Computing device 710 typically includes at least one processor 714 and communicates with a number of peripheral devices via a bus subsystem 712. These peripheral devices include, for example, storage subsystem 724, which includes memory subsystem 725 and file storage subsystem 726, user interface output device 720, user interface input device 722, and network interface. May include subsystem 716. Input and output devices allow user interaction with computing device 710. Network interface subsystem 716 provides an interface to an external network and connects to corresponding interface devices of other computing devices.
사용자 인터페이스 입력 디바이스(722)는 키보드, 마우스, 트랙볼, 터치패드 또는 그래픽 태블릿, 스캐너, 디스플레이에 통합된 터치스크린과 같은 포인팅 디바이스, 음성 인식 시스템, 마이크로폰과 같은 오디오 입력 디바이스 및/또는 다른 유형의 입력 디바이스를 포함한다. 일반적으로, 용어 "입력 디바이스"의 사용은 정보를 컴퓨팅 디바이스(710) 또는 통신 네트워크에 입력하기 위한 모든 가능한 유형의 디바이스들과 방식들을 포함하도록 의도된다.User interface input devices 722 may include pointing devices such as a keyboard, mouse, trackball, touchpad or touchscreen integrated into a graphics tablet, scanner, display, speech recognition system, audio input device such as a microphone, and/or other types of input. Includes devices. Generally, use of the term “input device” is intended to include all possible types of devices and methods for inputting information into computing device 710 or a communications network.
사용자 인터페이스 출력 디바이스(720)는 디스플레이 서브시스템, 프린터, 팩스 기계 또는 오디오 출력 디바이스와 같은 비-시각적 디스플레이를 포함할 수 있다. 디스플레이 서브시스템은 CRT, LCD와 같은 평면 패널 디바이스, 프로젝션 디바이스 또는 시각적 이미지를 생성하기 위한 일부 기타 메커니즘을 포함할 수 있다. 또한, 디스플레이 서브시스템은 오디오 출력 디바이스와 같은 비-시각적 디스플레이를 제공할 수 있다. 일반적으로, 용어 "출력 디바이스"의 사용은 정보를 컴퓨팅 디바이스(710)로부터 사용자에게 또는 다른 기계 또는 컴퓨팅 디바이스에 정보를 출력하기 위한 모든 가능한 유형의 디바이스들과 방식들을 포함하도록 의도된다.User interface output device 720 may include a non-visual display, such as a display subsystem, printer, fax machine, or audio output device. The display subsystem may include a flat panel device such as a CRT, LCD, projection device, or some other mechanism for generating a visual image. Additionally, the display subsystem may provide non-visual displays, such as audio output devices. Generally, use of the term “output device” is intended to include all possible types of devices and methods for outputting information from computing device 710 to a user or to another machine or computing device.
저장 서브시스템(724)은 본 명세서에 기술된 일부 또는 전부의 모듈들의 기능을 제공하기 위한 프로그래밍 및 데이터 구조를 저장한다. 예를 들면, 저장 서브시스템(724)은 본 명세서에 개시된 방법의 선택된 양태들을 수행하고 뿐만 아니라 도 1 및 2에 도시된 다양한 컴포넌트들을 구현하기 위한 로직을 포함할 수 있다. Storage subsystem 724 stores programming and data structures to provide the functionality of some or all of the modules described herein. For example, storage subsystem 724 may include logic to implement selected aspects of the methods disclosed herein as well as to implement the various components shown in Figures 1 and 2.
이들 소프트웨어 모듈들은 일반적으로 프로세서(714) 단독으로 또는 다른 프로세서들과의 조합에 의해 실행된다. 저장 서브시스템(724)에서 사용된 메모리(725)는 프로그램 실행 중에 명령어들 및 데이터의 저장을 위한 메인 RAM(730) 및 고정된 명령어들이 저장되는 ROM(732)을 포함하는 다수의 메모리들을 포함할 수 있다. 파일 저장 서브시스템(726)은 프로그램 및 데이터 파일에 대한 영구적 저장을 제공할 수 있고, 하드 디스크 드라이브, 연관된 이동식 매체와 함께인 플로피 디스크 드라이브, CD-ROM 드라이브, 광학 드라이브 또는 이동식 매체 카트리지들을 포함할 수 있다. 특정 구현예들의 기능을 구현하는 모듈들은 파일 저장 서브시스템(726)에 의해 저장 서브시스템(724)에 또는 프로세서(들)(714)에 의해 액세스가능한 다른 기계에 저장될 수 있다.These software modules are generally executed by processor 714 alone or in combination with other processors. The memory 725 used in the storage subsystem 724 may include a number of memories, including a main RAM 730 for storage of instructions and data during program execution and a ROM 732 where fixed instructions are stored. You can. File storage subsystem 726 may provide permanent storage for program and data files and may include a hard disk drive, a floppy disk drive with associated removable media, a CD-ROM drive, an optical drive, or removable media cartridges. You can. Modules implementing the functionality of certain implementations may be stored in storage subsystem 724 by file storage subsystem 726 or on another machine accessible by processor(s) 714.
버스 서브시스템(712)은 의도된 대로 컴퓨팅 디바이스(710)의 다양한 컴포넌트들 및 서브시스템들이 서로 통신하게 하기 위한 메커니즘을 제공한다. 버스 서브시스템(712)이 개략적으로 단일의 버스로 도시되었지만, 버스 서브시스템(712)의 대안적 구현예들은 다수의 버스들을 사용할 수 있다.Bus subsystem 712 provides a mechanism for allowing the various components and subsystems of computing device 710 to communicate with each other as intended. Although bus subsystem 712 is schematically depicted as a single bus, alternative implementations of bus subsystem 712 may use multiple buses.
컴퓨팅 디바이스(710)는 워크스테이션, 서버, 컴퓨팅 클러스터, 블레이드 서버, 서퍼팜 또는 임의의 기타 데이터 프로세싱 시스템 또는 컴퓨팅 디바이스를 포함하는 다양한 유형들일 수 있다. 컴퓨터 및 네트워크의 끊임없이 변화하는 특성으로 인해, 도 7에 도시된 컴퓨팅 디바이스(710)는 일부 구현예를 설명하기 위한 목적의 특정 예로서만 의도된다. 컴퓨팅 디바이스(710)의 많은 다른 구성이 도 7에 도시된 컴퓨팅 디바이스보다 많거나 적은 컴포넌트를 가질 수 있다.Computing devices 710 may be of various types, including workstations, servers, computing clusters, blade servers, surffarms, or any other data processing system or computing device. Due to the ever-changing nature of computers and networks, computing device 710 shown in FIG. 7 is intended only as a specific example for purposes of illustrating some implementations. Many other configurations of computing device 710 may have more or fewer components than the computing device shown in FIG. 7 .
본 명세서에서 논의된 시스템들이 사용자들에 관한 개인 정보를 수집 또는 모니터링하거나 또는 개인 및/또는 모니터링된 정보를 사용하는 경우에 있어서, 사용자에게 프로그램 또는 구성이 사용자 정보(예를 들면, 사용자의 소셜 네트워크, 소셜 액션 또는 활동, 직업, 사용자의 선호 또는 사용자의 현재 지리적 위치)에 관한 정보를 수집할 것인지 여부를 제어할, 사용자와 더 관련된 콘텐츠 서버로부터의 콘텐츠를 수신할지 및/또는 어떻게 수신할지 제어할 기회가 제공될 수 있다. 추가로, 특정 데이터는 그것이 저장되거나 사용되기 전에 하나 이상의 다양한 방식들로 취급되어, 개인적으로 식별가능한 정보는 제거된다. 예를 들면, 사용자의 신원은 사용자에 관한 개인적으로 식별가능한 정보가 결정될 수 없도록 취급되거나 또는 사용자의 지리적 위치는 위치 정보가 획득된 곳에서 일반화되어(시, 우편번호 또는 주 수준으로), 사용자의 특정한 지리적 위치가 결정될 수 없도록 한다. 따라서, 사용자는 사용자에 관한 정보가 어떻게 수집되는지 그리고 사용되는지에 관한 제어를 가질 수 있다. In instances where the systems discussed herein collect or monitor personal information about users or use personal and/or monitored information, a program or configuration may be used to provide information about the user (e.g., the user's social network control whether and/or how you receive content from content servers that are more relevant to you; Opportunities may be provided. Additionally, certain data may be treated in one or more different ways before it is stored or used, so that personally identifiable information is removed. For example, a user's identity may be treated in such a way that no personally identifiable information about the user can be determined, or the user's geographic location may be generalized to where the location information was obtained (at the city, zip code, or state level), so that the user's geographic location may be treated as such. Ensures that no specific geographic location can be determined. Accordingly, the user can have control over how information about the user is collected and used.
일부 구현예에서, 하나 이상의 프로세서들에 의해 구현되는 방법이 제공되고, 상기 방법은 클라이언트 디바이스 사용자와 클라이언트 디바이스에 의해 구현된 자동화된 어시스턴트 간의 대화 세션의 일부로서: 상기 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하는 단계, 상기 오디오 데이터 스트림은 상기 클라이언트 디바이스의 하나 이상의 마이크에서 생성되고, 상기 음성 발화는 어시스턴트 쿼리를 포함하며; 상기 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 출력 세트를 결정하는 단계, 상기 어시스턴트 출력 세트의 각 어시스턴트 출력은 상기 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답이며; 상기 어시스턴트 출력 세트와 상기 대화 세션의 컨텍스트를 프로세싱하는 단계, 상기 프로세싱하는 단계는: 대형 언어 모델(LLM, large language model)을 사용하여 생성된 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하고, 상기 하나 이상의 LLM 출력 각각은 상기 대화 세션의 컨텍스트의 적어도 일부와 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 기초하여 결정되며, 그리고 상기 대화 세션의 컨텍스트의 적어도 일부 및 상기 어시스턴트 쿼리의 적어도 일부에 기초하여 상기 음성 발화와 관련된 추가 어시스턴트 쿼리를 생성하며; 상기 추가 어시스턴트 쿼리에 기초하여, 상기 추가 어시스턴트 쿼리에 대한 응답인 추가 어시스턴트 출력을 결정하는 단계; 상기 LLM을 사용하여 생성된 하나 이상의 LLM 출력 또는 하나 이상의 추가 LLM 출력을 사용하여 수정된 추가 어시스턴트 출력 세트를 생성하기 위해 추가 어시스턴트 출력 및 대화 세션의 컨텍스트를 프로세싱하는 단계, 상기 추가 LLM 출력 각각은 상기 대화 세션의 컨텍스트 및 상기 추가 어시스턴트 출력의 적어도 일부에 기초하여 결정되며; 및 상기 수정된 어시스턴트 출력 세트로부터 주어진 수정된 어시스턴트 출력과 수정된 추가 어시스턴트 출력 세트로부터 주어진 수정된 추가 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 하는 단계를 포함한다.In some implementations, a method implemented by one or more processors is provided, the method comprising: as part of a conversational session between a client device user and an automated assistant implemented by the client device: audio that captures a vocal utterance of the user; Receiving a data stream, the audio data stream generated at one or more microphones of the client device, the voice utterance comprising an assistant query; Based on the audio data stream processing, determining a set of assistant outputs, each assistant output of the set of assistant outputs being a response to an assistant query included in the voice utterance; Processing the assistant output set and the context of the conversation session, the processing comprising: generating a modified assistant output set using one or more LLM outputs generated using a large language model (LLM); and each of the one or more LLM outputs is determined based on at least a portion of the context of the conversation session and one or more assistant outputs included in the assistant output set, and at least a portion of the context of the conversation session and at least one of the assistant queries. generate additional assistant queries related to the vocal utterance based in part on the portion; Based on the additional assistant query, determining additional assistant output that is a response to the additional assistant query; Processing the additional assistant output and the context of the conversation session to generate a set of additional assistant outputs that are one or more LLM outputs generated using the LLM or modified using one or more additional LLM outputs, each of the additional LLM outputs being determined based on the context of the conversation session and at least part of the additional assistant output; and causing the modified assistant output given from the modified assistant output set and the modified additional assistant output given from the modified additional assistant output set to be provided for presentation to the user.
본 명세서에서 개시된 기술의 이들 또는 다른 구현예들은 다음 구성들 중 하나 이상을 각각 선택적으로 포함할 수 있다. These or other implementations of the technology disclosed herein may each optionally include one or more of the following configurations.
일부 구현예에서, 상기 오디오 데이터 스트림 프로세싱에 기초하여, 상기 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답인 어시스턴트 출력 세트를 결정하는 단계는 ASR(automatic speech recognition) 모델을 사용하여, ASR 출력 스트림을 생성하기 위해 오디오 데이터 스트림을 프로세싱하는 단계; NLU(natural language understanding) 모델을 사용하여, NLU 데이터 스트림을 생성하기 위해 ASR 출력 스트림을 프로세싱하는 단계; 및 NLU 스트림에 기초하여 어시스턴트 출력 세트가 결정되게 하는 단계를 포함한다. In some implementations, based on processing the audio data stream, determining an assistant output set that is a response to an assistant query included in the speech utterance uses an automatic speech recognition (ASR) model to generate an ASR output stream. processing the audio data stream to do so; Processing the ASR output stream using a natural language understanding (NLU) model to generate an NLU data stream; and allowing an assistant output set to be determined based on the NLU stream.
상기 구현예 중 일부 버전에서, LLM을 사용하여 생성된 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하는 단계는 상기 LLM을 사용하여, 하나 이상의 LLM 출력을 생성하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하는 단계; 및 하나 이상의 LLM 출력에 기초하여 수정된 어시스턴트 출력 세트를 결정하는 단계를 포함한다. 상기 구현예 중 일부 추가 버전에서, 상기 LLM을 사용하여 하나 이상의 LLM 출력을 생성하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하는 단계는 복수의 이종 LLM 파라미터 세트들 중 제1 LLM 파라미터 세트를 사용하여 복수의 이종 성격들 중 제1 성격을 갖는 하나 이상의 LLM 출력을 결정하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하는 단계를 포함한다. 상기 수정된 어시스턴트 출력 세트는 제1 성격을 반영하는 하나 이상의 제1 성격 어시스턴트 출력을 포함한다. 상기 구현예 중 또 다른 버전에서, 상기 LLM을 사용하여 하나 이상의 LLM 출력을 생성하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하는 단계는 복수의 이종 LLM 파라미터 세트들 중 제2 LLM 파라미터 세트를 사용하여 복수의 이종 성격들 중 제2 성격을 갖는 하나 이상의 LLM 출력을 결정하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하는 단계를 포함한다. 수정된 어시스턴트 출력 세트는 제2 성격을 반영하는 하나 이상의 제2 성격 어시스턴트 출력을 포함할 수 있고, 제2 성격은 제1 성격과 상이할 수 있다. 상기 구현예 중 또 다른 버전에서, 상기 수정된 어시스턴트 출력 세트에 포함되고 상기 제1 성격을 반영하는 상기 하나 이상의 제1 성격 어시스턴트 출력은 상기 제1 성격과 연관된 제1 어휘를 사용하여 결정될 수 있고, 그리고 상기 수정된 어시스턴트 출력 세트에 포함되고 상기 제2 성격을 반영하는 상기 하나 이상의 제2 성격 어시스턴트 출력은 상기 제2 성격과 연관된 제2 어휘를 사용하여 결정될 수 있고, 그리고 상기 제2 성격은 상기 제2 어휘가 상기 제1 어휘와 상이한 것에 기초하여 상기 제1 성격과 상이하다. 상기 구현예 중 추가 또는 대안적 버전에서, 상기 수정된 어시스턴트 출력 세트에 포함되고 상기 제1 성격을 반영하는 상기 하나 이상의 제1 성격 어시스턴트 출력은 상기 사용자에게 청각적으로 제시하기 위해 주어진 수정된 어시스턴트 출력을 제공하는데 활용되는 제1 운율 속성 세트와 연관될 수 있고, 상기 수정된 어시스턴트 출력 세트에 포함되고 상기 제2 성격을 반영하는 상기 하나 이상의 제2 성격 어시스턴트 출력은 상기 사용자에게 청각적으로 제시하기 위해 주어진 수정된 어시스턴트 출력을 제공하는데 활용되는 제2 운율 속성 세트와 연관될 수 있고, 그리고 상기 제2 성격은 상기 제2 운율 속성 세트가 상기 제1 운율 속성 세트와 상이한 것에 기초하여 상기 제1 성격과 상이한 것일 수 있다.In some versions of the above implementations, processing the assistant output set and the context of the conversation session to generate a modified assistant output set using one or more LLM outputs generated using the LLM may comprise using the LLM to: processing the assistant output set and the context of the conversation session to generate further LLM output; and determining a set of modified assistant outputs based on the one or more LLM outputs. In some further versions of the above implementations, the step of processing the assistant output set and the context of the conversation session to generate one or more LLM outputs using the LLM uses a first LLM parameter set of the plurality of heterogeneous LLM parameter sets. and processing the assistant output set and the context of the conversation session to determine one or more LLM outputs having a first personality among the plurality of heterogeneous personalities. The set of modified assistant outputs includes one or more first personality assistant outputs that reflect the first personality. In another version of the above implementation, the step of processing the assistant output set and the context of the conversation session to generate one or more LLM outputs using the LLM uses a second LLM parameter set of the plurality of heterogeneous LLM parameter sets. and processing the assistant output set and the context of the conversation session to determine one or more LLM outputs having a second personality among the plurality of heterogeneous personalities. The modified assistant output set may include one or more second personality assistant outputs that reflect a second personality, and the second personality may be different from the first personality. In another version of the above implementation, the one or more first personality assistant outputs included in the modified assistant output set and reflective of the first personality may be determined using a first vocabulary associated with the first personality; and the one or more second personality assistant outputs included in the modified assistant output set and reflecting the second personality may be determined using a second vocabulary associated with the second personality, and wherein the second personality is the second personality. 2 The vocabulary is different from the first personality on the basis that it is different from the first vocabulary. In additional or alternative versions of the above implementations, the one or more first personality assistant outputs included in the set of modified assistant outputs and reflecting the first personality are modified assistant outputs given for audible presentation to the user. wherein the one or more second personality assistant outputs are included in the modified assistant output set and reflect the second personality for aural presentation to the user. may be associated with a second set of prosodic properties utilized to provide a given modified assistant output, and the second personality can be associated with the first personality based on the second set of prosodic properties being different from the first set of prosodic properties. It may be different.
상기 구현예 중 일부 버전에서, LLM을 사용하여 생성된 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하는 단계는 상기 대화 세션의 어시스턴트 쿼리에 대응하는 이전 대화 세션의 이전 어시스턴트 쿼리에 기초하여 이전에 생성된 하나 이상의 LLM 출력에 기초하여 및/또는 상기 대화 세션의 컨텍스트에 대응하는 이전 대화 세션의 이전 컨텍스트에 대해 이전에 생성된 하나 이상의 LLM 출력에 기초하여 LLM 모델을 사용하여 이전에 생성된 하나 이상의 LLM 출력을 식별하는 단계; 및 수정된 어시스턴트 출력 세트를 결정하기 위해 어시스턴트 출력 세트가 하나 이상의 LLM 출력으로 수정되게 하는 단계를 포함한다. 상기 구현예 중 일부 추가 버전에서, LLM 모델을 사용하여 이전에 생성된 하나 이상의 LLM 출력을 식별하는 단계는 복수의 이종 성격들 중 제1 성격을 반영하는 하나 이상의 LLM 출력 중 하나 이상의 제1 LLM 출력을 식별하는 단계를 포함할 수 있다. 상기 수정된 어시스턴트 출력 세트는 제1 성격을 반영하는 하나 이상의 제1 성격 어시스턴트 출력을 포함한다. 상기 구현예 중 일부 추가 버전에서, LLM 모델을 사용하여 이전에 생성된 하나 이상의 LLM 출력을 식별하는 단계는 복수의 이종 성격들 중 제2 성격을 반영하는 하나 이상의 LLM 출력 중 하나 이상의 제2 LLM 출력을 식별하는 단계를 포함한다. 수정된 어시스턴트 출력 세트는 제2 성격을 반영하는 하나 이상의 제2 성격 어시스턴트 출력을 포함할 수 있고, 그리고 제2 성격은 제1 성격과 상이할 수 있다. 이러한 구현예의 일부 추가적 또는 대안적 버전에서, 상기 방법은 상기 이전 대화 세션의 이전 어시스턴트 쿼리의 하나 이상의 용어에 대응하는 어시스턴트 쿼리 하나 이상의 용어를 포함하는 ASR 출력에 기초하여 상기 이전 대화 세션의 이전 어시스턴트 쿼리가 상기 대화 세션의 어시스턴트 쿼리에 대응한다고 결정하는 단계를 더 포함할 수 있다. 이러한 구현예의 일부 추가적 또는 대안적 버전에서, 상기 방법은 상기 어시스턴트 쿼리에 대응하는 ASR 출력의 하나 이상의 용어에 기초하여, 상기 어시스턴트 쿼리의 임베딩을 생성하는 단계; 및 상기 이전 대화 세션의 이전 어시스턴트 쿼리의 이전에 생성된 임베딩과 상기 어시스턴트 쿼리의 임베딩을 비교하는 것에 기초하여 상기 이전 대화 세션의 이전 어시스턴트 쿼리가 상기 대화 세션의 어시스턴트 쿼리에 대응한다고 결정하는 단계를 더 포함할 수 있다. 이러한 구현예의 일부 추가적 또는 대안적 버전에서, 상기 방법은 상기 이전 대화 세션의 하나 이상의 컨텍스트 신호에 대응하는 상기 대화 세션의 하나 이상의 컨텍스트 신호에 기초하여 상기 이전 대화 세션의 이전 컨텍스트가 상기 대화 세션의 컨텍스트에 대응한다고 결정하는 단계를 포함할 수 있다. 상기 구현예 중 일부 버전에서, 하나 이상의 컨텍스트 신호는 시간, 요일, 클라이언트 디바이스의 위치, 클라이언트 디바이스 환경의 주변 소음 중 하나 이상을 포함할 수 있다. 이러한 구현예의 일부 추가적 또는 대안적 버전에서, 상기 방법은 상기 대화 세션의 컨텍스트 신호에 기초하여, 상기 대화 세션의 컨텍스트의 임베딩을 생성하는 단계; 및 상기 이전 대화 세션의 이전 컨텍스트의 이전에 생성된 임베딩과 상기 하나 이상의 신호 컨텍스트 신호의 임베딩을 비교하는 것에 기초하여 상기 이전 대화 세션의 이전 컨텍스트가 상기 대화 세션의 컨텍스트에 대응한다고 결정하는 단계를 더 포함할 수 있다.In some versions of the above implementations, processing the assistant output set and the context of the conversation session to generate a modified assistant output set using one or more LLM outputs generated using the LLM includes: Based on one or more LLM outputs previously generated based on a previous assistant query of a corresponding previous conversation session and/or one or more LLM outputs previously generated for the previous context of a previous conversation session corresponding to the context of said conversation session identifying one or more LLM outputs previously generated using the LLM model based on; and allowing the assistant output set to be modified with one or more LLM outputs to determine a modified assistant output set. In some further versions of the above implementations, identifying one or more previously generated LLM outputs using the LLM model may comprise selecting one or more first LLM outputs of the one or more LLM outputs that reflect a first personality of the plurality of heterogeneous personalities. It may include the step of identifying. The set of modified assistant outputs includes one or more first personality assistant outputs that reflect the first personality. In some further versions of the above implementations, identifying one or more previously generated LLM outputs using the LLM model comprises: identifying one or more second LLM outputs of the one or more LLM outputs that reflect a second personality of the plurality of heterogeneous personalities; It includes the step of identifying. The modified assistant output set may include one or more second personality assistant outputs that reflect a second personality, and the second personality may be different from the first personality. In some additional or alternative versions of this implementation, the method further comprises: an assistant query corresponding to one or more terms in a previous assistant query of the previous conversation session; a previous assistant query in the previous conversation session based on an ASR output that includes one or more terms; may further include determining that corresponds to an assistant query of the conversation session. In some additional or alternative versions of this implementation, the method includes generating an embedding of the assistant query based on one or more terms in the ASR output corresponding to the assistant query; and determining that a previous assistant query of the previous conversation session corresponds to an assistant query of the conversation session based on comparing the embedding of the assistant query with a previously generated embedding of a previous assistant query of the previous conversation session. It can be included. In some additional or alternative versions of this implementation, the method may be configured to determine the context of the conversation session based on one or more context signals of the conversation session that correspond to the one or more context signals of the previous conversation session. It may include the step of determining that it corresponds to . In some versions of the above implementations, the one or more context signals may include one or more of the time, day of the week, location of the client device, and ambient noise in the client device environment. In some additional or alternative versions of this implementation, the method includes generating an embedding of the context of the conversation session based on a context signal of the conversation session; and determining that the previous context of the previous conversation session corresponds to the context of the conversation session based on comparing the embedding of the one or more signal context signals with a previously generated embedding of the previous context of the previous conversation session. It can be included.
상기 구현예 중 일부 버전에서, 상기 대화 세션의 컨텍스트의 적어도 일부 및 상기 어시스턴트 쿼리의 적어도 일부에 기초하여 상기 음성 발화와 관련된 추가 어시스턴트 쿼리를 생성하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하는 단계는 상기 NLU 출력에 기초하여, 상기 음성 발화에 포함된 상기 어시스턴트 쿼리와 연관된 의도를 결정하는 단계; 상기 음성 발화에 포함된 상기 어시스턴트 쿼리와 연관된 의도에 기초하여, 상기 음성 발화에 포함된 상기 어시스턴트 쿼리와 연관된 의도와 관련된 적어도 하나의 관련 의도를 식별하는 단계; 및 상기 적어도 하나의 관련 의도에 기초하여 상기 음성 발화와 관련된 추가 어시스턴트 쿼리를 생성하는 단계를 포함할 수 있다. 상기 구현예 중 일부 추가 버전에서, 상기 추가 어시스턴트 쿼리에 기초하여 상기 추가 어시스턴트 쿼리에 대한 응답인 추가 어시스턴트 출력을 결정하는 단계는 상기 추가 어시스턴트 쿼리에 대한 응답인 상기 추가 어시스턴트 출력을 생성하기 위해 애플리케이션 프로그래밍 인터페이스(API)를 통해 상기 추가 어시스턴트 쿼리가 하나 이상의 제1-파티 시스템에 전송되게 하는 단계를 포함할 수 있다. 상기 구현예 중 추가적 또는 대안적 버전에서, 상기 추가 어시스턴트 쿼리에 기초하여 상기 추가 어시스턴트 쿼리에 대한 응답인 추가 어시스턴트 출력을 결정하는 단계는 상기 추가 어시스턴트 쿼리가 하나 이상의 네트워크를 통해 하나 이상의 서드파티 시스템에 전송되게 하는 단계; 및 상기 추가 어시스턴트 쿼리가 상기 서드파티 시스템 중 하나 이상에 전송되는 것에 응답하여, 상기 추가 어시스턴트 쿼리에 대한 응답인 추가 어시스턴트 출력을 수신하는 단계를 포함할 수 있다. 상기 구현예 중 일부 추가적 또는 대안적 버전에서, 포함할 수 있다 LLM을 사용하여 결정된 하나 이상의 LLM 출력 또는 하나 이상의 추가 LLM 출력을 사용하여 수정된 추가 어시스턴트 출력 세트를 생성하기 위해 추가 어시스턴트 출력 및 대화 세션의 컨텍스트를 프로세싱하는 단계는 상기 LLM을 사용하여, 하나 이상의 추가 LLM 출력을 결정하기 위해 추가 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하는 단계; 및 하나 이상의 추가 LLM 출력에 기초하여 수정된 추가 어시스턴트 출력 세트를 결정하는 단계를 포함할 수 있다. 상기 구현예 중 일부 추가적 또는 대안적 버전에서, 포함할 수 있다 LLM을 사용하여 결정된 하나 이상의 LLM 출력 또는 하나 이상의 추가 LLM 출력을 사용하여 수정된 추가 어시스턴트 출력 세트를 생성하기 위해 추가 어시스턴트 출력 및 대화 세션의 컨텍스트를 프로세싱하는 단계는 상기 대화 세션의 추가 어시스턴트 쿼리에 대응하는 이전 대화 세션의 이전 어시스턴트 쿼리에 기초하여 이전에 생성된 하나 이상의 추가 LLM 출력에 기초하여 및/또는 상기 대화 세션의 컨텍스트에 대응하는 이전 대화 세션의 이전 컨텍스트에 대해 이전에 생성된 하나 이상의 추가 LLM 출력에 기초하여 LLM 모델을 사용하여 이전에 생성된 하나 이상의 추가 LLM 출력을 식별하는 단계; 및 수정된 추가 어시스턴트 출력 세트를 생성하기 위해 추가 어시스턴트 출력 세트가 하나 이상의 추가 LLM 출력으로 수정되게 하는 단계를 포함할 수 있다.In some versions of the above implementations, processing an assistant output set and a context of a conversational session to generate an additional assistant query related to the spoken utterance based on at least a portion of the context of the conversational session and at least a portion of the assistant query. determining, based on the NLU output, an intent associated with the assistant query included in the voice utterance; Based on the intent associated with the assistant query included in the voice utterance, identifying at least one related intent related to the intent associated with the assistant query included in the voice utterance; and generating an additional assistant query related to the voice utterance based on the at least one related intent. In some further versions of the above implementations, determining additional assistant output that is a response to the additional assistant query based on the additional assistant query comprises programming an application to generate the additional assistant output that is a response to the additional assistant query. and causing the additional assistant query to be transmitted to one or more first-party systems via an interface (API). In additional or alternative versions of the above implementations, determining additional assistant output that is a response to the additional assistant query based on the additional assistant query comprises: the additional assistant query being sent to one or more third-party systems over one or more networks; causing transmission; and in response to the additional assistant query being sent to one or more of the third-party systems, receiving additional assistant output in response to the additional assistant query. In some additional or alternative versions of the above implementations, it may include additional assistant output and conversation sessions to generate one or more LLM outputs determined using the LLM or a set of additional assistant outputs modified using one or more additional LLM outputs. Processing the context of may include, using the LLM, processing the context of the conversation session and a set of additional assistant outputs to determine one or more additional LLM outputs; and determining a set of modified additional assistant outputs based on the one or more additional LLM outputs. In some additional or alternative versions of the above implementations, it may include additional assistant output and conversation sessions to generate one or more LLM outputs determined using the LLM or a set of additional assistant outputs modified using one or more additional LLM outputs. Processing the context of may be based on one or more additional LLM outputs previously generated based on a previous assistant query of a previous conversation session corresponding to an additional assistant query of the conversation session and/or corresponding to a context of the conversation session. identifying one or more additional previously generated LLM outputs using the LLM model based on the one or more additional LLM outputs previously generated for a previous context of a previous conversation session; and causing the additional assistant output set to be modified with one or more additional LLM outputs to produce a modified additional assistant output set.
일부 구현예에서, 방법은 하나 이상의 순위 기준에 기초하여, 어시스턴트 출력의 슈퍼세트에 순위를 매기는 단계, 상기 어시스턴트 출력의 슈퍼세트는 적어도 상기 어시스턴트 출력 세트 및 상기 수정된 어시스턴트 출력 세트를 포함하며; 및 상기 순위에 기초하여, 상기 수정된 어시스턴트 출력 세트로부터 주어진 수정된 어시스턴트 출력을 선택하는 단계를 더 포함한다. 상기 구현예 중 일부 버전에서, 방법은 상기 하나 이상의 순위 기준에 기초하여, 추가 어시스턴트 출력의 슈퍼세트에 순위를 매기는 단계, 상기 어시스턴트 출력의 슈퍼세트는 적어도 상기 추가 어시스턴트 출력 세트 및 상기 수정된 추가 어시스턴트 출력 세트를 포함하며; 및 상기 순위에 기초하여, 상기 수정된 추가 어시스턴트 출력 세트로부터 주어진 수정된 추가 어시스턴트 출력을 선택하는 단계를 더 포함한다. 상기 구현예 중 일부 추가 버전에서, 상기 주어진 수정된 어시스턴트 출력 및 상기 주어진 수정된 추가 어시스턴트 출력이 상기 사용자에게 제시하기 위해 제공되게 하는 단계는 상기 주어진 수정된 어시스턴트 출력과 상기 주어진 수정된 추가 어시스턴트 출력을 결합하는 단계; 텍스트-투-스피치(TTS) 모델을 사용하여, 상기 주어진 수정된 어시스턴트 출력 및 상기 주어진 수정된 추가 어시스턴트 출력을 캡처하는 합성 스피치를 포함하는 합성 스피치 오디오 데이터를 생성하기 위해 상기 주어진 수정된 어시스턴트 출력 및 상기 주어진 수정된 추가 어시스턴트 출력을 프로세싱하는 단계; 및 상기 클라이언트 디바이스의 스피커를 통해 상기 사용자에게 제시하기 위해 상기 합성된 스피치 오디오 데이터가 청각적으로 렌더링되게 하는 단계를 포함할 수 있다.In some implementations, the method includes ranking a superset of assistant outputs based on one or more ranking criteria, the superset of assistant outputs comprising at least the assistant output set and the modified assistant output set; and based on the ranking, selecting a given modified assistant output from the set of modified assistant outputs. In some versions of the above implementations, the method further comprises ranking a superset of additional assistant outputs based on the one or more ranking criteria, wherein the superset of assistant outputs is at least the set of additional assistant outputs and the modified additional set. Contains an assistant output set; and based on the ranking, selecting a given modified additional assistant output from the set of modified additional assistant outputs. In some further versions of the above implementations, causing the given modified assistant output and the given modified assistant output to be provided for presentation to the user comprises: providing the given modified assistant output and the given modified additional assistant output. combining; Using a text-to-speech (TTS) model, to generate synthesized speech audio data comprising synthesized speech that captures the given modified assistant output and the given modified assistant output and the given modified assistant output and processing the given modified additional assistant output; and causing the synthesized speech audio data to be audibly rendered for presentation to the user through a speaker of the client device.
일부 구현예에서, 방법은 하나 이상의 순위 기준에 기초하여, 어시스턴트 출력의 슈퍼세트에 순위를 매기는 단계, 상기 어시스턴트 출력의 슈퍼세트는 상기 어시스턴트 출력 세트, 상기 수정된 어시스턴트 출력 세트, 상기 추가 어시스턴트 출력 및 상기 수정된 추가 어시스턴트 출력 세트를 포함하며; 및 상기 순위에 기초하여, 상기 수정된 어시스턴트 출력 세트로부터 주어진 수정된 어시스턴트 출력 및 상기 수정된 추가 어시스턴트 출력 세트로부터 주어진 수정된 추가 어시스턴트 출력을 선택하는 단계를 더 포함할 수 있다. 상기 구현예 중 일부 추가 버전에서, 상기 주어진 수정된 어시스턴트 출력 및 상기 주어진 수정된 추가 어시스턴트 출력이 상기 사용자에게 제시하기 위해 제공되게 하는 단계는 텍스트-투-스피치(TTS) 모델을 사용하여, 상기 주어진 수정된 어시스턴트 출력 및 상기 주어진 수정된 추가 어시스턴트 출력을 캡처하는 합성 스피치를 포함하는 합성 스피치 오디오 데이터를 생성하기 위해 상기 주어진 수정된 어시스턴트 출력 및 상기 주어진 수정된 추가 어시스턴트 출력을 프로세싱하는 단계; 및 상기 클라이언트 디바이스의 스피커를 통해 상기 사용자에게 제시하기 위해 상기 합성된 스피치 오디오 데이터가 청각적으로 렌더링되게 하는 단계를 포함할 수 있다.In some implementations, the method includes ranking a superset of assistant outputs based on one or more ranking criteria, wherein the superset of assistant outputs includes the assistant output set, the modified assistant output set, and the additional assistant output. and a set of additional assistant outputs as modified above; and, based on the ranking, selecting a given modified assistant output from the modified assistant output set and a given modified additional assistant output from the modified additional assistant output set. In some further versions of the above implementations, causing the given modified assistant output and the given modified additional assistant output to be provided for presentation to the user uses a text-to-speech (TTS) model to include the given modified assistant output: processing the given modified assistant output and the given modified assistant output to generate synthesized speech audio data comprising synthesized speech that captures the modified assistant output and the given modified additional assistant output; and causing the synthesized speech audio data to be audibly rendered for presentation to the user through a speaker of the client device.
일부 구현예에서, 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하는 단계는 상기 음성 발화에 포함된 어시스턴트 쿼리의 적어도 일부를 프로세싱하는 것에 더 기초할 수 있다.In some implementations, generating a set of modified assistant outputs using one or more LLM outputs may be further based on processing at least a portion of an assistant query included in the speech utterance.
일부 구현예에서, 하나 이상의 프로세서들에 의해 구현되는 방법이 제공되고, 상기 방법은 클라이언트 디바이스 사용자와 클라이언트 디바이스에 의해 구현된 자동화된 어시스턴트 간의 대화 세션의 일부로서: 상기 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하는 단계, 상기 오디오 데이터 스트림은 상기 클라이언트 디바이스의 하나 이상의 마이크에서 생성되고, 상기 음성 발화는 어시스턴트 쿼리를 포함하며; 상기 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 출력 세트를 결정하는 단계, 상기 어시스턴트 출력 세트의 각 어시스턴트 출력은 상기 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답이며; 상기 어시스턴트 출력 세트와 상기 대화 세션의 컨텍스트를 프로세싱하는 단계, 상기 프로세싱하는 단계는: 대형 언어 모델(LLM, large language model)을 사용하여 생성된 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하고, 상기 하나 이상의 LLM 출력 각각은 상기 대화 세션의 컨텍스트의 적어도 일부와 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 기초하여 결정되며, 그리고 상기 대화 세션의 컨텍스트의 적어도 일부 및 상기 어시스턴트 쿼리의 적어도 일부에 기초하여 상기 음성 발화와 관련된 추가 어시스턴트 쿼리를 생성하며; 상기 추가 어시스턴트 쿼리에 기초하여, 상기 추가 어시스턴트 쿼리에 대한 응답인 추가 어시스턴트 출력을 결정하는 단계; 상기 추가 어시스턴트 쿼리에 대한 응답인 추가 어시스턴트 출력에 기초하여, 상기 수정된 추가 어시스턴트 출력 세트를 생성하기 위해 수정된 어시스턴트 출력 세트를 프로세싱하는 단계; 및 상기 수정된 추가 어시스턴트 출력 세트 중에서 주어진 수정된 추가 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 하는 단계를 포함한다.In some implementations, a method implemented by one or more processors is provided, wherein as part of a conversational session between a client device user and an automated assistant implemented by the client device, the method includes: audio capturing a vocal utterance of the user; Receiving a data stream, the audio data stream generated at one or more microphones of the client device, the voice utterance comprising an assistant query; Based on the audio data stream processing, determining a set of assistant outputs, each assistant output of the set of assistant outputs being a response to an assistant query included in the voice utterance; Processing the assistant output set and the context of the conversation session, the processing comprising: generating a modified assistant output set using one or more LLM outputs generated using a large language model (LLM); and each of the one or more LLM outputs is determined based on at least a portion of the context of the conversation session and one or more assistant outputs included in the assistant output set, and at least a portion of the context of the conversation session and at least the assistant query. generate additional assistant queries related to the speech utterance based in part on the portion; Based on the additional assistant query, determining additional assistant output that is a response to the additional assistant query; based on the additional assistant output in response to the additional assistant query, processing the modified set of additional assistant output to generate the modified additional assistant output set; and causing a given modified additional assistant output from among the set of modified additional assistant outputs to be provided for presentation to a user.
일부 구현예에서, 하나 이상의 프로세서들에 의해 구현되는 방법이 제공되고, 상기 방법은 클라이언트 디바이스 사용자와 클라이언트 디바이스에 의해 구현된 자동화된 어시스턴트 간의 대화 세션의 일부로서: 상기 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하는 단계, 상기 오디오 데이터 스트림은 상기 클라이언트 디바이스의 하나 이상의 마이크에서 생성되고, 상기 음성 발화는 어시스턴트 쿼리를 포함하며; 상기 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 출력 세트를 결정하는 단계, 상기 어시스턴트 출력 세트의 각 어시스턴트 출력은 상기 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답이며; 및 대형 언어 모델(LLM, large language model)을 사용하여 생성된 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하기 위해 상기 어시스턴트 출력 세트와 상기 대화 세션의 컨텍스트를 프로세싱하는 단계를 포함하고, 상기 하나 이상의 LLM 출력 각각은 상기 대화 세션의 컨텍스트의 적어도 일부와 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 기초하여 결정된다. 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하는 단계는 (i) 상기 어시스턴트 출력 세트, (ii) 상기 대화 세션의 컨텍스트 및 (iii) 복수의 이종 성격들 중 제1 성격을 반영하는 상기 하나 이상의 LLM 출력 중 하나 이상의 제1 LLM 출력에 기초하여, 제1 성격 응답 세트를 생성하는 것을 포함한다. 방법은 상기 수정된 어시스턴트 출력 세트 중에서 주어진 수정된 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 하는 단계를 포함한다.In some implementations, a method implemented by one or more processors is provided, the method comprising: as part of a conversational session between a client device user and an automated assistant implemented by the client device: audio that captures a vocal utterance of the user; Receiving a data stream, the audio data stream generated at one or more microphones of the client device, the voice utterance comprising an assistant query; Based on the audio data stream processing, determining a set of assistant outputs, each assistant output of the set of assistant outputs being a response to an assistant query included in the voice utterance; and processing the assistant output set and the context of the conversation session to produce a modified assistant output set using one or more LLM outputs generated using a large language model (LLM), Each of the one or more LLM outputs is determined based on at least a portion of the context of the conversation session and one or more assistant outputs included in the assistant output set. Generating a modified assistant output set using one or more LLM outputs includes (i) the assistant output set, (ii) the context of the conversation session, and (iii) the first of the plurality of heterogeneous personalities. and generating a first personality response set based on the first LLM output of the one or more of the one or more LLM outputs. The method includes causing a given modified assistant output from among the set of modified assistant outputs to be provided for presentation to a user.
일부 구현예에서 하나 이상의 프로세서들에 의해 구현되는 방법이 제공되고, 상기 방법은 클라이언트 디바이스 사용자와 클라이언트 디바이스에 의해 구현된 자동화된 어시스턴트 간의 대화 세션의 일부로서: 상기 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하는 단계, 상기 오디오 데이터 스트림은 상기 클라이언트 디바이스의 하나 이상의 마이크에서 생성되고, 상기 음성 발화는 어시스턴트 쿼리를 포함하며; 상기 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 출력 세트를 결정하는 단계, 상기 어시스턴트 출력 세트의 각 어시스턴트 출력은 상기 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답이며; 대형 언어 모델(LLM, large language model)을 사용하여 생성된 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하기 위해 상기 어시스턴트 출력 세트와 상기 대화 세션의 컨텍스트를 프로세싱하는 단계, 상기 하나 이상의 LLM 출력 각각은 상기 대화 세션의 컨텍스트의 적어도 일부와 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 기초하여 결정되며; 및 상기 수정된 어시스턴트 출력 세트 중에서 주어진 수정된 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 하는 단계를 포함한다.In some implementations, a method implemented by one or more processors is provided, wherein as part of a conversational session between a client device user and an automated assistant implemented by the client device, the method comprises: audio data capturing a vocal utterance of the user; Receiving a stream, the audio data stream generated at one or more microphones of the client device, the voice utterance comprising an assistant query; Based on the audio data stream processing, determining a set of assistant outputs, each assistant output of the set of assistant outputs being a response to an assistant query included in the voice utterance; processing the assistant output set and the context of the conversation session to generate a modified assistant output set using one or more LLM outputs generated using a large language model (LLM), the one or more LLMs Each output is determined based on at least a portion of the context of the conversation session and one or more assistant outputs included in the assistant output set; and causing a given modified assistant output from among the set of modified assistant outputs to be provided for presentation to a user.
일부 구현예에서, 하나 이상의 프로세서들에 의해 구현되는 방법이 제공되고, 상기 방법은 클라이언트 디바이스 사용자와 클라이언트 디바이스에 의해 구현된 자동화된 어시스턴트 간의 대화 세션의 일부로서: 상기 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하는 단계, 상기 오디오 데이터 스트림은 상기 클라이언트 디바이스의 하나 이상의 마이크에서 생성되고, 상기 음성 발화는 어시스턴트 쿼리를 포함하며; 상기 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 출력 세트를 결정하는 단계, 상기 어시스턴트 출력 세트의 각 어시스턴트 출력은 상기 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답이며; 상기 음성 발화의 프로세싱에 기초하여, 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 수정할지 여부를 결정하는 단계; 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 수정하기로 결정하는 것에 응답하여: 대형 언어 모델(LLM, large language model)을 사용하여 생성된 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하기 위해 상기 어시스턴트 출력 세트와 상기 대화 세션의 컨텍스트를 프로세싱하는 단계, 상기 하나 이상의 LLM 출력 각각은 상기 대화 세션의 컨텍스트의 적어도 일부와 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 기초하여 결정되며; 및 상기 수정된 어시스턴트 출력 세트 중에서 주어진 수정된 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 하는 단계를 포함한다.In some implementations, a method implemented by one or more processors is provided, wherein as part of a conversational session between a client device user and an automated assistant implemented by the client device, the method includes: audio capturing a vocal utterance of the user; Receiving a data stream, the audio data stream generated at one or more microphones of the client device, the voice utterance comprising an assistant query; Based on the audio data stream processing, determining a set of assistant outputs, each assistant output of the set of assistant outputs being a response to an assistant query included in the voice utterance; based on the processing of the voice utterance, determining whether to modify one or more assistant outputs included in the assistant output set; In response to determining to modify one or more assistant outputs included in the assistant output set: generate a modified assistant output set using one or more LLM outputs generated using a large language model (LLM) processing the assistant output set and the context of the conversational session, each of the one or more LLM outputs being determined based on at least a portion of the context of the conversational session and one or more assistant outputs included in the assistant output set; and causing a given modified assistant output from among the set of modified assistant outputs to be provided for presentation to a user.
본 명세서에서 개시된 기술의 이들 또는 다른 구현예들은 다음 구성들 중 하나 이상을 각각 선택적으로 포함할 수 있다. These or other implementations of the technology disclosed herein may each optionally include one or more of the following configurations.
일부 구현예에서, 상기 음성 발화의 프로세싱에 기초하여, 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 수정할지 여부를 결정하는 단계는 ASR(automatic speech recognition) 모델을 사용하여, ASR 출력 스트림을 생성하기 위해 오디오 데이터 스트림을 프로세싱하는 단계; NLU(natural language understanding) 모델을 사용하여, NLU 데이터 스트림을 생성하기 위해 ASR 출력 스트림을 프로세싱하는 단계; 상기 NLU 데이터 스트림에 기초하여, 음성 발화를 제공하는 사용자의 의도를 식별하는 단계; 및 상기 음성 발화를 제공하는 사용자의 의도에 기초하여 어시스턴트 출력을 수정할지 여부를 결정하는 단계를 포함한다.In some implementations, based on the processing of the speech utterance, determining whether to modify one or more assistant outputs included in the assistant output set includes using an automatic speech recognition (ASR) model to generate an ASR output stream. processing the audio data stream to do so; Processing the ASR output stream using a natural language understanding (NLU) model to generate an NLU data stream; Based on the NLU data stream, identifying a user's intention to provide a voice utterance; and determining whether to modify assistant output based on the intention of the user providing the voice utterance.
일부 구현예에서, 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 수정할지 여부를 결정하는 단계는 하나 이상의 어시스턴트 출력을 수정하는 것과 연관된 하나 이상의 계산 비용에 더 기초할 수 있다. 상기 구현예 중 일부 버전에서, 하나 이상의 어시스턴트 출력을 수정하는 것과 연관된 하나 이상의 계산 비용은 배터리 소비, 하나 이상의 어시스턴트 출력을 수정하는 것과 연관된 프로세서 소비 또는 하나 이상의 어시스턴트 출력을 수정하는 것과 연관된 레이턴시 중 하나 이상을 포함할 수 있다. In some implementations, determining whether to modify one or more assistant outputs included in the set of assistant outputs may be further based on one or more computational costs associated with modifying one or more assistant outputs. In some versions of the above implementations, the one or more computational costs associated with modifying one or more assistant outputs include one or more of battery consumption, processor consumption associated with modifying one or more assistant outputs, or latency associated with modifying one or more assistant outputs. may include.
일부 구현예에서, 하나 이상의 프로세서들에 의해 구현되는 방법이 제공되고, 상기 방법은 자동화된 어시스턴트로 향하는 복수의 어시스턴트 쿼리들 및 복수의 어시스턴트 쿼리들 각각에 대한 대응하는 이전 대화 세션의 대응하는 컨텍스트를 획득하는 단계; 상기 복수의 어시스턴트 쿼리들 각각에 대해: 하나 이상의 대형 언어 모델(LLM)을 사용하여, 상기 주어진 어시스턴트 쿼리에 대한 응답인 대응하는 LLM 출력을 생성하기 위해 상기 복수의 어시스턴트 쿼리들 중 주어진 어시스턴트 쿼리를 프로세싱하는 단계; 및 상기 주어진 어시스턴트 쿼리 및/또는 상기 주어진 어시스턴트 쿼리에 대한 대응하는 이전 대화 세션의 대응하는 컨텍스트에 기초하여 클라이언트 디바이스에서 액세스할 수 있는 메모리에서 대응하는 LLM 출력을 인덱싱하는 단계; 및 상기 클라이언트 디바이스에서 액세스할 수 있는 메모리에서 대응하는 LLM 출력을 인덱싱한 후, 클라이언트 디바이스 사용자와 상기 클라이언트 디바이스에 의해 구현되는 자동화된 어시스턴트 간의 현재 대화 세션의 일부로서: 상기 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하는 단계, 상기 오디오 데이터 스트림은 상기 클라이언트 디바이스의 하나 이상의 마이크에서 생성되며; 상기 오디오 데이터 스트림을 프로세싱하는 것에 기초하여, 상기 음성 발화가 주어진 어시스턴트 쿼리에 대응하는 현재 어시스턴트 쿼리를 포함하고 및/또는 상기 음성 발화가 주어진 어시스턴트 쿼리에 대한 대응하는 이전 대화 세션의 대응하는 컨텍스트에 대응하는 현재 대화 세션의 현재 컨텍스트에서 수신되었다고 결정하는 단계; 및 상기 자동화된 어시스턴트가 상기 음성 발화에 응답하여 사용자에게 제시하기 위해 제공될 어시스턴트 출력을 생성할 때 대응하는 LLM 출력을 활용하게 하는 단계를 포함한다.In some implementations, a method implemented by one or more processors is provided, the method comprising: a plurality of assistant queries directed to an automated assistant and a corresponding context of a corresponding previous conversation session for each of the plurality of assistant queries. acquiring; For each of the plurality of assistant queries: Using one or more large language models (LLMs), process a given assistant query of the plurality of assistant queries to generate a corresponding LLM output that is a response to the given assistant query. steps; and indexing the corresponding LLM output in a memory accessible at the client device based on the given assistant query and/or the corresponding context of the corresponding previous conversation session for the given assistant query; and after indexing the corresponding LLM output in a memory accessible at the client device, as part of a current conversational session between a client device user and an automated assistant implemented by the client device: capturing the user's vocal utterance. Receiving an audio data stream, the audio data stream generated by one or more microphones of the client device; Based on processing the audio data stream, the spoken utterance includes a current assistant query corresponding to the given assistant query and/or the spoken utterance corresponds to a corresponding context of a corresponding previous conversation session for the given assistant query. determining that the message has been received in the current context of a current conversation session; and causing the automated assistant to utilize the corresponding LLM output in generating assistant output to be provided for presentation to the user in response to the voice utterance.
본 명세서에서 개시된 기술의 이들 또는 다른 구현예들은 다음 구성들 중 하나 이상을 각각 선택적으로 포함할 수 있다. These or other implementations of the technology disclosed herein may each optionally include one or more of the following configurations.
일부 구현예에서, 상기 자동화된 어시스턴트로 향하는 상기 복수의 어시스턴트 쿼리들은 상기 클라이언트 디바이스를 통해 사용자에 의해 이전에 제출되었다. 일부 구현예에서, 상기 자동화된 어시스턴트로 향하는 상기 복수의 어시스턴트 쿼리들은 각각의 클라이언트 디바이스를 통해 상기 클라이언트 디바이스의 사용자에 더하여 복수의 추가 사용자들에 의해 이전에 제출되었다.In some implementations, the plurality of assistant queries directed to the automated assistant were previously submitted by a user via the client device. In some implementations, the plurality of assistant queries directed to the automated assistant were previously submitted through a respective client device by a plurality of additional users in addition to the user of the client device.
일부 구현예에서, 상기 클라이언트 디바이스에서 액세스 가능한 메모리에서 대응하는 LLM 출력을 인덱싱하는 단계는 상기 주어진 어시스턴트 쿼리를 프로세싱할 때 생성된 주어진 어시스턴트 쿼리의 임베딩에 기초할 수 있다. 일부 구현예에서, 상기 클라이언트 디바이스에서 액세스 가능한 메모리에서 대응하는 LLM 출력을 인덱싱하는 단계는 상기 주어진 어시스턴트 쿼리를 프로세싱할 때 생성된 주어진 어시스턴트 쿼리에 포함된 하나 이상의 용어 또는 문구에 기초할 수 있다. 일부 구현예에서, 상기 클라이언트 디바이스에서 액세스 가능한 메모리에서 대응하는 LLM 출력을 인덱싱하는 단계는 상기 주어진 어시스턴트 쿼리에 대한 대응하는 이전 대화 세션의 대응하는 컨텍스트의 임베딩에 기초할 수 있다. 일부 구현예에서, 상기 클라이언트 디바이스에서 액세스 가능한 메모리에서 대응하는 LLM 출력을 인덱싱하는 단계는 상기 주어진 어시스턴트 쿼리에 대한 대응하는 이전 대화 세션의 대응하는 컨텍스트에 포함된 하나 이상의 컨텍스트 신호에 기초할 수 있다. In some implementations, indexing the corresponding LLM output in memory accessible at the client device may be based on an embedding of the given assistant query generated when processing the given assistant query. In some implementations, indexing the corresponding LLM output in memory accessible at the client device may be based on one or more terms or phrases included in a given assistant query generated when processing the given assistant query. In some implementations, indexing the corresponding LLM output in memory accessible at the client device may be based on an embedding of a corresponding context of a corresponding previous conversation session for the given assistant query. In some implementations, indexing the corresponding LLM output in memory accessible at the client device may be based on one or more context signals included in the corresponding context of a corresponding previous conversation session for the given assistant query.
추가로, 일부 구현예들은 하나 이상의 컴퓨팅 디바이스들의 하나 이상의 프로세서들(예를 들어, 중앙 프로세싱 유닛(들)(CPU(들)), 그래픽 프로세싱 유닛(들)(GPU(들)) 및/또는 텐서 프로세싱 유닛(들)(TPU(들)))을 포함하며, 상기 하나 이상의 프로세서들은 연관된 메모리에 저장된 명령어들을 실행하도록 동작가능하며, 상기 명령어들은 전술된 임의의 방법들을 수행하게 하도록 구성된다. 또한, 일부 구현예들은 앞서 언급된 방법들 중 임의의 것을 수행하도록 하나 이상의 프로세서들에 의해 실행가능한 컴퓨터 명령어들을 저장하는 하나 이상의 비일시적 컴퓨터 판독가능 저장 매체를 포함한다. 또한, 일부 구현예들은 앞서 언급된 방법들 중 임의의 것을 수행하도록 하나 이상의 프로세서들에 의해 실행가능한 컴퓨터 명령어들을 저장하는 하나 이상의 비일시적 컴퓨터 판독가능 저장 매체를 포함한다.Additionally, some implementations may utilize one or more processors (e.g., central processing unit(s) (CPU(s)), graphics processing unit(s) (GPU(s)), and/or tensor processors of one or more computing devices. Processing unit(s) (TPU(s)), wherein the one or more processors are operable to execute instructions stored in an associated memory, the instructions configured to perform any of the methods described above. Additionally, some implementations include one or more non-transitory computer-readable storage media storing computer instructions executable by one or more processors to perform any of the aforementioned methods. Additionally, some implementations include one or more non-transitory computer-readable storage media storing computer instructions executable by one or more processors to perform any of the aforementioned methods.
Claims (42)
클라이언트 디바이스 사용자와 클라이언트 디바이스에 의해 구현된 자동화된 어시스턴트 간의 대화 세션의 일부로서:
상기 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하는 단계, 상기 오디오 데이터 스트림은 상기 클라이언트 디바이스의 하나 이상의 마이크에서 생성되고, 상기 음성 발화는 어시스턴트 쿼리를 포함하며;
상기 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 출력 세트를 결정하는 단계, 상기 어시스턴트 출력 세트의 각 어시스턴트 출력은 상기 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답이며;
상기 어시스턴트 출력 세트와 상기 대화 세션의 컨텍스트를 프로세싱하는 단계, 상기 프로세싱하는 단계는:
대형 언어 모델(LLM, large language model)을 사용하여 생성된 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하고, 상기 하나 이상의 LLM 출력 각각은 상기 대화 세션의 컨텍스트의 적어도 일부와 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 기초하여 결정되며, 그리고
상기 대화 세션의 컨텍스트의 적어도 일부 및 상기 어시스턴트 쿼리의 적어도 일부에 기초하여 상기 음성 발화와 관련된 추가 어시스턴트 쿼리를 생성하며;
상기 추가 어시스턴트 쿼리에 기초하여, 상기 추가 어시스턴트 쿼리에 대한 응답인 추가 어시스턴트 출력을 결정하는 단계;
상기 LLM을 사용하여 생성된 하나 이상의 LLM 출력 또는 하나 이상의 추가 LLM 출력을 사용하여 수정된 추가 어시스턴트 출력 세트를 생성하기 위해 추가 어시스턴트 출력 및 대화 세션의 컨텍스트를 프로세싱하는 단계, 상기 추가 LLM 출력 각각은 상기 대화 세션의 컨텍스트 및 상기 추가 어시스턴트 출력의 적어도 일부에 기초하여 결정되며; 및
상기 수정된 어시스턴트 출력 세트로부터 주어진 수정된 어시스턴트 출력과 수정된 추가 어시스턴트 출력 세트로부터 주어진 수정된 추가 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 하는 단계를 포함하는, 방법.A method performed by one or more processors, comprising:
As part of a conversational session between a client device user and an automated assistant implemented by the client device:
Receiving an audio data stream capturing a vocal utterance of the user, the audio data stream generated in one or more microphones of the client device, the vocal utterance comprising an assistant query;
Based on the audio data stream processing, determining a set of assistant outputs, each assistant output of the set of assistant outputs being a response to an assistant query included in the voice utterance;
Processing the assistant output set and the context of the conversation session, the processing comprising:
Generating a set of modified assistant outputs using one or more LLM outputs generated using a large language model (LLM), each of the one or more LLM outputs comprising at least a portion of the context of the conversation session and the assistant output is determined based on the output of one or more assistants included in the set, and
generate an additional assistant query related to the spoken utterance based on at least a portion of the context of the conversation session and at least a portion of the assistant query;
Based on the additional assistant query, determining additional assistant output that is a response to the additional assistant query;
Processing the additional assistant output and the context of the conversation session to generate a set of additional assistant outputs that are one or more LLM outputs generated using the LLM or modified using one or more additional LLM outputs, each of the additional LLM outputs being determined based on the context of the conversation session and at least part of the additional assistant output; and
causing modified assistant output given from the modified assistant output set and modified additional assistant output given from the modified additional assistant output set to be provided for presentation to a user.
ASR(automatic speech recognition) 모델을 사용하여, ASR 출력 스트림을 생성하기 위해 오디오 데이터 스트림을 프로세싱하는 단계;
NLU(natural language understanding) 모델을 사용하여, NLU 데이터 스트림을 생성하기 위해 ASR 출력 스트림을 프로세싱하는 단계; 및
NLU 스트림에 기초하여 어시스턴트 출력 세트가 결정되게 하는 단계를 포함하는, 방법.The method of claim 1, based on the audio data stream processing, determining an assistant output set that is a response to an assistant query included in the voice utterance:
Processing the audio data stream, using an automatic speech recognition (ASR) model, to produce an ASR output stream;
Processing the ASR output stream using a natural language understanding (NLU) model to generate an NLU data stream; and
A method comprising causing an assistant output set to be determined based on the NLU stream.
상기 LLM을 사용하여, 하나 이상의 LLM 출력을 생성하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하는 단계; 및
하나 이상의 LLM 출력에 기초하여 수정된 어시스턴트 출력 세트를 결정하는 단계를 포함하는, 방법.The method of claim 2, wherein processing an assistant output set and a context of a conversation session to generate a modified assistant output set using one or more LLM outputs generated using the LLM comprises:
Using the LLM, processing a set of assistant outputs and the context of the conversation session to generate one or more LLM outputs; and
A method comprising determining a set of modified assistant outputs based on one or more LLM outputs.
복수의 이종 LLM 파라미터 세트들 중 제1 LLM 파라미터 세트를 사용하여 복수의 이종 성격들 중 제1 성격을 갖는 하나 이상의 LLM 출력을 결정하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하는 단계를 포함하며,
상기 수정된 어시스턴트 출력 세트는 제1 성격을 반영하는 하나 이상의 제1 성격 어시스턴트 출력을 포함하는, 방법.The method of claim 3, wherein using the LLM to process an assistant output set and the context of a conversation session to generate one or more LLM outputs comprises:
Processing the assistant output set and the context of the conversation session to determine one or more LLM outputs having a first one of the plurality of heterogeneous personalities using a first LLM parameter set of the plurality of heterogeneous LLM parameter sets; ,
The method of claim 1, wherein the set of modified assistant outputs includes one or more first personality assistant outputs that reflect a first personality.
복수의 이종 LLM 파라미터 세트들 중 제2 LLM 파라미터 세트를 사용하여 복수의 이종 성격들 중 제2 성격을 갖는 하나 이상의 LLM 출력을 결정하기 위해 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하는 단계를 포함하며,
수정된 어시스턴트 출력 세트는 제2 성격을 반영하는 하나 이상의 제2 성격 어시스턴트 출력을 포함하고, 그리고
상기 제2 성격은 상기 제1 성격과 상이한 것인, 방법.5. The method of claim 4, wherein using the LLM to process an assistant output set and the context of a conversation session to generate one or more LLM outputs comprises:
Processing the assistant output set and the context of the conversation session to determine one or more LLM outputs having a second personality of the plurality of heterogeneous personalities using a second LLM parameter set of the plurality of heterogeneous LLM parameter sets; ,
The modified assistant output set includes one or more second personality assistant outputs that reflect the second personality, and
The method wherein the second personality is different from the first personality.
상기 대화 세션의 어시스턴트 쿼리에 대응하는 이전 대화 세션의 이전 어시스턴트 쿼리에 기초하여 이전에 생성된 하나 이상의 LLM 출력에 기초하여 및/또는 상기 대화 세션의 컨텍스트에 대응하는 이전 대화 세션의 이전 컨텍스트에 대해 이전에 생성된 하나 이상의 LLM 출력에 기초하여 LLM 모델을 사용하여 이전에 생성된 하나 이상의 LLM 출력을 식별하는 단계; 및
수정된 어시스턴트 출력 세트를 결정하기 위해 어시스턴트 출력 세트가 하나 이상의 LLM 출력으로 수정되게 하는 단계를 포함하는, 방법.The method of any one of claims 2-7, wherein processing an assistant output set and a context of a conversation session to generate a modified assistant output set using one or more LLM outputs generated using the LLM comprises:
Based on one or more LLM outputs previously generated based on a previous assistant query in a previous conversation session corresponding to an assistant query in the conversation session and/or with respect to a previous context in a previous conversation session corresponding to the context of the conversation session identifying one or more LLM outputs previously generated using the LLM model based on the one or more LLM outputs generated in ; and
A method comprising allowing a set of assistant outputs to be modified with one or more LLM outputs to determine a set of modified assistant outputs.
복수의 이종 성격들 중 제1 성격을 반영하는 하나 이상의 LLM 출력 중 하나 이상의 제1 LLM 출력을 식별하는 단계를 포함하며,
상기 수정된 어시스턴트 출력 세트는 제1 성격을 반영하는 하나 이상의 제1 성격 어시스턴트 출력을 포함하는, 방법.The method of claim 8, wherein identifying one or more LLM outputs previously generated using the LLM model comprises:
identifying one or more first LLM outputs among the one or more LLM outputs that reflect a first personality among the plurality of heterogeneous personalities;
The method of claim 1, wherein the set of modified assistant outputs includes one or more first personality assistant outputs that reflect a first personality.
복수의 이종 성격들 중 제2 성격을 반영하는 하나 이상의 LLM 출력 중 하나 이상의 제2 LLM 출력을 식별하는 단계를 포함하며,
수정된 어시스턴트 출력 세트는 제2 성격을 반영하는 하나 이상의 제2 성격 어시스턴트 출력을 포함하고, 그리고
상기 제2 성격은 상기 제1 성격과 상이한 것인, 방법.The method of claim 9, wherein identifying one or more LLM outputs previously generated using the LLM model comprises:
identifying one or more second LLM outputs among the one or more LLM outputs that reflect a second personality among the plurality of heterogeneous personalities;
The modified assistant output set includes one or more second personality assistant outputs that reflect the second personality, and
The method wherein the second personality is different from the first personality.
상기 이전 대화 세션의 이전 어시스턴트 쿼리의 하나 이상의 용어에 대응하는 어시스턴트 쿼리 하나 이상의 용어를 포함하는 ASR 출력에 기초하여 상기 이전 대화 세션의 이전 어시스턴트 쿼리가 상기 대화 세션의 어시스턴트 쿼리에 대응한다고 결정하는 단계를 더 포함하는, 방법.The method of any one of claims 8 to 10,
determining that a previous assistant query of the previous conversation session corresponds to an assistant query of the conversation session based on the ASR output comprising one or more terms of the assistant query corresponding to one or more terms of the previous assistant query of the previous conversation session. More inclusive methods.
상기 어시스턴트 쿼리에 대응하는 ASR 출력의 하나 이상의 용어에 기초하여, 상기 어시스턴트 쿼리의 임베딩을 생성하는 단계; 및
상기 이전 대화 세션의 이전 어시스턴트 쿼리의 이전에 생성된 임베딩과 상기 어시스턴트 쿼리의 임베딩을 비교하는 것에 기초하여 상기 이전 대화 세션의 이전 어시스턴트 쿼리가 상기 대화 세션의 어시스턴트 쿼리에 대응한다고 결정하는 단계를 더 포함하는, 방법.The method of any one of claims 8 to 11,
generating an embedding of the assistant query based on one or more terms in the ASR output corresponding to the assistant query; and
further comprising determining that a previous assistant query of the previous conversation session corresponds to an assistant query of the conversation session based on comparing the embedding of the assistant query with a previously generated embedding of a previous assistant query of the previous conversation session. How to.
상기 이전 대화 세션의 하나 이상의 컨텍스트 신호에 대응하는 상기 대화 세션의 하나 이상의 컨텍스트 신호에 기초하여 상기 이전 대화 세션의 이전 컨텍스트가 상기 대화 세션의 컨텍스트에 대응한다고 결정하는 단계를 포함하는, 방법.The method of any one of claims 8 to 12,
Determining that a previous context of the previous conversation session corresponds to a context of the conversation session based on one or more context signals of the conversation session that correspond to the one or more context signals of the previous conversation session.
상기 대화 세션의 컨텍스트 신호에 기초하여, 상기 대화 세션의 컨텍스트의 임베딩을 생성하는 단계; 및
상기 이전 대화 세션의 이전 컨텍스트의 이전에 생성된 임베딩과 상기 하나 이상의 신호 컨텍스트 신호의 임베딩을 비교하는 것에 기초하여 상기 이전 대화 세션의 이전 컨텍스트가 상기 대화 세션의 컨텍스트에 대응한다고 결정하는 단계를 더 포함하는, 방법.The method of any one of claims 8 to 14,
generating an embedding of the context of the conversation session based on the context signal of the conversation session; and
further comprising determining that the previous context of the previous conversation session corresponds to the context of the conversation session based on comparing the embedding of the one or more signal context signals with a previously generated embedding of the previous context of the previous conversation session. How to.
상기 NLU 출력에 기초하여, 상기 음성 발화에 포함된 상기 어시스턴트 쿼리와 연관된 의도를 결정하는 단계;
상기 음성 발화에 포함된 상기 어시스턴트 쿼리와 연관된 의도에 기초하여, 상기 음성 발화에 포함된 상기 어시스턴트 쿼리와 연관된 의도와 관련된 적어도 하나의 관련 의도를 식별하는 단계; 및
상기 적어도 하나의 관련 의도에 기초하여 상기 음성 발화와 관련된 추가 어시스턴트 쿼리를 생성하는 단계를 포함하는, 방법.16. The method of any one of claims 2-15, comprising: an assistant output set and a context of a conversational session to generate an additional assistant query related to the spoken utterance based on at least a portion of the context of the conversational session and at least a portion of the assistant query. The processing steps are:
based on the NLU output, determining an intent associated with the assistant query included in the speech utterance;
Based on the intent associated with the assistant query included in the voice utterance, identifying at least one related intent related to the intent associated with the assistant query included in the voice utterance; and
Generating an additional assistant query related to the spoken utterance based on the at least one related intent.
상기 추가 어시스턴트 쿼리에 대한 응답인 상기 추가 어시스턴트 출력을 생성하기 위해 애플리케이션 프로그래밍 인터페이스(API)를 통해 상기 추가 어시스턴트 쿼리가 하나 이상의 제1-당사자 시스템에 전송되게 하는 단계를 포함하는, 방법.The method of claim 16, wherein determining additional assistant output in response to the additional assistant query based on the additional assistant query comprises:
causing the additional assistant query to be transmitted to one or more first-party systems via an application programming interface (API) to generate the additional assistant output that is a response to the additional assistant query.
상기 추가 어시스턴트 쿼리가 하나 이상의 네트워크를 통해 하나 이상의 서드파티 시스템에 전송되게 하는 단계; 및
상기 추가 어시스턴트 쿼리가 상기 서드파티 시스템 중 하나 이상에 전송되는 것에 응답하여, 상기 추가 어시스턴트 쿼리에 대한 응답인 추가 어시스턴트 출력을 수신하는 단계를 포함하는, 방법.The method of claim 16, wherein determining additional assistant output in response to the additional assistant query based on the additional assistant query comprises:
causing the additional assistant query to be transmitted to one or more third-party systems via one or more networks; and
In response to the additional assistant query being sent to one or more of the third-party systems, receiving additional assistant output in response to the additional assistant query.
상기 LLM을 사용하여, 하나 이상의 추가 LLM 출력을 결정하기 위해 추가 어시스턴트 출력 세트 및 대화 세션의 컨텍스트를 프로세싱하는 단계; 및
하나 이상의 추가 LLM 출력에 기초하여 수정된 추가 어시스턴트 출력 세트를 결정하는 단계를 포함하는, 방법.19. The method of any one of claims 16-18, processing additional assistant output and the context of the conversation session to generate a set of additional assistant outputs determined using the LLM or one or more LLM outputs or modified using one or more additional LLM outputs. The steps are:
using the LLM, processing a set of additional assistant outputs and the context of the conversation session to determine one or more additional LLM outputs; and
A method comprising determining a set of modified additional assistant outputs based on the one or more additional LLM outputs.
상기 대화 세션의 추가 어시스턴트 쿼리에 대응하는 이전 대화 세션의 이전 어시스턴트 쿼리에 기초하여 이전에 생성된 하나 이상의 추가 LLM 출력에 기초하여 및/또는 상기 대화 세션의 컨텍스트에 대응하는 이전 대화 세션의 이전 컨텍스트에 대해 이전에 생성된 하나 이상의 추가 LLM 출력에 기초하여 LLM 모델을 사용하여 이전에 생성된 하나 이상의 추가 LLM 출력을 식별하는 단계; 및
수정된 추가 어시스턴트 출력 세트를 생성하기 위해 추가 어시스턴트 출력 세트가 하나 이상의 추가 LLM 출력으로 수정되게 하는 단계를 포함하는, 방법.19. The method of any one of claims 16-18, processing additional assistant output and the context of the conversation session to generate a set of additional assistant outputs determined using the LLM or one or more LLM outputs or modified using one or more additional LLM outputs. The steps are:
Based on one or more additional LLM outputs previously generated based on a previous assistant query in a previous conversation session corresponding to an additional assistant query in the conversation session and/or in a previous context of a previous conversation session corresponding to the context of the conversation session identifying one or more additional LLM outputs previously generated using the LLM model based on the one or more additional LLM outputs previously generated for the LLM model; and
A method comprising causing a set of additional assistant outputs to be modified with one or more additional LLM outputs to produce a set of modified additional assistant outputs.
하나 이상의 순위 기준에 기초하여, 어시스턴트 출력의 슈퍼세트에 순위를 매기는 단계, 상기 어시스턴트 출력의 슈퍼세트는 적어도 상기 어시스턴트 출력 세트 및 상기 수정된 어시스턴트 출력 세트를 포함하며; 및
상기 순위에 기초하여, 상기 수정된 어시스턴트 출력 세트로부터 주어진 수정된 어시스턴트 출력을 선택하는 단계를 더 포함하는, 방법.According to any preceding claim,
ranking a superset of assistant outputs based on one or more ranking criteria, the superset of assistant outputs comprising at least the assistant output set and the modified assistant output set; and
Based on the ranking, the method further includes selecting a given modified assistant output from the set of modified assistant outputs.
상기 하나 이상의 순위 기준에 기초하여, 추가 어시스턴트 출력의 슈퍼세트에 순위를 매기는 단계, 상기 어시스턴트 출력의 슈퍼세트는 적어도 상기 추가 어시스턴트 출력 세트 및 상기 수정된 추가 어시스턴트 출력 세트를 포함하며; 및
상기 순위에 기초하여, 상기 수정된 추가 어시스턴트 출력 세트로부터 주어진 수정된 추가 어시스턴트 출력을 선택하는 단계를 더 포함하는, 방법.In claim 21,
ranking a superset of additional assistant outputs based on the one or more ranking criteria, the superset of assistant outputs comprising at least the additional assistant output set and the modified additional assistant output set; and
Based on the ranking, the method further includes selecting a given modified additional assistant output from the set of modified additional assistant outputs.
상기 주어진 수정된 어시스턴트 출력과 상기 주어진 수정된 추가 어시스턴트 출력을 결합하는 단계;
텍스트-투-스피치(TTS) 모델을 사용하여, 상기 주어진 수정된 어시스턴트 출력 및 상기 주어진 수정된 추가 어시스턴트 출력을 캡처하는 합성 스피치를 포함하는 합성 스피치 오디오 데이터를 생성하기 위해 상기 주어진 수정된 어시스턴트 출력 및 상기 주어진 수정된 추가 어시스턴트 출력을 프로세싱하는 단계; 및
상기 클라이언트 디바이스의 스피커를 통해 상기 사용자에게 제시하기 위해 상기 합성된 스피치 오디오 데이터가 청각적으로 렌더링되게 하는 단계를 포함하는, 방법.The method of claim 22, wherein causing the given modified assistant output and the given modified additional assistant output to be provided for presentation to the user comprises:
combining the given modified assistant output with the given modified additional assistant output;
Using a text-to-speech (TTS) model, to generate synthesized speech audio data comprising synthesized speech that captures the given modified assistant output and the given modified assistant output and the given modified assistant output and processing the given modified additional assistant output; and
A method comprising causing the synthesized speech audio data to be audibly rendered for presentation to the user through a speaker of the client device.
하나 이상의 순위 기준에 기초하여, 어시스턴트 출력의 슈퍼세트에 순위를 매기는 단계, 상기 어시스턴트 출력의 슈퍼세트는 상기 어시스턴트 출력 세트, 상기 수정된 어시스턴트 출력 세트, 상기 추가 어시스턴트 출력 및 상기 수정된 추가 어시스턴트 출력 세트를 포함하며; 및
상기 순위에 기초하여, 상기 수정된 어시스턴트 출력 세트로부터 주어진 수정된 어시스턴트 출력 및 상기 수정된 추가 어시스턴트 출력 세트로부터 주어진 수정된 추가 어시스턴트 출력을 선택하는 단계를 더 포함하는, 방법.According to any preceding claim,
Ranking, based on one or more ranking criteria, a superset of assistant outputs, the superset of assistant outputs being: the assistant output set, the modified assistant output set, the additional assistant output, and the modified additional assistant output. Contains a set; and
Based on the ranking, selecting a given modified assistant output from the set of modified assistant outputs and a given modified additional assistant output from the set of modified additional assistant outputs.
텍스트-투-스피치(TTS) 모델을 사용하여, 상기 주어진 수정된 어시스턴트 출력 및 상기 주어진 수정된 추가 어시스턴트 출력을 캡처하는 합성 스피치를 포함하는 합성 스피치 오디오 데이터를 생성하기 위해 상기 주어진 수정된 어시스턴트 출력 및 상기 주어진 수정된 추가 어시스턴트 출력을 프로세싱하는 단계; 및
상기 클라이언트 디바이스의 스피커를 통해 상기 사용자에게 제시하기 위해 상기 합성된 스피치 오디오 데이터가 청각적으로 렌더링되게 하는 단계를 포함하는, 방법.The method of claim 24, wherein causing the given modified assistant output and the given modified additional assistant output to be provided for presentation to the user comprises:
Using a text-to-speech (TTS) model, to generate synthesized speech audio data comprising synthesized speech that captures the given modified assistant output and the given modified assistant output and the given modified assistant output and processing the given modified additional assistant output; and
A method comprising causing the synthesized speech audio data to be audibly rendered for presentation to the user through a speaker of the client device.
클라이언트 디바이스 사용자와 클라이언트 디바이스에 의해 구현된 자동화된 어시스턴트 간의 대화 세션의 일부로서:
상기 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하는 단계, 상기 오디오 데이터 스트림은 상기 클라이언트 디바이스의 하나 이상의 마이크에서 생성되고, 상기 음성 발화는 어시스턴트 쿼리를 포함하며;
상기 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 출력 세트를 결정하는 단계, 상기 어시스턴트 출력 세트의 각 어시스턴트 출력은 상기 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답이며;
상기 어시스턴트 출력 세트와 상기 대화 세션의 컨텍스트를 프로세싱하는 단계, 상기 프로세싱하는 단계는:
대형 언어 모델(LLM, large language model)을 사용하여 생성된 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하고, 상기 하나 이상의 LLM 출력 각각은 상기 대화 세션의 컨텍스트의 적어도 일부와 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 기초하여 결정되며, 그리고
상기 대화 세션의 컨텍스트의 적어도 일부 및 상기 어시스턴트 쿼리의 적어도 일부에 기초하여 상기 음성 발화와 관련된 추가 어시스턴트 쿼리를 생성하며;
상기 추가 어시스턴트 쿼리에 기초하여, 상기 추가 어시스턴트 쿼리에 대한 응답인 추가 어시스턴트 출력을 결정하는 단계;
상기 추가 어시스턴트 쿼리에 대한 응답인 추가 어시스턴트 출력에 기초하여, 상기 수정된 추가 어시스턴트 출력 세트를 생성하기 위해 수정된 어시스턴트 출력 세트를 프로세싱하는 단계; 및
상기 수정된 추가 어시스턴트 출력 세트 중에서 주어진 수정된 추가 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 하는 단계를 포함하는, 방법.A method performed by one or more processors, comprising:
As part of a conversational session between a client device user and an automated assistant implemented by the client device:
Receiving an audio data stream capturing a vocal utterance of the user, the audio data stream generated in one or more microphones of the client device, the vocal utterance comprising an assistant query;
Based on the audio data stream processing, determining a set of assistant outputs, each assistant output of the set of assistant outputs being a response to an assistant query included in the voice utterance;
Processing the assistant output set and the context of the conversation session, the processing comprising:
Generating a set of modified assistant outputs using one or more LLM outputs generated using a large language model (LLM), each of the one or more LLM outputs comprising at least a portion of the context of the conversation session and the assistant output is determined based on the output of one or more assistants included in the set, and
generate an additional assistant query related to the spoken utterance based on at least a portion of the context of the conversation session and at least a portion of the assistant query;
Based on the additional assistant query, determining additional assistant output that is a response to the additional assistant query;
based on the additional assistant output in response to the additional assistant query, processing the modified set of additional assistant output to generate the modified additional assistant output set; and
and causing a given modified additional assistant output from among the set of modified additional assistant outputs to be provided for presentation to a user.
클라이언트 디바이스 사용자와 클라이언트 디바이스에 의해 구현된 자동화된 어시스턴트 간의 대화 세션의 일부로서:
상기 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하는 단계, 상기 오디오 데이터 스트림은 상기 클라이언트 디바이스의 하나 이상의 마이크에서 생성되고, 상기 음성 발화는 어시스턴트 쿼리를 포함하며;
상기 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 출력 세트를 결정하는 단계, 상기 어시스턴트 출력 세트의 각 어시스턴트 출력은 상기 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답이며;
대형 언어 모델(LLM, large language model)을 사용하여 생성된 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하기 위해 상기 어시스턴트 출력 세트와 상기 대화 세션의 컨텍스트를 프로세싱하는 단계, 상기 하나 이상의 LLM 출력 각각은 상기 대화 세션의 컨텍스트의 적어도 일부와 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 기초하여 결정되며, 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하는 것은:
(i) 상기 어시스턴트 출력 세트, (ii) 상기 대화 세션의 컨텍스트 및 (iii) 복수의 이종 성격들 중 제1 성격을 반영하는 상기 하나 이상의 LLM 출력 중 하나 이상의 제1 LLM 출력에 기초하여, 제1 성격 응답 세트를 생성하는 것을 포함하며; 및
상기 수정된 어시스턴트 출력 세트 중에서 주어진 수정된 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 하는 단계를 포함하는, 방법.A method performed by one or more processors, comprising:
As part of a conversational session between a client device user and an automated assistant implemented by the client device:
Receiving an audio data stream capturing a vocal utterance of the user, the audio data stream generated in one or more microphones of the client device, the vocal utterance comprising an assistant query;
Based on the audio data stream processing, determining a set of assistant outputs, each assistant output of the set of assistant outputs being a response to an assistant query included in the voice utterance;
processing the assistant output set and the context of the conversation session to produce a modified assistant output set using one or more LLM outputs generated using a large language model (LLM), the one or more LLMs; Each output is determined based on at least a portion of the context of the conversation session and one or more assistant outputs included in the assistant output set, wherein using the one or more LLM outputs to generate a modified assistant output set includes:
Based on one or more first LLM outputs of (i) the set of assistant outputs, (ii) the context of the conversation session, and (iii) the one or more LLM outputs reflecting a first personality of the plurality of heterogeneous personalities, Includes generating a personality response set; and
and causing a given modified assistant output from the set of modified assistant outputs to be provided for presentation to a user.
클라이언트 디바이스 사용자와 클라이언트 디바이스에 의해 구현된 자동화된 어시스턴트 간의 대화 세션의 일부로서:
상기 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하는 단계, 상기 오디오 데이터 스트림은 상기 클라이언트 디바이스의 하나 이상의 마이크에서 생성되고, 상기 음성 발화는 어시스턴트 쿼리를 포함하며;
상기 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 출력 세트를 결정하는 단계, 상기 어시스턴트 출력 세트의 각 어시스턴트 출력은 상기 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답이며;
대형 언어 모델(LLM, large language model)을 사용하여 생성된 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하기 위해 상기 어시스턴트 출력 세트와 상기 대화 세션의 컨텍스트를 프로세싱하는 단계, 상기 하나 이상의 LLM 출력 각각은 상기 대화 세션의 컨텍스트의 적어도 일부와 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 기초하여 결정되며; 및
상기 수정된 어시스턴트 출력 세트 중에서 주어진 수정된 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 하는 단계를 포함하는, 방법.A method performed by one or more processors, comprising:
As part of a conversational session between a client device user and an automated assistant implemented by the client device:
Receiving an audio data stream capturing a vocal utterance of the user, the audio data stream generated in one or more microphones of the client device, the vocal utterance comprising an assistant query;
Based on the audio data stream processing, determining a set of assistant outputs, each assistant output of the set of assistant outputs being a response to an assistant query included in the voice utterance;
processing the assistant output set and the context of the conversation session to produce a modified assistant output set using one or more LLM outputs generated using a large language model (LLM), the one or more LLMs; Each output is determined based on at least a portion of the context of the conversation session and one or more assistant outputs included in the assistant output set; and
and causing a given modified assistant output from the set of modified assistant outputs to be provided for presentation to a user.
클라이언트 디바이스 사용자와 클라이언트 디바이스에 의해 구현된 자동화된 어시스턴트 간의 대화 세션의 일부로서:
상기 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하는 단계, 상기 오디오 데이터 스트림은 상기 클라이언트 디바이스의 하나 이상의 마이크에서 생성되고, 상기 음성 발화는 어시스턴트 쿼리를 포함하며;
상기 오디오 데이터 스트림 프로세싱에 기초하여, 어시스턴트 출력 세트를 결정하는 단계, 상기 어시스턴트 출력 세트의 각 어시스턴트 출력은 상기 음성 발화에 포함된 어시스턴트 쿼리에 대한 응답이며;
상기 음성 발화의 프로세싱에 기초하여, 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 수정할지 여부를 결정하는 단계;
상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력을 수정하기로 결정하는 것에 응답하여:
대형 언어 모델(LLM, large language model)을 사용하여 생성된 하나 이상의 LLM 출력을 사용하여 수정된 어시스턴트 출력 세트를 생성하기 위해 상기 어시스턴트 출력 세트와 상기 대화 세션의 컨텍스트를 프로세싱하는 단계, 상기 하나 이상의 LLM 출력 각각은 상기 대화 세션의 컨텍스트의 적어도 일부와 상기 어시스턴트 출력 세트에 포함된 하나 이상의 어시스턴트 출력에 기초하여 결정되며; 및
상기 수정된 어시스턴트 출력 세트 중에서 주어진 수정된 어시스턴트 출력이 사용자에게 제시하기 위해 제공되게 하는 단계를 포함하는, 방법.A method performed by one or more processors, comprising:
As part of a conversational session between a client device user and an automated assistant implemented by the client device:
Receiving an audio data stream capturing a vocal utterance of the user, the audio data stream generated in one or more microphones of the client device, the vocal utterance comprising an assistant query;
Based on the audio data stream processing, determining a set of assistant outputs, each assistant output of the set of assistant outputs being a response to an assistant query included in the voice utterance;
based on the processing of the voice utterance, determining whether to modify one or more assistant outputs included in the assistant output set;
In response to determining to modify one or more assistant outputs included in the assistant output set:
processing the assistant output set and the context of the conversation session to produce a modified assistant output set using one or more LLM outputs generated using a large language model (LLM), the one or more LLMs; Each output is determined based on at least a portion of the context of the conversation session and one or more assistant outputs included in the assistant output set; and
and causing a given modified assistant output from the set of modified assistant outputs to be provided for presentation to a user.
ASR(automatic speech recognition) 모델을 사용하여, ASR 출력 스트림을 생성하기 위해 오디오 데이터 스트림을 프로세싱하는 단계;
NLU(natural language understanding) 모델을 사용하여, NLU 데이터 스트림을 생성하기 위해 ASR 출력 스트림을 프로세싱하는 단계;
상기 NLU 데이터 스트림에 기초하여, 음성 발화를 제공하는 사용자의 의도를 식별하는 단계; 및
상기 음성 발화를 제공하는 사용자의 의도에 기초하여 어시스턴트 출력을 수정할지 여부를 결정하는 단계를 포함하는, 방법.The method of claim 30, wherein, based on the processing of the voice utterance, determining whether to modify one or more assistant outputs included in the assistant output set comprises:
Processing the audio data stream, using an automatic speech recognition (ASR) model, to produce an ASR output stream;
Processing the ASR output stream using a natural language understanding (NLU) model to generate an NLU data stream;
Based on the NLU data stream, identifying a user's intention to provide a voice utterance; and
A method comprising determining whether to modify assistant output based on the intent of the user providing the spoken utterance.
자동화된 어시스턴트로 향하는 복수의 어시스턴트 쿼리들 및 복수의 어시스턴트 쿼리들 각각에 대한 대응하는 이전 대화 세션의 대응하는 컨텍스트를 획득하는 단계;
상기 복수의 어시스턴트 쿼리들 각각에 대해:
하나 이상의 대형 언어 모델(LLM)을 사용하여, 상기 주어진 어시스턴트 쿼리에 대한 응답인 대응하는 LLM 출력을 생성하기 위해 상기 복수의 어시스턴트 쿼리들 중 주어진 어시스턴트 쿼리를 프로세싱하는 단계; 및
상기 주어진 어시스턴트 쿼리 및/또는 상기 주어진 어시스턴트 쿼리에 대한 대응하는 이전 대화 세션의 대응하는 컨텍스트에 기초하여 클라이언트 디바이스에서 액세스할 수 있는 메모리에서 대응하는 LLM 출력을 인덱싱하는 단계; 및
상기 클라이언트 디바이스에서 액세스할 수 있는 메모리에서 대응하는 LLM 출력을 인덱싱한 후, 클라이언트 디바이스 사용자와 상기 클라이언트 디바이스에 의해 구현되는 자동화된 어시스턴트 간의 현재 대화 세션의 일부로서:
상기 사용자의 음성 발화를 캡처하는 오디오 데이터 스트림을 수신하는 단계, 상기 오디오 데이터 스트림은 상기 클라이언트 디바이스의 하나 이상의 마이크에서 생성되며;
상기 오디오 데이터 스트림을 프로세싱하는 것에 기초하여, 상기 음성 발화가 주어진 어시스턴트 쿼리에 대응하는 현재 어시스턴트 쿼리를 포함하고 및/또는 상기 음성 발화가 주어진 어시스턴트 쿼리에 대한 대응하는 이전 대화 세션의 대응하는 컨텍스트에 대응하는 현재 대화 세션의 현재 컨텍스트에서 수신되었다고 결정하는 단계; 및
상기 자동화된 어시스턴트가 상기 음성 발화에 응답하여 사용자에게 제시하기 위해 제공될 어시스턴트 출력을 생성할 때 대응하는 LLM 출력을 활용하게 하는 단계를 포함하는, 방법.A method performed by one or more processors, comprising:
Obtaining a plurality of assistant queries directed to an automated assistant and a corresponding context of a corresponding previous conversation session for each of the plurality of assistant queries;
For each of the plurality of assistant queries:
processing, using one or more large language models (LLMs), a given assistant query of the plurality of assistant queries to generate a corresponding LLM output that is a response to the given assistant query; and
indexing a corresponding LLM output in a memory accessible at a client device based on the given assistant query and/or the corresponding context of a corresponding previous conversation session for the given assistant query; and
After indexing the corresponding LLM output in memory accessible at the client device, as part of a current conversational session between a client device user and an automated assistant implemented by the client device:
Receiving an audio data stream capturing the user's vocal utterance, the audio data stream generated in one or more microphones of the client device;
Based on processing the audio data stream, the spoken utterance includes a current assistant query corresponding to the given assistant query and/or the spoken utterance corresponds to a corresponding context of a corresponding previous conversation session for the given assistant query. determining that the message has been received in the current context of a current conversation session; and
causing the automated assistant to utilize the corresponding LLM output in generating assistant output to be provided for presentation to the user in response to the spoken utterance.
적어도 하나의 프로세서; 및
실행될 때, 상기 적어도 하나의 프로세서로 하여금 청구항 1 내지 40 중 어느 한 항에 대응하는 방법을 수행하게 하는 명령어들을 저장하는 메모리를 포함하는, 시스템.As a system,
at least one processor; and
A system comprising a memory storing instructions that, when executed, cause the at least one processor to perform the method corresponding to any one of claims 1 to 40.
Applications Claiming Priority (5)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US202163241232P | 2021-09-07 | 2021-09-07 | |
US63/241,232 | 2021-09-07 | ||
US17/532,794 US20230074406A1 (en) | 2021-09-07 | 2021-11-22 | Using large language model(s) in generating automated assistant response(s |
US17/532,794 | 2021-11-22 | ||
PCT/US2021/061214 WO2023038654A1 (en) | 2021-09-07 | 2021-11-30 | Using large language model(s) in generating automated assistant response(s) |
Publications (1)
Publication Number | Publication Date |
---|---|
KR20240007261A true KR20240007261A (en) | 2024-01-16 |
Family
ID=79171013
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
KR1020237042963A KR20240007261A (en) | 2021-09-07 | 2021-11-30 | Use large-scale language models to generate automated assistant response(s) |
Country Status (4)
Country | Link |
---|---|
EP (1) | EP4169015A1 (en) |
KR (1) | KR20240007261A (en) |
AU (1) | AU2021463794A1 (en) |
WO (1) | WO2023038654A1 (en) |
Families Citing this family (4)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
CN117093679B (en) * | 2023-06-19 | 2024-04-02 | 无码科技（杭州）有限公司 | Large language model intelligent inquiry dialogue method, system, equipment and medium |
CN116561286B (en) * | 2023-07-06 | 2023-10-27 | 杭州华鲤智能科技有限公司 | Dialogue method and device |
CN116719911B (en) * | 2023-08-10 | 2023-10-31 | 成都不烦智能科技有限责任公司 | Automatic flow generation method, device, equipment and storage medium |
CN116992005B (en) * | 2023-09-25 | 2023-12-01 | 语仓科技(北京)有限公司 | Intelligent dialogue method, system and equipment based on large model and local knowledge base |
-
2021
- 2021-11-30 EP EP21835476.9A patent/EP4169015A1/en active Pending
- 2021-11-30 WO PCT/US2021/061214 patent/WO2023038654A1/en active Application Filing
- 2021-11-30 KR KR1020237042963A patent/KR20240007261A/en unknown
- 2021-11-30 AU AU2021463794A patent/AU2021463794A1/en active Pending
Also Published As
Publication number | Publication date |
---|---|
AU2021463794A1 (en) | 2023-09-28 |
EP4169015A1 (en) | 2023-04-26 |
WO2023038654A1 (en) | 2023-03-16 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
JP7064018B2 (en) | Automated assistant dealing with multiple age groups and / or vocabulary levels | |
KR102357218B1 (en) | Natural assistant interaction | |
JP7418526B2 (en) | Dynamic and/or context-specific hotwords to trigger automated assistants | |
US20230074406A1 (en) | Using large language model(s) in generating automated assistant response(s | |
CN113557566B (en) | Dynamically adapting assistant responses | |
KR102599607B1 (en) | Dynamic and/or context-specific hot words to invoke automated assistant | |
KR20240007261A (en) | Use large-scale language models to generate automated assistant response(s) | |
US20230046658A1 (en) | Synthesized speech audio data generated on behalf of human participant in conversation | |
KR20230062612A (en) | Enabling natural conversations for automated assistants | |
US20240055003A1 (en) | Automated assistant interaction prediction using fusion of visual and audio input | |
US20230343324A1 (en) | Dynamically adapting given assistant output based on a given persona assigned to an automated assistant | |
JP2024510698A (en) | Contextual suppression of assistant commands | |
CN117136405A (en) | Automated assistant response generation using large language models | |
US20230215422A1 (en) | Multimodal intent understanding for automated assistant | |
US11756533B2 (en) | Hot-word free pre-emption of automated assistant response presentation | |
US20240031339A1 (en) | Method(s) and system(s) for utilizing an independent server to facilitate secure exchange of data | |
US20240078374A1 (en) | System(s) and method(s) for causing contextually relevant emoji(s) to be visually rendered for presentation to user(s) in smart dictation | |
KR20230158615A (en) | Enable natural conversations using soft endpointing for automated assistants |