The application requires to be called in the name that on June 1st, 2006 submitted to the U.S. Provisional Patent Application No.60/810 of " data center's uninterruptible power distribution architecture ", 449 rights and interests, and it all is incorporated in this through application.
Embodiment
Fig. 1 is the synoptic diagram that illustrates the exemplary power distribution architecture 100 that is used for data center 105, and each of a plurality of therein modular rack-mounted pedestals (it also can be called as supporting plate) 110 comprises the uninterrupted power supply (ups) Unity 115 integrated with computer motherboard 120.Can realize that to the DC rectification effective electric power carries to carry out only AC through configuration UPS 115, said AC occurs between the DC electric power that is consumed from the AC mains electricity (AC mains power) and the mainboard 120 of electric power facility line network (electric utility grid) reception to the DC rectification.In this example, the AC main line is meant the obtainable AC power supplies in use point place in data center 105.When in data center 105, receiving at UPS 115 places, the AC rail voltage be by electric power facility generate, transmit and distribution basic for sinusoidal AC signal (50Hz for example, 60Hz).AC main line input voltage is converted into the single dc voltage on the DC bus, and said DC bus is to mainboard 120 conveying operations electric power.Producing on the AC main line under the situation of fault, battery circuit is striden the DC bus and is electrically connected to supply operating voltages to mainboard 120.
In described example, data center 105 comprises a plurality of frame 125A, 125B, the 125C that contains a plurality of supporting plates 110.Can be through three-phase AC power voltage line to frame 125A-125C power supply, said three-phase AC power voltage line is transported to data center 105 from electric power facility 130.The AC power voltage line that is transported to each frame 125A-125C can for example be derived from by electric power facility operation and the rotary generator that driven by steam or combustion gas turbine.Be essentially sinusoidal AC voltage signal and can be sent to point of departure, such as the transformer station's (not shown) in utility.Can be from transformer station to data center's 105 distribution power voltage lines (for example 480 volts of live wires are to live wire).In data center 105, each phase voltage (for example 208 volts of live wires are to zero line) is routed to each frame 125A-125C.Can use proper A C to come to carry AC electric power as required with the AC voltage of appointment to AC transformer (not shown).For example, step-down transformer can be with AC electric power from the level high transformation that is suitable for transmitting to the level that can be applied directly to UPS 115 basically.For example, in some three phase arrangement, such transformer can be made suitable transformation as required between WYE and DELTA connection.
Unless otherwise indicated, should be understood that to be meant to quoting of AC voltage to be essentially sinusoidal voltage, and voltage amplitude should be understood that to be meant root mean square (r.m.s) value.Facility 130 can be carried the three-phase voltage of the substantial symmetry that is suitable for balanced basically three-phase load is supplied power.
In described example, a phase voltage and zero line (neutral line) are distributed to each frame 125.Frame 125 can be configured to the balanced basically load of formation with supporting plate 110.In other embodiments, if that data center 105 comprises is extra (or still less) frame 125, then can use similar distribution.As an example, the exemplary supporting plate 110 in frame 125A (details to amplify illustrates) receives phase A voltage and zero line.Each supporting plate 110 among the frame 125A receives identical ac input voltage signal, and promptly phase A is to zero line voltage.
Similarly, each supporting plate 110 among the frame 125B receive phase B to zero line as the ac input voltage signal, and each supporting plate 110 reception phase C among the frame 125C to zero line as the ac input voltage signal.In other embodiments, can different phase voltages be distributed to the supporting plate 110 among of frame 125A-125C, and/or to each ac input voltage signal of supporting plate 110 can be live wire to hot voltage but not live wire to zero line voltage.In various embodiments, can be with the phase of any actual quantity (for example, 1,2,3,4,5,6...12 or more) distribution electrical power for operation to be provided to each supporting plate 110.
In described example, each of supporting plate 110 is coupled to network and connects 140.Network connects 140 provides information channel to network 145, and said network 145 can comprise the combination of LAN for example, VPN, wide area network (for example the Internet) or such network, and said network can be wired, optical fiber and/or wireless.In the many possible equipment of remote computer 150 expression one; Said possible equipment can use processor 160 on mainboard 120 and the storer 165 that is associated and one or more supporting plates communication data directly or indirectly, with visit, storage, processing and/or retrieving information.In some embodiments, extra processor (for example server) can promote such communication.For example, exemplary remote computer devices 150 can be included in server, desktop computer, laptop computer and/or the equipment based on handheld processor.One or more servers can be anticipated or aftertreatment, monitoring, route and/or balance the data stream that is associated with this communication.
In various embodiments, mainboard 120 can comprise the processor 160 of, two, three, four or any other real figure.In certain embodiments, mainboard 120 can be substituted by the supporting plate of data storage device (for example, the combination of the storer of hard drive, flash memory, RAM or any of these or other type).In such embodiment, can with data storage device, have a battery 185 UPS 115 integrated and be supported on the supporting plate 110 with data storage device.In other embodiments, can data storage device, the UPS115 that has battery 185 and mainboard 120 is integrated.In various embodiments, digital processing unit can comprise the simulation that can be integrated or separate and/or any combination of DLC(digital logic circuit), and may further include the equipment that can carry out the able to programme of the instruction that is stored in the storer and/or programme.Storer 165 can comprise the volatibility and/or the nonvolatile memory that can read and/or write by processor 160.Mainboard 120 may further include some of for example central processor unit (CPU), storer (for example buffer memory, non-volatile, flash memory) and/or disc drive or all, and various storer, chipset and the support circuit that is associated.
In certain embodiments, mainboard 120 can provide one or more DC to the DC converter the DC bus voltage is converted into the voltage that is suitable for operating in the circuit in the mainboard 120.For example; One or more DC to the DC converter can provide the output voltage of adjusting, this output voltage for example can include, but are not limited to+the 3.3VDC electric power signal ,+the 5VDC electric power signal ,-the 5VDC electric power signal ,+the 12VDC electric power signal and-the 12VDC electric power signal.
In example embodiment, processor on mainboard 120 160 and storer 165 can form at least a portion of the disposal system that is configured to handle network operation.As illustrative example, mainboard 120 can help to handle internet request.Mainboard can individual processing information, or with other parallel processing that on other equipment, moves process information in combination based on processor, such as one or more other supporting plates 110 in data center 105.
With the ac input voltage signal conveys to each of supporting plate 110 to handle by UPS 115.In some instances, the ac input voltage signal can receive from the AC main line.UPS 115 comprises AC to DC converter 170, and it is with the dc voltage of ac input voltage conversion of signals for regulating.Converter 170 outputs to the dc voltage of being regulated on the DC bus 175.In certain embodiments, AC can be adjusted to static set point with dc voltage to DC converter 170.In some other embodiment, set point can be dynamically to confirm.In embodiment some static state and dynamic, set point can be based on the characteristic of battery.The example of such setpoint adjustments will be described with reference to figure 3 in further detail.
When the ac input voltage signal was within normal range, AC can keep the voltage-regulation to DC bus 175 to DC converter 170.Can specify the normal range that is used for typical sinusoidal AC signal in every way.For example; For being the line frequency between about 40Hz and 1000Hz; Such as about 50Hz, 60Hz, 100Hz, 200Hz, 300Hz, 400Hz, 500Hz ... until about 1000Hz or bigger, can between about 80 volts and 500 volts, specify one or more threshold values.As illustrative example,,, then can discern fault if r.m.s voltage drops to 100 volts second threshold value to be issued to the time of scheduled volume for 120 volts of nominals (r.m.s) ac input voltage signal.In other embodiments, can discern fault, for example,, then can perceive fault if the AC peak input voltage is reduced in the semiperiod in office below 90 volts the first threshold based on PV.Fault condition can comprise without restriction that comprehensive power failure (blackout), part have a power failure (brownout), voltage declines and falls, surge, the instability relevant with switchgear operation or other the electric transition that is associated with the AC main line.In some embodiments; Fault condition can cause or cause potentially the improper operation of the processing unit in the DC load; For example; If AC can't keep the sufficient adjusting to the voltage on the DC bus 175 to DC converter 170, and/or be unable to supply the DC load that sufficient electric current is served by DC bus 175 with operation.
If the ac input voltage signal is reduced to outside the normal range, such as during fault condition, the testing circuit (not shown) can send the signal of this condition of indication.In response to detecting this fault condition, battery circuit 180 can be configured to that battery 185 is striden DC bus 175 and connect, and makes mainboard 120 not interrupt basically and the continuation operation.The circuit that battery 185 can continue on mainboard 115 provides electrical power for operation to put basically up to battery 185.Battery circuit 180 can comprise and can stride the charging of 175 pairs of batteries of DC bus and/or the circuit that discharge is controlled with various operator schemes.With reference to figure 5A, 5B exemplary battery circuit has been described in further detail.
Fig. 2-the 4th, illustrating is used to transmit electric power operates the block diagram of the exemplary power distribution architecture of the DC load with at least one processor.For example, in various embodiments, mainboard 120 can constitute the DC load.In these examples, AC provides the unique AC that occurs between AC facility power network (for example, substation transformer, transmission line, generator etc.) and the microprocessor 160 in any supporting plate 110 to the DC rectification to DC converter 170.
Fig. 2 shows the exemplary power distribution architecture in system 200, and it can be realized on the main equipment that for example has high-power demand.System 200 comprises facility AC mains generator 205, is used for from the facility supply AC rail voltage such as electric power facility 130.Example system 200 also comprises two subsequent use AC generators, comprises the generator 210 and (for example turbine) generator 215 in the same place of diesel fuel powered.Electric power from engine 205,210,215 can be combined and/or selection by AC switchgear 220, and is transported to supporting plate 110 via AC bus 225.Under situation about breaking down on the AC main line from generator 205, generator 210,215 can provide backup ac input voltage signal to AC bus 225.
In some embodiments, can use asynchronous basically energy source to produce and be essentially sinusoidal AC voltage signal.For example, can use flywheel energy storage and recovery system.The energy that wind-force or sunshine produce such as by wind field or energy that sunshine, the field provided respectively, can be essentially sinusoidal AC voltage to be created in as energy source in the electric power facility line network.In such embodiment, the sinusoidal signal that is essentially that is produced is transferred to AC through utility and stays out of AC to the DC rectification to the input port of DC converter 170.
With the cooperating process of the battery that provides by battery 185 backup in, generator 205,210,215 can provide continual basically electric power to operate in the DC load 230 on the supporting plate 110 on short, time durations moderate-length and/or longer.
The example of generator 210,215 is used and can under following situation, be explained: from the fault (for example, part has a power failure, has a power failure) or the non-availability (for example, circuit is safeguarded) of the AC rail voltage of generator 205 comprehensively.In response to the fault that detects on the ac input voltage signal, battery 185 is connected to stride the DC bus 175 basic cell voltages of carrying.Like this, between the short-term of DC load the operation of (for example, full load at least 10,20,30,40,50,60 seconds) is by keeping from the electric power of battery 185 supplies.Can diesel-driven generator 210 be started to AC bus 225 electric power to be provided, preferably before battery 185 has been put electricity fully.For the bigger AC power failure of scope, can generator in the same place 215 be connected line so that more cost-efficient operation to be provided, perhaps avoid surpassing restriction for the statutory regulation of diesel fuel generating.
In some embodiments, one or two in the generator 210,215 can provide peak load to unload negative (shedding) ability.For example, can during the demand peak period of expection every day, use generator 215 in the same place.In some cases, this can allow to obtain preferential ower rate from electric power facility 130 negotiations.
Fig. 3 shows example schematic diagram with further details.In various embodiments, AC can be adjusted to set point with the single output voltage on the DC bus to DC converter 170.This set point can be a static value in certain embodiments, and perhaps it can dynamically be confirmed during operation.For example, this set point can be at least in part based on one or more electrical nature of battery.
Can comprise such as following battery characteristics about its characteristic of setting up set point: battery chemistries, battery life, charge/discharge history, nominal maximum charge, temperature, charge profile type (profile) (for example, the voltage charging rate under steady current), the estimated value of internal battery impedance, or other parameter relevant with the electrical performance of battery.
Except internal battery characteristics, set point can be at least in part based on the circuit parameter of battery circuit 180 and DC bus 175.In certain embodiments, AC will can be the function of battery charger topological structure to the set point extremely of the voltage-regulation on the DC bus 175 to DC converter 170.If battery charger provides voltage booster (for example, boost converter, charge pump, backhaul (flyback)), set-point voltage can be located substantially on or be lower than the maximum charging voltage of expectation so.If battery charger (for example only provides voltage step-down; Linear regulator, step-down controller) ability; Set point can be set to the value that enough is higher than maximum nominal charging voltage so; On associated temperature, to realize needed charging performance, wherein considered at power loss and charging current and compromise (tradeoff) in the corresponding duration of charging.According to such trading off, set point can only be needed the same high with the specific requirement of satisfying the duration of charging.For example, set point can be set on the nominal expectation cell voltage about 0.050 and about 1 volt between.
In certain embodiments, battery (or battery strings) has than is fed to the higher output voltage of voltage of DC load (such as mainboard 120).Can use step-down controller that the voltage drop from battery output is low to moderate the supply DC needed voltage of loading.For example, charge/discharge control 305 (shown in Fig. 5 C) can comprise the step-down controller that is used for reducing cell voltage.
In other embodiments, battery can have the lower output voltage of voltage that provides than to the DC load.At this, step (step) converter that charge/discharge control 305 can comprise such as boost converter is used for the voltage increases from battery, makes it to the enough voltage of DC load supply.
In various embodiments, can set-point voltage be set based on the temperature of appointment, such as 0,10,25,30,40,50 ..., 80 degrees centigrade.In illustrative example, set point can based on by at least one temperature sensor (not shown) measured in battery 185 or battery 185 around temperature and be dynamically adjusted.
In described embodiment, UPS 115 comprises the charging/discharging control circuit 305 that is connected in series with battery 185, and further comprises the controller 245 that is operatively connected with nonvolatile memory (NVM) 310.
The battery 185 that is connected in series is striden DC bus 175 with circuit 305 and is connected.In response to the signal of the fault on the indication ac input voltage signal, circuit 305 can stride DC bus 175 operatively connect battery 185 with allow battery through low impedance path to 230 discharges of DC load.When the ac input voltage signal on AC bus 225 did not break down, circuit 305 can optionally allow charging current to flow out so that battery 185 is charged from DC bus 175.
In described embodiment, NVM 310 can store and be used to regulate the set point information of AC to the output of DC converter 170.Set point information can be during manufacture, be stored when using first, and/or dynamically upgraded in the operating period of supporting plate 110.Controller 245 and/or AC can read and/or use the set point information of being stored to confirm how to control AC to DC converter 170 to DC converter 170.Except set point information, can be stored in for example NVM310 with the relevant information of threshold condition that is used between AC imports and be battery-operated, switching.
In other embodiments, AC is not conditioned to the output of DC converter; Yet, can between DC converter and load, insert supercharging or step-down controller at AC, suitable voltage to be provided to load.In addition, can AC be used in combination with supercharging or step-down controller to the DC converter, suitable voltage to be provided to load.
For example, can be provided to the visit that is stored in the information among the NVM 310 through serial or parallel interface (it can have wired and/or wireless (for example infrared ray) Physical layer) at NVM 310 with between the one or more processors 160 on the DC load 230.Can use processor 160 to connect 140 (Fig. 1) and visit and/or be updated in the information among the NVM 310 via network to each supporting plate 110.
Can load at DC and extra data storage device is provided on 230.In described example, DC load 230 comprises two processors 160 that can be operatively connected with storer 165 and hard drive (HDD) 315.
Fig. 4 illustrates the exemplary power distribution architecture 400 on frame 125.In framework 400, UPS 115 transmits electric power through a plurality of DC loads 230 of DC bus 175 in processing unit 405.Each DC load 230 is striden DC bus 175 and is connected in parallel.The electric power that is delivered to DC load 230 only carries out the once rectification from AC to DC between utility mains 205 and DC load 230.In one embodiment, processing unit 405 comprises disc array, interconnect card and the uninterrupted power source with battery.
In various embodiments, each DC load 230 can have similar circuit or different circuit.The various loads of DC load can mainly provide the combination of data storage, data processing, data communication or these or other function.In one embodiment, on a plurality of supporting plates that DC load 230 is located in the frame 125.In another embodiment, entire process unit 405 is arranged on of supporting plate 110.In certain embodiments, UPS 115 is integrated on the single supporting plate 110 with processing unit 110.In a further embodiment, UPS 115 can be positioned at the other places on the frame 125.Processing unit 405 can refer to one or more supporting plates, frame or comprise other structure of one or more DC loads 230; Said structure can comprise at least one compartment (bay), housing, movably or fixing building or whole facility, such as data center 105.
Fig. 5 A-5B shows the synoptic diagram of the details of the battery circuit in exemplary power distribution architecture.
Fig. 5 A illustrates the example schematic diagram 500 of the part of the charging/discharging control circuit 305 that is used for describing with reference to figure 3.Synoptic diagram 500 comprises comparator circuit 505, is used for reducing to threshold value Voff control signal Vups when following when the voltage on DC bus 175.Synoptic diagram 500 also comprises comparator circuit 510, is used for reducing to threshold value Batt_Low control signal VBatt when following when the voltage on DC bus 175.With reference to figure 6-7 signal Vups and Vbatt have been described in further detail.
In other embodiments, circuit 510 is used as the operational amplifier (opamp) of measuring voltage, substitutes based on the comparison of two input signals is produced the comparer of output.Measured voltage then can be compared in the software of being carried out by controller.
Synoptic diagram 500 further comprises overflow protecting element 515, and this overflow protecting element 515 comprises fuse in this example.A terminal of fuse 515 is connected to the plus end of battery, and another terminal is connected to the right path (postive rail) of DC bus 175.As an alternative, fuse 515 can be coupled to the negative terminal of battery.In another example, extra series connection and/or separation equipment are alleviated and/or other function so that excess current, superpotential, refluence protection, EMI to be provided.
In described embodiment, pair of terminal (+battery ,-battery) can be connected to battery.Negative battery terminal (battery) is connected to two alternate paths, through each alternate path of operation may command of switch.A negative rail that negative battery terminal is connected to DC bus 175 through resistor 520 and switch 525 in the alternate path.This path permission charging current when switch closure flows through.The amplitude of charging current has been limited in fact by voltage on the value of resistance 520 and the DC bus 175 and the difference between the battery (not shown).The internal resistance of battery is more much lower than the value of resistance 520 usually.In some applications, can the voltage drop at resistance 520 two ends be used for measuring and/or the control charging current.
Another alternate path is connected to negative battery terminal through switch 530 the negative rail of DC bus 175.When switch 530 closures, battery is striden DC bus 175 and can be operatively connected.Under this state, battery can be to also being striden any DC load (not shown) discharge and the supply electrical power for operation that DC bus 175 connects.
Switch 525,530 can have the seedbed and/or not have seedbed control.The shown example embodiment of Fig. 5 B has been explained an embodiment, and should not be seen as restrictive.
In Fig. 5 B, battery 185 is modeled as has the resistance in series 540 that for example can represent inside and/or contact resistance.The desirable switch 525 (Fig. 5 A) that is used for battery charge is implemented as the diode with active control input.In this embodiment, AC can be adjusted to DC bus 175 voltage of the charging current that is enough to forward biased diode on interested temperature (switch) 525 and is enough to provide desired to DC converter 170 (not shown).Like this, set point can be to be at least maximum charging voltage to add diode drop voltage.In some embodiments, diode is optional.For example, if hypothesis supply voltage will be higher than cell voltage, can substitute diode with switch.
In the described example of Fig. 5 B, confirm battery charge through resistance in series with such as the unidirectional current mechanism of diode or other semiconductor switch at least in part.In other embodiments; Battery charger (for example can comprise current (series-pass) regulator of series connection; Low pressure differential (LDO) linear regulator) or single or its combination in the switch mode power converter (for example, buck, boost type, buck-boost formula, Cepic formula, Cuk formula, return-stroke type, charge pump type or resonant mode etc.).Can be through current mirror technology or use and relate to the current measurement feedback technique that electric current sense resistance for example or inductive coupling measure and control battery charge.
Be used for the desirable switch 530 (Fig. 5 A) of battery discharge is implemented as back-to-back (back-to-back) MOSFET (mos field effect transistor) switch, said switch mosfet is configured in nonconducting state, on both direction, all stop electric current.This switch 530 is in response to breaking off and closure through the control signal 535 that for example controller 245 (Fig. 3) produces.In various embodiments, switch 525,530 can comprise: schottky diode, igbt (IGBT) or other semiconductor or electro-mechanical switches (for example relay).In other embodiments, use realizes the discharge to battery such as the step down voltage redulator of step-down controller.
Fig. 5 C shows the example schematic diagram 550 that is used for cell charging control topological structure.Synoptic diagram 550 comprises and is independent of the charge voltage source that is used for to such as the power supply of the load of mainboard 120 power supply.Charging voltage can be used to battery 185 charging (for example, substitute be used for to the power supply of load power supply or except this power supply), and this charging voltage can be connected to the output of power supply during battery-operated alternatively.
Fig. 5 D shows the example schematic diagram 580 for choosing that is used for cell charging control.A difference between synoptic diagram 580 and the synoptic diagram 500 is: in synoptic diagram 580 ,-/+V
CHGFrom charge voltage source 552 rather than directly 170 receptions from AC to the DC converter.
Fig. 6-the 7th illustrates the process flow diagram of the exemplary method that can in the embodiment of power distribution architecture, carry out.
With reference to figure 6, process flow diagram 600 illustrates the exemplary method that UPS 115 can carry out, to handle the fault condition for the ac input voltage signal.In certain embodiments, UPS 115 can carry out this method with adjustment as interim power supply to battery and/or leave the switching of battery.In some cases, carry out this method and can reduce and/or prevent performance disruptions (for example error in data) fully as the result of AC fault condition.For example, battery 185 can provide enough electrical power for operation with the operation of keeping DC load 230 up to can be with putting line such as the AC source of utility mains 205 or emergency generator 210,215.In certain embodiments, battery 185 can be loaded at DC and continued to provide electrical power for operation when 230 execution commands are operated with the following electricity of accomplishing appropriateness.The following electric operation of such appropriateness can alter a great deal, but attempts to weaken the performance disruptions that possibly caused by fault condition usually.Such imbalance self can for example show as when then outmoded or ruined data when restarting of disposal system.
Usually, this method comprises the operation that can be carried out by controller (for example controller 245).Can be in system 100 further executable operations in control, the monitoring of one or more processors 160 and/or under keeping watch on.But can also be by can being to connect 140 with other processing of controller operation communication and/or control element replenishes or the amplification operation through the network that is couple to supporting plate 110.Can carry out some or all of operations by one or more processors of carrying out the instruction that visibly is included in the signal.Can cooperate mutually individually or with one or more processors of execution command, use simulation and/or digital hardware or technology to realize this processing.
This method begins in step 605 when confirming when controller to have fault on the ac input voltage signal.For example, controller can through for example keep watch on AC bus 225, by the voltage status conditioned signal that provides at the monitoring voltage/failure detector circuit on the supporting plate 110 and/or at the output voltage at the DC bus 175 places (V among Fig. 5 A for example
UPS), discern the appearance of AC power failure.In certain embodiments, UPS 115 can comprise V
UPSConvert the AD converter of digital value (for example 10 digital value) into.Drop down onto threshold value when following when controller detects crucial voltage drop, controller can start AC power failure program.In other embodiment, controller can receive signal from the assembly of outside, such as the electric power combiner in AC switchgear 220.Such signal can be indicated the fault in the ac input voltage signal.In other embodiment, AC can send message with indication AC power failure to controller to DC converter 170.
Electric power does not break down if controller is confirmed AC, and then repeating step 605.If controller is confirmed AC power office in fault condition, then in step 610, controller switches to battery-operated from the AC operation UPS 115.For example, controller can send signal with cut-off switch 525 and Closing Switch 530 (Fig. 5 A), to stride DC bus 175 battery 185 is operably connected, and makes battery 185 can support DC load 230.In some embodiments, battery is not directly connected to DC load 230.For example, can the step-down controller such as buck (step-down) converter be inserted between battery 185 and the DC bus 175, make that voltage just was lowered when switch 530 closures before being supplied to DC load 230.
Then, in step 615, controller sets the timer to the subsequent use duration (backduration time).Timer can be the register in the controller, and it pushes away before along with the time and is successively decreased or increase progressively.In certain embodiments, the subsequent use duration can represent to use or to rely on the duration of battery electric power.For example, controller can use the estimation of the battery life of expectation to deduct DC load 230 to carry out the following electricity needed time of operation of appropriateness and calculate the subsequent use duration.
In other embodiments, controller can load the subsequent use duration from NVM 310.In step 620, controller confirms whether AC electric power is resumed.For example, controller can receive the message about the current state of AC input electric power from AC to the DC converter.As another example, whether controller can recover with definite AC electric power to the DC converter by poll AC.Electric power recovers if controller is confirmed AC, and then controller can be back to the electric power operation from AC with switching in step 625 executable operations, and method 600 finishes then.The exemplary method that is used for switching to from battery electric power AC electric power has been described with reference to figure 7 in more detail.
If confirm that at step 620 controller AC electric power does not recover, then in step 630, controller inspection V
UPSWhether less than battery back up (V
OFF) minimum voltage.If controller is confirmed V
UPSLess than V
OFF, then controller can set the timer to the electricity time down in step 630.For example, the following electricity time can be that the DC load is carried out the estimation of electricity needed time of operation down.In some instances, the following electric operation of the DC load infringement that can prevent data degradation and/or avoid the unexpected forfeiture because of DC electric power to cause.If confirm V at step 630 middle controller
UPSBe not less than V
OFF, then can confirm the output voltage (V of battery at step 640 middle controller
BATT) whether be lower than the low threshold value (BATT_LOW) of battery.In certain embodiments, work as V
BATTWhen being lower than BATT_LOW, this can indicate the electric power that for example is stored in the battery is low and can carries out suitable following electricity operation to prevent data degradation.If controller is confirmed V
BATTBe lower than BATT_LOW, then execution in step 635.If controller is confirmed V
BATTBe not less than BATT_LOW, then controller can check whether the subsequent use duration expires.If controller is confirmed subsequent use duration expiration, then execution in step 635.If controller is confirmed the subsequent use duration and is not expired that then repeating step 620.
In addition, in certain embodiments, to host notification V
BATTWhether be lower than BATT_LOW.This main frame then can start-up operation, such as the operational load that reduces processor 160 or be that supporting plate 110 starts time electric process.This can be outside the following steps or alternative following steps: through in Fig. 6, moving on to step 635 and the subsequent use duration is shortened from step 640.
Controller set the timer to the down electric time in step 635 after, controller can check in step 650 whether AC electric power is resumed.Electric power is resumed if controller is confirmed AC, and then execution in step 625.Electric power does not recover if controller is confirmed AC, and then controller confirms whether the electricity time expires down in step 655.If controller is confirmed electricity time not expiration as yet down, then repeating step 650.If controller confirms that the electricity time has expired down, then controller can finish electricity under the UPS (for example, the switch among Fig. 5 530 being broken off) and this method in step 660.
Fig. 7 shows the process flow diagram of exemplary method 700 that diagram is used for switching to from battery back-up power the operation of AC input electric power.For example, be resumed afterwards in AC power failure (for example, referring to the step 625 of Fig. 6) at AC electric power, or after attended operation (for example battery testing operation), controller can switch to the AC operation from battery-operated.
In certain embodiments, controller can postpone transfer from battery power operation to the AC electric power operation for example to weaken peak value (the for example pouring in) electric current to data center 105.Can further provide little fixed delay to guarantee that ac input voltage is stable.
(Fig. 6) is described like refer step 625, and when controller confirmed that AC input electric power has recovered, method 700 can begin.At first, in step 710, controller can be confirmed random delay parameter.For example, random delay parameter can be stored among the NVM 310, and this random delay parameter is illustrated in the operation that switches to the AC power supply and postpones the time span (for example, time, clock period) of (for example 1 millisecond, 1 second, 100 seconds) before.
In certain embodiments, can be randomly or pseudorandom ground confirm random delay parameter.For example; Controller (for example can use seed; Be stored on the UPS 115 and/or the sequence number in the storage register on the mainboard 120, the machine time when supporting plate is activated first etc.) and random number generator generation pseudorandom delay parameter, to generate delay parameter.Delay parameter then can be used and/or is stored among the NVM 310 by controller 245.In another example, delay parameter can be random number (for example, writing down from the physical process such as radioactivity decay), and it is stored among the NVM 310 during the manufacture process of UPS 115.
In other embodiment, delay parameter can be nonrandom, and is based on fully unique value.For example, each time delay can be based on the sequence number that is associated with another assembly of supporting plate 110, UPS 115 or system.
In one embodiment, controller sets the timer to random delay in step 715.In other embodiments, controller can usage counter, real-time clock, the simulation rising with threshold value comparer or attenuator circuit or other delay apparatus that is fit to keep watch on this delay.Then, controller is confirmed V in step 720
BATTWhether be lower than BATT_LOW.If V
BATTBe lower than BATT_LOW, indicate this battery to exhaust, then controller can switch to AC electric power from battery electric power in step 725, and method 700 finishes.For example, controller can cut out battery electric power through the switch in the disconnecting circuit 500 530 (Fig. 5 A).In example data center 105, all batteries unlikely will reach discharge limit in the identical time, thereby estimate that this method can not be increased in the peak point current on the ac input voltage line greatly in most embodiment.
If V in step 720
BATTBe not less than BATT_LOW, then whether expire at step 730 middle controller inspection timer.If do not reach specified delay, then repeating step 720.If reached specified delay, then execution in step 725 and method 700 finish.
In some embodiments, system 100 can have a plurality of power supplys, comprises AC power supplies, battery and boostrap circuit.AC power supplies can be can be to the primary power such as the electric load power supply of DC load 230 and controller 245 of all or part.Battery can as under the situation that primary power breaks down as the subsequent use auxiliary power of primary power.Battery can also be supplied power to the electric load of all or part, and can the same with AC power supplies electric load be supplied power basically.Boostrap circuit can be to the electric load power supply of a part.For example, if electric load comprises DC load 230 and controller, boostrap circuit can be supplied power to controller, but not to 230 power supplies of DC load.
Boostrap circuit can obtain electric power from battery, such as battery 185, or independent battery.In some embodiments, can be by ultracapacitor (super-capacitor) to the boostrap circuit power supply, said ultracapacitor is guiding pack into (boot) to be recharged afterwards supporting plate.
When controller supporting plate 110 initially power on or guide the sequence of packing into during during from the battery-operated AC of switching to operation, can method of application 700.In some embodiments, boostrap circuit can be supplied power to controller before opening battery 185.When being supplied power by boostrap circuit, controller can place the battery mode that obtains electric power from battery 185 with supporting plate 110 before initially powering on of supporting plate.After through battery supporting plate being supplied power, controller can continue method 700.
In other embodiments, controller is supplied power by boostrap circuit and is switched to the AC operation and at first do not switch to battery-operated.For example, boostrap circuit can provide electric power to controller, makes to detect when having AC electric power when controller, and controller can start method 700.In this example, can carry out measurement and the action that depends on battery relatively with boostrap circuit.For example, substitute and in step 720, measure V
BATT, measured the voltage of boostrap circuit and exported V
BOOTIf V
BOOTThe indication boostrap circuit does not have enough voltage and comes the controller power supply, and controller switches to AC electric power (it is similar to step 725) and not waiting timer expiration from boostrap circuit.
In some embodiments, boostrap circuit is only supplied power to microcontroller after the signal of the existence that receives indication AC electric power.In other embodiments, boostrap circuit can provide electric power at preset time.For example, boostrap circuit termly (for example, per minute once) provide electric power to make controller can check the existence of AC electric power to controller.In another example, boostrap circuit can provide electric power to controller in the specific time, such as the opening time that is ranked that is used for supporting plate.
In some embodiments, controller can be kept watch on extra signal (and signal of indication AC existence) and open the counter that programming has delay parameter to determine when.For example, logic AND (with) can there be signal combination in " unlatching " signal and AC in the computing.If AC exists and confirmed start signal, then open counter.Otherwise do not open counter.
In various embodiments, cell voltage can be to be higher than and/or to be lower than the voltage of being regulated on the DC bus.In certain embodiments, AC can be adjusted to set-point voltage to the DC converter, said set-point voltage the battery nominal be full of full voltage (fully charged voltage) 50,100,200,250,400,500 ..., in 1000 millivolts.In various embodiments, regulate set point and can dynamically confirm, for example based on battery characteristics, such as life-span, use history, temperature, internal resistance, duration of charging response, response discharge time or other characteristic relevant with battery circuit.If cell voltage is higher than set-point voltage, then charger can comprise supercharging and/or buck-boost type transducer circuit.
In certain embodiments, supporting plate 110 can be modular supporting structure, and it is configured in a plurality of sites, groove or the position that is installed in the frame 125.Each supporting plate 110 can comprise the substrate such as printed circuit board (PCB) (PCB), and UPS 175 can be integrated in this substrate with mainboard 120 and/or other DC load 230.When in being installed in frame 125 one was middle, supporting plate 110 can be provided for the characteristic of thermal management, comprises the port that is used for air flow.Term " supporting plate " also is not intended to and refers to specific layout, and is meant any layout that is coupled in together with the computer-related components of serving specific purpose, such as mainboard.Supporting plate can be installed in frame level or vertical with other supporting plate usually abreast, so that closeer the trooping that allows than has the computing machine of free support housing and other assembly possibly reach in other cases.Term " blade " also can be used to refer to such equipment.Supporting plate can be realized in specific configuration, comprises as computer server, switch (for example electric switch and optical switch), router, driver or driver bank and other and calculates relevant device.
The embodiment of UPS 115 can be configured to accept various masters or secondary battery technologies.Technology can include but not limited to that ultracapacitor, sealed lead-acid, nickel metal hydride, NI-G, spiral twine plumbic acid, alkalescence and lithium ion.UPS 115 can comprise the circuit of automatic detection battery chemistries, and according to determined battery characteristics adjustment charging and discharge profile information.In certain embodiments, the set point that DC bus 175 is adjusted to DC converter 170 of AC can be the response to automatic detected battery characteristics.In various embodiments, cell voltage can be between about 8 volts and about 26 volts, such as about 9,10,11,12,13 ..., 23,24 or 30 volts.
For example, nominal 12 volt lead acid can have the setpoint adjustments of for example about 13.65 volts correspondence to the DC bus, so that the abundance charging to battery to be provided.Switching under the situation of cell voltage from 13.65 volts of adjustings to the DC bus, will be relatively little to the transient step (being to descend in this situation) of the voltage of the input of DC load, such as less than 1 volt.So little change in the input voltage can fully weaken the adverse transients in the DC load.
Battery 185 can be single battery unit (cell), the combination of the battery unit of perhaps connecting and/or being arranged in parallel.In certain embodiments; One or more batteries among the UPS can heat be changed (hot swappable) in the pattern that is different from the battery back up pattern; In the said pattern that is different from the battery back up pattern, battery during the fault condition on the AC bus 225 to the load discharge.Can provide the visual indicator that maybe can listen whether can be changed by heat to warn battery to the maintenance personnel.
When being installed to 110 last times of supporting plate, battery can be positioned and support is used for changing fast with easily.The sheathed wire (for example quick joining type connector) of various quick connections/break off fast, spring-loadedly electrically contact, snap features, locking trimmer etc. can be used to the clamping battery and be used for firmly connecting and changing fast.
The AC rail voltage as employed at this, can refer to have usually at approximately 47Hz and approximately the AC voltage source of the base frequency between the 500Hz, but not be so limited not inevitablely.Source fixing or that move can be come from the source of AC voltage, and its example can be included in the rotation power generator above vehicular traffic, truck, train, steamer, the aircraft etc.Rotary generator is meant basically from time-varying magnetic field being couple to one or more conductors are essentially sinusoidal voltage with generation and the source of the electric power that obtains.In some embodiments, magnetic field is rotated with respect to one or more conductive winding.In some other embodiments, one or more conductive winding are rotated with respect to static magnetic field.
In one embodiment, to the DC rectification, AC can comprise the characteristic that is used for reducing harmonic distortion, weakens the conduction emission, manages inrush current etc. to DC converter 170 as the unique AC load 230 the power path from the AC generator to DC.Therefore, converter 170 can be incorporated hardware, software or its combination into, so that the startup of for example PFC, spread spectrum (for example frequency hopping) switching frequency, filtration and/or Control current to be provided.
Through the single output voltage that adopts any suitable switching converter and control strategy to be provided at definite set point, can realize the adjusting of 170 pairs of DC bus voltages outputs of converter.Switch topological structure and can include but not limited to that forward-type, reversible, Cuk formula, SEPIC formula, buck, buck-boost formula or any suitable resonant mode or quasi-resonance formula AC are to the DC converter.In an illustrative embodiment; Realize AC to DC rectification and conversion with the proper handling of active switch matrix with four controllable switches at least in part, said four controllable switches are modulated being applied to the ac input voltage on the sensing element of buck arrangement.In another illustrative embodiment, ac input voltage is for example used forward direction or flyback topology magnetic to be couple to DC to the DC switching stage by the rectification of uncontrolled diode rectifier level institute subsequently.In another illustrated examples, the DC that in the back of power factor input stage is one or more cascaded bucks is to the DC converter level, to be created in the voltage of the adjusting on definite set point.The use linear regulation can combine with switch-mode power conversion.From the disclosure, those of ordinary skill in the art will recognize and be used for a plurality of embodiments of AC to DC converter 170.
Reference example such as Fig. 4 be as illustrative example, and some embodiment of system 400 can operate with at least four patterns any.In first pattern, processing unit 405 is the same with UPS115 to be closed.In second pattern, use the electric power that receives from DC bus 175 that battery 185 is charged.In this second pattern, battery 185 can carry out rapid charge or trickle charge according to charging algorithm.In three-mode and since battery from the DC bus break off effectively and AC to the DC converter during DC load 230 supply electrical power for operation neither charging do not discharge yet, battery is " floating ".In four-mode, battery is operably connected to DC bus 175, and discharge is to supply electrical power for operation to DC load 230.These four conditions can be activated in response to the fault condition on AC bus 225.
In various embodiments, the transmission between voltage source can relate to some transition order.For example, AC switchgear 220 (Fig. 2) order of transmission that can use basically " carrying out before the disconnection " or " carry out preceding disconnection " basically comes in any generator 205,210, transmission between 215.When switching to from the AC input operation when battery-operated, in certain embodiments, UPS 115 can battery 185 stride DC bus 175 connect before, basically in the meantime or after forbid the operation of AC to the DC converter.If all converters 175 output currents through for example series diode, then can be forbidden converter 175 to the operation that DC switches through forbid DC simply at mode switching controller (not shown) place.In other embodiments, can come to break off on one's own initiative output through for example semiconductor switch.
A plurality of embodiment of the present invention has been described.Yet, should be appreciated that and can carry out various modifications and do not deviate from the spirit and scope of the present invention.For example, reserve battery and power supply unit all can break away from supporting plate 110 storings.And, if carry out disclosed step, if the assembly in the disclosed system is made up in a different manner, if, can realize favourable result perhaps with the replacement of other assembly or augmented said assembly with different order.Therefore, other embodiment is also within the scope of claim.