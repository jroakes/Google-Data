CN103975601B - The rate distortion complexity optimization of Video coding - Google Patents
The rate distortion complexity optimization of Video coding Download PDFInfo
- Publication number
- CN103975601B CN103975601B CN201280060744.1A CN201280060744A CN103975601B CN 103975601 B CN103975601 B CN 103975601B CN 201280060744 A CN201280060744 A CN 201280060744A CN 103975601 B CN103975601 B CN 103975601B
- Authority
- CN
- China
- Prior art keywords
- video
- complexity
- coding
- bit rate
- distortion
- Prior art date
- Legal status (The legal status is an assumption and is not a legal conclusion. Google has not performed a legal analysis and makes no representation as to the accuracy of the status listed.)
- Active
Links
Classifications
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/134—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or criterion affecting or controlling the adaptive coding
- H04N19/154—Measured or subjectively estimated visual quality after decoding, e.g. measurement of distortion
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/102—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or selection affected or controlled by the adaptive coding
- H04N19/115—Selection of the code volume for a coding unit prior to coding
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/134—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or criterion affecting or controlling the adaptive coding
- H04N19/146—Data rate or code amount at the encoder output
- H04N19/15—Data rate or code amount at the encoder output by monitoring actual compressed data size at the memory before deciding storage at the transmission buffer
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/134—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or criterion affecting or controlling the adaptive coding
- H04N19/146—Data rate or code amount at the encoder output
- H04N19/152—Data rate or code amount at the encoder output by measuring the fullness of the transmission buffer
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/189—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the adaptation method, adaptation tool or adaptation type used for the adaptive coding
- H04N19/192—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the adaptation method, adaptation tool or adaptation type used for the adaptive coding the adaptation method, adaptation tool or adaptation type being iterative or recursive
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/40—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using video transcoding, i.e. partial or full decoding of a coded input stream followed by re-encoding of the decoded output stream
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N21/00—Selective content distribution, e.g. interactive television or video on demand [VOD]
- H04N21/20—Servers specifically adapted for the distribution of content, e.g. VOD servers; Operations thereof
- H04N21/25—Management operations performed by the server for facilitating the content distribution or administrating data related to end-users or client devices, e.g. end-user or client device authentication, learning user preferences for recommending movies
- H04N21/266—Channel or content management, e.g. generation and management of keys and entitlement messages in a conditional access system, merging a VOD unicast channel into a multicast channel
- H04N21/2662—Controlling the complexity of the video stream, e.g. by scaling the resolution or bitrate of the video stream based on the client capabilities
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N21/00—Selective content distribution, e.g. interactive television or video on demand [VOD]
- H04N21/20—Servers specifically adapted for the distribution of content, e.g. VOD servers; Operations thereof
- H04N21/27—Server based end-user applications
- H04N21/274—Storing end-user multimedia data in response to end-user request, e.g. network recorder
- H04N21/2743—Video hosting of uploaded data from client
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/102—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or selection affected or controlled by the adaptive coding
- H04N19/127—Prioritisation of hardware or computational resources
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/134—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the element, parameter or criterion affecting or controlling the adaptive coding
- H04N19/146—Data rate or code amount at the encoder output
- H04N19/147—Data rate or code amount at the encoder output according to rate distortion criteria
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04N—PICTORIAL COMMUNICATION, e.g. TELEVISION
- H04N19/00—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals
- H04N19/10—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding
- H04N19/189—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the adaptation method, adaptation tool or adaptation type used for the adaptive coding
- H04N19/192—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the adaptation method, adaptation tool or adaptation type used for the adaptive coding the adaptation method, adaptation tool or adaptation type being iterative or recursive
- H04N19/194—Methods or arrangements for coding, decoding, compressing or decompressing digital video signals using adaptive coding characterised by the adaptation method, adaptation tool or adaptation type used for the adaptive coding the adaptation method, adaptation tool or adaptation type being iterative or recursive involving only two passes
Abstract
A kind of video coding system being used for for video trusteeship service optimized coding based bit rate, distortion and complexity.The system includes coding module, and coding module is arranged to：Multiple videos are encoded with Bit-Rate Control Algorithm strategy, a pair of complexity distribution control parameters and one or more target output video format specification including target resolution, target bit rate and aimed quality information.Coding module obtains coding bit rate, distortion and the sampling of complexity performance from coding.Coding module is arranged to sample selection optimum code bit rate, distortion and the sampling of complexity performance from coding bit rate, distortion and complexity performance.Coding calculates profile mapping block and is arranged to obtain multiple calculating ranks from the sampling of optimum code bit rate, distortion and complexity performance.For each calculating rank, the complexity distribution control parameter of a pair of optimization and the number of coding pass are selected.
Description
Technical field
Present invention relates generally to video mandatory system, and relate more specifically to a kind of be used in scramble time and bit
Carry out the video coding system of transcoding under rate constraint to video with the visual quality of optimization.
Background technology
Video trusteeship service, such as YOUTUBE, it is allowed to which user delivers video.Most video trusteeship services regard original source
Frequency from its primary coded format (such as MOV) be transcoded into one or more output format (such as ADOBE FLASH or
Windows Media Video(WMV)).Transcoding including the use of the video coder-decoder for native format by source video from
Native format is decoded into uncoded expression and then utilizes the video coder-decoder for output format to uncoded expression
Encoded.Transcoding can be used for reducing memory requirement and also reduce for the bandwidth requirement of client supply video.
For with millions of videos video trusteeship service design video coding system when a challenge be
Transcoding and storage are carried out to video with acceptable visual quality and in reasonable computation cost.One particular problem is efficiently to divide
With coded-bit and calculate to realize the rate distortion of the optimization of source video (R-D) and calculate the time.In general, set the goal
Resolution ratio and frame rate, the visual quality of video are determined by its coding bit rate calculated using rate control algorithm.Often
Video coding system is advised using a variety of coding strategies to obtain the rate distortion of the optimization of source video, these coding strategies include single
Passage (one-pass) and multichannel (multi-pass) mean bit rate coding (ABR), constant bit rate coding (CBR), perseverance
Quantification device encodes (CQP) and constant rate of speed factor coding (CRF).
Conventional coding strategy provides constant visual quality without the video that normal direction encodes and meets the bit associated with video
Rate constrains and does not optimize bit rate, distortion and complexity jointly.Such as ABR coding strategies are using contraction-expansion factor and for a long time
With short-term compensatory to realize target bit rate and meet network wide constraints.But ABR coding visual quality may regarding
Fluctuated during frequency scene change.CBR coding strategies are designed to by the storage buffer control with fixed size with perseverance
The Real Time Streaming of bit rates.CBR highest coding rate is provided among above-mentioned conventional coding strategy but most
Low R-D performances.CQP coding strategies maintain constant quantization device and compress each frame using identical quantization parameter (QP).CQP can
Can especially at it to the video with intensive scene change using large-scale quantizer when cause coding video Time Perception ripple
It is dynamic.CRF coding strategies with the constant rate of speed factor to realize constant visual quality as target.CRF nominal quantization devices enter to video
Row coding but increase QP when scene has a large amount of action and motion and vice versa.The shortcomings that CRF is encoded is to export
Video file size is because the variable scene in video content is without predictable.Therefore, it is difficult to select appropriate constant rate of speed factor values
To meet the required bitrate constraint of network or storage system.
The content of the invention
A kind of method, system and computer program product calculate profile with appropriate coding for video trusteeship service and provide speed
The transcoding of rate-distortion-complexity optimization.
In one embodiment, reinstated with actual coding bit rate and distortion one Bit-Rate Control Algorithm strategy and one or
Multiple complexity distribution control parameters, target bit rate encode to video collection.Complexity performance is obtained from coding to adopt
Sample.Optimum code bit rate, distortion and the sampling of complexity performance are determined from this information, and from all coding bit rates, mistake
The sampling of true and complexity performance obtains multiple calculating ranks.For each computer rank, the complexity distribution control of optimization is selected
The number of parameter processed and coding pass.
Another embodiment includes computer system, and it is video trusteeship service Optimized Coding Based ratio that the computer system, which includes being used for,
Special rate, distortion and complexity include coding module and coding calculates profile mapping block.Another embodiment includes a kind of store
The non-transient computer-readable media that executable computer program for compressing video with manner described above instructs.
The feature and advantage described in the description are not blanket, and specifically, many supplementary features and advantage will
In view of accompanying drawing, description and claims and it is clear by those of ordinary skill in the art.Additionally, it should pay attention in the description
The speech used primarily for readability and instructs purpose and selected, and can not yet be selected for defining or
Subject content disclosed in person's limitation.
Brief description of the drawings
Fig. 1 be diagram with video coding system video trusteeship service system outline block diagram, the Video coding system
System has rate-distortion-complexity (RDC) optimization.
Fig. 2 is that diagram is regarded using the constant-quality guided by video presentation length of the RDC optimizations under bitrate constraint
The flow chart of frequency coding strategy.
Fig. 3 is to utilize being guided by video presentation length for input video of the RDC optimizations under bitrate constraint constant
The flow chart of quality video coding.
Fig. 4 is the flow chart of the coding step of the multichannel Constant Quality video coding strategy under bitrate constraint.
Fig. 5 is the factor, target bit rate, actual bit of the adjustment for the CRF bit rate models of the amendment of example video
The sample data of rate.
Fig. 6 is the flow chart of off-line training coding calculating profile (ECP) mapping block for RDC optimizations.
Fig. 7 be for train CRF reference bits rate models relative to the constant rate of speed factor (CRF) and spatial resolution
The sample data of mean bit rate.
Each figure describes various embodiments of the present invention merely for the purpose of example, and the invention is not restricted to shown in these
Embodiment.Those skilled in the art can use the alternative implementation of structures and methods depicted herein by being readily recognized that from following discussion
Example and without departing from principle of the invention described herein.
Embodiment
I.System survey
Fig. 1 is video trusteeship service of the diagram with the video coding system 102 based on rate-distortion-complexity (RDC)
The block diagram of 100 system view.Multiple user/viewers are regarded using client 110A-N with being sent to video trusteeship service 100
Frequency trustship request, such as the service that request is received to video trustship website uploaded videos and from video trusteeship service 100.Depending on
Frequency trusteeship service 100 communicates via network 130 with one or more client 110A-N.Video trusteeship service 100 is from client
Hold 110A-N to receive video trusteeship service request, carry out transcoding to source video by the video coding system 102 based on RDC and
The source video of transcoding is returned to client 110A-N.Video trusteeship service 100 may reside in system for cloud computing.
Individual entities shown in Fig. 1 are turned to, each client 110 is used for asking video trusteeship service by user.Such as with
Family is used to sharing or playing the request of video to send using client 110 for uploaded videos.Client 110 can be appointed
What the computer equipment of type, such as personal computer (such as desktop type, notebook, on knee) and equipment, such as move
Phone, personal digital assistant, the video player with IP functions.Client 110 generally include processor, display device (or
Output of the person to display device), the client 110 data Cun Chudao that uses user in the task of execution dress is locally stored
Put, such as hard drives or flash memory device and the network interface for being coupled to video trusteeship service 100 via network 130.
Client 110 also have be used to playing video flowing video player 120 (such as from Adobe Systems,
Inc. FlasherTMPlayer etc.).Video player 120 can be that either another application, such as network is used alone is clear
Look at the plug-in unit of device.Player 120 can be realized in the combination of hardware or hardware and software.All these implementations on
The present invention is functionally equivalent.Player 120 includes being used to select video feed, beginning, the use for stopping and refunding video feed
Family interface control (and corresponding API).Player 120 can also include being arranged in its user interface
The video display format selection of which video display format (such as single-definition TV or fine definition TV) indicated.Other classes
The user interface controls (such as button, keyboard control) of type may also be used for controlling the playback and video format choosing of player 120
Select function.
Network 130 realizes the communication between client 110 and video trusteeship service 100.In one embodiment, network
130 be internet and using the internetwork communication technology and agreement of standardization that is currently known or then developing, between these nets
The communication technology and agreement enable client 110 to be communicated with video trusteeship service 100.
Video trusteeship service 100 includes the video coding system 102 based on RDC, video server 104, intake server
106 and video database 108.Intake server 106 receives the video that user uploads and stored in video database 108 and regarded
Frequently.Video server 104 is asked from the supply video of video database 108 in response to user video trusteeship service.Video database
The video that 108 storage users upload and the video based on the transcoding of RDC video coding systems 102.In one embodiment, video counts
(such as 20,000 uploaded the Large video complete or collected works for storing for the video coding system 102 based on RDC according to storehouse 108 by user
Video) to train rate-distortion-complexity Optimized model.
Video coding system 102 based on RDC includes RDC training modules 200 and the video code conversion video 400 based on RDC.
RDC training modules 200 are from video the off-line training constant rate of speed factor (CRF) the bit rate mould being stored in video database 108
Type and coding calculate profile (ECP) mapping block.As further described below, the video code conversion module 400 based on RDC
Using RDC optimization under bitrate constraint with video presentation length (VDL) guide Constant Quality video coding strategy to
Fixed source video carries out transcoding.It is used for by being found via CRF bit rate models and ECP mapping blocks with Pareto-type claim-size set
The RDC optimum codes strategy of each codec complexity rank realizes that RDC optimizes.As beneficial outcomes, source video is transcoded into
Output with the visual quality with optimization under the bitrate constraint associated with the target of source video output video format
Video.
In order to which the system operatio of video trusteeship service 100 is further illustrated, Fig. 2 is to be shown in video trusteeship service
The flow chart of the video coding system 102 based on RDC in 100.User sends to video trusteeship service 100 and regarded for upload source
Frequently 150 request.Video coding system 102 based on RDC receives source video 150 and by based on RDC's with native format
Video code conversion module 400 handles source video 150.The source video 150 of native format has multiple video coding parameters and for example wrapped
Include the video source information of frame rate, spatial resolution and bit rate.
Source video 150 is stored in video database (such as Fig. 1 video database 180) and becomes to store
The part of video complete or collected works 160 in video database.Video complete or collected works 160 are handled by RDC training modules 200.In an implementation
In example, RDC training modules 200 include video encoder 210, CRF reference bits rates model 220 and ECP mapping blocks 230.RDC
Training module 200 is encoded and to the off-line training of video complete or collected works 160 using CRF codings to the video in video complete or collected works 160
CRF reference bits rates model 220 and ECP mapping blocks 230.The CRF reference bits rates 220 constant speed to being encoded in CRF of model
Relation between the rate factor and bit rate is modeled.ECP mapping blocks 230 are by computational complexity rank from CRF coding mappings
Profile and the number of coding pass (pass) are calculated to coding.
CRF reference bits rate model 220 and ECP mould of the video code conversion module 400 based on RDC to RDC training modules 200
The source video 150 that block 230 guides carries out transcoding.In one embodiment, the video code conversion module 400 based on RDC includes amendment
CRF bit rate models 410, video presentation length modules 420 and the transcoder 430 based on RDC.The CRF bit rate moulds of amendment
Type 410 describes the relation between the constant rate of speed factor and actual bit rate to be encoded to source video 150.The CRF of amendment
Bit rate model 410 is based on correcting for the CRF reference bits rates model 220 encoded to input video.Video presentation
What length model 420 described to encode source video 150 includes the calculating complexity of overall, time and space content complexity
Property.Video code conversion module 400 based on RDC is retouched based on the video in the constant rate of speed factor and actual bit rate and source video 150
The relation pair source video 150 stated between the computational complexity of length representative carries out transcoding.
II.Video bitrate-relationship between quality is modeled：CRF reference bits rate models
The constant visual quality that CRF coding strategies are encoded using constant rate of speed factor pair video is target.In general,
The CRF selected for video represents the desired visual quality levels for being encoded in a coding pass to video.With
Big quantization parameter (" QP "), high compression ratio are caused in the big CRF values encoded to video and therefore cause low visual quality.
Small CRF causes small QP, low compression ratio and therefore causes high visual quality.The CRF values for being zero mean Lossless Compression and because
This means highest visual quality.CRF codings are differently compressed by the amount of movement dynamic adjustment QP in frame of video
The different frame of video.
Can be by CRF reference bits rates model (such as Fig. 2 CRF reference bits using the video compression performance of CRF codings
Rate model 220) modeling, wherein video compress quality can be represented by appropriate CRF values.Use the CRF reference bits rate moulds of training
Type, the video coding system 102 based on RDC select the appropriate CRF values for source video, and the CRF values make to carry out to source video
The actual bit rate used during coding can approach the target bit rate associated with the target of source video output video format.Separately
Outside, the CRF reference bits rates model of training is provided on needing how many mean bit rate to be entered using CRF coding strategies to video
The instruction of row coding.For the actual bit rate encoded with the CRF obtained from the CRF reference bits rates of training to source video
It can be used for correcting CRF bit rate models when encoding given source video to export video with the target of source video
Constant visual quality is realized in the bitrate constraint of form association.
With Fig. 2 RDC training modules 200 as an example, RDC training modules 200 are trained to the video in video complete or collected works 160
RCF reference bits rates model 220.The storage of video complete or collected works 160 is with a large amount of more of multiple spatial resolutions, true speed rate and bit rate
Scene video sequence.The video encoder 210 of RDC training modules 200 using CRF codings with the CRF values that are pre-selected to from regarding
Each video that frequency complete or collected works 160 select is encoded and actual bit rate is obtained from coding.Those of ordinary skill in the art
Known any existing Video Coding Scheme can be used for encoding video by video encoder 210.In an implementation
In example, video encoder 210 is the x.264 video encoder that the video of selection is encoded into HD.264/MPEG-4AVC forms.
The other embodiments of video encoder 210 can use VP8 encoders or other available video encoders.
CRF reference bits rates model 220 using video in video complete or collected works 160 encoded (crf,
Bitrate) to being modeled as training sampling to the relation between the bit rate of CRF and CRF codings.In CRF with regarding
Relational dependence between the mean bit rate of the video of frequency complete or collected works in the spatial resolution of video, temporal resolution and is being given tacit consent to
X.264CRF fixed encryption algorithm in encoding.Description is between mean bit rate and spatial resolution, temporal resolution and CRF
Relation it is as follows：
B=f (crf, M, T), (1)
Wherein B is mean bit rate, and M is number of pixels, the i.e. spatial resolution of the luminance component of the frame of video, and T
It is frame number per second, i.e. temporal resolution.Because parameter crf, M and T are substantially independent of one another, it is possible to represent equation
(1) mean bit rate described in is as follows：
B=f1(crf)×f2(M)×f3(T). (2)
CRF reference bits rates model 220 by be fitted sampled representation be found by least squares method four-tuple (crf, M,
T, B).
For the average behavior of the Video coding encoded to single game scape and more scene videos, CRF reference bits rate moulds
Type 220 is according to the number of scenes in video to being weighted from the gained bit rate encoded to video and according to selecting
Scene sum normalization bit rate in the training video for the number selected is as follows：
Wherein B is mean bit rate, BiIt is the actual bit rate encoded to i-th of video, and SiIt is to regard for i-th
Number of scenes in frequency.The residual value error of model is ri=Bi-f(crfi, Mi, Ti).The fitting of CRF reference bits rates model 220
Degree is assessed as follows by error of sum square (SSE) and root-mean-square error (RMSE)：
Wherein riIt is residual value error, and n is fitting number of samples.
In general, assess temporal resolution according to the frame frame rate per second for (fps) unit.For search time point
Influence of the resolution to CRF reference bits rates model 220, along time shaft to selection for training CRF reference bits rate models
220 video carries out down-sampling, and the video of down-sampling is encoded with the half of original frame rate of video.With this
Mode, the version of original video and its down-sampling have the identical display time.Train CRF reference bits rates model 220 with
Each spatial resolution is obtained to the mean bit rate of video, such as fps=12.5 and fps=25, fps=15 and fps=30.
Training result shows that bit rate is almost linearly increasing, in other words with encoding frame rate (fps)：
Based on linear relationship shown in equation (6), the relation described between mean bit rate and frame rate is as follows：
Y=a × T, (7)
Wherein parameter a includes the influence from spatial resolution and CRF.
The exemplary training knot of CRF reference bits rate model 220 of Fig. 7 diagrams with fixed frame rate (i.e. fps=25)
Fruit.Training result shown in Fig. 7 also shows that mean bit rate is the near of spatial resolution in fixed CRF values and mean bit rate
It is CRF approximate exponential function like power function and in fixed space resolution ratio., can when frame rate is different from fps=25
With factor fps/25 zoom models.The one embodiment for training CRF reference bits rates model 220 is to use frame rate fps=25.
In order to explore the relation described in equation (4) between mean bit rate and spatial resolution M, with by original
Have a LPF of video and down-sampling and the classification spatial resolution that obtains the video training CRF of emulation/derivation is referred to than
Special rate model 220.Such as low pass filter is applied to that there is the original of spatial resolution 704x576 to regard by video encoder 210
Frequency is used for anti-aliased.Video encoder 210 carries out down-sampling to obtain with size 352x288 and 176x144 to these videos
Video more low-definition version.Video encoder 210 is with identical CRF values to original 704x576 videos and its down-sampling
More low-definition version is encoded to determine the relation relative to each CRF values between bit rate and spatial resolution.Instruction
Practice result show from different CRF values corresponding to bit rate-spatial resolution broken line close to parallel.Bit rate, which is advanced the speed, to be reduced
Gradually decreased during CRF values together with the increase of spatial resolution.CRF is further trained with the video with a variety of spatial resolutions
Reference bits rate model 220, and training result shows with the video for emulating in bit rate, spatial resolution and CRF
The similar relation of relation between value.
Based on training result, CRF reference bits rates model 220 is to the relation between mean bit rate and spatial resolution
Modeling is as follows：
Y=b × xc, (8)
It is 0 ＜ c ＜ 1 wherein for each CRF values.Function y=b × xcPass through the origin of coordinate frame, it means that zero is empty
Between resolution ratio cause zero bit rate.0 ＜ c ＜ 1 indicate the monotone increasing relation between bit rate and spatial resolution, and put down
Equal bit rate is advanced the speed with smaller than spatial resolution, because the video with more high spatial resolution is in estimation
In have more effective frame in and inter prediction.In one embodiment, parameter c average out to when being adapted to training sampling
0.65.Can be to using the power function described in equation (8) to the mapping between mean bit rate and spatial resolution
It is modeled the middle parameter b obtained for each CRF values.
CRF values can take floating point values.In one embodiment, CRF values are used to x.264CRF encode in scope [0,51]
's.CRF=0 is used for lossless coding, and CRF=51 is used for having minimum file size and the ratio between minimum peak and noise
(PSNR) lossy compression method.Using floating-point RF values to train CRF reference bits rates model 220, only change CRF values, and give tacit consent to
Fixed other coding parameters (such as frame rate) are used to encode video into some object spaces and temporal resolution.Sample CRF
Value 12,14 ... and 34 to encode video into 28-55dB PSNR and with being visually subjected to and gratifying compression matter
Amount.
Can described in below equation (9) under some room and time resolution ratio between Mean Speed and CRF
Relation：
Y=m × enx. (9)
In order to which peer-to-peer (9) is modeled, parameter m is arranged to 1380, and parameter n is arranged to -0.20.Fitting misses
Difference is assessed by SSE=540.3 and RMSE=7.351.Described in equation (4) mean bit rate B and CRF relation (crf, M,
T, B) it can be represented by below equation (10)：
Given that video is encoded through conventional default frame speed, the equation (10) for ignoring parameter T acquisition modifications is as follows：
B=f1(crf)×f2(M)=m × en·crf×Mc. (11)
Thus CRF can be obtained from bit rate B using below equation (12)：
Relative fitness error is assessed per spatial resolution by below equation：
Wherein：
M is spatial resolution,It is the actual bit rate average to the CRF of the video with spatial resolution M,
ΩMIt is the video collection with spatial resolution M, and | ΩM| it is ΩMRadix.ErRepresent relative error,Represent flat
Equal actual bit rate, andRepresent the bit rate from equation (10) estimation.
III.Use the Video coding of the CRF bit rate models of amendment
In order to be encoded with the CRF obtained from the CRF reference bits rates model 220 of training to input video, from pair
The actual bit rate that input video is encoded can deviate from the target bit rate associated with input video.Need CRF with
The CRF bit rate models of amendment between actual bit rate towards for the target bit rate that is encoded to input video to adjust
Whole actual bit rate.In one embodiment, the video code conversion module 400 based on RDC uses the CRF bit rate models corrected
410 to be adapted for the CRF values encoded to input video.The CRF bit rate models 410 of amendment can use below equation
(15) correct：
B=k × f1(crf)×f2(M)=k × m × en·crf×Mc, (15)
Wherein k is the modifying factor associated with by the input video of coding.
In order to be further illustrated amendment, the CRF bit rate models 410 of amendment are first passed through with being associated with input video
Target bit rate alternative parameter B obtains from the mapping between CRF and mean bit rate described in equation (12)
CRF.The gained actual bit rate and its corresponding CRF, i.e. (actual bit rate, CRF) encoded to input video is used for determining
The modifying factor k of equation (15) is as follows：
Fig. 5 is Dynamic gene k, the target bit rate B for example video sequencet, example bit rate BaSample data,
Wherein parameter M represents the spatial resolution of video sequence.
Using the CRF reference bits rates model 220 of training and the CRF bit rate models 410 of amendment, the video based on RDC
Transcoding module 400 can be compiled in the bitrate constraint associated with input video with constant visual quality to input video
Code.Following algorithm represents and input video is encoded with constant visual quality in the bitrate constraint associated with input video
One embodiment.
// * is inputted：Unpressed video and its target bit rate Bt
// * is exported：The video of the compression with constant visual quality in its target bit rate
1：By using BtB is replaced to find crf from the CRF reference bits rates model 220 in equation (12)t；
2：Use crftVideo is encoded and obtains actual bit rate Ba；
3：Pass through (crft, Ba) to obtaining the CRF bit rate models 410 corrected in equation (15)；
4：By using BtB is replaced to find crf from the CRF bit rate models of the amendment of equation (15)a；
5：Use crfaVideo is encoded and obtains the actual bit rate B ' of amendmenta；
6：If B 'aNot close to Bt, then repeat step 3 is until convergence.
Algorithm described herein is a type with the CRF values assessed from the CRF bit rate models of training and amendment
Multichannel CRF is encoded.Convergence criterion in step 6 is in actual bit rate B 'aWith target bit rate BtBetween difference fall in mesh
In mark bit rate ± 10%.
Fig. 4 is the flow that input video is encoded into target bit rate to the output video with constant visual quality
Figure.Initially, the video code conversion module 400 based on RDC receives 401 input videos, and input video has for input
The target bit rate as bitrate constraint that video is encoded.In one embodiment, the target bit rate of input video
Associated with the target output video format of input video.In another embodiment, based on video presentation length described below
(VDL) analyze to correct the target bit rate of input video.Video code conversion module 400 relative to input video target bit rate
Find the 403 constant rate of speed factors (such as replacing mean bit rate parameter B with target bit rate using equation (12)).Transcoding mould
Block 400 carries out coding 405 to input video with the CRF obtained and obtains 407 reality for being used to encode input video
Bit rate.Video code conversion module actual bit rate calculates 409 modifying factors (such as using equation (15)) and uses modifying factor
Son finds the constant rate of speed factor of 411 modifications.Video code conversion module 400 is carried out with the constant rate of speed factor pair input video of modification
Encode 413 and determine that 415 carry out the actual bit rate of own coding 413 whether in the range of target bit rate.In response to reality
Bit rate is in the range of target bit rate, the video of the coding of the output of video code conversion module 400 417.It is special in response to actual ratio
Not in the range of target bit rate, video code conversion module 400 repeats step 409 to 417.
Input video is encoded towards the target bit rate associated with input video, test result shows coding pass
Number average out to 1.8.If input video has the content complexity close with average value, utilize by CRF reference bits
The single channel CRF codings for the CRF values that rate model 220 is found will encode towards target bit rate to video.If input regards
Frequency has the content complexity deviateed from average value, then needs to utilize and found by the CRF bit rate models 410 adaptively corrected
CRF values multichannel CRF coding.
IV.Coding calculates profile (ECP)
Variable content in the scene of video sequence capture causes the information of the various quantity included in the video sequence.
The Large video complete or collected works of given video trusteeship service, different video is caused by identical coding bit rate applied to different video content
Quality.In addition, video trusteeship service 100, which is each video supply various video uploaded to video supply service 100, exports lattice
Formula.Different output formats (such as regard in real time in target playing platform (such as mobile phone and high-definition television), delivering constraint
Frequency stream transmission and order video) and user's contemplated aspects have different video processing target.
A kind of solution to the video progress transcoding with various video format and content complexity is will be not year-on-year
Special rate control strategy is applied to different video.In one embodiment, the video coding system 102 based on RDC regards for given
Frequency output format selects three different bit rates control strategies and at least one Bit-Rate Control Algorithm strategy and volume in coding parameter
Code parameter：
Control _ bit rate,
Control _ quality,
Control _ quality _ bounded _ bit rate.
Control _ bit rate strategy be realize with the target bit rate of video as close possible to the reality encoded to video
Border bit rate.This Bit-Rate Control Algorithm strategy is suitable for the video that mobile video stream transmission is connected with using dialup Internet
Stream transmission.
Control _ quality policy is to realize constant target visual quality regardless of whether for the bit rate realizing it and need such as
What.Control _ quality policy for being encoded with variable complexity to video faces variable actual bit rate, for example for right
The high bit rate and the low bit rate for being encoded to simple video that complicated video is encoded.This Bit-Rate Control Algorithm plan
The Video processing being slightly suitable in distributed video processing environment turns with stream transmission and for high visual coding quality
Code (such as lossless coding quality).
Control _ quality _ bounded _ bit rate strategy is to realize constant target visual quality and maintenance bit rate as far as possible
The upper bound.Therefore, it is allowed to which visual quality is down to below aimed quality rank only for complicated video, and wherein this quality is being distributed
Maximum Bit Rate constraint in can not realize.For more simple video, as long as aimed quality rank desired by realizing, bit rate is just
This Maximum Bit Rate can be less than.
In order to further improve video code conversion performance, the video coding system 102 based on RDC is for using given bit
The transcoder of rate control strategy supports rating calculation rank.Specifically, for Bit-Rate Control Algorithm strategy (such as control _ quality _
Bounded _ bit rate strategy), five different codings that can for example have the video coding system 102 based on RDC to support calculate level
Not：
It is most fast：Most fast transcoding time is provided but for identical bit may not produce most compact output bit flow or
Highest visual quality.For most Bit-Rate Control Algorithm strategies and output format, single channel coding is carried out.
Quickly：Reasonable fast coding is provided.For most Bit-Rate Control Algorithm strategies and output format, single channel volume is carried out
Code.
It is medium：Offer is suitable for most Bit-Rate Control Algorithm strategies and the scramble time of output format compares code efficiency
It is compromise.
At a slow speed：Using it is higher calculating cost coding tools so as in more high coding efficiency, for example in identical bit
Higher visual quality produces the video of transcoding.Such as video coder-decoder x.264 set compression efficiency control parameter " it is default=
It is slower " or " default=placebo " with high visual quality to video to be encoded.
It is most slow：The coding tools for requiring high and complicated using calculating perceives to produce most compact output bit flow and highest
Quality video, such as film workshop quality video.When being measured in terms of PSNR, the visual quality of rank is calculated in this coding
The visual quality that slow speed mode is realized can be equal to or less than.
Have and calculate rank available for multiple codings of transcoder, the video coding system 102 based on RDC implements various turns
Code strategy with the current system load on the server according to factor, such as in network (such as system for cloud computing), for reality
The demand or admissible transcoding delay adaptation coding of condition stream transmission calculate rank.Such as it can be carried out in low calculating rank
It is multiple initially to transmit transcodings as a stream to reduce the delay for live video stream transmission.On the other hand, can use have can
The higher calculating rank of the delay of receiving carries out stream video and reruned, wherein it is to the increased of video to rerun
Popularity responds.
In order to optimize various Bit-Rate Control Algorithm strategies and support based on the grade coding of each Bit-Rate Control Algorithm strategy
Rank is calculated, the video coding system 102 based on RDC follows systematic procedure, and it is not year-on-year that the systematic procedure not only assesses a variety of implementations
The mode of special rate control strategy and consider for each Bit-Rate Control Algorithm strategy Optimal calculation distribution.In one embodiment
In, the training coding of video coding system 102 based on RDC calculates profile (ECP) mapping block 230 in a manner of with fine granularity to counting
Calculation-efficiency trade-off is modeled.
ECP is the computational complexity distribution control parameter that can be easily integrated in x.264 coding.ECP parameters are taken 0
With 1 between floating point values and being used for finely tune it is compromise between bit rate, distortion and computational complexity.Existing bit rate
Control strategy focuses on compromise between the speed of Video coding and distortion.But it is considered as in coding calculating for assessing coding
, it is necessary to be adjusted together with being calculated with coding compromise between speed and distortion during the criterion of efficiency.
Such as in dual pass encoding scheme, first coding pass is faster generally carried out than second coding pass, because
It is used for obtaining some statistical informations of video for first coding pass.The typically consumption of whole dual pass encoding encodes than single channel
The higher calculating of scheme.But do not know whether the single channel coding with high computational complexity is more complicated than with less calculating
The dual pass encoding higher efficiency or more inefficient of property.The quilt of ECP mapping blocks 230 of video coding system 102 based on RDC
Designed for finding the Optimal calculation distribution for the video code conversion (such as based on multichannel transcoding x.264) based on multichannel
And the number of the coding pass of rank is calculated for given coding.
Mould is mapped turning now to Fig. 2, the ECP for training RDC training modules 200 to the video being stored in video complete or collected works 160
Block 230.For each coding strategy, implementations and different rank may may be calculated for the difference for multichannel transcoding
ECP mapping blocks 230 are trained to obtain original rate-distortion-complexity data.Such as using to original rate, distortion, complexity
Property data more criterion Pareto-type claim-size set analysis come further optimize ECP mapping blocks 230 with derive at multiple equal
Away from coding calculate rank be used for each Bit-Rate Control Algorithm strategy optimal transcoding implement and calculate distribution (such as one implementation
In example, there can be five codings to calculate rank：It is most fast, quick, medium, at a slow speed and most calculate rank slowly).
With multichannel x.264 transcoding as an example, ECP mapping blocks 230 pass through { ecp0, ecp1Represent for binary channels
The calculating distribution of coding.ecp0The calculating for representing the first passage of single channel bit rate coding or binary channels bit rate coding is answered
Polygamy.ecp1Represent the computational complexity of the second channel of binary channels bit rate coding.Such as { 0.07, NULL } represents single channel
The computational complexity that bit rate coding is implemented, and { 0.07,0.71 } is that the calculating of binary channels bit rate coding implementation is answered
Polygamy.
For each Bit-Rate Control Algorithm strategy, to the video collection off-line training ECP mapping blocks from video complete or collected works 160
230.Each training sampling associates with rate-distortion-complexity performance, { R, D, C } triple, wherein obtaining reality from training
Coding bit rate (R), distortion (D) is measured by the mean square error (MSE) of the luminance component of frame of video, and complexity (C) is by every
The frame scramble time represents.Below be used for using multichannel x.264 Transcoding Scheme for control _ Bit-Rate Control Algorithm Strategies Training
The algorithm of EPC mapping blocks 230：
1：With being possible to { ecp0, ecp1Pair and different target bit rate using control _ bit rate strategy to training video
Encoded；
2：The sampling of { R, D, C } performance is obtained from training；
3：For training video for each { ecp0, ecp1To smoothly being inserted to distortion D and calculating time C for speed R
Value；
4：Find the Pareto-type claim-size set among { R, D, C } sampling and row interpolation is entered to Pareto set to obtain
Zonal cooling { R, D, C } surface；
5：Time C will be calculated and be divided into 5 evenly spaced continuous ranks；
6：Select rate value and selection bit-rates values for five calculate rank in each calculating rank in pa
{ ecp is selected on the optimal surface of thunder support0, ecp1}；
7：Validity of the strategy of optimization to video is verified by regression test.
In table 1 below illustrate utilize control _ Bit-Rate Control Algorithm strategy by five calculate rank optimizations based on
Point counting is matched somebody with somebody：
Table 1：_ ECP the parameters of Bit-Rate Control Algorithm strategy are controlled using being used for x.264
Calculate rank | ecp0 | ecp1 |
It is most fast | 0.14 | Null value |
Quickly | 0.35 | Null value |
It is medium | 0.07 | 0.50 |
At a slow speed | 0.07 | 0.71 |
It is most slow | 0.42 | 0.71 |
As shown in table 1, a pair of ECP values { ecp are provided for each calculating rank, ECP mapping blocks 2300, ecp1, should
Number and required computational complexity distribution control parameter value to ECP values instruction coding pass.Such as using control _ bit
Rate control strategy encodes to the video with medium computational complexity, and two coding passes can be used for realizing optimization
Rate-distortion-complexity is traded off, and for the first coding pass, ECP values are 0.05, and are for the second coding pass
0.50.In order to be encoded to the video for Real Time Streaming, the scramble time is needed quickly and without unacceptable delay.
Video coding system 102 based on RDC can select to have the single channel of ECP values 0.35 to encode with balancing speed-distortion-complexity
Property is traded off.
In another embodiment, ECP mapping blocks are trained using another Video Coding Scheme VP8 (also referred to as WebM)
230.Substitution calculates profiling parameters (i.e. ecp using coding0、ecp1), VP8 controls (ES) parameter to manage using coding rate
It is compromise between speed, distortion and computational complexity.Table 2 is shown with VP8 encoding schemes, utilizes control _ Bit-Rate Control Algorithm plan
The example of the calculating distribution for being used for five calculating ranks slightly：
Table 2：Using VP8 be used for control _ ECP the parameters of Bit-Rate Control Algorithm strategy
Calculate rank | ES0 | ES1 |
It is most fast | 219 | Null value |
Quickly | 218 | Null value |
It is medium | 220 | 217 |
At a slow speed | 220 | 218 |
It is most slow | 218 | 216 |
For other Bit-Rate Control Algorithm strategies, such as control _ quality policy and control _ quality _ bounded _ bit rate strategy pair
Video from video complete or collected works 160 similarly trains ECP mapping blocks 230.Table 3 shows using x.264 encoding scheme, utilizes control
The calculating of the optimization for being used for five calculating ranks of system _ Quality Control Strategy is distributed and calculated for the corresponding of VP8 encoding schemes
Distribution.In order to realize constant target quality, ECP mapping blocks 230 only suggest that single channel encodes to the video code conversion based on RDC.
Table 4 shows to utilize x.264 encoding scheme, is used for five calculating ranks using control _ quality _ bounded _ Bit-Rate Control Algorithm strategy
Optimization calculating distribution and calculate distribution for the corresponding of VP8 encoding schemes.
Table 3：For controlling _ the ECP parameters and ES parameters of Quality Control Strategy
Table 4：For controlling _ the ECP parameters and ES parameters of quality _ bounded _ Bit-Rate Control Algorithm strategy
Fig. 6 is the flow chart that off-line training EPC mapping blocks 230 are used for the optimization of rate-distortion complexity.Initially, RDC
Training module 200 receives 610 videos from video complete or collected works 160.Video of the video encoder 210 of RDC training modules 200 to selection
Set carry out coding 620 and obtained from training 630 { R, D, C } sampling.EPC mapping blocks 230 are from { R, D, the C } obtained
640 optimal { R, D, C } samplings are found in sampling.Such as ECP mapping blocks 230 find the Pareto among { R, D, C } sampling
Optimal set and row interpolation is entered to Pareto set to obtain zonal cooling { R, D, C } surface.ECP mapping blocks 230 will most
Excellent { R, D, C } sample space divides 650 into multiple computational complexity ranks (such as five calculating rank described above).ECP
The selection of mapping block 230 660 is used for the RDC optimum codes strategy (such as control _ quality _ bounded _ bit rate for each calculating rank
Strategy) and 670 are obtained for each calculating the ECP parameters of rank and the numbers of coding pass.
Video coding system 102 based on RDC can be joined by being adjusted the coding of subsequent encoding pass based on previous coding
Count to optimize multi-channel coding performance.Such as in the dual pass encoding scheme for being encoded to input video, based on RDC
Video coding system 102 can be based on the first coding pass coding parameter (such as bit rate, method for estimating and motion
Vector search range) it is adapted to the coding parameter of the second coding pass.If the actual bit rate of the first coding pass, which is less than, uses phase
With ECP values coding mean bit rate, then it indicate input video there is video content more simpler than average video, can subtract
The ECP values of few second coding pass keep identical rate-distortion to save the calculating for being encoded to input video
Energy.If the actual bit rate of the first coding pass is more than the mean bit rate encoded with identical ECP values, second can be increased
The ECP values of coding pass are to realize more rate-distortion performance gains for being encoded to input video.
V.Encoded with video presentation length (VDL)
Carry out with acceptable visual quality transcoding to source video and need effectively to assess source video to regard in minimum cost
Frequency codec complexity.Ignore visual quality and the user of the video of influence reduction transcoding of the video content complexity to transcoded video
Experience.On need how many bit rate with to the information encoded in some visual quality to video for video coding efficiency
Optimize it is useful because for input video is encoded bitrate information reflection source video video content complexity.
In one embodiment, the video coding system 102 based on RDC using video presentation length to represent regarding for video
Frequency content complexity.VDL is the bit rate in order to be encoded and be needed to video in some visual quality.Different video has
Different VDL.Video with microinching and smoothed image with short VDL, this instruction video be easy to small bit rate but it is high
Visual quality encodes.On the other hand, the video with dense motion and complex text content regards with long VDL, this instruction
Frequency is difficult to encode.
Video presentation length is useful for many applications, such as adaptive video coding and decoding.For video code conversion,
VDL guiding based on RDC video code translator with selection target bit rate or target constant rate factor with by video efficiently
It is encoded into its output video format.Video code translator based on RDC can exist the complexity of input video and reference video
It is compared in terms of their association VDL and determines to be used for input by the existing reasonable coding parameter of incorporated by reference video
The appropriate coding parameter of video.
The VDL information of video can have at least three forms：
Total VDL,
Time VDL, and
SPACE V DL.
Total VDL is actual bit rate of the video when being encoded with ' CRF=26, complexity=most fast ' to it.CRF values
It is configurable parameter, and to show that video has when being encoded with CRF, video being encoded with CRF=26 good for experimental data
Good visual quality.
Time VDL be video it with two different complexity, such as ' CRF=26, complexity=quick ' and ' CRF=
26, complexity=most fast ' actual bit rate difference when being encoded to it.Video with different time complexity is a large amount of not
It is same to be how to handle the motion detected in video soon.How the motion that detects in video will be handled soon rely on
Method for estimating and reference frame number in one or more factor, such as estimation.Represent the one of time VDL
Individual embodiment is the bitrate difference when different complexity levels encode to video using video.
SPACE V DL be bit rate it with two different CRF, such as ' CRF=26, complexity=most fast ' and ' CRF=
28, complexity=most fast ' actual bit rate difference when being encoded to it.In general, motion estimation algorithm prediction is residual
The complexity of value signal complexity reflecting video frame, and the quantization that the conversion coefficient experience CRF values of residual value signal represent.Cause
This, is influenceed and anti-with different CRF values but the bitrate difference of the video of identical complexity grade encoding reduction time factor
Reflect the space complexity of video.Video with greater room VDL is in video with more complicated space content.
Total VDL, time VDL and the SPACE V DL of video can be used for guiding the video code conversion based on RDC.Referring for example to figure
4, the video presentation length modules 420 of the video code conversion module 400 based on RDC are inputted from being encoded to input video
Total VDL, time VDL and the SPACE V DL of video.The conduct in dynamic VDL databases of the VDL data storages of the acquisition of input video
Reference VDL for input video.Such as video presentation length modules 420 maintain the dynamic reference table for total VDL, wherein often
The individual table clause storage mark of input video, total VDL of input video, the temporal resolution and spatial resolution of input video.
After transcoding is carried out to video, video presentation length modules 420 delete the VDL references of input video.Video presentation length mould
Block 420 similarly maintains the dynamic reference table for time VDL and SPACE V DL respectively.For a video for input video
Total VDL that output format obtains can be used for guiding the coding for other video output formats of video.For input video
Time and SPACE V DL that one video output formats obtains can be similarly used for other video output formats of input video.
In another embodiment, the video coding system 102 based on RDC is based on the VDL being stored in dynamic VDL reference tables
Data generate static VDL reference tables for total VDL, the time VDL and SPACE V DL of the video of video complete or collected works 160.Such as total
VDL static VDL reference tables are each individually entered average total VDL data of data for the temporal resolution storage of selection, and
And another static VDL reference tables are used for total VDL for the spatial resolution of selection.The time for selection can similarly be generated
The static VDL reference tables for time VDL and SPACE V DL of resolution ratio or spatial resolution.Can whenever generation or more
Newly static VDL reference tables are updated during record in dynamic VDL reference tables.
For given input video, video presentation length modules 420 calculate input video as described above
Total VDL, time VDL and SPACE V DL and being communicated with the transcoder 430 based on RDC optimizes for rate-distortion complexity.Example
As in response to total VDL of input video is less than the target bit rate of input video, video presentation length modules 420 set input to regard
Total VDL of frequency is as target bit rate.Total VDL is set to help to obtain good visual matter as the target bit rate of input video
Amount.It is more than the SPACE V DL of reference video in response to the SPACE V DL of input video, the instruction of video presentation length modules 420 is based on
RDC transcoder 430 increases and (such as changed complexity level from such as " medium " on the codec complexity of spatial manipulation is horizontal
Become " quick ").Similarly, video presentation length modules 420 instruct the transcoder 430 based on RDC based in input video
Comparison between time VDL and the time VDL of reference video adjusts codec complexity water on the time-triggered protocol of input video
It is flat.
Fig. 3 further illustrates the video code conversion of VDL guiding described above.Initially, the video code conversion module based on RDC
400 receive 310 input videos and input video are encoded via the CRF bit rate models 410 of amendment.Video presentation is grown
Spend total VDL, time VDL and SPACE V DL that module 420 obtains 320 input videos.Video presentation length modules 420 are from amendment
The VDL information of input video is obtained in the coding of CRF bit rate models 420 or voluntarily calculates the VDL information of input video.
Video presentation length modules 420 compare the total VDL and input video of 330 input videos target bit rate and base
(such as it is less than target bit rate to adjust the target bit rate of 340 input videos in comparing in response to total VDL and sets input to regard
Target bit rates of the total VDL of frequency as input video).Video presentation length modules 420 compare the time of 350 input videos
VDL and reference time VDL and based on adjusting 360 Video coding complexity more in time.Video presentation length modules 420
Compare the SPACE V DL and reference SPACE V DL of 370 input videos and be based on more spatially adjusting 380 Video codings complexity
Property.Transcoder 430 based on RDC is answered with target bit rate, time encoding complexity and the space encoding of adjustment as shown in Figure 4
Polygamy carries out coding 390 to input video.Target bit rate, time or the instruction of space encoding complexity of adjustment need difference
ECP values and the number of coding pass are to reflect that target bit rate and codec complexity update.
Limitation the scope of the present invention is not intended to illustrate the operation of preferred embodiment including above description.This hair
Bright scope only is limited by the following claims.From described above, many changes will be clear for various equivalent modifications
And it will be covered by spirit and scope of the present invention.
On a possible embodiment specific detailed description present invention.It will be appreciated by those skilled in the art that can be with
The present invention is realized in other embodiments.First, the specific name of part, the capitalization of term, attribute, data structure or any
Other programmings either configuration aspects and nonessential or important, and the mechanism for realizing the present invention or its feature can have
There are different names, form or agreement.Furthermore it is possible to as described via the combination of hardware and software or completely hard
Implement system in part unit.Particular division of functionality between various system units described here is also only citing rather than must
Need；The function that individual system part performs can be performed instead by multiple parts, and the function that multiple parts perform can be with
Instead performed by single part.
The feature of the present invention is presented in some parts described above in terms of the algorithm of the operation to information and symbol expression.
These arthmetic statements and expression are that those skilled in the art are used for most effectively passing on them to others skilled in the art
The means for the essence that works.These operations are understood to be implemented by computer program when being described in function or in logic.Separately
Outside, by these arrangements of operations be referred to as module or titled with function title also have confirmed it is sometimes convenient and without loss of generality.
Specifically express unless separately having as clear from being currently discussed, it is understood that through specification, utilize such as " place
Reason " either " calculatings " or " computing " or " it is determined that " or the term such as " display " discussion reference computer system or similar
The action of electronic computing device and process, the computer system or the manipulation of similar electronic computing device and conversion are in department of computer science
System memory is either expressed as physics (electricity in register or other such information-storing device, transmission or display devices
Son) quantity data.
Certain aspects of the invention include process steps described herein and instruction in the form of algorithm.It should be noted that
Process steps and the instruction of the present invention are embodied in software, firmware or hardware, and this can be downloaded when being rendered as software
A little process steps and instruction are to reside in the different platform that real-time network operating system uses and be grasped from these different platforms
Make these process steps and instruction.
The present invention also relates to a kind of device for being used to perform operation here.This device can be specially constructed to institute
Purpose is needed, or it can be included in the computer program stored on the computer-readable medium that computer can access selection
The all-purpose computer that ground is activated or reconfigured.Such computer program can be stored in computer-readable recording medium,
Be such as but not limited to include floppy disk, CD, DVD, CD-ROM, any kind of disk of photomagneto disk, read-only storage (ROM), with
Machine access memory (RAM), EPROM, EEPROM, magnetic card either light-card, application specific integrated circuit (ASIC) or are suitable for depositing
Storing up electricity sub-instructions and it is respectively coupled in any kind of medium of computer system bus.In addition, refer in the description
Computer can include single processor or can be used to increase the framework of computing capability with multiprocessor design.
Algorithms and displays presented herein is not inherently relevant with any certain computer or other devices.It is various logical
It can also be used together with system with the program according to teachings herein, or construction more specialized apparatus is walked with performing method
Suddenly it can confirm it is convenient.For these a variety of systems structure will together with equivalence changes it is clear for those skilled in the art institute
Chu.In addition, the present invention is not described with reference to any certain programmed language.Understand that a variety of programming languages can be used for realizing as retouched here
Realization and optimal embodiment party of any reference of the teachings of the present invention and offer to concrete syntax stated so as to the open present invention
Formula.
The good extensive a variety of computer network systems being suitable on many topologys of the invention.In this field
Interior, the configuration of catenet and management include storage device and by network, such as are coupled to dissimilar meter to Internet traffic
The computer of calculation machine and storage device.
Finally it should be noted that the speech used in the description is subject to primarily for readable and teaching purpose
Select and can be used for defining or limiting subject matter content with not selected.Thus, the disclosure is intended to
Illustrate rather than limit the scope of the present invention illustrated in the following claims.
Claims (23)
1. a kind of computer system being used for for video trusteeship service optimized coding based bit rate, distortion and complexity, the system
Including：
Coding module, the coding module are arranged to：
With Bit-Rate Control Algorithm strategy, a pair of complexity distribution control parameters and one or more target output video format specification
Multiple videos are encoded；
Coding bit rate, distortion and the sampling of complexity performance, the complexity are obtained from the coding of the multiple video
Performance sampling is represented to being encoded as the complexity measured by every frame scramble time；
Optimum code bit rate, distortion and complexity are selected from the sampling of the coding bit rate, distortion and complexity performance
It can sample, wherein selection optimum code bit rate, distortion and the sampling of complexity performance include：
Distributed for each pair complexity on the coding bit rate of control parameter, to the coding distortion and codec complexity
Enter row interpolation；With
Based on interpolation selection optimum code bit rate, distortion and the sampling of complexity performance；And
Coding calculates profile mapping block, and the coding calculates profile mapping block and is coupled to the coding module, is configured to use
In：
Multiple calculating ranks are obtained from the sampling of the optimum code bit rate of selection, distortion and complexity performance；With
For each calculating rank, the optimum code bit rate, distortion and the complexity sampling corresponding one with selecting are selected
Control parameter and the number of coding pass are distributed to the complexity of optimization.
2. system according to claim 1, wherein the complexity distributes Bit-Rate Control Algorithm of the control parameter for selection
Strategy is modeled to coding calculating-efficiency trade-off of encoded video.
3. system according to claim 1, wherein coding bit rate, distortion and the complexity of the video in the multiple video
Property performance sampling include：
The coding bit rate encoded to the video；
The distortion measurement encoded to the video, the distortion by means of the luminance component of the frame of the video mean square error
Difference measures；And
The codec complexity represented by every frame scramble time.
4. system according to claim 1, wherein the coding module is additionally configured to：
Find Pareto-type claim-size coding bit rate, distortion and the sampling of complexity performance.
5. system according to claim 1, wherein the rank that calculates includes at least one in following five calculating ranks
Individual calculating rank：It is most fast, quick, medium, at a slow speed and most slow, wherein the most fast calculating rank is used in the multiple calculating level
Video is encoded with the most fast transcoding time among not, and the most slow calculating rank is used in the multiple calculating rank
Among with highest perceive visual quality generation video.
6. system according to claim 5, wherein the coding for most calculating rank described in Bit-Rate Control Algorithm strategy soon
The number of passage is 1.
7. system according to claim 1, wherein the coding, which calculates profile mapping block, is additionally configured to checking use
The validity of control parameter and the number of coding pass is distributed in the complexity of the selection of the Bit-Rate Control Algorithm strategy.
8. system according to claim 1, one pair of which complexity distribution control parameter represents binary channels bit rate coding
In the computational complexity of first passage and the computational complexity of the second channel in bilateral bit rate coding.
9. a kind of method being used for for video trusteeship service optimized coding based bit rate, distortion and complexity, methods described include：
With Bit-Rate Control Algorithm strategy, a pair of complexity distribution control parameters and one or more target output video format specification
Multiple videos are encoded；
Coding bit rate, distortion and the sampling of complexity performance, the complexity are obtained from the coding of the multiple video
Performance sampling is represented to being encoded as the complexity measured by every frame scramble time；
Optimum code bit rate, distortion and complexity are selected from the sampling of the coding bit rate, distortion and complexity performance
It can sample, wherein selection optimum code bit rate, distortion and the sampling of complexity performance include：
Distributed for each pair complexity on the coding bit rate of control parameter, to the coding distortion and codec complexity
Enter row interpolation；With
Based on interpolation selection optimum code bit rate, distortion and the sampling of complexity performance；And
Multiple calculating ranks are obtained from the sampling of the optimum code bit rate of selection, distortion and complexity performance；With
For each calculating rank, select corresponding with the optimum code bit rate, distortion and the sampling of complexity performance selected
A pair of optimization complexity distribution control parameters and coding pass number.
10. according to the method for claim 9, wherein the complexity distributes Bit-Rate Control Algorithm of the control parameter for selection
Strategy is modeled to coding calculating-efficiency trade-off of encoded video.
11. according to the method for claim 9, wherein the coding bit rate of video in the multiple video, distortion and multiple
The sampling of polygamy performance includes：
The coding bit rate encoded to the video；
The distortion measurement encoded to the video, the distortion by means of the luminance component of the frame of the video mean square error
Difference measures；And
The codec complexity represented by every frame scramble time.
12. according to the method for claim 9, wherein selection optimum code bit rate, distortion and the sampling of complexity performance are gone back
Including：
Find Pareto-type claim-size coding bit rate, distortion and the sampling of complexity performance.
13. according to the method for claim 9, wherein the rank that calculates includes at least one in following five calculating ranks
Individual calculating rank：It is most fast, quick, medium, at a slow speed and most slow, wherein the most fast calculating rank is used in the multiple calculating level
Video is encoded with the most fast transcoding time among not, and the most slow calculating rank is used in the multiple calculating rank
Among with highest perceive visual quality generation video.
14. according to the method for claim 13, wherein for the most fast volume for calculating rank described in Bit-Rate Control Algorithm strategy
The number of code passage is 1.
15. according to the method for claim 9, wherein selecting the complexity of the pair of optimization to distribute control parameter and coding
The number of passage also includes complexity distribution control parameter and volume of the checking for the selection of the Bit-Rate Control Algorithm strategy
The validity of the number of code passage.
16. according to the method for claim 9, one pair of which complexity distribution control parameter represents binary channels bit rate coding
In the computational complexity of first passage and the computational complexity of the second channel in bilateral bit rate coding.
17. a kind of equipment being used for for video trusteeship service optimized coding based bit rate, distortion and complexity, the equipment include：
With Bit-Rate Control Algorithm strategy, a pair of complexity distribution control parameters and one or more target output video format specification
The device that multiple videos are encoded；
The device of coding bit rate, distortion and the sampling of complexity performance is obtained from the coding of the multiple video, it is described
The sampling of complexity performance is represented to being encoded as the complexity measured by every frame scramble time；
Optimum code bit rate, distortion and complexity are selected from the sampling of the coding bit rate, distortion and complexity performance
The device that can be sampled, wherein selection optimum code bit rate, distortion and the sampling of complexity performance include：
Distributed for each pair complexity on the coding bit rate of control parameter, to the coding distortion and codec complexity
Enter row interpolation；With
Based on interpolation selection optimum code bit rate, distortion and the sampling of complexity performance；And
The device of multiple calculating ranks is obtained from the sampling of the optimum code bit rate of selection, distortion and complexity performance；With
For each calculating rank, select corresponding with the optimum code bit rate, distortion and the sampling of complexity performance selected
A pair of optimization complexity distribution control parameters and coding pass number destination device.
18. equipment according to claim 17, wherein the complexity distributes bit rate control of the control parameter for selection
System strategy is modeled to coding calculating-efficiency trade-off of encoded video.
19. equipment according to claim 17, wherein the coding bit rate of video in the multiple video, distortion and multiple
The sampling of polygamy performance includes：
The coding bit rate encoded to the video；
The distortion measurement encoded to the video, the distortion by means of the luminance component of the frame of the video mean square error
Difference measures；And
The codec complexity represented by every frame scramble time.
20. equipment according to claim 17, wherein described be used to select optimum code bit rate, distortion and complexity
The device that can be sampled also includes：
Find the device of Pareto-type claim-size coding bit rate, distortion and the sampling of complexity performance.
21. equipment according to claim 17, wherein the calculating rank includes following five and calculated in rank at least
One calculating rank：It is most fast, quick, medium, at a slow speed and most slow, wherein the most fast calculating rank is used in the multiple calculating
Video is encoded with the most fast transcoding time among rank, and the most slow calculating rank is used in the multiple calculating level
Among not visual quality generation video is perceived with highest.
22. equipment according to claim 17, wherein the complexity for being used to select the pair of optimization distributes control
The number destination device of parameter and coding pass also includes being used to verify answering for the selection for the Bit-Rate Control Algorithm strategy
Polygamy distributes the device of the validity of control parameter and the number of coding pass.
23. equipment according to claim 17, one pair of which complexity distribution control parameter represents binary channels bit rate volume
The computational complexity of first passage and the computational complexity of the second channel in bilateral bit rate coding in code.
Applications Claiming Priority (3)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US13/275,084 | 2011-10-17 | ||
US13/275,084 US8934538B2 (en) | 2011-10-17 | 2011-10-17 | Rate-distortion-complexity optimization of video encoding |
PCT/US2012/059192 WO2013059014A1 (en) | 2011-10-17 | 2012-10-08 | Rate-distortion-complexity optimization of video encoding |
Publications (2)
Publication Number | Publication Date |
---|---|
CN103975601A CN103975601A (en) | 2014-08-06 |
CN103975601B true CN103975601B (en) | 2018-01-05 |
Family
ID=48085983
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
CN201280060744.1A Active CN103975601B (en) | 2011-10-17 | 2012-10-08 | The rate distortion complexity optimization of Video coding |
Country Status (4)
Country | Link |
---|---|
US (1) | US8934538B2 (en) |
EP (1) | EP2769553B1 (en) |
CN (1) | CN103975601B (en) |
WO (1) | WO2013059014A1 (en) |
Families Citing this family (22)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
CN103327330B (en) * | 2013-06-14 | 2016-08-10 | 中国计量学院 | The video coding algorithm optimization method selected based on serial algorithm parameter value |
US10123036B2 (en) | 2014-06-27 | 2018-11-06 | Microsoft Technology Licensing, Llc | Motion vector selection for video encoding |
WO2017023829A1 (en) * | 2015-07-31 | 2017-02-09 | Stc.Unm | System and methods for joint and adaptive control of rate, quality, and computational complexity for video coding and video delivery |
GB2543492B (en) * | 2015-10-16 | 2021-11-10 | Digital Barriers Services Ltd | Data Compression |
CN106856571B (en) | 2015-12-09 | 2019-12-06 | 阿里巴巴集团控股有限公司 | Transcoding method and device |
US10812550B1 (en) | 2016-08-03 | 2020-10-20 | Amazon Technologies, Inc. | Bitrate allocation for a multichannel media stream |
US11363322B2 (en) | 2016-12-01 | 2022-06-14 | Brightcove, Inc. | Optimization of encoding profiles for media streaming |
US10771789B2 (en) | 2017-05-19 | 2020-09-08 | Google Llc | Complexity adaptive rate control |
US10924812B2 (en) * | 2018-02-15 | 2021-02-16 | Cisco Technology, Inc. | Constant quality video encoding with encoding parameter fine-tuning |
US10679070B1 (en) * | 2018-02-23 | 2020-06-09 | Facebook, Inc. | Systems and methods for a video understanding platform |
CN108924555B (en) * | 2018-05-04 | 2019-12-27 | 上海交通大学 | Code rate control bit distribution method suitable for video slice |
US11128869B1 (en) * | 2018-10-22 | 2021-09-21 | Bitmovin, Inc. | Video encoding based on customized bitrate table |
CN111161363A (en) * | 2018-11-07 | 2020-05-15 | 合肥图鸭信息科技有限公司 | Image coding model training method and device |
CN111163314A (en) * | 2018-11-07 | 2020-05-15 | 合肥图鸭信息科技有限公司 | Image compression method and system |
CN112468816B (en) * | 2019-09-06 | 2022-07-19 | 上海哔哩哔哩科技有限公司 | Method for establishing fixed code rate coefficient prediction model and video coding |
CN111083473B (en) * | 2019-12-28 | 2022-03-08 | 杭州当虹科技股份有限公司 | Content self-adaptive video coding method based on machine learning |
CN111556316B (en) * | 2020-04-08 | 2022-06-03 | 北京航空航天大学杭州创新研究院 | Rapid block segmentation coding method and device based on deep neural network acceleration |
CN112422967B (en) * | 2020-09-24 | 2024-01-19 | 北京金山云网络技术有限公司 | Video encoding method and device, storage medium and electronic equipment |
US11451790B2 (en) * | 2020-10-09 | 2022-09-20 | Tencent America LLC | Method and apparatus in video coding for machines |
US11490127B2 (en) * | 2020-12-31 | 2022-11-01 | Ati Technologies Ulc | Method and apparatus for providing cloud-based video encoding |
CN112995672B (en) * | 2021-02-04 | 2022-11-18 | 杭州电子科技大学 | Video coding algorithm optimization method based on parameter selection |
US11445252B1 (en) * | 2021-07-08 | 2022-09-13 | Meta Platforms, Inc. | Prioritizing encoding of video data received by an online system to maximize visual quality while accounting for fixed computing capacity |
Family Cites Families (13)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US6628300B2 (en) | 2001-11-30 | 2003-09-30 | International Business Machines Corporation | Transcoding proxy and method for transcoding encoded streams |
US6700935B2 (en) | 2002-02-08 | 2004-03-02 | Sony Electronics, Inc. | Stream based bitrate transcoder for MPEG coded video |
US6980695B2 (en) | 2002-06-28 | 2005-12-27 | Microsoft Corporation | Rate allocation for mixed content video |
US7330509B2 (en) | 2003-09-12 | 2008-02-12 | International Business Machines Corporation | Method for video transcoding with adaptive frame rate control |
US20050232497A1 (en) | 2004-04-15 | 2005-10-20 | Microsoft Corporation | High-fidelity transcoding |
EP1615447B1 (en) * | 2004-07-09 | 2016-03-09 | STMicroelectronics Srl | Method and system for delivery of coded information streams, related network and computer program product therefor |
TWI301953B (en) * | 2005-03-14 | 2008-10-11 | Qisda Corp | Methods and apparatuses for video encoding |
US8238424B2 (en) * | 2007-02-09 | 2012-08-07 | Microsoft Corporation | Complexity-based adaptive preprocessing for multiple-pass video compression |
US8213498B2 (en) | 2007-05-31 | 2012-07-03 | Qualcomm Incorporated | Bitrate reduction techniques for image transcoding |
CN101102495B (en) * | 2007-07-26 | 2010-04-07 | 武汉大学 | A video image decoding and encoding method and device based on area |
WO2010048524A1 (en) | 2008-10-24 | 2010-04-29 | Transvideo, Inc. | Method and apparatus for transrating compressed digital video |
US8270473B2 (en) * | 2009-06-12 | 2012-09-18 | Microsoft Corporation | Motion based dynamic resolution multiple bit rate video encoding |
US8588296B2 (en) | 2009-07-02 | 2013-11-19 | Dialogic Corporation | Bitrate control algorithm for video transcoding systems |
-
2011
- 2011-10-17 US US13/275,084 patent/US8934538B2/en active Active
-
2012
- 2012-10-08 EP EP12842406.6A patent/EP2769553B1/en active Active
- 2012-10-08 CN CN201280060744.1A patent/CN103975601B/en active Active
- 2012-10-08 WO PCT/US2012/059192 patent/WO2013059014A1/en active Application Filing
Also Published As
Publication number | Publication date |
---|---|
EP2769553A4 (en) | 2015-06-17 |
EP2769553B1 (en) | 2019-09-18 |
EP2769553A1 (en) | 2014-08-27 |
US20130094564A1 (en) | 2013-04-18 |
US8934538B2 (en) | 2015-01-13 |
WO2013059014A1 (en) | 2013-04-25 |
CN103975601A (en) | 2014-08-06 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
CN103975601B (en) | The rate distortion complexity optimization of Video coding | |
CN105847807B (en) | For optimizing computer system, the method for the coding of input video | |
CN104641651B (en) | For encoding and delivering the distributed architecture of video content | |
CN106537923B (en) | The technology of adaptive video stream | |
CN105187835B (en) | Adaptive video code-transferring method and device based on content | |
CN102461169B (en) | Motion based dynamic resolution multiple bit rate video encoding | |
US10311558B2 (en) | Efficient image processing on content-adaptive PQ signal domain | |
KR101894420B1 (en) | Adaptive video transcoding method and its system for maximizing transcoding server capacity | |
CN102450014B (en) | Video optimized method and video optimizer is perceived for quality | |
US10542257B2 (en) | Encoders, decoders and methods employing quantization | |
CN104539948A (en) | Video processing system and video processing method | |
JP2023524000A (en) | Dynamic Parameter Selection for Quality Normalized Video Transcoding | |
US9313243B2 (en) | Video streaming over data networks | |
CN109922340A (en) | Image coding/decoding method, device, system and storage medium | |
CN100448295C (en) | Integration code rate control method of low complexity | |
CN100515021C (en) | Image quality and constrained code rate based JPEG2000 code rate control method | |
Al-Abri et al. | Optimal H. 264/AVC video transcoding system | |
US11582462B1 (en) | Constraint-modified selection of video encoding configurations | |
JP7310212B2 (en) | Data relay device, data relay method and program | |
Joset et al. | Visual quality and file size prediction of H. 264 videos and its application to video transcoding for the multimedia messaging service and video on demand | |
Yang et al. | Power-aware adaptive video streaming from the set-top-box to mobile devices |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
C06 | Publication | ||
PB01 | Publication | ||
C10 | Entry into substantive examination | ||
SE01 | Entry into force of request for substantive examination | ||
GR01 | Patent grant | ||
GR01 | Patent grant | ||
CP01 | Change in the name or title of a patent holder | ||
CP01 | Change in the name or title of a patent holder |
Address after: American CaliforniaPatentee after: Google limited liability companyAddress before: American CaliforniaPatentee before: Google Inc. |