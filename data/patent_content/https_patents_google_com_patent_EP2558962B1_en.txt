EP2558962B1 - Rich browser-based word processor - Google Patents
Rich browser-based word processor Download PDFInfo
- Publication number
- EP2558962B1 EP2558962B1 EP11717824.4A EP11717824A EP2558962B1 EP 2558962 B1 EP2558962 B1 EP 2558962B1 EP 11717824 A EP11717824 A EP 11717824A EP 2558962 B1 EP2558962 B1 EP 2558962B1
- Authority
- EP
- European Patent Office
- Prior art keywords
- document
- model
- user
- browser
- character
- Prior art date
- Legal status (The legal status is an assumption and is not a legal conclusion. Google has not performed a legal analysis and makes no representation as to the accuracy of the status listed.)
- Active
Links
Images
Classifications
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F40/00—Handling natural language data
- G06F40/10—Text processing
- G06F40/12—Use of codes for handling textual entities
- G06F40/14—Tree-structured documents
- G06F40/143—Markup, e.g. Standard Generalized Markup Language [SGML] or Document Type Definition [DTD]
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/90—Details of database functions independent of the retrieved data types
- G06F16/95—Retrieval from the web
- G06F16/958—Organisation or management of web site content, e.g. publishing, maintaining pages or automatic linking
Definitions
- This document relates to systems and techniques for managing a browser-based word processor or other form of document manager.
- Cloud-based, or hosted, computing generally involves executing applications via a web browser or web app, and obtaining information for the applications from a remote server system or service.
- Cloud computing provides real advantages over traditional desktop software, such as the ability to access documents from various different computers and locations.
- Office productivity applications are one type of application currently be delivered by the cloud.
- users can employ their web browsers to edit word processing and spreadsheet documents that are stored on hosted server systems, can access enterprise resource planning (ERP) applications, can edit photos, and can perform most other activities that they could previously perform only with desktop productivity software.
- ERP enterprise resource planning
- Web browsers do, however, place a number of limits on programs that run on them, such as JavaScript programs.
- web browsers may offer programmers HTML elements that are very simple to implement but can be rather inflexible.
- a browser text box can be a simple way for a programmer to acquire textual input from a user of a browser, but the manner is which the text is presented is relatively bland, and does not come close to providing a WYSIWYG experience.
- browsers do not provide access to native text rendering capabilities, do not generally permit much flexibility in positioning images on a web page, and cannot natively execute other functions that are expected from a full-featured word processor application.
- T.V. Raman “Cloud Computing and Equal Access for All”, Proceedings of the 17th international World Wide Web Conference, 21 April 2008 , proposes Web-2.0 applications that use the Web as a platform for delivering end-user applications, wherein software applications in this environment are no longer monolithic but instead naturally separated into distributed components that implement application and interaction logic.
- the application logic along with user data resides in the network cloud and the user interface is made up of presentation and interaction logic is delivered in a form best suited to the user's needs, e.g., via a universal client such as a web browser.
- Jason A Wilson “A Web Browser and Editor", 28 March 1996, XP055453911 , proposes WYSIWYG editing with a web browser environment.
- This document describes systems and techniques that may be used to provide a rich word processing application that runs through a web browser and interacts with a server system that manages access to, and editing of, documents by the application.
- the application may operate according to a model-view-controller paradigm.
- the model of a document may be downloaded form a server to each client on which the document is being viewed or edited.
- the model may take a variety of forms, including a one-dimensional character string that is supplemented by a parallel sparse map of styles.
- the character string can include the actual alphanumeric characters in the document and certain control characters such as paragraph breaks.
- the map of styles can include pointers to locations in the character string, and may include tags that turn on and turn off styles in the document so as to create runs of characters having particular styles (e.g., fonts, font sizes, bold, underline, italics, etc.).
- the view may take part or all of the model as it is represented on the client device, and render it into a document object model (DOM) that is accessible to a web browser.
- DOM document object model
- the web browser may then display the document, along with chrome (e.g., buttons and pull-down menus) around the document so that the user may conveniently edit and otherwise interact with the document.
- the controller may intercept keystrokes and mouse actions, among other things, taken with respect to the displayed document, and may update the model and upload such changes, or mutations, to the server system, among other things.
- the view may place new characters (or other spacers) with their formatting each in an off-screen iFrame'd HTML span element to determine the proper area to allot for each character and to determine a position for a next character (and whether a line break will be needed).
- the view may then treat the displayed area for the document as a canvas on which to place a variety of synthetic items that represent the model with various formatting applied.
- a rich browser-based word processing application can be provided to a user, so that she can receive the various benefits of cloud computing (e.g., access from a common browser interface, access without needing to buy and/or download special non-browser application, and ability to share documents more easily across the internet) with the power and flexibility of traditional desktop applications (e.g., WYSIWYG presentation of document) and other features, such as real-time collaborative document editing among multiple users.
- cloud computing e.g., access from a common browser interface, access without needing to buy and/or download special non-browser application, and ability to share documents more easily across the internet
- traditional desktop applications e.g., WYSIWYG presentation of document
- other features such as real-time collaborative document editing among multiple users.
- a computer-implemented method for presenting a document for interaction with a user in a web browser comprises accessing an electronic model of the document, and determining, with a computing device, positions for items in a visual rendering of the electronic model based on relative sizes and positions of other items in the electronic model.
- the method also comprises generating, with the computing device, a document object model (DOM) that defines an editing surface, wherein the DOM (a) places placing the items at the determined positions on the editing surface, (b) places a graphic element that represents a cursor at a determined location on the editing surface, and (c) is arranged to receive user input on the editing surface and to correlate a location of the received user input to a location in the electronic model.
- DOM document object model
- the method may further comprise receiving an entry of a character to the editing surface, determining a display style for the character, placing the character at a determine size with the style in a browser display area that is not visible to the user, and measuring the size of the browser display area to determine a location to display a cursor on the editing surface.
- the browser display area can comprise an HTML span element, and the cursor can be provided as an HTML image element.
- the method can also include receiving a copy command from the user, and in response, populating text that is selected in the browser display area to a hidden contentEditable element, placing focus on the contentEditable element, and making the populated text available to a copy function of the browser.
- the method can further comprise receiving a paste command from the user, and in response, and reading text from a contentEditable element into which the browser has placed selected text, and transforming the text in the contentEditable element into the electronic model of the document.
- the method further comprises uploading, from the computing device to a central server system that is remote form the computing device, information about changes to the document model so that the central server system may maintain a document model that matches the document model on the computing device.
- the uploading can be performed separately for substantially each and every character submitted to the document by a user.
- the method can include receiving, from the central server system, information about changes made to the document by users remote from the computing device, revising the electronic document model to reflect the changes, and automatically rendering at least the revised portion of the document model to update the DOM so that the changes made by the users remote to the computing device are reflected in the DOM.
- a computer-implemented web browser-based document editing system comprises a first rich text model on a client computing device for storing a format for a rich document having text and formatting definitions for the text, and a view programmed to render the model for display to an editing surface that displays the rich document.
- the system can also comprise a controller to intercept and interpret inputs made by a user with respect to the document in the view and to cause the rich text model to be revised in accordance with the user inputs.
- the system can include a second rich text model at a server system remote from the client computing device, and wherein the controller is programmed to provide data that reflects the inputs to both the first and second rich text models.
- the system can include a timer that gathers user inputs over a defined time period before providing data that reflects the inputs to the server system.
- the method also comprises a browser display area that is not visible to a user of the browser, and wherein the view is programmed to render characters entered by a user to the browser display area to determine dimensions for displaying the characters with the view.
- the browser display area can comprise an HTML span element, and the view can be programmed to render the model to a document object model (DOM) for the web browser.
- DOM document object model
- a computer-implemented web browser-based document editing system includes a first rich text model on a client computing device for storing a format for a rich document having text and formatting definitions for the text; a view of the model that is a visual representation of a portion of the model with formatting applied to the model; and means for generating the view from the model and for updating the view in response to receiving keystrokes by a user of the client computing device.
- tangible recordable storage media are disclosed that can store instructions that, when executed, performed any of the operations discussed above in this section.
- a client-based application that runs in a web browser, such as using HTML and JavaScript code, may download a portion of a document model from a server system that hosts the online word processing functionality.
- the application may create a user interface with the browser, and may place an editing surface on the display of the browser where the body of the document is to be displayed.
- the application may intercept keystrokes and other inputs by the user and may determine how the imputs are to be displayed by placing them in an off screen or a highly minimized HTML span element, and measuring the size of such an element to determine the size the characters will be when they are properly displayed.
- the application may also display a synthetic cursor on the editing surface and use the measurements from the span element to determine the location at which to index the cursor after a user has typed a character or made other changes to the document. As the user makes such changes, they may be added to the local model, and in turn added to the display in the browser by rendering the model or the changes to the model into a document object model (DOM) that is accessed by the browser in a familiar manner.
- DOM document object model
- Such changes may also be uploaded to the hosted server system, so that they may be reflected in a master model that is maintained there.
- the changes may be uploaded frequently, such as with every keystroke or other identifiable input by the user, or every particular time period, such as time periods for a fraction of a second, such as 100, 200, 300, or 400 ms.
- FIG. 1 is a conceptual diagram of a browser-based word processing system 100.
- the system 100 in this example, may be implemented using a standard web browser 104 that can download from a hosted server system program code for generating a word processor application within the browser 104, and code that represents a document model 102 of a document to be displayed by the browser 104.
- the system 100 includes both a client, and a server that is providing code to the client and potentially receiving updated document models from a client, though the server has been omitted in this figure for clarity. Additional details about an example server system may be seen in FIG. 2C below.
- the application centers around a web browser 104 that may take a variety of forms, including any one of the standard publicly available web browsers.
- the web browser 104 includes a toolbar 118, which displays browser buttons and a browser address bar in a typical format.
- Below the toolbar 118 is a variety of chrome 120 that has been provided as part of the word processing application loaded on the browser 104.
- the chrome 120 may take a variety of forms and may be laid out in a variety of ways, though a simplified representation is shown here for clarity.
- the chrome 120 may include pull down and pop-up menus in a familiar form with which the user may interact.
- the chrome 120 may also include selectable controls, in the form of icon buttons that a user may click with a mouse or other pointer to perform familiar operations, such as saving or printing a document, undoing or redoing changes, and changing the format and layout of a document, or selecting text within a document.
- a content area 122 is displayed below the chrome 120 and shows the text of a document that a user is currently editing in the browser 104.
- the user has typed a single sentence, has then turned on underlining, and has typed the first part of a second sentence.
- keyboard 108 the user has just recently pressed the "S" key on the keyboard 108 to continue building the sentence that the user is editing.
- a controller 106 which may be implemented in a variety of familiar forms, may be listening to inputs provided to a computer that is running browser 104, and may intercept and interpret such imputs. For example, the controller 108 may recognize that focus was on the word processing application in the browser 104 when the "S" key was pressed, and may thus interpret that input as a user intent to add the letter at a location in the document where the cursor is currently positioned.
- the controller 106 may, when appropriate, report its observations back to the model 102. For example, the controller 106 may track a location in a character string of the model 102 that corresponds to a location of the cursor in a display of the model. The controller 106 may then edit the model 102 in order to reflect the new character that has been typed by the user. Similarly, the controller 106 may recognize that a user has selected a certain span of text, may associate that span with locations in string that mark the beginning and end of the span, and may then recognize that the user has selected a button for making the highlighted text in the span bold, underlined, or italicized.
- the controller 106 may cause an entry to be added to a style map (which stores formatting information for the document) that marks the index locations in the model 102 for the beginning and end locations of the selection, so as to reflect such a change in the model 102.
- a style map which stores formatting information for the document
- the text of a document may be shown in simple plain text one-dimensional character string, and changes in the formatting of the document may be indicated by control characters that are placed in line with the string of text.
- control characters may also be made up of plaintext, but may be preceded by a control character or characters, such as a single or double backslash, among others, which signal that their text is not to be displayed, but is to be used to affect the layout of a display of the document.
- the model 102 may be supplemented by a style map in which more complex styles can be applied to ranges of text in the model 102.
- the model or the style map may point to one or more external entities, such as digital images, tables, and other such entities, so as to indicate that the entities should be inserted into a display of the document when the model 102 is rendered for display.
- Such rendering of a model into a displayable formatted document may occur with the use of a layout engine 110.
- the layout engine 110 may implement a view within a traditional model-view-controller arrangement.
- the layout engine 110 may parse a character string from the model 102 and may refer to a style map to affect formatting and layout for the text in the string.
- the layout engine 110 may then convert such formatting into a document object model (DOM) that it provides to browser 104.
- DOM document object model
- the layout engine 110 may be responsible for the positioning of document content and a synthetic cursor in the content area 122.
- the cursor may be synthetic in that it may simply be an HTML image element, span element with distinctive background color, or similar structure that is placed in the content area 122 at a location in which the application has determined the user has positioned the cursor, either directly by positioning and clicking with a pointer, or indirectly by typing characters. As such, the element will look to a user like it is an actual cursor sitting to the right of the most recently-typed character, except in the situation in which a line break has occurred.
- the cursor may be set as a 2 px wide span with a set background color inside the line DIV that corresponds to the current position in the document.
- the layout engine 110 can look in the paragraph's line cache for the line in which the cursor is located, and determine the top position of the line. The engine 110 may then loop through the line's word buffer and increment a width counter until the desired index word in the line is reached, and then loop the spacers or characters in the word until the desired index position is reached, which provides the left position of the character on which the cursor is currently positioned.
- the cursor may be stored as an offset of the active selection at a selected mark location.
- an absolutely-positioned span may be added to each line DIV with a slight opacity and a background color that contrasts with the main background, and the span may be positioned and sized to match the selection (where the height of the span will be the height of the selection). Such an approach may provide the impression of highlighted text across a span.
- the layout engine 110 may also handle items that are embedded into a document, such as digital images. Embedded objects may be placed at an (x, y) position and bound to a paragraph. When a line is being constructed and an embedded object is located by the layout engine 110 within the bounds of the top of the line and the top+height of the line, the line may be split in two by adding a span with the width of the embedded object plus some padding, where appropriate. The embedded object will thus be relatively positioned at an (x, y) coordinate inside the paragraph div. When the paragraph's y-position changes, the embedded object's position will be recomputed so that it moves with the paragraph. Such an approach may permit the user to better control the particular location of the embedded objects, such as images and animations, in the document.
- the cursor that is shown in browser 104 is a vertical line but it may also be displayed in other forms, such as a box that has a contrasting color with a background color of the document, or a horizontal line.
- the position of the cursor is set at a dimension 124 down from the top of the document and an x-direction 126 from the left edge of the document.
- the base point for such measurements may, however, be any appropriate positions, such as other corners of the document or other such locations.
- the dimensions may also be measured in any appropriate manner, such as a number of pixels, or another accepted rule of measurement.
- the position of each character may then be recorded as the layout engine 110 renders model 102 into a DOM.
- a new character "S" has been typed by a user at the position of the cursor.
- the controller 106 intercepts the character, recognizing that the focus of the computer was on the content area 122 of the browser 104 at the time the key was pressed, and has added the character at the appropriate location into model 102, at the end of the model 102.
- the system 100 will need to determine the size of the character, which can depend on the font size, whether the character is bolded, and other factors.
- an off-screen span element 112 is generated in the browser 104 with the character in the element 112.
- the offsetHeight and offsetWidth of the span may be used to quickly obtain a size for the character, and to set the new location for the cursor.
- the DOM may include three layers or levels of DIVs: an editor DIV level, a paragraph DIV level, and a line DIV level.
- Each paragraph will have a corresponding div inside the main editor div, and the paragraph div's may be stacked on top of each other so that changes in the height of each paragraph div can automatically be reflected in paragraphs below the affected paragraph.
- Each paragraph's div may also be cached in a rich text model for the document.
- These various mechanisms may allow the application running in the browser 104 to provide appropriate layout for the character in the future position of the cursor. For example, if a character has increased in font size substantially from the previous characters, the entire line may be shifted downward appropriately so that the new character will not overlap with the line above. Also, the cursor may be moved in the x-dimension 126 an appropriate distance to take into account the width of the character, as determined in the span element 112. In this manner, the system 100 may support multi-sized fonts, proportionate spacing with characters, and other similar advanced mechanisms for word processing.
- the layout engine 110 places the character "s" in the content area 122, and may regenerate an image for the cursor in a new appropriate location, by updating a DOM for the document. This process may be repeated for each character that is typed into the document model 102.
- the layout engine 110 may loop through all the spacers and build up lines by concatenating the character spacers into a string and incrementing a width counter by the width of each character until a full line-width is taken up, and the line div is filled.
- each space or hyphen may commit the buffered spacers to the line and increment the width counter to the width of the word that is committed. Any remaining non-committed characters get passed to the next line div.
- Each line is thus its own div, and a child of the corresponding paragraph div.
- each of the div's may be relatively positioned, so that they can be easily stacked on top of one another, so as to give a visual effect of normal line wrapping.
- each line it may cache the height, width, top, and left of each line in a separate line cache inside a paragraph object, so as to permit for a quick lookup of such parameters.
- the line cache may also store the location in the character string for the start and end position for the line. The y-position of each paragraph may thus be determined quickly by taking the offsetTop of the paragraph div.
- Style formatting may be applied using span's in each div. For example, while a line is being constructed by the layout engine 110, each spacer will check the formatting of the spacer behind it to determine how that spacer's formatting is different from its own formatting. If there is a difference, a new span will be created in the DOM, and the next spacers will thus be inserted into that span until a new formatting is encountered.
- the DOM may look as follows:
- the system 100 may, when it has updated the model 102 and the content area 122 (or before or simultaneously with doing so), transmit information reflecting the input character or other change to a central server system, so that the new character added by the user may be passed to other client devices that are currently accessing the document.
- Such information may also include an identifier for the particular user, and a revision or mutation identification number that will allow the server system to track the various updates it receives from different clients, and to resolve collisions or inconsistencies among overlapping revisions that it receives from multiple different users or clients.
- automatic line breaks may be enabled in certain implementations. For example, a preset width may be established for each line in a document. When characters on a line are determined to reach that value (such as by measuring by adding the widths of each entered character since the previous automatic line break using the techniques discussed above), the characters will begin to overflow onto the next line, which may be indexed down an appropriate distance. That distance may be selected using the largest character height of any character that is currently in the line. Where an overflow occurs in the middle of a paragraph, the overflow may be allowed to cascade onto the next line until every character fits tightly into the margins of the page.
- the system 100 may, in certain embodiments, include cut-and-paste functionality. Pasting may occur in the system 100 by intercepting paste events (e.g., CTRL-V) from the browser using the controller 106 and setting focus of the computing device to a contentEditable browser element. With the focus set in this manner, the browser 104 may then paste into that element, which may be off-screen, invisible, or otherwise generated so as not to be readily seen or recognized by the user. The system 100 may then read the contents of the contentEditable element and transform the raw HTML from that element into a form that is compatible with data model 102, using appropriate heuristics and other rules.
- paste events e.g., CTRL-V
- Copying may occur in a similar manner. For example, when a user makes a selection in the content area 122, the selection contents may be populated to a hidden contentEditable element. When a copy event is received for the selection, the focus of the system 100 may then be applied to the contentEditable element in the browser's native, and the browser's native copy may take the text from the element.
- An IME is a mechanism by which CJK languages may have input received using traditional Roman characters (A, B, C, ...), and a user, in cooperation with an application, may convert those input characters to appropriate graphical characters, such as Chinese or Japanese kanji characters.
- a transparent contentEditable element may be provided behind the editing surface of the content area 122.
- the margins of the contentEditable is also set to match the margins of the main editing surface.
- the contentEditable element looks, to the user, as if it is an ordinary part of the editing surface for the content area 122.
- the user will see his or her regular IME interface pop up to aid in composing the character or characters.
- the system 100 may read the content of the IME and place that content into the data model 102, such as by execution of the controller 106.
- the system 100 may also resolve situations in which a document uses a right-to-left language such as Arabic, Persian, and Hebrew, or left-to-right, such as English, French, Spanish, Norwegian, and Italian, or a combination that shifts from one to the other and back (e.g., when English proper nouns are included in Arabic text).
- a document uses a right-to-left language such as Arabic, Persian, and Hebrew, or left-to-right, such as English, French, Spanish, Norwegian, and Italian, or a combination that shifts from one to the other and back (e.g., when English proper nouns are included in Arabic text).
- the Unicode bidirectional algorithm (Bidi) may be applied to determine the appropriate representation of the text to be stored in the model 102, and rendered to the content area 122 by way of the layout engine 110.
- tags or markers indicating a style change in the direction in which text is to be displayed may be included in a character string in the model 102, or in a style map that points to the endpoints of any text that is to have its direction shifted from its surrounding text.
- the Bidi algorithm may be implemented, for example, using JavaScript that also implements other features of the layout engine 110.
- a screen reader may access the DOM or the model 102 in a manner similar to the access by layout engine 110, and may provide a spoken representation of what is shown in the content area 122.
- the text around the location of the edits in model 102 may be identified, so as to provide a spoken indication of the context into which the edits are occurring.
- Other spoken indications of what is displayed in content area 122 may also be provided in familiar manners.
- ligatures occur (i.e., multiple characters in order that render as something totally different than those characters, or graphemes are joined as a single glyph)
- the system may apply two steps. For non-Devanagari unicode characters, the system builds ligature tables as part of the character sizing process to allow the sizing process to recognize when two characters in a row will form a smaller/larger glyph than the sum of the width of the two characters individually. If the ligature is identified during processing, the cursor will be placed in the middle of the width of the implicitly drawn glyph.
- the layout engine 110 treats a combined glyph as if it were one character, so that the cursor does not go inside of a ligature.
- the system 100 can generate a pre-caned ligature table that describes which sequences of characters and character patterns will produce glyphs that will throw off cursor position significantly inside of a word, where such data may be sent asynchronously from a stateless server.
- the system 100 may also support printing in similar manners. For example, pagination can be determined easily using the knowledge about line height and control over the flow of lines, discussed above.
- the word wrap locations that are determined may then be sent to a rendering canvas such as a hidden HTML frame from which the document can be directly printed using standard printing functionality of the browser 104.
- FIGs. 2A and 2B are block diagrams showing components of a model-view-controller (MVC) implementation of a word processing application.
- the word processing application for example, may be executed by a web browser, such as the browser 104 shown in FIG. 1 .
- the MVC implementation provides for the download of a model from a remote server to a client, and the rendering of the model into a DOM to form a view of the model that may be managed directly by the web browser.
- the controller may intercept actions, such as clicks on icons and keystrokes on a keyboard, and may cause such actions to be implemented, such as by adding typed characters both to the model on the client and on the remote server (e.g., uploading changes or mutations back to the server, which may be programmed with rules for integrating the mutations into a master model, so that the client-side model matches the master model as the user works).
- actions such as clicks on icons and keystrokes on a keyboard
- a computer application 200A may be configured to display a word processing document 202.
- the application 200A includes, controls, or accesses a model 204A, a view 206A, and a controller 208A.
- the model 204A can contain a representation of the state of the word processing document 202, including such elements as character data, formats, styles, paragraphs, sections, breaks, lists, tables, images, formulas, and the like.
- the view 206A can represent a rendering of the current state of the model 204A.
- the view can provide a visual representation that combines the substance of the document (e.g., its raw text) with formatting and layout information.
- the view when displayed by a browser, provides a form of, if not an exact, WYSIWYG representation of the document that is defied by the model.
- the view 206A can be used for presenting to the user visual information that is associated with the word processing document 202, such as visible user controls for the application (i.e., chrome) and other word processing data.
- the controller 208A can respond to changes in the model 204A or the view 206A, and can update the state of the model 204A and the view 206A. As shown in FIG. 2A , solid lines between the model 204A, the view 206A, and the controller 208A represent direct references between components, and dashed lines represent listeners.
- the controller 208A can modify the model 204A, and can in turn modify the view 206A either directly or indirectly (by causing the view 206A to obtain new model data and render that new data).
- the view 206A can request re-rendering of an updated model or portion of the model. For example, if a user of a client device is only one of multiple users concurrently editing a document, characters and other edits by the other users may be passed to the client device from the server system (and edits by the first user may be passed from the client device to the server system), and the client code may add characters to the model in near real-time, and those changes can be passed into the DOM (e.g., via rendering by the view 206A) - so that each user can see the edits made by the other users very quickly.
- the DOM e.g., via rendering by the view 206A
- a computer application 200B (corresponding with the application 200A) includes, controls, or accesses a model 204B (corresponding with the model 204A), a view 206B (corresponding with the view 206A), and a controller 208B (corresponding with the controller 208A).
- the model 204B can include one or more document models 210.
- Each of the document models 210 can represent a separate document in a collection of word processing documents, for example, and each of the models 210 can include elements such as characters, styles, and entities. Other forms of documents such as spreadsheet documents may also be represented.
- Model data and elements may be provided by a master document model 238 that is stored on a remote server system via a connection to a network 236 (e.g., the internet).
- document text in the models 210 is associated with a series of characters.
- the characters may represent raw text for the word processing document 202, and may also include certain reserved control characters such as characters that indicate the occurrence of a break (e.g., a paragraph break, a page break, or the like).
- each of the document models 210 can include a one-dimensional character string that includes document characters in an order in which they appear in the document.
- Styles may be used to store information related to the presentation of document text (e.g., the series of characters).
- text styles may include character formatting attributes such as font, font size, bold, italics, underline, foreground and background colors, alignment, and other such attributes.
- styles included in each of the document models 210 can be stored in a sparse map.
- the sparse map can include markers that correspond to changes in styles in the document and pointers to positions in the character string.
- the pointers for example, can define style runs between matched markers by specifying locations along the character string at which style changes occur.
- the markers in the matched set may be arranged to be tethered to certain characters in the one-dimensional character string. For example, if text is added between two paired markers, the pointer for one of the markers may shift by an integer equal to a number or characters associated with the added text.
- Entities in each of the models 210 may be used to store information related to objects outside of the document models 210, and may be pointed to by references in the model such as in the one-dimensional character string.
- entities may include objects such as lists, tables, images, and the like.
- the references can include object identifiers and pointers to the one-dimensional character string (e.g., from the sparse map) indicating where in the character string the object should appear, or identifiers from within the character string that point to the entities and mark the locations at which the particular entities are to appear in the document when it is rendered and displayed.
- an image that should appear between two paragraphs may be associated with a special character appearing in the character string after a paragraph marker for one paragraph, and before the first character of the next paragraph.
- the view 206B can generate one or more view items 220 that may enable the user to interact with the application 200B, such as menu bars, tool bars, context menus, chat panes, dialogs, other chrome, and the like.
- the view 206B can also include a document menu 222 that presents information and control options related to one or more of the document models 210, and one or more of a set of per views 224.
- one of the per views 224 may be associated with a corresponding one of the sheet models 210.
- Each of the per views 224 may include components or controls such as selectors (e.g., cursors, selection indicators, and the like) navigation tools (e.g., scrollbars, document maps, outlines, and the like).
- the controller 208B can include one or more controllers 230 that may listen for and handle user interactions with one or more of the view items 220.
- each of the controllers 230 may be associated with a corresponding one of the view items 220.
- menu bar controllers may listen for and handle user interactions with menu bar view items (e.g., relating to various actions that a user would typically take from a row of menu selections)
- tool bar controllers may listen for and handle user interactions with tool bar view items
- context menu controllers may listen for and handle user interactions with context menu view items, and so forth.
- the determination that a particular event has occurred may cause a particular controller 230 to execute predetermined code or otherwise carry out a predetermined process, such as by updating a local model when a key press is received and uploading information about the key press to a central server system.
- the controller 208B can also include a document controller 232 that may listen for and handle user interactions with the document menu 222.
- the controller 208B can include a set of per view controllers 234, where each of the controllers 234 is configured to listen for and handle user interactions with a corresponding view in the set of per views 224.
- Each of the per view controllers 234 may include various controller types, such as key controllers for intercepting and interpreting keyboard input, mouse controllers for intercepting and interpreting mouse input, and model change controllers for intercepting and interpreting model change events.
- the controllers included in the controller 208B can transform user-generated events into model and view mutations. For example, based on a user action, a relevant controller (e.g., a controller configured for handling the action) may receive one or more events associated with the action and make transient changes to the view 206B before the user action is committed. Then, based on the event properties, the relevant controller can construct a command to mutate the model 204B, execute it, and send the updated model or just data for the particular mutations to the remote server system that hosts the document model 238 via the network 236.
- a relevant controller e.g., a controller configured for handling the action
- the relevant controller can construct a command to mutate the model 204B, execute it, and send the updated model or just data for the particular mutations to the remote server system that hosts the document model 238 via the network 236.
- the controllers may also use timers or other mechanisms to aggregate inputs or mutations, so as to lower the number of updates that need to be made to the local or server-based models.
- the controllers may implement changes to the local and/or server-based model in batches that occur within predefined time windows, such as by waiting 200ms after an initial keystroke is sensed before sending to the central server system data about all keystrokes received in the time window.
- Many user interactions with the application 200B are possible, including interactions that are included in single-user sessions and in multiple-user sessions. For purposes of illustration, a series of example user interactions with the application 200B are described here. For example, to enter text into the word processing document 202, the user may proceed by using a computer mouse to select a desired document location 212 for text insertion by clicking on the document 202.
- a mouse controller that is included in the per view controllers 234 can listen for an event that is associated with the mouse positioning input and the mouse click input, and upon intercepting it, can modify the view 206B (e.g., a per view associated with the active document) to provide the user with a visual indicator for the selection (e.g., a cursor).
- the selected location 212 may be associated with a visible cursor (where the cursor is a graphical HTML element such as an image, and is displayed at an appropriate location on a canvas where the document is also being displayed so as to create a synthetic presentation that makes the graphical element look like a true cursor), may be highlighted, or may receive another such modification.
- the selected location 212 may also be associated with a location in the model 204B. For example, a position in a one-dimensional character string included in the document models 210 can be determined, based on the selected location 212.
- a keyboard controller that is included in the per view controllers 234 can listen for events associated with the keyboard input, and upon intercepting them, can modify the view 206B to provide the user with a visual indicator for the input. For example, as the user types text at the location 212, the document 202 may be visually updated to present the text to the user. Additionally, the keyboard controller can modify the model 204B to include entered text by copying the user input to the model. For example, a one-dimensional character string included in the document models 210 can be updated to include the entered characters. Additionally, the document model 238 may be updated to include the entered text, thus coordinating the model 204B with the document model 238.
- changes to the model 204B may be transmitted to the document model 238 via a connection to the network 236.
- changes may be sent periodically (e.g., once every 100 milliseconds, once every 200 milliseconds, once every 500 milliseconds, once every second, once every 2 seconds, or another appropriate time interval).
- changes may be sent based on user activity (e.g., entering a paragraph break, applying a formatting change, navigating to another document section, clicking a save button, or some other action).
- the user may insert an entity (e.g., a list, a table, a hyperlink, an image, or another such object) into the document 202.
- the user may proceed by using a computer mouse to select a desired document location (e.g., the location 212) for entity insertion by clicking on the document 202.
- a mouse controller included in the per view controllers 234 can listen for an event associated with the mouse positioning input and the mouse click input, and upon intercepting it, can modify view 206B to provide the user with a visual indicator for the selected location.
- the user may specify the entity for insertion by interacting with one of the view items 220 or with the document menu 222.
- the user may make a selection on a menu bar to indicate an intent to insert an image.
- a dialog associated with image selection may be presented to the user, enabling the user to select the desired image.
- Model-view-controller interactions for adding the entity within the application 200B may operate in a similar manner as when a user is entering text. For example, as the user inserts the image at the location 212, the document 202, as it is displayed on an editing surface, may be visually updated to present the image to the user. Additionally, the model 204B may be modified to include a reference to the inserted image by writing the reference to the model. For example, one of the document models 210 (e.g., the model associated with the active document) can be updated to include a reference to the inserted image. A one-dimensional character string may be updated to include a special character indicating the position of the image, and the reference to the image may be stored.
- the document models 210 e.g., the model associated with the active document
- a one-dimensional character string may be updated to include a special character indicating the position of the image, and the reference to the image may be stored.
- the image content may be integrated into the document 202 that is displayed to the user.
- the one-dimensional character string may include multiple instances of an identifier for a single entity.
- the image may be positioned at multiple locations in the document 202, specified by multiple positions for the identifier in the one-dimensional character string.
- a single external entity may be shared within a document, or may be shared among multiple documents - both by common references to the external entity.
- the document model 238 may be updated to include the inserted image(s), thus coordinating the model 204B with the document model 238. For example, changes to the model 204B may be transmitted to the document model 238 via a connection to the network 236.
- the user may modify the formatting of text and entities presented in the document 202.
- the user can indicate a desired formatting change (e.g., a change such as changing a font of a selected text block to bold, changing a group of words to be organized as a list, changing a paragraph justification to be right-aligned, changing a document line spacing to be double-spaced, and the like).
- One of the controllers 230 or the document controller 232 can listen for user interaction with the view 206B, and upon detecting the interaction, can modify the model 204B to include the formatting change.
- one of the document models 210 can be updated to include an element in a sparse map of styles defining the formatting change, and defining the locations along the one-dimensional character string at which the changes in style are to occur.
- a model change controller included in the per view controllers 234 can listen for events associated with the model 204B and can send a request to the view 206B to update accordingly (e.g., by rendering a display of formatted text).
- the model change controller may also handle model change events that result from collaborative model changes.
- a document model that is one of the document models 210 may include a subset of the document data from the document model 238.
- a subset of the data e.g., a subset associated with a portion of the document that is currently viewable by the user, plus perhaps a buffer area around the currently viewable area, or viewport, so that small scrolling distances may be handled by normal browser interactions without a need to render additional content form the model
- the full document model 238 may be provided to each client.
- the user may elect to view a different portion of the word processing document 202 than the user is currently viewing in the web browser. For example, by interacting with a scrollbar 214 that is associated with the document 202, the user may indicate an intent to view document data beyond the current viewport, or displayed area.
- One of the per view controllers 234 e.g., the per view controller associated with the active document
- the view 206A may cause itself to be displayed by the browser. For example, a buffer area of document data may be maintained in the model 204B (already rendered into a DOM) around the data that is displayed in the visible area of the document 202. If the amount of scrolling specified by the user is determined by the view 206B to be within the bounds of the buffer area of data, the document display may be updated using such pre-rendered data. If the user specifies a larger amount of scrolling, such that the scrolling specified by the user is determined by the view 206B to be outside of the bounds of the pre-rendered buffer data, for example, additional document data from the document model 238 may be downloaded via the network 236. Thus, the model 204B may be updated with information that is related to additional document sections, and the document may be rendered using the downloaded data.
- FIG. 2C is a block diagram of a system 240 for permitting collaborative editing of a document by multiple users through a hosted server system.
- the system 240 includes a hosted document system 242 executed by one or more computer servers (e.g. a server farm).
- the hosted document system 242 can provide document hosting services to any number of client users via connections to a network 244 (e.g., the internet).
- client users may create new documents, modify existing documents, share documents, and collaboratively work on documents with other users.
- document hosting services may be provided to browser applications 246, 248, and 250.
- Each of the applications may be executed by a web browser (e.g., by the browser 104, as shown in FIG. 1 ), and may include model, view, and controller components (e.g., similar to the application 200, shown in FIGs. 2A and 2B ).
- the applications 246, 248, and 250 may be configured to execute computer code (e.g., JavaScript and other code running in a web browser) to display a word processing interface and to perform word processing functions associated with one or more documents served by the hosted document system 242.
- computer code e.g., JavaScript and other code running in a web browser
- Chris can interact with a web browser 252
- Tina can interact with a web browser 254
- Spike can interact with a web browser 256.
- Each of the browsers 252, 254, and 256 may access any appropriate number of browser applications (e.g., embedded applications, widgets, web services, and the like).
- browser 252 can access application 246, browser 254 can access application 248, and browser 256 can access application 250.
- users of the system 240 can work with one or more documents that are managed and provided by the hosted document system 242.
- the users may access existing documents provided by the system 242 or may create new documents.
- Each of the browser applications 246, 248, and 250 can communicate with an interface 260 of the document system 242 via the network 244.
- communication between the browser applications 246, 248, and 250 and the interface 260 may include HTTP (HyperText Transfer Protocol) requests, SOAP (Simple Object Access Protocol) messages, or some other appropriate such protocol.
- client browsers may maintain browser channel connections to the interface 260 for communicating session data between clients and the document system 242.
- the hosted document system 242 can include sub-components for storing and managing information related to system users, documents, and browser applications.
- the various sub-components may be executed by the same computer server, or may be distributed among multiple computer servers.
- the sub-components may communicate with each other directly (e.g., via messages, transferred files, shared data, remote procedure calls, or some other protocol) or indirectly (e.g., by communicating with an intermediary application).
- sub-components included in the document system 242 can communicate with client applications (e.g., the browser applications 246, 248, and 250) via the interface 260.
- the system 242 can also include one or more data stores for storing user information 270.
- the user information 270 can include information associated with system users (e.g., Chris, Tina, and Spike). Such information may include general user information and login information (e.g., user names, passwords, e-mail addresses, and the like), information related to one or more devices employed by the users to access the system (e.g., IP addresses, browser versions, connection speeds, and the like), and system usage information (e.g., access times, amount of data accessed, and the like), to name a few possibilities.
- system users e.g., Chris, Tina, and Spike
- login information e.g., user names, passwords, e-mail addresses, and the like
- information related to one or more devices employed by the users to access the system e.g., IP addresses, browser versions, connection speeds, and the like
- system usage information e.g., access times, amount of data accessed, and the like
- the system 242 can include one or more data stores for storing documents 272 in the form, e.g., of document models like those discussed above and below.
- the documents 272 can include word processing documents created, maintained, and accessed by system users.
- the documents 272 may be generated by an automated process, such as a news feed or another reporting process that is based on gathered data.
- Information associated with the documents 272 can include document data models, document text, document formatting information, entities (e.g., tables, images, videos, sound clips, or other such objects), and the like.
- the system 242 can also include one or more data stores for storing access information 274.
- the access information 274 can include information that can be used for controlling access of system users (e.g., users included in the user information 270) to system documents (e.g., documents included in the documents 272).
- system users may set access privileges for documents that they create or manage.
- Chris may create a personal letter document and specify the document as being private.
- other users of the system e.g., Tina and Spike
- Tina may upload a schedule document and specify the document as being shared and as being viewable by Chris.
- Spike may be unable to locate or access the document, but Chris may be able to access the document in view-only mode.
- Tina as the document creator, may retain full access to the document, having privileges such as the ability to add, edit, and delete content, having the ability to change privileges, and having the ability to remove the document from the system 242.
- Spike may create a document related to a group project and specify Chris and Tina (and himself) as having full access privileges.
- user groups may be included in the access information 274. For example, a user may create a group and may add one or more users to the group. Rather than select individual users when assigning document permissions, in some instances, users may select a group including the users.
- the access information 274 may also include such information as the user ids of document users, document access times, and the like.
- the system 242 can include one or more data stores for storing HTML/JavaScript 276.
- the HTML/JavaScript 276 can include application code for executing the browser applications 246, 248, and 250.
- the application code may be provided to any of the browsers 252, 254, and 256, for example, when browser users access a web site associated with the hosted document system 242.
- the system 242 may provide the HTML/JavaScript 276 in addition to one or more of the documents 272.
- the browser applications 246, 248, and 250 may render the document data and may provide an interface that enables browser users to interact with the documents.
- technologies other than HTML and JavaScript may be used for providing application code.
- another type of compiled or interpreted code may be provided.
- Many possible user interactions with the system 240 are possible, including interactions in single user sessions and in multiple user sessions.
- multiple users may simultaneously interact with a document.
- the applications used for editing the document may each behave independently, the applications may follow the same editing rules for updating and rendering the document model.
- multiple users may have similar experiences with the document, and may work together to produce a similar document model.
- Chris accesses the hosted document system 242 by directing the web browser 252 to a web site (e.g., a domain) that is associated with the system 242.
- a web site e.g., a domain
- the system 242 can verify Chris's information against the user information 270.
- the system 242 can provide HTML/JavaScript 276 to the browser 252 for executing an online word processor (though certain of the code may be passed before verification occurs).
- the browser can include a portion of the HTML/JavaScript 276 as the browser application 246, render chrome associated with the application, and display the application to Chris.
- Chris may interact with the browser application 246 via a set of controls displayed in an application view within the browser 252. For example, Chris may indicate an intent to create a new document by clicking a button or selecting a menu option displayed in the application view.
- the application controller can intercept the command and pass the command to the interface 260 via the network 244. Receiving the command, the system 242 can add a new document to the documents 272, and add information associated with the new document to the set of active models 262.
- the active models 262 may include model information associated with documents currently being edited by other users of the system 242.
- a corresponding version of a model in the set of active models 262 may be present at the browser application 246.
- Chris may add content and make changes to the word processing document provided by the view of the browser application 246, and the corresponding content and changes can be applied to a model that is accessed by the browser application 246 (and associated HTML and JavaScript code running in the browser), and may be propagated to the active models 262.
- Chris may also share the document with one or more users. For example, using controls associated with the application 246, Chris may select Tina and Spike as users who may share the document, and he may assign both Tina and Spike full document privileges. For example, Tina and Spike may be included in a presented list of users commonly sharing documents with Chris, and Chris may select Tina and Spike from the list. As another example, Chris may provide the e-mail addresses of Tina and Spike.
- the system 242 can store the sharing information (e.g., user ids of other users having access to the document, permissions levels for the users, and the like) in the access information 274.
- the system 242 may send messages (e.g., e-mail, text messages, instant messages, and the like) to users who have received document privileges.
- messages e.g., e-mail, text messages, instant messages, and the like
- users who have received document privileges may receive a link (e.g., a hyperlink or URL) to the shared document.
- Tina and Spike may access the document using their web browsers 254, 256.
- the system 242 can provide HTML/JavaScript 276 to the browser 254, 256 for executing an online word processor.
- the browsers can include a portion of the HTML/JavaScript 276 as the browser applications 248, 250, can render chrome associated with the application, and can display the applications.
- an active model manager 264 included the hosted document system 242 can identify which documents are currently open by users of the system, and users who are active in the document (i.e., Chris), and can set up a collaborative session. For example, the active model manager 264 can determine that the document requested by Tina and by Spike is associated with one or more of the active models 262. The system 242 can then forward the document request to a computer hosting the document, and the computer can associate Tina and Spike with the current session. Additionally, the browser applications 248, 250 can download model data associated with the active model(s) 262, and render and display the downloaded model data. In some implementations, the system 242 can create model instances for Tina and for Spike and can add the instances to the active models 262.
- users may be able to view their own cursors as well as the cursors of other users in a collaborative session.
- each user's cursor appears to himself/herself as a square.
- Chris may view his own cursor as a square, and the other users' cursors as a circle or as a triangle.
- Tina and Spike may also view their own cursor as a square, and the other users' cursors as circles or triangles.
- the cursors may appear as a different color (which could not be shown here).
- cursors may generally appear as underlines or vertical bars, where the cursors are different colors for each user.
- changes made by each of the users can be sent by the browser applications 246, 248, and 250 to the hosted document system 242, coordinated, and sent back to the other users.
- the changes can be sent at time intervals (e.g., once every 100 milliseconds, once every 200 milliseconds, once every 500 milliseconds, once every second, once every 2 seconds, or another appropriate time interval).
- sending can be based at least in part on user activity or inactivity. For example, during periods of user inactivity, changes may be sent or received less frequently than during periods of user activity.
- a pop-up label that identifies the other user may be displayed, so that the local user can identify who is making changes - though the label may then disappear so that it does not continue to block the document.
- the hosted document system 242 can include collaboration logic 266.
- the collaboration logic 266 can be executed by one or more code modules executed by one or more computer servers associated with the system 242.
- portions of the collaboration logic can be executed by the browser applications 246, 248, and 250.
- the logic 266 can resolve data collisions (e.g., instances where multiple users edit the same document portion or apply conflicting document formats) by applying a consistent set of rules to all user changes. Although, in some instances, one or more users may be prompted to disambiguate a change.
- Spike may be presented with a message from the browser application 250 including possible conflict resolution scenarios.
- one user may be identified as trumping other users in collision situations.
- Chris as the document creator, for example, may be able to apply his changes over changes made by either Tina or Spike in cases of conflict. For example, if Spike edits a passage at the same time as Chris deletes it, the passage (including Spike's edits) may be deleted.
- the system shown in FIG. 2C may handle collaborative editing of a hosted document by multiple users at one time.
- the management of such editing can involve a low amount of data passing between the various sub-systems in the system.
- FIG. 3 is a flow chart of an example process for displaying an electronic document and interacting with a user who is editing the document.
- the process tracks the steps that may be taken by a browser-based application when a user enters one or more characters into a document that is being displayed by the application.
- the process may result in the displayed document (and a corresponding document model) being updated so that the user immediately sees the effect of his or her actions.
- the process begins at box 302, were a cursor location on a canvas is established by the application. For example, a user of the application may click in an area of a paragraph of text in order to start editing the middle of that paragraph of text. To determine the location of the cursor, its X, Y coordinates on an editing surface may be compared to cached coordinates corresponding to characters that are on the surface, to indicate the locations of each character that is being displayed on the editing surface. Such a comparison may indicate a closest space between characters, which is where the cursor may be drawn so that the user can see that his or her input for placing the cursor has been recognized by the application.
- a keystroke is captured when the canvas is active.
- the web browser may be only one of multiple applications that are currently executing on a computer, and keystrokes captured by the computer may be relevant to the web browser (and the word processing application running in he web browser) only when the web browser is the focus of the computer.
- the keystroke may be captured, for example, by a controller such as controller 106 in FIG. 1 above.
- the controller may identify a location in a document model, such as document model 102 above, and may insert the character at that location (box 306).
- the application may also be executing a layout engine such as layout engine 110 in FIG 1 above.
- the layout engine may identify character parameters for the character, at box 308. Those parameters may include, for example, a font height, a bold, underlined, or italics for the character, or other appropriate parameters that are relevant to the location in which the characters to be placed in a display area for a word processing application.
- those parameters are used to generate the character in a span element is located in a position off the content area or canvas where the portion of the document is being displayed to a user.
- a hidden span element may be constructed in manners like those discussed above.
- the width and height of the character may be determined using the span element, such as using the techniques described above that are discussed with respect to FIG. 1 .
- the character is generated on the canvas or content area in the browser with the appropriate formatting, and at the location determined by using the span element.
- a new location for a cursor may be determined, because the cursor has been indexed forward by the entry of the new character.
- the new location of the cursor may be identified as a location that is to the right of the previous location for the cursor, by the width of the new character, as determined from the span element.
- the process determines whether this position is past the edge of a line or margins for the line in which the character is to be added. If it is not, the cursor stays in the line in which it was previously located, though with the computed horizontal shift. If it is beyond the edge, a new vertical position for the cursor is computed at box 320, such as by adding a vertical distance that corresponds to the span element that was identified in box 312. The element that generates the cursor may then be re-implemented at the new location. This process may then repeat for each input or small group of inputs provided by the user (e.g., where the grouping of operations is selected to be small enough that lag in updating the model is not a distraction to the user).
- words are allowed to extend slightly past a right margin of a line.
- word wrap may be implemented using techniques discussed above with respect to FIG. 1 .
- the particular process shown here omits relevant details discussed above with respect to FIG. 1 , for simplicity.
- spacers other than alphanumeric characters may be provided by a user, such as by a user attempting to insert an entity that is referenced by a document model.
- the processing of such alternative types of entries may occur by mechanisms that are discussed above, or that may be conveniently determined by the discussions above.
- FIG. 4 shows an example of a generic computer device 400 and a generic mobile computer device 450, which may be used with the techniques described here.
- Computing device 400 is intended to represent various forms of digital computers, such as laptops, desktops, workstations, personal digital assistants, servers, blade servers, mainframes, and other appropriate computers.
- Computing device 450 is intended to represent various forms of mobile devices, such as personal digital assistants, cellular telephones, smartphones, and other similar computing devices.
- the components shown here, their connections and relationships, and their functions, are meant to be exemplary only, and are not meant to limit implementations of the inventions described and/or claimed in this document.
- Computing device 400 includes a processor 402, memory 404, a storage device 406, a high-speed interface 408 connecting to memory 404 and high-speed expansion ports 410, and a low speed interface 412 connecting to low speed bus 414 and storage device 406.
- Each of the components 402, 404, 406, 408, 410, and 412, are interconnected using various busses, and may be mounted on a common motherboard or in other manners as appropriate.
- the processor 402 can process instructions for execution within the computing device 400, including instructions stored in the memory 404 or on the storage device 406 to display graphical information for a GUI on an external input/output device, such as display 416 coupled to high speed interface 408.
- multiple processors and/or multiple buses may be used, as appropriate, along with multiple memories and types of memory.
- multiple computing devices 400 may be connected, with each device providing portions of the necessary operations (e.g., as a server bank, a group of blade servers, or a multi-processor system).
- the memory 404 stores information within the computing device 400.
- the memory 404 is a volatile memory unit or units.
- the memory 404 is a non-volatile memory unit or units.
- the memory 404 may also be another form of computer-readable medium, such as a magnetic or optical disk.
- the storage device 406 is capable of providing mass storage for the computing device 400.
- the storage device 406 may be or contain a computer-readable medium, such as a floppy disk device, a hard disk device, an optical disk device, or a tape device, a flash memory or other similar solid state memory device, or an array of devices, including devices in a storage area network or other configurations.
- a computer program product can be tangibly embodied in an information carrier.
- the computer program product may also contain instructions that, when executed, perform one or more methods, such as those described above.
- the information carrier is a computer- or machine-readable medium, such as the memory 404, the storage device 406, memory on processor 402, or a propagated signal.
- the high speed controller 408 manages bandwidth-intensive operations for the computing device 400, while the low speed controller 412 manages lower bandwidth-intensive operations.
- the high-speed controller 408 is coupled to memory 404, display 416 (e.g., through a graphics processor or accelerator), and to high-speed expansion ports 410, which may accept various expansion cards (not shown).
- low-speed controller 412 is coupled to storage device 406 and low-speed expansion port 414.
- the low-speed expansion port which may include various communication ports (e.g., USB, Bluetooth, Ethernet, wireless Ethernet) may be coupled to one or more input/output devices, such as a keyboard, a pointing device, a scanner, or a networking device such as a switch or router, e.g., through a network adapter.
- input/output devices such as a keyboard, a pointing device, a scanner, or a networking device such as a switch or router, e.g., through a network adapter.
- the computing device 400 may be implemented in a number of different forms, as shown in the figure. For example, it may be implemented as a standard server 420, or multiple times in a group of such servers. It may also be implemented as part of a rack server system 424. In addition, it may be implemented in a personal computer such as a laptop computer 422. Alternatively, components from computing device 400 may be combined with other components in a mobile device (not shown), such as device 450. Each of such devices may contain one or more of computing device 400, 450, and an entire system may be made up of multiple computing devices 400, 450 communicating with each other.
- Computing device 450 includes a processor 452, memory 464, an input/output device such as a display 454, a communication interface 466, and a transceiver 468, among other components.
- the device 450 may also be provided with a storage device, such as a microdrive or other device, to provide additional storage.
- a storage device such as a microdrive or other device, to provide additional storage.
- Each of the components 450, 452, 464, 454, 466, and 468 are interconnected using various buses, and several of the components may be mounted on a common motherboard or in other manners as appropriate.
- the processor 452 can execute instructions within the computing device 450, including instructions stored in the memory 464.
- the processor may be implemented as a chipset of chips that include separate and multiple analog and digital processors.
- the processor may provide, for example, for coordination of the other components of the device 450, such as control of user interfaces, applications run by device 450, and wireless communication by device 450.
- Processor 452 may communicate with a user through control interface 458 and display interface 456 coupled to a display 454.
- the display 454 may be, for example, a TFT LCD (Thin-Film-Transistor Liquid Crystal Display) or an OLED (Organic Light Emitting Diode) display, or other appropriate display technology.
- the display interface 456 may comprise appropriate circuitry for driving the display 454 to present graphical and other information to a user.
- the control interface 458 may receive commands from a user and convert them for submission to the processor 452.
- an external interface 462 may be provide in communication with processor 452, so as to enable near area communication of device 450 with other devices.
- External interface 462 may provide, for example, for wired communication in some implementations, or for wireless communication in other implementations, and multiple interfaces may also be used.
- the memory 464 stores information within the computing device 450.
- the memory 464 can be implemented as one or more of a computer-readable medium or media, a volatile memory unit or units, or a non-volatile memory unit or units.
- Expansion memory 474 may also be provided and connected to device 450 through expansion interface 472, which may include, for example, a SIMM (Single In Line Memory Module) card interface.
- SIMM Single In Line Memory Module
- expansion memory 474 may provide extra storage space for device 450, or may also store applications or other information for device 450.
- expansion memory 474 may include instructions to carry out or supplement the processes described above, and may include secure information also.
- expansion memory 474 may be provide as a security module for device 450, and may be programmed with instructions that permit secure use of device 450.
- secure applications may be provided via the SIMM cards, along with additional information, such as placing identifying information on the SIMM card in a non-hackable manner.
- the memory may include, for example, flash memory and/or NVRAM memory, as discussed below.
- a computer program product is tangibly embodied in an information carrier.
- the computer program product contains instructions that, when executed, perform one or more methods, such as those described above.
- the information carrier is a computer- or machine-readable medium, such as the memory 464, expansion memory 474, memory on processor 452, or a propagated signal that may be received, for example, over transceiver 468 or external interface 462.
- Device 450 may communicate wirelessly through communication interface 466, which may include digital signal processing circuitry where necessary. Communication interface 466 may provide for communications under various modes or protocols, such as GSM voice calls, SMS, EMS, or MMS messaging, CDMA, TDMA, PDC, WCDMA, CDMA2000, or GPRS, among others. Such communication may occur, for example, through radio-frequency transceiver 468. In addition, short-range communication may occur, such as using a Bluetooth, WiFi, or other such transceiver (not shown). In addition, GPS (Global Positioning System) receiver module 470 may provide additional navigation- and location-related wireless data to device 450, which may be used as appropriate by applications running on device 450.
- GPS Global Positioning System
- Device 450 may also communicate audibly using audio codec 460, which may receive spoken information from a user and convert it to usable digital information. Audio codec 460 may likewise generate audible sound for a user, such as through a speaker, e.g., in a handset of device 450. Such sound may include sound from voice telephone calls, may include recorded sound (e.g., voice messages, music files, etc.) and may also include sound generated by applications operating on device 450.
- Audio codec 460 may receive spoken information from a user and convert it to usable digital information. Audio codec 460 may likewise generate audible sound for a user, such as through a speaker, e.g., in a handset of device 450. Such sound may include sound from voice telephone calls, may include recorded sound (e.g., voice messages, music files, etc.) and may also include sound generated by applications operating on device 450.
- the computing device 450 may be implemented in a number of different forms, as shown in the figure. For example, it may be implemented as a cellular telephone 480. It may also be implemented as part of a smartphone 482, personal digital assistant, or other similar mobile device.
- implementations of the systems and techniques described here can be realized in digital electronic circuitry, integrated circuitry, specially designed ASICs (application specific integrated circuits), computer hardware, firmware, software, and/or combinations thereof.
- ASICs application specific integrated circuits
- These various implementations can include implementation in one or more computer programs that are executable and/or interpretable on a programmable system including at least one programmable processor, which may be special or general purpose, coupled to receive data and instructions from, and to transmit data and instructions to, a storage system, at least one input device, and at least one output device.
- the systems and techniques described here can be implemented on a computer having a display device (e.g., a CRT (cathode ray tube) or LCD (liquid crystal display) monitor) for displaying information to the user and a keyboard and a pointing device (e.g., a mouse or a trackball) by which the user can provide input to the computer.
- a display device e.g., a CRT (cathode ray tube) or LCD (liquid crystal display) monitor
- a keyboard and a pointing device e.g., a mouse or a trackball
- Other kinds of devices can be used to provide for interaction with a user as well; for example, feedback provided to the user can be any form of sensory feedback (e.g., visual feedback, auditory feedback, or tactile feedback); and input from the user can be received in any form, including acoustic, speech, or tactile input.
- the systems and techniques described here can be implemented in a computing system that includes a back end component (e.g., as a data server), or that includes a middleware component (e.g., an application server), or that includes a front end component (e.g., a client computer having a graphical user interface or a Web browser through which a user can interact with an implementation of the systems and techniques described here), or any combination of such back end, middleware, or front end components.
- the components of the system can be interconnected by any form or medium of digital data communication (e.g., a communication network). Examples of communication networks include a local area network ("LAN”), a wide area network (“WAN”), and the Internet.
- LAN local area network
- WAN wide area network
- the Internet the global information network
- the computing system can include clients and servers.
- a client and server are generally remote from each other and typically interact through a communication network.
- the relationship of client and server arises by virtue of computer programs running on the respective computers and having a client-server relationship to each other.
Description
- This application claims priority to
U.S. Provisional Application Serial No. 61/323,242, filed on April 12, 2010 - This document relates to systems and techniques for managing a browser-based word processor or other form of document manager.
- Cloud-based, or hosted, computing generally involves executing applications via a web browser or web app, and obtaining information for the applications from a remote server system or service. Cloud computing provides real advantages over traditional desktop software, such as the ability to access documents from various different computers and locations. Office productivity applications are one type of application currently be delivered by the cloud. For example, users can employ their web browsers to edit word processing and spreadsheet documents that are stored on hosted server systems, can access enterprise resource planning (ERP) applications, can edit photos, and can perform most other activities that they could previously perform only with desktop productivity software.
- Web browsers do, however, place a number of limits on programs that run on them, such as JavaScript programs. For example, web browsers may offer programmers HTML elements that are very simple to implement but can be rather inflexible. For example, a browser text box can be a simple way for a programmer to acquire textual input from a user of a browser, but the manner is which the text is presented is relatively bland, and does not come close to providing a WYSIWYG experience. Also, browsers do not provide access to native text rendering capabilities, do not generally permit much flexibility in positioning images on a web page, and cannot natively execute other functions that are expected from a full-featured word processor application.
- T.V. Raman: "Cloud Computing and Equal Access for All", Proceedings of the 17th international World Wide Web Conference, 21 April 2008, proposes Web-2.0 applications that use the Web as a platform for delivering end-user applications, wherein software applications in this environment are no longer monolithic but instead naturally separated into distributed components that implement application and interaction logic. The application logic along with user data resides in the network cloud and the user interface is made up of presentation and interaction logic is delivered in a form best suited to the user's needs, e.g., via a universal client such as a web browser.
Jason A Wilson: "A Web Browser and Editor", 28 March 1996, XP055453911, proposes WYSIWYG editing with a web browser environment. - This document describes systems and techniques that may be used to provide a rich word processing application that runs through a web browser and interacts with a server system that manages access to, and editing of, documents by the application. The application may operate according to a model-view-controller paradigm. The model of a document may be downloaded form a server to each client on which the document is being viewed or edited. The model may take a variety of forms, including a one-dimensional character string that is supplemented by a parallel sparse map of styles. The character string can include the actual alphanumeric characters in the document and certain control characters such as paragraph breaks. The map of styles can include pointers to locations in the character string, and may include tags that turn on and turn off styles in the document so as to create runs of characters having particular styles (e.g., fonts, font sizes, bold, underline, italics, etc.). The view may take part or all of the model as it is represented on the client device, and render it into a document object model (DOM) that is accessible to a web browser. The web browser may then display the document, along with chrome (e.g., buttons and pull-down menus) around the document so that the user may conveniently edit and otherwise interact with the document. The controller may intercept keystrokes and mouse actions, among other things, taken with respect to the displayed document, and may update the model and upload such changes, or mutations, to the server system, among other things. To provide near or actual WYSIWYG capability, the view may place new characters (or other spacers) with their formatting each in an off-screen iFrame'd HTML span element to determine the proper area to allot for each character and to determine a position for a next character (and whether a line break will be needed). The view may then treat the displayed area for the document as a canvas on which to place a variety of synthetic items that represent the model with various formatting applied.
- Such features may, in certain implementations, provide one or more advantages. For example, a rich browser-based word processing application can be provided to a user, so that she can receive the various benefits of cloud computing (e.g., access from a common browser interface, access without needing to buy and/or download special non-browser application, and ability to share documents more easily across the internet) with the power and flexibility of traditional desktop applications (e.g., WYSIWYG presentation of document) and other features, such as real-time collaborative document editing among multiple users.
- In one implementation, a computer-implemented method for presenting a document for interaction with a user in a web browser is disclosed. The method comprises accessing an electronic model of the document, and determining, with a computing device, positions for items in a visual rendering of the electronic model based on relative sizes and positions of other items in the electronic model. The method also comprises generating, with the computing device, a document object model (DOM) that defines an editing surface, wherein the DOM (a) places placing the items at the determined positions on the editing surface, (b) places a graphic element that represents a cursor at a determined location on the editing surface, and (c) is arranged to receive user input on the editing surface and to correlate a location of the received user input to a location in the electronic model. The method may further comprise receiving an entry of a character to the editing surface, determining a display style for the character, placing the character at a determine size with the style in a browser display area that is not visible to the user, and measuring the size of the browser display area to determine a location to display a cursor on the editing surface. The browser display area can comprise an HTML span element, and the cursor can be provided as an HTML image element. The method can also include receiving a copy command from the user, and in response, populating text that is selected in the browser display area to a hidden contentEditable element, placing focus on the contentEditable element, and making the populated text available to a copy function of the browser. The method can further comprise receiving a paste command from the user, and in response, and reading text from a contentEditable element into which the browser has placed selected text, and transforming the text in the contentEditable element into the electronic model of the document.
- In certain aspects, the method further comprises uploading, from the computing device to a central server system that is remote form the computing device, information about changes to the document model so that the central server system may maintain a document model that matches the document model on the computing device. Also, the uploading can be performed separately for substantially each and every character submitted to the document by a user. Moreover, the method can include receiving, from the central server system, information about changes made to the document by users remote from the computing device, revising the electronic document model to reflect the changes, and automatically rendering at least the revised portion of the document model to update the DOM so that the changes made by the users remote to the computing device are reflected in the DOM.
- In another implementations, a computer-implemented web browser-based document editing system is disclosed that comprises a first rich text model on a client computing device for storing a format for a rich document having text and formatting definitions for the text, and a view programmed to render the model for display to an editing surface that displays the rich document. The system can also comprise a controller to intercept and interpret inputs made by a user with respect to the document in the view and to cause the rich text model to be revised in accordance with the user inputs. Moreover, the system can include a second rich text model at a server system remote from the client computing device, and wherein the controller is programmed to provide data that reflects the inputs to both the first and second rich text models. In addition, the system can include a timer that gathers user inputs over a defined time period before providing data that reflects the inputs to the server system.
- In certain aspects, the method also comprises a browser display area that is not visible to a user of the browser, and wherein the view is programmed to render characters entered by a user to the browser display area to determine dimensions for displaying the characters with the view. The browser display area can comprise an HTML span element, and the view can be programmed to render the model to a document object model (DOM) for the web browser.
- In yet another implementation, a computer-implemented web browser-based document editing system is disclosed that includes a first rich text model on a client computing device for storing a format for a rich document having text and formatting definitions for the text; a view of the model that is a visual representation of a portion of the model with formatting applied to the model; and means for generating the view from the model and for updating the view in response to receiving keystrokes by a user of the client computing device. In other implementations, tangible recordable storage media are disclosed that can store instructions that, when executed, performed any of the operations discussed above in this section.
- The invention is encompassed by the subject-matter of the claims. Any additional embodiments disclosed herewith are to be regarded as exemplary.
-
-
FIG. 1 is a conceptual diagram of a browser-based word processing system. -
FIGs. 2A and 2B are block diagrams showing components of a model-view-controller implementation of a spreadsheet application. -
FIG. 2C is a block diagram of a system for permitting collaborative editing of a documented by multiple users through a hosted server system. -
FIG. 3 is a flow chart of an example process for displaying an electronic document and interacting with a user who is editing the document. -
FIG. 4 shows an example of a computer device and a mobile computer device that can be used to implement the techniques described here. - Like reference symbols in the various drawings indicate like elements.
- This document describes systems and techniques for browser-based word processing applications. As discussed in more detail below, a client-based application that runs in a web browser, such as using HTML and JavaScript code, may download a portion of a document model from a server system that hosts the online word processing functionality. The application may create a user interface with the browser, and may place an editing surface on the display of the browser where the body of the document is to be displayed. The application may intercept keystrokes and other inputs by the user and may determine how the imputs are to be displayed by placing them in an off screen or a highly minimized HTML span element, and measuring the size of such an element to determine the size the characters will be when they are properly displayed. The application may also display a synthetic cursor on the editing surface and use the measurements from the span element to determine the location at which to index the cursor after a user has typed a character or made other changes to the document. As the user makes such changes, they may be added to the local model, and in turn added to the display in the browser by rendering the model or the changes to the model into a document object model (DOM) that is accessed by the browser in a familiar manner.
- Such changes may also be uploaded to the hosted server system, so that they may be reflected in a master model that is maintained there. To enable collaborative editing of a document, the changes may be uploaded frequently, such as with every keystroke or other identifiable input by the user, or every particular time period, such as time periods for a fraction of a second, such as 100, 200, 300, or 400 ms.
-
FIG. 1 is a conceptual diagram of a browser-basedword processing system 100. Thesystem 100, in this example, may be implemented using astandard web browser 104 that can download from a hosted server system program code for generating a word processor application within thebrowser 104, and code that represents adocument model 102 of a document to be displayed by thebrowser 104. Thus, thesystem 100 includes both a client, and a server that is providing code to the client and potentially receiving updated document models from a client, though the server has been omitted in this figure for clarity. Additional details about an example server system may be seen inFIG. 2C below. - As shown here conceptually, the application centers around a
web browser 104 that may take a variety of forms, including any one of the standard publicly available web browsers. As is familiar, theweb browser 104 includes atoolbar 118, which displays browser buttons and a browser address bar in a typical format. Below thetoolbar 118 is a variety ofchrome 120 that has been provided as part of the word processing application loaded on thebrowser 104. Thechrome 120 may take a variety of forms and may be laid out in a variety of ways, though a simplified representation is shown here for clarity. Thechrome 120 may include pull down and pop-up menus in a familiar form with which the user may interact. Thechrome 120 may also include selectable controls, in the form of icon buttons that a user may click with a mouse or other pointer to perform familiar operations, such as saving or printing a document, undoing or redoing changes, and changing the format and layout of a document, or selecting text within a document. - A
content area 122 is displayed below thechrome 120 and shows the text of a document that a user is currently editing in thebrowser 104. In this example, the user has typed a single sentence, has then turned on underlining, and has typed the first part of a second sentence. As shown bykeyboard 108, the user has just recently pressed the "S" key on thekeyboard 108 to continue building the sentence that the user is editing. Acontroller 106, which may be implemented in a variety of familiar forms, may be listening to inputs provided to a computer that is runningbrowser 104, and may intercept and interpret such imputs. For example, thecontroller 108 may recognize that focus was on the word processing application in thebrowser 104 when the "S" key was pressed, and may thus interpret that input as a user intent to add the letter at a location in the document where the cursor is currently positioned. - The
controller 106 may, when appropriate, report its observations back to themodel 102. For example, thecontroller 106 may track a location in a character string of themodel 102 that corresponds to a location of the cursor in a display of the model. Thecontroller 106 may then edit themodel 102 in order to reflect the new character that has been typed by the user. Similarly, thecontroller 106 may recognize that a user has selected a certain span of text, may associate that span with locations in string that mark the beginning and end of the span, and may then recognize that the user has selected a button for making the highlighted text in the span bold, underlined, or italicized. In such a situation, thecontroller 106 may cause an entry to be added to a style map (which stores formatting information for the document) that marks the index locations in themodel 102 for the beginning and end locations of the selection, so as to reflect such a change in themodel 102. - In one example for a model, such as
model 102 shown in the figure, the text of a document may be shown in simple plain text one-dimensional character string, and changes in the formatting of the document may be indicated by control characters that are placed in line with the string of text. For example, control characters may also be made up of plaintext, but may be preceded by a control character or characters, such as a single or double backslash, among others, which signal that their text is not to be displayed, but is to be used to affect the layout of a display of the document. Although not shown here, themodel 102 may be supplemented by a style map in which more complex styles can be applied to ranges of text in themodel 102. Also, the model or the style map may point to one or more external entities, such as digital images, tables, and other such entities, so as to indicate that the entities should be inserted into a display of the document when themodel 102 is rendered for display. - Such rendering of a model into a displayable formatted document may occur with the use of a
layout engine 110. Thelayout engine 110 may implement a view within a traditional model-view-controller arrangement. Thelayout engine 110 may parse a character string from themodel 102 and may refer to a style map to affect formatting and layout for the text in the string. Thelayout engine 110 may then convert such formatting into a document object model (DOM) that it provides tobrowser 104. - The
layout engine 110 may be responsible for the positioning of document content and a synthetic cursor in thecontent area 122. The cursor may be synthetic in that it may simply be an HTML image element, span element with distinctive background color, or similar structure that is placed in thecontent area 122 at a location in which the application has determined the user has positioned the cursor, either directly by positioning and clicking with a pointer, or indirectly by typing characters. As such, the element will look to a user like it is an actual cursor sitting to the right of the most recently-typed character, except in the situation in which a line break has occurred. The cursor may be set as a 2 px wide span with a set background color inside the line DIV that corresponds to the current position in the document. - To determine the position for the cursor, the
layout engine 110 can look in the paragraph's line cache for the line in which the cursor is located, and determine the top position of the line. Theengine 110 may then loop through the line's word buffer and increment a width counter until the desired index word in the line is reached, and then loop the spacers or characters in the word until the desired index position is reached, which provides the left position of the character on which the cursor is currently positioned. - If the cursor has a selection or a range of characters, it may be stored as an offset of the active selection at a selected mark location. To draw such a selection, an absolutely-positioned span may be added to each line DIV with a slight opacity and a background color that contrasts with the main background, and the span may be positioned and sized to match the selection (where the height of the span will be the height of the selection). Such an approach may provide the impression of highlighted text across a span.
- The
layout engine 110 may also handle items that are embedded into a document, such as digital images. Embedded objects may be placed at an (x, y) position and bound to a paragraph. When a line is being constructed and an embedded object is located by thelayout engine 110 within the bounds of the top of the line and the top+height of the line, the line may be split in two by adding a span with the width of the embedded object plus some padding, where appropriate. The embedded object will thus be relatively positioned at an (x, y) coordinate inside the paragraph div. When the paragraph's y-position changes, the embedded object's position will be recomputed so that it moves with the paragraph. Such an approach may permit the user to better control the particular location of the embedded objects, such as images and animations, in the document. - The cursor that is shown in
browser 104 is a vertical line but it may also be displayed in other forms, such as a box that has a contrasting color with a background color of the document, or a horizontal line. As shown inFIG. 1 , the position of the cursor is set at adimension 124 down from the top of the document and an x-direction 126 from the left edge of the document. The base point for such measurements may, however, be any appropriate positions, such as other corners of the document or other such locations. The dimensions may also be measured in any appropriate manner, such as a number of pixels, or another accepted rule of measurement. The position of each character may then be recorded as thelayout engine 110 rendersmodel 102 into a DOM. - As shown here, an example is provided in which a new character "S" has been typed by a user at the position of the cursor. The
controller 106 intercepts the character, recognizing that the focus of the computer was on thecontent area 122 of thebrowser 104 at the time the key was pressed, and has added the character at the appropriate location intomodel 102, at the end of themodel 102. To determine how the character is to be displayed in thecontent area 122, however, thesystem 100 will need to determine the size of the character, which can depend on the font size, whether the character is bolded, and other factors. In order to determine the size of the character, an off-screen span element 112 is generated in thebrowser 104 with the character in theelement 112. The size of theelement 112 may then be determined by standard mechanisms. For example, when the "S" key's selection is recorded on a onKeyDown event, the span may be set up as follows:
<span style=font-weight: bold;>A</span> - The offsetHeight and offsetWidth of the span may be used to quickly obtain a size for the character, and to set the new location for the cursor.
- In order to locate various items such as lines and characters properly in the
content area 122, the DOM may include three layers or levels of DIVs: an editor DIV level, a paragraph DIV level, and a line DIV level. Each paragraph will have a corresponding div inside the main editor div, and the paragraph div's may be stacked on top of each other so that changes in the height of each paragraph div can automatically be reflected in paragraphs below the affected paragraph. Each paragraph's div may also be cached in a rich text model for the document. - These various mechanisms may allow the application running in the
browser 104 to provide appropriate layout for the character in the future position of the cursor. For example, if a character has increased in font size substantially from the previous characters, the entire line may be shifted downward appropriately so that the new character will not overlap with the line above. Also, the cursor may be moved in the x-dimension 126 an appropriate distance to take into account the width of the character, as determined in thespan element 112. In this manner, thesystem 100 may support multi-sized fonts, proportionate spacing with characters, and other similar advanced mechanisms for word processing. - With the entered character's parameters determined, and the position for the next character determined, then, the
layout engine 110 places the character "s" in thecontent area 122, and may regenerate an image for the cursor in a new appropriate location, by updating a DOM for the document. This process may be repeated for each character that is typed into thedocument model 102. - With the height and width of each character position, or spacer, determined for a paragraph or larger portion of a document, the
layout engine 110 may loop through all the spacers and build up lines by concatenating the character spacers into a string and incrementing a width counter by the width of each character until a full line-width is taken up, and the line div is filled. To permit wrapping to occur at word breaks, each space or hyphen may commit the buffered spacers to the line and increment the width counter to the width of the word that is committed. Any remaining non-committed characters get passed to the next line div. Each line is thus its own div, and a child of the corresponding paragraph div. Also, each of the div's may be relatively positioned, so that they can be easily stacked on top of one another, so as to give a visual effect of normal line wrapping. - For example, given the text "Hi my name is Micah what is you name", and where the margin cuts off in the middle of the name Micah, the DOM will look like:
<div> //Main editor DIV <div style="position: relative"> //paragraph DIV <div style="position: relative">Hi my name is Micah</div> <div style="position: relative">what is you name</div> </div> </div>
<div> <div style="position: relative"> Hi my<span style="font-weight: bold">name</span> is Micah </div> <div style="position: relative"> What is your <span style="font-weight: italic">name</span> </div> </div>
Claims (11)
- A computer-implemented method for presenting a document for interaction with a user in a web browser, the method comprising:accessing an electronic model of the document;determining, with a computing device, positions for items in a visual rendering of the electronic model based on relative sizes and positions of other items in the electronic model;generating, with the computing device, a document object model, DOM, that represents at least part of the electronic model and defines an editing surface, wherein the DOM:(a) places the items at the determined positions on the editing surface,(b) places a graphic element that represents a cursor at a determined location on the editing surface, and(c) is arranged to receive user input on the editing surface and to correlate a location of the received user input to a location in the electronic model;receiving an entry of a character to the editing surface;determining a display style for the character;generating in the web browser an off-screen span element with the character with the determined style in the element;wherein determining a position of an item corresponding to the character in the visual rendering of the electronic model includes determining a size of the off-screen span element.
- The computer-implemented method of claim 1, wherein the browser display area comprises an HTML span element.
- The computer-implemented method of claim 2, wherein the cursor is provided as an HTML image element.
- The computer-implemented method of claim 1, further comprising receiving a copy command from the user, and in response, populating text that is selected in the browser display area to a hidden contentEditable element, placing focus on the contentEditable element, and making the populated text available to a copy function of the browser.
- The computer-implemented method of claim 1, further comprising receiving a paste command from the user, and in response, reading text from a contentEditable element into which the browser has placed selected text, and transforming the text in the contentEditable element into the electronic model of the document.
- The computer-implemented method of claim 1, further comprising uploading, from the computing device to a central server system that is remote form the computing device, information about changes to the document model so that the central server system may maintain a document model that matches the document model that is on the computing device.
- The computer-implemented method of claim 1, wherein the uploading is performed separately for substantially each and every character submitted to the document by a user.
- The computer-implemented method of claim 1, further comprising receiving, from the central server system, information about changes made to the document by users remote from the computing device, revising the electronic document model to reflect the changes, and automatically rendering at least the revised portion of the document model to update the DOM so that the changes made by the users remote to the computing device are reflected in the DOM.
- A computer-implemented system for presenting a document for interaction with a user in a web browser, comprising:an electronic model of the document;a view programmed to render the electronic model for display to an editing surface that displays the rich document;a controller to intercept and interpret inputs made by a user with respect to the document in the view; andan off-screen span element generated in the web browser that is not visible to a user of the browser,wherein the computer-implemented system for presenting a document for interaction with a user in a web browser is programmed to:access the electronic model of the document;determine, positions for items in a visual rendering of the electronic model based on relative sizes and positions of other items in the electronic model;generate a document object model, DOM, that represents at least part of the electronic model and defines an editing surface, wherein the DOM:(a) places the items at the determined positions on the editing surface,(b) places a graphic element that represents a cursor at a determined location on the editing surface, and(c) is arranged to receive user input on the editing surface and to correlate a location of the received user input to a location in the electronic model;receive an entry of a character to the editing surface;determine a display style for the character;generating the off-screen span element in the web browser with the character with the determined style in the element;
wherein determining a position of an item corresponding to the character in the visual rendering of the electronic model includes determining a size of the off-screen span element. - The system of claim 9, wherein the view is programmed to render the model to a document object model, DOM, for the web browser.
- One or more tangible recordable storage media storing instructions that, when executed, cause a method according to any of claims 1 to 8 to be performed.
Applications Claiming Priority (2)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US32324210P | 2010-04-12 | 2010-04-12 | |
PCT/US2011/032067 WO2011130235A1 (en) | 2010-04-12 | 2011-04-12 | Rich browser-based word processor |
Publications (2)
Publication Number | Publication Date |
---|---|
EP2558962A1 EP2558962A1 (en) | 2013-02-20 |
EP2558962B1 true EP2558962B1 (en) | 2019-09-11 |
Family
ID=44080495
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
EP11717824.4A Active EP2558962B1 (en) | 2010-04-12 | 2011-04-12 | Rich browser-based word processor |
Country Status (6)
Country | Link |
---|---|
US (2) | US8413045B2 (en) |
EP (1) | EP2558962B1 (en) |
AU (1) | AU2011240738B2 (en) |
CA (1) | CA2795913A1 (en) |
DE (1) | DE202011110867U1 (en) |
WO (1) | WO2011130235A1 (en) |
Families Citing this family (58)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US7904595B2 (en) | 2001-01-18 | 2011-03-08 | Sdl International America Incorporated | Globalization management system and method therefor |
US8271615B2 (en) * | 2009-03-31 | 2012-09-18 | Cloud Connex, Llc | Centrally managing and monitoring software as a service (SaaS) applications |
US20110264729A1 (en) * | 2010-04-27 | 2011-10-27 | Denis Kulgavin | Augmentation of network traffic |
JP5361913B2 (en) * | 2011-01-25 | 2013-12-04 | 株式会社ソニー・コンピュータエンタテインメント | Input device, input method, and computer program |
US9547626B2 (en) | 2011-01-29 | 2017-01-17 | Sdl Plc | Systems, methods, and media for managing ambient adaptability of web applications and web services |
US10657540B2 (en) | 2011-01-29 | 2020-05-19 | Sdl Netherlands B.V. | Systems, methods, and media for web content management |
US10580015B2 (en) | 2011-02-25 | 2020-03-03 | Sdl Netherlands B.V. | Systems, methods, and media for executing and optimizing online marketing initiatives |
US9495782B2 (en) * | 2011-05-24 | 2016-11-15 | Novell, Inc. | Integrated media browse and insertion |
EP2786270A1 (en) * | 2011-11-30 | 2014-10-08 | The University of Surrey | System, process and method for the detection of common content in multiple documents in an electronic system |
US9430449B2 (en) * | 2012-03-30 | 2016-08-30 | Sdl Plc | Systems, methods, and media for managing editable previews of webpages |
US9773270B2 (en) | 2012-05-11 | 2017-09-26 | Fredhopper B.V. | Method and system for recommending products based on a ranking cocktail |
US11386186B2 (en) | 2012-09-14 | 2022-07-12 | Sdl Netherlands B.V. | External content library connector systems and methods |
US11308528B2 (en) | 2012-09-14 | 2022-04-19 | Sdl Netherlands B.V. | Blueprinting of multimedia assets |
US10452740B2 (en) | 2012-09-14 | 2019-10-22 | Sdl Netherlands B.V. | External content libraries |
US9600132B2 (en) * | 2012-11-27 | 2017-03-21 | Microsoft Technology Licensing, Llc | Using custom RTF commands to extend chat functionality |
GB201223081D0 (en) * | 2012-12-20 | 2013-02-06 | Thunderhead Ltd | Accessing content in a rich internet application |
US9442895B1 (en) * | 2012-12-20 | 2016-09-13 | Lucid Software, Inc. | Web-based publishing layout specification |
US9232025B2 (en) * | 2013-02-01 | 2016-01-05 | Schweitzer Engineering Laboratories, Inc. | Entry of electric power delivery system data in a web-based interface |
US11907496B2 (en) | 2013-02-08 | 2024-02-20 | cloudRIA, Inc. | Browser-based application management |
US9594736B2 (en) * | 2013-10-11 | 2017-03-14 | Apple Inc. | Display and selection of bidirectional text |
CN106790290B (en) * | 2013-10-18 | 2020-09-11 | 北京奇虎科技有限公司 | Cloud service information processing method, browser and system |
US9817801B2 (en) * | 2013-12-04 | 2017-11-14 | Go Daddy Operating Company, LLC | Website content and SEO modifications via a web browser for native and third party hosted websites |
CN104881298A (en) * | 2014-02-27 | 2015-09-02 | 国际商业机器公司 | Method and device for displaying documents on line |
US10402034B2 (en) | 2014-04-02 | 2019-09-03 | Microsoft Technology Licensing, Llc | Adaptive user interface pane manager |
US10318618B2 (en) * | 2014-06-18 | 2019-06-11 | Microsoft Technology Licensing, Llc | Consistent views of partitioned data in eventually consistent systems |
US9785693B2 (en) | 2014-06-30 | 2017-10-10 | Microsoft Technology Licensing, Llc | Intelligent conflict detection and semantic expression of document edits |
US10061177B2 (en) | 2014-07-23 | 2018-08-28 | Kinestral Technologies, Inc. | Process for preparing multi-layer electrochromic stacks |
US9535883B2 (en) * | 2014-10-24 | 2017-01-03 | Dropbox, Inc. | Modifying native document comments in a preview |
CN105630757B (en) * | 2014-11-07 | 2019-11-26 | 珠海金山办公软件有限公司 | A kind of data editing method and device |
US10209849B2 (en) | 2015-01-21 | 2019-02-19 | Microsoft Technology Licensing, Llc | Adaptive user interface pane objects |
US10042655B2 (en) * | 2015-01-21 | 2018-08-07 | Microsoft Technology Licensing, Llc. | Adaptable user interface display |
US10867118B2 (en) * | 2015-01-28 | 2020-12-15 | Box, Inc. | Method and system for implementing a collaboration platform for structured objects in a document |
US20160321226A1 (en) * | 2015-05-01 | 2016-11-03 | Microsoft Technology Licensing, Llc | Insertion of unsaved content via content channel |
US10353960B1 (en) | 2015-05-04 | 2019-07-16 | Google Llc | Systems and methods for caching structural elements of electronic documents |
US10614167B2 (en) | 2015-10-30 | 2020-04-07 | Sdl Plc | Translation review workflow systems and methods |
US20170185243A1 (en) * | 2015-12-29 | 2017-06-29 | Successfactors, Inc. | User interface action control |
US9904719B2 (en) * | 2015-12-31 | 2018-02-27 | Dropbox, Inc. | Propagating computable dependencies within synchronized content items between first and third-party applications |
US10282394B1 (en) * | 2016-03-29 | 2019-05-07 | EMC IP Holding Company LLC | Composable docking navigation for optimized application interaction |
US10635746B2 (en) * | 2016-04-29 | 2020-04-28 | Microsoft Technology Licensing, Llc | Web-based embeddable collaborative workspace |
US10354080B2 (en) | 2016-05-13 | 2019-07-16 | Winshuttle, Llc | Facilitating offline or other contemporaneous editing of tabular data |
US11010540B2 (en) * | 2016-06-23 | 2021-05-18 | Microsoft Technology Licensing, Llc | Productivity applications with views of social network group features |
KR102037179B1 (en) * | 2016-08-26 | 2019-10-28 | 스타십벤딩머신 주식회사 | Apparatus and method for creating image contents |
US10268669B1 (en) * | 2017-01-27 | 2019-04-23 | John C. Allen | Intelligent graphical word processing system and method |
US10382547B2 (en) * | 2017-01-31 | 2019-08-13 | Box, Inc. | Collaborative cloud-based document editing from a browser-enabled platform native application |
US11061699B2 (en) * | 2017-11-15 | 2021-07-13 | Zive, Inc. | Desktop enabling of web documents |
GB2575664B (en) * | 2018-07-18 | 2022-08-24 | Airbus Defence & Space Ltd | Secure remote computer system |
US11815936B2 (en) | 2018-08-22 | 2023-11-14 | Microstrategy Incorporated | Providing contextually-relevant database content based on calendar data |
US11238210B2 (en) | 2018-08-22 | 2022-02-01 | Microstrategy Incorporated | Generating and presenting customized information cards |
US11714955B2 (en) | 2018-08-22 | 2023-08-01 | Microstrategy Incorporated | Dynamic document annotations |
CN110968991A (en) * | 2018-09-28 | 2020-04-07 | 北京国双科技有限公司 | Method and related device for editing characters |
US11682390B2 (en) | 2019-02-06 | 2023-06-20 | Microstrategy Incorporated | Interactive interface for analytics |
US11055475B2 (en) | 2019-05-03 | 2021-07-06 | Microsoft Technology Licensing, Llc | Cross-browser techniques for efficient document pagination |
US11652930B2 (en) * | 2019-07-30 | 2023-05-16 | Cimpress Schweiz Gmbh | Systems and methods for synchronizing document edits using application state variables |
US11769509B2 (en) | 2019-12-31 | 2023-09-26 | Microstrategy Incorporated | Speech-based contextual delivery of content |
CN112861481B (en) * | 2021-01-29 | 2024-01-30 | 北京尚医智信健康管理有限公司 | Paging processing method, paging processing device, electronic equipment and computer readable storage medium |
US11416675B1 (en) * | 2021-05-19 | 2022-08-16 | Amdocs Development Limited | System, method, and computer program for electronic form customization |
US20240012986A1 (en) * | 2022-07-06 | 2024-01-11 | Microsoft Technology Licensing, Llc | Enhanced Spreadsheet Presentation Using Spotlighting and Enhanced Spreadsheet Collaboration Using Live Typing |
US11790107B1 (en) | 2022-11-03 | 2023-10-17 | Vignet Incorporated | Data sharing platform for researchers conducting clinical trials |
Family Cites Families (26)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US5038138A (en) * | 1989-04-17 | 1991-08-06 | International Business Machines Corporation | Display with enhanced scrolling capabilities |
US6151609A (en) * | 1996-08-16 | 2000-11-21 | Electronic Data Systems Corporation | Remote editor system |
US8255809B2 (en) * | 1999-12-23 | 2012-08-28 | International Business Machines Corporation | Webtop: multiple applet delivery within a fixed-sized viewing space |
US6822664B2 (en) * | 2000-10-11 | 2004-11-23 | Microsoft Corporation | Browser navigation for devices with a limited input system |
US7111234B2 (en) * | 2001-05-02 | 2006-09-19 | Microsoft Corporation | System and method for in-line editing of web-based documents |
US6745208B2 (en) | 2001-05-31 | 2004-06-01 | International Business Machines Corporation | Method and apparatus for synchronizing an XML document with its object model |
US7340673B2 (en) * | 2002-08-29 | 2008-03-04 | Vistaprint Technologies Limited | System and method for browser document editing |
US7000184B2 (en) * | 2003-01-24 | 2006-02-14 | The Cobalt Group, Inc. | Remote web site editing in a standard web browser without external software |
US20040216056A1 (en) * | 2003-04-22 | 2004-10-28 | Computer Associates Think, Inc. | System and method for supporting scrolling of contents in a display |
US20040237045A1 (en) * | 2003-05-21 | 2004-11-25 | Eintelligence, Inc. | Method for asynchronous sharing of integrated spreadsheets using a network |
US7890852B2 (en) * | 2003-06-26 | 2011-02-15 | International Business Machines Corporation | Rich text handling for a web application |
US20050076330A1 (en) * | 2003-08-05 | 2005-04-07 | E.Piphany, Inc. | Browser-based editor for dynamically generated data |
JP2005157521A (en) | 2003-11-21 | 2005-06-16 | Hitachi Ltd | Method for monitoring state information of remote storage device and storage sub-system |
EP1751677A2 (en) | 2004-05-19 | 2007-02-14 | Universität Zürich | Computer-based system and computer program product for collaborative editing of documents |
US7496855B2 (en) * | 2004-10-05 | 2009-02-24 | International Business Machines Corporation | Method and system for maintaining scroll position in a web user interface |
JP4686177B2 (en) | 2004-12-02 | 2011-05-18 | インターナショナル・ビジネス・マシーンズ・コーポレーション | Web page authoring apparatus, web page authoring method and program |
US20060253795A1 (en) * | 2005-05-05 | 2006-11-09 | Microsoft Corporation | System and method and application program interface for scrolling |
US9594731B2 (en) * | 2007-06-29 | 2017-03-14 | Microsoft Technology Licensing, Llc | WYSIWYG, browser-based XML editor |
US8145632B2 (en) | 2008-02-22 | 2012-03-27 | Tigerlogic Corporation | Systems and methods of identifying chunks within multiple documents |
US8689095B2 (en) * | 2009-02-09 | 2014-04-01 | Microsoft Corporation | Grid presentation in web-based spreadsheet services |
US8392841B1 (en) * | 2009-12-08 | 2013-03-05 | Google Inc. | Web page composition tool with browser page size guide |
US8423901B2 (en) * | 2010-03-15 | 2013-04-16 | International Business Machines Corporation | Displaying content outside IFRAME container |
US20110258538A1 (en) * | 2010-03-31 | 2011-10-20 | Heng Liu | Capturing DOM Modifications Mediated by Decoupled Change Mechanism |
US20110252312A1 (en) * | 2010-04-12 | 2011-10-13 | Google Inc. | Real-Time Collaboration in a Hosted Word Processor |
US9213460B2 (en) * | 2012-01-20 | 2015-12-15 | Cimpress Schweiz Gmbh | Visual editing tool buffer region |
US9201852B2 (en) * | 2013-05-24 | 2015-12-01 | David Wei Ge | Method for in-browser visual HTML editing via bi-directional navigation and virtual properties |
-
2011
- 2011-04-12 DE DE202011110867.1U patent/DE202011110867U1/en not_active Expired - Lifetime
- 2011-04-12 AU AU2011240738A patent/AU2011240738B2/en not_active Ceased
- 2011-04-12 CA CA2795913A patent/CA2795913A1/en not_active Abandoned
- 2011-04-12 US US13/084,950 patent/US8413045B2/en active Active
- 2011-04-12 EP EP11717824.4A patent/EP2558962B1/en active Active
- 2011-04-12 WO PCT/US2011/032067 patent/WO2011130235A1/en active Application Filing
-
2013
- 2013-02-26 US US13/776,880 patent/US9448978B2/en active Active
Non-Patent Citations (1)
Title |
---|
JASON A WILSON: "A Web Browser and Editor", 28 March 1996 (1996-03-28), XP055453911, Retrieved from the Internet <URL:https://dspace.mit.edu/bitstream/handle/1721.1/38137/35562181-MIT.pdf?sequence=2> [retrieved on 20180223] * |
Also Published As
Publication number | Publication date |
---|---|
WO2011130235A1 (en) | 2011-10-20 |
US9448978B2 (en) | 2016-09-20 |
DE202011110867U1 (en) | 2017-01-13 |
US8413045B2 (en) | 2013-04-02 |
US20110252304A1 (en) | 2011-10-13 |
US20130219264A1 (en) | 2013-08-22 |
CA2795913A1 (en) | 2011-10-20 |
AU2011240738B2 (en) | 2015-02-05 |
AU2011240738A1 (en) | 2012-11-01 |
EP2558962A1 (en) | 2013-02-20 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
EP2558962B1 (en) | Rich browser-based word processor | |
US10082927B2 (en) | Collaborative cursors in a hosted word processor | |
US10678999B2 (en) | Real-time collaboration in a hosted word processor | |
US9384176B2 (en) | Rich content in a browser-based word processor | |
EP2558956B1 (en) | Synthetic navigation elements for electronic documents | |
AU2011240674A1 (en) | Collaborative cursors in a hosted word processor | |
EP2558958B1 (en) | Row heights in electronic documents | |
US8839457B2 (en) | Image storage in electronic documents | |
AU2015202042A1 (en) | Rich browser-based word processor |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
PUAI | Public reference made under article 153(3) epc to a published international application that has entered the european phase |
Free format text: ORIGINAL CODE: 0009012 |
|
17P | Request for examination filed |
Effective date: 20121102 |
|
AK | Designated contracting states |
Kind code of ref document: A1Designated state(s): AL AT BE BG CH CY CZ DE DK EE ES FI FR GB GR HR HU IE IS IT LI LT LU LV MC MK MT NL NO PL PT RO RS SE SI SK SM TR |
|
RIN1 | Information on inventor provided before grant (corrected) |
Inventor name: BELOMESTNYKH, OLGA, S.Inventor name: LEMONIK, MICAHInventor name: RAVI, JANANI, R.Inventor name: PEREIRA FILHO, LUIZ, A., F. |
|
DAX | Request for extension of the european patent (deleted) | ||
17Q | First examination report despatched |
Effective date: 20150907 |
|
RAP1 | Party data changed (applicant data changed or rights of an application transferred) |
Owner name: GOOGLE LLC |
|
STAA | Information on the status of an ep patent application or granted ep patent |
Free format text: STATUS: EXAMINATION IS IN PROGRESS |
|
REG | Reference to a national code |
Ref country code: DERef legal event code: R079Ref document number: 602011061970Country of ref document: DEFree format text: PREVIOUS MAIN CLASS: G06F0017300000Ipc: G06F0016000000 |
|
GRAP | Despatch of communication of intention to grant a patent |
Free format text: ORIGINAL CODE: EPIDOSNIGR1 |
|
STAA | Information on the status of an ep patent application or granted ep patent |
Free format text: STATUS: GRANT OF PATENT IS INTENDED |
|
RIC1 | Information provided on ipc code assigned before grant |
Ipc: G06F 16/00 20190101AFI20190227BHEP |
|
INTG | Intention to grant announced |
Effective date: 20190403 |
|
GRAS | Grant fee paid |
Free format text: ORIGINAL CODE: EPIDOSNIGR3 |
|
GRAA | (expected) grant |
Free format text: ORIGINAL CODE: 0009210 |
|
STAA | Information on the status of an ep patent application or granted ep patent |
Free format text: STATUS: THE PATENT HAS BEEN GRANTED |
|
AK | Designated contracting states |
Kind code of ref document: B1Designated state(s): AL AT BE BG CH CY CZ DE DK EE ES FI FR GB GR HR HU IE IS IT LI LT LU LV MC MK MT NL NO PL PT RO RS SE SI SK SM TR |
|
REG | Reference to a national code |
Ref country code: GBRef legal event code: FG4D |
|
REG | Reference to a national code |
Ref country code: CHRef legal event code: EP |
|
REG | Reference to a national code |
Ref country code: ATRef legal event code: REFRef document number: 1179372Country of ref document: ATKind code of ref document: TEffective date: 20190915 |
|
REG | Reference to a national code |
Ref country code: DERef legal event code: R096Ref document number: 602011061970Country of ref document: DERef country code: IERef legal event code: FG4D |
|
REG | Reference to a national code |
Ref country code: NLRef legal event code: MPEffective date: 20190911 |
|
REG | Reference to a national code |
Ref country code: LTRef legal event code: MG4D |
|
PG25 | Lapsed in a contracting state [announced via postgrant information from national office to epo] |
Ref country code: NOFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20191211Ref country code: SEFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: FIFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: LTFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: HRFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: BGFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20191211 |
|
PG25 | Lapsed in a contracting state [announced via postgrant information from national office to epo] |
Ref country code: ESFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: ALFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: LVFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: RSFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: GRFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20191212 |
|
REG | Reference to a national code |
Ref country code: ATRef legal event code: MK05Ref document number: 1179372Country of ref document: ATKind code of ref document: TEffective date: 20190911 |
|
PG25 | Lapsed in a contracting state [announced via postgrant information from national office to epo] |
Ref country code: ROFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: PTFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20200113Ref country code: ATFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: NLFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: PLFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: EEFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: ITFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911 |
|
PG25 | Lapsed in a contracting state [announced via postgrant information from national office to epo] |
Ref country code: ISFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20200224Ref country code: CZFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: SMFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: SKFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911 |
|
REG | Reference to a national code |
Ref country code: DERef legal event code: R097Ref document number: 602011061970Country of ref document: DE |
|
PLBE | No opposition filed within time limit |
Free format text: ORIGINAL CODE: 0009261 |
|
STAA | Information on the status of an ep patent application or granted ep patent |
Free format text: STATUS: NO OPPOSITION FILED WITHIN TIME LIMIT |
|
PG2D | Information on lapse in contracting state deleted |
Ref country code: IS |
|
PG25 | Lapsed in a contracting state [announced via postgrant information from national office to epo] |
Ref country code: DKFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: ISFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20200112 |
|
26N | No opposition filed |
Effective date: 20200615 |
|
PG25 | Lapsed in a contracting state [announced via postgrant information from national office to epo] |
Ref country code: SIFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911 |
|
PG25 | Lapsed in a contracting state [announced via postgrant information from national office to epo] |
Ref country code: MCFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911 |
|
REG | Reference to a national code |
Ref country code: CHRef legal event code: PL |
|
PG25 | Lapsed in a contracting state [announced via postgrant information from national office to epo] |
Ref country code: LUFree format text: LAPSE BECAUSE OF NON-PAYMENT OF DUE FEESEffective date: 20200412Ref country code: CHFree format text: LAPSE BECAUSE OF NON-PAYMENT OF DUE FEESEffective date: 20200430Ref country code: LIFree format text: LAPSE BECAUSE OF NON-PAYMENT OF DUE FEESEffective date: 20200430 |
|
REG | Reference to a national code |
Ref country code: BERef legal event code: MMEffective date: 20200430 |
|
PG25 | Lapsed in a contracting state [announced via postgrant information from national office to epo] |
Ref country code: BEFree format text: LAPSE BECAUSE OF NON-PAYMENT OF DUE FEESEffective date: 20200430 |
|
PG25 | Lapsed in a contracting state [announced via postgrant information from national office to epo] |
Ref country code: IEFree format text: LAPSE BECAUSE OF NON-PAYMENT OF DUE FEESEffective date: 20200412 |
|
PG25 | Lapsed in a contracting state [announced via postgrant information from national office to epo] |
Ref country code: TRFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: MTFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911Ref country code: CYFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911 |
|
PG25 | Lapsed in a contracting state [announced via postgrant information from national office to epo] |
Ref country code: MKFree format text: LAPSE BECAUSE OF FAILURE TO SUBMIT A TRANSLATION OF THE DESCRIPTION OR TO PAY THE FEE WITHIN THE PRESCRIBED TIME-LIMITEffective date: 20190911 |
|
P01 | Opt-out of the competence of the unified patent court (upc) registered |
Effective date: 20230508 |
|
PGFP | Annual fee paid to national office [announced via postgrant information from national office to epo] |
Ref country code: FRPayment date: 20230425Year of fee payment: 13Ref country code: DEPayment date: 20230427Year of fee payment: 13 |
|
PGFP | Annual fee paid to national office [announced via postgrant information from national office to epo] |
Ref country code: GBPayment date: 20230427Year of fee payment: 13 |