HINTERGRUNDBACKGROUND
Die derzeitigen Techniken zur Bestimmung von Innenraumstandorten mobiler Geräte basieren auf internen Scans von Funknetzzugangspunkten. Die Scans können dazu verwendet werden, eine Datenbank zu erstellen, mittels derer anhand der Bestimmung der Standorte der Zugangspunkte und ihrer jeweiligen Signalstärken an jenen Standorten ein Modell eines Innenraums erstellen werden kann. Um diese Art von Datenbank zu erstellen, wird ein Innenraumstandort-Anbieter in der Regel Standorterkundungen an ausgewählten Standorten durchführen. Dies kann jedoch die Erkundung zehntausender Gebäude und Stockwerke erfordern, damit der Standort der Funknetzzugangspunkte bestimmt werden kann. Darüber hinaus kann die Datenbank nach dem Abschluss der Erkundungen im Laufe der Zeit aufgrund von Zugangspunkt-Standortänderungen veralten und ungenau werden.Current techniques for determining indoor locations of mobile devices are based on internal scans of wireless network access points. The scans can be used to create a database that can be used to create a model of an interior based on the location of the access points and their respective signal strengths at those locations. In order to create this type of database, an indoor location provider will typically conduct site exploration at selected locations. However, this may require the exploration of tens of thousands of buildings and floors to determine the location of the radio network access points. In addition, after the completion of the exploration over time, the database may become stale and inaccurate due to access point site changes.
KURZDARSTELLUNGSUMMARY
Unter Schutz gestellt werden und Gegenstand des Gebrauchsmusters sind dabei, entsprechend den Vorschriften des Gebrauchsmustergesetzes, lediglich Vorrichtungen wie in den beigefügten Schutzansprüchen definiert, jedoch keine Verfahren. Soweit nachfolgend in der Beschreibung gegebenenfalls auf Verfahren Bezug genommen wird, dienen diese Bezugnahmen lediglich der beispielhaften Erläuterung der in den beigefügten Schutzansprüchen unter Schutz gestellten Vorrichtung oder Vorrichtungen. Einige Aspekte der hier offenbarten Erfindung können für die Bereitstellung einer skalierbaren Methode zur Durchführung von Standorterkundungen zum Aufbau von Funknetzzugangspunkt-Modellen eines Innenraumstandorts von Vorteil sein. Durch Crowdsourcing von drahtlosen und INS-Signalen mehrerer sich durch den Innenraumstandort bewegender Clientgeräte kann eine genaue und auf dem neuesten Stand basierende Modelldatenbank drahtloser Zugangspunkte erstellt und gepflegt werden.Be provided under protection and subject of the utility model are, according to the provisions of the utility model law, only devices as defined in the appended claims, but no method. Wherever in the description, if appropriate, reference is made to methods, these references are merely illustrative of the device or devices set forth in the appended claims. Some aspects of the invention disclosed herein may be advantageous in providing a scalable method for performing site exploration to build indoor network location radio network access point models. By crowdsourcing wireless and INS signals from multiple client devices moving through the indoor site, an accurate and state-of-the-art model database of wireless access points can be created and maintained.
Ein Aspekt der vorliegenden Technologie besteht in der Bereitstellung einer Methode. Diese Methode umfasst die Bestimmung einer Karte eines Innenraums, den Empfang von Trägheitsnavigationssignalen einer ersten Gruppe mobiler Geräte, die sich durch den Innenraum bewegen, und die Berechnung einer Anzahl von Benutzerwegen auf der Grundlage des empfangenen Satzes von Trägheitsnavigationssignalen mittels eines Prozessors. In diesem Zusammenhang kann die Karte auf einer Vielzahl von Barrieren beruhen und die Trägheitsnavigationssignale können eine Bewegungsrichtung und -geschwindigkeit der mobilen Geräte repräsentieren. Die Methode umfasst außerdem die Bestimmung von mit der Anzahl der Benutzerwege verbundenen Pfaden, die Bestimmung einer Bewertung für jeden der identifizierten Pfade aufgrund der Ähnlichkeit eines gegebenen Pfads mit der Anzahl von Benutzerwegen, die Auswahl wenigstens eines Pfads aus den identifizierten Pfaden, dessen Bewertung über einem im Voraus festgelegten Schwellenwert liegt, und die Erzeugung von Karteninformationen auf der Basis mindestens eines ausgewählten Pfads, der begehbare Bereiche des Innenraums darstellt, mittels des Prozessors. Jeder Pfad kann eine Anzahl von zwischen einer ersten Position und einer zweiten Position auf der Karte passierten Abbiegungen enthalten.One aspect of the present technology is to provide a method. This method includes determining a map of an interior, receiving inertial navigation signals of a first group of mobile devices moving through the interior, and computing a number of user paths based on the received set of inertial navigation signals by a processor. In this connection, the card may be based on a plurality of barriers and the inertial navigation signals may represent a direction of movement of the mobile devices. The method also includes determining paths associated with the number of user paths, determining a score for each of the identified paths based on the similarity of a given path to the number of user paths, selecting at least one path from the identified paths, rating it above one predetermined threshold value, and the generation of map information based on at least one selected path, which represents walkable areas of the interior, by means of the processor. Each path may include a number of turns passed between a first position and a second position on the map.
Ein Aspekt der Methode kann auch in der Verfeinerung der identifizierten Pfade anhand eines Vergleichs der mit den einzelnen Pfaden verknüpften Funknetzzugangspunkt-Kennungen bestehen. In diesem Zusammenhang kann die Verfeinerung die Entfernung doppelter Pfade zum Inhalt haben. Ein weiterer Aspekt besteht darin, dass die Anzahl der auf den identifizierten Pfaden passierten Abbiegungen eine Richtungsanzeige und eine Distanz zwischen den jeweiligen Abbiegungen umfassen kann. Noch ein weiterer Aspekt kann darin bestehen, dass die Trägheitsnavigationssignale eines vom Folgenden enthalten: Beschleunigungsmesserdaten, Gyroskopdaten und Kompassdaten.One aspect of the method may also be to refine the identified paths based on a comparison of the radio network access point identifiers associated with the individual paths. In this context, the refinement may involve the removal of duplicate paths. Another aspect is that the number of turns made on the identified paths may include a directional indication and a distance between the respective turns. Yet another aspect may be that the inertial navigation signals include one of the following: accelerometer data, gyroscope data, and compass data.
Ein weiterer Aspekt der vorliegenden Technologie besteht in der Bereitstellung eines Systems. Das System umfasst einen Speicher, in dem Karten von Innenräumen abgelegt werden, ein Empfängermodul für den Empfang von Trägheitsnavigationssignalen von einer ersten Gruppe mobiler Geräte, die sich durch den Innenraum bewegen, und einen an den Speicher gekoppelten Prozessor. Der Prozessor ist so konfiguriert, dass er eine im Speicher abgelegte Karte eines Innenraums identifiziert und anhand der im Empfängermodul empfangenen Trägheitsnavigationssignale eine Anzahl von Benutzerwegen berechnet. In diesem Zusammenhang kann die Karte auf einer Vielzahl von Barrieren beruhen und die Trägheitsnavigationssignale können eine Bewegungsrichtung und -geschwindigkeit der mobilen Geräte repräsentieren. Der Prozessor ist außerdem so konfiguriert, dass er mit der Anzahl der Benutzerwege verknüpfte Pfade identifiziert, aufgrund der Ähnlichkeit eines gegebenen Pfads mit der Anzahl von Benutzerwegen eine Bewertung für jeden der identifizierten Pfade bestimmt, wenigstens einen Pfad aus den identifizierten Pfaden auswählt, deren Bewertungen über einem im Voraus festgelegten Schwellenwert liegen, und Karteninformationen auf der Basis mindestens eines ausgewählten Pfads generiert, der begehbare Bereiche des Innenraums darstellt.Another aspect of the present technology is to provide a system. The system includes a memory for storing indoor maps, a receiver module for receiving inertial navigation signals from a first group of mobile devices moving through the interior, and a processor coupled to the memory. The processor is configured to identify an in-memory map of an interior and compute a number of user paths based on the inertial navigation signals received in the receiver module. In this connection, the card may be based on a plurality of barriers and the inertial navigation signals may represent a direction of movement of the mobile devices. The processor is also configured to identify paths associated with the number of user paths, determine, based on the similarity of a given path with the number of users, a score for each of the identified paths, select at least one path from the identified paths whose ratings are above a predetermined threshold, and generates map information based on at least one selected path representing accessible areas of the interior.
Jeder Pfad kann eine Anzahl von zwischen einer ersten Position und einer zweiten Position auf der Karte passierten Abbiegungen enthalten. Each path may include a number of turns passed between a first position and a second position on the map.
Ein zusätzlicher Aspekt der vorliegenden Technologie besteht in der Bereitstellung eines physischen computerlesbaren Speichermediums. Das Speichermedium enthält Anweisungen eines Programms, das, wenn es von einem Prozessor ausgeführt wird, bewirkt, dass der Prozessor eine Methode ausführt. Diese Methode umfasst die Bestimmung einer Karte eines Innenraums, den Empfang von Trägheitsnavigationssignalen einer ersten Gruppe mobiler Geräte, die sich durch den Innenraum bewegen, und die Berechnung einer Anzahl von Benutzerwegen auf der Grundlage des empfangenen Satzes von Trägheitsnavigationssignalen mittels eines Prozessors. In diesem Zusammenhang kann die Karte auf einer Vielzahl von Barrieren beruhen und die Trägheitsnavigationssignale können eine Bewegungsrichtung und -geschwindigkeit der mobilen Geräte repräsentieren. Die Methode umfasst außerdem die Bestimmung von mit der Anzahl der Benutzerwege verbundenen Pfaden, die Bestimmung einer Bewertung für jeden der identifizierten Pfade aufgrund der Ähnlichkeit eines gegebenen Pfads mit der Anzahl von Benutzerwegen, die Auswahl wenigstens eines Pfads aus den identifizierten Pfaden, dessen Bewertung über einem im Voraus festgelegten Schwellenwert liegt, und die Erzeugung von Karteninformationen auf der Basis mindestens eines ausgewählten Pfads, der begehbare Bereiche des Innenraums darstellt, mittels des Prozessors. Jeder Pfad kann eine Anzahl von zwischen einer ersten Position und einer zweiten Position auf der Karte passierten Abbiegungen enthalten.An additional aspect of the present technology is the provision of a physical computer-readable storage medium. The storage medium contains instructions of a program which, when executed by a processor, causes the processor to execute a method. This method includes determining a map of an interior, receiving inertial navigation signals of a first group of mobile devices moving through the interior, and computing a number of user paths based on the received set of inertial navigation signals by a processor. In this connection, the card may be based on a plurality of barriers and the inertial navigation signals may represent a direction of movement of the mobile devices. The method also includes determining paths associated with the number of user paths, determining a score for each of the identified paths based on the similarity of a given path to the number of user paths, selecting at least one path from the identified paths, rating it above one predetermined threshold value, and the generation of map information based on at least one selected path, which represents walkable areas of the interior, by means of the processor. Each path may include a number of turns passed between a first position and a second position on the map.
KURZE BESCHREIBUNG DER ZEICHNUNGENBRIEF DESCRIPTION OF THE DRAWINGS
1 ist ein Funktionsschema eines Systems gemäß der offenbarten Erfindung. 1 Figure 12 is a functional diagram of a system according to the disclosed invention.
2 ist eine bildliche Darstellung eines Systems gemäß der offenbarten Erfindung. 2 Figure 11 is a pictorial representation of a system according to the disclosed invention.
3 ist ein Beispiel-Stockwerkgrundriss eines Innenraums gemäß einigen Aspekten der offenbarten Erfindung. 3 FIG. 5 is an example floor plan of an interior according to some aspects of the disclosed invention. FIG.
4 ist ein Beispiel für von einem Clientgerät bezogene Signalprotokolle gemäß einigen Aspekten der offenbarten Erfindung. 4 FIG. 10 is an example of client-related signal protocols in accordance with some aspects of the disclosed invention. FIG.
5 ist ein Beispiel für einen berechneten Weg gemäß einigen Aspekten der offenbarten Erfindung. 5 FIG. 10 is an example of a calculated path according to some aspects of the disclosed invention. FIG.
6 ist ein Beispiel für den Weg in , vereinfacht gemäß einem Aspekt der offenbarten Erfindung. 6 is an example of the way in simplified according to one aspect of the disclosed invention.
7 ist ein Beispiel für mehrere durch einen Innenraum führende Routen gemäß einem Aspekt der offenbarten Erfindung. 7 FIG. 10 is an example of multiple interior-routing routes according to one aspect of the disclosed invention. FIG.
8 ist ein Beispiel für ein berechnetes Layout von in einem Innenraum passierten Bereichen gemäß einigen Aspekten der offenbarten Erfindung. 8th FIG. 10 is an example of a calculated layout of areas passed in an interior according to some aspects of the disclosed invention. FIG.
9 ist eine Methode des Crowdsourcings von Signalprotokollen gemäß einem Aspekt der offenbarten Erfindung. 9 is a method of crowdsourcing signal protocols in accordance with one aspect of the disclosed invention.
10 ist eine Methode zur Durchführung einer Erkundung von am häufigsten passierten Bereichen eines Innenraums gemäß einem Aspekt der offenbarten Erfindung. 10 is a method of performing an exploration of most frequently-passed areas of an interior according to one aspect of the disclosed invention.
DETAILLIERTE BESCHREIBUNGDETAILED DESCRIPTION
Die Aspekte, die Merkmale und die Vorteile der in diesem Dokument offenbarten Erfindung werden unter Bezugnahme auf die folgende Beschreibung von Ausführungsformen und die begleitenden Abbildungen gewürdigt. Es sei darauf hingewiesen, dass gleiche Referenznummern in verschiedenen Zeichnungen dieselben oder ähnliche Elemente bezeichnen können. Ferner ist die folgende Beschreibung nicht einschränkend; der Umfang der vorliegenden Technologie wird durch die beigefügten Ansprüche und Äquivalente definiert.The aspects, features and advantages of the invention disclosed in this document will be appreciated with reference to the following description of embodiments and the accompanying drawings. It should be noted that like reference numerals in different drawings may indicate the same or similar elements. Furthermore, the following description is not limiting; The scope of the present technology is defined by the appended claims and equivalents.
Im Rahmen dieser Offenbarung werden Techniken für eine skalierbare Methode und ein skalierbares System zur passiven Durchführung einer Standorterkundung eines Innenraums mittels Trägheitsnavigationssystems-(INS-)Signalen von Benutzergeräten beschrieben. Diese Technologie kann für die Bestimmung von Bereichen des Innenraums genutzt werden, die am häufigsten passiert werden. Gemäß einigen Aspekten der Erfindung können die Wege der Benutzer durch Nachverfolgung der INS-Signale (z. B. Ablesungen von Beschleunigungsmessern, Gyroskopen, Kompass, Drucksensoren usw.) einer Reihe teilnehmender Benutzer mit Clientgeräten abgeschätzt werden, während diese Benutzer ihre Clientgeräte durch einen Innenraum bewegen. Die geschätzten Wege können gegenüber ähnlichen, von anderen Benutzern genommenen Routen bewertet werden. In diesem Zusammenhang können Routen mit den höchsten Punktzahlen dann auf einer Karte des Innenraums angeordnet werden, um Orientierungspunkte, an denen Benutzer abbiegen könnten, und Entfernungen zwischen den Abbiegungen zu identifizieren. Gemäß einem Aspekt der Erfindung kann auch eine Funksignalsignatur erhoben werden, um die Geostandorte entlang den Routen mit den höchsten Bewertungen exakt zu identifizieren.This disclosure describes techniques for a scalable method and a scalable system for passively performing a site survey of an interior using inertial navigation system (INS) signals from user equipment. This technology can be used to determine areas of the interior that are most commonly encountered. In accordance with some aspects of the invention, user paths may be estimated by tracking the INS signals (eg, accelerometer, gyroscope, compass, pressure sensor, etc.) readings of a number of participating users with client devices as these users pass their client devices through an interior space move. The estimated paths can be evaluated against similar routes taken by other users. In this regard, routes with the highest scores may then be placed on a map of the interior to identify landmarks where users could turn and distances between turns. According to one aspect of the invention, a radio signal signature may also be collected to accurately identify the geo-locations along the highest rated routes.
1 ist ein Funktionsschema eines Systems 100, das einen an ein Netzwerk 195 gekoppelten Server 110 umfassen kann. Das System 100 kann auch eine Anzahl von Clientgeräten 170 und 171 umfassen, die in der Lage sind, über das Netzwerk 195 drahtlos mit dem Server 110 zu kommunizieren. 1 is a schematic of a system 100 one to a network 195 coupled server 110 may include. The system 100 can also have a number of client devices 170 and 171 include, who are able to over the network 195 wireless with the server 110 to communicate.
Der Server 110 kann einen Prozessor 120, einen Speicher 130 und andere Komponenten enthalten, die üblicherweise in einem Mehrzweck-Computer vorhanden sind. Der Speicher 130 des Servers 110 kann Informationen speichern, auf die der Prozessor 120 zugreifen kann, und zwar einschließlich Anweisungen 131, die vom Prozessor 120 ausgeführt werden können. Der Speicher kann auch Daten 132 enthalten, die vom Prozessor 120 abgerufen, verändert oder gespeichert werden können. Beim Typ des Speichers 130 kann es sich um ein nichtflüchtiges computerlesbares Medium handeln, das in der Lage ist, Informationen zu speichern, auf die der Prozessor 120 zugreifen kann, d. h. zum Beispiel um eine Festplatte, eine Speicherkarte, ROM, RAM, eine DVD, eine CD-ROM, um beschreibbare und schreibgeschützte Speicher. Beim Prozessor 120 kann es sich um einen namhaften Prozessor oder um einen weniger bekannten Prozessortyp handeln. Alternativ dazu kann der Prozessor 120 ein dedizierter Controller, wie z. B. ein ASIC, sein.The server 110 can be a processor 120 , a store 130 and other components commonly found in a general-purpose computer. The memory 130 of the server 110 can store information to which the processor 120 access, including instructions 131 that from the processor 120 can be executed. The memory can also data 132 included by the processor 120 can be retrieved, changed or saved. In the type of memory 130 It may be a non-transitory computer-readable medium capable of storing information to which the processor is responsible 120 for example, a hard disk, a memory card, ROM, RAM, a DVD, a CD-ROM, writeable and read-only memory. At the processor 120 it can be a well-known processor or a lesser known processor type. Alternatively, the processor 120 a dedicated controller, such as An ASIC.
Obwohl 1 veranschaulicht funktional, wie der Prozessor 120 und der Speicher 130 sich innerhalb desselben Blocks befinden; dabei versteht sich, dass der Prozessor 120 und der Speicher 130 tatsächlich mehrere Prozessoren und Speicher umfassen können, die sowohl innerhalb als auch nicht innerhalb desselben physischen Gehäuses untergebracht sein können. So können beispielsweise einige der Anweisungen 131 und Daten 132 auf einer herausnehmbaren CD-ROM und andere in einem schreibgeschützten Computerchip gespeichert sein. Einige der oder alle Anweisungen 131 und Daten 132 können an einem räumlich vom Prozessor 120 entfernten Ort gespeichert sein, wobei der Prozessor jedoch auf sie zugreifen kann. Ebenso kann der Prozessor 120 tatsächlich eine Gruppe von Prozessoren umfassen, die parallel oder nicht parallel arbeiten können.Even though 1 Functionally illustrates how the processor 120 and the memory 130 are within the same block; it goes without saying that the processor 120 and the memory 130 in fact, may include multiple processors and memory that may reside both within and not within the same physical enclosure. For example, some of the instructions 131 and dates 132 be stored on a removable CD-ROM and others in a read-only computer chip. Some or all instructions 131 and dates 132 can be at a spatially from the processor 120 remote location, but the processor can access them. Likewise, the processor can 120 actually comprise a group of processors that can operate in parallel or not in parallel.
Bei den Anweisungen 131 kann es sich um einen Satz von direkt (z. B. Maschinencode) oder indirekt (z. B. Skripts) vom Prozessor 120 auszuführende Anweisungen handeln. So können die Anweisungen 131 beispielsweise als Computercode auf dem computerlesbaren Medium gespeichert sein. Insoweit können die Begriffe „Anweisungen” und „Programme” hierin austauschbar verwendet werden. Die Anweisungen 131 können im Zielcode-Format zur direkten Verarbeitung durch den Prozessor 120 oder in jeglicher sonstigen Computersprache einschließlich Skripts oder Sammlungen unabhängiger Quellcode-Module, die auf Anfrage interpretiert oder im Voraus kompiliert werden, gespeichert sein. Die Funktionen, die Methoden und die Routinen der Anweisungen 131 werden nachstehend eingehender erläutert.At the instructions 131 It can be a set of direct (eg machine code) or indirect (eg scripts) from the processor 120 act instructions to be executed. So can the instructions 131 for example, be stored as computer code on the computer-readable medium. In that regard, the terms "instructions" and "programs" may be used interchangeably herein. The instructions 131 can in target code format for direct processing by the processor 120 or in any other computer language, including scripts or collections of independent source code modules that are interpreted upon request or compiled in advance. The functions, the methods and the routines of the instructions 131 will be explained in more detail below.
Die Daten 132 können vom Prozessor 120 gemäß den Anweisungen 131 abgerufen, gespeichert oder geändert werden. Obwohl die Systeme und Methoden auf keine besondere Datenstruktur beschränkt sind, können die Daten 132 beispielsweise in Computerregistern, als eine Tabelle mit mehreren verschiedenen Feldern und Datensätzen in einer relationalen Datenbank, in XML-Dokumenten oder in flachen Dateien gespeichert werden. Die Daten 132 können auch in einem beliebigen computerlesbaren Format formatiert sein. Die Daten 132 können Informationen enthalten, die ausreichend sind, um relevante Daten, wie etwa Zahlen, Beschreibungstext, proprietäre Codes, Referenzen zu in anderen Bereichen desselben Speichers oder anderen Speichern (einschließlich anderer Netzwerkorte) gespeicherten Daten oder Informationen, die von einer Funktion zur Berechnung der relevanten Daten verwendet werden, zu identifizieren.The data 132 can from the processor 120 according to the instructions 131 be recalled, saved or changed. Although the systems and methods are not limited to any particular data structure, the data may 132 for example, in computer registers, as a table with several different fields and records stored in a relational database, in XML documents, or in flat files. The data 132 can also be formatted in any computer-readable format. The data 132 may include information sufficient to contain relevant data, such as numbers, descriptive text, proprietary codes, references to data stored in other areas of the same memory or other memory (including other network locations), or information derived from a function to compute the relevant data be used to identify.
Die Daten 132 des Servers 110 können Modellinformationen 136 enthalten. Ein Modell kann beispielsweise eine mit einem Innenraum verknüpfte Standortgruppe umfassen. Jeder Standort der Standortgruppe kann mit Funknetzzugangspunkt-Daten verknüpft werden, die die erwarteten Funknetzzugangspunkt-Signale und die entsprechenden Signalstärken beschreiben, von denen erwartet wird, dass sie von einem Gerät erkannt werden, das an verschiedenen Standorten des Innenraums nach ihnen sucht. Bei den erwarteten Funknetzzugangspunkt-Signalen kann es sich um spezifische Werte oder um einen Wertebereich handeln. Es sei darauf hingewiesen, dass eine Standortgruppe für einen Innenraum auch mit verschiedenen Signalen wie Hochfrequenzsignalen (HF), Licht, Klangbild-Erkennungssignalen und anderen Arten von Signalen und/oder Umweltfaktoren oder beliebigen Kombinationen derselben verknüpft und/oder anhand ihrer bestimmt werden kann.The data 132 of the server 110 can model information 136 contain. For example, a model may include a location group associated with an interior. Each location group location can be linked to radio network access point data describing the expected radio network access point signals and the corresponding signal strengths that are expected to be detected by a device searching for them at various locations in the interior. The expected radio network access point signals may be specific values or a range of values. It should be noted that an indoor location group may also be linked and / or determined from various signals such as radio frequency (RF), light, sound image detection signals and other types of signals and / or environmental factors or any combination thereof.
Der Server 120 kann auf Karteninformationen 134 zugreifen. Wie nachstehend detaillierter beschrieben, können die Karteninformationen 134 eine Reihe von Stockwerkgrundrissen umfassen, die einen Innenraum innerhalb eines Gebäudes darstellen. Gemäß einigen Aspekten der Erfindung können die Karteninformationen 134 auf der Identifikation einer Reihe von Barrieren (z. B. Wänden) beruhen, die an Orten innerhalb des Gebäudes bestehen, die von einem Benutzer nicht betreten werden dürfen (oder die er nicht betreten kann). Diese Stockwerkgrundriss-Funktionen können Benutzern die Identifikation verschiedener Bereiche eines Innenraums ermöglichen. Im Rahmen einiger Aspekte der Erfindung können alle oder ein Teil der Karteninformationen 134 je nach Bedarf auch an die Clientgeräte 170 und 171 zur dortigen Speicherung übermittelt werden.The server 120 can on card information 134 access. As described in more detail below, the map information 134 include a series of floor plans that represent an interior space within a building. According to some aspects of the invention, the map information 134 based on the identification of a series of barriers (eg, walls) that exist at locations within the building that are not allowed to be entered by a user (or that he can not enter). These floor plan functions may allow users to identify different areas of an interior. Within some aspects of the invention, all or part of the card information may be 134 depending on Need also to the client devices 170 and 171 be transmitted for storage there.
Jedes Clientgerät 170 und 171 kann ähnlich dem Server 110 wie oben beschrieben mit einem Prozessor 160, einem Speicher 161 und Anweisungen 162 konfiguriert werden. Jedes Clientgerät 170 und 171 kann ein persönliches Computergerät sein und über alle Komponenten verfügen, die normalerweise in Verbindung mit einem PC verwendet werden, wie z. B. über einen Zentralprozessor (CPU) 160, einen Speicher 161 (z. B. RAM und interne Festplatten), in dem Daten 168 und Anweisungen 162 gespeichert werden, ein elektronisches Display 163 (z. B. einen Monitor mit einem Bildschirm, einen Touchscreen, einen Beamer, einen Fernseher, einen Computerdrucker oder ein anderes Gerät, das zum Anzeigen von Informationen geeignet ist) und ein Endbenutzer-Eingabegerät 164 (z. B. eine Maus, eine Tastatur, einen Touchscreen oder ein Mikrofon). Das Clientgerät 171 kann auch eine Kamera 167, Lautsprecher, eine Netzwerkschnittstellen-Vorrichtung und alle Komponenten umfassen, die für die Verbindung dieser Elemente untereinander verwendet werden.Each client device 170 and 171 can be similar to the server 110 as described above with a processor 160 , a store 161 and instructions 162 be configured. Each client device 170 and 171 can be a personal computing device and have all the components normally used in conjunction with a PC, such as: Eg via a central processor (CPU) 160 , a store 161 (eg, RAM and internal hard drives) in which data 168 and instructions 162 be stored, an electronic display 163 (eg, a monitor with a screen, a touch screen, a beamer, a television, a computer printer or other device suitable for displaying information) and an end-user input device 164 (such as a mouse, keyboard, touch screen, or microphone). The client device 171 can also have a camera 167 , Loudspeakers, a network interface device, and all the components used to interconnect these elements.
Das Clientgerät 171 kann eine Antenne 169 umfassen, die verwendet werden kann, um das Funknetzspektrum zu scannen und lokale Funknetzsignale zu identifizieren. Die Antenne kann zum Beispiel „Beacon”-Botschaften empfangen, die die Informationen zur Identifizierung der Funknetzzugangspunkte demodulieren. In einem Beispiel können diese Beacon-Botschaften in IEEE-802.11-Management-Frames bestehen, die von Zugangspunkten ausgesandt werden, um potenzielle Funknetzbenutzer auf sie aufmerksam zu machen. Diese Frames können Service Set Identifiers(„SSID”)-Informationen sowie Parameter einer physikalischen Schicht enthalten, die Geräten bei der Verbindungsherstellung mit dem Wireless-Netzwerk behilflich sind. Die Beacon-Botschaften können auch zusätzliche, die entsprechenden Geräte beim Zugriff auf das Netzwerk unterstützende Netzzugangsinformationen enthalten, z. B. darüber, ob der Zugangspunkt neue Benutzer akzeptiert, ob die Daten verschlüsselt sind und welche Art der Authentifizierung verwendet wird, z. B. keine Authentifizierung (offen für alle), Kennwort-basiert, Webportal-basiert oder basierend auf der MAC-Adresse („Medienzugriffssteuerung”). Dabei versteht sich jedoch, dass die im Einklang mit dieser Offenbarung erhobenen Daten auf die oben genannten Informationen, wie z. B. MAC-Adressen, SSIDs oder andere Kennungen und Signalstärken, beschränkt sein können und keine zusätzlichen Informationen enthalten müssen. Zum Beispiel ist es nicht erforderlich, im Netzwerk-Traffic oder in den Nutzsignaldaten enthaltene Informationen, wie etwa persönliche Informationen, zu erheben; tatsächlich können diese sogar entfernt werden, um die Privatsphäre der Benutzer des Funknetzes zu schützen.The client device 171 can an antenna 169 which can be used to scan the radio network spectrum and identify local radio network signals. For example, the antenna may receive beacon messages that demodulate the information for identifying the radio network access points. In one example, these beacon messages may be in IEEE 802.11 management frames sent by access points to alert potential wireless network users to them. These frames can contain Service Set Identifiers ("SSID") information as well as physical layer parameters that help devices connect to the wireless network. The beacon messages may also contain additional network access information supporting the corresponding devices when accessing the network, e.g. For example, whether the access point accepts new users, whether the data is encrypted, and what type of authentication is used, e.g. For example, no authentication (open to all), password based, web portal based, or MAC address based ("media access control"). It should be understood, however, that the data collected in accordance with this disclosure is based upon the above information, such as the MAC addresses, SSIDs or other identifiers and signal strengths, may be limited and need not contain additional information. For example, it is not necessary to collect information such as personal information contained in the network traffic or payload data; in fact, they can even be removed to protect the privacy of users of the wireless network.
Das Clientgerät 171 kann eine geografische Positionskomponente 165 zur Bestimmung der geografischen Position des Clientgeräts 171 beinhalten. Das Clientgerät 171 kann beispielsweise einen GPS-Empfänger zur Bestimmung der geografischen Breiten-, Längen- und Höhenposition des Geräts beinhalten. Auf diese Weise kann der GPS-Empfänger eine neue aktuelle Position bestimmen, wenn das Clientgerät 171, z. B. dadurch, dass es physisch bewegt wird, den Ort wechselt. Die Komponente 165 kann auch Software zur Bestimmung der Position des Clientgeräts 171 anhand anderer beim Clientgerät 171 empfangener Signale, beispielsweise anhand von Signalen, die von einem oder mehreren Funknetzzugangspunkten empfangen wurden, umfassen.The client device 171 can be a geographic location component 165 to determine the geographic location of the client device 171 include. The client device 171 For example, it may include a GPS receiver for determining the latitude, longitude and longitude position of the device. In this way, the GPS receiver can determine a new current position when the client device 171 , z. B. by physically moving the location changes. The component 165 Also includes software for determining the position of the client device 171 by others on the client device 171 received signals, for example, based on signals received from one or more wireless network access points include.
Zur Bestimmung der Richtung, in der das Clientgerät 171 ausgerichtet ist, kann das Gerät 171 eine oder mehrere Orientierungsvorrichtungen 166 wie z. B. einen Beschleunigungsmesser, ein Gyroskop, einen Kompass oder eine Kombination derselben enthalten. Ein Beschleunigungsmesser kann z. B. verwendet werden, um die Wirkung der Schwerkraft – gemessen z. B. in Metern pro Sekunde – auf das Clientgerät 171 zu ermitteln. Lediglich beispielsweise kann das Clientgerät 171 Input vom Beschleunigungsmesser verwenden, um den Nick-, den Gier- oder den Rollwinkel (oder Veränderungen derselben) zur Lotrichtung oder einer senkrecht dazu stehenden Ebene zu bestimmen. Dabei versteht sich, dass die hier beschriebene Versorgung eines Clientgeräts mit Orientierungsdaten dem Clientgerät 171 automatisch erfolgen kann.To determine the direction in which the client device 171 aligned, the device can 171 one or more orientation devices 166 such as As an accelerometer, a gyroscope, a compass or a combination thereof. An accelerometer can, for. B. used to the effect of gravity - measured z. In meters per second - on the client device 171 to investigate. For example, only the client device 171 Use accelerometer input to determine the pitch, yaw, or roll angle (or variations) to the perpendicular or perpendicular plane. It is understood that the supply of a client device with orientation data described here to the client device 171 can be done automatically.
Die von der Orientierungsvorrichtung 166 empfangenen Orientierungsdaten können auf verschiedene Weise genutzt werden. Durch die Anwendung eines Durchschnitts der Beschleunigungswerte kann zum Beispiel ein Beschleunigungsmesser oder ein Gyroskop als Schrittmesser verwendet werden, um festzustellen, welches die Abwärtsrichtung (z. B. auf die Erde zu) ist. Ein einfacher Schrittdetektor kann dadurch konstruiert werden, dass entschieden wird, dass jedes Mal dann ein Schritt gemacht wurde, wenn die Komponente in der Abwärtsrichtung größer als ein empirisch ermittelter Schwellenwert ist. Durch die Verwendung einer ungefähren Schrittlänge oder Geschwindigkeit einer Person ist eine Annäherung an den Abstand der einzelnen Schritte möglich.The of the orientation device 166 received orientation data can be used in various ways. For example, by using an average of the acceleration values, an accelerometer or gyroscope may be used as a pedometer to determine which is the downward direction (eg, toward the earth). A simple step detector may be constructed by deciding that a step has been taken each time the component in the downward direction is greater than an empirically determined threshold. By using an approximate stride length or speed of a person, an approach to the distance of the individual steps is possible.
2 ist eine bildliche Darstellung eines Systems 100. Gemäß einigen Aspekten dieser Erfindung kann das System 100 auch die Clientgeräte 170 und 171 umfassen, die in der Lage sind, über ein Netzwerk 195 drahtlos mit einem Server 110 zu kommunizieren. Lediglich beispielsweise kann das Clientgerät 170 ein tragbarer Personalcomputer – wie etwa ein wireless-fähiger elektronischer Organizer, ein Tablet-PC oder ein Netbook – sein, der Informationen über das Internet beziehen kann. Ein Benutzer 190 kann mittels einer kleinen Tastatur, einer numerischen Tastatur oder eines Touchscreens Informationen eingeben. Alternativ dazu kann das Clientgerät 171 auch ein Mobilgerät wie ein Mobiltelefon, das für die Benutzung durch eine Person 191 bestimmt ist, umfassen. 2 is a pictorial representation of a system 100 , In accordance with some aspects of this invention, the system 100 also the client devices 170 and 171 include, who are able to through a network 195 wireless with a server 110 to communicate. For example, only the client device 170 a portable personal computer - such as a wireless-enabled electronic organizer, a tablet PC, or a netbook - that can access information over the Internet. A user 190 can enter information using a small keyboard, numeric keypad, or touchscreen. Alternatively, the client device 171 Also a mobile device, such as a mobile phone, for use by a person 191 is determined to include.
Der Server 110 kann sich an einem Knoten des Netzwerks 195 befinden und in der Lage sein, direkt oder indirekt mit anderen Knoten des Netzes 195 zu kommunizieren. Der Server 110 kann beispielsweise einen Webserver umfassen, der in der Lage sein kann, über das Netzwerk 195 mit den Clientgeräten 170 und 171 zu kommunizieren, indem er das Netzwerk 195 benutzt, um Informationen zu übertragen und sie über ein Display des Clientgeräts 171 einem Benutzer anzuzeigen. Auch der Server 110 kann mehrere Computer – z. B. eine lastausgeglichene Serverfarm – umfassen, die Informationen mit verschiedenen Knoten eines Netzwerks austauschen, um Daten von den Clientgeräten 170 und 171 zu empfangen, zu verarbeiten und an sie zu senden. In diesem Fall werden die Clientgeräte 170 und 171 sich in der Regel noch an anderen Knoten des Netzwerks 195 befinden als die Computer des Servers 110.The server 110 can connect to a node of the network 195 be located and be able to directly or indirectly with other nodes of the network 195 to communicate. The server 110 For example, it may include a web server that may be capable of being over the network 195 with the client devices 170 and 171 communicate by the network 195 used to transfer information and display it via a client device display 171 to a user. Also the server 110 can multiple computers - z. A load balanced server farm - exchanging information with various nodes of a network to receive data from the client devices 170 and 171 to receive, process and send to you. In this case, the client devices become 170 and 171 usually still at other nodes of the network 195 are as the computers of the server 110 ,
Das Netzwerk 195 und dessen Knoten können verschiedene Konfigurationen und Protokolle einschließlich Internet, World Wide Web, Intranet, virtueller privater Netzwerke, WANs, lokaler Netzwerke, privater Netzwerke, die Kommunikationsprotokolle verwenden, die Eigentum eines oder mehrerer Unternehmen sind, Ethernet, WiFi (z. B. 802.11, 802.11 b, g, n oder andere Standards) , HTTP und verschiedener Kombinationen derselben umfassen. Eine solche Kommunikation kann von jedem Gerät ermöglicht werden, das in der Lage ist, Daten von einem zum anderen Computer zu übertragen, wie Modems (z. B. Dial-up, Kabel oder Lichtwellenleiter) und drahtlose Schnittstellen.The network 195 and its nodes may use various configurations and protocols including the Internet, World Wide Web, Intranet, Virtual Private Networks, WANs, Local Area Networks, Private Networks, the communication protocols owned by one or more companies, Ethernet, WiFi (eg 802.11, 802.11 b, g, n or other standards) , HTTP and various combinations thereof. Such communication may be enabled by any device capable of transmitting data from one computer to another, such as modems (eg, dial-up, cable or fiber optic) and wireless interfaces.
Obwohl durch die Übertragung von Informationen in der o. a. Weise gewisse Vorteile erzielt werden, sind andere Aspekte des Systems und der Methode nicht auf eine besondere Informationsübermittlungsart beschränkt. In manchen Aspekten können Informationen zum Beispiel über ein Medium wie eine Platte, ein Band oder CD-ROM gesendet werden. Mehr noch, obwohl einige Funktionen in der Weise dargestellt sind, dass sie auf einem einzelnen Server mit einem einzigen Prozessor erfolgen, können verschiedene Aspekte des Systems und der Methode durch mehrere Server implementiert werden, z. B. indem Informationen über das Netzwerk 195 kommuniziert werden. Zusätzlich zu den oben beschriebenen und in den Abbildungen veranschaulichten Komponenten sollen nun verschiedene Operationen beschrieben werden.Although certain advantages are obtained by transmitting information in the above manner, other aspects of the system and method are not limited to any particular type of information delivery. For example, in some aspects, information may be sent via a medium such as a disk, tape, or CD-ROM. Moreover, although some functions are shown as being on a single server with a single processor, various aspects of the system and method may be implemented by multiple servers, e.g. B. by adding information over the network 195 be communicated. In addition to the components described above and illustrated in the figures, various operations will now be described.
3 ist ein Beispiel-Stockwerkgrundriss 310 eines Innenraums 300. Wie oben beschrieben, kann ein Clientgerät Karteninformationen abrufen, die z. B. den Stockwerkgrundriss 310 eines Raums in einem Gebäude darstellen können. Wie in 3 – der Stockwerkgrundriss 310 eines Innenraums 300 kann einen Eingang 311 und verschiedene Barrieren beinhalten. So können durch die Wände 312 bis 314 beispielsweise verschiedene Zimmer, Flure usw. sowie Öffnungen (z. B. Türen) des Stockwerkgrundrisses 310 voneinander abgegrenzt sein. Die Merkmale des Stockwerkgrundrisses 310 können den Benutzern die Identifikation verschiedener Bereiche des Innenraums 300 ermöglichen. 3 is an example floor plan 310 an interior 300 , As described above, a client device can retrieve map information that is e.g. B. the floor plan 310 of a room in a building. As in 3 - the floor plan 310 an interior 300 can have an entrance 311 and include various barriers. So can through the walls 312 to 314 For example, different rooms, hallways, etc. and openings (eg doors) of the floor plan 310 be separated from each other. The features of the floor plan 310 can help users identify different areas of the interior 300 enable.
Während ein Benutzer sich mit seinem Clientgerät durch den Innenraum 310 bewegt, kann er sich anmelden oder für eine Teilnahme optieren, um Informationen (z. B. INS-Signale und Karteninformationen) zu senden oder zu empfangen. Es besteht die Möglichkeit, dass die Benutzer aufgefordert werden, ihre ausdrückliche Zustimmung hinsichtlich ihrer Teilnahme bzw. ihr „Opt-in” dazu zu erklären. So besteht beispielsweise die Möglichkeit, dass die Benutzer sich vor der Bereitstellung von Signalinformationen bei einem Registrierungsdienst anmelden müssen. Die Benutzer können für zur Verfügung gestellte Daten bezahlt werden und ihnen kann auch eine Erklärung darüber, wie und warum ihre Daten verwendet werden, bereitgestellt werden. Ebenso kann den Benutzern die Möglichkeit gegeben werden, ihre Teilnahme jederzeit vorübergehend oder dauerhaft zu beenden. Vorzugsweise wird Datenschutz für alle Benutzerdaten bereitgestellt, die vom Clientgerät übertragen werden, und zwar einschließlich z. B. der Anonymisierung persönlich identifizierbarer Informationen, der Aggregation von Daten, der Filterung sensibler Informationen, Verschlüsselung, Streuspeicherung oder Filterung sensibler Informationen, um persönliche Merkmale zu entfernen, Zeitbegrenzungen hinsichtlich der Speicherung von Informationen oder Einschränkungen hinsichtlich der Verwendung oder des Austauschs von Daten. Darüber hinaus können die Daten in einer Weise anonymisiert und aggregiert werden, dass keine individuellen Nutzerdaten offen gelegt werden.While a user is using his client device through the interior 310 he or she can log in or opt-in to send or receive information (such as INS and card information). There is a possibility that users may be asked to declare their explicit consent to their participation or "opt-in". For example, there is a possibility that users must log in to a registration service before providing signal information. Users may be paid for provided data and may also be provided with an explanation of how and why their data will be used. Likewise, users may be given the opportunity to terminate their participation at any time, temporarily or permanently. Preferably, data protection is provided for all user data transmitted from the client device, including e.g. The anonymization of personally identifiable information, the aggregation of data, the filtering of sensitive information, encryption, leakage or filtering of sensitive information to remove personal traits, time limits on the storage of information or restrictions on the use or exchange of data. In addition, the data may be anonymized and aggregated in a way that no individual user data is disclosed.
Nachdem er für die Teilnahme optiert hat, kann der Benutzer mittels eines Clientgeräts wie des mit Bezug auf ABB. beschriebenen Clientgeräts 171 einen Stockwerkgrundriss 310 identifizieren. 1. Gemäß einigen Aspekten der Erfindung können die Benutzer den Innenraumstandort von sich aus in das Clientgerät eingeben, beispielsweise indem sie einen Punkt auf einem Display auswählen oder eine Adresse oder sonstige den Standort identifizierende Informationen eingeben. Gemäß einem Aspekt der Erfindung können die Benutzer einen Strichcode scannen oder ein Bild einiger anderer mit einem bekannten Ort verbundener Merkmale erfassen (z. B. ein Bild einer Tür, eines Schilds, eines Denkmals usw.).After opting to participate, the user may use a client device such as the one described with reference to FIG. described client device 171 a floor plan 310 identify. 1. According to some aspects of the invention, users may enter the indoor location into the client device by themselves, for example by selecting a point on a display or by entering an address or other information identifying the location. According to one aspect of the invention, the users may scan a bar code or a picture of some others with a known location associated features (eg, a picture of a door, a sign, a memorial, etc.).
Der Strichcode oder das geolokalisierte Merkmal kann bewirken, dass das Clientgerät einen Standort identifiziert, der als Ausgangsort zu verwenden ist. So kann das geolokalisierte Merkmal oder der Strichcode beispielsweise Informationen zur Bestimmung eines Orts (z. B. durch Anforderung von Informationen von einem Server) beinhalten. Gemäß einem weiteren Aspekt der Erfindung kann das Clientgerät z. B. eine Startposition anhand eines groben proximitätsbasierten Funknetzzugangspunkt-Lokalisierungsalgorithmus identifizieren, der einen gespeicherten Satz von Funknetzzugangspunkt-Standorten eines Typs nutzt, wie er in einem für denselben Bereich konstruierten Funknetzzugangspunkt-Modell verwendet wird.The bar code or geolocalized feature may cause the client device to identify a location to be used as the starting location. For example, the geolocalized feature or bar code may include information for determining location (eg, by requesting information from a server). According to another aspect of the invention, the client device may e.g. B. identify a starting position from a coarse proximity-based radio network access point location algorithm that utilizes a stored set of radio network access point locations of a type used in a radio network access point model constructed for the same area.
Gemäß einem weiteren Aspekt kann ein Server zur Identifikation eines tatsächlichen Ausgangsorts 311 auf dem Stockwerkgrundriss 310 Informationen wie etwa einen Punkt auf dem Stockwerkgrundriss 310, eine Adresse, GPS-Koordinaten, Code, Standortkennungen usw. verwenden. Wenn ein Benutzer ein Clientgerät hält, das mit Funktionen wie GPS und einem Beschleunigungsmesser ausgestattet ist, kann das Clientgerät z. B. erkennen, wann der Benutzer sich in einen Innenraum hinein bewegt. In diesem Zusammenhang kann, wenn ein Beschleunigungsmesser Messungen macht, die über einem bestimmten Schwellenwert liegen, festgestellt werden, dass das Clientgerät sich bewegt oder der Benutzer geht, läuft usw. Solange ein GPS-Signal empfangen wird, wird erkannt, dass das Clientgerät sich (wie der Benutzer) im Freien befindet. Wenn die GPS-Signale plötzlich verloren gehen, kann festgestellt werden, dass der Benutzer eine Struktur, wie z. B. ein Gebäude, betreten hat. Der Weg des Benutzers kann dann mittels INS-Signalen des Clientgeräts nachverfolgt werden.In another aspect, a server may be used to identify an actual departure 311 on the floor plan 310 Information such as a point on the floor plan 310 , using an address, GPS coordinates, code, location identifiers, and so on. If a user holds a client device that is equipped with features such as GPS and an accelerometer, the client device may, for. B. detect when the user moves into an interior. In this regard, when an accelerometer makes measurements that are above a certain threshold, it can be determined that the client device is moving or the user is walking, running, etc. As long as a GPS signal is received, it is detected that the client device is ( like the user) is outdoors. If the GPS signals are suddenly lost, it can be determined that the user has a structure, such as. B. a building has entered. The user's path can then be tracked using INS signals from the client device.
4 ist ein Beispiel für von einem Clientgerät 171 bezogene Signalprotokolle 441 bis 449. Wie in 4 – während ein Benutzer sich über einen Stockwerkgrundriss 310 eines Innenraums 300 bewegt, kann das Clientgerät des Benutzers die Signalprotokolle 441 bis 449 aufzeichnen. Bei einigen Ausführungsformen kann das Clientgerät Signalprotokolle (z. B. ein zeitindexiertes Signalprotokoll) für jede Zeiteinheit berechnen, in der das Clientgerät sich bewegt. Das Signalprotokoll kann periodisch, z. B. alle 0,1 Sekunden, berechnet werden. Um die Menge der berechneten Daten zu reduzieren, z. B. um Speicherverarbeitungen – und in einigen Ausführungsformen Übertragungsressourcen – einzusparen, kann dieses Zeitintervall neu konfiguriert werden. In einer Ausführungsform kann das Zeitintervall auf 0,2 Sekunden verdoppelt werden, so dass halb so viele Signalprotokolleinträge berechnet werden. 4 is an example of a client device 171 related signal protocols 441 to 449 , As in 4 - while a user is on a floor plan 310 an interior 300 moves, the user's client device can use the signaling protocols 441 to 449 record. In some embodiments, the client device may calculate signal protocols (eg, a time-indexed signal protocol) for each time unit in which the client device is moving. The signal protocol may periodically, for. B. every 0.1 seconds. To reduce the amount of calculated data, e.g. For example, to save memory processing - and in some embodiments, transmission resources - this time interval may be reconfigured. In one embodiment, the time interval can be doubled to 0.2 seconds so that half as many signal log entries are calculated.
Wie in 4 – die Signalprotokolle 441 bis 449 können einen geschätzten Pfad 450 darstellen, den der den Client 171 haltende Benutzer genommen hat. In diesem Zusammenhang kann der Pfad mehrere Signalprotokolleinträge an verschiedenen Orten innerhalb des Stockwerkgrundrisses 310 aufweisen. Der Protokolleintrag 443 1 stellt einen solchen Eintrag dar, der Daten wie z. B. einen Zeitstempel, Funksignalstärke und INS-Signaldaten umfasst. Die vom Clientgerät erhobenen Informationen können auf die oben beschriebenen Informationen (z. B. Funknetzzugangspunkt-Kennungen wie SSIDs oder MAC-Adressen und die entsprechenden Signalstärken, Beschleunigungsmesser-, Orientierungs- und Kompassmessungen sowie andere Messungen) beschränkt sein. Zum Beispiel ist es nicht erforderlich, im Netzwerk-Traffic enthaltene Informationen, wie etwa persönliche Informationen, zu erheben; diese können sogar entfernt werden, um die Privatsphäre der Funknetzbenutzer zu schützen.As in 4 - the signal protocols 441 to 449 can have an estimated path 450 represent the the client 171 holding user has taken. In this regard, the path may have multiple signal log entries at different locations within the floor plan 310 exhibit. The log entry 443 Fig. 1 illustrates such an entry that data such as. B. includes a timestamp, radio signal strength and INS signal data. The information collected by the client device may be limited to the information described above (eg, radio network access point identifiers such as SSIDs or MAC addresses and corresponding signal strengths, accelerometer, orientation and compass measurements, and other measurements). For example, it is not necessary to collect information contained in network traffic, such as personal information; these can even be removed to protect the privacy of wireless network users.
Unter Umständen kann es sein, dass der Benutzer einen Zielort innerhalb des Innenraums 310 erreicht und stehen bleibt. Das Clientgerät 171 kann dies eventuell anhand eines bestimmten INS-Signaldatenmusters (z. B. Beschleunigungsmesser-Ablesungen) erkennen. Es kann zum Beispiel sein, dass das Clientgerät 171 aufgrund fehlender Beschleunigungsmesser-Informationen über einen bestimmten im Voraus festgelegten Zeitraum, wie z. B. eine Minute, hinweg oder aufgrund der Tatsache, dass die Beschleunigungsmesser-Ablesungen unter einem bestimmten Schwellenwert liegen, feststellt, dass es aufgehört hat, sich zu bewegen. Wie zum Beispiel in 4 – das Clientgerät 171 hat den Zielort 449 innerhalb des Stockwerkgrundrisses 310 erreicht. Beim Zielort 449 kann die Beschleunigungsmesser-Ablesung darauf hinweisen, dass der Benutzer aufgehört hat, sich zu bewegen.Under certain circumstances, the user may have a destination within the interior 310 reached and stopped. The client device 171 may possibly detect this using a particular INS signal data pattern (eg, accelerometer readings). It can be, for example, that the client device 171 due to missing accelerometer information over a certain pre-defined period, such as One minute, or due to the fact that the accelerometer readings are below a certain threshold, it determines that it has stopped moving. Like in 4 - the client device 171 has the destination 449 within the floor plan 310 reached. At the destination 449 For example, the accelerometer reading may indicate that the user has stopped moving.
In Reaktion auf die Erreichung eines Zielorts kann das Clientgerät den Zielort aufzeichnen und Informationen in einem Funkkoordinatensatz ordnen – z. B. Zeitstempel, Funksignalstärke und INS-Datensignale vom Clientgerät 171. Sobald die INS-Daten anzeigen, dass das Clientgerät sich wieder bewegt (z. B. wenn die Beschleunigungsmesser-Ablesungen über einem bestimmten Schwellenwert liegen), kann das Clientgerät damit fortfahren, in der oben beschriebenen Weise Signalprotokolle zu sammeln und aufzuzeichnen. In einer Ausführungsform kann das Clientgerät die vom Clientgerät 171 gesammelten Signalprotokolle dafür verwenden, einen projektierten Weg des Benutzers zu berechnen.In response to reaching a destination, the client device may record the destination and arrange information in a radio coordinate set - e.g. Timestamp, radio signal strength and INS data signals from the client device 171 , Once the INS data indicates that the client device is moving again (eg, if the accelerometer readings are above a certain threshold), the client device may continue to collect and record signal logs in the manner described above. In one embodiment, the client device may be the one from the client device 171 use collected signal protocols to calculate a projected path of the user.
5 ist ein Beispiel für einen berechneten Weg 550. Gemäß einigen Aspekten der Erfindung kann der Weg 550 eines sich durch einen Innenraum 300 bewegenden Benutzers anhand der vom Clientgerät des Benutzers ausgehenden INS-Signale berechnet werden. So kann der Weg 550 beispielsweise mithilfe einer Gissungsmethode unter Verwendung des Clientgeräts als Schrittzähler berechnet werden. Wie in 5, Strichlinie 450 stellt einen geschätzten Pfad eines Benutzers dar, der eine Reihe von aufgezeichneten INS-Signalprotokollen 441 bis 449 des Clientgeräts des Benutzers umfasst. Die durchgezogene Linie 550 stellt den basierend auf den aufgezeichneten Signalprotokollen 441 bis 449 berechneten Weg des Benutzers dar. Gemäß einem Aspekt der Erfindung können mittels Beschleunigungsmesser-Ablesungen aus den aufgezeichneten Signalprotokollen annäherungsweise Messungen dazu vorgenommen werden, wie schnell der Benutzer, der das Clientgerät hält, sich möglicherweise bewegt. Gemäß einigen Aspekten der Erfindung können Kompassmessungen aus den aufgezeichneten Signalprotokollen für die Bestimmung der Richtungsänderungsbewegungen des Benutzers verwendet werden. Es versteht sich, dass einige INS-Signale (z. B. Kompassablesungen) aufgrund von Metallhindernissen und elektronischen Geräten weniger zuverlässig sind, während das Gerät sich in einem Gebäude befindet. Darüber hinaus können die Schritte einiger Personen kürzer sein, während die Schritte anderer länger sein können. Daher können die INS-Signaldaten den Weg 550, den der Benutzer genommen hat, nur in groben Zügen identifizieren. 5 is an example of a calculated path 550 , According to some aspects of the invention, the route may 550 one through an interior 300 moving user based on the INS user's client device. Signals are calculated. That's the way 550 for example, using a cracking method using the client device as a pedometer. As in 5 , Dash line 450 represents an estimated path of a user having a series of recorded INS signal protocols 441 to 449 of the client device of the user. The solid line 550 represents the based on the recorded signal protocols 441 to 449 In accordance with one aspect of the invention, accelerometer readings from the recorded signal protocols may be used to approximately measure how fast the user holding the client device may be moving. In accordance with some aspects of the invention, compass measurements from the recorded signal protocols may be used to determine the user's direction change motions. It is understood that some INS signals (eg, compass readings) are less reliable due to metal obstacles and electronic devices while the device is in a building. In addition, some people's steps may be shorter, while others' steps may be longer. Therefore, the INS signal data can be the way 550 that the user has taken, only roughly identify.
6 ist ein vereinfachtes Beispiel des Wegs 550 in . Wie in 6 – der Weg 550 wurde auf eine Anzahl von Abbiegungen und eine Entfernung zwischen den einzelnen Abbiegungen vereinfacht. In einigen Ausführungsformen der Erfindung kann zur Vereinfachung des Wegs 550 zwecks Verbesserung seiner Klarheit ein Algorithmus zur Reduzierung der Anzahl der zur Annäherung an die Bewegungen des Benutzers verwendeten INS-Signalprotokolle eingesetzt werden. So kann der Weg 550 beispielsweise durch die Anwendung eines Glättungsalgorithmus (z. B. Ramer-Douglas-Peucker) auf die für die Berechnung des Wegs 550 verwendeten gesammelten INS-Signalprotokolle auf eine Liste von Protokolleinträgen reduziert werden, die die durch die Punkte 541, 542, 544, 545, 547 und 548 repräsentierten vom Benutzer gemachten Abbiegungen und eine relative Entfernung zwischen den jeweiligen Abbiegungen umfasst. Die relative Entfernung kann durch eine Schätzung (z. B. mittels Gissung) einer relativen Position der einzelnen Abbiegungen bestimmt werden, z. B. anhand der Geschwindigkeit und der Bewegungsrichtung des Benutzers über einen bestimmten Zeitraum. 6 is a simplified example of the way 550 in , As in 6 - the way 550 was simplified to a number of turns and a distance between each turn. In some embodiments of the invention, to simplify the path 550 to improve its clarity, use an algorithm to reduce the number of INS signal protocols used to approximate the user's movements. That's the way 550 for example, by applying a smoothing algorithm (eg Ramer-Douglas-Peucker) to those for the calculation of the path 550 used collected INS signal logs are reduced to a list of log entries that pass through the points 541 . 542 . 544 . 545 . 547 and 548 represented user-made turns and a relative distance between the respective turns. The relative distance can be determined by an estimate (eg, by gissing) of a relative position of the individual turns, e.g. B. based on the speed and the direction of movement of the user over a period of time.
Wie bereits erörtert, kann der Weg 550 aus von einem Clientgerät bezogenen INS-Signalen (z. B. Beschleunigungsmesser-, Kompass- und Gyroskopmesswerte) berechnet werden. Gemäß einem Aspekt der Erfindung kann der Weg durch eine Reihe von 2-D-Punkten in einem Vektor von 0 bis N Schritten dargestellt werden. Zum Beispiel: [(x0, y0), (x1, y1), ..., (xn, yn)], wobei x eine Richtung und y den Winkel einer Abbiegung darstellt. Wenn in diesem Beispiel der Richtungswert von x 1 ist, kann dies bedeuten, dass der Benutzer nach links abgebogen ist. Demgegenüber kann ein Wert von –1 bedeuten, dass nach rechts abgebogen wurde. So kann der vereinfachte Weg 550 beispielsweise durch einen 2-D-Punktvektor wie den folgenden dargestellt werden: [(–1, 90), (1, 90), (–1, 90), (–1, 90), (1, 90), (–1, 90)]. Entlang den Scheitelpunkten des Wegs 550 können auch die Entfernungen zwischen den einzelnen Abbiegungen berechnet werden. Dies kann z. B. durch einen Ganzzahl-Entfernungsvektor dargestellt werden (z. B. [0.5, 1.0, 2.0, 1.5, 1.5, 0.5, 0.5]) wobei jede Ganzzahl eine Entfernung darstellt (z. B. in Zoll, Fuß, Metern, Yards usw.), die vom Benutzer zurückgelegt wurde. Während der Weg 550 nur wenige Punkte 541 bis 548 enthält, ist anzumerken, dass der Weg 550 aus Hunderten von 2-D-Punkten bestehen kann, die aus Zehntausenden von Signalprotokollablesungen berechnet werden.As already discussed, the way can be 550 from client device-related INS signals (eg, accelerometer, compass, and gyroscope measurements). According to one aspect of the invention, the path may be represented by a series of 2-D points in a vector of 0 to N steps. For example: [(x0, y0), (x1, y1), ..., (xn, yn)], where x represents a direction and y represents the angle of a turn. In this example, if the direction value of x is 1, this may mean that the user has turned left. In contrast, a value of -1 may mean that it has been bent to the right. So can the simplified way 550 for example, represented by a 2-D point vector such as the following: [(-1, 90), (1, 90), (-1, 90), (-1, 90), (1, 90), (- 1, 90)]. Along the crests of the path 550 You can also calculate the distances between each turn. This can be z. Represented by an integer range vector (e.g., [0.5, 1.0, 2.0, 1.5, 1.5, 0.5, 0.5]) where each integer represents a distance (eg, in inches, feet, meters, yards, etc .), which was completed by the user. While the way 550 only a few points 541 to 548 contains, it should be noted that the way 550 can consist of hundreds of 2-D points, calculated from tens of thousands of signal protocol readings.
In einigen Ausführungsformen kann der Weg 550 nach seiner Berechnung von einem Clientgerät aufgezeichnet werden. Alternativ oder zusätzlich dazu können durch Crowdsourcing erfasste Wege zur weiteren Verarbeitung an einen Senner übertragen werden. Z. B. könnte ein Server in der Lage sein, eine Anzahl berechneter Benutzerwege zu aggregieren, um eine Anzahl von Routen hoher Qualität innerhalb des Innenraums 300 zu bestimmen. Gemäß einem Aspekt der Erfindung kann durch die Aggregation einer ausreichenden Anzahl von Routen ein vollständiges Layout des Innenraums 300 ermittelt werden.In some embodiments, the path may be 550 after being calculated by a client device. Alternatively or additionally, ways captured through crowdsourcing may be transmitted to a dairyman for further processing. For example, a server might be able to aggregate a number of calculated user paths to a number of high quality routes within the interior 300 to determine. According to one aspect of the invention, by aggregating a sufficient number of routes, a complete interior layout can be achieved 300 be determined.
7 ist ein Beispiel für mehrere durch einen Innenraum 300 führende Routen 750, 760 und 770. In einigen Fällen kann es mehrere Routen geben, die ein Benutzer zu einem bestimmten Zielort hin nehmen kann. So können die Routen 750, 760 und 770 beispielsweise einige unter einer Vielzahl berechneter Benutzerwege zwischen den Orten A und B darstellen, wobei beide Orte bekannte Orte auf einer Stockwerkkarte 310 sein können. Ort A kann ein Eingang zur Stockwerkkarte 310 und Ort B ein besonderer Konferenzraum innerhalb der Stockwerkkarte 310 sein. Möglicherweise gibt es eine Anzahl „guter” Kandidaten für Routen, die von A nach B möglich sind, z. B. Routen, durch die tatsächlich Orte bestimmt werden, wo Benutzer wahrscheinlich gehen. Andere „Ausreißer”-Routen können Routen von A nach B darstellen, die nicht oft genommen werden; z. B. kann es sich bei Route 770 in um eine Route handeln, die aus dem Weg eines Sicherheitsbediensteten durch eine Sicherheitstür berechnet wurde. Zur Identifikation der „guten” Routen können ähnliche Benutzerwege, die wahrscheinlich dieselbe mögliche Route von A nach B darstellen, bewertet werden. Die Bewertungen können zur Identifikation der „guten” Routen für eine Gruppe ähnlicher Benutzerwege benutzt werden. 7 is an example of several through an interior 300 leading routes 750 . 760 and 770 , In some cases, there may be multiple routes that a user can take to a specific destination. So can the routes 750 . 760 and 770 For example, represent some of a variety of calculated user paths between the locations A and B, both places known places on a floor map 310 could be. Location A may be an entrance to the floor map 310 and location B is a special conference room within the floor map 310 be. There may be a number of "good" candidates for routes possible from A to B, e.g. Routes that actually determine places where users are likely to go. Other "outlier" routes may represent routes from A to B that are not taken often; z. For example, it may be at route 770 in to be a route calculated from the path of a security guard through a security door. To identify the "good" routes, similar user paths that are likely to represent the same possible route from A to B can be evaluated. The reviews can be for Identification of the "good" routes can be used for a group of similar user paths.
Gemäß einigen Aspekten der Erfindung kann eine erste „gute” Kandidatenroute, die zwei beliebige Orientierungspunkte auf dem Stockwerkgrundriss 310 passiert, gewählt werden (z. B. ein Zimmer, ein Essensstand, eine Registrierkasse oder andere frequentierte Benutzerzielorte). So kann die Route 550 beispielsweise aufgrund einer Anzahl von Abbiegungen in der Route, die unter einem Schwellenwert liegt, als erste „gute” Kandidatenroute zwischen den Positionen A und B ausgewählt werden. Wie bereits erörtert, kann die Route 550 einen berechneten Benutzerweg zwischen den Positionen A und B darstellen. Für jede erste Kandidatenroute werden Ähnlichkeitsmetriken erzeugt und basierend auf den Ähnlichkeitsmetriken kann eine Gesamtbewertung der Übereinstimmungen mit anderen Benutzerwegen zwischen den beiden Orientierungspunkten bestimmt werden.In accordance with some aspects of the invention, a first "good" candidate route may be any two landmarks on the floor plan 310 happens to be chosen (eg a room, a food stand, a cash register or other frequented user destination). That's how the route works 550 for example, due to a number of turns in the route that is below a threshold, to be selected as the first "good" candidate route between positions A and B. As already discussed, the route can 550 represent a calculated user path between positions A and B. Similarity metrics are generated for each first candidate route, and based on the similarity metrics, an overall score of the matches with other user paths between the two landmarks can be determined.
Durch die Ähnlichkeitsmetriken wird eine Untermenge von Komponenten bestimmt, die für einen Vergleich der Kandidatenrouten mit den Benutzerwegen verwendet werden können. So können die Ähnlichkeitsmetriken beispielsweise drei Komponenten haben: eine Distanz-Ähnlichkeitsmetrik (P), eine Abbiegungsanzahl-Ähnlichkeitsmetrik (T) und eine Abbiegungswinkel-Ähnlichkeitsmetrik (D). Die Distanz-Ähnlichkeitsmetrik (P) kann durch den Vergleich einer Kandidatenroute mit den Benutzerwegen berechnet werden. So kann ein Distanzvektor der Kandidatenroute beispielsweise mittels eines Korrelationskoeffizienten wie des Pearsonschen Koeffizienten mit einem Distanzvektor von Benutzerwegen verglichen werden. Mithilfe der Korrelationskoeffizienten können die Relationsstärken zwischen der Kandidatenroute und den Benutzerwegen gemessen werden. Die Abbiegungsanzahl-Ähnlichkeitsmetrik (T) kann durch die Bestimmung der Anzahl der Abbiegungen auf einem gegebenen Benutzerweg und die Subtraktion der von der Kandidatenroute abgeleiteten Abbiegungsanzahl berechnet werden. Die Abbiegungswinkel-Ähnlichkeitsmetrik (D) kann durch die folgende Gleichung dargestellt werden: N
D = (Σabs(Wegabbiegung[i] – Kandidatenroutenabbiegung[i]))/(180 × N)
i = 1 The similarity metrics determine a subset of components that can be used to compare the candidate routes to the user paths. For example, the similarity metrics may have three components: a distance similarity metric (P), a turn number similarity metric (T), and a turn angle similarity metric (D). The distance similarity metric (P) can be calculated by comparing a candidate route with the user paths. For example, a distance vector of the candidate route can be compared to a distance vector of user paths by means of a correlation coefficient such as Pearson's coefficient. Using the correlation coefficients, the relationship strengths between the candidate route and the user paths can be measured. The turn number similarity metric (T) may be calculated by determining the number of turns on a given user path and subtracting the number of turns derived from the candidate route. The turn angle similarity metric (D) can be represented by the following equation: N D = (Σ abs (path deflection [i] - candidate route deflection [i])) / (180 × N) i = 1
In der obigen Gleichung steht N für eine Mindestanzahl übereinstimmender Abbiegungen zwischen einem Benutzerweg und einer Kandidatenroute, Wegabbiegung[i] für den Abbiegungswinkel des i-ten Winkels auf dem Weg und Kandidatenroutenabbiegung[i] für den i-ten Winkel auf der Kandidatenroute.In the above equation, N stands for a minimum number of matching bends between a user's route and a candidate route, path deflection [i] for the i-angle turn angle on the way, and candidate i-bend for the i-th angle on the candidate route.
Schließlich kann eine Kombination von D, T und P zur Bestimmung einer endgültigen Ähnlichkeitsbewertung verwendet werden. Diese Kombination kann z. B. durch die folgende Gleichung dargestellt werden: Endgültige Ähnlichkeitsbewertung = D × P + T2 Finally, a combination of D, T and P can be used to determine a final similarity score. This combination can z. B. represented by the following equation: Final similarity rating = D × P + T 2
Als beste Route für die Gruppe der Benutzerwege können die Kandidatenrouten mit den höchsten Bewertungen im Vergleich zu den Benutzerwegen ausgewählt werden. So können beispielsweise die über einem im Voraus festgelegten Schwellenwert platzierten Spitzenkandidaten ausgewählt werden. Alternativ dazu kann eine Anzahl der höchstplatzierten Kandidaten ausgewählt werden (z. B. die ersten drei).As the best route for the group of user routes, the candidate routes having the highest ratings can be selected in comparison with the user's routes. For example, the top candidates placed above a predetermined threshold may be selected. Alternatively, a number of the highest placed candidates may be selected (eg, the first three).
8 ist ein Beispiel für ein berechnetes Layout von in einem Innenraum 300 passierten Bereichen. Durch Aggregation der Daten der Spitzenkandidatenrouten unter den „guten” Routen (z. B. berechnete Benutzerwege) kann es möglich sein, Layoutdarstellungen von Gebäuden, Zimmern usw. zu erzeugen. So können beispielsweise, wie in 8 dargestellt, die Orientierungspunkte A bis T bekannte Orientierungspunkte im Innenraum darstellen. Die Orientierungspunkte können z. B. ein Büro, ein Konferenzraum, eine Toilette oder eine Reihe anderer häufig aufgesuchter Orientierungspunkte in einem typischen Innenraum sein. Die besten Routen zwischen beliebigen gegebenen zwei Orientierungspunkten von A bis T können verbunden und auf einer Stockwerkkarte 310 eingezeichnet werden, um ein Gerüst 850 um Barrieren (z. B. Wände) herum führender begehbarer Bereiche im Innenraum 300, z. B. begehbarer Routen zwischen zwei beliebigen gegebenen bekannten Orientierungspunkten (A, B), (B, C), (C, T)... usw., zu schaffen. 8th is an example of a calculated layout of in an interior 300 passed areas. By aggregating the data of the top candidate routes under the "good" routes (eg calculated user paths), it may be possible to create layout representations of buildings, rooms, etc. For example, as in 8th represented, the landmarks A to T represent known landmarks in the interior. The landmarks can z. An office, a conference room, a toilet or a number of other frequently visited landmarks in a typical interior space. The best routes between any given two landmarks from A to T can be connected and on a floor map 310 drawn to a scaffolding 850 around walkways (eg walls) around leading walk-in areas in the interior 300 , z. B. walkable routes between any given known landmarks (A, B), (B, C), (C, T) ... etc., to create.
Im Rahmen einiger Ausführungsformen können weitere Verfeinerungen angewandt werden, um die Genauigkeit der definierten begehbaren Bereiche zu erhöhen. So können beispielsweise entlang den besten begehbaren Routen erfasste Funknetzzugangspunkt-Daten untersucht werden, um festzustellen, ob sich dieselben Punkte auf zwei verschiedenen Routen befinden. Auf der Grundlage dieses Vergleichs können doppelte Routen aussortiert werden. Bei einer ausreichend großen Menge verfeinerter Routen könnten Rückschlüsse auf Einschlussbeziehungen zwischen Gebäuden und Zimmern gezogen werden. Darüber hinaus können noch nicht kartierte Barrieren im Innenraum bestimmt werden. Z. B. kann es sich bei Bereichen, um die Benutzer regelmäßig herumgehen, um Wände, Aufstellungsplätze, Zimmer usw. handeln.In some embodiments, further refinements may be applied to increase the accuracy of the defined walk-in areas. For example, radio network access point data collected along the best walkable routes can be examined to see if the same points are on two different routes. Based on this comparison, duplicate routes can be sorted out. With a sufficiently large amount of refined routes, conclusions could be drawn about the inclusion relationships between buildings and rooms. In addition, not yet mapped barriers can be determined in the interior. For example, areas that users walk around regularly may be walls, sites, rooms, and so on.
9 ist eine Methode 900 des Crowdsourcings von Signalprotokollen. Das Crowdsourcing kann die Erhebung von Signalprotokoll-Informationen (z. B. ein zeitindexiertes Protokoll über INS-Signale und Funksignalstärken) von einer Reihe von Benutzer-Clientgeräten, während die Benutzer durch einen Innenraum gehen, umfassen. Ein Server kann dabei beispielsweise eine Reihe von Signalprotokollen von einer Reihe von Clientgeräten empfangen. Wie bereits erwähnt, kann diese Erhebung von Informationen durchgeführt werden, nachdem die Benutzer in aktiver Weise ihre Zustimmung zur Teilnahme gegeben haben. 9 is a method 900 Crowdsourcing of signal protocols. Crowdsourcing For example, the collection of signal protocol information (eg, a time-indexed protocol about INS signals and wireless signal strengths) from a number of user client devices while the users are walking through an interior may include. For example, a server may receive a number of signal protocols from a number of client devices. As already mentioned, this collection of information may be performed after the users have actively consented to participate.
Im Stadium 910 kann ein Innenraum identifiziert werden. Gemäß einigen Aspekten der Erfindung kann auf eine Karte eines Innenraums zugegriffen werden, um Benutzerbewegungen nachzuverfolgen. So können beispielsweise Benutzer von sich aus einen Innenraumstandort in das Clientgerät eingeben, beispielsweise indem sie einen Punkt auf einem Display auswählen oder eine Adresse oder sonstige den Standort kennzeichnende Informationen eingeben. Gemäß einem Aspekt der Erfindung kann der Benutzer einen Strichcode scannen oder ein Bild irgendeines anderen mit einem bekannten Ort verbundenen Merkmals des Innenraums erfassen (z. B. ein Bild einer Tür, eines Schilds, eines Denkmals oder irgendeines anderen mit dem Ort im Innenraum verbundenen Merkmals).In the stage 910 an interior can be identified. In accordance with some aspects of the invention, a map of an interior may be accessed to track user movement. For example, users may enter an indoor location into the client device on their own, such as selecting a point on a display or entering an address or other information identifying the location. According to one aspect of the invention, the user may scan a bar code or capture an image of any other interior feature associated with a known location (eg, a picture of a door, sign, monument, or any other feature associated with the location in the interior ).
In einigen Fällen kann in diesem Stadium erkannt werden, wann die Benutzer sich in ein Gebäude hinein bewegt haben. So kann beispielsweise ein Benutzer, der ein mit globalen Positionsbestimmungsfunktionen, wie z. B. GPS, ausgestattetes Clientgerät mitführt, GPS-Signale empfangen, während er sich draußen aufhält. Wenn die GPS-Signale plötzlich verloren gehen, kann festgestellt werden, dass der Benutzer eine Struktur, wie z. B. ein Gebäude, betreten hat.In some cases, it can be seen at this stage when the users have moved into a building. For example, a user who has a global positioning function, such B. GPS, equipped client device carries GPS signals while he is outdoors. If the GPS signals are suddenly lost, it can be determined that the user has a structure, such as. B. a building has entered.
Im Stadium 920 können Signale von Mobilgeräten empfangen werden, während sie sich durch den Innenraum bewegen. Die empfangenen Signale können beispielsweise bestimmte Bewegungen (z. B. Schritt und Abbiegungen) ausweisen. Das Mobilgerät kann mit Orientierungsvorrichtungen (z. B. Beschleunigungsmessern, Gyroskopen, Kompassen, Drucksensoren usw.) ausgestattet sein, um INS-Signale zu erzeugen, die nachverfolgt und gespeichert werden können. Einigen Aspekten der Erfindung entsprechend können die vom Clientgerät ausgesandten Signale auch Informationen zur Identifikation des Clientgeräts und seines aktuellen Standorts enthalten (z. B. Kennungen von Funknetzzugangspunkten wie SSIDs oder MAC-Adressen und die entsprechenden Signalstärken).In the stage 920 Mobile signals can be received as they move through the interior. The received signals can for example identify certain movements (eg step and turns). The mobile device may be equipped with orientation devices (eg, accelerometers, gyroscopes, compasses, pressure sensors, etc.) to generate INS signals that can be tracked and stored. According to some aspects of the invention, the signals emitted by the client device may also include information identifying the client device and its current location (eg, identifiers of radio network access points such as SSIDs or MAC addresses and the corresponding signal strengths).
Im Stadium 930 können Wege der Mobilgeräte berechnet werden. Gemäß einigen Aspekten der Erfindung kann der Weg der Benutzer anhand der vom Clientgerät des Benutzers empfangenen INS-Signale berechnet werden. So können beispielsweise die Wege mithilfe einer Gissungsmethode berechnet werden, bei der die Clientgeräte als Schrittzähler verwendet werden, um die Geschwindigkeit und die Richtung abzuschätzen. So können beispielsweise mittels Beschleunigungsmesser-Ablesungen von einem gegebenen Clientgerät Messungen der Geschwindigkeit, mit der sich der Benutzer möglicherweise gerade bewegt, und ein grober Umriss des Wegs des Benutzers approximiert werden. In einigen Aspekten können auch Kompassmessungen zur Bestimmung der Richtungsänderungsbewegungen des Benutzers herangezogen werden.In the stage 930 can be calculated ways of mobile devices. In accordance with some aspects of the invention, the path of the users may be calculated from the INS signals received from the user's client device. For example, the paths can be calculated using a gaping method, which uses the client devices as a pedometer to estimate the speed and direction. For example, by means of accelerometer readings from a given client device, measurements of the speed at which the user may be moving and a rough outline of the user's path may be approximated. In some aspects, compass measurements can also be used to determine the user's direction change motions.
Im Stadium 940 kann festgestellt werden, ob das Gerät aufgehört hat, sich zu bewegen. Diese Feststellung kann zum Beispiel aufgrund fehlender Beschleunigungsmesser-Informationen vom Benutzer-Clientgerät über einen bestimmten im Voraus festgelegten Zeitraum, wie z. B. eine Minute, oder aufgrund der Tatsache, dass die Beschleunigungsmesser-Ablesungen unter einem bestimmten Schwellenwert liegen, erfolgen. Wenn festgestellt wird, dass das Gerät aufgehört hat, sich zu bewegen, kann die Methode 900 zum Stadium 960 übergehen. Andernfalls kann die Methode 900 zum Stadium 950 übergehen.In the stage 940 it can be determined if the device has stopped moving. This determination can be made, for example, due to lack of accelerometer information from the user client device over a certain pre-determined period of time, such as a time frame. One minute, or due to the fact that the accelerometer readings are below a certain threshold. If it is determined that the device has stopped moving, the method may 900 to the stage 960 pass. Otherwise, the method can 900 to the stage 950 pass.
Im Stadium 950 können Signalprotokolle aufgezeichnet werden. Gemäß einigen Aspekten der Erfindung können die Signalprotokolle auf dem Clientgerät, einem Back-End-Server oder einer Kombination solcher Geräte aufgezeichnet werden. Die Signalprotokolle können einen Zeitstempel, Beschleunigungsmesser-, Orientierungs- und Kompassmessungen, Funkstärken sowie andere Messungen wie Bluetooth usw. enthalten. Für jede Zeiteinheit entlang einem Weg kann ein Signalprotokoll (z. B. ein zeitindexiertes Signalprotokoll) aufgezeichnet werden. Das Signalprotokoll kann z. B. periodisch, etwa alle 0,1 Sekunden, aufgezeichnet werden. Während das Gerät sich bewegt, kann die Methode 900 das Stadium 920 wiederholen, um weitere Signale aus dem Clientgerät zur Aufzeichnung zu empfangen.In the stage 950 Signal logs can be recorded. In accordance with some aspects of the invention, the signaling protocols may be recorded on the client device, a back-end server, or a combination of such devices. The signal protocols may include a timestamp, accelerometer, orientation and compass measurements, radio strengths, and other measurements such as Bluetooth, etc. For each unit of time along a path, a signal protocol (eg, a time-indexed signal protocol) may be recorded. The signal protocol can z. B. periodically, about every 0.1 seconds recorded. While the device is moving, the method can 900 the stadium 920 repeat to receive additional signals from the client device for recording.
Alternativ dazu können Signalprotokolle hochgeladen werden, während sie aufgezeichnet werden, um komplexere Verarbeitungen wie z. B. mit einem Back-End-Server zu ermöglichen. Gemäß einem Aspekt der Erfindung können Signalprotokolle nur dann hochgeladen werden, wenn dies vom Benutzer angefordert wird oder wenn das Clientgerät mit einem besonderen mobilen oder drahtlosen Netzwerk verbunden ist oder sofern das Clientgerät Zugriff auf ein Netzwerk hat, das einer bestimmten Mindestbandbreiten-Anforderung entspricht.Alternatively, signal protocols may be uploaded as they are being recorded to provide more complex processing, such as processing. For example, with a back-end server. According to one aspect of the invention, signal protocols may only be uploaded when requested by the user or when the client device is connected to a particular mobile or wireless network or if the client device has access to a network that meets a certain minimum bandwidth requirement.
Im Stadium 960 können anhand der berechneten Wege vereinfachte Routen bestimmt werden. Während die Benutzer sich durch den Innenraum bewegen, können unter Verwendung einer Anzahl von Signalprotokollen mehrere Wege berechnet werden. Zwecks Verarbeitung der Wege zur Schaffung vereinfachter Routen kann ein Glättungsalgorithmus (z. B. Ramer-Douglas-Peucker) eingesetzt werden, um die Anzahl der zur Annäherung an die Wege verwendeten Signalprotokolle zu verringern. Die vereinfachten Routen können eine Mindestmenge von Informationen enthalten, die zur Identifikation der Routen benötigt wird. Die vereinfachten Routen können z. B. eine Start- und eine Endposition, eine Liste von Abbiegungen und eine relative Distanz zwischen den Abbiegungen enthalten. In diesem Beispiel kann die Liste der Abbiegungen eine Richtungsanzeige und einen Winkel der einzelnen Kurven enthalten.In the stage 960 can be determined based on the calculated routes simplified routes. As users move through the interior, multiple ways can be calculated using a number of signal protocols. In order to process the ways to create simplified routes, a smoothing algorithm (eg Ramer-Douglas-Peucker) can be used to reduce the number of signal protocols used to approach the paths. The simplified routes may include a minimum amount of information needed to identify the routes. The simplified routes can, for. As a start and an end position, a list of turns and a relative distance between the bends included. In this example, the list of turns may include a direction indicator and an angle of each curve.
Im Stadium 970 kann, falls festgestellt wird, dass das Gerät sich wieder bewegt (z. B. wenn die Beschleunigungsmesser-Ablesungen über einem bestimmten Schwellenwert liegen), die Methode 900 wie oben beschrieben mit der Aufzeichnung von Signalprotokollen fortgesetzt werden. Im Rahmen der Methode 900 kann z. B. das Stadium 920 wiederholt werden, um weitere Clientgerät-Signaldaten zu empfangen und anhand der empfangenen Daten Benutzerwege zu berechnen. Unter Umständen kann durch die Aggregation der mittels der Methode 900 gesammelten Signaldaten die Erstellung einer Modelldarstellung der in einem Innenraum passierten Bereiche ermöglicht werden.In the stage 970 If the device is determined to move again (eg, if the accelerometer readings are above a certain threshold), the method may be used 900 continue as described above with the recording of signal protocols. In the context of the method 900 can z. The stage 920 are repeated to receive additional client device signal data and to calculate user paths based on the received data. Under certain circumstances, the aggregation of the method 900 collected signal data, the creation of a model representation of the areas passed in an interior areas are made possible.
10 ist eine Methode 1000 zur Durchführung einer Standorterkundung hinsichtlich der am häufigsten passierten Bereiche in einem Innenraum. Gemäß einigen Aspekten können durch Crowdsourcing erhobene Signaldaten (z. B. von einer Reihe von Clientgeräten, die sich durch einen Innenraum bewegen, empfangene Signale) zur Erstellung vereinfachter Routen verwendet werden, um ein Gerüst begehbarer Bereiche zwischen bekannten Orientierungspunkten im Innenraum und der jeweiligen Distanzen zwischen den Orientierungspunkten zu erstellen. 10 is a method 1000 to conduct a site survey of the most frequently encountered areas in an interior space. In some aspects, crowdsourced signal data (eg, from a number of client devices moving through an interior, received signals) may be used to create simplified routes to provide a framework of walkable areas between known interior landmarks and their respective distances between the landmarks.
Im Stadium 1010 kann eine Anzahl von Routen für einen Innenraum empfangen werden. Zum Beispiel kann ein Server Routen und mit ihnen verknüpfte Benutzerwege von einer Reihe von Clientgeräten empfangen. Während die Benutzer die Clientgeräte durch den Innenraum bewegen, können diese Geräte dazu verwendet werden, Benutzerwege nachzuverfolgen und zu berechnen. Anhand der Benutzerwege kann eine Anzahl häufig genommener Routen (z. B. Routen mit ähnlichen Start- und Endpunkten) bestimmt werden. Gemäß einigen Aspekten der Erfindung können die Clientgeräte anhand von Signalprotokolldaten (z. B. Zeitstempel, Funknetzzugangspunkte und -signalstärken, Beschleunigungsmesser-Ablesungen usw.), einer Eingangskoordinate und einer Ausgangskoordinate eine Route berechnen.In the stage 1010 a number of routes may be received for an interior. For example, a server may receive routes and user paths associated therewith from a number of client devices. As users move the client devices through the interior, these devices can be used to track and calculate user paths. A number of commonly used routes (eg, routes with similar start and end points) can be determined based on the user paths. In accordance with some aspects of the invention, the client devices may compute a route based on signal protocol data (eg, timestamp, radio network access and signal strengths, accelerometer readings, etc.), an input coordinate, and an output coordinate.
Im Stadium 1020 können die Routen bewertet werden. So können beispielsweise die im Stadium 1010 empfangenen Routen, die wahrscheinlich dieselben möglichen Routen darstellen, bewertet werden, um die beste Route für eine Gruppe ähnlicher Benutzerwege zu identifizieren. Gemäß einigen Aspekten der Erfindung kann die Bewertung aufgrund einer Kombination von Ähnlichkeitsmetriken erfolgen, die erzeugt werden, um die besten Routen mit den Benutzerwegen zu vergleichen. Auf der Grundlage dieses Vergleichs können Routen, die häufiger benutzt werden, eine höhere Bewertung erhalten, weil es sich bei ihnen um Routen handeln könnte, die häufiger von den Benutzern genommen werden. Die Ähnlichkeitsmetriken definieren eine Untermenge von Komponenten, die für einen Vergleich der Routen mit den Benutzerwegen verwendet werden können. So können beispielsweise die Ähnlichkeitsmetriken aus drei Komponenten bestehen, und zwar aus einer Distanz-Ähnlichkeitsmetrik, einer Abbiegungsanzahl-Ähnlichkeitsmetrik und einer Abbiegungswinkel-Ähnlichkeitsmetrik. Zur Bestimmung einer endgültigen Ähnlichkeitsbewertung kann eine Kombination der drei Ähnlichkeitsmetriken verwendet werden.In the stage 1020 the routes can be rated. For example, those in the stadium 1010 received routes, which are likely to represent the same possible routes, are evaluated to identify the best route for a group of similar user routes. In accordance with some aspects of the invention, the assessment may be based on a combination of similarity metrics generated to compare the best routes with the user paths. Based on this comparison, routes that are used more frequently may receive a higher rating because they could be routes taken more frequently by the users. The similarity metrics define a subset of components that can be used to compare the routes with the user paths. For example, the similarity metrics may consist of three components, namely a distance similarity metric, a turn number similarity metric, and a turn angle similarity metric. To determine a final similarity score, a combination of the three similarity metrics may be used.
Im Stadium 1030 können die Routen mit der höchsten Bewertung ausgewählt werden. Die Routen aus dem Stadium 1020 mit den höchsten Bewertungen können als die beste Route für eine Gruppe von Benutzerwegen ausgewählt werden. So können beispielsweise die über einem im Voraus festgelegten Schwellenwert platzierten Spitzenkandidaten ausgewählt werden. Alternativ dazu kann eine Anzahl der höchstplatzierten Routen ausgewählt werden (z. B. die ersten drei).In the stage 1030 the routes with the highest rating can be selected. The routes from the stadium 1020 with the highest ratings can be selected as the best route for a group of user routes. For example, the top candidates placed above a predetermined threshold may be selected. Alternatively, a number of the highest ranked routes may be selected (eg, the first three).
Im Stadium 1040 können die ausgewählten Routen für die Identifikation der am häufigsten passierten Bereiche in einem Innenraum verwendet werden. So kann es beispielsweise durch Aggregation der Daten der im Stadium 1030 am höchsten bewerteten Routen möglich sein, Darstellungen von Gebäuden, Zimmern usw. zu erzeugen. Gemäß einigen Aspekten können die Routen eine Route darstellen, die die Benutzer am wahrscheinlichsten zwischen zwei bekannten Orientierungspunkten (z. B. Zimmern) nehmen werden. Nach einem Aspekt der Erfindung kann, nachdem die Auswahl eines Satzes von Routen für den Innenraum erfolgt ist, der zusammen mit den Routen erfasste Funknetzzugangspunkt untersucht werden. Zum Beispiel können für eine Gruppe ausgewählter Routen ein gemeinsamer Start- und ein gemeinsamer Endpunkt bestimmt werden. Durch die Berücksichtigung des Funknetzzugangspunkts im Hinblick auf Teile der Route kann entschieden werden, welche Routen oder Abschnitte der Routen sich tatsächlich am selben Ort befinden. So kann beispielsweise derselbe Funknetzzugangspunkt entlang zwei getrennten Routen zwischen denselben Orten mit den Koordinaten (x1, y1) auf einer ersten Route und (x2, y2) auf einer zweiten Route beobachtet werden. Es besteht die Möglichkeit, dass es sich bei diesen Koordinatenpunkten um denselben Ort oder um sehr ähnliche Orte handelt. Diese Informationen können dazu verwendet werden, den angesichts der erhobenen Messungen plausibelsten Satz von Routen zu generieren. Der Routensatz kann dann zusammen gruppiert werden, um einen oder mehrere Pfade zwischen den gemeinsamen Start- und Endpunkten innerhalb des Innenraums zu bestimmen.In the stage 1040 For example, the selected routes may be used to identify the most frequently passed areas in an interior space. So it can be done, for example, by aggregating the data of the stage 1030 highest rated routes may be possible to produce representations of buildings, rooms, etc. In some aspects, the routes may represent a route that users are most likely to take between two known landmarks (eg, rooms). According to one aspect of the invention, after the selection of a set of routes for the interior has been made, the radio network access point detected along with the routes may be examined. For example, for a group of selected routes, a common start and a common endpoint can be determined. By considering the radio network access point with regard to parts of the route, it can be decided which routes or sections of the routes are actually at the same location. For example, the same radio network access point may be observed along two separate routes between the same locations having the coordinates (x1, y1) on a first route and (x2, y2) on a second route. There is a possibility that these coordinate points are the same place or very similar places. This information can be used to generate the most plausible set of routes given the measurements taken. The route set may then be grouped together to determine one or more paths between the common start and end points within the interior.
Die oben beschriebenen Aspekte der hier offenbarten Erfindung können für die Bereitstellung einer skalierbaren Methode zur Durchführung von Standorterkundungen zum Aufbau eines Funknetzzugangspunkt-Modells eines Innenraumstandorts von Vorteil sein. Durch das Crowdsourcing von Funk- und INS-Signalen, die von mehreren sich durch den Innenraumstandort bewegenden Clientgeräten ausgehen, kann eine genaue und auf dem aktuellen Stand basierende Zugangspunkt-Modelldatenbank erstellt und gepflegt werden. Der Einfachheit halber sind die in diesem Dokument enthaltenen Beispiele auf einen einzelnen Innenraum-Stockwerkgrundriss bezogen. Es versteht sich allerdings, dass die in diesem Dokument beschriebenen Systeme und Methoden in Verbindung mit mehrstöckigen Gebäuden verwendet werden können, die mehrere Stockwerkgrundrisse haben. So können beispielsweise Funknetzzugangspunkte in verschiedenen Stockwerken dafür verwendet werden zu bestimmen, in welchem Stockwerk der Benutzer sich befindet.The above-described aspects of the invention disclosed herein may be advantageous in providing a scalable method for conducting site exploration to construct a radio network access point model of an indoor location. By crowdsourcing radio and INS signals from multiple client devices moving through the indoor site, an accurate and state-of-the-art access point model database can be created and maintained. For the sake of simplicity, the examples contained in this document are based on a single interior floor plan. It should be understood, however, that the systems and methods described herein may be used in connection with multi-story buildings having several floor plans. For example, radio network access points on different floors may be used to determine which floor the user is on.
Obwohl die vorliegende Technologie unter Bezug auf besondere Beispiele beschrieben wurde, versteht es sich, dass es sich bei diesen Beispielen um reine Veranschaulichungen der Prinzipien und der Anwendungen der vorliegenden Technologie handelt. Beispielweise sollte klar sein, dass die beschriebenen Systeme und Methoden teilweise oder ganz auf einem mobilen Clientgerät wie einem Mobiltelefon, auf einem Remote-Computergerät oder auf einer Kombination derselben ausgeführt werden können. Zusätzlich dazu versteht es sich, dass an den Veranschaulichungsbeispielen zahlreiche weitere Änderungen vorgenommen werden könnten. Diese und andere Anordnungen können allerdings entwickelt werden, ohne vom Geist und vom Anwendungsbereich der vorliegenden Technologie, wie sie durch die angefügten Patentansprüche definiert werden, abzuweichen.Although the present technology has been described with reference to specific examples, it should be understood that these examples are merely illustrative of the principles and applications of the present technology. For example, it should be understood that the described systems and methods may be implemented in whole or in part on a mobile client device such as a mobile phone, on a remote computing device, or a combination thereof. In addition, it should be understood that numerous other changes could be made to the illustrative examples. However, these and other arrangements may be developed without departing from the spirit and scope of the present technology as defined by the appended claims.
ZITATE ENTHALTEN IN DER BESCHREIBUNG QUOTES INCLUDE IN THE DESCRIPTION
Diese Liste der vom Anmelder aufgeführten Dokumente wurde automatisiert erzeugt und ist ausschließlich zur besseren Information des Lesers aufgenommen. Die Liste ist nicht Bestandteil der deutschen Patent- bzw. Gebrauchsmusteranmeldung. Das DPMA übernimmt keinerlei Haftung für etwaige Fehler oder Auslassungen.This list of the documents listed by the applicant has been generated automatically and is included solely for the better information of the reader. The list is not part of the German patent or utility model application. The DPMA assumes no liability for any errors or omissions.
Zitierte Nicht-PatentliteraturCited non-patent literature
-
IEEE-802.11-Management-Frames [0028] IEEE 802.11 Management Frames [0028]
-
Ethernet, WiFi (z. B. 802.11, 802.11 b, g, n oder andere Standards) [0034] Ethernet, WiFi (eg 802.11, 802.11 b, g, n or other standards) [0034]