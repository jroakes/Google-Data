WO2024081043A1 - Virtual channel balancing in ring-based topologies - Google Patents
Virtual channel balancing in ring-based topologies Download PDFInfo
- Publication number
- WO2024081043A1 WO2024081043A1 PCT/US2023/024825 US2023024825W WO2024081043A1 WO 2024081043 A1 WO2024081043 A1 WO 2024081043A1 US 2023024825 W US2023024825 W US 2023024825W WO 2024081043 A1 WO2024081043 A1 WO 2024081043A1
- Authority
- WO
- WIPO (PCT)
- Prior art keywords
- node
- data packet
- hops
- dateline
- ring network
- Prior art date
Links
- 235000008694 Humulus lupulus Nutrition 0.000 claims abstract description 62
- 238000000034 method Methods 0.000 claims abstract description 20
- 230000007704 transition Effects 0.000 description 4
- 125000002015 acyclic group Chemical group 0.000 description 3
- 230000005540 biological transmission Effects 0.000 description 3
- 230000003068 static effect Effects 0.000 description 3
- 238000013459 approach Methods 0.000 description 2
- 238000010586 diagram Methods 0.000 description 2
- 230000002250 progressing effect Effects 0.000 description 2
- 230000002457 bidirectional effect Effects 0.000 description 1
- 238000013329 compounding Methods 0.000 description 1
- 230000001419 dependent effect Effects 0.000 description 1
- 238000009826 distribution Methods 0.000 description 1
- 230000009977 dual effect Effects 0.000 description 1
- 230000006870 function Effects 0.000 description 1
- 238000004904 shortening Methods 0.000 description 1
- 239000007787 solid Substances 0.000 description 1
Classifications
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04L—TRANSMISSION OF DIGITAL INFORMATION, e.g. TELEGRAPHIC COMMUNICATION
- H04L45/00—Routing or path finding of packets in data switching networks
- H04L45/20—Hop count for routing purposes, e.g. TTL
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04L—TRANSMISSION OF DIGITAL INFORMATION, e.g. TELEGRAPHIC COMMUNICATION
- H04L45/00—Routing or path finding of packets in data switching networks
- H04L45/22—Alternate routing
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04L—TRANSMISSION OF DIGITAL INFORMATION, e.g. TELEGRAPHIC COMMUNICATION
- H04L12/00—Data switching networks
- H04L12/28—Data switching networks characterised by path configuration, e.g. LAN [Local Area Networks] or WAN [Wide Area Networks]
- H04L12/42—Loop networks
-
- H—ELECTRICITY
- H04—ELECTRIC COMMUNICATION TECHNIQUE
- H04L—TRANSMISSION OF DIGITAL INFORMATION, e.g. TELEGRAPHIC COMMUNICATION
- H04L49/00—Packet switching elements
- H04L49/10—Packet switching elements characterised by the switching fabric construction
- H04L49/102—Packet switching elements characterised by the switching fabric construction using shared medium, e.g. bus or ring
Definitions
- Ring-based network topologies such as multi-dimensional torus and twisted torus networks, are typically used in on-chip and off-chip networks. These network topologies may suffer from deadlock. Deadlock occurs when a chain of packets is waiting on each other to make progress through the network and the chain forms a cycle that prevents any of the packets from progressing.
- Typical approaches to ensure a deadlock-free network topology include using a dateline or a red-rover algorithm, both of which rely on virtual channels.
- the use of virtual channels may result in reduced performance of the network topology due to imbalanced distributions of the data packets throughout the network.
- the use of a dateline may create long virtual channel dependency chains, which can lead to compounding unfairness and loss of throughput as the number of nodes per dimension increases.
- This technology is directed to routing data packets through a ring-based network without deadlock.
- the technology is directed to a method of routing data packets within a ring network, the method includes receiving, at a first queueing structure within a first node of the ring network, a data packet to be transmitted to a destination node.
- the method may also include determining, by the first node, a number of hops the data packet will traverse as it is transmitted from the first node to the destination node of the ring network.
- the method may also include comparing, by the first node, the number of hops to a threshold hop value to determine whether the number of hops is equal to or less than the threshold hop value.
- the method may also include transmitting, by the first node, the data packet to (i) a dimension queuing structure for a first virtual channel within a second node of the ring network if the number of hops is greater than the threshold hop value, or (ii) a dimension queuing structure for a second virtual channel or a turn queuing structure within the second node if the number of hops is equal to or less than the threshold hop value.
- the first queueing structure within the first node is a turn queueing structure.
- the data packet is transmitted to the turn queueing structure within the second node when the second node is the destination node.
- the network includes a first dateline and a second dateline.
- the first dateline and the second dateline are each positioned between a pair of network nodes on the ring network, wherein a number of nodes positioned between the first dateline and the second dateline matches a number of nodes positioned between the second dateline and the first dateline.
- the first node may also further determine whether the data packet will traverse a dateline as it is transmitted from the first node to the destination node. In some examples, the data packet is transmitted to the dimension queueing structure for the first virtual channel within the second node when it is determined the data packet will traverse the dateline.
- the method further includes: determining, by the second node after receiving the data packet, a second number of hops the data packet will traverse as it is transmitted from the second node to the destination node of the ring network; comparing, by the second node, the number of hops to the threshold hop value to determine whether the second number of hops is equal to or less than the threshold hop value; and transmitting, by the second node, the data packet to: (i) a dimension queuing structure for the first virtual channel within a third node of the ring network if the number of hops is greater than the threshold hop value; or (ii) a dimension queuing structure for a second virtual channel or a turn queuing structure within the third node if the number of hops is equal to or less than the threshold hop value.
- the data packet may be transmitted to the turn queueing structure within the third node when the third node is the destination node.
- the network is a ring network, wherein the ring network is a single dimension of a torus or a twisted torus network.
- the technology may include a ring network including a first node having a first queueing structure.
- the ring network may include a second node having a dimension queuing structure for a first virtual channel and a dimension queuing structure for a second virtual channel.
- the ring network may also include a destination node, where the first node is configured to receive, at the first queueing structure, a data packet to be transmitted to the destination node.
- the ring network may also include a destination node.
- the first node may be configured to determine a number of hops the data packet will traverse as it is transmitted from the first node to the destination node of the ring network; compare the number of hops to a threshold hop value to determine whether the number of hops is equal to or less than the threshold hop value.
- the first node of the ring network may be configured to transmit the data packet to (i) the dimension queueing structure for the first virtual channel if the number of hops is greater than the threshold hop value, or (ii) the dimension queuing structure for the second virtual channel if the number of hops is equal to or less than the threshold hop value.
- the first queueing structure within the first node of the ring network may be a turn queueing structure.
- the ring network may include a first dateline and a second dateline.
- the first dateline and the second dateline are each positioned between a pair of network nodes on the ring network, wherein a number of nodes positioned between the first dateline and the second dateline matches a number of nodes positioned between the second dateline and the first dateline.
- the ring network includes more than eight nodes.
- the first node may be further configured to determine whether the data packet will traverse a dateline as it is transmitted from the first node to the destination node.
- the second node may be configured to: determine, after receiving the data packet, a second number of hops the data packet will traverse as it is transmitted from the second node to the destination node of the ring network; compare, by the second node, the number of hops to the threshold hop value to determine whether the second number of hops is equal to or less than the threshold hop value; and transmit the data packet to: (i) a dimension queuing structure for the first virtual channel within a third node of the ring network if the number of hops is greater than the threshold hop value; or (ii) a dimension queuing structure for the second virtual channel or a turn queuing structure within the third node if the number of hops is equal to or less than the threshold hop value.
- the data packet is transmitted to the turn queue structure within the third node when the third node is the destination node.
- FIG. 1 illustrates an example ring network, in accordance with aspects of the disclosure.
- FIG. 2 illustrates an example ring network having virtual channels, in accordance with aspects of the disclosure.
- FIG. 3 illustrates an example ring network having dual datelines, in accordance with aspects of the disclosure.
- Fig. 4 illustrates an example ring network having nodes with queueing structures, in accordance with aspects of the disclosure.
- FIG. 5 illustrates data packets traversing a ring network in accordance with aspects of the disclosure.
- Fig. 6 illustrates data packets traversing a ring network in accordance with aspects of the disclosure.
- Fig. 7 is a flow diagram illustrating a method for transmitting data packets over a network, according to aspects of the disclosure.
- the technology described herein is directed to improving the performance of ring-based network topologies while ensuring deadlock-free operation by shortening dependency chains and efficiently load balancing the virtual channel (VC) resources of the network.
- the dependency chains may be shortened by adding an additional dateline such that the two datelines are separated by half the diameter of the ring.
- Increasing the efficiency of the load balancing between the VC resources may include switching a data packet to a second VC at any time, so long as that data packet will not cross one of the datelines.
- nodes that form the network may be connected via physical links, such as wires, cables, traces, etc.
- Each physical link may carry data packets on any number of VCs.
- each physical link between a pair of nodes can communicate data packets via one or more VCs.
- each node pair is connected via a physical link.
- nodeO 101 is connected to nodel 103 via physical link 102
- nodel 103 is connected to node2 105 via physical link 104
- node2 105 is connected to node3 107 via physical link 106
- node3 107 is connected to node4 109 via physical link 108
- node4 109 is connected to node5 111 via physical link 110
- node5 111 is connected to nodeO 101 via physical link 112.
- Each physical link 110-112 in ring network 100 includes two virtual channels VC0 and VC1, as illustrated by callouts 122 and 128, which illustrate VC0 (as a solid line) and VC1 (as a dashed line) for connections 102 and 108, respectively.
- ring network 100 includes only six nodes (0-5) and two virtual channels (VC0 and VC1) a ring network may include any number of nodes and any number of virtual channels.
- Nodes may include any type of computing resource capable of communicating with other computing resources.
- nodes may include computers, servers, mobile devices, processors, cores, routers, memory, cards (e.g., accelerator cards), FIFOs, or other such queues, etc.
- nodes may include a collection of computing resources, such as processors with routers, etc.
- Selection of the VC on which to transmit a data packet may be static.
- the routes may be predetermined and fixed.
- the static routes can be stored in tables, such as within RAM memory within the node.
- the destination of a packet may be used to index a table and lookup the route to the destination.
- dateline routing is used to designate one physical link in each direction of a ring as a dateline.
- the physical links may be bidirectional links, such that both directions in a ring can be treated separately.
- Queueing structures are typically programmed to transmit each data packet on a first channel. In the event the data packets cross the dateline, the data packets are moved to the second virtual channel until the data packets reach their respective destination nodes.
- a dateline 220 is positioned between nodes 211 and 201.
- the ring network 200 includes six nodes 201-211, and physical links between each adjacent node, including physical links 202, 204, 206, 208, 210, and 212.
- Each physical link includes two virtual channels VC0 (illustrated as a solid line) and VC1 (illustrated as a dashed line), with the exception of physical link 212, which may be considered a transition link that transfers the data packets between VC0 and VC 1.
- Fig. 2 illustrates physical link 212, between node5211 and nodeO 201, as a single line, with the line being solid on the left side of dateline 220 and dashed on the right side of dateline 220.
- a routing algorithm may initially route the data packets on VC0. However, in the event a data packet crosses the dateline 220, the routing algorithm may switch the data packet to VC1 and subsequently route the data packet on VC1 to ils destination node. As most data packets reach their respective destination nodes prior to passing the dateline 220, a spiral-like chain of acyclic VC dependencies is created. This chain of acyclic dependencies is sufficient to ensure that ring network 200 is deadlock-free. However, the dateline routing creates a chain of VC dependencies longer than the ring network itself.
- queuing structures of network 200 may implement an arbitration algorithm, such as a locally fair or globally fair arbitration algorithm.
- a second dateline may be introduced.
- the two datelines referred to herein as “dual-datelines,” may be separated by half the diameter of the ring network.
- a first dateline 320 is positioned after the third node (305) and the second dateline 322 is positioned after node5 311 of the six-node ring network 300.
- the first dateline 320 is positioned between node2 305 and node3 307
- the second dateline 322 is positioned between node5 311 and nodeO 301.
- nodes 301, 303, and 305 being positioned between the second dateline 322 and the first dateline 320 and nodes 307, 309, and 311 being positioned between the first dateline 320 and the second dateline 322.
- ring network 300 includes six nodes 301-311, and physical links between each adjacent node, including physical links 302, 304, 306, 308, 310, and 312.
- Each physical link includes two virtual channels VCO (illustrated as a solid line) and VC1 (illustrated as a dashed line), with the exceptions of transition links 312 and 306.
- the routing algorithm may initially route the data packets on VCO. However, in the event a data packet crosses the first dateline 320 or the second dateline 322, the routing algorithm may switch the routing of the data packet to VC1. The routing algorithm may then route the data packet on VC1 to its destination node.
- a data packet may traverse, at most, two physical links on VCO before being transitioned to VC1. For example, a data packet may be transmitted from nodeO 301 to node5 311. In this example, the data packet may traverse physical links 302 and 304 on VCO, but then be transitioned to VC1 when crossing the first dateline 320 at physical link 306.
- the data packet may then traverse physical links 308 and 310 on VC1 before reaching destination node5 311.
- a data packet may traverse five physical links before transitioning from VCO to VC1.
- a data packet may be transmitted on VCO over the physical links from nodeO 201 to node5 211, including physical links 202, 204, 206, 208, and 210.
- Fig. 3 illustrates only two datelines in ring network 300 — the first dateline 320 and the second dateline 322 — ring networks may include any number of datelines,
- better balancing of data packet traffic on the virtual channels may be achieved by routing data packets that will not cross a dateline to the second virtual channel VC1.
- data packets that will not cross a virtual channel may be transitioned from VCO to VC1 when the data packet is N hops from its destination node.
- the value of N may be based on the size of the ring network (e.g., the number of nodes in the ring network) and the expected packet traffic patterns.
- Balanced VC usage may be determined based on an assumed traffic pattern. In this regard, different types of traffic patterns may use each VC differently.
- a network with an all- to-all traffic pattern may have different balancing needs than a network with all-to-one or other such traffic patterns.
- global all-to-all traffic patterns are discussed.
- each network node can receive data packets from every other network node and transmit data packets to every other network node.
- Queuing structures may route data packets through the network.
- networks may use these queuing structures to direct data packets as the data packets traverse the network.
- the turn queue may be used to direct data packets as they turn from one dimension of the torus network to the next..
- the turn queue may be used to direct a data packet received by a node on a first dimension onto another dimension.
- Dimension queues may direct data packets continuing along a single dimension of the network and on a virtual channel.
- the dimension queue may direct a data packet from one node to another along the same dimension and on a common virtual channel, such as VCO or VC1.
- the queuing structures may be part of the node or a component connected to the node.
- the queueing structures may be part of a router or other network interface integrated into a node.
- FIG. 4 illustrates queuing structures within nodes 401, 403, 405, and 407 of a network 400.
- each node includes queuing structures.
- node 401 includes turn queues 411, 431 and dimension queue 421
- node 403 includes turn queues 413, 433 and dimension queue 423
- node 405 includes turn queues 415, 435 and dimension queue 425
- node 407 includes turn queues 417, 437 and dimension queue 427.
- Turn queues 431, 433, 435, 437 and 411, 413, 415, 417 may direct data onto and off of dimensions of the torus network.
- FIG. 4 an example data packet is shown as entering, progressing through, and exiting the network 400 by arrows 441, 443, 445, 447, and 449.
- arrow 441 illustrates the data packet entering node 401 via turn queue 441 .
- the data packet is transmitted from node 401 to dimension queue 423 in node 403, as illustrated by arrow 443. From node 403, the data packet is transmitted to dimension queue 425 of node 405, as illustrated by line 445.
- the data packet is then transmitted to turn queue 417 in node 407, where it is subsequently transmitted out, as indicated by arrow 449.
- the data packet in the example shown in Fig. 4 makes three “hops.”
- a hop is a transmission from one node to another node.
- the three hops are the transmission from node 401 to node 403, from node 403 to node 405, and from node 405 to node 407.
- the data packet would be limited to using turn queues.
- the data packet would not use any dimension queues, as the data packet would be egressing or ingressing dimensions of the torus ring network using turn queues.
- the dimension queues in each node 501, 503, 505, 507, and 509 may be assigned a virtual channel for routing along a dimension of the ring network.
- dimensions queues 521, 523, 525, 527, and 529 of nodes 501-509, respectively are assigned VC1.
- Dimension queues 541, 543, 545, 547, and 549 of nodes 501-509, respectively, are assigned VCO.
- Data packets traveling between nodes on the same virtual channel, e.g., VCO or VC1 would pass between dimension queues having the same assigned virtual channel. For instance, a data packet passing between node 503 and 505 on virtual VCO would pass from dimension queue 543 to dimension queue 545.
- a data packet passing between node 503 and 505 on virtual channel VC1 would pass from dimension queue 523 to dimension queue 525.
- the data packets use h-1 dimension queue(s) along their routes.
- the total usage of the dimension queues may be determined by summing over the routes that are at least two hops:
- Total dimension queues sum_ ⁇ h > 1 ⁇ (h-1) * t(h) where h is the number of hops and t(h) is the fraction of traffic that travels h hops along the dimension queues.
- the units of this sum are the average number of data packets that enter the dimension queues on a node when a single packet is injected at each node in the ring network.
- the routing algorithm may have a threshold T defined. Any data packet with T or fewer hops remaining in its route, and not going to pass a dateline, may be placed into VC1. Otherwise, the data packet may use VCO.
- Fig. 5 shows a 3-hop route of data packet 1, illustrated by arrows labeled DPI over network 500.
- data packet 1 enters node 501 into the turn queue 531 .
- Data packet 1 is then transmitted to node 503 by the turn queue 531 to dimension queue 543 and onto VCO.
- data packet 1 is transmitted to dimension queue 525 of node 505 and onto VC1.
- data packet 1 is transmitted to turn queue 517 of Node 507, where it is subsequently taken off of the network 500.
- Fig. 5 further shows a 2-hop route of data packet 2, illustrated by arrows labeled DP2, over network 500.
- data packet enters network 500 via node 505 into turn queue 535.
- data packet 2 is transmitted to dimension queue 527 of node 507 and onto VC1.
- From dimension queue 527 the data packet is transmitted to turn queue 529 of node 509, where it is subsequently taken off of the network 500.
- data packet 1 is initially routed onto VC0 in node 503, as data packet 1 has 2-hops remaining. It is not until data packet 1 reached node 505, when data packet 1 has 1-hop remaining, equaling the threshold value of 1, that it gets routed onto VC1. If the threshold value were 2-hops, data packet 1 would have been routed onto VC1 at node 503.
- network 500 is not shown to include a dateline, no consideration of a dateline is made in the routing of the data packets over network 500.
- data packets 1 and 2 would only switch to VC1 at the threshold value if the data packets were not to later cross a dateline.
- the number of datelines a packet may cross may be determined by performing a table lookup.
- the number of datelines along a route to a destination node may be stored in the RAM memory table routes.
- the number of datelines to be traversed by a data packet to a destination node may be determined by using the destination of the data packet to index a table and lookup the number of datelines along the route to the destination, as stored in the table.
- a T may then be selected to minimize the imbalance between the two VCs: minimize
- TABLE 2 As with torus ring networks, there is a linear relationship between ring size and the calculated threshold value (T) for twisted tori networks.
- a threshold value (T) for values of k ⁇ 64, may be determined using one of the following equations:
- datelines may be removed from a ring network routing algorithm. By removing datelines, improved throughput through the network may be achieved, in particular when direct memory access (DMA) size increases.
- DMA direct memory access
- nodes may include queuing structures with input and output queues.
- a data packet at each hop travels through an input and an output queue.
- These pairs of queues may be split into their associated dimension.
- the nodes may include a turn from a previous dimension, such as turns 631, 633, 635 of nodes 601, 603, and 605, turns to next dimensions, such as turns 611, 613, and 615 of nodes 601, 603, and 605.
- the nodes may include dimension queuing structures associated with the virtual channels, such as queuing structures 641, 643, and 645 associated with VC0 in nodes 601, 603, and 605, respectively. Additionally, nodes 601, 603, and 605 include queuing structures 621,623, and 625 associated with VC1, respectively.
- each queueing structure may be split into input queues, identified by “(i)” and output queues, identified by “(o)”.
- dimension queueing structure 621 includes VC1 (i), the input queue, and VC1 (o), the output queue.
- the data packet passes through both an input queue and an output queue.
- data packet 1, labeled DPI in Fig. 6 passes through the turn 631 queueing structure, including through the input queue, labeled as T(i) and the output queue, labeled as T(o).
- a transition between VCs occurs when a packet goes from an input queue to an output queue.
- DPI may pass from VCO (i) (an input queue) to VCl(o) (an output queue) in node 603.
- VC1 (o) may subsequently pass DPI to input queue VC1 (i) of node 605.
- the data packet may be passed to T(o).
- Figure 7 illustrates a flow diagram 700 for routing data packets in a network.
- a data packet is received at a first queueing structure within a first node of the ring network.
- the data packet is to be transmitted to a destination node on the network.
- the first node determines a number of hops the data packet will traverse as it is transmitted from the first node to the destination node of the ring network.
- the first node compares the number of hops to a threshold hop value to determine whether the number of hops is equal to or less than the threshold hop value.
- the first node transmits the data packet to (i) a dimension queues structure for a first virtual channel within a second node of the ring network if the number of hops is greater than the threshold hop value; or (ii) a dimension queues structure for a second virtual channel or a turn queuing structure within the second node if the number of hops is equal to or less than the threshold hop value.
- ring networks such as ring networks 100, 200, 300, 400, 500, and 600
- the technology described herein may be applicable to other ring-based network topologies such as multiple ring-based topologies (e.g., “torus” and “twisted torus”) topologies.
Abstract
Systems and method for routing data packets in ring network. A data packet being transmitted to a destination node may be received by a first structure at a first node. The first node may determine a number of hops the data packet will traverse as it is transmitted from the first node to the destination node and compare the determined number of hops to a threshold hop value to determine whether the number of hops is equal to or less than the threshold hop value. If the number of hops is greater than the threshold, the data packet may be transmitted to a dimension queuing structure for a first virtual channel within a second node, otherwise, the data packet may be transmitted to a dimension queuing structure for a second virtual channel or a turn queuing structure within the second node.
Description
VIRTUAL CHANNEL BALANCING IN RING-BASED TOPOLOGIES
CROSS REFERENCE
[0001] The present application is a continuation of U.S. Patent Application No. 17/966,134, filed on October 14, 2022, the disclosure of which is incorporated herein by reference.
BACKGROUND
[0002] Ring-based network topologies, such as multi-dimensional torus and twisted torus networks, are typically used in on-chip and off-chip networks. These network topologies may suffer from deadlock. Deadlock occurs when a chain of packets is waiting on each other to make progress through the network and the chain forms a cycle that prevents any of the packets from progressing. Typical approaches to ensure a deadlock-free network topology include using a dateline or a red-rover algorithm, both of which rely on virtual channels. However, the use of virtual channels may result in reduced performance of the network topology due to imbalanced distributions of the data packets throughout the network. Moreover, the use of a dateline may create long virtual channel dependency chains, which can lead to compounding unfairness and loss of throughput as the number of nodes per dimension increases.
BRIEF SUMMARY
[0003] This technology is directed to routing data packets through a ring-based network without deadlock. In one aspect, the technology is directed to a method of routing data packets within a ring network, the method includes receiving, at a first queueing structure within a first node of the ring network, a data packet to be transmitted to a destination node. The method may also include determining, by the first node, a number of hops the data packet will traverse as it is transmitted from the first node to the destination node of the ring network. The method may also include comparing, by the first node, the number of hops to a threshold hop value to determine whether the number of hops is equal to or less than the threshold hop value.
[0004] The method may also include transmitting, by the first node, the data packet to (i) a dimension queuing structure for a first virtual channel within a second node of the ring network if the number of hops is greater than the threshold hop value, or (ii) a dimension queuing structure for a second virtual channel or a turn queuing structure within the second node if the number of hops is equal to or less than the threshold hop value.
[0005] In some instances, the first queueing structure within the first node is a turn queueing structure.
[0006] In some instances, the data packet is transmitted to the turn queueing structure within the second node when the second node is the destination node.
[0007] In some instances, the network includes a first dateline and a second dateline. In some examples, the first dateline and the second dateline are each positioned between a pair of network nodes on the ring network, wherein a number of nodes positioned between the first dateline and the second dateline matches a number of nodes positioned between the second dateline and the first dateline.
[0008] In some examples, the first node may also further determine whether the data packet will traverse a dateline as it is transmitted from the first node to the destination node. In some examples, the data packet is transmitted to the dimension queueing structure for the first virtual channel within the second node when it is determined the data packet will traverse the dateline.
[0009] In some instances, the method further includes: determining, by the second node after receiving the data packet, a second number of hops the data packet will traverse as it is transmitted from the second node to the destination node of the ring network; comparing, by the second node, the number of hops to the threshold hop value to determine whether the second number of hops is equal to or less than the threshold hop value; and transmitting, by the second node, the data packet to: (i) a dimension queuing structure for the first virtual channel within a third node of the ring network if the number of hops is greater than the threshold hop value; or (ii) a dimension queuing structure for a second virtual channel or a turn queuing structure within the third node if the number of hops is equal to or less than the threshold hop value.
[0010] In some instances, the data packet may be transmitted to the turn queueing structure within the third node when the third node is the destination node.
[0011] In some instances, the network is a ring network, wherein the ring network is a single dimension of a torus or a twisted torus network.
[0012] In another aspect, the technology may include a ring network including a first node having a first queueing structure. The ring network may include a second node having a dimension queuing structure for a first virtual channel and a dimension queuing structure for a second virtual channel. The ring network may also include a destination node, where the first node is configured
to receive, at the first queueing structure, a data packet to be transmitted to the destination node. The ring network may also include a destination node. The first node may be configured to determine a number of hops the data packet will traverse as it is transmitted from the first node to the destination node of the ring network; compare the number of hops to a threshold hop value to determine whether the number of hops is equal to or less than the threshold hop value.
[0013] The first node of the ring network may be configured to transmit the data packet to (i) the dimension queueing structure for the first virtual channel if the number of hops is greater than the threshold hop value, or (ii) the dimension queuing structure for the second virtual channel if the number of hops is equal to or less than the threshold hop value.
[0014] In some instances, the first queueing structure within the first node of the ring network may be a turn queueing structure.
[0015] In some instances, the ring network may include a first dateline and a second dateline. In some examples, the first dateline and the second dateline are each positioned between a pair of network nodes on the ring network, wherein a number of nodes positioned between the first dateline and the second dateline matches a number of nodes positioned between the second dateline and the first dateline. In some examples, the ring network includes more than eight nodes.
[0016] Tn some instances, the first node may be further configured to determine whether the data packet will traverse a dateline as it is transmitted from the first node to the destination node.
[0017] In some instances, the second node may be configured to: determine, after receiving the data packet, a second number of hops the data packet will traverse as it is transmitted from the second node to the destination node of the ring network; compare, by the second node, the number of hops to the threshold hop value to determine whether the second number of hops is equal to or less than the threshold hop value; and transmit the data packet to: (i) a dimension queuing structure for the first virtual channel within a third node of the ring network if the number of hops is greater than the threshold hop value; or (ii) a dimension queuing structure for the second virtual channel or a turn queuing structure within the third node if the number of hops is equal to or less than the threshold hop value.
[0018] In some instances, the data packet is transmitted to the turn queue structure within the third node when the third node is the destination node.
[0019] In some instances, in the ring network is a torus ring or a twisted tori.
[0020] Other technical features may be readily apparent to one skilled in the art from the following figures, descriptions, and claims.
BRIEF DESCRIPTION OF THE DRAWINGS
[0021] A more complete appreciation of the disclosure and many of the attendant advantages thereof will be readily obtained by reference to the following detailed description when considered in connection with the accompanying drawings, wherein:
[0022] Fig. 1 illustrates an example ring network, in accordance with aspects of the disclosure.
[0023] Fig. 2 illustrates an example ring network having virtual channels, in accordance with aspects of the disclosure.
[0024] Fig. 3 illustrates an example ring network having dual datelines, in accordance with aspects of the disclosure.
[0025] Fig. 4 illustrates an example ring network having nodes with queueing structures, in accordance with aspects of the disclosure.
[0026] Fig. 5 illustrates data packets traversing a ring network in accordance with aspects of the disclosure.
[0027] Fig. 6 illustrates data packets traversing a ring network in accordance with aspects of the disclosure.
[0028] Fig. 7 is a flow diagram illustrating a method for transmitting data packets over a network, according to aspects of the disclosure.
DETAILED DESCRIPTION
[0029] The technology described herein is directed to improving the performance of ring-based network topologies while ensuring deadlock-free operation by shortening dependency chains and efficiently load balancing the virtual channel (VC) resources of the network. In this regard, the dependency chains may be shortened by adding an additional dateline such that the two datelines are separated by half the diameter of the ring. Increasing the efficiency of the load balancing between the VC resources may include switching a data packet to a second VC at any time, so long as that data packet will not cross one of the datelines.
[0030] In a ring-based network topology, nodes that form the network may be connected via physical links, such as wires, cables, traces, etc. Each physical link may carry data packets on any number of VCs. In this regard, each physical link between a pair of nodes can communicate data
packets via one or more VCs. For example, and as illustrated in the ring network 100 of Fig. 1, each node pair is connected via a physical link. For instance, nodeO 101 is connected to nodel 103 via physical link 102, nodel 103 is connected to node2 105 via physical link 104, node2 105 is connected to node3 107 via physical link 106, node3 107 is connected to node4 109 via physical link 108, node4 109 is connected to node5 111 via physical link 110, and node5 111 is connected to nodeO 101 via physical link 112. Each physical link 110-112 in ring network 100 includes two virtual channels VC0 and VC1, as illustrated by callouts 122 and 128, which illustrate VC0 (as a solid line) and VC1 (as a dashed line) for connections 102 and 108, respectively. For clarity, Fig. 1 illustrates the VCs only for connections 102 and 108, but it should be understood that the other connections, including connections 104, 106, 110, and 112 also include virtual channels VC0 and VC1. Although ring network 100 includes only six nodes (0-5) and two virtual channels (VC0 and VC1) a ring network may include any number of nodes and any number of virtual channels.
[0031] Nodes may include any type of computing resource capable of communicating with other computing resources. For instance, nodes may include computers, servers, mobile devices, processors, cores, routers, memory, cards (e.g., accelerator cards), FIFOs, or other such queues, etc. In some instances, nodes may include a collection of computing resources, such as processors with routers, etc.
[0032] Selection of the VC on which to transmit a data packet may be static. In static routing, the routes may be predetermined and fixed. Mechanically, the static routes can be stored in tables, such as within RAM memory within the node. The destination of a packet may be used to index a table and lookup the route to the destination.
DATELINES
[0033] In ring-based network topologies, dateline routing is used to designate one physical link in each direction of a ring as a dateline. In this regard, the physical links may be bidirectional links, such that both directions in a ring can be treated separately. Queueing structures are typically programmed to transmit each data packet on a first channel. In the event the data packets cross the dateline, the data packets are moved to the second virtual channel until the data packets reach their respective destination nodes.
[0034] For example, and as illustrated in ring network 200 of Fig. 2, which may be compared to ring network 100, a dateline 220 is positioned between nodes 211 and 201. The ring network 200
includes six nodes 201-211, and physical links between each adjacent node, including physical links 202, 204, 206, 208, 210, and 212. Each physical link includes two virtual channels VC0 (illustrated as a solid line) and VC1 (illustrated as a dashed line), with the exception of physical link 212, which may be considered a transition link that transfers the data packets between VC0 and VC 1. To illustrate the transition from VC0 to VC 1 , Fig. 2 illustrates physical link 212, between node5211 and nodeO 201, as a single line, with the line being solid on the left side of dateline 220 and dashed on the right side of dateline 220.
[0035] As data packets traverse the network 200, a routing algorithm may initially route the data packets on VC0. However, in the event a data packet crosses the dateline 220, the routing algorithm may switch the data packet to VC1 and subsequently route the data packet on VC1 to ils destination node. As most data packets reach their respective destination nodes prior to passing the dateline 220, a spiral-like chain of acyclic VC dependencies is created. This chain of acyclic dependencies is sufficient to ensure that ring network 200 is deadlock-free. However, the dateline routing creates a chain of VC dependencies longer than the ring network itself.
[0036] While no individual packet will travel along the entirety of the chain, created by VC0 and VC1, a sequence of dependent packets can be blocked along the chain. To advance blocked data packets, queuing structures of network 200 may implement an arbitration algorithm, such as a locally fair or globally fair arbitration algorithm.
[0037] To reduce the length of the dependency chain, a second dateline may be introduced. The two datelines, referred to herein as “dual-datelines,” may be separated by half the diameter of the ring network. For example, and as illustrated in ring network 300 of Fig. 3, which may be compared to ring networks 100 and 200, a first dateline 320 is positioned after the third node (305) and the second dateline 322 is positioned after node5 311 of the six-node ring network 300. In this regard, the first dateline 320 is positioned between node2 305 and node3 307, and the second dateline 322 is positioned between node5 311 and nodeO 301. Thus, there are three nodes positioned on each side of the datelines, with nodes 301, 303, and 305 being positioned between the second dateline 322 and the first dateline 320 and nodes 307, 309, and 311 being positioned between the first dateline 320 and the second dateline 322.
[0038] Like ring network 200, ring network 300 includes six nodes 301-311, and physical links between each adjacent node, including physical links 302, 304, 306, 308, 310, and 312. Each
physical link includes two virtual channels VCO (illustrated as a solid line) and VC1 (illustrated as a dashed line), with the exceptions of transition links 312 and 306.
[0039] As data packets traverse network 300, the routing algorithm may initially route the data packets on VCO. However, in the event a data packet crosses the first dateline 320 or the second dateline 322, the routing algorithm may switch the routing of the data packet to VC1. The routing algorithm may then route the data packet on VC1 to its destination node. A data packet may traverse, at most, two physical links on VCO before being transitioned to VC1. For example, a data packet may be transmitted from nodeO 301 to node5 311. In this example, the data packet may traverse physical links 302 and 304 on VCO, but then be transitioned to VC1 when crossing the first dateline 320 at physical link 306. The data packet may then traverse physical links 308 and 310 on VC1 before reaching destination node5 311. In contrast, and referring to Fig. 2, a data packet may traverse five physical links before transitioning from VCO to VC1. In this regard, a data packet may be transmitted on VCO over the physical links from nodeO 201 to node5 211, including physical links 202, 204, 206, 208, and 210. Although Fig. 3 illustrates only two datelines in ring network 300 — the first dateline 320 and the second dateline 322 — ring networks may include any number of datelines,
BALANCING
[0040] Better balancing of data packet traffic on the virtual channels may be achieved by routing data packets that will not cross a dateline to the second virtual channel VC1. In this regard, data packets that will not cross a virtual channel may be transitioned from VCO to VC1 when the data packet is N hops from its destination node. The value of N may be based on the size of the ring network (e.g., the number of nodes in the ring network) and the expected packet traffic patterns. [0041] Balanced VC usage may be determined based on an assumed traffic pattern. In this regard, different types of traffic patterns may use each VC differently. For example, a network with an all- to-all traffic pattern may have different balancing needs than a network with all-to-one or other such traffic patterns. In the examples used herein, global all-to-all traffic patterns are discussed. In a network implementing a global all-to-all traffic pattern, each network node can receive data packets from every other network node and transmit data packets to every other network node.
[0042] Queuing structures, including turn and dimension queues, may route data packets through the network. In this regard, networks may use these queuing structures to direct data packets as the
data packets traverse the network. The turn queue may be used to direct data packets as they turn from one dimension of the torus network to the next.. For instance, the turn queue may be used to direct a data packet received by a node on a first dimension onto another dimension. Dimension queues may direct data packets continuing along a single dimension of the network and on a virtual channel. For instance, the dimension queue may direct a data packet from one node to another along the same dimension and on a common virtual channel, such as VCO or VC1. The queuing structures may be part of the node or a component connected to the node. For instance, the queueing structures may be part of a router or other network interface integrated into a node.
[0043] Figure 4 illustrates queuing structures within nodes 401, 403, 405, and 407 of a network 400. As shown, each node includes queuing structures. In this regard, node 401 includes turn queues 411, 431 and dimension queue 421, node 403 includes turn queues 413, 433 and dimension queue 423, node 405 includes turn queues 415, 435 and dimension queue 425, and node 407 includes turn queues 417, 437 and dimension queue 427. Turn queues 431, 433, 435, 437 and 411, 413, 415, 417 may direct data onto and off of dimensions of the torus network.
[0044] As further illustrated in Fig. 4, an example data packet is shown as entering, progressing through, and exiting the network 400 by arrows 441, 443, 445, 447, and 449. In this regard, arrow 441 illustrates the data packet entering node 401 via turn queue 441 . The data packet is transmitted from node 401 to dimension queue 423 in node 403, as illustrated by arrow 443. From node 403, the data packet is transmitted to dimension queue 425 of node 405, as illustrated by line 445. The data packet is then transmitted to turn queue 417 in node 407, where it is subsequently transmitted out, as indicated by arrow 449.
[0045] The data packet in the example shown in Fig. 4 makes three “hops.” A hop is a transmission from one node to another node. In Fig. 4, the three hops are the transmission from node 401 to node 403, from node 403 to node 405, and from node 405 to node 407. In instances where a data packet is limited to 0 or 1 hops along a network, the data packet would be limited to using turn queues. In this regard, the data packet would not use any dimension queues, as the data packet would be egressing or ingressing dimensions of the torus ring network using turn queues. [0046] Referring to network 500 in Fig. 5, the dimension queues in each node 501, 503, 505, 507, and 509 may be assigned a virtual channel for routing along a dimension of the ring network. In this regard, dimensions queues 521, 523, 525, 527, and 529 of nodes 501-509, respectively, are
assigned VC1. Dimension queues 541, 543, 545, 547, and 549 of nodes 501-509, respectively, are assigned VCO. Data packets traveling between nodes on the same virtual channel, e.g., VCO or VC1, would pass between dimension queues having the same assigned virtual channel. For instance, a data packet passing between node 503 and 505 on virtual VCO would pass from dimension queue 543 to dimension queue 545. Similarly, a data packet passing between node 503 and 505 on virtual channel VC1 would pass from dimension queue 523 to dimension queue 525. [0047] For data packets traveling h > 2 hops, the data packets use h-1 dimension queue(s) along their routes. As all-to-all traffic is symmetric, the total usage of the dimension queues may be determined by summing over the routes that are at least two hops:
Total dimension queues = sum_{h > 1 } (h-1) * t(h) where h is the number of hops and t(h) is the fraction of traffic that travels h hops along the dimension queues. The units of this sum are the average number of data packets that enter the dimension queues on a node when a single packet is injected at each node in the ring network.
[0048] For all-to-all traffic in a torus ring network, with an even number of nodes k along its dimensions:
{ 1/k if 0 <= h < k/2, else t(h) = { l/2k if h = k/2, else
{ 0
[0049] To balance load between the two VCs dedicated to the dimension queues VCO and VC1, the routing algorithm may have a threshold T defined. Any data packet with T or fewer hops remaining in its route, and not going to pass a dateline, may be placed into VC1. Otherwise, the data packet may use VCO.
[0050] Fig. 5 shows a 3-hop route of data packet 1, illustrated by arrows labeled DPI over network 500. Tn this regard, data packet 1 enters node 501 into the turn queue 531 . Data packet 1 is then transmitted to node 503 by the turn queue 531 to dimension queue 543 and onto VCO. From the dimension queue 543, data packet 1 is transmitted to dimension queue 525 of node 505 and onto VC1. From dimension queue 525, data packet 1 is transmitted to turn queue 517 of Node 507, where it is subsequently taken off of the network 500.
[0051] Fig. 5 further shows a 2-hop route of data packet 2, illustrated by arrows labeled DP2, over network 500. In this regard, data packet enters network 500 via node 505 into turn queue 535.
From turn queue 535 data packet 2 is transmitted to dimension queue 527 of node 507 and onto VC1. From dimension queue 527 the data packet is transmitted to turn queue 529 of node 509, where it is subsequently taken off of the network 500.
[0052] The routing of data packet 1 and data packet 2 is based on the routing algorithm of network 500 having a threshold of T = 1. Thus, data packet 1 is initially routed onto VC0 in node 503, as data packet 1 has 2-hops remaining. It is not until data packet 1 reached node 505, when data packet 1 has 1-hop remaining, equaling the threshold value of 1, that it gets routed onto VC1. If the threshold value were 2-hops, data packet 1 would have been routed onto VC1 at node 503.
[0053] With reference to the 2-hop route of data packet 1, the data packet is immediately routed onto VC1, since data packet 2 has a 1-hop remaining, equaling the threshold value of 1 when it reaches node 507.
[0054] As network 500 is not shown to include a dateline, no consideration of a dateline is made in the routing of the data packets over network 500. However, if a date line were present, data packets 1 and 2 would only switch to VC1 at the threshold value if the data packets were not to later cross a dateline. The number of datelines a packet may cross may be determined by performing a table lookup. In this regard, the number of datelines along a route to a destination node may be stored in the RAM memory table routes. Accordingly, the number of datelines to be traversed by a data packet to a destination node may be determined by using the destination of the data packet to index a table and lookup the number of datelines along the route to the destination, as stored in the table.
[0055] To compute a threshold value that balances load between the dimensions VC0 and VC1, the total load on the dimension queues may be divided into the load contributed by data packets with h hops remaining, which is defined as: r(h) = sum_{i > h} t(i).
[0056] Every packet that travels two or more hops, for example, will eventually have one hop remaining. Thus, the sum of the fraction of the traffic for each of these hops (i.e., r(l) = t(l) + t(2) + ...) may be determined to find the utilization of the dimension queues contributed by packets with one hop remaining. Since every packet has some number of hops remaining, summing over r(h) recovers the total load as computed above: total = sum_{h > 0} r(h)
[0057] A T may then be selected to minimize the imbalance between the two VCs: minimize |sum_{h > T} r(h) - sum_{0 < h < T] r(h)|
[0058] Example values of threshold T have been computed using the above equations for different sized rings in table 1, below:
[0059] Empirically, there is a linear relationship between ring size and the calculated threshold value (T). Thus, selecting a threshold value, where (T) = round(0.145 • k - 0.3) may yield a result for rings where k is a multiple of 4 and where the network includes up to 64 nodes.
[0060] The concepts from the previous section can be extended to twisted tori with appropriate definitions for the t(h) function. Example values of threshold T for twisted tori networks have been computed using the equation for different size rings in table 2, below:
TABLE 2:
(1) 2kxkxk: threshold = round(0.175 • k - 0.15)
(2) 2kx2kxk: threshold = round(0.222 • k - 0.1)
[0062] In some instances, datelines may be removed from a ring network routing algorithm. By removing datelines, improved throughput through the network may be achieved, in particular when direct memory access (DMA) size increases. Certain conditions may be met before datelines are removed. These conditions may include (1) the network includes eight or fewer nodes in the ring (this corresponds to k < 4 for twisted tori network); (2) VC usage is balanced using the balancing techniques described herein; and (3) when there are eight nodes in the ring (also applies to k = 4 twisted tori), the nodes alternate between positive direction and negative direction tiebreaking for the routes that go exactly halfway around the ring.
[0063] In networks having more than 8 nodes, networks where VC balancing is disabled, or networks where tiebreaking does not alternate, the acyclic dependencies of the VC are lost and VC0 to VC0 dependencies appear between all nodes, necessitating a dateline (or other approach) to break the VC0 cycle.
[0064] In some embodiments, nodes may include queuing structures with input and output queues. In this regard, and unlike input or output queued architectures, such as described in Figs. 4 and 5, a data packet at each hop travels through an input and an output queue. These pairs of queues may be split into their associated dimension. For instance, and as illustrated in Fig. 6, within the combined input-output queuing architecture of network 600, the nodes may include a turn from a previous dimension, such as turns 631, 633, 635 of nodes 601, 603, and 605, turns to next dimensions, such as turns 611, 613, and 615 of nodes 601, 603, and 605. Additionally, the nodes may include dimension queuing structures associated with the virtual channels, such as queuing structures 641, 643, and 645 associated with VC0 in nodes 601, 603, and 605, respectively. Additionally, nodes 601, 603, and 605 include queuing structures 621,623, and 625 associated with VC1, respectively.
[0065] As further shown in Fig. 6, each queueing structure may be split into input queues, identified by “(i)” and output queues, identified by “(o)”. For instance, dimension queueing
structure 621 includes VC1 (i), the input queue, and VC1 (o), the output queue. During the transmission of a data packet, the data packet passes through both an input queue and an output queue. For instance, data packet 1, labeled DPI in Fig. 6, passes through the turn 631 queueing structure, including through the input queue, labeled as T(i) and the output queue, labeled as T(o). [0066] As also shown in Fig. 6, a transition between VCs occurs when a packet goes from an input queue to an output queue. In this regard, DPI may pass from VCO (i) (an input queue) to VCl(o) (an output queue) in node 603. VC1 (o) may subsequently pass DPI to input queue VC1 (i) of node 605. Within node 605, the data packet may be passed to T(o).
[0067] Figure 7 illustrates a flow diagram 700 for routing data packets in a network. In block 702, a data packet is received at a first queueing structure within a first node of the ring network. The data packet is to be transmitted to a destination node on the network. In block 704, the first node determines a number of hops the data packet will traverse as it is transmitted from the first node to the destination node of the ring network. In block 706, the first node compares the number of hops to a threshold hop value to determine whether the number of hops is equal to or less than the threshold hop value. In block 708, the first node transmits the data packet to (i) a dimension queues structure for a first virtual channel within a second node of the ring network if the number of hops is greater than the threshold hop value; or (ii) a dimension queues structure for a second virtual channel or a turn queuing structure within the second node if the number of hops is equal to or less than the threshold hop value.
[0068] Although the foregoing examples illustrate ring networks, such as ring networks 100, 200, 300, 400, 500, and 600 the technology described herein may be applicable to other ring-based network topologies such as multiple ring-based topologies (e.g., “torus” and “twisted torus”) topologies.
[0069] Unless otherwise stated, the foregoing alternative examples are not mutually exclusive, but may be implemented in various combinations to achieve unique advantages. As these and other variations and combinations of the features discussed above can be utilized without departing from the subject matter defined by the claims, the foregoing description of the embodiments should be taken by way of illustration rather than by way of limitation of the subject matter defined by the claims. In addition, the provision of the examples described herein, as well as clauses phrased as “such as,” “including,” and the like, should not be interpreted as limiting the subject matter of the
claims to the specific examples; rather, the examples are intended to illustrate only one of many possible embodiments. Further, the same reference numbers in different drawings can identify the same or similar elements.
Claims
1. A method of routing data packets within a ring network, the method comprising: receiving, at a first queueing structure within a first node of the ring network, a data packet to be transmitted to a destination node; determining, by the first node, a number of hops the data packet will traverse as it is transmitted from the first node to the destination node of the ring network; comparing, by the first node, the number of hops to a threshold hop value to determine whether the number of hops is equal to or less than the threshold hop value; and transmitting, by the first node, the data packet to:
(i) a dimension queuing structure for a first virtual channel within a second node of the ring network if the number of hops is greater than the threshold hop value; or
(ii) a dimension queuing structure for a second virtual channel or a turn queuing structure within the second node if the number of hops is equal to or less than the threshold hop value.
2. The method of claim 1 , wherein the first queueing structure within the first node is a turn queueing structure.
3. The method of claim 1, wherein the data packet is transmitted to the turn queueing structure within the second node when the second node is the destination node.
4. The method of claim 1, wherein the network includes a first dateline and a second dateline.
5. The method of claim 4, wherein the first dateline and the second dateline are each positioned between a pair of network nodes on the ring network, wherein a number of nodes positioned between the first dateline and the second dateline matches a number of nodes positioned between the second dateline and the first dateline.
6. The method of claim 1, further comprising: determining whether the data packet will traverse a dateline as it is transmitted from the first node to the destination node.
7. The method of claim 6, wherein the data packet is transmitted to the dimension queueing structure for the first virtual channel within the second node when it is determined the data packet will traverse the dateline.
8. The method of claim 6, further comprising: determining, by the second node after receiving the data packet, a second number of hops the data packet will traverse as it is transmitted from the second node to the destination node of the ring network; comparing, by the second node, the number of hops to the threshold hop value to determine whether the second number of hops is equal to or less than the threshold hop value; and transmitting, by the second node, the data packet to:
(i) a dimension queuing structure for the first virtual channel within a third node of the ring network if the number of hops is greater than the threshold hop value; or
(ii) a dimension queuing structure for a second virtual channel or a turn queuing structure within the third node if the number of hops is equal to or less than the threshold hop value.
9. The method of claim 1 , wherein the data packet is transmitted to the turn queueing structure within the third node when the third node is the destination node.
10. The method of claim 1, wherein the network is a ring network, comprising a torus ring or a twisted tori.
11. A ring network comprising: a first node comprising a first queueing structure; a second node comprising a dimension queuing structure for a first virtual channel and a dimension queuing structure for a second virtual channel; and a destination node, wherein the first node is configured to: receive, at the first queueing structure, a data packet to be transmitted to the destination node; determine a number of hops the data packet will traverse as it is transmitted from the first node to the destination node of the ring network;
compare the number of hops to a threshold hop value to determine whether the number of hops is equal to or less than the threshold hop value; and transmit the data packet to:
(i) the dimension queueing structure for the first virtual channel if the number of hops is greater than the threshold hop value; or
(ii) the dimension queuing structure for the second virtual channel if the number of hops is equal to or less than the threshold hop value.
12. The ring network of claim 11, wherein the first queueing structure within the first node is a turn queueing structure.
13. The ring network of claim 11, wherein the network includes a first dateline and a second dateline.
14. The ring network of claim 13, wherein the first dateline and the second dateline are each positioned between a pair of network nodes on the ring network, wherein a number of nodes positioned between the first dateline and the second dateline matches a number of nodes positioned between the second dateline and the first dateline.
15. The ring network of claim 14, wherein the ring network includes more than eight nodes.
16. The ring network of claim 11, wherein the first node is further configured to: determine whether the data packet will traverse a dateline as it is transmitted from the first node to the destination node.
17. The ring network of claim 16, wherein the data packet is transmitted to the dimension queueing structure for the first virtual channel when it is determined the data packet will traverse the dateline.
18. The ring network of claim 16, wherein the second node is configured to: determine, after receiving the data packet, a second number of hops the data packet will traverse as it is transmitted from the second node to the destination node of the ring network;
compare, by the second node, the number of hops to the threshold hop value to determine whether the second number of hops is equal to or less than the threshold hop value; and transmit the data packet to:
(i) a dimension queuing structure for the first virtual channel within a third node of the ring network if the number of hops is greater than the threshold hop value; or
(ii) a dimension queuing structure for the second virtual channel or a turn queuing structure within the third node if the number of hops is equal to or less than the threshold hop value.
19. The ring network of claim 18, wherein the data packet is transmitted to the turn queue structure within the third node when the third node is the destination node.
20. The ring network of claim 11, wherein the ring network is a single dimension of a torus ring or a twisted torus network.
Applications Claiming Priority (2)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US17/966,134 US20240137308A1 (en) | 2022-10-14 | Virtual Channel Balancing In Ring-Based Topologies | |
US17/966,134 | 2022-10-14 |
Publications (1)
Publication Number | Publication Date |
---|---|
WO2024081043A1 true WO2024081043A1 (en) | 2024-04-18 |
Family
ID=87312106
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
PCT/US2023/024825 WO2024081043A1 (en) | 2022-10-14 | 2023-06-08 | Virtual channel balancing in ring-based topologies |
Country Status (1)
Country | Link |
---|---|
WO (1) | WO2024081043A1 (en) |
Citations (1)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
EP3328008A1 (en) * | 2016-11-24 | 2018-05-30 | Mellanox Technologies TLV Ltd. | Deadlock-free routing in lossless multidimensional cartesian topologies with minimal number of virtual buffers |
-
2023
- 2023-06-08 WO PCT/US2023/024825 patent/WO2024081043A1/en unknown
Patent Citations (1)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
EP3328008A1 (en) * | 2016-11-24 | 2018-05-30 | Mellanox Technologies TLV Ltd. | Deadlock-free routing in lossless multidimensional cartesian topologies with minimal number of virtual buffers |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
US11362934B2 (en) | Method to route packets in a distributed direct interconnect network | |
US7555001B2 (en) | On-chip packet-switched communication system | |
US9294385B2 (en) | Deadlock-free routing in fat tree networks | |
CN103973564B (en) | The adaptive routing method of interconnected network system | |
WO2012162988A1 (en) | Efficient adaptive deadlock-free routing algorithms for torus networks | |
EP3868062B1 (en) | Methods and apparatus for transmitting data over multiple paths in a network | |
Skeie et al. | LASH-TOR: A generic transition-oriented routing algorithm | |
MiSiC et al. | Communication aspects of the star graph interconnection network | |
KR20170051153A (en) | Method for selecting optimal network path using genetic algorithm | |
CN109246006B (en) | Switching system constructed by switching chip and routing method thereof | |
CN117135059B (en) | Network topology structure, construction method, routing algorithm, equipment and medium | |
US20240137308A1 (en) | Virtual Channel Balancing In Ring-Based Topologies | |
WO2024081043A1 (en) | Virtual channel balancing in ring-based topologies | |
Salehi et al. | Minimal fully adaptive fuzzy-based routing algorithm for Networks-on-Chip | |
Mirjalily et al. | An approach to select the best spanning tree in Metro Ethernet networks | |
US7532584B2 (en) | Implementation of constraints to ensure deadlock avoidance in networks | |
JP2004147060A (en) | Network system | |
Tomita et al. | A Fault-Tolerant Routing Method Using Bus Functions in Two-dimensional Torus Network-on-Chips | |
Wang et al. | Multipath Routing Algorithm in SDN-based Power Communication Network | |
Ghosal et al. | Routing in multicore nocs | |
Su et al. | Simple and effective adaptive routing algorithms in multi-layer wormhole networks | |
Abts et al. | Optimized virtual channel assignment in the cray xt | |
Tomita et al. | A Fault-tolerant Routing Method for 2D-torus Network-on-Chips Based on Bus Functions | |
Chuang et al. | Balancing traffic in meshes by dynamic channel selection | |
Lin et al. | Minimal fully adaptive wormhole routing on hypercubes |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
ENP | Entry into the national phase |
Ref document number: 2023741822Country of ref document: EPEffective date: 20231213 |