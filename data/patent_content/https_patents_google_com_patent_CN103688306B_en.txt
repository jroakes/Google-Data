CN103688306B - Method and device for decoding audio signals encoded in continuous frame sequence - Google Patents
Method and device for decoding audio signals encoded in continuous frame sequence Download PDFInfo
- Publication number
- CN103688306B CN103688306B CN201180072349.0A CN201180072349A CN103688306B CN 103688306 B CN103688306 B CN 103688306B CN 201180072349 A CN201180072349 A CN 201180072349A CN 103688306 B CN103688306 B CN 103688306B
- Authority
- CN
- China
- Prior art keywords
- signal
- frame
- pitch
- frequency band
- residue
- Prior art date
- Legal status (The legal status is an assumption and is not a legal conclusion. Google has not performed a legal analysis and makes no representation as to the accuracy of the status listed.)
- Active
Links
Classifications
-
- G—PHYSICS
- G10—MUSICAL INSTRUMENTS; ACOUSTICS
- G10L—SPEECH ANALYSIS OR SYNTHESIS; SPEECH RECOGNITION; SPEECH OR VOICE PROCESSING; SPEECH OR AUDIO CODING OR DECODING
- G10L19/00—Speech or audio signals analysis-synthesis techniques for redundancy reduction, e.g. in vocoders; Coding or decoding of speech or audio signals, using source filter models or psychoacoustic analysis
- G10L19/005—Correction of errors induced by the transmission channel, if related to the coding algorithm
Abstract
A speech signal is encoded as a sequence of consecutive frames. When a frame is lost, the loss is concealed at a receiver by reconstructing audio that would be contained in the lost frame based on other previously received frames. The frames contain a residual signal and linear predictive coding parameters representing a segment of audio data. For a lost frame the content of a previous frame is not copied, but is modified to make the reconstructed audio sound natural. The modification includes creating a weighted sum of a quasi-periodic signal derived from the latest two pitch cycles and a pseudo random sequence. The weights are selected based on a determination of whether the previous frame contains voiced or unvoiced utterances.
Description
Technical field
Technical field is related to communication system（Such as IP phone, also referred to as VoIP）In packet loss concealment, comprising one
Audio codec（Encoder/decoder）.One of codec is probably iSAC.
Background technology
Telephone communication initially relies on the private line access between caller.Therefore, carry out telephone talk to must be set up in real time
Physical connection, to realize real-time Communication for Power.Real-time Communication for Power refers to that the delay between talker and listener in dialogue is very short, with
As for the communication for being difficult to discover or almost cannot discover.In recent years, communication technology achieves significant progress so that the Internet etc.
Packet-switched network can support real-time Communication for Power.
VoIP is a kind of audio communication method by packet-switched real-time performance real-time Communication for Power.With audio coder by sound
Frequency signal decomposition is short time interval, is then individually transmitted the time period as audio frame in package mode, is exhaled so as to instead of
Private line access between the person of crying.Package is received by the receiver, and audio frame is extracted, and short time interval is reassembled as original by audio decoder
Audio signal, makes those who answer listen to transmitted audio signal.
By the Audio communication of packet-switched real-time performance, distinguished challenge is faced with.The available band of network
Width may be limited, and can change over time.Package may be lost or be damaged.If package fails in restriction
Predetermined receiver is arrived in time interval, even if package finally reaches receptor, also will be considered that this package is lost.
A kind of mode for processing packet loss is backward error correction (BEC), and wherein to be notified that transmitter is not received pre- for receptor
The package of phase, therefore transmitter can again transmit expected package.It is practical although BEC is for the task of file transmission etc
Feasible, but during for real-time communication system, it is unsatisfactory.In Audio communication, it is not feasible side to transmit again
Case, because it normally results in receptor and receives big delay occurs before packet loss.Package is transmitted in wait again, can cause to lead to
Letter loses real-time.
Another kind of method for processing packet loss is, using the information in received package, to re-create the package of loss.
The package for receiving may include the customizing messages for being exclusively used in this purpose, such as redundancy relevant with voice data in the above-mentioned time period
Information.However, such method can reduce the effective bandwidth that can be used for communicating, because these available bandwidths will be used for transmitting redundancy number
According to, and if package is not lost, then need not take this bandwidth.
Present invention recognizes that occur the problem that packet loss is caused when carrying out Audio communication by packet-switched network, and
There is provided the solution of the defect that can avoid above-mentioned example.
According to one embodiment of present invention, according to the package for receiving before this, the audio frequency letter that may be included in packet loss is simulated
Breath, you can hide packet loss.The present invention using the package for receiving before, will in a specific way rebuild packet loss, and without using shake
Buffering.Particularly, by the information in the package for receiving before this, for rebuilding the package lost, but this information is not only to be answered
System.If simple Copy Info, then the audio frequency for ultimately producing can be sounded unnatural and " mechanization ".In contrast, this
Before receive information in package, can be changed by ad hoc fashion, to rebuild this package, so as to generate the sound for sounding natural
Frequently.
The content of the invention
In one embodiment, the method for being decoded to the audio signal for being encoded as continuous frame sequence, its step can
Can include：The first frame of successive frame is received, the first frame includes the decoding parametric for rebuilding the voice data represented with the first frame
And residue signal；Store the residue signal included in the first frame；First frame is decoded according to the residue signal of storage, to rebuild by the
The audio signal of one frame coding；It is determined that the second frame in the first frame follow-up in time is lost；The residue signal of modification storage；
And according to the residue signal of modification, rebuild the valuation of the audio signal encoded by the second frame.
In one embodiment, the concrete steps of the residue signal of modification storage are potentially included：Generate a cycle signal；
One colored false random signal is generated according to the residue signal of storage；Periodic signal and colored false random signal are added with selected
Weight factor（Based on the energy of the input and output signal of the pitch synthesis filter created from storage residue signal, and store
The pitch gain of residue signal determines）It is multiplied；And the summation of calculating weighting periodic signal and weighted colorization pseudo-random signal.
In one embodiment, the concrete steps for generating a cycle signal are potentially included：Retrieval at least two is deposited recently
The pitch period of storage；Change the periodicity of each pitch period；Each pitch period is weighted；And to two weighting pitch periods
Sued for peace.
In one embodiment, the concrete steps for changing Periodic Traveling are potentially included：The tone pulses of pitch period are carried out
Resampling.
In one embodiment, the concrete steps for generating colored false random signal are potentially included：Generate a pseudorandom sequence
Row；Using the full zero filter of N ranks, by by previous newest N number of sample of the decoded low frequency with residue signal in the frame for receiving before
Originally the coefficient for calculating, filters pseudo-random sequence.
In one embodiment, the residue signal of storage potentially includes the input and LPC synthesis filters of pitch synthesis filter
The input of ripple device.Decoding parametric potentially includes pitch gain, pitch delay and LPC parameters.
In one embodiment, frame may include the coding letter of first band and the second band apparently higher than first band
Cease, and the residue signal of first band is only filtration after-tones, rather than the residue signal of second band.
In another embodiment, the decoding apparatus for the audio signal for being encoded as continuous frame sequence being decoded, bag
Include：One receptor, is configured to receive the first frame of successive frame, and the first frame is included for rebuilding the audio frequency number represented with the first frame
According to decoding parametric and residue signal；One memory element, for the residue signal included in the first frame of storage；One decoding is single
Unit, is configured to decode the first frame according to the residue signal of storage, to rebuild the audio signal encoded by the first frame；One is lost inspection
Device is surveyed, is configured to determine that the second frame in the first frame follow-up in time is lost；One modification unit, is configured to modification storage
Residue signal；And a reconstruction unit, the storage residue signal changed according to modification unit is configured to, rebuild by second
The valuation of the audio signal of frame coding.
In one embodiment, change unit to potentially include：One the first signal generator, is configured to generate a cycle
Signal；One secondary signal generator, is configured to generate a colored false random signal according to the residue signal of storage；One times
Increase device, for the periodic signal that generates the first signal generator and the colored false random signal of secondary signal generator generation
With selected weighter factor（Energy based on the input and output signal of the pitch synthesis filter created from storage residue signal
Amount, and the pitch gain determination of storage residue signal）It is multiplied；And an adder, for weighting periodic signal and adding
The summation of power colored false random signal.
In one embodiment, the first signal generator can be configured to：The tone week that retrieval at least two is most recently stored
Phase；Change the cycle of each pitch period；Each pitch period is weighted；And two weighting pitch periods are sued for peace.
In one embodiment, the first signal generator can be configured to, by again to the tone pulses of pitch period
It is sampled to change the cycle.
In one embodiment, secondary signal generator can be configured to：Generate a pseudo-random sequence；It is complete using N ranks
Zero filter, according to previously newest N number of sample of the decoded low frequency with residue signal had been calculated by the frame for receiving before
Coefficient, filter pseudo-random sequence.
In one embodiment, the residue signal of storage potentially includes the input and LPC synthesis filters of pitch synthesis filter
The input of ripple device.Decoding parametric potentially includes pitch gain, pitch delay and LPC parameters.
In another embodiment, the tangible recording medium of computer-readable of available commands coding, it is characterised in that at place
When this instruction is performed on reason device, include a kind of method of computing device, concrete steps：The first frame of successive frame is received, the
One frame includes the decoding parametric and residue signal for rebuilding the voice data represented with the first frame；Store what is included in the first frame
Residue signal；First frame is decoded according to the residue signal of storage, to rebuild the audio signal encoded by the first frame；It is determined that in the time
Upper follow-up the second frame in the first frame is lost；The residue signal of modification storage；And according to modification residue signal, rebuild by
The valuation of the audio signal of the second frame coding.
Description of the drawings
By detailed description given below and accompanying drawing, will be more convenient for fully understanding the present invention, accompanying drawing is only for illustrating explanation
It is used, therefore does not limit the invention.
Fig. 1 is the block chart for illustrating communication system according to one embodiment of present invention.
Fig. 2 is the schematic diagram for illustrating the package stream comprising packet loss according to one embodiment of present invention.
Fig. 3 is according to one embodiment of present invention, to illustrate the flow chart for receiving package.
Fig. 4 is according to one embodiment of present invention, to illustrate the flow chart that decoding receives package.
Fig. 5 A and 5B are the flow charts for illustrating bag-losing hide algorithm according to one embodiment of present invention.
Fig. 6 A and 6B are the flow processs for illustrating quasi periodic train of pulse generating algorithm according to one embodiment of present invention
Figure.
Fig. 7 is according to one embodiment of present invention, to illustrate the signal for implementing the processing system of packet loss algorithm
Figure.
Specific embodiment
Fig. 1 illustrates a communication system.Audio input is transferred to one end of system, and the final other end in system
Output.Because telephone talk is related to two caller's over-over communications, therefore it can be two-way simultaneous communication.Talker can be by recording
Or any other audio-source, generate audio input.Audio input is provided to encoder 102.
Audio input is encoded to multiple packages by encoder 102, and transmits it to decoder by package network 104
106.Package network 104 can be any packet-switched network, both can be connected using physical link, it is possible to use wireless link connects
Connect.Package network 104 can also be cordless communication network, and/or optical fiber link network.Package network 104 is by package from coding
Device 102 reaches decoder 106.Some packages of self-encoding encoder 102 are sent, may be lost, it is concrete as shown in Figure 2.
Encoder 102 is probably iSAC encoders, and it is output package to be responsible for input coding（Also referred to as frame）.The present invention's
One embodiment is based on tone information, while assuming that decoder provides available pitch parameters.But, though pitch parameters not
Embedded payload, it is also possible to according to the audio frequency for decoding before this, estimated on decoder.For example, with short time period
Corresponding every frame, its parameter in iSAC is 30 or 60 milliseconds.Other segment length are also applied for other encoders.One-way latency
At least one frame size of time, so if frame size is more than 60ms, unacceptable long delay can be caused.Additionally, going out
During existing packet loss, frame is longer, is more difficult to hide.On the other hand, if frame is shorter, package can be caused excessive, so as to reduce effectively
Bandwidth.If without worrying delay issue（For example in crossfire）, then longer frame length can be used by allowing canned paragraph, obtain
High-quality.
If encoder 102 is iSAC encoders, input audio signal can be split as two frequency bands, i.e. low-frequency band
And high frequency band (UB) (LB).For example, LB is probably 0-4kHz, and UB is 4-8kHz.Also may be selected and using other frequency bands, for example
LB=0-8kHz and UB=8-16kHz.Also single frequency band can be used（Such as 0-8kHz）, and input audio signal is not split as solely
Vertical frequency band.
As shown in Fig. 2 each frame is including at least pitch gain, pitch delay, LPC parameters and residue signal in the correspondence period
DFT coefficient.If input audio signal is split as LB and UB frequency bands, each frequency band is stored in respective information in frame,
The information of each frequency band can individually be selected from frame, and without the pitch parameters related to UB frequency bands.If encoded using iSAC
Device, will be comprising 4 groups of pitch parameters and 6 groups of LPC parameters, to capture the evolution of signal in frame in frame.Pitch delay can be considered long
When predictor " optimum " postpone, pitch gain may be regarded as prediction gain, and LPC coefficient is optimal short-term prediction coefficient.
Decoder 106 receives the package transmitted by network 104, and package is decoded as into voice data, by decoder
106 are exported.The details of the performed operation of decoder 106 are as seen in figures 3-6.Decoder 106 can be implemented on a processor, such as
Shown in Fig. 7, or implement on other hardware platforms, such as mobile telecommunication apparatus.For the enough disposal abilities of shortage, it is impossible to perform
For the mobile device of alternate type bag-losing hide, the process operation that decoder 106 is performed is favourable, is provided as the present invention
A kind of method, its computation complexity is comparatively relatively low.
Fig. 3 is the generality flow chart for illustrating PLC methods according to one embodiment of present invention.In step S306, really
Whether framing N has been received by, that is, do not lose.If frame N has been received by, then execution step S320, frame N is decoded.Fig. 4 is illustrated
Other detailed process in step S320.
Frame N is completed in step s 320 after decoding, with index N as incremental increase in step S340, then execution step
S306, to determine whether frame N+1 has been received by.As long as non-lost frames, execution step S306, S320 and S340 are just continued cycling through.
If determining that frame is lost, continues executing with step S350, wherein the frame lost is hidden in step S306.Figure
5A-B elaborates other detailed process in step S350.
Fig. 4 illustrates the process decoded to 106 receiving frames of decoder.After receiving frame, step S410 from
Frame size and bandwidth information are decoded in frame.Frame size represents the period size that represents with frame, also can be represented with millisecond, or with spy
The sample number for determining sample rate is represented.Sample rate also can be incorporated in frame.Can be reached an agreement on sample rate before calling, and can not be become during calling
More.Bandwidth information reflects the bandwidth of the voice data being incorporated in frame, it may be possible to LB, UB or the two be all.
In step S415, pitch delay and pitch gain are decoded from frame.Between the renewal of pitch delay and pitch gain
7.5ms is divided into, therefore, comprising 4 groups of pitch delays and pitch gain in each 30ms frame.Pitch delay represents current demand signal
Long-term prediction postpones.Linear predictor coefficient when pitch gain represents long.
In the step s 420, decoded pitch delay and pitch gain are stored, because needing them during follow-up LOF
To realize bag-losing hide.
In step S425, LPC parameters are decoded（LPC waveforms and gain）.LPC parameters represent short-term linear predictive coefficient,
Can be used to describe the spectral enveloping line of signal.
In step S430, waveform and the gain of LPC is stored, because it is hidden to realize packet loss to need them during follow-up LOF
Hide.
In step S435, decoding has been incorporated into the residue signal DFT coefficient of frame.Residue signal be filter in short-term with it is long when line
The result of property dependency.DFT coefficient is changed residue signal to the result of frequency domain by the operation such as FFT.DFT coefficient can
The independent information of LB signals and the independent signal of UB signals can be included.
In step S440, the DFT coefficient to having decoded in step S435 performs the operation such as inverse FFT so as to from frequency domain
Change to time domain, and then produce residue signal.If while using LB and UB signals, to create an individually remnants for LB
Signal（Also known as LB_Res）, and create a single residue signal for UB（Also known as UB_Res）.
In step S445, residue signal is stored（LB_Res and UB_Res）, because it is realized required for bag-losing hide.
In step S450, with pitch postfilter filtering low band residue signal (LB_Res).Pitch postfilter
Device is zero-pole filter, and wherein coefficient is calculated according to pitch gain and pitch delay.Due to it and tone pre-filtering
Device contrast, therefore, it employ by pitch prefilter delete it is long when structure.Even if LB_Res and UB_Res are
It is suitable for, also only the rearmounted filtration of tone is carried out to LB_Res.The output of storage pitch postfilter（The residue signal of filtration）, because
Realize required for bag-losing hide for it.
In step S455, with the LPC parameters for having decoded in step S425, synthesis low-frequency band and high-frequency band signals.LPC
Synthesis is all-pole filter, and its coefficient is derived from LPC parameters.Because this wave filter is reverse lpc analysis（In this encoder）,
Therefore, it employs the short term structure of signal.
The output of LPC synthesis is the time-domain representation of original code signal.If while using LB and UB, output is independent
LB signals and UB signals.
When being used in combination LB and UB, in step S460, LB signals are mutually integrated with UB signals, original audio is created with this
The expression of input, therefore, output is the audio input of receptor, as shown in Figure 1.In one embodiment, if not right
LB and UB are treated respectively, and only used single frequency band, now just can skip step S460.
As shown in figure 4, the reconstruction of audio frequency depends on residue signal, pitch gain, pitch delay and LPC in institute's receiving frame
The availability of parameter.But, if there is packet loss, then these information cannot be obtained.Because each frame is represented with 30 milliseconds as interval
Time period, it is possible to the simple copy information from former frame, to represent the frame of loss.But, using the method, can cause
Audio frequency is sounded unnatural, it appears manual and mechanization.Therefore, inventor works out a kind of method, according to what is received before
Frame to rebuild frame losing in data, so as to draw the natural audio frequency of sound.The method is to rebuild residue signal-be input into tone
Synthesis（Low-frequency band is remained）--- and input tremendously high frequency band LPC synthesizes（High frequency band is remained）.It is similarly to the process of package before this
Method, but be not just the same.Concrete details are as shown in figures 5 a-b.
If step S306 determines that a certain frame is lost, decoder 106 can perform bag-losing hide in step S350.Such as
Shown in Fig. 5 A, the pitch delay and pitch gain for having stored is retrieved in step S510.Receive before this in step S420
Frame stores pitch delay and pitch gain.
It is the frame retrieval residue signal for receiving before this in step S515.Residue signal is stored in step S445.
In step S516, decoder determines whether current frame losing is one of continuous frame losing.If frame losing is not multiple companies
One of continuous frame losing, then continue executing with step S520.
In step S520, two newest tone pulses have been calculated.Tone pulses used are in time with frame losing the most
It is close to.The foundation of calculating is the pitch delay and residue signal retrieved in step S510 and S515.In one embodiment, even if
Simultaneously LB and UB signals are used, also only calculated two newest tone pulses of LB signals.In another embodiment, while meter
Calculate two tone pulses of LB and UB signals.Select to use two tone pulses, be that inventor determines to realize optimum performance
A design parameter, but it is also possible to using the tone pulses of other quantity.
In step S525, the tone pulses obtained in storing step S520.For LB signals, tone pulses are claimed
For LB_P1 and LB_P2.
In step S530, the pitch postfilter output stored in searching step S450, and in step S535, make
With pitch postfilter output calculate one it is long when similarity measure.More precisely, similarity measure is according to front when long
One frame carries out the ratio that the energy balane of tone pulses before and after rearmounted filtration draws.It is to weigh the previous frame period
One of property estimates.
In step S540, the basis of vocal device by it is long when similarity measure and calculating tone pulses frequency
Rate.For example, the computing formula of vocal device is log2 (sigma2_out/sigma2_in)+2*pitch_gain+pitch_
Gain/256, wherein, log2 (x) is the logarithm of the x with 2 as the truth of a matter, sigma2_out be in pitch postfilter output most
The variance of new tone pulses, sigma2_in is the variance of respective pulses in input.Vocal device specifies newest decoded frame
Periodicity.
In step S545, the weighter factor of voiced sound and sore throat relieving section is calculated.The weighter factor of voiced segments be w_v, sore throat relieving section
Weighter factor be w_u.Following false code is an example for calculating weighter factor algorithm：
Weight is stored in step S550.The description of step S520 to step S550, based on discontinuous frame losing.It is multiple continuous
Frame losing is different with the handling process of single frame losing.If multiple continuous frame losings, then the immediately former frame not received.
But, can be to first frame losing in multiple frame losing sequences, execution step S520 to S550.Any frame losing sequence all will comply with
The handling process of S517 to S547.
The simple voiced segments reduced by repeating tone pulses, sound very unnatural, it is difficult to pleasant（It is also known as mechanical
Sound）.Thus, to avoid manual sound, weighting from changing with the quantity of pitch period is rebuild.In step S517,
Increased attenuation rate.Attenuation rate is that synthesis residue signal decays to zero speed, and is applied to step S590.
In step S547, the weighter factor w_v and w_u calculated during a upper PLC is called is retrieved（It is stored in step
S550）.
Follow-up processing flow as shown in Figure 5 B, wherein in step S556, analyzes weighter factor w_v and w_u, to determine most
Which kind of voice is included in the frame for newly receiving.Voiced speech possesses very strong periodic nature, and unvoiced speech is quite different.If most
The frame for newly receiving includes voiced speech, then w_v will be greater than zero.If frame also includes unvoiced speech, w_u can also be more than zero.Power
The relative mixability of voiced speech and unvoiced speech in frame is reflected again.Only contain the frame of voiced speech, its w_u is equal to zero.And
Only contain the frame of unvoiced speech, its w_v is also zero.If the equal non-zeros of w_v and w_u, this voice may be regarded as mixing voice.
If it is determined that voice is sore throat relieving（That is w_v is zero）, then step S560 is continued executing with, wherein generating a pseudorandom
Vector.If while generating a pseudo-random vector using LB and UB, respectively LB and UB.
In step S562, pseudo-random vector is filtered using the full zero point filter of N ranks, wherein coefficient according to having decoded recently
N number of last samples of residue signal are calculated.In one exemplary embodiment, N can be equal to 30 fixed number.This
Filter operation will be coloured for the pseudo-random vector for generating, to form a spectrum envelope similar to the package for receiving before this.
If having determined that voice is voiced sound in step S556（That is w_u is zero）, then step S580 is continued executing with.Step
S580 establishes a quasi periodic train of pulse.Quasi periodic train of pulse is the weighted sum of two newest pitch periods.Output
It is residue signal.If while using LB and UB, output is LB residue signals and UB residue signals.Quasi periodic train of pulse
Detailed generating process, as shown in fig. 6 a-b.
If having determined that voice is mixing in step S556, step S570 is continued executing with.Step S570 is in function
It is upper consistent with step S580.Detailed process in step S570, as shown in fig. 6 a-b.The output of step S570 is one low
Frequency band pulse string（Referred to as LB_P）With a high frequency band train of pulse（Referred to as UB_P）.
Step S572 is respectively LB and UB and generates two pseudo-random vectors.The generating process and step of pseudo-random vector
Process in S560 is consistent.LB pseudo-random vectors will be called LB_N, and UB pseudo-random vectors will be called UB_N.
In step S574, weighter factor w_v and w_u are applied to quasi periodic train of pulse and pseudo-random vector, specifically
It is as follows.LB residue signals are LB_P*w_v+LB_N*w_u.UB residue signals are UB_P*w_v+UB_N*w_u.
In this stage, residue signal has been calculated, and carried out appropriate weighting.In step S590, residue signal is decayed.
Decay is linear, and applies one by one by sample.If K is the size for having rebuild residue signal, following false code elaborates to use
In the exemplary algorithm of signal attenuation, wherein d is less than 1 numeral, and the effect of decay_rate is apparent：
For n=1 to K is performed
In step S592, the LB remnants rearmounted filtrations of Jing tones are similar with step S450.Mistake used by the rearmounted filtration of tone
Filter coefficient stems from the pitch delay and pitch gain stored in step S420.UB remnants can skip the rearmounted filtration of tone.
In step S594, retrieve in step S430 store LPC parameters, and according to retrieval parameter, perform LB and
The LPC synthesis of UB signals.
In step S596, LB and UB signals are integrated, represented with the synthesis for creating frame losing audio frequency.
Fig. 6 A-B are described in detail the process for setting up a quasi periodic train of pulse according to one embodiment of present invention.Step
Rapid S570 and S580 establishes a quasi periodic train of pulse.
In step S610, pitch delay LB_P1, LB_P2 and UB_Res of previous frame is retrieved.Before one in retrieval
These values are stored during frame.
In step S615, cycle counter j and p_cntr are initialized to zero.In step S616, decoder determines
Whether present frame is one of continuous frame losing.If frame losing is not one of multiple continuous frame losings, step S617 is continued executing with, wherein
The value of variables L is set equal to the pitch delay retrieved in step S610.Additionally, first frame losing will cause L to be initialised
For the value of pitch delay, but follow-up frame losing will bypass step S617, and continue executing with step S620.
In step S620, LB_P1 is to carry out resampling to L samples and be assigned to the value of R1.Therefore, the length of R1 is
L samples.
In step S625, UB_Res last L samples are selected, and are referred to as Q1.
In step S630, cycle counter i is initialized to zero.
In step S635, quasi periodic train of pulse LB_P is established（Suitable for low-frequency band）And UB_P（Suitable for high frequency
Band）.In each iteration of the circulation of traversal i and j, LB_P (j)=R1 (i) and UB_P (j)=Q1 (i), and i and j be with one
Incremental increase.
In step S636, whether decoder determines j less than frame_size（Take from step S410）.As long as j is less than
Frame_size, circulation will continue.If j reaches frame_size, LB_P and UB_P will be returned as quasi periodic train of pulse.
In step S638, whether decoder determines i less than L.If i is less than L, program return to step S635 simultaneously continues
Perform circulation.Once i reaches L, program will continue to execution step S640, as shown in Figure 6B.
In step S640, p_cntr is with 1 as incremental increase.
In step S642, whether decoder determines L more than pitch_lag.If L is not big enough, L is in step S644
It is set as pitch_lag+1.If L is more than pitch_lag, L will be set as pitch_lag in step S646.This process
It is an example to tone pulses resampling, can avoids the presence of excessive periodicity in reconstructed signal.
In step S650, LB_P1 is to carry out resampling to L samples and be assigned to the value of R1.Therefore, the length of R1 is
L samples.
In step S655, LB_P2 is to carry out resampling to L samples and be assigned to the value of R2.Therefore, the length of R2 is
L samples.
In step S656, decoder determines whether the value of p_cntr is equal to 1,2 or 3.
If the value of p_cntr will be set as (3*R1+R2)/4 equal to 1, R1 in step S661.
If the value of p_cntr will be set as (R1+R2)/2 equal to 2, R1 in step S662.
If the value of p_cntr will be set as (R1+3*R2)/4 for 3, R1 in step S663, and p_cntr will be in step
0 is set as in S673.
Execution is completed after the either step in S661, S662 and S673, and program will be back to step S630, such as Fig. 6 A institutes
Show.
Fig. 7 is the block chart for illustrating the computing device 700 configured to realize bag-losing hide according to the present invention.In pole
In its basic configuration 701, computing device 700 generally includes one or more processors 710 and Installed System Memory 720.Internal memory is total
Line 730 can be used for the communication between processor 710 and Installed System Memory 720.
According to required configuration, processor 710 can be any type, including but not limited to：Microprocessor (μ P), micro-control
Device (μ C) processed, digital signal processor (DSP) or their combination in any.Processor 710 may include an extra cache level
Not, such as level cache 711 and L2 cache 712, processor cores 713 and depositor 714.Processor cores 713 include one
ALU (ALU), floating point unit (FPU), a digital signal processing core（DSP core）, or they appoint
Meaning combination.Memory Controller Hub 715 can also be used together with processor 710, and in some implementations, Memory Controller Hub 715 is to process
The internal portions of device 710.
According to required configuration, Installed System Memory 720 can be any type, including but not limited to：Volatile memory（Such as
RAM）, nonvolatile memory（Such as ROM and flash memory）Or their combination in any.Installed System Memory 720 generally includes a behaviour
Make system 721, one or more application programs 722 and routine data 724.Application program 722 includes a decoding process algorithm,
Band bag-losing hide algorithm 723, the algorithm can be used for according to the present invention, decode the package for receiving and the package for hiding loss.Journey
Ordinal number includes service data 725 according to 724, can be used to be decoded and be hidden the package lost to having been received by package, describes in detail
Please see below.In certain embodiments, application program 722 can be arranged in operating systems such as ARIXTRA, Chrome and Windows
Coordinate with routine data 724 in 721 and run.The basic configuration is illustrated in the figure 7, and associated component dotted line 701 is marked
Go out.
Computing device 700 possesses supplementary features and/or function and extra interface, can promote basic configuration 701 with
Communication between any necessaries and interface.For example, bus/interface controller 740 can be used in promote basic configuration 701 with
Communication between one or more data storage devices 750, such communication is realized by memory interface bus 741.Data
Storage device 750 can be movable memory equipment 751, non-moving storage device 752, or combination.It is removable to deposit
The example of storage equipment and non-moving storage device includes：The disk unit such as floppy disk and hard disk drive (HDD), CD
(CD) CD drive such as machine or digital versatile disc (DVD) machine, solid state hard disc (SSD) and magnetic tape controller etc..Computer Storage is situated between
Matter example includes：The volatibility implemented using any method or technique and non-volatile media, removable and non-moving medium, are used
In information such as storage computer-readable instruction, data structure, program module or other data.
Installed System Memory 720, movable memory equipment 751 and non-moving storage device 752 belong to computer-readable storage
The example of medium, and according to the Processing Algorithm referred in the present invention various steps described in storage information.Computer-readable storage medium
Including but not limited to RAM, ROM, EEPROM, flash memory or other memory technologies, CD-ROM, digital versatile disc (DVD) or other
Optical memory, cassette tape, tape, disk memory or other magnetic memories, or can be used in storing information needed and energy
Any other medium of line access is entered by computing device 700.Any such computer-readable storage medium is all of equipment 700
Point, the instruction of the execution of processor 710 can be stored, and cause computing device 700 to perform a kind of decoding package and hide the side of package
Method, specifically as representative of the present invention.
Computing device 700 also includes interface bus 742, and the interface bus is used to promote from various interface equipments（For example it is defeated
Outgoing interface, peripheral interface and communication interface）To the communication of basic configuration 701, such communication is by bus/interface controller
740 realizations.Example output device 760 includes a Graphics Processing Unit 761 and an audio treatment unit 762, can configure
Into being communicated with the various external equipments such as display or speaker, such communication is real by one or more A/V ports 763
Existing.Exemplary peripheral interface 770 includes a serial interface controller 771 or a parallel interface controller 772, both
Interface controller, can be with input equipment through configuration（For example, keyboard, mouse, pen, voice-input device or contact input
Equipment etc.）Communicated Deng external equipment, or other ancillary equipment（Such as printer or scanner etc.）Communication, such communication
It is to be realized by one or more I/O ports 773.Example communication device 780 includes a network controller 781, to the control
Device processed is arranged, and can promote and the network service between one or more other computing devices 790, and such communication is to pass through
What one or more COM1s 782 were realized.Such communication connection is an example of communication media.Common communication media
Including other data of computer-readable instruction, data structure, program module or modulated data signal form, such as carrier wave or
Other transmission mechanisms, also including any information transmitting medium." modulated data signal " can possess one or more feature sets
Signal, or information can be encoded in the signal so as to change.For example, communication media includes but does not limit
In：Cable network or direct wire connection etc. wire medium, and audio frequency, radio frequency (RF), infrared ray (IR) and other
The wireless mediums such as wireless medium." computer-readable medium " one word used herein includes storage medium and communication media.
Computing device 700 can be implemented as small portable（Or it is mobile）A part for electronic equipment, such as mobile phone, individual
Data assistant (PDA), personal media player device, radio network monitors equipment, personal ear speaker device, application-specific equipment or
Person has the hybrid equipment of any of the above described function.Computing device 700 also can be realized as PC, including hand-held electric
Brain and non-laptop computer are configured.
What difference the hardware and software of system aspects is realized almost without；It is usual using hardware or software（But not
Such was the case with, in some cases, selects hardware or software possible extremely important）It is a kind of design alternative, represents cost
With the balance of efficiency.Flow process described herein and/or system and/or other technologies can be by various kinds of media things（Such as hardware,
Software and/or firmware）Play a role, and different, the first-selected matchmaker of flow process and/or system and/or the environment of other technologies deployment
Jie's thing also will be different.For example, if realizing that personnel determine that speed and accuracy are most important, he may be inclined to choosing
Select hardware and/or firmware vehicle；If it is determined that motility is most important, then may be inclined to selection software and realize；Or
The personnel of realization also may can select being used in combination for hardware, software and/or firmware.
Detailed description above lists the various of equipment and/or flow process by using block chart, flow chart and/or example
Embodiment.Due to including one or more functions and/or operation in these block charts, flow chart and/or example, association area
Personnel will obtain such understanding：Each function and/or operation in these block charts, flow chart or example can be by extensive
The combination in any of hardware, software, firmware or three is come individually and/or while is realized.In one embodiment, it is described herein
Several parts of invention can pass through special IC (ASIC), field programmable gate array (FPGA), Digital Signal Processing
Device (DSP) or other integrated forms are achieved.However, one of ordinary skill in the art, it can be seen that embodiment described herein
（It is all or part of）Some aspect can equivalent realization in integrated circuits, as what is run on one or more computers
One or more computer programs（One or more programs run for example in one or more computer systems）, as exist
One or more programs run in one or more processors（For example in one or more microprocessors run one or
Multiple programs）, as firmware or the combination in any as above-mentioned form.One of ordinary skill in the art will also further recognize
Arrive, according to the present invention, one of ordinary skill in the art easily for software and/or firmware design circuit and/or can write code.
Additionally, one of ordinary skill in the art will be understood that, the operating mechanism of invention described herein can be used as various forms of journeys
Sequence product is allocated, and no matter is described herein for the actual signal transmission medium for performing this distribution why type
The illustrative embodiment of invention be suitable for.The example of signal transmission medium includes but is not limited to herein below：Recordable type
Medium, such as floppy disk, hard disk drive, CD (CD), digital video disk (DVD), digital magnetic tape and computer storage
Deng；And the medium of transport-type, such as numeral and/or analogue communication medium（Such as fiber optic cables, waveguide, wire communication
Link and wireless communication link etc.）.
One of ordinary skill in the art will be recognized that, in this field, in mode described herein equipment and/or stream be described
Journey, then using engineering practice by the equipment and/or Process integration of such description in data handling system, this way is very
Common.That is, in equipment described herein and/or flow process, it is at least part of can be by the experiment of fair amount
In being integrated into data handling system.One of ordinary skill in the art will be recognized that typical data handling system generally includes one
Or multiple system unit shells；One video display apparatus；One volatibility or nonvolatile memory；Microprocessor and numeral
The processors such as signal processor；The computational entities such as operating system, driver, graphic user interface and application program；One more
Individual interactive device, such as touch pad or touch screen；And/or control system, including feedback circuit and control motor（For example, pin
To sensing location and/or the feedback of speed；For moving and/or adjusting the control motor of component and/or quantity）.Typically
Data handling system realizes possibly also with commercially available applicable component on the market, such as data calculating communication and/or network meter
Those components being usually used in calculation/communication system.
With regard to use in a large number herein plural number and/or singular noun, one of ordinary skill in the art can based on context and/
Or usable condition, using singular or plural form.For clarity, the conversion of various singular/plurals is clearly outlined herein
Situation.
In view of having disclosed multiple different aspects and embodiment herein, one of ordinary skill in the art should be able to be touched by class
It is logical, it is contemplated that other aspects and embodiment.Various aspects disclosed herein and embodiment are used to illustrate, and are not
Propose to limit, following claims specifies the true scope and intrinsic meaning of patent.
Claims (13)
1. a kind of method decoded to the audio signal for being encoded as continuous frame sequence, the method includes：
Receive the first frame of successive frame, the first frame is included for rebuilding the decoding parametric of voice data that represented by the first frame and residual
Remaining signal, wherein residue signal include the input of pitch synthesis filter and linear predictive coding composite filter, its medium pitch
The input of composite filter is remained including low-frequency band, and the wherein input of linear predictive coding composite filter includes that high frequency band is residual
Stay, wherein low-frequency band residual is that low-frequency band train of pulse is multiplied by the weighter factor of voiced segments and low-frequency band pseudo-random vector is multiplied by
The weighter factor sum of sore throat relieving section, and wherein described high frequency band residual is the weighter factor that high frequency band train of pulse is multiplied by voiced segments
With the weighter factor sum that high frequency band pseudo-random vector is multiplied by sore throat relieving section；
Store the residue signal included in the first frame；
First frame is decoded according to the residue signal of storage, to rebuild the audio signal encoded by the first frame；
It is determined that the second frame in the first frame follow-up in time is lost；
The residue signal of modification storage；And
According to amended residue signal, the estimated value of the audio signal encoded by the second frame is rebuild.
2. method according to claim 1, it is characterised in that the residue signal of modification storage, concrete steps include：
Generate a cycle signal；
Residue signal based on storage generates a colored false random signal；
Periodic signal and colored false random signal are multiplied with selected weighter factor, selected weighter factor is based on residual from storing
The input signal of the pitch synthesis filter of remaining signal creation and the energy of output signal and the sound based on storage residue signal
Adjust gain；And
Calculate the summation of the periodic signal after weighting and the colored false random signal after weighting.
3. method according to claim 2, it is characterised in that generate periodic signal, concrete steps include：
The pitch period that retrieval at least two is most recently stored；
Change the periodicity of each pitch period；
Each pitch period is weighted；And
Two weighting pitch periods are sued for peace.
4. method according to claim 3, it is characterised in that the periodicity of each pitch period of change, concrete steps include：
Resampling is carried out to one or more tone pulses of each pitch period in pitch period.
5. method according to claim 2, it is characterised in that generate colored false random signal, concrete steps include：
Generate a pseudo-random sequence；And
Using the full zero filter of N ranks, according to based on previous newest N of the decoded low frequency with residue signal in the frame for receiving before
The coefficient of individual sample, filters pseudo-random sequence.
6. method according to claim 1, it is characterised in that
Decoding parametric, including
Pitch gain,
Pitch delay and
LPC parameters.
7. method according to claim 1, it is characterised in that
Coding information of the frame sequence comprising first band and the second band apparently higher than first band, and
The residue signal of only first band is only filtration after-tones, and the residue signal of second band is not then.
8. pair a kind of decoding apparatus that the audio signal of continuous frame sequence is decoded are encoded as, this device includes：
One receptor, is configured to receive the first frame of successive frame, and the first frame is included for rebuilding the audio frequency represented by the first frame
The decoding parametric and residue signal of data, wherein residue signal include pitch synthesis filter and linear predictive coding synthetic filtering
The input of the input of device, wherein pitch synthesis filter includes low-frequency band residual, wherein linear predictive coding composite filter
Input includes that high frequency band is remained, wherein low-frequency band residual is the weighter factor and low frequency that low-frequency band train of pulse is multiplied by voiced segments
The weighter factor sum of sore throat relieving section is multiplied by with pseudo-random vector, and wherein described high frequency band residual is that high frequency band train of pulse is multiplied by
The weighter factor of voiced segments is multiplied by the weighter factor sum of sore throat relieving section with high frequency band pseudo-random vector；
One memory element, for the residue signal included in the first frame of storage；
One decoding unit, is configured to decode the first frame according to the residue signal of storage, to rebuild the audio frequency encoded by the first frame
Signal；
One loss detector, is configured to determine that the second frame in the first frame follow-up in time is lost；
One modification unit, is configured to change the residue signal of storage；And
One reconstruction unit, is configured to the storage residue signal changed according to modification unit, rebuilds the sound encoded by the second frame
The valuation of frequency signal.
9. decoding apparatus according to claim 8, it is characterised in that modification unit includes：
One the first signal generator, is configured to generate a cycle signal；
One secondary signal generator, is configured to generate a colored false random signal according to the residue signal of storage；
One multiplexer, the colour generated for the periodic signal that generates the first signal generator and secondary signal generator is pseudo-
Stochastic signal is multiplied with selected weighter factor, and selected weighter factor is based on the tone synthesis filter created from storage residue signal
The input signal of ripple device and the energy of output signal and the pitch gain based on storage residue signal；And
One adder, for weighting periodic signal and the summation of weighted colorization pseudo-random signal.
10. decoding apparatus according to claim 9, it is characterised in that the first signal generator is configured to：
The pitch period that retrieval at least two is most recently stored；
Change the periodicity of each pitch period；
Each pitch period is weighted；And
Two weighting pitch periods are sued for peace.
11. decoding apparatus according to claim 10, it is characterised in that
First signal generator is configured to, by one or more tone arteries and veins to each pitch period in pitch period
Rush in row resampling to change the cycle.
12. decoding apparatus according to claim 9, it is characterised in that secondary signal generator is configured to：
Generate a pseudo-random sequence；And
Using the full zero filter of N ranks, according to based on previous newest N of the decoded low frequency with residue signal in the frame for receiving before
The coefficient of individual sample, filters pseudo-random sequence.
13. decoding apparatus according to claim 8, it is characterised in that
Decoding parametric, including
Pitch gain,
Pitch delay and
LPC parameters.
Applications Claiming Priority (1)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
PCT/US2011/036662 WO2012158159A1 (en) | 2011-05-16 | 2011-05-16 | Packet loss concealment for audio codec |
Publications (2)
Publication Number | Publication Date |
---|---|
CN103688306A CN103688306A (en) | 2014-03-26 |
CN103688306B true CN103688306B (en) | 2017-05-17 |
Family
ID=44626536
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
CN201180072349.0A Active CN103688306B (en) | 2011-05-16 | 2011-05-16 | Method and device for decoding audio signals encoded in continuous frame sequence |
Country Status (2)
Country | Link |
---|---|
CN (1) | CN103688306B (en) |
WO (1) | WO2012158159A1 (en) |
Families Citing this family (17)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
KR102238376B1 (en) | 2013-02-05 | 2021-04-08 | 텔레폰악티에볼라겟엘엠에릭슨(펍) | Method and apparatus for controlling audio frame loss concealment |
SG11201510463WA (en) | 2013-06-21 | 2016-01-28 | Fraunhofer Ges Forschung | Apparatus and method for improved concealment of the adaptive codebook in acelp-like concealment employing improved pitch lag estimation |
PL3011555T3 (en) * | 2013-06-21 | 2018-09-28 | Fraunhofer-Gesellschaft zur Förderung der angewandten Forschung e.V. | Reconstruction of a speech frame |
CN104347076B (en) * | 2013-08-09 | 2017-07-14 | 中国电信股份有限公司 | Network audio packet loss covering method and device |
CN104751849B (en) | 2013-12-31 | 2017-04-19 | 华为技术有限公司 | Decoding method and device of audio streams |
EP2922054A1 (en) | 2014-03-19 | 2015-09-23 | Fraunhofer-Gesellschaft zur Förderung der angewandten Forschung e.V. | Apparatus, method and corresponding computer program for generating an error concealment signal using an adaptive noise estimation |
EP2922056A1 (en) | 2014-03-19 | 2015-09-23 | Fraunhofer-Gesellschaft zur Förderung der angewandten Forschung e.V. | Apparatus, method and corresponding computer program for generating an error concealment signal using power compensation |
EP2922055A1 (en) | 2014-03-19 | 2015-09-23 | Fraunhofer-Gesellschaft zur Förderung der angewandten Forschung e.V. | Apparatus, method and corresponding computer program for generating an error concealment signal using individual replacement LPC representations for individual codebook information |
CN107369454B (en) | 2014-03-21 | 2020-10-27 | 华为技术有限公司 | Method and device for decoding voice frequency code stream |
NO2780522T3 (en) | 2014-05-15 | 2018-06-09 | ||
CN104021792B (en) * | 2014-06-10 | 2016-10-26 | 中国电子科技集团公司第三十研究所 | A kind of voice bag-losing hide method and system thereof |
US20180169211A1 (en) | 2014-11-13 | 2018-06-21 | Evaxion Biotech Aps | Peptides derived from acinetobacter baumannii and their use in vaccination |
CN106788876B (en) * | 2015-11-19 | 2020-01-21 | 电信科学技术研究院 | Method and system for compensating voice packet loss |
CN111402905B (en) * | 2018-12-28 | 2023-05-26 | 南京中感微电子有限公司 | Audio data recovery method and device and Bluetooth device |
CN111383643B (en) * | 2018-12-28 | 2023-07-04 | 南京中感微电子有限公司 | Audio packet loss hiding method and device and Bluetooth receiver |
WO2020164753A1 (en) * | 2019-02-13 | 2020-08-20 | Fraunhofer-Gesellschaft zur Förderung der angewandten Forschung e.V. | Decoder and decoding method selecting an error concealment mode, and encoder and encoding method |
CN112908346B (en) * | 2019-11-19 | 2023-04-25 | 中国移动通信集团山东有限公司 | Packet loss recovery method and device, electronic equipment and computer readable storage medium |
Citations (4)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
EP1724756A2 (en) * | 2005-05-20 | 2006-11-22 | Broadcom Corporation | Packet loss concealment for block-independent speech codecs |
CN101136203A (en) * | 2006-08-31 | 2008-03-05 | 索尼株式会社 | Apparatus and method for processing signal, recording medium, and program |
CN101261833A (en) * | 2008-01-24 | 2008-09-10 | 清华大学 | A method for hiding audio error based on sine model |
CN101268506A (en) * | 2005-09-01 | 2008-09-17 | 艾利森电话股份有限公司 | Processing code real-time data |
Family Cites Families (1)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US8005678B2 (en) * | 2006-08-15 | 2011-08-23 | Broadcom Corporation | Re-phasing of decoder states after packet loss |
-
2011
- 2011-05-16 CN CN201180072349.0A patent/CN103688306B/en active Active
- 2011-05-16 WO PCT/US2011/036662 patent/WO2012158159A1/en active Application Filing
Patent Citations (4)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
EP1724756A2 (en) * | 2005-05-20 | 2006-11-22 | Broadcom Corporation | Packet loss concealment for block-independent speech codecs |
CN101268506A (en) * | 2005-09-01 | 2008-09-17 | 艾利森电话股份有限公司 | Processing code real-time data |
CN101136203A (en) * | 2006-08-31 | 2008-03-05 | 索尼株式会社 | Apparatus and method for processing signal, recording medium, and program |
CN101261833A (en) * | 2008-01-24 | 2008-09-10 | 清华大学 | A method for hiding audio error based on sine model |
Also Published As
Publication number | Publication date |
---|---|
WO2012158159A1 (en) | 2012-11-22 |
CN103688306A (en) | 2014-03-26 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
CN103688306B (en) | Method and device for decoding audio signals encoded in continuous frame sequence | |
TW497335B (en) | Method and apparatus for variable rate coding of speech | |
JP5373217B2 (en) | Variable rate speech coding | |
CN101681627B (en) | Signal encoding using pitch-regularizing and non-pitch-regularizing coding | |
Dutoit et al. | Applied Signal Processing: A MATLABTM-based proof of concept | |
TW202111692A (en) | Artificial intelligence based audio coding | |
TW200935402A (en) | Scalable speech and audio encoding using combinatorial encoding of MDCT spectrum | |
TW201250671A (en) | Audio codec using noise synthesis during inactive phases | |
CN106575509A (en) | Harmonicity-dependent controlling of a harmonic filter tool | |
Ogunfunmi et al. | Principles of speech coding | |
CN106575505A (en) | Frame loss management in an fd/lpd transition context | |
CN111554309A (en) | Voice processing method, device, equipment and storage medium | |
JP4008607B2 (en) | Speech encoding / decoding method | |
CN1104010A (en) | Method for generating a spectral noise weighting filter for use in a speech coder | |
CN101171626A (en) | Time warping frames inside the vocoder by modifying the residual | |
CN1886783A (en) | Audio coding | |
JP3095133B2 (en) | Acoustic signal coding method | |
Gueham et al. | Packet loss concealment method based on interpolation in packet voice coding | |
Anees | Speech coding techniques and challenges: a comprehensive literature survey | |
JP3338074B2 (en) | Audio transmission method | |
Possemiers et al. | Evaluating deep learned voice compression for use in video games | |
JP2000514207A (en) | Speech synthesis system | |
EP2589045A1 (en) | Adaptive linear predictive coding/decoding | |
CN114203151A (en) | Method, device and equipment for training speech synthesis model | |
Kim et al. | On a Reduction of Pitch Searching Time by Preliminary Pitch in the CELP Vocoder |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
PB01 | Publication | ||
PB01 | Publication | ||
C10 | Entry into substantive examination | ||
SE01 | Entry into force of request for substantive examination | ||
GR01 | Patent grant | ||
GR01 | Patent grant | ||
CP01 | Change in the name or title of a patent holder | ||
CP01 | Change in the name or title of a patent holder |
Address after: American CaliforniaPatentee after: Google limited liability companyAddress before: American CaliforniaPatentee before: Google Inc. |