The application advocates the U.S. Patent application the 13/588th that on August 17th, 2012 submits to simultaneously, the priority of No. 643, its name is called " time domain is switched analog-digital converter apparatus and method for ", it further advocates the U.S. Provisional Patent Application the 61/525th that on August 19th, 2011 submits to, the priority of No. 596, its full content in connection with in this and as a reference.
No. 13/168th, 603, the U.S. Patent application that the application proposes the 24 days June in 2011 that also reference name is " for the Apparatus and method for of the disturbance time domain measurement that vibrates ", its full content is in connection with in this and as a reference.
Embodiment
Refer now to Figure of description, wherein same numbers from the beginning to the end refers to same section.
As used herein " carrier wave " and " carrier frequency " and etc. term refer to but be not limited to, to be for example combined with inside or the outside generating period signal of use with input signal during input signal is measured.
As used herein " computer ", " calculation element ", with " computer installation " etc. term include but not limited to, mainframe computer, work station, server, personal computer (PC) and microcomputer are (no matter be desktop PC, laptop computer or other), personal digital assistant (PDA), handheld computer, embedded computer, programmable logic device, digital information processing system, person-to-person communication machine, flat computer, Portable navigational aid, J2ME equips device, mobile phone, intelligent mobile phone, individual integrates communication or entertainment device, or any other device that can carry out instruction set and process the data-signal of coming in.
As used herein " computer program " or " software " and etc. term represent to comprise any continuous or the mankind or the perceptible step of machine of carrying out function.This class method can be virtually presents for example, in comprising any program language of for example C/C++, C#, Fortran, COBOL, MATLAB TM, PASCAL, Python, Verilog, VHDL, compositional language, markup language (, HTML, SGML, XML, VoXML) etc. or environment and in as the Object Oriented OO environment of object request broker architecture (CORBA), Java TM (comprising J2ME, Java Beans etc.), binary bit execution environment (such as BREW) etc.
As used herein " memory " etc. term comprise integrated circuit or other storage device of any type that is applicable to store digital data, include, but is not limited to ROM, PROM, EEPROM, DRAM, SDRAM, DDR/2SDRAM, EDO/FPMS, RLDRAM, SRAM, " flash memory " memory (for example NAND/NOR), memristor memory and PSRAM.
As used herein " microprocessor " and " digital processing unit " and etc. term general expression comprise all types of digital processing units, include, but is not limited to digital signal processor (DSP), Reduced Instruction Set Computer (RISC), general (CISC) processor, microprocessor, gate array (for example FPGA), PLD, can weigh curve calculation structure (RCF), array processor, secure microprocessor and application-specific integrated circuit (ASIC) (ASIC).This class digital processing unit can in be contained on single IC wafer or disperse to spread all over a plurality of elements.
As used herein " top ", " bottom ", " side ", " make progress ", " downwards ", " left side ", " right side " and etc. term only mean that an element is to the relative position of another element or geometric position, never mean absolute reference standard or any necessary orientation.For example, an element " top " in fact when this element is fixed to another device, may be positioned at when upper " bottom " below (for example, be fixed to the bottom surface of PCB).
As used herein " reference signal " etc. term refer to that (but being not limited to) in order to for example to generate inside or the outside signal that generates of trigger event during input signal is measured.
Summary
In a kind of significant execution mode, the present invention proposes the capable of regulating that has of a kind of sound, low cost and high-res and measures dynamic range analog-digital converter equipment and implementation method and its method of use of (as may be used at sensing or measuring in application).
In a kind of implementation method, equipment carrys out a kind of analog input of modulation by a kind of cycle carrier signal of known periods, and compares signal and known reference signal level through modulation.In a kind of variation, singlely with reference to level, can use together with amplitude with known carrier frequency.In other variation, use a plurality of with reference to level can measure all constant input signals of carrier amplitude and frequency.When modulation waveform intersects with each reference signal level, ADC equipment generates corresponding trigger event.By merging, correspond to the time interval of the modulation waveform intersecting with continuous trigger event location, infer cycle and the amplitude of modulation waveform, obtain thus the numeral of analog input signal.
In another kind of implementation method, by extra reference signal level, promote frequency response and the accuracy of Changer Device.
The accuracy that described example two is switched analog-digital converter equipment with reference to level time domain is conducive to not determine according to carrier signal amplitude or frequency, therefore can instant sensing dynamic range adjustment.The accuracy that device is more guaranteed in such configuration only can be determined according to the accuracy of the time measurement of the poor accuracy of the consistency of trigger event, reference signal level and front and back trigger event.In addition, various implementation methods of the present invention are utilized noise and/or distortion compensation technology, to alleviate from the various impacts that cause accuracy to reduce.
The device of example also helps the parameter of measuring in wide dynamic range to be changed.In a kind of variation, above-mentioned wide dynamic range capabilities is that the variation by carrier signal amplitude realizes.Moreover, by adjusting carrier cycle, carry out control inputs signal transfer ratio, be easy to so immediately adjust ADC frequency range and accuracy/resolution.
By which, single ADC according to the present invention is used to measure the signal value (amplitude and frequency) of wide region, has therefore avoided using being tuned to as a plurality of ADC of specific (narrower) of the prior art scope.
Detailed description of illustrative embodiments
Then various embodiment and the variation of equipment of the present invention and method are elaborated.
signal conversion
It is the corresponding measuring intervals of TIME of modulating signal waveform based on intersecting with prearranged signals level that time domain is switched (TDS) ADC concept, to rebuild input signal.In one embodiment, modulating signal comprises: (i) time changes voltage or current input signal (this is unknown and is the target of measuring); And (ii) carrier signal (voltage or electric current) signal.About DC input signal, modulating signal V can be expressed as:
V (t)=V
c(t)+V
input=A
ccos (ω
ct)+V
input(mathematical expression 2)
Herein:
V (t) modulating signal;
V
c(t) carrier signal;
V
inputunknown input signal to be measured;
A
ccarrier signal amplitude; And
ω
ccarrier signal radial frequency ω
c=2 π f
c.
In order to realize TDS ADC, input signal V
input(meaning of the input in symbol is input herein, and the meaning of the input in specification and accompanying drawing is all identical, for making symbol complete, please allow to omit the translation of this word) can be added to carrier signal V
c, by the side-play amount of modulated carrier signal.Carrier signal can be supplied or for example, logical circuit by ADC equipment (, FPGA/MCU, touring circuit, voltage-controlled oscillator etc. resonate) generates in inside from external source.
With reference now to Fig. 1,, schematic diagram has shown that the broad sense framework of time domain switching (TDS) analog-digital converter (ADC) comprises that front-end processing 101, sequential distinguish 103, the algorithm element 113 of control logic 109, time/digital translation 111 and definition and its corresponding technology.System can be accepted a plurality of analog inputs, comprising: treat digitized signal 115 (signals
1... signal
n, also referred to as modulating signal), may be fixing or reference signal (the Ref that changes of time
1... Ref
m) and the common carrier signal (carrier wave of vibration in itself
1... carrier wave
p).For example, one group of typical input signal comprises: input modulating signal, two or more fixed reference level and a sinusoidal carrier signal.The software element that said elements can be embodied as hardware circuit and/or carry out on integrated circuit.
Being provided for of front end analog 101 accepted and made input signal 115 meet its parameters/characteristics (for example, frequency range, filtering level, decline etc.), to guarantee the follow-up function of proper handling TDS ADC.Front-end operations can comprise: amplification, filtering, differential wave conversion, signal overall average, linear/non-linear combination and signal conversion.Exemplary front-end processing embodiment comprises input modulating signal low-pass filtering (anti-sawtooth), Sample & hold function, signal sum total portion and carrier signal is carried out to bandpass filtering.
Sequential discriminator element 103 receives the analog and digital signal of any amount that comes from front-end processing output.According to these output, sequential discriminator element generates one group and has the digit pulse that reflects input modulating signal and the transformation intersecting of reference signal.By way of example, function realizing method includes, but not limited to signal comparator and/or restriction output plus and blowup.
Sequential is distinguished and can for example by the sound and stabilizing equipment for time domain oscillation measurement, be undertaken, in on June 24th, 2011 application and title, be for example " measure the apparatus and method of the disturbance time domain of vibrating " the 13/168th, No. 603 at the equipment described in aesthetic state application for patent, will quote as proof in this completely.As described herein, in a kind of exemplary embodiment, oscillation device comprises control oscillator, drive circuit and the sensing circuit that is couple to switchgear (have at least 1 the first element and at least 1 the second element, it forms an on off state that (or a plurality of) close).Drive circuit provides a driving signal, and its configuration is used for causing the oscillation action that substitutes successively (or a plurality of) first element in a relevant lock control (or a plurality of) the second element.In one approach, drive signal to comprise to open or close time lock control (or " bang the ") signal of (for example periodically).In another approach, oscillator is to drive in a continuous manner, as changed wave function by the time.When the first element of switch and the second element are in line, sensing circuit just generates triggering signal, the on off state that indication is closed.In exemplary implementation method, use two electrons tunnel electrodes (fixing with movably) as switch, and in the position of the switch that electrode arrangement is being closed time, signal comprises wears tunnel discharge pulse by what approach that electrode tip causes.Obtain cycle of oscillation by the time interval of measuring between continuous trigger event (indication oscillator is by a reference position), thereby can derive the external force to equipment effect.
Control logic 109 provides signal arbitration and the digital processing of digital pulse signal.For example, function square can change into input signal 1 Digital Logic type needing above (LVDS, PECL etc.) or any signal combination is used to combinational logic (AND, OR, XOR, NOT etc.).
Time/digital translation (TDC) element 111 changes into a plurality of input digit pulses the correlation timing event representing with digital value (integer, floating number etc.).By way of example, this element can comprise application-specific integrated circuit (ASIC) and/or field domain programmable gate array (ASIC/FPGA) base apparatus and based on vernier scale interpositioning (for example, ACAM Messelectronic gmbh, Friedrich-List-Strasse4,76297Stutensee-Blankenloch, Germany; Device feature number: business industry & solution GP21).
TDS ADC comprises algorithm processing logic portion 113, and it processes TDC numeral sequential value and from the definite out of Memory of other system element, and the instant digital value that generates the input modulation data that are illustrated in specified point.User's application can be specified used specific algorithm.For example, TDS algorithm can comprise the application of specific mathematical formula (for example mathematical expression of table 2), and its ratio in conjunction with various sequential interval generates representing of input modulation source with the sampling interval by rule.As additional example, TDS algorithm also can adopt the form of curve routine, wherein can rebuild model or the demonstration that input modulation is originated by sequential with reference to intersection information.
With reference now to Figure 1A,, describe time domain in detail and switch analog/digital conversion method.In order to rebuild the impact of input signal on carrier wave, thereby in order to measure input signal, by modulating signal (that is, carrier wave adds input) and the comparison of known reference level.In one embodiment, with reference to level, comprise the voltage V selecting in advance
1(with solid line 104, representing), it is within the total voltage scope of modulating signal.When modulating signal waveform intersects with any one of reference voltage level, just there is a trigger event.In a kind of variation, each trigger event causes pulse to be generated and a counter to be opened or that close.This be by any can generating digital pulse or reach from the mechanism that binary bit 0 switches to 1 (vice versa).Counter can then pass through generated pulse or by triggering opening/closing from the leading edge of transformation of numeral 0 to 1 (vice versa).TDS method of measurement described in Figure 1A need to be known carrier amplitude and frequency (cycle), to resolve input signal, as shown in from mathematical expression 2.
The exemplary embodiment of Figure 1B comprises combined circuit, and it combines input signal and carrier signal and uses single with reference to level.The modulating signal of addition for example can deliver to comparator or form detector (as below about as shown in Fig. 1 E and as described in).The modulating signal V (t) that each comparator is relatively received and each self-generated reference signal (V in Figure 1B for example
1).Reference signal V
1be to be configured in the stable level that is selected from suitable appropriate value, and there is the reference position value in the voltage range of addition modulating signal.Control logic square receives comparator and exports and generate trigger event (as before about the trigger event 110 as described in Figure 1A) separately.Trigger event is reacted, control logic start/stop counter square, its configuration has been to infer time interval T with input clock pulse
1during.The output meeting time of delivery (TOD)/digital quantizer of counter square, it provides the numeral in the time interval between continuous trigger pulse.According to mathematical expression 2, need carrier amplitude and frequency with according to for the single time interval T with reference to level TDS ADC implementation method shown in Figure 1B
1measure and rebuild input signal.Carrier amplitude and frequency can be obtained by variety of way, for example, use calibration data or special measurement passage.
Fig. 1 C-1D has shown the time domain switching analog/digital conversion of using two known reference signal levels.In one embodiment, with reference to level, comprise the voltage V selecting in advance
1and V
2(with the solid line 104,106 in Fig. 1 C, representing), it is within the total voltage scope of modulating signal.When modulating signal waveform intersects with any one of reference voltage level, just there is trigger event.In a kind of variation, each trigger event causes pulse to be generated and counter to be opened or that close.This be by any can generating digital pulse or reach from the mechanism that binary bit 0 switches to 1 (vice versa).Counter can then pass through generated pulse or by triggering opening/closing from the leading edge of transformation of numeral 0 to 1 (vice versa).
Fig. 1 C and 1D show respectively to two different input signal V
input1and V
input2value changes the measuring period corresponding to the modulation waveform intersecting with reference to level.The first input (as shown in Figure 1 C) generates corresponding and level V respectively
1and V
2intersect and generate the time interval T of trigger event 210,212
r1and T
r2.The second input (as shown in Fig. 1 D), toward positive amplitude direction skew modulation waveform, therefore generates the time interval T that corresponds to respectively trigger event 220,222
1>T
r1and T
2>T
r2.The input signal that (toward negative amplitude direction, does not show) skew modulation waveform on the contrary, downwards can generate less time interval (not shown).The time cycle of the modulation waveform that corresponds to and intersect with reference to level can be merged to obtain modulation amplitude of wave form (and input signal), as described in detail below.
Fig. 1 E shows is the functional schematic of a kind of embodiment of the example T DS adc circuit of assignee's institute's implementation method and the experimental example of switching analog/digital conversion method for described time domain before.Equipment 127 comprises to simulate the random waveform maker (for example Agilent33522A) of modulating signal V (t).Modulating signal can be delivered to form detector from waveform maker, and its usage example dual comparator LM319 realizes, and is configured to detect with reference to level intersection and generates trigger event (for example, pulse).The output of form detector can be delivered to and carry out time interval T
1, T
2, T
3, T
4time/digital quantizer (TDC) ACAM GP21 measuring.
The output of TDC is delivered to calculating square (microwafer microcontroller (MCU) PIC24F) on serial data chain, and it also receives high-pass filtering modulating signal as synchro indicator.MCU is used for example any one of following mathematical expression 5-18 to carry out inferring of input signal.
Fig. 1 F shows the circuit diagram of the TDS ADC that corresponds to Fig. 1 E illustrated embodiment.
Fig. 1 G shows the schematic diagram of commercial available time/digital quantizer TDC GP-21 of the exemplary ADC embodiment that is used as Fig. 1 E part.
Fig. 1 H shows the exemplary implementation of sampling equipment, together with the ADC equipment with Fig. 1 E illustrated embodiment, uses.Time domain is switched ADC sampling equipment and is comprised FPGA (Field Programmable Gate Array) square (being painted to be full of the polygon of dot pattern in Fig. 1 E), as field domain programmable gate array FPGA, programmable logic device (PLD), microcontroller or be configured to carry out any other computer equipment of machine readable code.In a kind of variation, control logic is to realize in the FPGA that supports embedded microprocessor or digital processing unit.
With reference now to Fig. 1 I,, show the sequential chart that switches the exemplary operation order of analog-digital converter configuration about the time domain of Fig. 1 H.
Fig. 1 J shows by the carrier waveform of varying input signal modulation, is wherein compared to the input signal V that corresponds to curve 133
in0, curve 131 corresponds to input signal V
in1more greatly on the occasion of.At V
in0in=0 curve, side-play amount (139) meets V
in1.Data in Fig. 1 J show that the change (DC skew) due to input signal causes the change in the time interval between continuous trigger event (to each with reference to level), as horizontal arrow 141,143 indications in Fig. 1 J.
In another kind of embodiment, use three reference signal level (V
1, V
2, and V
3) measure modulating signal amplitude, as shown in Fig. 1 K.In a kind of variation, three intersections of the modulation waveforms with reference to level generate four time interval T
1, T
2, T
3, and T
4, corresponding to trigger event 230,232 and 234.That is, time interval T
1, T
2, T
3, and T
4to form based on each intersection with reference to level with reference to level in other that has nothing to do.(not shown) in another kind of variation, the time interval is that the combination based on continuous trigger event forms, for example, by with Fig. 1 K in reference level V
1, V
2, V
3the modulation waveform 132 intersecting generates.That is, trigger event 122 can with trigger event 120 combinations, to measure modulation waveform etc.Although with reference to level V
1and V
3be shown as and be symmetrical in level V
2if, but with reference to level V
1, V
2, V
3within the scope of the expection peak swing of modulating signal, can use other reference signal level configuration.That is, for the embodiment of Fig. 1 K, V
1be less than (lower than) A
max, and V
3be greater than (higher than) A
min.
In can be applicable to the another kind of implementation method that unipolar signal measures, all must be positive (or negative) and identical with the polarity of carrier signal with reference to level.In a kind of variation, if modulating signal undermigration is to prevent switching under what Voltage Reference in office, the positive carrier voltage with enough amplitudes just can be used and negative input signal combination.
In the embodiment of the conversion method shown in Fig. 1 C, 1D and 1K, carrier signal A
camplitude need not to be known.Time interval T
1, T
2, T
3, and T
4provide two independent presumed value of modulating signal amplitude: one approaches waveform maximum A
+, and another approaches waveform minimum value A
-.
Vibration maximum carrier amplitude is around to raise up with reference to level V by combination
1stagger(ed) cycle T
1with with reference to level V
2stagger(ed) cycle T
2try to achieve, as follows:
(mathematical expression 3)
Wherein
D
0with reference to the distance (trigger interval) between Yu Zheng trigger point, trigger point;
P period of oscillation, is defined as P=T
1+ T
3;
A
+vibration maximum carrier amplitude around;
T
1raise up with reference to level V
1stagger(ed) cycle; And
T
2with reference to level V
2stagger(ed) cycle.
Similarly, vibration minimum value carrier amplitude is around to decline with reference to level V by combination
1cycle T
3with with reference to level V
3stagger(ed) cycle T
4try to achieve, as follows:
(mathematical expression 4)
Herein:
P period of oscillation, is defined as P=T
1+ T
3;
A
-vibration minimum value carrier amplitude presumed value around;
T
3decline is with reference to level V1 stagger(ed) cycle; And
T
4with reference to level V
3stagger(ed) cycle.
In conjunction with mathematical expression 2 to 4, obtain two independent input signal presumed value, as follows:
(mathematical expression 5)
(mathematical expression 6)
The basis that mathematical expression 5 and 6 provides time domain according to an embodiment of the present to switch analog/digital conversion.Input signal measurement needs time interval T
1, T
2, T
3, and T
4accurate presumed value, as shown in Fig. 1 C and mathematical expression 5 and 6 before.The accuracy of measuring from mathematical expression 5 and 6, TDS ADC is to depend on accuracy poor between reference signal level, rather than depends on that each is individually with reference to the absolutely accurate of level.This feature of TDS ADC is conducive to improve transducer long-term accuracy and stability, because eliminated the potential indivedual reference signals drifts that cause due to aging, temperature or other impact.
In a kind of variation, the cycle of carrier frequency is by measuring 2 continuous trigger points and two voltage quasi position V
1and V
2(or V
2and V
3) between voltage difference obtain.About approaching DC input signal (as described in mathematical expression 2 before), can use any two continuous time intervals (corresponding to same reference level) to measure the cycle of carrier signal.About time variation input signal (described in below mathematical expression 20 and 21), be to use zero crossing method to obtain carrier cycle.This is necessary, because time due to input signal is changed and understood corresponding to the time interval with reference to level (except 0) " skew ".
In another kind of variation, carrier cycle is that any two by the average overtime cycle (than carrier cycle 10 to 100 times in length) are intersected (it is equivalent to same reference level) modulating signal with reference to level continuously and recorded.Said method changes to DC and time the accurate presumed value that input signal provides carrier cycle.
With reference now to Fig. 1 L,, it has shown for sinusoidal wave sampling parameters.By these parameters, build the presumed value of the amplitude of the signal input of being combined with carrier wave.Then by these presumed value, obtain signal input amplitude and do not use the formula in mathematical expression 2.In various embodiment of the present invention, use input voltage (V
input) the substituting and mathematical expression independently of signal presumed value.This class mathematical expression includes but not limited to, as the mathematical expression in following table 2:
Table 2
Herein:
V
inputinput voltage
The cycle of oscillation of P carrier wave, (151 of Fig. 1 L, equaled T
5+ T
8)
V
4go up or descend the amount (Fig. 1 L 152) of reference voltage level
T
5-T
10cycle (153-158 of Fig. 1 L) between level intersection
The mathematical expression of table 2 can be used with mathematical expression 5 together with 6, or only uses other to generate the independent presumed value of applied signal voltage.
FPGA (Field Programmable Gate Array) square comprises comparator state buffer, and it couples corresponding to V
1and V
2the output channel of two comparators of reference signal.The control that the logic state of comparator can be delivered to counter finite state machine (FSM), Fig. 1 D corresponds respectively to cycle T
1to T
4operation latter half of of four cycle rate counters.Counter output is coupled to four buffers, and its configuration is for counting T1 to T4 during storage cycle respectively.During operation, modulation waveform is due to input signal V
inputimpact and change, therefore generate the trigger event (as shown in Figure 1 C and 1D) corresponding to reference signal level.Sensing square is that configuration is used for measuring for example, the time interval between continuous trigger event (, the trigger event in Figure 1A (210 and 212)), and obtains input signal with above-mentioned mathematical expression 2-6.The TDC of Fig. 1 M and MCU square are equivalent to the numerical portion of the ADC shown in Fig. 1 N.
Fig. 1 N shows according to an exemplary embodiment of the TDSADC equipment that comprises three reference signals of the present invention.Use two with reference to level (as shown in Figure 1 C and 1D), to provide additional trigger event (trigger event 114 in Fig. 1 C), so the quantity of doubling time interval sampling point (that is, 2 samplings of each cycle).When processing is rocked or when the time changes input, three voltage method are useful.
Then with reference to Fig. 1 N, ADC equipment 161 comprises in conjunction with square 163, the modulating signal that it combines input signal and carrier wave and generates addition.Modulating signal can be delivered to comparator or form detector or can production burst any device that from 1 to 0 or 0 to 1 state changes.The modulating signal V (t) that each comparator is relatively received and each self-generated reference signal (for example, V
1, V
2, V
3).Voltage V
1, V
2, and V
3perfect condition is stable, and can be set as any value suitable in the voltage range of addition signal.Control logic square receives comparator and exports and generate trigger event (as before about the trigger event 210,212,214 as described in Fig. 1 K) separately.Trigger event is reacted, control logic start/stop counter square, it is configured to use with reference to clock pulse and carrys out presumed value time interval T
1, T
2, T
3, and T
4during.The output of counter square can be delivered to time/digital quantizer, and it uses various applicable implementation methods (for example, FPGA or MCU implementation method) to provide the time cycle to measure.
In the another kind of embodiment shown in Fig. 1 O, the ADC square 173 of equipment 171 is for receiving and measure unmodified input signal, and the ADC square 175 of equipment 171 is for receiving and measure the modulating signal of addition.
Fig. 1 P has described the another kind of embodiment of TDS ADC equipment, and wherein the ADC square 175 of ADC equipment 181 receives reverse carrier signal, and ADC square 173 receives the modulating signal of addition.
Fig. 1 Q has described the another kind of embodiment of TDS ADC equipment, and it is similar to the ADC embodiment of Fig. 1 P.In the embodiment of Fig. 1 Q, the ADC square 175 reception carrier signals of ADC equipment 191, and ADC square 173 receives reverse addition modulating signal.
The ADC equipment configuration of Fig. 1 P and 1Q can directly be rebuild input signal according to the method shown in Fig. 1 R.Method shown in Fig. 1 R is used the measured time interval (for example, the interval T of two ADC squares (for example, the square 173,175 of the ADC181 of Fig. 1 P)
1, T
2, T
3, T
4) differencing, thereby obtain the numeral of input signal.Upper plate 193 in Fig. 1 R shows about input signal V
inputsignal waveform for the ADC square 173,175 of the ADC equipment 181 of delivering to of 0V.Lower plate 195 in Fig. 1 R shows about input signal V
inputsignal waveform for the ADC square 173,175 of the ADC equipment 181 of delivering to of 0.3V.
Those skilled in the art will understand when realizing the embodiment shown in Fig. 1 N-1Q with three level TDS ADC.Yet, can also use and utilize single level, two levels (for example, the ADC embodiment of Figure 1B, 1M) or any other can implement any conversion equipment of the reference level of quantity.
Various implementation method of the present invention is utilized full-wave rectification.Full-wave rectification be signal negative is reflected to corresponding only on the occasion of the process of (that is, the absolute value of signal).This process is to be applied to TDS ADC with the requirement of the signal comparison that reduces by half, and therefore can reduce for the hardware with reference to intersection time discrimination.Fig. 2 and 2A show take the figure that full rectified wave is characteristic.Reflected wave and positive ripple both with signal with reference to level (222, V
reference) (meaning of the reference in symbol is reference herein, and the meaning of the reference in specification and accompanying drawing is all identical, for making symbol complete, please allow to omit the translation of this word) intersection.From the detailed part that expands (Fig. 2 220), can find out that the cycle by measuring between the reference level of intersecting with rectified signal ripple (Fig. 2 A 224,226) is obtained time sequence parameter (T
11, T
12, t
1, t
2, t
3, t
4, t
5, t
6).In these embodiments, can with reference to level, replace given two or more levels of accelerating of may level intersecting with single.In the exemplary embodiment, input signal can be derived by following mathematical expression:
(mathematical expression 19)
Herein:
V
inputinput voltage
The cycle of oscillation of P carrier wave (Fig. 2 A 228)
V
referencethe amount of reference voltage level (Fig. 2 and 2A 222)
T
11and T
12cycle as defined in Fig. 2 A (230,232)
It should be noted that it is to propose by way of example mathematical expression 19, and can use other independent presumed value of input voltage, include but not limited to that those are according to the distortion of using the mathematical expression 5-18 of single reference voltage.In addition, full-wave rectification system can be used two or more independent signal level presumed value of accelerating with generation with reference to level (for example, increase the realization of measurement accuracy, calculating operation average technology or carry out noise compensation method as described below).Electronics demand can also be simplified/reduce to full-wave rectification basic system.Reduced so associated noise effect.In addition, with reference to level drift impact, can with reference to level, reduce because of reducing the required of quantity.In the embodiment shown in Fig. 2 and 2A, use sampling and keep order 234 to keep the amount of rectified wave constant during the sampling period.As described below, use this process to slow down some distortion in waveform sampling process.
distortion and noise compensation
In various implementations, output harmonic wave distortion can be sampled and be kept (S/H) function to alleviate by use.The specific sampling of S/H function regulation level continues minimum interval and can not get back to default level (for example, zero level), or is regarded as single-point sample.Continuing from the output of continuous variation input generation piecewise constant of sampling level.In some variation, minimum duration can be tuning with reference to the sampling period.Or the duration can be based on other factors (as the time constant about sampled signal, TDS carrier cycle or system noise become to grade).Given one sinusoidal carrier signal purely, when input modulating signal not fixedly time, can for example, cause distortion because using some TDS ADC algorithm mathematical expression (mathematical expression 7) to process time series data in specific assignment sampling interim.S/H operation becomes piecewise constant to export (S/H is also referred to as zeroth order and keeps and/or tracking and holding device) from a specific input signal with sampling clock pulse next life.The elimination time changes the relevant harmonic distortion composition of input modulating signal to some implementation methods of S/H completely.
Above-described time domain is switched in analog/digital conversion method, supposes virtual fixing (approaching DC) input signal V
input(referring to mathematical expression 2).In a kind of implementation method, in order to make said method be applicable to Measuring Time, change input signal (it changes on the time scale in carrier signal cycle that can match in excellence or beauty), time is changed to input signal along with the one-period P of carrier signal is modeled as linear change, as follows:
(mathematical expression 20)
Herein:
V (t) modulating signal;
V
dC_inputthe DC composition of input signal to be measured;
V
aC_input(t) Time Dependent of input signal to be measured (AC) composition;
the relevant carrier signal phase with reference to clock pulse;
A
ccarrier signal amplitude; And
ω
ccarrier signal radial frequency ω
c=2 π f
c.
With respect to short time increment dt, continuous mathematical expression 20 can be expressed as discrete form:
(mathematical expression 21)
Wherein:
T
i, t
i-1continuous discrete time example, t
i>t
i-1;
V
itime t
itime modulating signal;
A
citime t
itime carrier signal amplitude;
V
dC_inputthe DC composition of input signal;
V
aC_input_itime t
itime Time Dependent (AC) composition of input signal;
P carrier cycle;
time t
itime carrier signal phase;
ω
citime t
itime carrier signal radial frequency.
About time variation input signal, mathematical expression 20 and 21 has illustrated because input signal is along with time V
input(t) change and whole modulating signal V (t) of change.
Fig. 3 shows a kind of embodiment of the time variation input signal method of measurement of using discrete mathematics formula 21.Green line is carrier signal, only for contrast.Blue signal is the modulating signal that displaying time changes input signal.It acts on meeting " skew " time cycle, so must use how general mathematical expression 21 to solve sampling and the holding circuit of mathematical expression 5 and 6 (or have).
In another embodiment of the invention, use in conjunction with sampling and the holding circuit of mathematical expression 5 and 6 and come Measuring Time exactly to change input signal.The object of sampling and maintenance square is between ADC sample, generating accurate DC level continuously, thereby makes mathematical expression 5 and 6 effective.Suppose that input signal can not change (for example, overtime interval of delta t=t in essence between any two continuous samples
i-t
i-1).It should be noted that answer mathematical expression 20 and 21 does not need sampling and holding circuit.
With reference now to Fig. 3 A,, it has shown for realizing a kind of embodiment of the broad method 320 of S/H technology.In step 322, in S/H circuit, receive and comprise the analog signal by the input signal of carrier modulation.In step 324, there is a trigger event (for example, reference voltage level intersection etc.).Once generation trigger event, measure analog signals level (step 326), and keep measured waveform in the duration of measuring level and reach S/H circuit (for example,, until adopt the part etc. of another sample, carrier cycle) (step 326).Then, measured waveform is passed to other TDC circuit, for analyzing further (step 328).Once obtain TDC output, sequential value just changes into the voltage quasi position equivalent using with reference to the given value of level and carrier frequency from time domain.Broad method 320, for example, used together with the circuit 370 shown in following Fig. 3 E.
With reference now to Fig. 3 B and 3C,, it has shown the effect of the exemplary embodiment of sampling and maintenance technology 320.What Fig. 3 B showed is the simulation of not using S/H technology.Input signal 332 and harmonic wave 334 are both in output signal.In the analog result shown in Fig. 3 C, implementation method 320 and suppress harmonic wave 334 completely, and input signal 332 still exists.
The another kind of embodiment 350 that has shown TDS ADC in Fig. 3 D.Provide external analog signal 352 to system 350.Input signal is used to sampling and holding device 354, cause Piecewise Constant numerical value to be held fixed intervals (two doubling times with carrier signal).The sinusoidal carrier signal of synchronizeing with sampling interval (for convenient) can be added with sampling input signal.This result is Full wave shape, and it carrys out rectification with rectifier/comparator square 356 and compares with generating digital time sequential pulse with a fixed reference level.Pulse for example, by time/digital switching device 358 (, ACAM Messelectronic gmbh, Friedrich-List-Strasse4,76297Stutensee-Blankenloch, Germany; Parts number: GP21) receive, and change into value (t digit time of one group of equivalent
1, t
2, t
3, t
4, t
5, t
6); Use the TDSADC algorithm element 360 representing with mathematical expression 19 to process the time series recording, thereby generate output digital value.In this example, algorithm is to realize with software, and output valve is floating number.
The high signal authenticity of S/H device has been guaranteed maximum signal to noise ratio and low distortion conversion.With reference to figure 3E, shown exemplary S/H circuit 370.S/H circuit shown in Fig. 3 E can be for example used with together with the illustrative methods 320 of described before Fig. 3 A or other.
By two switches of closing (372 and 374) (switch in Fig. 3 E: be described in open position), differential amplifier 376 drives differentially and keeps capacitor 378 loads.With minimum distortion, follow the trail of input signal 380 and add due to differential amplifier and the noise that keeps capacitor to cause.Measuring amplifier 382 will have seldom or be sent to without the electric charge of the capacitor of pressure drop distortion the Low ESR output driving device of circuit.
By two switches of opening (372 and 374), owing to keeping the high dissipative shock wave of capacitor 378 and the input of the high impedance of measuring amplifier to maintain the electric charge keeping on capacitor 378.The electric charge that keeps on capacitor can measured amplifier be sent to output driving device (have equally seldom or without pressure drop) constantly.
In a kind of exemplary embodiment, by S/H control device 386, open or close switch (372 and 374) with generated frequency cutoff signal.With maintenance capacitor, carry out the result of integration cutoff signal, cause the differential addition of signal.
Fig. 3 F has shown shown in relevant Fig. 3 D and the circuit diagram of described TDS ADC apparatus embodiments.
Thereby Fig. 3 G has presented the data that relevant utilization sampling and keeping method generate the TDS ADC simulation of quasistatic DC modulating signal in each cycle of oscillation.Data in resulting Fig. 3 G are as follows: modulation (amplitude of 50Hz 20%), carrier signal: 1.5V peak value, 1.5VDC, frequency 500Hz.Every two carrier cycles (corresponding to two with reference to level ADC configuration) just calculate sample of signal, as described in Figure 1B above.
In a kind of variation, there is two samplings and holding circuit, one for positive and another for negative cycle of oscillation, thereby make the sampling rate of TDS ADC double.
Useful S/H technology tackles signal or the caused distortion in measurement itself because recording.Yet other distortion can be caused by carrier waveform itself.Any of carrier wave do not wish that distortion is by the corresponding distortion of the signal that causes calculating.While eliminating distortion by algorithm, can compensate to eliminate the distortion from carrier wave with the multinomial having about the particular factor of the distortion of carrier wave.For example, correction signal V ' has following relation with respect to distortion value V
V '=V-a
1v
2-a
2v
3-a
3v
4-a
4v
5...-a
nv
n+1(mathematical expression 22)
Correction coefficient can be carried out presumed value according to the measurement of carrier wave distortion.Can initial setting and calibrate carrier wave distortion and correction coefficient, or can monitor carrier wave distortion periodically to proofread and correct to change temporal carrier wave distortion between the operating period of device.In addition, correction coefficient is relevant to carrier amplitude fatefully.When monitoring carrier amplitude, can correspondingly upgrade coefficient.Carrier amplitude can for example be calculated to be:
(mathematical expression 23)
Make R represent that carrier amplitude is from initial amplitude A
0variation:
(mathematical expression 24)
Can be by compensate junior three harmonic wave of carrier wave in proofreading and correct the input signal values that mathematical expression comprises that the relation of R recording.As an example, proofread and correct three harmonic waves of carrier wave, and consider the variation of carrier amplitude:
(mathematical expression 25)
In order to proofread and correct four harmonic waves of carrier wave, can use following correction mathematical expression:
(mathematical expression 26)
As long as the distortion of carrier wave (quantity of carrier wave harmonic wave and size) is known, the distortion that the signal that recoverable calculates produces.
With reference now to Fig. 4,, shown a kind of embodiment for the broad method 400 of carrier wave distortion compensation.In step 402, in input, receive modulating signal.The presumed value time changes amplitude, and with it, infers input voltage (step 404, does not add the input signal of carrier wave) successively.The time in the carrier wave composition of signal of adding to changes and can cause harmonic distortion in inferring the process of input voltage.Should compare with keeping method 320 with sampling, the distortion that time changes or its measurement causes in input voltage itself had been described.Therefore, in step 406, use the multinomial tabular form (referring to mathematical expression 26) of the carrier wave with predetermined correction coefficient, alleviate carrier wave harmonic components impact record signal.
In Fig. 4 A-4C, shown the example results of the method for this distortion correction.Fig. 4 A has shown two simulation outputs, and one does not have correcting distortion, and a distortion that has correction to be caused by the carrier wave with single incoming frequency.In two simulation outputs, present carrier signal input contribution 412.Yet harmonic wave 414 can exist in output originally, but cannot in compensation output, see.Fig. 4 B and 4C have shown paired data group, and its displaying carrys out correcting distortion with a plurality of incoming carrier frequencies (a plurality of peak value 412) with to change carrier amplitude.
In some implementations, can associated methods 320 and 400, along with the compensation of input/measure distortion and carrier waveform distortion is carried out to presumed value.
The resolution of analog/digital conversion is relevant with spectrum saturation and the noise properties of carrier wave.The uncertainty of carrier frequency (for example, because of spectrum and noise composition) causes accuracy to reduce, and the parameter of wherein using in inferring input signal amplitude can be based on this accuracy.A method that reduces this factor is band-pass filter carrier wave, and this is the predetermined process weakening by the frequency content of frequency range outside that makes filter.In general, the intermediate frequency of passing through frequency band and carrier wave of selective filter is overlapping.Bandpass filtering can reduce from the amplitude of the frequency content of the fundamental frequency disengaging of carrier wave (and distortion contribution).
Fig. 5 is presented at and realizes in bandpass filtering system, records the simulation reduction in input signal amplitude resolution.The input signal calculating is to simulate as the input of simulation with the carrier wave input noise recording.To carrier wave, digital filtering is used in input.
A plurality of input signals can be by adding each input signal common carrier waveform realizes.Add that the input signal of common carrier wave is for example through time, phase place or channeling.Or, can use multiple phase or frequency-offset carriers.Each input signal/carrier combination can each be measured with the ADC separating, or carrys out time interleaving with single ADC device.
Use a plurality of ADC passages can be conducive to the measurement accuracy of signal.For example, a plurality of carrier waves that simultaneously record can be combined with input signal, each passage of measuring the carrier wave of out of phase.Or a plurality of phase-shift type examples of input signal can add a common carrier wave.A plurality of ADC passages can carry out differential wave technology, and deduct charge carrier noise.A plurality of ADC passages are further average computation also, and the measurement accuracy of promoting some type input signal.
Charge carrier noise can reduce by realizing two or more ADC measurement passages the impact of conversion resolution.In a kind of exemplary embodiment, by input signal, add that the measurement in the time interval that carrier wave generates is to measure on a passage, and measure the same carrier wave that there is no input signal with second channel.The uncertainty recording in the time interval in two ADC passages can be associated with the common mode noise from carrier wave.After quantification, with regard to removable this uncertain composition.In Fig. 6, show a kind of conversion resolution of exemplary simulated system is improved.In this example, sample and use actual carrier waveform as the basis of analog result.For this example, the benefit that known carrier wave uncertainty deducts can be with suitably to filter in advance carrier waveform relevant.
Fig. 6 A has presented a kind of embodiment of TDS ADC, and it provides carrier frequency and amplitude side by side and is independent of the measurement that input signal is measured.The ADC equipment of Fig. 6 A comprises two ADC squares 602 and 604 (the ADC square 123 as shown at front Figure 1B).ADC square 602 is for receiving and measure the modulating signal of addition, and square 604 use receive only carrier signal.ADC equipment 610 further comprises TDSADC and processes square, for carrying out common mode noise presumed value and rejection and input signal presumed value algorithm (for example,, according to mathematical expression 5 and 6).ADC disposes and is beneficial to the means measurement of the providing convenience use volume in mathematical expression 5 and 6 that coexists and carries wave period and amplitude as shown in Figure 6A.
Fig. 6 B has shown the schematic diagram of a kind of embodiment of the time domain simulation/digital switching facility that uses two reference signal levels.The equipment 121 of Figure 1B comprises combined circuit, and it combines input signal and carrier wave.The modulating signal of addition can be delivered to comparator (or the form detector as shown at front Fig. 1 E).The modulating signal V (t) that each comparator is relatively received and each self-generated reference signal (for example, V
1, V
2).As mentioned above, with reference to level V
1and V
2should be stable ideally, and can be set as the suitable any value in the voltage range of addition modulating signal.Control logic square receives the trigger event separately (as before about the trigger event 110,112 as described in Fig. 1 C) that comparator is exported and generated.Trigger event is reacted, and control logic start/stop counter square, infers time interval T with input clock pulse
1and T
2during.The output of counter square can be delivered to time/digital quantizer, and it provides the numeral in the time interval between continuous trigger pulse.
Fig. 6 C has presented a kind of embodiment of TDS ADC, and it is configured to provide the measurement of carrier frequency and amplitude simultaneously and has nothing to do and measures in input signal.ADC equipment 680 comprises two ADC squares 682 and 684.ADC square 682 is for receiving and measure the modulating signal of addition, and square 684 is for receiving only carrier signal.ADC equipment 680 further comprises TDSA and processes square, and it realizes common mode noise presumed value and rejection algorithm.The ADC embodiment of Fig. 6 C is conducive to the positive and negative cycle with mathematical expression 5 and 6 is carried out correction calculation carrier wave as mentioned above.Although in the modulating signal cycle that may only measure positive and negative with two references, due to symmetry and the reference signal configuration of modulation vibration, preferably use three references.Thereby disposing is like this beneficial to slope predetermined speed and the accelerating project (supposing that voltage replaces y axle) of each side of measuring exactly modulating signal, therefore can measure more accurately fast-changing input signal.
ADC configuration as shown in Figure 6 C for example can be conducive to, by relatively the time interval of carrier wave (, measuring with ADC square 684) is carried out common mode noise presumed value (and compensation) with the time interval (measuring with ADC square 682) of modulation carrier wave.Because two ADC squares 682,684 are all used identical signal reference, therefore can infer and remove common mode noise.Moreover, the ADC of Fig. 6 C dispose be beneficial to the means measurement of providing convenience coexist use in mathematical expression 5 and 6 carry wave period and amplitude.
The implementation that also has various two channel measurements based on other type.With reference now to Fig. 7,, shown a kind of exemplary differential wave technology 700.In step 702, on first passage, measure the time interval (that is, with reference to the cycle between level intersection) that carrier wave adds input waveform.In parallel step 704, on second channel, measure the time interval that deducts input waveform corresponding to carrier wave.Then deduct mutually this result and generate the presumed value (step 706) that twice signal is inputted level.In some variation, after inferring input signal level, deduct this result.In other variation, be before inferring input signal level, to deduct this result.With reference now to Fig. 7 A,, shown the effect of method 700.Show the pith that method 700 is possessed signal input 722 and eliminated all even harmonics 724 and generate harmonic distortion by simulating.Yet, still leave odd harmonic 726.
With reference to figure 7B, this functional schematic has shown the line pattern about the exemplary embodiment 780 of variate circuit.In this embodiment, carrier wave and signal are divided into two parallel paths (782 and 784).Voltage adder 786 is used in a path, and another uses voltage subtracter 788.Then modulation Waveform Input is measured individually to TDS ADC790, and the relatively output in two paths.Comprise that other differential architecture of two or more passages and the various combinations of input signal and carrier wave can more reduce harmonic wave, and do not need curve or sampling and maintenance.
In some variation, use other differential wave/carrier combination.In these examples, by the carrier waveform of (reverse amplitude) input signal mixing plus or minus of plus or minus.This produces four kinds of possibilities (732,734,736,738), and it is presented in Fig. 7 C.These different combination producings change independent time affair, and it for example can use in method 700, to slow down the distortion occurring in the various stages (, sampling, measurement, carrier wave impact etc.) in ADC process.
With reference now to Fig. 7 D,, shown and can point out the example process with reference to the situation of level drift by differential wave technology.Differential technique (for example process 700 of Fig. 7) difference carrier shift or signal are offset and drift about with reference to level.Variate is difficult for because of the change of carrier wave or signal skew influenced (that is, align/positive modulating signal of sequential value and negative/negative modulating signal can change in an identical manner).Yet sequential value is offset with reference to level drift value (for various differential combinations) difference by making.Relatively these skews can be used to point out drift about with reference to level.
Some embodiments of the present invention have been carried out calculating operation average method.Exemplary calculating operation average technology for example comprises: technology, (ii) another kind of the data point that (i) a kind of combination is generated by TDS ADC algorithm relates to the technology of average time interval before using signal presumed value algorithm and (iii) based on a plurality of technology with reference to level.
In conjunction with the point being generated by TDS ADC, comprise a plurality of presumed value (for example, parallel many measurements in repetitiousness/fixed signal or on single signal) that generate signal level, and then that result is average.
The average computation time interval comprises previous rolling average during the course and calculates distance, rather than just moves after by the time completing presumed value.A plurality of measurements at average computation interval itself, and generate from average computation time interval value the presumed value that signal is inputted.In this example, a plurality of horizontal surveies of calculating operation average based on same signal and/or a plurality of continuous measurements of repetitiousness/fixed signal.It should be noted that in some cases, the signal that the time more much larger than sampling rate changes can be considered fixed signal.
It is a plurality of that with reference to level permission, service time, the calculating of input signal was not carried out at interval relatively with noise.Quantity with reference to level increases, and the quantity of measurement and average quantity just increase thereupon.In a plurality of situations with reference to level, can promote measurement accuracy because increasing some circuit complexity.Yet, must not reduce according to carrying out a plurality of calculating operation averages the ability of system frequency range and weigh complexity and advantage.
Fig. 8 has shown the view that the noise level of the calculating operation average technology of using a plurality of uncorrelated measurements based on generation sequential interval is improved.The improvement that shows noise level in figure approaches its theoretical limit.Another calculating operation average technology in Fig. 8 A is based on increasing the sampling period.This quantity that can increase is a little carried out calculating mean value.Yet, can increase like this system sampling minimal characteristic during.Therefore, be equivalent to like this reduce system frequency range.In general, the sampling period can be adjusted according to carrier cycle.Sampling period is compressible to a half period of carrier wave.This can be used to increase calculating operation average point.In other implementation method, also can reduce the start-up time of system with this half period measurement, to reduce resource consumption.
With reference now to Fig. 8 B,, shown the exemplary embodiment of using the sampling method of shorter measuring period.This embodiment can increase and measure frequency range than other compensation method, because do not need filtering or frequency range limiting circuit.Because the system frequency range increasing allows shorter measuring period, thereby the power cycle between measuring can reach saving electric power.For example, or these can be used to measure time sequence parameter (, the half period measures) on even number short period interval to increase sampling frequency compared with the short period.In addition the reduction noise, can control system suffering reaches increase resolution.
curve
Various implementation method of the present invention is utilized curve fitting technique.The various implementation methods of these technology are used to reach the distortion of reduction algorithm, promote input presumed value accuracy and/or the input level of timely presumed value on any point.Above-mentioned curve fitting technique includes, but not limited to Levenberg-Marquardt presumed value, Nelder-Mead monosomic analysis and polynomial curve fitting technology.
By way of example, fitting of a polynomial procedure declaration is as follows.In this example, carrier wave is sinusoidal waveform, and triggering times is to be added to generate according to carrier wave and input signal to be measured.Correlation function and parameter display are in Fig. 9.Trigger point 902 is used to generate the matched curve of the whole modulating signals of performance (904, whole fitting of a polynomials).Carrier wave 906 is modeled to the multinomial presumed value of SIN function.Whole fitting of a polynomials are deducted to carrier wave to generate external signal input 908.For this process, all modulating signal 904 (signal and carrier wave) is defined by:
(mathematical expression 27)
Due to trigger event, to V
total(t) (meaning of the total in symbol is summation herein, and the meaning of the total in specification and accompanying drawing is all identical, for making symbol complete, please allow to omit the translation of this word) produces " least square " fitting of a polynomial 904.The trigger point measuring and associated reference level thereof form a matrix [figure]:
(mathematical expression 28)
By following relationship, obtain matrix P:
(mathematical expression 29)
Then by the following input signal 908 of inferring:
(mathematical expression 30)
Carrier wave 906 is herein:
(mathematical expression 31)
Utilize the analog result of above-mentioned polynomial fitting method to be presented in 9A figure.About approaching the region of trigger point, for inferring this example of signal input, reaching the mean error of 1.5ppm.
with reference to level
In various embodiments, can use input signal itself (or treated input) to replace as a reference fixed reference source.Input can add or deduct, be multiplied by or divided by fixed reference source.Or, phase-shift type carrier wave can in conjunction with or replace fixed reference.By these possible methods, the time interval that can be used for calculating input signal.On-fixed reduces by carrier wave or with reference to the common mode noise causing and due to the advantage of the error causing with reference to drift with reference to providing.Figure 10 has shown with input signal itself, to replace as a reference the exemplary embodiment of fixed reference level circuit 1050.In signal reference example 1000, the event of intersecting by carrier wave and signal input voltage level defines the sequential cycle.Sequential between these intersection events is along with voltage quasi position rising or the decline of signal input change.On the contrary, if the voltage quasi position of signal remains unchanged, sequential also remains unchanged.Therefore, these sequential values can be used to infer current signal level.
Although use two or three reference signal levels at front some described embodiment, those skilled in the art are not limited to above-described embodiment by understanding implementation method of the present invention, and can use the reference level of any feasible number.Extra reference level provides extra time sequence information, by promoting the measurement of modulation and input signal.Moreover extra signal level is promoted converter frequencies response.Time changes input signal meeting " skew " modulated carrier signal and may affect the quality (for example,, referring to mathematical expression 5 and 6) of signal waveform fitting function.The additional triggers event that is associated with additional reference level can access good signal waveform matching.
waveform analysis
Figure 11 has shown the exemplary screen grabgraf of the form detector in the time interval between two continuous trigger events.These intervals can along with input modulating signal input signal DC bias voltage level function and change.
By the time domain described in front mathematical expression 5 and 6, switch analog/digital conversion method, can measure the input signal of irrelevant carrier signal amplitude and/or frequency.Figure 12 and 12A have presented the resulting analog result of exemplary ADC equipment with Figure 11 embodiment.Figure 12 has shown that the RMS voltage (volt (V) of usining is unit) of obtained input signal is as the function of carrier amplitude (take V as unit).Data declaration shown in Figure 12 TDS ADC method of measurement of the present invention be difficult for being subject to carrier amplitude to affect.Figure 12 A has shown that the RMS voltage (usining V as unit) of obtained input signal is as the function of carrier frequency (YiHzWei unit).Data declaration shown in Figure 12 A TDS ADC method of measurement of the present invention be difficult for being subject to carrier wave frequency influence.
Analog result shown in Figure 12 and 12A has confirmed that reconstruction (measurement) signal is difficult for being subject to the amplitude of carrier signal and/or the time of frequency change and affect.The characteristic of these method of measurement of the present invention is conducive to make TDS ADC equipment of the present invention dynamically to adjust during operation measurement characteristics.Specifically, the variation of carrier amplitude can be adjusted the sampling scope of signal, thereby can be by guaranteeing time interval T
2and T
4keep surpassing required minimum value and immediately adjust ADC dynamic range.Moreover the variation of carrier frequency can be adjusted ADC sampling rate and can not affect the signal of reconstruction.Allow to so immediately adjust the sensitivity (lower carrier frequency is considered the more resolution of multidigit unit) of ADC.
In one embodiment, reference signal level can be along with carrier signal amplitude convergent-divergent, therefore can be adjusted at any input signal in the electrical limitations of TDS ADC equipment.
By user, by outside, input to ADC or accelerate the maximum rate changing and suitably adjust frequency to adjust to carry wave frequency by automatically monitoring each cycle.
Figure 13 has shown the various embodiment that time domain described herein switched to analog/digital conversion equipment and the useful carrier signal waveform (except front described sinusoidal signal) of method.Sawtooth 1302 or triangle 1304 waveforms form linear relationship between the side-play amount that records the time cycle and cause due to input signal.1306,1308 pairs of little input signal side-play amounts of waveform may be useful, because the slope of carrier waveform can be little of approaching initial point (being equivalent to little side-play amount).In the time of needn't sacrificing sensor sampling frequency range (can be associated with and reduce sampling frequency) when sampling low-frequency signals, little slope is conducive to promote accuracy, because when modulating signal slowly changes through critical level, can be than the Measuring Time cycle more accurately of the modulating signal with steep slope.Waveform shown in the 13rd figure is exemplary in itself.Can produce by the various carrier signals that any mode that can estimate re-defines clear and definite waveform characteristic the algorithm that can carry out TDS ADC operation required function.
exemplary performance
Figure 14-14H has shown about the example data of the relative error sensitivity to carrier amplitude and the poor Δ V=V of reference signal voltage level
2-V
1.With the fixed carrier frequency of 1000Hz and the sampling clock pulse resolution of 10 microseconds (ps), obtain the data in Figure 14-14H.The line of indicating with arrow 1402-1420 respectively in Figure 14-14H is that acquisition is as follows:
-Figure 14-14B meets the carrier amplitude of 10V, and heterodyne reference signal is respectively 0.2V, 0.4V and 1V; And
-Figure 14 C-14E meets the carrier amplitude of 5V, and heterodyne reference signal is respectively 0.25V, 0.5V and 1.25V; And
-Figure 14 F-14H meets the carrier amplitude of 2.5V, and heterodyne reference signal is respectively 0.25V, 0.5V and 1.25V.
From the shown data of Figure 14-14H, less heterodyne reference signal Δ V conventionally corresponding to higher relative error (for example, as shown in the curve 1420 in Figure 14 H, it is than more upwards skew of the curve 1416 in Figure 14 G), and less carrier amplitude for example, corresponding to lower relative error and lower voltage measurement scope (as shown in the curve 1402 in Figure 14, it is offset downwards and left than the curve 1420 in Figure 14 H).
As known in the data from Figure 14-14H, the feature of example T DS ADC performance is the isefloor of some quantification.That is, there are some to be detected and to change the detected voltage quasi position of (to some levels of accuracy).For instance, can measure with 50 accuracys of receiving volt (nV) voltage of 0.2 millivolt (mV).This means that TDS ADC can detect the input signal lower than this critical value, although ADC resolution can be high a lot.To measuring in the useful a kind of embodiment of low-amplitude signal, TDS ADC is configurable for (known amplitude it) small-signal is added to input signal, thereby can use the ADC of four corner to be down to 50nV resolution level.By deducting " known " input signal, we can directly measure concerning us too little so that the little input signal that cannot detect.This embodiment proposes by way of example, but does not limit the function of particular range of the present invention.
With reference now to Figure 141,, explicit declaration a kind of output noise of the example T DS ADC system view to jitter performance.
exemplary using and applying
Example T DS ADC Apparatus and method for of the present invention can advantageously be changed the signal changing in a wide dynamic range.In a kind of variation, above-mentioned wide dynamic range ability is to reach by adjust carrier signal amplitude during ADC running.Moreover, by adjusting carrier cycle, carry out control signal transfer ratio, be therefore easy to immediately adjust ADC frequency range and accuracy.
This feature is generically called " automatic range ", the single ADC of exemplary embodiment of the present invention can be used for measuring the signal value (amplitude and frequency) of wide region, so rejection is as used in the prior art a plurality of sensors that are adjusted to specific (narrower) scope.
Moreover, because the ratio of serve as reasons input modulation frequency and clock pulse resolution is obtained TDS ADC resolution, for example, so ADC equipment of the present invention can reach high resolution,, surpass 30 bits, and do not need expensive and high-power implementation method (feature of current available ADC device).In addition, TDS ADC resolution and frequency range can immediately be adjusted by adjusting carrier frequency.
Except front end comparator, whole conversion method is digital, therefore eliminates many noises and drift (for example simulating composition drift) source.The accuracy that exemplary time domain is switched analog-digital converter equipment is conducive to not rely on carrier signal amplitude or frequency, does not therefore need calibration.The accuracy that device is more guaranteed in above-mentioned configuration only can be according to the accuracy of the time measurement of the poor accuracy of consistency, the reference signal level of trigger event and front and back trigger event and is determined.
Use extra signal to be used to further promote Changer Device frequency response and accuracy with reference to level.
As mentioned above, some sensor embodiment as herein described can measure input signal by the ratio based on clock pulse frequency and modulation frequency, therefore makes sensor accuracy not be subject to clock pulse drift (to the first level) impact.In addition, on a plurality of cycles of oscillation, average measurement can the unwanted noise of filtering.
If quantize faithfully output, average computation does not just have help.In this example, with vibration, white noise is in a small amount introduced in clock pulse or input signal, make it possible to average output.Input vibration is being equivalent in the scale in 1/2 clock pulse cycle conventionally.
TDS ADC concept as herein described especially allows Technology of Power Conversion can not carry out in other ADC framework.For example, if each cycle is less than once sampled data often, can make during wave period TDC measure square in low-power carrying of calculated data not or " dormancy " in pattern.In addition, can calculate input signal from the short time interval being separated by longer interval (not free interval information is necessary) herein.In this case, the digital limit of relevant input signal in logic control square can be used to trigger TDC device to enter aggressive mode.TDC can follow the triggered time of the signal pulse row of Measuring Time delay.After measuring the trigger point of specific quantity, before arriving in lower set of pulses limit, TDC can enter a low power sleep mode.Another example of power transfer is to change to carry wave frequency.Upper frequency carrier wave will produce and can calculate the less time interval of input signal from it, therefore reduce and start the required total time amount of TDC.In this case, between accuracy (increase along with carrier frequency and reduce) and power, may have compromise.
In addition, TDS TDC technology can be used to digit pulse to change into sequential event.Use an advantage of TDS TDC technology to be, can do the there is splendid resolution time measurement of (under 10 picoseconds) with extremely low electric power.The ability that measurement has the time-event of splendid resolution is the key component of the high-res advantage of TDS ADC.For example, under 1kHz frequency range, signal can have 10
-3second level feature.Yet the TDS TDC implementation method consistent with the present invention provides with 10
-12second, level resolution was measured the ability of these features.This is illustrated between the signal of measurement and resolution has 9 magnitudes poor.
In the conventional method of measuring settling time, the counter driving with high speed time pulse is to carry out lock control by ADC digit pulse.For example, in order to reach splendid resolution (, in picosecond level), can be to approach the high speed time pulse signal of the hunting of frequency of 1THz.The restriction of the unconventional Modern High-Speed electronics of the method meeting.
In a kind of implementation method of the TDS ADC technology consistent with the present invention, be to use vernier scale interpositioning.Be similar to the machine vernier scale scale that needs two scales, need two clock signals.One of them clock pulse be with than another clock pulse also high frequency operate.Lower frequency clock pulse is used to lock control " of poor quality " counter, and upper frequency clock pulse is used to lock control " meticulous " counter (for example, its number of times that clock signal and Voltage Reference level are intersected separately of counter count enable).In the time started, measure, just start " of poor quality " counter.When End Event occurs, just start " meticulous " counter.When low frequency clock pulse and high frequency time pulse finally occur simultaneously (, they generate gate event simultaneously), just stop two counters.Then usage counter value comes measure computing time, and reaches splendid resolution.About exemplary vernier scale sequential technology, the people such as Lange (K.Lange and M.Kasnia; " error measure digit time of vernier interpolation "; Poznan seminar telecommunications application; original text is Application of Vernier Interpolation for Digital Time Error Measurement; Poznan Workshop on Telecommunications, 200811Dec.2008 (on December 11st, 2008)) on the books, its content will be introduced the foreign aid in this by complete.Relevant to carry out the example devices of measuring intervals of TIME with a small amount of delay measurements, its title on April 30th, 1969 for " use the device (original text is APPARATUS FOR AUTOMATICALLY MEASURING TIME INTERVALS USING MULTIPLE INTERPOLATIONS OF ANY FRACTIONAL TIME INTERVAL) at the automatic minute of the multiple association interval of any fragment interval of events " and the 3rd, 611, No. 134 United States Patent (USP)s, and the title that applies on June 23rd, 1978 for " use to set out and lock mutually the time interval (original text is DOUBLE VERINER TIME INTERVAL MEASUREMENT USING TRIGGERED PHASE-LOCKED OSCILLATORS) that oscillator is measured double vernier " and the 4th, 164, in No. 648 United States Patent (USP)s, their full content is all introduced the foreign aid in this.
A design tradeoff of vernier scale interpositioning is for making two simultaneous times of clock pulse.In the time of longer, time of origin causes preferably temporal analytical density to be measured.Specifically, if high-frequency and low frequency are (but the definition clear-cuts and clear different) being similar to, can high accuracy ground their phase deviation of measurement (if having any error to be distributed in many clock signals on the cycle in measuring).Notice to reach the required time of event occurs simultaneously can to approach infinity, because upper frequency approaches one of lower frequency or its harmonic wave (supposing the phase deviation of non-zero).This phase deviation can be used to calculate the lower frequency clock pulse that can circulate wherein when End Event occurs.This causes the Measurement accuracy in cycle in the past.(the advantage of vernier scale technology saves electric power during being included in the whole work period, clock pulse needn't operate continuously, therefore can temporarily shut down to reduce power consumption) and have an opportunity to calibrate continuously in two clock pulses compared with the electric power of misalignment clock pulse and variations in temperature.Vernier scale technology has been applied in the commercial available device that has common integrated circuit processing (as CMOS), for flight time application (that is, ultrasonic waves instrument).The application of this technology and other TDC technology provides remarkable advantage and the resultant effect over other ADC technology to TDS ADC.
In various implementation methods, before in succession connecting consecutive buffer, TDS ADC can use tapping type delay chain, wherein with equivalent, postpones continuously input signal to be measured (or input clock pulse).Total delay meeting is designed to be encompassed at least one the clock pulse cycle that causes transition point (1-0 or 0-1) in buffer chain.This is illustrated in the input fringe time of two clock pulses between the cycle, and can be used to the time measurement that reaches meticulous.In addition, the quantity in the clock pulse cycle of count enable between two input limits is to provide measurement of poor quality.The measurement of these two combinations provides the overall measurement of the time between both sides with the accuracy of the measurement by postponing to set.In the implementation method of CMOS basis, equate time of delay, and come periodically again the calibration delay time with compensate for environmental conditions with a test pulse.The advantage of the method is only to need triangular web clock pulse.The method implementation method in being subject to field domain programmable gate array (FPGA) technology of unequal tap delay restriction.Apply various technology and compensated unequal tap delay.By FPGA basic methods, reach the exemplary techniques of 10 picosecond accuracys, be disclosed in Wu (J.Wu, " ripple realized based on FPGA processes (original text is On-Chip processing for the wave union TDC implemented in FPGA) in conjunction with TDC chip, " at real-time conferencing (in Real Time Conference), 2009.RT'09.16th IEEE-NPSS, in May, 2009 (May2009), page: 279-282) and the people (J.Wu such as Wu, Z.Shi, " ripple of 10ps is in conjunction with TDC: the resolution that improves TDC exceeds its cell and postpones FPGA (original text is The10-ps Wave Union TDC:Improving FPGA TDC Resolution beyond Its Cell Delay), " be published in nuclear science association minutes (in Nuclear Science Symposium Conference Record), 2008IEEE, 19-252008 October (Oct.2008) page: 3440-3446), at this by reference to its full content is incorporated into this.
Table 3 is summed up the exemplary performance parameter of the TDS ADC equipment configuring according to the present invention.Data from form 3 are known, and the exemplary embodiment of TDS ADC of the present invention is conducive to lower one-tenth, originally provide higher dynamic range and lower nonlinearity erron than other ADC technology.
Table 3
Although the content of voltage transitions is mainly discussed, the present invention is not as limit.In fact, much other physics sensing mechanism is useful to sensor device as herein described and method, includes but not limited to: electric current, compressional wave, seismic activity, intensity, frequency, phase place etc.
Although know that some execution mode of the present invention is the specific consecutive steps of a kind of method of narration, these narrations are the explanation of wider method of the present invention, and can revise according to the needs of application-specific.Can make in some cases some step become unnecessary or nonessential.In addition, some step or function can be added to the disclosed embodiments, or the carrying out of two or more steps order is commutative.Consider that all above-mentioned variation are with in the invention that is included in the disclosed of this paper and is advocated.
Although above-mentioned detailed description shows, illustrates and point out to be applicable to the novel feature of the present invention of various embodiment, but by understanding those skilled in the art, can make the form of described device or process and the various omissions of details, replacement and change, and can not deviate from the present invention.Above stated specification is the enforcement best mode of the present invention of considering at present.This explanation never represents the meaning of restriction, should adopt the explanation as general principle of the present invention on the contrary.Scope of the present invention is answered application reference the scope of the claims and is determined.