AU2013245488A1 - Facial recognition with social network aiding - Google Patents
Facial recognition with social network aiding Download PDFInfo
- Publication number
- AU2013245488A1 AU2013245488A1 AU2013245488A AU2013245488A AU2013245488A1 AU 2013245488 A1 AU2013245488 A1 AU 2013245488A1 AU 2013245488 A AU2013245488 A AU 2013245488A AU 2013245488 A AU2013245488 A AU 2013245488A AU 2013245488 A1 AU2013245488 A1 AU 2013245488A1
- Authority
- AU
- Australia
- Prior art keywords
- person
- image
- requester
- results
- visual
- Prior art date
- Legal status (The legal status is an assumption and is not a legal conclusion. Google has not performed a legal analysis and makes no representation as to the accuracy of the status listed.)
- Granted
Links
Abstract
A facial recognition search system identifies one or more likely names (or other personal identifiers) corresponding to the facial image(s) in a query as follows. After receiving the visual query with one or more facial images, the system identifies images that potentially match the respective facial image in accordance with visual similarity criteria. Then one or more persons associated with the potential images are identified. For each identified person, person-specific data comprising metrics of social connectivity to the requester are retrieved from a plurality of applications such as communications applications, social networking applications, calendar applications, and collaborative applications. An ordered list of persons is then generated by ranking the identified persons in accordance with at least metrics of visual similarity between the respective facial image and the potential image matches and with the social connection metrics. Finally, at least one person identifier from the list is sent to the requester.
Description
Facial Recognition with Social Network Aiding The present application is a divisional application from Australian patent Application No. 2010279248, the entire disclosure of which is incorporated herein by reference. TECHNICAL FIELD [00011 The disclosed, embodiments relate generally to identifying one or more persons who potentially match a face in an image query by utilizing social network information and information obtained from other pictures of the identified person(s) to facilitate identification of the best matching person(s). BACKGROUND [00021 Text-based or term-based searching, wherein a user inputs a word or phrase into a search engine and receives a variety of results is a useful tool for searching. However, term based queries require that a user be able to input a relevant term. Sometimes a user may wish to know information about an image. For example, a user might want to know the name of a person in a photograph. A person may also wish to know other information, such as contact information, for a person in a photograph. Accordingly, a system that can receive a facial image query and provide a variety of search results related to an identified person in the facial image query would be desirable. [002A] A reference herein to a patent document or other matter which is given as prior art is not to be taken as an admission that that document or matter was known or that the information it contains was part of the common general knowledge as at the priority date of any of the claims. SUMMARY [00031 According to a first aspect the present invention provides a method of processing a visual query including a facial image performed on a computing system having one or more processors and memory storing one or more programs for execution by the one or more processors to perform the method, comprising: receiving from a requester, a visual query comprising one or more facial images including a respective facial image; identifying potential image matches that potentially match the respective facial image in accordance with visual similarity criteria, the potential image matches comprising images from one or more image sources identified in accordance with data regarding the requester; identifying one or more persons associated with the potential image matches; retrieving, for each identified person, person-specific data comprising social connection metrics of social connectivity to the requester obtained from a 1 plurality of applications selected from the group consisting of communication applications, social networking applications, calendar applications, and collaborative applications; generating an ordered list of persons by ranking the one or more identified persons in accordance with one or more metrics of visual similarity between the respective facial image and the potential image matches and in accordance with ranking information comprising at least the social connection metrics; and sending to the requested at least one person identifier from the ordered list. [00041 A server system may be provided for processing a visual query including a facial image. The server system includes one or more processors for executing programs and memory storing one or more programs be executed by the one or more processors. The one or more programs include instructions for the process as outlined below. A visual query comprising one or more facial images including a respective facial image is received from a requester. Potential image matches that potentially match the respective facial image are identified in accordance with visual similarity criteria. The potential image matches comprise images from one or more image sources identified in accordance with data regarding the requester. One or more persons associated with the potential image matches are identified. For each identified person, person specific data comprising social connection metrics of social connectivity to the requester obtained from a plurality of applications are retrieved. The plurality of applications is selected from the group consisting of communication applications, social networking applications, calendar applications, and collaborative applications. An indirect social connection is identified between the requester and at least one person of the one or more identified persons, in accordance with the social connection metrics of social connectivity. Then (a) at least one person identifier corresponding to the at least one person, and (b) the identified indirect social connection is sent to the requester. Such a system may also include program instructions to execute the additional options discussed in the following sections. [00051 A non-transitory computer readable storage medium for processing a visual query including a facial image may be provided. The computer readable storage medium stores one or more programs configured for execution by a computer, the one or more programs comprising instructions for performing the following. A visual query comprising one or more facial images including a respective facial image is received from a requested. Potential image matches that potentially match the respective facial image are identified in accordance with visual similarity criteria. The potential image matches comprise images from one or more image sources identified in accordance with data regarding the requester. One or more persons associated with the potential image matches are identified. For each identified person, person-specific data 2 comprising social connection metrics of social connectivity to the requester obtained from a plurality of applications are retrieved. The plurality of applications is selected from the group consisting of communication applications, social networking applications, calendar applications, and collaborative applications. An indirect social connection is identified between the requester and at least one person of the one or more identified persons, in accordance with the social connection metrics of social connectivity. Then (a) at least one person identifier corresponding to the at least one person, and (b) the identified indirect social connection is sent to the requester. Such a computer readable storage medium may also include program instructions to execute the additional options discussed in the following sections. BRIEF DESCRIPTION OF THE DRAWINGS [00061 Figure I is a block diagram illustrating a computer network that includes a visual query server system. [00071 Figure 2 is a flow diagram illustrating the process for responding to a visual query, in accordance with some embodiments. 100081 Figure 3 is a flow diagram illustrating the process for responding to a visual query with an interactive results document, in accordance with some embodiments. [00091 Figure 4 is a flow diagram illustrating the communications between a client and a visual query server system, in accordance with some embodiments. [00101 Figure 5 is a block diagram illustrating a client system, in accordance with some embodiments. 100111 Figure 6 is a block diagram illustrating a front end visual query processing server system, in accordance with some embodiments. [00121 Figure 7 is a block diagram illustrating a genetic one of the parallel search systems utilized to process a visual query, in accordance with some embodiments. 3 [00131 Figure 8 is a block diagram illustrating an OCR search system utilized to process a visual query, in accordance with some embodiments. [0014] Figure 9 is a block diagram illustrating a facial recognition search system utilized to process a visual query, in accordance with some embodiments. [0015] Figure 10 is a block diagram illustrating an image to terms search system utilized to process a visual query, in accordance with some embodiments. [00161 Figure 11 illustrates a client system with a screen shot of an exemplary visual query, in accordance with some embodiments. [00171 Figures 12A and 12B each illustrate a client system with a screen shot of an interactive results document with bounding boxes, in accordance with some embodiments. [00181 Figure 13 illustrates a client system with a screen shot of an interactive results document that is coded by type, in accordance with some embodiments. [0019] Figure 14 illustrates a client system with a screen shot of an interactive results document with labels, in accordance with some embodiments. [00201 Figure 15 illustrates a screen shot of an interactive results document and visual query displayed concurrently with a results list, in accordance with some embodiments. [0021] Figures 16A-1 6B are flowcharts illustrating the process of responding to a visual query including a facial image, in accordance with some embodiments. [00221 Figure 17 is a flowchart illustrating various factors and characteristics used in generating an ordered list of persons that potentially match a facial image in a visual query, in accordance with some embodiments. [00231 Figures 18A is a block diagram illustrating a portion of the data structure of a facial image database utilized by a facial recognition search system, in accordance with some embodiments. Figure 18B illustrates relationships between people across a plurality of applications such as social network and communication applications, in accordance with some embodiments. Figure 18C is a block diagram illustrating some image derived characteristics, in accordance with some embodiments. 4 [00241 Like reference numerals refer to corresponding parts throughout the drawings. DESCRIPTION OF EMBODIMENTS [0025] Reference will now be made in detail to embodiments, examples of which are illustrated in the accompanying drawings. In the following detailed description, numerous specific details are set forth in order to provide a thorough understanding of the present invention. However, it will be apparent to one of ordinary skill in the art that the present invention may be practiced without these specific details. In other instances, well-known methods, procedures, components, circuits, and networks have not been described in detail so as not to unnecessarily obscure aspects of the embodiments. [0026] It will also be understood that, although the terms first, second, etc. may be used herein to describe various elements, these elements should not be limited by these terms. These terms are only used to distinguish one element from another. For example, a first contact could be termed a second contact, and, similarly, a second contact could be termed a first contact, without departing from the scope of the present invention. The first contact and the second contact are both contacts, but they are not the same contact, [0027] The terminology used in the description of the invention herein is for the purpose of describing particular embodiments only and is not intended to be limiting of the invention. As used in the description of the invention and the appended claims, the singular forms "a," "an," and "the" are intended to include the plural forms as well, unless the context clearly indicates otherwise. It will also be understood that the term "and/or" as used herein refers to and encompasses any and all possible combinations of one or more of the associated listed items. It will be further understood that the terms "comprises" and/or "comprising," when used in this specification, specify the presence of stated features, integers, steps, operations, elements, and/or components, but do not preclude the presence or addition of one or more other features, integers, steps, operations, elements, components, andor groups thereof. [0028] As used herein, the term "if" may be construed to mean "when" or "upon" or "in response to determining" or "in response to detecting," depending on the context. Similarly, the phrase "if it is determined" or "if (a stated condition or event) is detected" may be construed to mean "upon determining" or "in response to determining" or "upon detecting 5 (the stated condition or event)" or "in response to detecting (the stated condition or event)," depending on the context. [0029] Figure 1 is a block diagram illustrating a computer network that includes a visual query server system according to some embodiments. The computer network 100 includes one or more client systems 102 and a visual query server system 106. One or more communications networks 104 interconnect these components. The communications network 104 may be any of a variety of networks, including local area networks (LAN), wide area networks (WAN), wireless networks, wireline networks, the Internet, or a combination of such networks. [00301 The client system 102 includes a client application 108, which is executed by the client system, for receiving a visual query (e.g., visual query 1102 of Fig 11). A visual query is an image that is submitted as a query to a search engine or search system. Examples of visual queries, without limitations include photographs, scanned documents and images, and drawings. In some embodiments, the client application 108 is selected from the set consisting of a search application, a search engine plug-in for a browser application, and a search engine extension for a browser application. In some embodiments, the client application 108 is an "omnivorous" search box, which allows a user to drag and drop any format of image into the search box to be used as the visual query. [00311 A client system 102 sends queries to and receives data from the visual query server system 106. The client system 102 may be any computer or other device that is capable of cotnmunicating with the visual query server system 106. Examples include, without limitation, desktop and notebook computers, mainframe computers, server computers, mobile devices such as mobile phones and personal digital assistants, network terminals, and set-top boxes, [0032] The visual query server system 106 includes a front end visual query processing server 110. The front end server 110 receives a visual query from the client 102, and sends the visual query to a plurality of parallel search systems 112 for simultaneous processing. The search systems 112 each implement a distinct visual query search process and access their corresponding databases 114 as necessary to process the visual query by their distinct search process. For example, a face recognition search system 112-A will access a facial image database 114-A to look for facial matches to the image query. As will be explained in more detail with regard to Figure 9, if the visual query contains a face, the facial 6 recognition search system 112-A will return one or more search results (e.g., names, matching faces, etc.) from the facial image database 114-A. In another example, the optical character recognition (OCR) search system 112-B, converts any recognizable text in the visual query into text for return as one or more search results. In the optical character recognition (OCR) search system 112-B, an OCR database I 14-B may be accessed to recognize particular fonts or text patterns as explained in more detail with regard to Figure 8. [00331 Any number of parallel search systems 112 may be used. Some examples include a facial recognition search system 112-A, an OCR search system 112-B, an imiae-to terms search system 11 2-C (which may recognize an object or an object category), a product recognition search system (which may be configured to recognize 2-D images such as book covers and CDs and may also be configured to recognized 3-D images such as furniture), bar code recognition search system (which recognizes ID and 2D style bar codes), a named entity recognition search system, landmark recognition (which may configured to recognize particular farnous landmarks like the Eiffel Tower and may also be configured to recognize a corpus of specific images such as billboards), place recognition aided by geo-location information provided by a GPS receiver in the client system 102 or mobile phone network, a color recognition search system, and a similar image search system (which searches for and identifies images similar to a visual query). Further search systems can be added as additional parallel search systems, represented in Figure 1 by system 112-N. All of the search systems, except the OCR search system, are collectively defined herein as search systems performing an image-match process. All of the search systems including the OCR search system are collectively referred to as query-by-image search systems. In some embodiments, the visual query server system 106 includes a facial recognition search system 112-A, an OCR search system 112-B, and at least one other query-by-image search system 112. [00341 The parallel search systems 112 each individually process the visual search query and return their results to the front end server system 110. In some embodiments, the front end server 100 may perform one or more analyses on the search results such as one or more of: aggregating the results into a compound document, choosing a subset of results to display, and ranking the results as will be explained in more detail with regard to Figure 6. The front end server 110 communicates the search results to the client system 102. 7 [0035] The client system 102 presents the one or more search results to the user. The results may be presented on a display, by an audio speaker, or any other means used to communicate information. to a user. The user may interact with the search results in a variety of ways. In some embodiments, the user's selections, annotations, and other interactions with the search results are transmitted to the visual query server system 106 and recorded along with the visual query in a query and annotation database 116. information in the query and annotation database can be used to improve visual query results. In some embodiments, the information from the query and annotation database 116 is periodically pushed to the parallel search systems 112, which incorporate any relevant portions of the information into their respective individual databases 114. [00361 The computer network 100 optionally includes a term query server system 118, for performing searches in response to term queries. A term query is a query containing one or more terms, as opposed to a visual query which contains an image. The term query server system 118 may be used to generate search results that supplement information produced by the various search engines in the visual query server system 106. The results returned from the term query server system 118 may include any format. The term query server system 118 may include textual documents, images, video, etc. While term query server system 118 is shown as a separate system in Figure 1, optionally the visual query server system 106 may include a term query server system 118. [00371 Additional information about the operation of the visual query server system 106 is provided below with respect to the flowcharts in Figures 2-4. [00381 Figure 2 is a flow diagram illustrating a visual query server system method for responding to a visual query, according to certain embodiments of the invention. Each of the operations shown in Figure 2 may correspond to instructions stored in a computer memory or computer readable storage medium. [0039] 'The visual query server system receives a visual query from a client system (202). The client system, for example, may be a desktop computing device, a mobile device, or another similar device (204) as explained with reference to Figure 1. An example visual query on an example client system is shown in Figure 11. [00401 The visual query is an image document of any suitable format. For example, the visual query can be a photograph, a screen shot, a scanned image, or a frame or a 8 sequence of multiple frames of a video (206). It some embodiments, the visual query is a drawing produced by a content authoring program (736, Fig. 5). As such, in some embodiments, the user "draws" the visual query, while in other embodiments the user scans or photographs the visual query. Some visual queries are created using an image generation application such as Acrobat, a photograph editing program, a drawing program, or an image editing program. For example, a visual query could come from a user taking a photograph of his friend on his mobile phone and then submitting the photograph as the visual query to the server system. The visual query could also come from a user scanning a page of a magazine, or taking a screen shot of a webpage on a desktop computer and then submitting the scan or screen shot as the visual query to the server system. In some embodiments, the visual query is submitted to the server system 106 through a search engine extension of a browser application, through a plug-in for a browser application, or by a search application executed by the client system 102. Visual queries may also be submitted by other application programs (executed by a client system) that support or generate images which can be transmitted to a remotely located server by the client system. [0041] The visual query can be a combination of text and non-text elements (208). For example, a query could be a scan of a magazine page containing images and text, such as a person standing next to a road sign. A visual query can include an image of a person's face, whether taken by a camera embedded in the client system or a doc ument scanned by or otherwise received by the client system. A visual query can also be a scan of a document containing only text. The visual query can also be an image of numerous distinct subjects, such as several birds in a forest, a person and an object (e.g., car, park bench, etc.), a person and an animal (e.g., pet, farm animal, butterfly, etc.). Visual queries may have two or more distinct elements. For example, a visual query could include a barcode and an image of a product or product nane on a product package. For example, the visual query could be a picture of a book cover that includes the title of the book, cover art, and a bar code. In some instances, one visual query will produce two or more distinct search results corresponding to different portions of the visual query, as discussed in more detail below. [0042] The server system processes the visual query as follows. The front end server system sends the visual query to a plurality of parallel search systems for simultaneous processing (210). Each search system implements a distinct visual query search process, i.e., an individual search system processes the visual query by its own processing scheme. 9 [00431 In some embodiments, one of the search systems to which the visual query is sent for processing is an optical character recognition (OCR) search system. In some embodiments, one of the search systems to which the visual query is sent for processing is a facial recognition search system. In some embodiments, the plurality of search systems running distinct visual query search processes includes at least: optical character recognition (OCR), facial recognition, and another query-by-image process other than OCR and facial recognition (212). The other query-by-image process is selected from a set of processes that includes but is not limited to product recognition, bar code recognition, object-or-object category recognition, named entity recognition, and color recognition (212). [0044] In some embodiments, named entity recognition occurs as a post process of the OCR search system, wherein the text result of the OCR is analyzed for famous people, locations, objects and the like, and then the terms identified as being named entities are searched in the term query server system (118, Fig. 1), In other embodiments, images of famous landmarks, logos, people, album covers, trademarks, etc. are recognized by an image to-terms search system. In other embodiments, a distinct named entity query-by-image process separate from the image-to-terms search system is utilized. The object-or-object category recognition system recognizes generic result types like "car." In sone embodiments, this system also recognizes product brands, particular product models, and the like, and provides more specific descriptions, like "Porsche." Some of the search systems could be special user specific search systems. For example, particular versions of color recognition and facial recognition could be a special search systems used by the blind. [0045] The front end server system receives results from the parallel search systems (214). In some enbodiments, the results are accompanied by a search score. For some visual queries, some of the search systems will find no relevant results. For example, if the visual query was a picture of a flower, the facial recognition search system and the bar code search system will not find any relevant results. In some embodiments, if no relevant results are found, a null or zero search score is received from that search system (216). In some embodiments, if the front end server does not receive a result from a search system after a pre-defined period of time (e.., 0.2, 0.5, 1, 2 or 5 seconds), it will process the received results as if that timed out server produced a null search score and will process the received results frorn the other search systems. 10 [00461 Optionally, when at least two of the received search results meet pre-defined criteria, they are ranked (218). In some embodiments, one of the redefined criteria excludes void results. A pre-defined criterion is that the results are not void. In some embodiments, one of the redefined criteria excludes results having numerical score (e.g., for a relevance factor) that falls below a pre-defined minimum score. Optionally, the plurality of search results are filtered (220). In some embodiments, the results are only filtered if the total nurnber of results exceeds a pre-defined threshold. In some embodiments, all the results are ranked but the results falling below a pre-defined minimum score are excluded. For some visual queries, the content of the results are filtered. For example, if some of the results contain private information or personal protected information, these results are filtered out. [00471 Optionally, the visual query server system creates a compound search result (222). One embodiment of this is when more than one search system result is embedded in an interactive results document as explained with respect to Figure 3. The term query server system (118, Fig. 1) may augment the results from one of the parallel search systems with results from a term search, where the additional results are either links to documents or information sources, or text and/or images containing additional information that may be relevant to the visual query. Thus, for example, the compound search result rnay contain an OCR result and a link to a named entity in the OCR document (224). [00481 In some embodiments, the OCR search system (112-B, Fig. 1) or the front end visual query processing server (110, Fig. 1) recognizes likely relevant words in the text. For example, it may recognize named entities such as famous people or places. The named entities are submitted as query terms to the tern query server system (118, Fig. 1). In some embodiments, the term query results produced by the term query server system are embedded in the visual query result as a "link." In some embodiments, the term query results are returned as separate links. For example, if a picture of a book cover were the visual query, it is likely that an object recognition search system will produce a high scoring hit for the book. As such a tern query for the title of the book will be run on the term query server system 118 and the term query results are returned along with the visual query results. In some embodiments, the term query results are presented in a labeled group to distinguish them from the visual query results. The results may be searched individually, or a search may be performed using all the recognized named entities in the search query to produce particularly relevant additional search results. For example, if the visual query is a scanned travel 11 brochure about Paris, the returned result may include links to the term query server system 118 for initiating a search on a term query "Notre Dame." Similarly, compound search results include results from text searches for recognized famous images. For example, in the same travel brochure, live links to the term query results for famous destinations shown as pictures in the brochure like "Eiffel Tower" and "Louvre" may also be shown (even if the terms "Eiffel Tower" and "Louvre" did -not appear in the brochure itself.) [00491 The visual query server system then sends at least one result to the client system (226). Typically, if the visual query processing server receives a plurality of search results from at least some of the plurality of search systems, it will then send at least one of the plurality of search results to the client system. For some visual queries, only one search system will return relevant results. For example, in a visual query containing only an image of text, only the OCR server's results may be relevant. For some visual queries, only one result from one search system may be relevant. For example, only the product related to a scanned bar code may be relevant. In these instances, the front end visual processing server will return only the relevant search result(s). For some visual queries, a plurality of search results are sent to the client system, and the plurality of search results include search results from more than one of the parallel search systems (228). This may occur when more than one distinct image is in the visual query. For example, if the visual query were a picture of a person riding a horse, results for facial recognition of the person could be displayed along with object identification results for the horse. In some embodiments, all the results for a particular query by image search system are grouped and presented together. For example, the top N facial recognition results are displayed under a heading "facial recognition results" and the top N object recognition results are displayed together under a heading "object recognition results." Altematively, as discussed below, the search results from a particular image search system may be grouped by image region. For example, if the visual query includes two faces, both of which produce facial recognition results, the results for each face would be presented as a distinct group. For some visual quris .. , visual query including an image of both text and one or more objects), the search results may include both OCR results and one or more imnage-match results (230). [0050] In some embodiments, the user may wish to I earn more about a particular search result. For example, if the visual query was a picture of a dolphin and the "image to terms" search system returns the following terms "water," "dolphin," "blue," and "Flipper;" 12 the user may wish to run a text based query term search on "Flipper." When the user wishes to run a search on a term query (e.g., as indicated by the user clicking on or otherwise selecting a corresponding link in the search results), the query term server system (118, Fig. 1) is accessed, and the search on the selected term(s) is run. The corresponding search term results are displayed on the client system either separately or in conjunction with the visual query results (232). In some embodiments, the front end visual query processing server (I 10, Fig. 1) automatically (i.e., without receiving any user command, other than the initial visual query) chooses one or more top potential text results for the visual query, runs those text results on the term query server system 118, and then returns those term query results along with the visual query result to the client system as a part of sending at least one search result to the client system (232). In the example above, if "Flipper" was the first term result for the visual query picture of a dolphin, the front end server runs a term query on "Flipper" and returns those term query results along with the visual query results to the client system. This embodiment, wherein a term result that is considered likely to be selected by the user is automatically executed prior to sending search results from the visual query to the user, saves the user time. In some embodiments, these results are displayed as a compound search result (222) as explained above. In other embodiments, the results are part of a search result list instead of or in addition to a compound search result. [0051] Figure 3 is a flow diagram illustrating the process for responding to a visual query with an interactive results document. The first three operations (202, 210, 214) are described above with reference to Figure 2. From the search results which are received from the parallel search systems (214). an interactive results document is created (302). [0052] Creating the interactive results document (302) will now be described in detail. For some visual queries, the interactive results document includes one or more visual identifiers of respective sub-portions of the visual query. Each visual identifier has at least one user selectable link to at least one of the search results. A visual identifier identifies a respective sub-portion of the visual query. For some visual queries, the interactive results document has only one visual identifier with one user selectable link to one or more results. In some embodiments, a respective user selectable link to one or more of the search results has an activation region, and the activation region corresponds to the sub-portion of the visual query that is associated with a corresponding visual identifier. 13 [00531 In some embodiments, the visual identifier is a bounding box (304). In some embodiments, the bounding box encloses a sub-portion of the visual query as shown in Figure 12A. 'The bounding box need not be a square or rectangular box shape but can be any sort of shape including circular, oval, conformal (e.g., to an object in, entity in or region of the visual query), irregular or any other shape as shown in Figure 12B. For some visual queries, the bounding box outlines the boundary of an identifiable entity in a sub-portion of the visual query (306). In some embodiments, each bounding box includes a user selectable link to one or more search results, where the user selectable link has an activation region corresponding to a sub-portion of the visual query surrounded by the bounding box. When the space inside the bounding box (the activation region of the user selectable link) is selected by the user, search results that correspond to the image in the outlined sub-portion are returned. [00541 In some embodiments, the visual identifier is a label (307) as shown in Figure 14. In some embodiments, label includes at least one term associated with the image in the respective sub-portion of the visual query. Each label is formatted for presentation in the interactive results document on or near the respective sub-portion. In some embodiments, the labels are color coded. [00551 In some embodiments, each respective visual identifiers is formatted for presentation in a visually distinctive manner in accordance with a type of recognized entity in the respective sub-portion of the visual query. For example, as shown in Figure 13, bounding boxes around a product, a person, a trademark, and the two textual areas are each presented with distinct cross-hatching patterns, representing differently colored transparent bounding boxes. In some embodiments, the visual identifiers are formatted for presentation in visually distinctive manners such as overlay color, overlay pattern, label background color, label background pattern, label font color, and border color. [00561 In some embodiments, the user selectable link in the interactive results document is a link to a document or object that contains one or more results related to the corresponding sub-portion of the visual query (308). In some embodiments, at least one search result includes data related to the corresponding sub-portion of the visual query. As such, when the user selects the selectable link associated with the respective sub-portion, the user is directed to the search results corresponding to the recognized entity in the respective sub-portion of the visual query. 14 [00571 For example, if a visual query was a photograph of a bar code, there may be portions of the photograph which are irrelevant parts of the packaging upon which the bar code was affixed, The interactive results document may include a bounding box around only the bar code. When the user selects inside the outlined bar code bounding box, the bar code search result is displayed. The bar code search result may include one result, the name of the product corresponding to that bar code, or the bar code results may include several results such as a variety of places in which that product can be purchased, reviewed, etc. [0058] In some embodiments, when the sub-portion of the visual query corresponding to a respective visual identifier contains text comprising one or more terms, the search results corresponding to the respective visual identifier include results from a tenn query search on at least one of the terms in the text. In some embodiments, when the sub-portion of the visual query corresponding to a respective visual identifier contains a person's face for which at least one match (i.e., search result) is found that meets predefined reliability (or other) criteria, the search results corresponding to the respective visual identifier include one or more of: name, handle, contact information, account information, address information, current location of a related mobile device associated with the person whose face is contained in the selectable sub-portion, other images of the person whose face is contained in the selectable sub-portion, and potential image matches for the person's face. In some embodiments, when the sub-portion of the visual query corresponding to a respective visual identifier contains a product for which at least one match (i.e., search result) is found that meets predefined reliability (or other) criteria, the search results corresponding to the respective visual identifier include one or more of: product information, a product review, an option to initiate purchase of the product, an option to initiate a bid on the product, a list of similar products, and a list of related products. [0059] Optionally, a respective user selectable link in the interactive results document includes anchor text, which is displayed in the document without having to activate the link. The anchor text provides information, such as a key word or term, related to the information obtained when the link is activated. Anchor text may be displayed as part of the label (307), or in a portion of a bounding box (304), or as additional information displayed when a user hovers a cursor over a user selectable link for a pre-determined period of time such as I second. 15 [00601 Optionally, a respective user selectable link in the interactive results document is a link to a search engine for searching for information or documents corresponding to a text-based query (sometimes herein called a term query). Activation of the link causes execution of the search by the search engine, where the query and the search engine are specified by the link (e.g., the search engine is specified by a URL in the link and the text based search query is specified by a URL parameter of the link), with results returned to the client system. Optionally, the link in this example may include anchor text specifying the text or terms in the search query. [00611 In some embodiments, the interactive results document produced in response to a visual query can include a plurality of links that correspond to results from the same search system. For example, a visual query may be an image or picture of a group of people. 'The interactive results document may include bounding boxes around each person, which when activated returns results from the facial recognition search system for each face in the group. For some visual queries, a plurality of links in the interactive results document corresponds to search results from more than one search system (310) For example, if a picture of a person and a dog was submitted as the visual query, bounding boxes in the interactive results document may outline the person and the dog separately. When the person (in the interactive results document) is selected, search results from the facial recognition search system are retuned, and when the dog (in the interactive results document) is selected results from the image-to-terms search system are returned. For some visual queries, the interactive results document contains an OCR result and an image match result (312). For example, if a picture of a person standing next to a sign were submitted as a visual query, the interactive results document may include visual identifiers for the person and for the text in the sign. Similarly, if a scan of a magazine was used as the visual query, the interactive results document may include visual identifiers for photographs or trademarks in advertisements on the page as well as a visual identifier for the text of an article also on that page. [0062] Afier the interactive results document has been created, it is sent to the client system (314). In some embodiments, the interactive results document (eg., document 1200, Figure 15) is sent in conjunction with a list of search results from one or more parallel search systems, as discussed above with reference to Figure 2. In some embodiments, the 16 interactive results document is displayed at the client systern above or otherwise adjacent to a list of search results from one or more parallel search systems (315) as shown in Figure 15. [00631 Optionally, the user wili interact with the results document by selecting a visual identifier in the results document. The server system receives from the client system information regarding the user selection of a visual identifier in the interactive results document (316). As discussed above, in some embodiments, the link is activated by selecting an activation region inside a bounding box. In other embodiments, the link is activated by a user selection of a visual identifier of a sub-portion of the visual query, which is not a bounding box. In some embodiments, the linked visual identifier is a hot button, a label located near the sub-portion, an underlined word in text, or other representation of an object or subject in the visual query. [0064] In embodiments where the search results list is presented with the interactive results document (315), when the user selects a user selectable link (316), the search result in the search results list corresponding to the selected link is identified. In some embodiments, the cursor will jump or automatically move to the first result corresponding to the selected link. In some embodiments in which the display of the client 102 is too small to display both the interactive results document and the entire search results list, selecting a link in the interactive results document causes the search results list to scroll or jurnp so as to display at least a first result corresponding to the selected link. In some other embodiments, in response to user selection of a link in the interactive results document, the results list is reordered such that the first result corresponding to the link is displayed at the top of the results list. [00651 In some embodiments, when the user selects the user selectable link (316) the visual query server system sends at least a subset of the results, related to a corresponding sub-portion of the visual query, to the client for display to the user (318). In some embodiments., the user can select multiple visual identifiers concurrently and will receive a subset of results for all of the selected visual identifiers at the same time. In other embodiments, search results corresponding to the user selectable links are preloaded onto the client prior to user selection of any of the user selectable links so as to provide search results to the user virtually instantaneously in response to user selection of one or more links in the interactive results document. 17 100661 Figure 4 is a flow diagram illustrating the communications between a client and a visual query server system. The client 102 receives a visual query from a user/querier/requester (402). In some embodiments, visual queries can only be accepted from users who have signed up for or "opted in" to the visual query system. In some embodiments, searches for facial recognition matches are only performed for users who have signed up for the facial recognition visual query system, while other types of visual queries are performed for anyone regardless of whether they have "opted in" to the facial recognition portion. 10067] As explained above, the format of the visual query can take many forms. The visual query will likely contain one or more subjects located in sub-portions of the visual query document. For some visual queries, the client system 102 performs type recognition pre processing on the visual query (404). In some embodiments, the client system 102 searches for particular recognizable patterns in this pre-processing system. For example, for some visual queries the client may recognize colors. For some visual queries the client may recognize that a particular sub-portion is likely to contain text (because that area is made up of small dark characters surrounded by light space etc.) The client may contain any number of pre processing type recognizers, or type recognition modules. In some embodiments, the client will have a type recognition module (barcode recognition 406) for recognizing bar codes. It may do so by recognizing the distinctive striped pattern in a rectangular area. In some embodiments, the client will have a type recognition module (face detection 408) for recognizing that a particular subject or sub-portion of the visual query is likely to contain a face. 100681 In some embodiments, the recognized "type" is returned to the user for verification. For example, the client system 102 may return a message stating "a bar code has been found in your visual query, are you interested in receiving bar code query results?" In some embodiments, the message may even indicate the sub-portion of the visual query where the type has been found. In some embodiments, this presentation is similar to the interactive results document discussed with reference to Figure 3. For example, it may outline a sub portion of the visual query and indicate that the sub-portion is likely to contain a face, and ask the user if they are interested in receiving facial recognition results. 100691 After the client 102 performs the optional pre-processing of the visual query, the client sends (410) the visual query to the visual query server system 106, specifically to the 18 particular type (face, text, barcode etc.), the client will pass along information regarding the results of the pre-processing. For example, the client may indicate that the face recognition module is 75% sure that a particular sub-portion of the visual query contains a face. More generally, the pre-processing results, if any, include one or more subject type values (e.g., bar code, face, text, etc.). Optionally, the pre-processing results sent to the visual query server system include one or more of: for each subject type value in the pre-processing results, information identifying a sub-portion of the visual query corresponding to the subject type value, and for each subject type value in the pre-processing results, a confidence value indicating a level of confidence in the subject type value and/or the identification of a corresponding sub-portion of the visual query. [00701 The front end server 110 receives the visual query from the client system (202). The visual query received may contain the pre-processing information discussed above. As described above, the front end server sends the visual query to a plurality of parallel search systems (210). If the front end server 110 received pre-processing information regarding the likelihood that a sub-portion contained a subject of a certain type, the front end server may pass this information along to one or more of the parallel search systems. For example, it may pass on the information that a particular sub-portion is likely to be a face so that the facial recognition search system 112- A can process that subsection of the visual query first. Similarly, sending the same information (that a particular sub-portion is likely to be a face) may be used by the other parallel search systems to ignore that sub-portion or analyze other sub-portions first. In some embodiments, the front end server will not pass on the pre processing information to the parallel search systems, but will instead use this information to augment the way in which it processes the results received from the parallel search systems. [0071] After the client 102 performs the optional pre-processing of the visual query, the client sends (410) the visual query to the visual query server system 106, specifically to the front end visual query processing server 110. in some embodiments, if pre-processing produced relevant results, i.e., if one of the type recognition modules produced results above a certain threshold, indicating that the query or a sub-portion of the query is likely to be of a particular type (face, text, barcode etc.), the client will pass along information regarding the results of the pre-processing. For example, the client may indicate that the face recognition module is 75% sure that a particular sub-portion of the visual query contains a face. More generally, the pre-processing results, if any, include one or more subject type values (e.g., 19 bar code, face, text, etc.). Optionally, the pre-processing results sent to the visual query server system include one or more of: for each subject type value in the pre-processing results, information identifying a sub-portion of the visual query corresponding to the subject type value, and for each subject type value in the pre-processing results, a confidence value indicating a level of confidence in the subject type value and/or the identification of a corresponding sub-portion of the visual query. [00721 The client 102 receives the results from the server system (412). When applicable, these results will include the results that match the type of result found in the preprocessing stage. For example, in some embodiments they will include one or more bar code results (414) or one or more facial recognition results (416). If the client's pre-processing modules had indicated that a particular type of result was likely, and that result was found, the found results of that type will be listed prominently. [00731 Optionally the user will select or annotate one or more of the results (418). The user may select one search result, may select a particular type of search result, and/or may select a portion of an interactive results document (420). Selection of a result is implicit feedback that the returned result was relevant to the query. Such feedback information can be utilized in future query processing operations. An annotation provides explicit feedback about the returned result that can also be utilized in future query processing operations. Annotations take the form of corrections of portions of the returned result (like a correction to a mis OCRed word) or a separate annotation (either free form or structured.) [00741 The user's selection of one search result, generally selecting the "correct" result from several of the same type (e.g., choosing the correct result from a facial recognition server), is a process that is referred to as a selection among interpretations. The user's selection of a particular type of search result, generally selecting the result "type" of interest from several different types of returned results (e.g., choosing the OCRed text of an article in a magazine rather than the visual results for the advertisements also on the same page), is a process that is referred to as disambiguation of intent. A user may similarly select particular 20 linked words (such as recognized named entities) in an OCRed document as explained in detail with reference to Figure 8. [00751 The user may alternatively or additionally wish to annotate particular search results. This annotation may be done in freeform style or in a structured format (422). The annotations may be descriptions of the result or may be reviews of the result. For example, they may indicate the name of subject(s) in the result, or they could indicate "this is a good book" or "this product broke within a year of purchase." Another example of an annotation is a user-drawn bounding box around a sub-portion of the visual query and user-provided text identifying the object or subject inside the bounding box. User annotations are explained in more detail with reference to Figure 5. [00761 The user selections of search results and other annotations are sent to the server system (424). The front end server 110 receives the selections and annotations and further processes them (426). If the information was a selection of an object, sub-region or term in an interactive results document, further information regarding that selection may be requested, as appropriate. For example, if the selection was of one visual result, more information about that visual result would be requested. If the selection was a word (either from the OCR server or from the Image-to-Terms server) a textual search of that word would be sent to the tern query server system 118. If the selection was of a person from a facial inage recognition search system, that person's profile would be requested. If the selection was for a particular portion of an interactive search result document, the underlying visual query results would be requested. [00771 If the server system receives an annotation, the annotation is stored in a query and annotation database 116, explained with reference to Figure 5. Then the information from the annotation database 116 is periodically copied to individual annotation databases for one or more of the parallel server systems, as discussed below with reference to Figures 7 10. [0078] Figure 5 is a block diagram illustrating a client system 102 in accordance with one embodiment of the present invention. The client system 102 typically includes one or more processing units (CPU's) 702, one or more network or other communications interfaces 704, memory 712, and one or more communication buses 714 for interconnecting tiese components. The client system 102 includes a user interface 705. The user interface 705 21 includes a display device 706 and optionally includes an input means such as a keyboard, mouse, or other input buttons 708. Alternatively or in addition the display device 706 includes a touch sensitive surface 709, in which case the display 706/709 is a touch sensitive display. In client systems that have a touch sensitive display 706/709, a physical keyboard is optional (e.g., a soft keyboard may be displayed when keyboard entry is needed). Furthermore, some client systems use a microphone and voice recognition to supplement or replace the keyboard. Optionally, the client 102 includes a GPS (global positioning satellite) receiver, or other location detection apparatus 707 for determining the location of the client system 102. In some embodiments, visual query search services are provided that require the client system 102 to provide the visual query server system to receive location information indicating the location of the client system 1 02. [00791 The client system 102 also includes an image capture device 710 such as a camera or scanner. Memory 712 includes high-speed random access memory, such as DRAM, SRAM, DDR RAM or other random access solid state memory devices; and may include non-volatile memory, such as one or more magnetic disk storage devices, optical disk storage devices, flash memory devices, or other non-volatile solid state storage devices. Memory 712 may optionally include one or more storage devices rernotely located from the CPU(s) 702. Memory 712, or alternately the non-volatile memory device(s) within memory 712, comprises a non-transitory computer readable storage medium. In some embodiments, memory 12 or the computer readable storage medium of memory 712 stores the following programs, modules and data structures, or a subset thereof: . an operating system 716 that includes procedures for handling various basic system services and for performing hardware dependent tasks; " a network communication module 718 that is used for connecting the client system 102 to other computers via the one or more communication network interfaces 704 (wired or wireless) and one or more communication networks, such as the Internet, other wide area networks, local area networks, metropolitan area networks, and so on; . a image capture module 720 for processing a respective image captured by the image capture device/camera 710, where the respective irnage may be sent (e.g., by a client application module) as a visual query to the visual query server system; " one or more client application modules 722 for handling various aspects of querying by image, including but not limited to: a query-by-image submission module 724 for 22 submitting visual queries to the visual query server system; optionally a region of interest selection module 725 that detects a selection (such as a gesture on the touch sensitive display 706/709) of a region of interest in an image and prepares that region of interest as a visual query; a results browser 726 for displaying the results of the visual query; and optionally an annotation module 728 with optional modules for structured annotation text entry 730 such as filling in a form or for freeform annotation text entry 732, which can accept annotations from a variety of formats, and an image region selection module 734 (sometimes referred to herein as a result selection module) which allows a user to select a particular sub-portion of an image for annotation; " an optional content authoring application(s) 736 that allow a user to author a visual query by creating or editing an image rather than just capturing one via the image capture device 710; optionally, one or such applications 736 may include instructions that enable a user to select a sub-portion of an image for use as a visual query; " an optional local image analysis module 738 that pre-processes the visual query before sending it to the visual query server system. The local image analysis may recognize particular types of images, or sub-regions within an image. Examples of image types that may be recognized by such modules 738 include one or more of: facial type (facial image recognized within visual query), bar code type (bar code recognized within visual query), and text type (text recognized within visual qCuery); and . additional optional client applications 740 such as an email application, a phone application, a browser application, a mapping application, instant messaging application, social networking application etc. In some embodiments, the application corresponding to an appropriate actionable search result can be launched or accessed when the actionable search result is selected. [0080] Optionally, the image region selection module 734 which allows a user to select a particular sub-portion of an image for annotation, also allows the user to choose a search result as a "correct" hit without necessarily further annotating it. For exarnple, the user may be presented with a top N number of facial recognition matches and may choose the correct person from that results list. For some search queries, more than one type of result will be presented, and the user will choose a type of result. For example, the image query 23 may include a person standing next to a tree, but only the results regarding the person is of interest to the user. Therefore, the image selection module 734 allows the user to indicate which type of image is the "correct" type - i.e., the type he is interested in receiving. 'The user may also wish to annotate the search result by adding personal comments or descriptive words using either the annotation text entry module 730 (for filling in a form) or freeform annotation text entry module 732. [00811 In some embodiments, the optional local image analysis module 738 is a portion of the client application (108, Fig. 1). Furtherrmore, in some embodiments the optional local image analysis module 738 includes one or more programs to perform local image analysis to pre-process or categorize the visual query or a portion thereof. For example, the client application 722 may recognize that the image contains a bar code, a face, or text, prior to submitting the visual query to a search engine. In some embodiments, when the local image analysis module 738 detects that the visual query contains a particular type of irnage, the module asks the user if they are interested in a corresponding type of search result. For example, the local image analysis module 738 may detect a face based on its general characteristics (ic,, without determining which person's face) and provides immediate feedback to the user prior to sending the query on to the visual query server system. It rnay return a result like, "A face has been detected, are you interested in getting facial recognition matches for this face?" This may save time for the visual query server system (106, Fig. 1). For some visual queries, the front end visual query processing server (110, Fig. 1) only sends the visual query to the search system 112 corresponding to the type of image recognized by the local image analysis module 738. In other embodiments, the visual query to the search system 112 may send the visual query to all of the search systems 112A-N, but will rank results from the search system 112 corresponding to the type of image recognized by the local image analysis module 738. In some embodiments, the manner in which local image analysis impacts on operation of the visual query server system depends on the configuration of the client system, or configuration or processing parameters associated with either the user or the client system. Furthermore, the actual content of any particular visual query and the results produced by the local image analysis may cause different visual queries to be handled differently at either or both the client system and the visual query server system. [00821] In some embodiments, bar code recognition is performed in two steps, with analysis of whether the visual query includes a bar code performed on the client system at the 24 local image analysis module 738. Then the visual query is passed to a bar code search system only if the client determines the visual query is likely to include a bar code. In other embodiments, the bar code search system processes every visual query. [00831 Optionally, the client system 102 includes additional client applications 740. [0084] Figure 6 is a block diagram illustrating a front end visual query processing server system 110 in accordance with one embodiment of the present invention. The front end server 110 typically includes one or more processing units (CPU's) 802, one or more network or other communications interfaces 804, memory 812, and one or more communication buses 814 for interconnecting these components. Memory 812 includes high speed random access memory, such as DRAM, SRAM, DDR RAM or other random access solid state memory devices; and may include non-volatile memory, such as one or more magnetic disk storage devices, optical disk storage devices, flash memory devices, or other non--volatile solid state storage devices. Memory 812 may optionally include one or more storage devices remotely located from the CPU(s) 802. Memory 812, or alternately the non volatile memory device(s) within memory 812, comprises a non-transitory computer readable storage medium. in some embodiments, memory 812 or the computer readable storage medium of memory 812 stores the following programs, modules and data structures, or a subset thereof: " an operating system 816 that includes procedures for handling various basic system services and for performing hardware dependent tasks; " a network communication module 818 that is used for connecting the front end server system 110 to other computers via the one or more communication network interfaces 804 (wired or wireless) and one or more communication networks, such as the Internet, other wide area networks, local area networks, metropolitan area networks, and so on; " a query manager 820 for handling the incoming visual queries from the client system 102 and sending them to two or more parallel search systems; as described elsewhere in this document, in some special situations a visual query may be directed to just one of the search systems, such as when the visual query includes a client-generated instruction (e.g., "facial recognition search only"); 25 " a results filtering module 822 for optionally filtering the results from the one or more parallel search systems and sending the top or "relevant" results to the client system 102 for presentation; " a results ranking and formatting module 824 or optionally ranking the results from the one or more parallel search systems and for formatting the results for presentation; " a results docurnent creation module 826, is used when appropriate, to create an interactive search results document; module 826 may include sub-modules, including but not limited to a bounding box creation module 828 and a link creation module 830; " a label creation module 831 for creating labels that are visual identifiers of respective sub-portions of a visual query; " an annotation module 832 for receiving annotations from a user and sending them to an annotation database 116; " an actionable search results module 838 for generating, in response to a visual query, one or more actionable search result elements, each configured to launch a client-side action; examples of actionable search result elements are buttons to initiate a telephone call, to initiate email message, to map an address, to make a restaurant reservation, and to provide an option to purchase a product; and " a query and annotation database 116 which comprises the database itself 834 and an index to the database 836. [00851 The results ranking and formatting module 824 ranks the results returned from the one or more parallel search systems (112-A - 112-N, Fig. 1). As already noted above, for some visual queries, only the results from one search system may be relevant. In such an instance, only the relevant search results from that one search system are ranked. For some visual queries, several types of search results may be relevant. In these instances, in some embodiments, the results ranking and formatting module 824 ranks all of the results from the search system having the most relevant result (e.g., the result with the highest relevance score) above the results for the less relevant search systems. in other embodiments, the results ranking and formatting module 824 ranks a top result from each relevant search system above the remaining results. In some embodiments. the results ranking and formatting module 824 ranks the results in accordance with a relevance score computed for 26 each of the search results. For some visual queries, augmented textual queries are performed in addition to the searching on parallel visual search systems. In some embodiments, when textual queries are also performed, their results are presented in a manner visually distinctive from the visual search system results. [00861 The results ranking and formatting module 824 also formats the results. In some embodiments, the results are presented in a list format. In sorne embodiments, the results are presented by means of an interactive results document. In some embodiments, both an interactive results document and a list of results are presented. In some embodiments, the type of query dictates how the results are presented. For example, if more than one searchable subject is detected in the visual query, then an interactive results document is produced, while if only one searchable subject is detected the results will be displayed in list format only. [00871 The results document creation module 826 is used to create an interactive search results document. The interactive search results document may have one or more detected and searched subjects. The bounding box creation module 828 creates a bounding box around one or more of the searched subjects. The bounding boxes may be rectangular boxes, or may outline the shape(s) of the subject(s). The link creation module 830 creates links to search results associated with their respective subject in the interactive search results document. In some embodiments, clicking within the bounding box area activates the corresponding link inserted by the link creation module. [00881 The query and annotation database 116 contains information that can be used to improve visual query results. In some embodiments, the user may annotate the image after the visual query results have been presented. Furthermore, in some embodiments the user may annotate the image before sending it to the visual query search system. Pre-annotation may help the visual query processing by focusing the results, or running text based searches on the annotated words in parallel with the visual query searches. In some embodiments, annotated versions of a picture can be made public (e.g., when the user has given permission for publication, for example by designating the image and annotation(s) as not private), so as to be returned as a potential image match hit. For example, if a user takes a picture of a flower and annotates the image by giving detailed genus and species information about that flower, the user may want that image to be presented to anyone who performs a visual query research looking for that flower. In some embodiments, the information from the query and 27 annotation database 116 is periodically pushed to the parallel search systems 112, which incorporate relevant portions of the information (if any) into their respective individual databases 114. [00891 Figure 7 is a block diagram illustrating one of the parallel search systems utilized to process a visual query. Figure 7 illustrates a "generic" server system 112-N in accordance with one embodiment of the present invention. This server system is generic only in that it represents any one of the visual query search servers 112-N. The generic server system 112-N typically includes one or more processing units (CPU's) 502, one or more network or other communications interfaces 504, memory 512, and one or more comiunication buses 514 for interconnecting these components. Memory 512 includes high speed random access memory, such as DRAM, SRAM. DDR RAM or other random access solid state memory devices; and may include non-volatile memory, such as one or more magnetic disk storage devices, optical disk storage devices, flash memory devices, or other nron-volatile solid state storage devices. Memory 512 may optionally include one or more storage devices remotely located from the CPU(s) 502. Memory 512, or alternately the non volatile memory device(s) within memory 512, comprises a non-transitory computer readable storage medium. In some embodiments, memory 512 or the computer readable storage medium of memory 5 12 stores the following programs, modules and data structures, or a subset thereof: " an operating system 516 that includes procedures for handling various basic system services and for performing hardware dependent tasks; " a network communication module 518 that is used for connecting the generic server system 112-N to other computers via the one or more communication network interfaces 504 (wired or wireless) and one or more communication networks, such as the Internet, other wide area networks, local area networks, metropolitan area networks, and so on; a a search application 520 specific to the particular server system, it may for example be a bar code search application, a color recognition search application, a product recognition search application, an object-or-object category search application, or the like; a an optional index 522 if the particular search application utilizes an index; 28 " an optional inage database 524 for storing the images relevant to the particular search application, where the image data stored, if any, depends on the search process type; " an optional results ranking module 526 (sometimes called a relevance scoring module) for ranking the results from the search application, the ranking module may assign a relevancy score for each result from the search application, and if no results reach a pre-defined minimum score, may return a null or zero value score to the front end visual query processing server indicating that the results from this server system are not relevant; and " an annotation module 528 for receiving annotation information from an annotation database (116, Fig. 1) determining if any of the annotation information is relevant to the particular search application and incorporating any determined relevant portions of the annotation information into the respective annotation database 530. [0090] Figure 8 is a block diagram illustrating an OCR search system 112-B utilized to process a visual query in accordance with one embodiment of the present invention. The OCR search system 112-B typically includes one or more processing units (CPU's) 602, one or more network or other communications interfaces 604, memory 612, and one or more communication buses 614 for interconnecting these components. Memory 612 includes high speed random access memory, such as DRAM, SRAM, DDR RAM or other random access solid state memory devices; and may include non-volatile memory, such as one or more magnetic disk storage devices, optical disk storage devices, flash memory devices, or other non-volatile solid state storage devices. Memory 612 may optionally include one or more storage devices remotely located from the CPU(s) 602. Memory 612, or alternately the non volatile memory device(s) within memory 612, comprises a non-transitory computer readable storage medium. in some embodiments, memory 612 or the computer readable storage medium of memory 612 stores the following programs, modules and data structures, or a subset thereof: " an operating system 616 that includes procedures for handling various basic system services and for performing hardware dependent tasks; " a network communication module 618 that is used for connecting the OCR search system 1 12-B to other computers via the one or more comnmunication network interfaces 604 (wired or wireless) and one or more communication networks, such as 29 the Internet, other wide area networks, local area networks, metropolitan area networks, and so on; an Optical Character Recognition (OCR) module 620 which tries to recognize text in the visual query, and converts the images of letters into characters; an optional OCR database 114-B which is utilized by the OCR module 620 to recognize particular fonts, text patterns, and other characteristics unique to letter recognition; an optional spell check nodule 622 which improves the conversion of images of letters into characters by checking the converted words against a dictionary and replacing potentially mis-converted letters in words that otherwise match a dictionary word; an optional named entity recognition module 624 which searches for named entities within the converted text, sends the recognized named entities as terms in a term query to the term query server system (118, Fig. 1), and provides the results from the term query server system as links embedded in the OCRed text associated with the recognized named entities; an optional text match application 632 which improves the conversion of images of letters into characters by checking converted segments (such as converted sentences and paragraphs) against a database of text segments and replacing potentially mis converted letters in OCRed text segments that otherwise match a text match application text segnnt, in some embodiments the text segment found by the text match application is provided as a link to the user (for example, if the user scanned one page of the New York Times, the text match application may provide a link to the entire posted article on the New York Times website); a results ranking and formatting module 626 for formatting the OCRed results for presentation and formatting optional links to named entities, and also optionally ranking any related results from the text match application; and an optional annotation module 628 for receiving annotation information from an annotation database (116, Fig. 1) determining if any of the annotation information is relevant to the OCR search system and incorporating any determined relevant portions of the annotation information into the respective annotation database 630. 30 [0091] Figure 9 is a block diagram illustrating a facial recognition search system 112 A utilized to process a visual query with at least one facial image in accordance with one embodiment of the present invention. The facial recognition search system 112-A typically includes one or more processing units (CPU's) 902, one or more network or other communications interfaces 904, memory 912, and one or more communication buses 914 for interconnecting these components. Memory 912 includes high-speed random access memory, such as DRAM, SRAM, DDR RAM or other random access solid state memory devices; and may include non-volatile memory, such as one or more magnetic disk storage devices, optical disk storage devices, flash memory devices, or other non-volatile solid state storage devices. Memory 912 may optionally include one or more storage devices remotely located from the CPU(s) 902. Memory 912, or alternately the non-volatile memory device(s) within memory 912, comprises a non-transitory computer readable storage medium. In some embodiments, memory 912 or the computer readable storage medium of memory 912 stores the following programs, modules and data structures, or a subset thereof. " An operating system 916 that includes procedures for handling various basic system services and for performing hardware dependent tasks. " A network communication module 918 that is used for connecting the facial recognition search system 112-A to other computers via the one or more communication network interfaces 904 (wired or wireless) and one or more communication networks, such as the Internet, other wide area networks, local area networks, metropolitan area networks, and so on. . A facial recognition search application 920 including a visual identifier module 924 for identifying potential image matches that potentially match a facial image in the query, a personal identifier module 926 fbr identifying persons associated with the potential image matches, and a social connection metrics module 928 for retrieving person-specific data comprising metrics of social connectivity to the requester (and/or another person in the image), and a ranking module 930 for generating a ranked list of identified persons in accordance with metrics of visual similarity between the facial image and the potential matches as well as in accordance with social connection metrics. " A facial image database 1 14-A, which is searched to find the images that potentially match a facial image in a query, includes one or more image sources such as social 31 network images 932, web album images 934, photo sharing images 936, and previous query images 938. The image sources used in response to a particular query are identified in accordance with data regarding the requester. In some embodiments, they include only images in accounts belonging to or associated with the requester, such as social networking accounts of the requester, web albums of the requester, and so on. In other embodiments the sources include images belonging to or associated with other people with whom the requester is socially connected, e.g., people with a direct connection to a requester on a social graph. Optionally, the facial image database 1 14-A includes images of famous people 940. In sorne embodiments, the facial image database includes facial images obtained from external sources, such as vendors of facial images that are legally in the public domain. An image feature extractor 942 extracts characteristics derived from images in the facial image database 114-A and stores the information in a database of person specific data 964. In some embodiments, visual characteristics such as a indoor habitat factor, an outdoor habitat factor, a gender factor, a race factor, a glasses factor, a facial hair factor, a head hair factor, a headwear factor, an eye color factor, occurrence information, and co-occurrence information are extracted with a visual features extractor 944. In some embodiments, metadata characteristics such as date information, tirne information, and location information are extracted with a metadata features extractor 946, Public databases 948 are sources of person-specific data, which include connection metrics of social connectivity between the person associated with a potential image match and the requester. The data is obtained from a plurality of applications including, but are not limited to, social network databases 922, social microblog databases 950, blog databases 952, email databases 954, IM databases 956., calendar databases 958, contact lists 960, and/or public URLs 962. A database of person-specific data 964 that stores information specific to particular persons. Some or all of the person-specific data is obtained from public databases. The person-specific data is described in more detail with respect to Figures 18A-C. A results formatting module 966 for formatting the results for presentation; in some embodiments, the formatted results include the potential image matches and subset of information from the database of person-specific data 964. 32 " An annotation module 968 for receiving annotation information from an annotation database (116, Fig. 1), for determining if any of the annotation information is relevant to the facial recognition search system, and for storing any determined relevant portions of the annotation information into the respective annotation database 970. " A person location module 972 acquires location information concerning the current location of the requester and one or more persons identified as potential matches to a facial image in a visual query. The acquisition of location information by person location module 972 and the use of location information to improve matching of a person to a facial image by search application 920 is discussed below with reference to Figures 16A, 17, 18A and 18C. [00921 Figure 10 is a block diagram illustrating an image-to-terms search system 112 C utilized to process a visual query in accordance with one embodiment of the present invention. In some embodiments, the image-to-terms search system recognizes objects (instance recognition) in the visual query. In other embodiments, the image-to-terms search system recognizes object categories (type recognition) in the visual query. In some embodiments, the image to terms system recognizes both objects and obiect-categories. The image-to-terms search system returns potential term matches for images in the visual query. The image-to-terms search system 112-C typically includes one or more processing units (CPU's) 1002, one or more network or other communications interfaces 1004, memory 1012, and one or more communication buses 1014 for interconnecting these components. Memory 1012 includes high-speed random access memory, such as DRAM, SRAM, DDR RA M or other random access solid state memory devices; and may include non-volatile memory, such as one or more magnetic disk storage devices, optical disk storage devices, flash memory devices, or other non-volatile solid state storage devices. Memory 1012 may optionally include one or more storage devices remotely located from the CPU(s) 1002. Memory 1012, or alternately the non-volatile memory device(s) within memory 1012, comprises a non transitory computer readable storage medium. In some embodiments, memory 1012 or the computer readable storage medium of memory 1012 stores the following programs, modules and data structures, or a subset thereof: * an operating system 1016 that includes procedures for handling various basic system services and for perforiring hardware dependent tasks; 33 " a network communication module 1018 that is used for connecting the image-to-terms search system I 12-C to other computers via the one or more communication network interfaces 1004 (wired or wireless) and one or more communication networks, such as the Internet, other wide area networks, local area networks, metropolitan area networks, and so on; " a image-to-terms search application 1020 that searches for images matching the subject or subjects in the visual query in the image search database 114-C; " an image search database 114-C which can be searched by the search application 1020 to find images similar to the subject(s) of the visual query; " a terms-to-image inverse index 1022, which stores the textual terms used by users when searching for images using a text based query search engine 1006; " a results ranking and formatting module 1024 for ranking the potential image matches and/or ranking terms associated with the potential image matches identified in the terms-to-image inverse index 1022; and " an annotation module 1026 for receiving annotation information from n annotation database (116, Fig. 1) determining if any of the annotation information is relevant to the image-to terms search system 112-C and storing any determined relevant portions of the annotation information into the respective annotation database 1028. [00931 Figures 5-10 are intended more as functional descriptions of the various features which may be present in a set of computer systems than as a structural schematic of the embodiments described herein. In practice, and as recognized by those of ordinary skill in the art, items shown separately could be combined and some items could be separated. For example, some items shown separately in these figures could be implemented on single servers and single items could be implemented by one or more servers. The actual number of systems used to implement visual query processing and how features are allocated among them will vary from one implementation to another. [0094] Each of the methods described herein may be governed by instructions that are stored in a non-transitory computer readable storage medium and that are executed by one or more processors of one or more servers or clients. The above identified modules or programs (i.e., sets of instructions) need not be implemented as separate software programs, procedures or modules, and thus various subsets of these modules may be combined or otherwise re 34 arranged in various embodiments. Each of the operations shown in Figures 5-10 may correspond to instructions stored in a computer memory or non-transitory computer readable storage medium. [0095] Figure II illustrates a client system 102 with a screen shot of an exemplary visual query I 102. The client system 102 shown in Figure II is a mobile device such as a cellular telephone, portable music player, or portable emailing device. The client system 102 includes a display 706 and one or more input means 708 such the buttons shown in this figure. In some embodiments, the display 706 is a touch sensitive display 709. In embodiments having a touch sensitive display 709, soft buttons displayed on the display 709 may optionally replace some or all of the electromechanical buttons 708. Touch sensitive displays are also helpful in interacting with the visual query results as explained in more detail below. The client system 102 also includes an. image capture mechanism such as a camera 710. [0096] Figure II illustrates a visual query 1102 which is a photograph or video frame of a package on a shelf of a store. In the embodiments described here, the visual query is a two dimensional image having a resolution corresponding to the size of the visual query in pixels in each of two dimensions. The visual query 1102 in this example is a two dimensional image of three dimensional objects. The visual query 1102 includes background elements, a product package 1104, and a variety of types of entities on the package including an image of a person 1106, an image of a trademark 1108, an image of a product 1110, and a variety of textual elements 1112. [00971 As explained with reference to Figure 3, the visual query 1102 is sent to the front end server I 10, which sends the visual query 1102 to a plurality of parallel search systems (1 12A-N), receives the results and creates an interactive results document. [00981 Figures 12A and 12B each illustrate a client system 102 with a screen shot of an embodiment of an interactive results document 1200. The interactive results document 1200 includes one or more visual identifiers 1202 of respective sub-portions of the visual query 1102, which each include a user selectable link to a subset of search results. Figures 12A and 12B illustrate an interactive results document 1200 with visual identifiers that are bounding boxes 1202 (e.g., bounding boxes 1202-1i, 1202-2, 1202-3). In the embodiments shown in Figures 12A and 121, the user activates the display of the search results corresponding to a particular sub-portion by tapping on the activation region inside the space 35 outlined by its bounding box 1202. For example, the user would activate the search results corresponding to the image of the person, by tapping on a bounding box 1306 (Figure 13) surrounding the image of the person. In other embodiments, the selectable link is selected using a mouse or keyboard rather than a touch sensitive display. In some embodiments, the first corresponding search result is displayed when a user previews a bounding box 1202 (i.e., when the user single clicks, taps once, or hovers a pointer over the bounding box). The user activates the display of a plurality of corresponding search results when the user selects the bounding box (i.e., when the user double clicks, taps twice, or uses another mechanism to indicate selection.) [00991 In Figures 12A and 12B the visual identifiers are bounding boxes 1202 surrounding sub-portions of the visual query. Figure 12A illustrates bounding boxes 1202 that are square or rectangular. Figure 12B illustrates a bounding box 1202 that outlines the boundary of an identifiable entity in the sub-portion of the visual query, such as the bounding box 1202-3 for a drink bottle. In some embodiments, a respective bounding box 1202 includes smaller bounding boxes 1202 within it. For example, in Figures 12A and 12B, the bounding box identifying the package 1202-1 surrounds the bounding box identifying the trademark 1202-2 and all of the other bounding boxes 1202. In some embodiments that include text, also include active hot links 1204 for some of the textual terms. Figure 12B shows an example where "Active Drink" and "United States" are displayed as hot links 1204. The search results corresponding to these terms are the results received from the term query server system 118, whereas the results corresponding to the bounding boxes are results from the query by image search systems. [00100] Figure 13 illustrates a client system 102 with a screen shot of an interactive results document 1200 that is coded by type of recognized entity in the visual query. The visual query of Figure II contains an image of a person 1106, an image of a trademark 1108, an image of a product 1110, and a variety of textual elements 1112. As such the interactive results document 1200 displayed in Figure 13 includes bounding boxes 1202 around a person 1306, a trademark 1308, a product 1310, and the two textual areas 1312. The bounding boxes of Figure 13 are each presented with separate cross-hatching which represents differently colored transparent bounding boxes 1202. In some embodiments, the visual identifiers of the bounding boxes (and/or labels or other visual identifiers in the interactive results document 1200) are formatted for presentation in visually distinctive manners such as overlay color, overlay pattern, label background color, label background pattern, label font color, and 36 bounding box border color. The type coding for particular recognized entities is shown with respect to bounding boxes in Figure 13, but coding by type can also be applied to visual identifiers that are labels. [00101] Figure 14 illustrates a client device 102 with a screen shot of an interactive results document 1200 with labels 1402 being the visual identifiers of respective sub-portions of the visual query 1102 of Figure 1, The label visual identifiers 1402 each include a user selectable link to a subset of corresponding search results. In some embodiments, the selectable link is identified by descriptive text displayed within the area of the label 1402. Some embodiments include a plurality of links within one label 1402. For example, in Figure 14, the label hovering over the image of a woman drinking includes a link to facial recognition results for the woman and a link to image recognition results for that particular picture (e.g., images of other products or advertisements using the same picture.) [00102] In Figure 14, the labels 1402 are displayed as partially transparent areas with text that are located over their respective sub-portions of the interactive results document. In other embodiments, a respective label is positioned near but not located over its respective sub-portion of the interactive results document. In some embodiments, the labels are coded by type in the same manner as discussed with reference to Figure 13. In some embodiments, the user activates the display of the search results corresponding to a particular sub-portion corresponding to a label 1302 by tapping on the activation region inside the space outlined by the edges or periphery of the label 1302. The same previewing and selection functions discussed above with reference to the bounding boxes of Figures 12A and 12B also apply to the visual identifiers that are labels 1402. [00103] Figure 15 illustrates a screen shot of an interactive results document 1200 and the original visual query 1102 displayed concurrently with a results list 1500. In some embodiments, the interactive results document 1200 is displayed by itself as shown in Figures 12-14. In other embodiments, the interactive results document 1200 is displayed concurrently with the original visual query as shown in Figure 15. In some embodiments, the list of visual query results 1500 is concurrently displayed along with the original visual query 1102 and/or the interactive results document 1200. The type of client system and the amount of room on the display 706 may determine whether the list of results 1500 is displayed concurrently with the interactive results document 1200. In sore embodiments, the client system 102 receives (in response to a visual query submitted to the visual query server system) both the list of results 1500 and the interactive results document 1200, but only 37 displays the list of results 1500 when the user scrolls below the interactive results document 1200. In some of these embodiments, the client system 102 displays the results corresponding to a user selected visual identifier 1202/1402 without needing to query the server again because the list of results 1500 is received by the client system 102 in response to the visual query and then stored locally at the client system 102. [00104] In some embodiments, the list of results 1500 is organized into categories 1502. Each category contains at least one result 1503. In some embodiments, the categories titles are highlighted to distinguish them from the results 1503. The categories 1502 are ordered according to their calculated category weight. In some embodiments, the category weight is a combination of the weights of the highest N results in that category. As such, the category that has likely produced more relevant results is displayed first. In embodiments where more than one category 1502 is returned for the same recognized entity (such as the facial image recognition match and the image match shown in Figure 15) the category displayed first has a higher category weight. [001051 As explained with respect to Figure 3, in some embodiments, when a selectable link in the interactive results document 1200 is selected by a user of the client system 102, the cursor will automatically move to the appropriate category 1502 or to the first result 1503 in that category. Alternatively, when a selectable link in the interactive results document is selected by a user of the client system 102, the list of results 1500 is re ordered such that the category or categories relevant to the selected link are displayed first. This is accomplished, for example, by either coding the selectable links with information identifying the corresponding search results, or by coding the search results to indicate the corresponding selectable links or to indicate the corresponding result categories. [001061 In some embodiments, the categories of the search results correspond to the query-by-image search system that produce those search results. For example, in Figure. 15 some of the categories are product match 1506, logo match 1508, facial recognition match 1510, image match 1512. The original visual query 1102 and/or an interactive results document 1200 may be similarly displayed with a category title such as the query 1504. Similarly, results from any term search performed by the term query server may also be displayed as a separate category, such as web results 1514. In other embodiments. more than one entity in a visual query will produce results from the same query-by-image search system. For example, the visual query could include two different faces that would return 38 separate results from facial recognition search system 112-A. As such, in some embodiments, the categories 1502 are divided by recognized entity rather than by search system. In some embodiments, an image of the recognized entity is displayed in the recognized entity category header 1502 such that the results for that recognized entity are distinguishable from the results for another recognized entity, even though both results are produced by the same query by image search system. For example, in Figure 15, the product match category 1506 includes two entity product entities and as such as two entity categories 1502 - a boxed product 1516 and a bottled product 1518, each of which have a plurality of corresponding search results 1503. In some embodiments, the categories may be divided by recognized entities and type of query-by-image system. For example, in Figure 15, there are two separate entities that returned relevant results under the product match category product. [00107] In some embodiments, the results 1503 include thumbnail images. For example, as shown for the facial recognition match results in Figure 15, small versions (also called thumbnail images) of the pictures of the facial matches for "Actress X" and "Social Network Friend Y" are displayed along with sone textual description such as the name of the person in the image. [00108] Figures 16A-16B are flowcharts illustrating a process of responding to a visual query including a facial image, in accordance with some embodiments. Each of the operations shown these figures may correspond to instructions stored in a computer memory or non-transitory computer readable storage medium. Facial recognition search system 112-A receives, from a requester, a visual query with one or more facial images in it (1602). In some embodiments, the fact that the visual query contains at least one face is determined by the front end visual query processing server 110. In other words, when a visual query is processed by facial recognition search system I 12-A, at least a portion of the visual query image has been determined to contain a potential face. In some circumstances, the visual query contains a plurality of faces, such as a picture of two or more friends, or a group photo of several people. In some cases where the visual query comprises a plurality of facial irnages, the requester may only be interested in one of the faces. As such, in some embodiments when the visual query includes at least a respective facial image and a second facial image, prior to identifying potential image matches, the system receives a selection of the respective facial image from the requester. For example, in some embodiments the 39 system identifies each potential face and requests confirmation regarding which face(s) in the query the requested wishes to have identified. [001091 Images that potentially match a respective facial image are identified (1604). These images are called potential image matches. The potential image inatches are identified in accordance with visual similarity criteria. Also, the potential image matches are identified from one or more image sources identified in accordance with data regarding the requester (1606). In some embodiments, data regarding the requester is obtained from a requester's profile information. In some embodiments, the requester's profile information is obtained from the requester directly. Alternatively, or in addition, the requester's profile information is received from a social network. The potential image matches include images that are tagged, i.e., images that include personal identifiers for the person or persons in the images. In some embodiments, the one or more image sources include images from a requestor's social networking databasess, web album(s), photo sharing database(s), and other sources of images associated with the requested. Furthermore, in some embodiments, a database (940, Figure 9) of famous people's images is also included in the image sources searched for potential image matches. In some embodiments, the image sources searched for potential image matches also include images from the requestor's friends' or contacts' social networking database(s), web album(s), photo sharing database(s), and other sources of images associated with the requester. In embodiments that include images from a requestor's friends' or contacts' databases, a determination of which databases to include is made. For example, in some embodiments, databases of a pre-determined maximum number of friends or contacts are included. In other embodiments, databases of only direct social networking friends are included. [001101 Then one or more persons associated with the potential image matches are identified (1608). In some embodiments, the one or more persons are identified from personal identifier tags associated with the identified image matches. For example, the system may identify that Bob Smith, Joe Jones, and Peter Johnson are persons associated with potential image matches for a query including an image of a male friend because these three people were tagged in other images associated with the requestor, and these three people are visually similar to the facial image in the query. [001111 Images that potentially match a respective facial image are identified (1604). These images are called potential image matches. The potential image matches are identified in accordance with visual similarity criteria. Also, the potential image matches are identified from one or more image sources identified in accordance with data regarding the requester (1606). In some embodiments, data regarding the requester is obtained from a requester's profile information. In some embodiments, the requester's profile information is obtained from the 40 requester directly. Alternatively, or in addition, the requester's profile information is received from a social network. The potential image matches include images that are tagged, i.e., images that include personal identifiers for the person or persons in the images. In some embodiments, the one or more image sources include images from a requestor's social networking database(s), web album(s), photo sharing database(s), and other sources of images associated with the requester. Furthermore, in some embodiments, a database (940, Figure 9) of famous people's images is also included in the image sources searched for potential image matches. In some embodiments, the image sources searched for potential image matches also include images from the requestor's friends' or contacts' social networking database(s), web album(s), photo sharing database(s), and other sources of images associated with the requester. In embodiments that include images from a requestor's friends' or contacts' databases, a determination of which databases to include is made. For example, in some embodiments, databases of a pre-determined maximum number of friends or contacts are included. In other embodiments, databases of only direct social networking friends are included. [001121 The person-specific data includes social connection metrics, which are metrics of social connectivity between the respective identified person and the requester (1614). In some embodiments, the social connectivity metrics include metrics of social connectivity over one or more of the above mentioned applications. For example, the social connectivity metrics may take into account one or more of: whether the respective identified person and the requestor are friends on a social networking website, the quantity (if any) of email and/or IM messages exchanged by the requestor and the respective identified person, and whether the requester and the respective identified person follow each other's social micro-blog posts, etc. [001131 In some embodiments, the person-specific data for a respective identified person also includes characteristics derived from other images of the respective person (1616). In some embodiments, these characteristics include metadata information from the images such as date information, time information, and location information. In other embodiments, the characteristics derived from other images of the respective person comprises visual factors such as an indoor habitat factor, an outdoor habitat factor, a gender factor, a race factor, a glasses factor, a facial hair factor, a head hair factor, a headwear factor, and an eye color factor. In yet other embodiments, characteristics derived from other images of the respective person include occurrences information regarding an amount of occurrences of the respective person in the one or more image sources, and/or information regarding an amount of co-occurrences of the respective person and with a second person in images from the one or more image sources. [001141 Optionally, in some embodiments, the current location information for the requester and current location information for a respective identified person are obtained 41 (1618) by person location module 972 (Figure 9). For example, the current location of either the requester or the respective identified person may be obtained from a GPS receiver located in a mobile device, from an IP address of desktop device used by the person, from a home address or work address or the person, or from a published location of the person (such as, "I am currently at a conference in Boston"). [00115] Then an ordered list of persons is generated by ranking the one or more identified persons in accordance with one or more metrics of visual similarity between the respective facial image and the potential image matches and also in accordance with ranking information comprising at least the social connection metrics (1620). These and other factors affecting the ranking are discussed in more detail below with respect to Figure 17. [001161 The process continues as shown in Figure 16B. Optionally, an opt-in list is checked to and a determination is made as to whether one or more person identifiers are releasable to the requestor (1622), In some embodiments, this check is done when the potentially matching image(s) are from a source other than the requester's own account(s), or when the requestor's own accounts do not contain tagged images of the respective identified person. [001171 Then the requester is sent at least one person identifier from the ordered list (1624), thereby identifying one or more persons. In some embodiments, the person identifier is a name. In other embodiments, the person identifier is a handle, mail address, nickname or the like. In some embodiments, a representative picture, such as a profile picture, an image of the identified person that best matches the visual query is sent along with the person identifier. In such embodiments, when more than one person is identified as a potential match, a representative picture of each identified person is sent along with the response to the image query. In some embodiments, additional information such as contact information, or a snippet of a recent public post is also sent with the person identifier. In other embodiments, in addition to the person identifier, the connection found between the sequester and the person in the image is also returned. For example, a ranked result of Joe Smith, could include the statement "Joe Smith is listed as a contact in more than one of your accounts," or "You and Joe Smith are both members of the Palo Alto Tennis Club" or "You and Joe Smith are both friends with Karen Jones," Further Information such as the person's contact information, group affiliations, the names of the people in-between the requester and the person in the matched image according to the social graph may be included in the results returned to the requested. In some embodiments, the augmented information presented to the 42 requester is explicitly or implicitly specified by the requester (e.g., by configuration values in his profile, or by parameters in the visual query, or by the type of the visual query). In some embodiments, when more than one person identifier is sent to the requester, more information is provided for the top ranked identified persons than for the lower ranked identified persons. [00118] In some embodiments, a copy of the visual query (or portion of the query with the respective facial irnage) is also sent with the one or more person identifiers (1626). When more than one facial image was in the original visual query and one or more facial images are positively identified, in some embodiments, a copy of the visual query is also sent to one or more of the identified people in the visual query. Thus, if a group photo is taken, and multiple people want copies of it, the requester does not to have find contact information for them and manually send them a copy of the photograph. In some embodiments, a requester must first verify that copies should be sent to one or more of the identified people before they are sent. [00119] In some embodiments, a selection of a personal identifier is received from the requester (1628). Then, in response to the selection, data corresponding to the selected person identifier is sent to the requester (1630). In some embodiments this data includes one or more images associated with the person identifier, contact information associated with the person identifier, public profile information associated with the person identifier, etc. In some embodiments, the requester is given the option to store sonic or all of this information in the requester's contact list, or to update the requester's contact information for the identified person. In some embodiments, the information is associated with the requestor's visual query, or the portion of the query with the facial image corresponding to the person identifier is stored with contact list information. [00120] Furthermore, i some embodiments, the facial image of the visual query is stored as an additional image of a respective person corresponding to the selected person identifier (1632). In some embodiments, the image is stored in a previous queries portion of the image sources (938, Figure 9). In some embodiments, the requester is given an opportunity to annotate the image to include additional data. In instances where annotation data is entered by the requester, it is received and stored (1634) by facial recognition search system 112-A. The annotation module (968, Figure 9) accepts annotations to improve future facial recognition searches. For example, if the user annotates a picture of a person with the name of that person, that picture might be used in future facial recognition queries to 43 recognize the person. In some embodiments, for privacy reasons, the additional annotated pictures of a person may be used by facial recognition search system 112-A to augment the facial recognition process but are not returned as an image result to anyone but the original requester. In some embodiments, only the actual person identified in the visual query is allowed to make an image public (or available to people other than the requester). In some embodiments, once the person is positively identified, a request is sent to that person asking them if they will allow the image to be returned a result for future queries for people within their social network. [00121] In some embodiments, more than one image of the same person may be retrieved at step 1604. Once the potential matching images are retrieved and it is determined that the images are of the same person, which may be done by noting that the images both have the same personal ID, same or similar personal-specific data (name, address, and the like) or have same or similar social connections, the images will be associated with the same data and treated like a single unit for the rest of the processing steps. Optionally, if two or more images are returned with the same person identifier in step 1624, more than one retrieved image for the same person identifier are returned in the response to the image query. [00122 Figure 17 is a flowchart illustrating factors and characteristics used in generating an ordered list of persons that potentially match a facial image in a visual query. This flowchart provides more information regarding step 1620, discussed above. [00123] In some embodiments, various factors are used in determining a ranking score for a respective person in the ordered list of persons according to the social network connection metrics (1702). In some embodiments, an amount of communication between a respective person and the requester on the one or more comrnunication applications is determined, and then a ranking score for the respective person, is determined, wherein a factor in determining the ranking score for the respective person is the determined amount of communication between the respective person and the requester on the one or more communication applications (1704). The communications applications may include social networking applications, social micro-blogs, email applications, and/or instant messaging applications. For example, if a respective person has communicated extensively with the requester by one or more communications applications (e.g., extensive communications by e-mail and social network posts), then the requestor is likely to know the respective person quite well and thus the facial image in the visual query is more likely to be the respective 44 person. In some embodiments, this factor is only used when the amount of communication is above a pre-determined threshold (e.g., a set number of communications, a number of communications within a certain period of time, or a percentage of the total communications). In sore embodiments, facial recognition search system 112-A determines whether the amount of communication between the respective person and the requester on the one or more communication applications exceeds a threshold, and a factor in determining the ranking score for the respective person is the determination of whether the amount of communication between the respective person and the requester on the one or more communication applications exceeds the threshold. [00124] In some embodiments, a determination of whether the requester and a respectve person are directly connected in a respective social networking application is made, and then a ranking score for the respective person is determined, wherein a factor in determining the ranking score for the respective person is the determination of whether the requester and the respective person are directly connected in a respective social networking application (1706). For example, if the requester and the respective person are directly connected as friends, then the requestor is likely to know the respective person quite well and thus the facial inage in the visual query is more likely to be the respective person. [001251 In cases where the person-specific data for the respective person includes a plurality of characteristics, such as two or more of: name, address, occupation, group memberships, interests, age, hometown, personal statistics, and/or work information for the respective person, the same information is also retrieved for the requester, to the extent that such information is available to facial recognition search system 1 12-A. Then one or more personal similarity rnetrics are determined in accordance with an extent to which the person specific data of the requester is similar to the person-specific data of the respective identified person. A ranking score for the respective identified person is determined, wherein one or Inore factors in determining the ranking score for the respective identified person are the one or more personal similarity metrics (1708). For example, if the requester and the respective person are of similar age, similar occupation, and are members of similar groups, they are more likely to be friends and thus the facial image in the visual query is more likely to be the respective person. [00126] In circumstances where the current location information for both the requester and the identified person are successfully obtained, a ranking score for the respective 45 identified person is determined, wherein a factor in determining the ranking score for the respective identified person is whether current location information for the requester matches the current location information for the respective identified person (1710). For example, when both the requester and the respective person are determined to be at the same location, that proximity increases the likelihood that the facial image in the visual query is the respective person. And even more so, when the requester and the respective person are determined not to be at the same location, the lack of proximity greatly decreases the likelihood that the facial image in the visual query is the respective person. Furthermore, in some embodiments, a history or log of locations for both the requester and the identified person are retrieved and compared with each other for a match. in some embodiments, the location logs of the requester and identified person are further compared with a location (and/or date and time) characteristic derived from the query image itself. For example, if the query location information indicates the image was taken July 2 in Santa Cruz, CA, and the logs of locations for both the requester and the identified person also indicate that they were in Santa Cruz, CA on July 2, then this location match increases the likelihood that the facial image in the visual query is that of the respective person. [00127] In embodiments where the person-specific data for a respective person also comprises characteristics derived front other images of the respective person (which was discussed with respect to step 1616). the ranking is further in accordance with similarity between the received query and the characteristics derived from other images of the respective person (1712). Various factors are used in determining the ranking score for a respective person which are in accordance with these characteristics derived from other images of the respective person (1714). [00128] In some embodiments, the characteristics derived from other images of the respective person include image capture date (e.g., day of week, day or month, and/or full date) and tire information. Then one more similarity metrics is determined in accordance with an extent to which the received query has image capture date and time information similar to the date and time information of one or more other images of the respective person. A ranking score for the respective person is determined, wherein one or more factors in determining the ranking score for the respective person are the one or more similarity metrics (1716). In some embodirnents, the similarity metric is a Boolean value (e.g., yes/no or 1/0). In other embodiments, a similarity metric is a vector of Boolean values (e.g., same date 46 yes/no, within 1 hr ves/no, within 5 hrs yes/no, etc.). It can be a numeric value (e.g., between 0 and 1) that measures the similarity. In some embodiments the similarity metric is determined for each other image of the respective person, but in some embodiments a group value for all of the images of the respective person is determined. In some embodiments, another characteristic derived from the images is place/location information, which can be used as an additional or alternative similarity metric ad discussed above. For example, if the visual query has similar date, time, and/or location information as one or more other images, that similarity increases the likelihood that the facial image in the visual query is the respective person who was in the one or more other images having similar date, time, and/or location information. [00129] In some embodiments, the characteristics derived from other images of the respective person include occurrences information regarding an amount of occurrences of the respective person in images from the one or more image sources, In some of these embodiments, a factor in determining the ranking score for the respective person is the occurrences information for the respective person (1718). For example, if numerous other images include the respective person, then the requestor is likely to know the respective person quite well, which increases the likelihood that the facial image in the visual query is that of the respective person. [00130] In some embodiments, the characteristics derived from other imnages of the respective person include visual factors including one or more of: an indoor habitat factor, an outdoor habitat factor, a gender factor, a race factor, a glasses factor, a facial hair factor, a head hair factor, a headwear factor, a clothing factor, and an eve color factor. In some of these embodiments, one or more factors in determining the ranking score for the respective person include the visual factors for the respective person (1720). [00131] In sonic situations, the visual query includes a plurality of facial images. When more than one facial image is in the visual query, then interconnections between them can be helpful in identifying them correctly. For example, if they have strong social connection metrics or appear in other images together, those facts increase the likelihood that they are together in the query image as well. In some embodiments, the visual query includes at least a respective facial image and a second facial image. Images (herein called potential second image matches) that potentially match the second facial image in accordance with visual similarity criteria are identified. The potential second image matches are images from 47 one or more image sources identified in accordance with data regarding the requester. Then a second person associated with the potential second image matches is identified. For purposes of this determination, it is assumed that the second person is identified with a high degree of certainty. For each identified person as a potential match to the respective facial image, person-specific data that includes second social connection metrics of social connectivity to the second person are obtained from the plurality of applications. Then, an ordered list of persons is generated by ranking the one or more identified persons further in accordance with ranking information that includes at least the second social connection metrics. As such, a respective person's ranking is further in accordance with second social connection metrics comprising metrics of social connectivity to a second person in the query (1722). In other words, in some embodiments, both social connections to the requester and social connections to the second person are used in generating the ordered list of persons. [00132] In other embodiments, one or more of the other factors discussed above are compared between the second person and each person identified as a potential match to find a best match. For example, if the second person and a respective person are employed at the same company, appear in other images that have similar date/time information, or conmunication extensively with each other, then these factors can be used in identifying them correctly. In another example, characteristics derived from other images of the respective person include information regarding an amount of co-occurrences of the respective person and the second person in images from the one or more image sources; and when a ranking score for the respective person is determined, a factor in determining the ranking score for the respective person is the amount of co-occurrences of the person and the second person in images from the one or more image sources (1724). [001331 Figure 18A is a block diagram illustrating a portion of the data structure of a facial image database 114-A utilized by facial recognition search system 112-A. In some embodiments, the facial image database contains one or more images of a person 1802 obtained from one or more iniages sources identified in accordance with data regarding the requester. In some embodiments, facial image database 114-A also contains a unique ID 1804, or person identifier, for the person. Additional information regarding the person is associated with the person identifier 1804 and is stored in a database of person-specific data 964. Some or all of the additional information is then used in determining potential matches for a facial image in a visual query. For example, an ordered list of identified persons 48 associated with potential image matches is generated by ranking the persons in accordance with metrics of social connectivity to the requester, such as matching group memberships 1812 or strong social connections 1814. Data from the database of person specific data 964 is used in addition to the potential image being visually similar to the facial image in the visual query when determining an ordered list of identified persons. The database of person specific data 964 may include but is not limited to any of the following items for the person identified by the unique ID 1804: name 1806, address 1808, occupation 1810, group memberships 1812, social network connections 1814 (explained in more detail with regard to Fig. 18B), current location 1816, share preferences 1818, interests 1820, age 1822, hometown 1824, personal statistics 1826, work information 1828. This information is obtained from a plurality of applications such as communication applications, social networking applications, calendar applications, and collaborative applications. In some embodiments, the person specific data also includes characteristics derived from one or more images of the person 1830 as discussed with respect to Figure 18C. [00134] Figure 18B illustrates an example of social network connections 1814. In some embodiments, person-specific data for an identified person includes social connections metrics of social connectivity to the requester (identified as the querier in Figure 18B) which are obtained from a plurality of applications. The lines between the people in this figure represent one or more of their social connections to each other (such as a connection by email, instant message, and social networking website.) In some embodiments, the social distance between two people is used as a factor in determining a ranking score for the potential image matches. For example, if one potential matching image was an image of Person C and another potential matching image was an image Person Y, in sorme embodiments, the potential matching image of Person C would receive a higher social connectivity ranking factor (to be used in computing a ranking score) than Person Y, because, ignoring all other factors, it is more likely that requester was taking a picture of someone directly connected to the requester (Person C) than of someone three social network "hops" away (Person Y). Similarly, Person W would receive a higher social connectivity ranking factor than Person A since Person W is two social network "hops" away from requester, whereas Person A is three social network "hops" away from requester. In some embodiments, the social network connections for a requester are also used to determine which image sources to search in responding to the requester's visual query. For example, in some embodiments, images in accounts belonging to people with a direct social network 49 connection are included in the image sources searched for images matching a facial image in the visual query, while images in accounts belonging to persons who do not have a direct social network connection to the requester are not included in the image sources searched for images matching a facial image in the visual query. [001351 For some visual queries, other information from the database of person specific data 964 of Fig. 18A is used in conjunction with the distance or "hops" on a social network connections graph of Fig. 18B. For example, if the requester and the respective person live near one another, if they work in the same industry, are in the same social network "groups," and if both have mobile devices that are currently at the same location (as measured by, for example, GPS receivers in their mobile devices), the ranking score of the respective person may still be high even though that respective person is several "hops" away from the requester on a social network connections graph. In another example, if the respective person in a potential matching image is only one "hop" away from the requester on a social network connections graph, that respective person might be ranked high even despite a weak connection determined through the database of person-specific data 964 (such as both people being members of a large group membership, like sharing a religion or political party.) [001361 In some embodiments, the requester can identify certain information from the database of person-specific data 964 as being more important than other information from the database of person-specific data 964. For example, the requester might specify that information concerning the industry in which a person works be given higher weight than other person-specific data, because the requester is attending a work-related function and thus query images are likely to include facial images of other people working in the same industry as the requester. In other example, the requester might specify that information concerning age be given higher weight than other person--specific data, because the requester is submitting query images from a party (or other function) attended by people who are all or primarily of the same age. [001371 Figure 18C is a block diagram illustrating some Image derived characteristics 1830, which are derived from images of each person associated with the requester. In some embodiments, these derived characteristics (derived from at least one image of the person) are stored by person identifier in a database. These derived characteristics include one or more of (and typically two or more of): indoor habitat factor 1832, an outdoor habitat factor 1834, a gender factor 1836, a race factor 1838, a glasses factor 1840, a facial hair factor 1842, 50 a head hair factor 1844, a headwear factor 1846, clothing factor 1847, an eye color factor 1848, as well as occurrences information regarding an amount of occurrences of the respective person in the one or more image sources 1850, and information regarding an amount of co-occurrences of the respective person and with various additional people in images from the one or more image sources 1852. In some embodiments, the derived characteristics also include metadata information from the images such as date information 1854, time information 1856, and location information 1858 for each image. Each derived characteristic 1830, derived from other images of a respective person, is given a value and a weight which is used in determining the ranking score for a respective person when that derived characteristic is used. [00138] The foregoing description, for purpose of explanation, has been described with reference to specific embodiments. However, the illustrative discussions above are not intended to be exhaustive or to limit the invention to the precise forms disclosed. Many modifications and variations are possible in view of the above teachirngs. The embodiments were chosen and described in order to best explain the principles of the invention and its practical applications, to thereby enable others skilled in the art to best utilize the invention and various embodiments with various modifications as are suited to the particular use contemplated. 51
Claims (17)
1. A method of processing a visual query including a facial image performed on a computing system having one or more processors and memory storing one or more programs for execution by the one or more processors to perform the method, comprising: receiving from a requester, a visual query comprising one or more facial images including a respective facial image; identifying potential image matches that potentially match the respective facial image in accordance with visual similarity criteria, the potential image matches comprising images from one or more image sources identified in accordance with data regarding the requester; identifying one or more persons associated with the potential image matches; retrieving, for each identified person, person-specific data comprising social connection metrics of social connectivity to the sequester obtained from a plurality of applications selected from the group consisting of communication applications, social networking applications, calendar applications, and collaborative applications; generating an ordered list of persons by ranking the one or more identified persons in accordance with one or more metrics of visual similarity between the respective facial image and the potential image matches and in accordance with ranking information comprising at least the social connection metrics; and sending to the requester at least one person identifier from the ordered list.
2. The method of claim 1, further comprising: identifying a social connection between the sequester and at least one person of the one or more identified persons, in accordance with the social connection metrics of social connectivity and sending, to the requester, the identified social connection.
3. The method of claim 2, wherein the social connection is a direct or indirect social connection between the requested and the at least one person of the one or more identified persons.
4. The method of any of claims 1-3, further comprising: obtaining first information representing the current location of the requester; obtaining second information representing the current location of a person associated with a potential image match in the potential image matches; determining a ranking score for the identified person, wherein a factor in determining the ranking score for the identified person is whether current location information for the requester matches the current location information for the identified person; and determining whether to communicate an identity of the identified person based at least in part on (i) a current location of the requester, and (ii) the last known transient location of the identified person.
5. The method of any of claims 1-3, wherein identifying one or more persons associated with the potential image matches includes: obtaining first information representing current location of the requester; obtaining second information representing a last known transient location of a person associated with a potential image match in the potential image matches; and determining whether to communication an identity of the person based at least in part on (i) a current location of the requested, and (ii) the last known transient location of the person.
6. The method of claim 5, wherein the last known transient location of the person is a location of an electronic device associated with the person.
7. The method of any of claims 1-3, wherein the plurality of applications includes one or more communication applications selected from the group consisting of: a social micro-blog application, an email application, and an instant messaging application; the method further comprising: determining an amount of communication between a person in the one or more persons and the requester on the one or more communication applications; and 5 3 determining a ranking score for the person, wherein a factor in determining the ranking score for the person is the determined amount of communication between the person and the requester on the one or more communication applications. s.
The method of claim 7, further comprising: determining whether the amount of communication between the person and the requester on the one or more communication applications satisfies a threshold; wherein a factor in determining the ranking score for the person is the determination of whether the amount of communication between the person and the requester on the one or more communication applications satisfies the threshold.
9. The method of any of claims 1-3, further comprising: determining whether the requester and a person in the one or more persons are directly connected in a social networking application, and determining a ranking score for the person, wherein a factor in determining the ranking score for the person is the determination of whether the requester and the person are directly connected in the social networking application.
10. The method of any of claims 1-3, wherein the person-specific data for a person in the one or more persons further comprises characteristics derived from other images of the person; and the ranking for the person is further determined by a similarity between the received query and the characteristics derived from other images of the person.
11, The method of claim 10, wherein the characteristics derived from other images of the person include image capture date and time information; and the method further comprises: determining one or more similarity metrics in accordance with an extent to which the received query has image capture date and time information similar to the date and time information of the other images of the person; and 54 determining a ranking score for the person, wherein one or more factors in determining the ranking score for the person are the one or more similarity metrics.
12. The method of any of claims 10-11, wherein the characteristics derived from other images of the person include occurrences information regarding an amount of occurrence of the person in images from the one or more image sources; and a factor in determining the ranking score for the person is the occurrence information for the person.
13. The method of any of claims 10-12, wherein the characteristics derived from other images of the person comprises visual factors including one or more of: an indoor habitat factor, an outdoor habitat factor, a gender factor, a race factor, a glasses factor, a facial hair factor, a head hair factor, a headwear factor, clothing factor, and an eye color factor; and factors in determining the ranking score for the person include the visual factors for the respective person.
14. The computer-implemented method of any of claims 1-13, further comprising: prior to sending the requester the at least one person identifier, checking an opt-in list and determining that the at least one person identifier is releasable to the requester.
15. The computer-implemented method of any of claims 1-3, wherein for an identified person in the one or more persons, the person-specific data further comprises one or more of: name, address, occupation, group memberships, interests, age, hometown, personal statistics, and work information for the person; and the method further comprises: retrieving person-specific data for the requester that also includes one or more of: name, address, occupation, group memberships, interests, age, hometown, personal statistics, and work information for the person; determining one or more personal similarity metrics in accordance with an extent to which the person-specific data of the requester is similar to the person-specific data of the person; and determining a ranking score for the person, wherein one or more factors in determining the ranking score for the person are the one or more personal similarity metrics.
16. A computing system, for processing a visual query including a facial image, comprising: one or more processors for executing programs; and memory storing one or more programs to be executed by the one or more processors; wherein the one or more programs comprise instructions for implementing the method of any of claims 1-15.
17. A non-transitory computer readable storage medium storing one or more programs configured for execution by a computing system, the one or more programs comprising instructions for implementing the method of any of claims 1-15. 56
Priority Applications (3)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
AU2013245488A AU2013245488B2 (en) | 2009-08-07 | 2013-10-16 | Facial recognition with social network aiding |
AU2016201546A AU2016201546B2 (en) | 2009-08-07 | 2016-03-09 | Facial recognition with social network aiding |
AU2017200336A AU2017200336A1 (en) | 2009-08-07 | 2017-01-18 | Facial recognition with social network aiding |
Applications Claiming Priority (5)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US61/232,397 | 2009-08-07 | ||
US61/370,784 | 2010-08-04 | ||
US12/851,473 | 2010-08-05 | ||
AU2010279248A AU2010279248B2 (en) | 2009-08-07 | 2010-08-06 | Facial recognition with social network aiding |
AU2013245488A AU2013245488B2 (en) | 2009-08-07 | 2013-10-16 | Facial recognition with social network aiding |
Related Parent Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
AU2010279248A Division AU2010279248B2 (en) | 2009-08-07 | 2010-08-06 | Facial recognition with social network aiding |
Related Child Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
AU2016201546A Division AU2016201546B2 (en) | 2009-08-07 | 2016-03-09 | Facial recognition with social network aiding |
Publications (2)
Publication Number | Publication Date |
---|---|
AU2013245488A1 true AU2013245488A1 (en) | 2013-11-07 |
AU2013245488B2 AU2013245488B2 (en) | 2016-04-21 |
Family
ID=49515668
Family Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
AU2013245488A Ceased AU2013245488B2 (en) | 2009-08-07 | 2013-10-16 | Facial recognition with social network aiding |
Country Status (1)
Country | Link |
---|---|
AU (1) | AU2013245488B2 (en) |
Family Cites Families (1)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US7760917B2 (en) * | 2005-05-09 | 2010-07-20 | Like.Com | Computer-implemented method for performing similarity searches |
-
2013
- 2013-10-16 AU AU2013245488A patent/AU2013245488B2/en not_active Ceased
Also Published As
Publication number | Publication date |
---|---|
AU2013245488B2 (en) | 2016-04-21 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
US10515114B2 (en) | Facial recognition with social network aiding | |
US20190012334A1 (en) | Architecture for Responding to Visual Query | |
CA2770186C (en) | User interface for presenting search results for multiple regions of a visual query | |
US9087059B2 (en) | User interface for presenting search results for multiple regions of a visual query | |
AU2016201546B2 (en) | Facial recognition with social network aiding | |
AU2013245488B2 (en) | Facial recognition with social network aiding | |
AU2016200659B2 (en) | Architecture for responding to a visual query |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
FGA | Letters patent sealed or granted (standard patent) | ||
MK14 | Patent ceased section 143(a) (annual fees not paid) or expired |