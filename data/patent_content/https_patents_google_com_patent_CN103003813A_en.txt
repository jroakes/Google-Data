CN103003813A - Columnar storage representations of records - Google Patents
Columnar storage representations of records Download PDFInfo
- Publication number
- CN103003813A CN103003813A CN2011800217179A CN201180021717A CN103003813A CN 103003813 A CN103003813 A CN 103003813A CN 2011800217179 A CN2011800217179 A CN 2011800217179A CN 201180021717 A CN201180021717 A CN 201180021717A CN 103003813 A CN103003813 A CN 103003813A
- Authority
- CN
- China
- Prior art keywords
- data
- record
- row shape
- value
- shape band
- Prior art date
- Legal status (The legal status is an assumption and is not a legal conclusion. Google has not performed a legal analysis and makes no representation as to the accuracy of the status listed.)
- Granted
Links
Images
Classifications
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/20—Information retrieval; Database structures therefor; File system structures therefor of structured data, e.g. relational data
- G06F16/24—Querying
- G06F16/242—Query formulation
- G06F16/243—Natural language query formulation
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/20—Information retrieval; Database structures therefor; File system structures therefor of structured data, e.g. relational data
- G06F16/22—Indexing; Data structures therefor; Storage structures
- G06F16/221—Column-oriented storage; Management thereof
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/20—Information retrieval; Database structures therefor; File system structures therefor of structured data, e.g. relational data
- G06F16/24—Querying
- G06F16/245—Query processing
- G06F16/2458—Special types of queries, e.g. statistical queries, fuzzy queries or distributed queries
- G06F16/2465—Query processing support for facilitating data mining operations in structured databases
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F16/00—Information retrieval; Database structures therefor; File system structures therefor
- G06F16/30—Information retrieval; Database structures therefor; File system structures therefor of unstructured textual data
- G06F16/36—Creation of semantic tools, e.g. ontology or thesauri
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F17/00—Digital computing or data processing equipment or methods, specially adapted for specific functions
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F40/00—Handling natural language data
- G06F40/20—Natural language analysis
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F40/00—Handling natural language data
- G06F40/30—Semantic analysis
-
- G—PHYSICS
- G06—COMPUTING; CALCULATING OR COUNTING
- G06F—ELECTRIC DIGITAL DATA PROCESSING
- G06F40/00—Handling natural language data
- G06F40/40—Processing or translation of natural language
Abstract
A computer system accesses a collection of data records. Each record in the collection includes a plurality of data values and a plurality of data elements that identify semantics of corresponding data values from the plurality of data values. One or more of the data records each include multiple instances of a same data element and include data values that correspond to the multiple instances of the same data element. The computer system generates a collection of columnar stripes. The collection of columnar stripes includes the data values from each data record in the collection of data records. Each columnar stripe in the collection of columnar stripes includes all data values that correspond to a specific data element from each of the records in the collection of records.
Description
The cross reference of related application
The rights and interests of No. 61/321106 U.S. Provisional Application that the application requires to submit on April 5th, 2010 and No. 61/321688 U.S. Provisional Application submitting on April 7th, 2010.
Technical field
This document has been described technology, method, system and the mechanism that is used for generating and processing the row shape storage expression of recording generally.
Background technology
The disclosure relates generally to the large scale analysis data and processes.Such data are processed in network company and the industry of striding has become very general, especially owing to make it possible to gather the low cost storage of a large amount of commercial critical datas.The finger tip that these data is placed on analyst and engine has seemed more and more important; The interaction response time forms mass discrepancy in the data snooping of being everlasting, supervision, On-line consumer support, Quick-forming, data lines debugging and other task.Carry out IDA requirement highly-parallel, for example by scale, the packed data that uses current commodity disk to read a terabyte within a second will need tens thousand of disks.Similarly, the intensive inquiry of CPU may be in thousands of nuclear operations to finish within the several seconds.
Summary of the invention
Disclosed herein is a kind of for the expanding of data analysis, interactive ad-hoc inquiry system.By with multistage execution tree and row shape sentence by sentence layout combine, described system and method can move such as integrating inquiry fast and efficiently inquiry.Described the row shape storage expression that is used for nested record, described nested record is to concentrate the popular data model that uses in many network sizes and science data.According to an embodiment, record is broken down into the row band, and each row is encoded as the set of piece, and each piece comprises field value and repetition and definition class information.Class information uses the tree of field write device (writer) to generate, and the field level in its structure and the logging mode is complementary.Can effectively use finite state machine to form record from row shape data, this finite state machine reads the class information of field data and each field and value sequentially is attached to the output record.If only the subset of field need to be acquired, then can construct it and carry out the more more simple finite state machine of cheapness.By utilizing the attaching metadata of row shape storage expression storage such as constraint information, can support the inquiry of addition type in addition.
Multistage service tree is used to carry out inquiry.In one embodiment, root server receives the inquiry import into, reads metadata from table, and with this query routing next rank to the service tree.Leaf server and accumulation layer communicate and access the data in the local storage, and the data of wherein storing can be replicated, and read the row shape represent in the band of nested data.Each server can have corresponding to the inside of physics query execution plan carries out tree, and it comprises the input row are scanned and send the iterator set that utilization level information is carried out the result of the gathering of note and scalar function.In another embodiment, provide the inquiry allocator, its attribute based on inquiry is dispatched and balanced load them.The inquiry allocator becomes obviously slower than other server or provide fault-tolerant when copy (replica) becomes in the time of can't accessing at a server.The inquiry allocator can calculate the execution thread on the leaf server processing time histogram and when the processing time takies out-of-proportion time quantum, reschedule to another server.
Can inquire about row shape data on the spot.Row shape data are safeguarded and provided mechanism with to integrate the operability of supporting the data management instrument of the data analysis of interrecord structure from the record of row shape data at the generic storage layer.This system can and can read mass data fast for the scale of several processors.In some instances, specific embodiment can be implemented as one or more the following advantages that realize.Nested data can operate in the original place, so that data can be accessed and not be utilized data base management system (DBMS) to load this data.The execution time that can reduce to some extent with the time more required than other routine analyzer is carried out the inquiry of nested data.The row shape store data structure of realizing at the generic storage layer is so that a plurality of different routine analyzer can be accessed this row shape store data structure.
Alternative as embodiment described in claims and the above description, the present invention also can be described by one of following examples:
Other embodiment comprises the corresponding computer readable storage devices of storing instruction, when above-mentioned instruction by one or more treatment facilities (for example, when programmable computer processor) performed, each operation among the executive basis embodiment 1 to 13 described above.Other embodiment comprises system and device, and it comprises the computer readable storage devices of described storage instruction, when performed by one or more treatment facilities, and each operation among the above-mentioned instruction executive basis embodiment 1 to 13 described above.
One or more embodiments of the detail have been provided in accompanying drawing and the following description.Further feature of the present invention, target and advantage will be owing to description and accompanying drawing and claims and obviously.
Description of drawings
Fig. 1 illustrates nested data and represents according to (record-wise) contrast row shape that records.
Fig. 2 illustrates two nested records of sample and pattern thereof.
The row shape band that Fig. 3 illustrates the nested record of sample represents.
Fig. 4 is for the algorithm that record is divided into row.
Fig. 5 illustrates the automat for the record aggregate of complete.
Fig. 6 illustrates for the automat from two field aggregating records, and the record that produces of this automat.
Fig. 7 is used for making up the algorithm of record polymerization automat.
Fig. 8 is for the algorithm from row shape Data Integration record.
Fig. 9 has described to carry out the sample queries of polymerization in projection, selection and the record.
Figure 10 illustrates system architecture and the execution in the server node.
Figure 11 is the table of employed data set in the diagram experimental study.
Figure 12 is the figure of can be when reading from the local disk contingent performance collapse of diagram.
Figure 13 is the figure of diagram MapReduce and the execution of institute's descriptive system in the storage that contrasts record-oriented towards the row shape.
Figure 14 is the figure of diagram as the execution time of other function of service tree level of two aggregate queries.
Figure 15 is the histogrammic figure of illustrated process time.
Figure 16 is the diagram figure of the execution time when k inquiry is scaled 4000 nodes from 1000 before the system scale use.
Figure 17 is that diagram is as the figure of the number percent of institute's processing list of the function in the processing time of each plate (tablet).
Figure 18 illustrates the figure that the query responding time in the operating load per month distributes.
Figure 19 is the block diagram for the system of the row shape storage expression that generates and process nested record.
Figure 20 is the process flow diagram for the instantiation procedure that generates row shape data.
Figure 21 is as client or as the block diagram of computing equipment that can be used for realizing system and method described herein of one or more servers.
Same Reference numeral refers to same key element among each figure.
Embodiment
This document has been described technology, method, system and the mechanism that is used for generating and processing the row shape storage expression of recording.As an illustration, tissue can be stored the data from webpage in the record of nest information.This nest information can compile with row shape data memory format, and it makes it possible to use multistage execution tree to carry out the active data inquiry.Row shape data can be reintegrated as recording in order to be input to the routine analyzer that record-oriented data is operated.
More specifically, each record can be the instantiation of pattern of the form of definition record, wherein records according to pattern to create.For example, pattern can identify for storage about each field of the information of webpage and for the structure of field being organized with record and corresponding value thereof.When generating the record that is used for the description web page characteristics, for each field, record can comprise data element and corresponding value.Data element can come according to the definition in the pattern semanteme of definition value.Terminology data element and field can Alternates in this document.Field also index according to the combination of element and corresponding value.
Specific record can need not to comprise defined all fields of pattern.Therefore, pattern can be served as " template " that can therefrom select field for specific record.For example, pattern can comprise for the field about the information of the video content of webpage.If webpage does not comprise video content, then can not comprise coming the field of the definition of the self mode information relevant with video on the webpage corresponding to the record of this webpage.Therefore, some fields can be " optionally ".
Yet some fields in the record may be " requirements ".For example, " requirement " field in the pattern can provide the URL(uniform resource locator) (URL) of resource location of the document of webpage.Owing to can obtain each web document (namely from resource location, have the URL that can be used for each document) and owing to field may be required the information on the webpage (for example is further processed, determine whether content changes), so field may be requirement.
Field also may be " repeatably ".Be in the pattern and be defined as repeatably field and can in the instantiation of pattern, (that is, in record) repeatedly carry out repetition in the defined position of this pattern.For example, pattern can comprise the field that links to the document of webpage for definition.This pattern can only be specified this field single, is repeatably (for example, can link to particular webpage owing to some documents) but can indicate this field.Therefore, the record of webpage can comprise a plurality of fields of the value that identifies linked web pages.Repeating Field can be arranged in same levels and be nested under the father field of record (more discussing in detail as following).
The field of pattern (and therefore be in the record field) can be nested.In other words, can be the child who is referred to as other field of father field, grand parents's field etc. in some fields.In some instances, child node is the node that finds within a pair of opening after following father node closely or the closed brace in the pattern.Yet, can be to nested other embodiment (for example, using the beginning label of field and the end-tag of field) that utilizes.Therefore, outside the field (for example, being not the child's of any other field field) that is in highest level, each field can have father field.
Nested for being that conceptive relevant message block is helpful with Information Organization.Example before returning, pattern can comprise " Video " field." Video " field can comprise some child nodes that can identify video features (for example, how long video has, the form of video and the resolution of video).Therefore, when record was fabricated, if their father node does not occur, then child node can not be placed among the record.In other words, do not comprise that the record of the webpage of video can not comprise " video length " field, because record does not comprise " Video " field (i.e. the father of " VideoLength ").Make it possible to watch and can be the visually nested subordinate child who comes from father node of the application program of reference record (that is, child is indented (indent) right side at father field).
May be consuming time to millions of record analyses.In some instances, the user is interested in the data from single field, but each record must conduct interviews with its integral body.For example, the user can the requirement analysis program checks to identify and comprises no longer than ten minutes and have the record that the webpage of the video of " height " resolution is associated in millions of records each.Because each record can be stored as independent data structure, so may needing to be loaded in the data base management system (DBMS), each complete documentation records to determine whether record comprises the particular combinations of video length and resolution in order to inquire about this.
Load like this each and be recorded in separately that to execute the task required number of servers and finish the necessary time quantum of inquiry aspect may be too expensive.Be stored in together by all values that will stride the selected specific record of millions of records in the continuous part of storer and can obviously save time.From some records but be known as row shape storage (columnar storage) for this storage of the value of specific fields.By comparison, the information of specific record is known as the storage of record-oriented by the example of Coutinuous store in storer.
Yet, show special difficulty for the row shape storage of nested record.Field in the record can identify by its path, and this path can comprise enumerating (for example, GrandParent.Parent.Child) of field and father field.Because the one or more fields in the path can repeat, so may there be the some field instances with same paths title.Therefore, when the enumerating continuously of the row shape data of checking specific fields, need mechanism to identify which value and belong to which record, and what the relevant position of value in record be for those records of a plurality of values that comprise particular path.In other words, the value sequence of given row shape structure needs mechanism to come the structure of reconstruct record from value.
Be used for the mechanism that the structure from the record of row shape data is reconstructed is comprised each value storage " repetition " rank and " definition " rank for row shape data.Each " rank " can be numeral bit sequence.For example, " rank " 3 can be represented by two bits (for example, " 11 ").In another example, " rank " 5 can be represented by three bits (for example " 101 ").
The field that repeated recently in " repetition " rank indicated value path of storing for particular value.As an illustration, can be for field store one train value with path " Video.Resolution.Width ".Repetition levels " 1 " can indicate " Video " field to be repeated recently, and repetition levels " 2 " can indicate " Resolution " field to be repeated recently.Repeat recently to indicate from the value the record as the upper/lower positions, which field in the path " Video.Resolution.Width " (for example at first reaches twice counting, which field is at first run into twice), select this value from this position and upwards work towards the beginning of document.
For example, from the upwards work of position of " Width " value, each field is run into once.The second example of finding out each field need to march to the degree of depth (and may march to other nested) of next adjacent nested field.Therefore, may run into " Video " field (for example, because " Resolution " field is Optional Field or Repeating Field) that does not comprise any " Resolution " child.Therefore, " Video " field has been run into twice and therefore has been the field that repeats recently.Repetition levels " 1 " is assigned to this value.
Repetition levels " 0 " can indicate this field not comprise the value (for example, its up and down scan period is run into for the first time) of nearest repetition in record.In various examples, " requirement " field in the path does not have repetition levels.For example, if " Resolution " field is essential for " Video.Resolution.Width " path, then other scope of stage resolution ratio can be " 0 " or " 1 ".Because it appears in the record when field occurs at " Video ", so " Resolution " can not have rank always.Therefore, if " Resolution " is designated as rank " 2 ", then it is run at " Video " always before, and therefore can be designated with rank " 1 " never.Therefore, do not comprise that the repetition levels of the field that requires can make it possible to reduce other quantity of different resolution level, and can reduce other amount of bits of expression stage resolution ratio.
If the field in the above example " Width " is " optional " or " repetition " field, then record may not can comprise the value of " Width " field always.Therefore, the value in " Video.Resolution.Width " path row can specify when find " Video " or " Video.Resolution " path in record with a kind of mechanism, and " Width " field also is not instantiated in this record.This mechanism can be included in " definition " rank of each " Video " in the stored record in data " Video.Resolution.Width " row or " Video.Resolution " field and no matter whether " Width " field is instantiated." definition " rank can have been indicated the field physical presence what may (for example, because field is optional or repeatably) disappearance in " Video.Resolution.Width " path.
Therefore, still do not have corresponding " Resolution " child of instantiation in the record if field " Video " appears at, then can in " Video.Resolution.Width " row, define rank " 1 " by record.If field " Video.Resolution " appears in the record, but do not have corresponding " Width " child of instantiation, then can record definition rank " 2 ".If field " Video.Resolution.Width " appears in the record, then can record definition rank " 3 ".
Like this, can generate to the part in each the data element path in the record or data element path the definition rank.For example, path " Video.Resolution.Width " can have definition rank " 3 ", and it identifies the quantity of data element included in the path " Video.Resolution.Width ".As another example, path " Video.Resolution " can have definition rank " 2 ", it identifies the quantity of data element included in the path " Video.Resolution ", even " Width " data element is not instantiated in data recording.
Therefore, no matter when " definition " rank (number of undefined in fact defined field but it expresses possibility) less than the number of the field that can define, can identify " Width " field and not occur.
In various examples, " definition " rank is Boolean rather than integer.Can which comprise use Boolean rather than integer in the undefined unimportant situation of object in understanding.For example, the definition rank of the value of the Width field in " Video.Resolution.Width " path can be " sky ", and wherein which father field is system need not to understand and be instantiated." repetition " rank and other combination of " definition " level can be so that the structure of record can be rebuild.
The data rows of specific fields (for example, " Video.Resolution.Width " field) can comprise the value from this field of a plurality of records, corresponding repetition and definition rank (admitting that " disappearance " value may have repetition and definition rank) and header information.In some instances, value is by continuous and adjacent storage.In other words, if the value of " Video.Resolution.Width " field is 800 for the value of " 700 " and next " Video.Resolution.Width " field, then can read " 700800 " such as the part of these row of storing in the storer.In this example, the header in the row can identify each value and has fixed width (for example, being used for preserving the fixedly binary representation of numeral 700 and 800).
In some instances, institute's storing value can be represented by string.For example, the example of " Width " field can comprise value " Small " and " Medium ".In some instances, the value of various strings can be regular length (for example, null value can be added into the beginning of " Small " value or ending so that string is identical with the length of " Medium " value).Yet in some instances, each string of storing can comprise the identifier of the length that identifies string at the beginning part of string.For example, " small " value can comprise that this string of indication is the identifier of five number bit lengths (perhaps corresponding binary bits number).
Since value can be in row shape band Coutinuous store, so " repetition " and " definition " rank can be stored in the beginning of row shape band.In some instances, " repetition " and " definition " rank is stored in pairs for particular value (no matter be instantiated or lack).As an illustration, repetition levels 3 can be in front four bits of byte, stored, and definition rank 1 can be in rear four bits of byte, stored.Next byte in the header can comprise repetition levels and the definition rank of the next field instance (perhaps first example in the trailer record) in the record.
The quantity that is used for representing repeating and define other bit of level can be based on the value of maximum level.For example, if maximum repetition levels is 3, then repetition levels can utilize two bits to represent.If maximum repetition levels is 4, then repetition levels can utilize three bits to represent.Header can comprise the information that identifies repetition and other length of definition level.
In various examples, repetition levels can be in storer Coutinuous store, and the definition rank can be in storer Coutinuous store (for example, not paired).In various examples, repeat can be corresponding with it with the definition rank value (if value is instantiated) be stored in the group together.In other words, the information sequence in the row shape band can read as Value1:RepetitionLevel1:DefinitionLevel1:Value2:Repetiti onLevel2:DefinitionLevel2, etc.
Row shape band can be compressed to message block.For example, each row shape band can be divided into a chunk, and wherein each piece comprises its oneself header separately.First can comprise from front 800000 values in the band of 1,600,000 values and second can comprise rear 800000 values.The header of piece can comprise repetition and definition rank and can the represented row shape strip portion of this piece be analyzed and the additional information of this row shape band of reconstruct with helping.
In some instances, the piece header comprises " Assertion " value, and it is defined in the type of the data that find in the value of piece.For example, the piece of " Video.Resolution.Width " field can not comprise the value of any listing " Large " width resolution.Therefore, " Assertion " value can indicate this value only to comprise " Small " and " Medium " value.If inquiry carried out in the record that comprises " High " width resolution video, then described can be queried system and avoid.
System described in this document can carry out inquiry and be not record with the signal reconstruct in the row shape band row shape band, and will not be loaded into from the information of row shape band in the database and (for example, not use " insertion " clause).Therefore, visit data on the spot, this can provide with order of magnitude the saving of computational analysis time.
Inquiry system can adopt and be used to many clauses that relational database is inquired about.Yet, can adopt the other clause specific to non-relation data.For example, WITHIN clause can allow the Multi-instance of the field within the part of single record or record is carried out computing.Yet relational database possibly can't be stored the single field instance (for example, the expression of record) more than in delegation.Therefore, for the inquiry of relational database basically can't executive logging " interior " inquiry.
As WITHIN clause's example, the value of specific fields can multiply each other.Suppose that the query statement request is for specific record all values of " MutualFund.InterestRate " is multiplied each other together (wherein each record can for specific account-holder).Inquiry system can find single intrarecord all " MutualFund.InterestRate " values and they are multiplied each other together.
Can be the OMIT IF clause specific to another clause's example of the nested data of non-relation.This clause can be so that filter to remove field instance (for example, can create new row shape band or the record of having removed specific field) to record satisfying in the situation of specified conditions.As an illustration, can inquire about the value band of listing employee's salary, and can use the OMIT IF clause to generate to remove salary to be higher than the employee's of $ 90000 new band.
1. introduce
Can commodity in use and shared cluster carry out large-scale parallel computation.Referring to L.A.Barroso and U.Holzle.The Datacenter as a Computer:An Introduction to the Design of Warehouse-Scale Machines.Morgan﹠amp; Claypool Publishers, 2009.Cluster can the trustship shared resource a large amount of Distributed Application, have the operating load that significantly changes, and move at the machine with different hardware parameter.Individual computers device in the Distributed Application may spend more than longer many time of other machine and carry out Given task, perhaps may be because seizing of carrying out of fault or cluster management system and finishing never.Therefore, person's of falling behind (calculation task that for example, has obvious delay) and fault are processed to be realized carrying out fast and failure tolerant.Referring to G.Cazjkowshi.Sorting 1PB with MapReduce.Official Google Blog, Nov.2008. is positioned at http://googleblog.blogspot.com/2008/11/sorting-1pb-with-mapredu ce.html.
Employed data often were dereferenceds during network and science were calculated.Therefore, data model may be useful in these fields flexibly.Employed data result may be so that himself present nested expression in the message that programming language, distributed system exchange, the Network daily record etc.For example, the nested expression of data can comprise and includes other a plurality of fields of some son field levels.Some son fields can comprise corresponding data.Such data that are in network size are carried out normalization and are recombine in the calculating can be expensive.Nested data model becomes the basis that some structural datas are processed in main network company.
This document has been described a kind of system that very large data set is carried out interactive analysis in the shared cluster support of business machine.Be different from traditional database, it can operate nested data on the spot.Refer on the spot the ability of " original place " visit data, for example in such as the distributed file system of Google File System (referring to S.Ghemawat, H.Gobioff and S.-T.Leung.The Google File System.In SOSP, 2003), perhaps such as another storage aspect of Bigtable (referring to F.Chang, J.Dean, S.Ghemawat, W.C.Hsieh, D.A.Wallach, M.Burrows, T.Chandra.A.Fikes and R.Gruber.Bigtable:A Distributed Storage System for Structured Data.In OSDI, 2006).
This system can carry out many inquiries to such data, and it can require the order of MapReduce work routinely, but only uses the part execution time.Referring to J.Dean and S.Ghemawat.MapReduce:Simplified Data Processing on Large Clusters.In OSDI, 2004.Described system can in conjunction with MapReduce use that the output of MapReduce pipeline is analyzed or Rapid Establishment than the prototype of computation.Use the example of this system to comprise:
The analysis of network log and the network documentation that crawls;
The installation data of the application that the online marketplace provides;
The fault data of application product (crash data);
Multimedia playback statistics;
OCR result according to Books scanning;
Spam is analyzed;
The debugging of map tile;
The plate of being managed in the Bigtable example moves;
The result of the test that moves at distributed constructing system;
Magnetic disc i/o statistics for hundreds and thousands of disks;
Stride the execution journal of the MapReduce work of some data centers; And
Symbol in the code library and dependence.
Described system made is on the thought from web search and parallel database management system.At first, its framework is based upon on the concept of employed service tree (serving tree) in the distributed search engine.Referring to J.Dean.Challenges in Building Large-Scale Information Retrieval Systems:Invited Talk.In WSDM, 2009.As network search request, inquiry is to pushing away under the tree and rewriteeing in each step.The result of inquiry is integrated from the answer that receives than low level of tree by polymerization.
The second, described system provides language senior, similar SQL to express ad hoc inquiry.With such as Pig (referring to C.Olston, B.Reed, U.Srivastava, R.Kumar and A.Tomkins.Pig Lain:a Not-so-Foreign Language for Data Processing.In SIGMOD, 2008.) and Hive (Hive.http: //wiki.apache.org/hadoop/hive, 2009) and so on layer compare, this inquiry system is carried out local search and is not converted them to MapReduce work.
At last, described system uses the expression of row shape band, this so that its can from secondary storage read less data and since comparatively the compression of cheapness reduce the CPU cost.Row storages (D.J.Abadi, P.A.Boncz and S.Harizopoulos.Column-Oriented Database Systems.VLDB, 2 (2), 2009) that be used for to analyze relation data are not believed extend to nested data model.Described row shape storage format can be by MapReduce, Sawzall is (referring to R.Pike, S.Dorward, R.Griesemer and S.Quinlan.Interpreting the Data:Parallel Analysis with Sawzall.Scientific Programming, 13 (4), 2005) and FlumeJave (referring to C.Chambers, A.Raniawla, F.Perry, S.Adams, R.Henry, R.Bradshaw and N.Weizenbaum.FlumeJave:Easy, Efficient Data-Parallel Pipelines.In PLDI, 2010) support.
In the 4th part, this document has been described the row shape storage format for nested data.Provided the algorithm that is decomposed into row and they are reintegrated for nested record.
In the 5th part, the query language of processing for to the data of storing with row shape storer form has been described.The execution of this query language and this language is designed to the nested data of row shape striping are carried out valid function and and does not require nested record is reconstructed.
In the 6th part, provide the application that in the web search service system, is used for database processing to carry out the explanation of tree.Benefit to the effective response aggregate query is explained.
In the 7th part, provided the experiment of carrying out in system example.
Part 2: illustrative case
The slip-stick artist Alice that supposes web search company has expected being used for extracting new signal type from webpage.She moves and tortuous comprises input data from the content of webpage by (crank through), and the MapReduce that produces the data acquisition that comprises new signal works, and this data acquisition is stored in the distributed file system with millions of records.For the experimental result to her is analyzed, she starts the described system of this document and carries out some interactive commands:
DEFINE?TABLE?t?AS/path/to/data/*
SELECT?TOP(signal1，100)，COUNT(*)FROM?t
The order of Alice was carried out within the several seconds.She moves several other inquiries so that herself believe her algorithm and prove effective.She has found out the erratic behavior in the signal 1 and has carried out darker excavation by writing the FlumeJava program, and this program is closed the more complicated analytical calculation of execution to her output data set.In case problem is repaired, she just arranges the pipeline that the input data of importing into are proceeded to process.She has planned and has striden each dimension is carried out polymerization to the result of its pipeline several (canned) SQL query of prerecording, and add them to interactive console (for example, relevant with service service is made an explanation and webpage to carrying out refinement about the statistics of serving).At last, thus her data acquisition that it is new is registered in that other slip-stick artist can locate and inquire about this data acquisition fast in the catalogue.
Above situation may require the interactive operation between query processor and other data management instrument.The first element of such interactive operation is the accumulation layer that shares.Google File System is operable such distributed storage layer.Google File System manages the very large copy data collection of striding thousands of machines and tens thousand of disks.
In the situation of faulty hardware, also help save data although copy, and obtain the fast response time in the laggard's the situation existing.High performance shared accumulation layer is the key factor that enables of on the spot data management.Its permission conducts interviews to data and does not have load phase consuming time, and load phase is main resistance (wherein often may move tens of MapReduce before data base management system (DBMS) can load data and carry out the single inquiry analyzes) for the database of analyzing Data processing uses.For example, when data base management system (DBMS) was used to analyze data, database may need to use " insertion " order and be loaded with data.And described system can not need such loading.As the benefit that increases, can the Application standard instrument be handled by data in the file system easily, for example transfer to another cluster, change access privileges, perhaps analyze being used for based on filename identification data subset.
But the second key element that is used for the data management component of structure interactive operation is the storage format of sharing.The storage of row shape is used to flat (flat) relation data, carries out adaptive relation data but the storage of row shape is applicable to nested data model, allows this technology to be applied to network data.Fig. 1 illustrates all values of nested field in the data structure by the thought of Coutinuous store.For example, nested data in the expression of row, all values storage adjacent one another are of particular nest field (for example, field A.B.C) in the data structure, and in storer Coutinuous store.Therefore, can obtain from storage the value of field A.B.C, and not read from the value of field A.E and from the value of field A.B.D.
In addition, the value of identical specific fields can Coutinuous store in the different instances of data structure (for example, " record ").For example, the adjacent storage of value of the same field of the value of the field A.B.C of record " r1 " and record " r2 ".In contrast, in the expression of " record-oriented " of nested data, the value of all fields is by Coutinuous store in the specific record.In other words, the data value of specific fields is not gone here and there together.
The challenge that described row shape storage format faces is how to preserve all structural informations and can comes the reconstruct record from field subset arbitrarily.Next this document is discussed and can be filled in from it data model of the field of row shape storage format, and is used for storage is processed to the row shape algorithm and to the query processing of the data of row shape storage with rear steering.
The 3rd part: data model
This part is described and introduces some terms that use subsequently to institute's employed data model of descriptive system.The realization of increasing income organized and can be used as by described agreement buffer data model in the context of distributed system.Referring to (Protocol Buffers:Developer Guide.Can obtain at http://code.google.com/apis/protocolbuffers/docs/overview.html).This data model is based on strongly-typed nested record.Its abstract syntax by
τ＝dom|＜A1：τ[*|？]，...，An：τ[*|？]＞
Given, wherein τ is atomic type or record type.Atomic type among the dom comprises integer, floating number, string etc.Record is made of one or more field.Field i in the record has title A
iAnd optional multiplicity label.Repeating Field (*) can repeatedly occur in record.They are interpreted as value list, and namely the order that occurs in record of field is significant.Optional Field (?) can from record, lack.Otherwise field is essential (for example, must occur once definitely).
As diagram, Fig. 2 has described the pattern of definition record type " Document ", and it represents network documentation.This mode-definition is used agreement impact damper grammer." Document " has essential integer " Docld " and optional " Links ", and it comprises the tabulation of " Forward " and " Backward " clauses and subclauses of " Docld " that preserve other webpage." Document " can have a plurality of " Name ", and it can be the different URL that can quote by it document." Name " comprises the sequence of " Code " and (optionally) " Country " pairing.Fig. 2 also shows two sample record r1 and the r2 that meets this pattern.Interrecord structure uses indentation to summarize.Sample record r1 among Fig. 2 and r2 are used to herein interpreted algorithm in the whole text.Defined field has formed tree-like level in this pattern.The fullpath of nested field carries out note with band point note form, and for example, Name.Language.Code is the full qualified path of " Code " depicted in figure 2 field.
Nested data model is supported a kind of extensible mechanism for structural data being carried out serialized platform-neutral.Code Generator produces binding to the different programming languages such as C++ or Java.But the interactive operation ability of striding language uses that (on-the-wire) expression obtains on the normal binary line of record, wherein field value when they appear in the record by sequential placement.The MapReduce program of writing with Java by this way, can be used the record from the data source that is represented via the C++ storehouse.Therefore, if record represents to store with the row shape, then their quick integration can be helped the interactive operation with MapReduce and other data processing tools.
The 4th part: nested row shape storage
As shown in Figure 1, target is that all values of the given field of Coutinuous store is to improve recall precision.In this part, solved the harmless expression (the 4.1st part) of the interrecord structure of row shape form, fast coding (the 4.2nd part) and the effectively challenge of recording integrating (the 4.3rd part).
The 4.1st part: repeat and definition class value
The structure of record is not transmitted separately in the continuous tabulation of value.Give two values that fix on the field that repeats in the record, system possibly can't determine this value in which " rank " repeats (for example, two values are from the difference record or from identical recordings).Equally, if option field disappearance from record, then value can not single expression which sealing record and which is clearly defined then be not.Therefore introduced and repeated and other concept of definition level.Fig. 3 comprises the repetition of the former son field in the sample record depicted in figure 1 and defines the table that rank is summarized.
Repetition levelsConsider the field " Code " among Fig. 2, it has occurred three times in record " r1 ".In first " Name " field, " en-gb " then is in the 3rd " Name " field " en-us " and " en ".Distinguish for these being appeared in the row shape structure, repetition levels is attached to each value that to store with row shape structure.Which the Repeating Field place of repetition levels indicated value in the field path repeats.For example, field path Name.Language.Code comprises field " Name " and " Language " of two repetitions.Therefore, the repetition levels scope of Code is between 0 and 2.The beginning of rank 0 expression new record, rank 1 is illustrated in the nearest repetition of " Name " field, and rank 2 then is illustrated in the nearest repetition of " Language " field.
Can scan other explanation of level from top to bottom to record " r1 " as determining for field.Value " en-us " is at first run into and can carry out checks the field that repeats recently with in the sign Name.Language.Code path in record.In this example, also do not have field to repeat, and therefore repetition levels is 0.For the Name.Language.Code path, next run into value " en ", and field " Language " field that is identified as repeating recently.For example, from upwards scanning of value " en ", the field of first repetition is " Language " in the Name.Language.Code path.Therefore, repetition levels is 2 (for example, because " 2 " corresponding to " Language " field, reason is that " Language " is second field that repeats in the Name.Language.Code path).At last, when running into value " en-gb ", field " Name " repeated (" Language " field only occurs once) recently after Name, thereby repetition levels is 1.In other words, the repetition levels of value can be the recently numeral of the field of repetition of expression.Therefore, the repetition levels of Code value is 0,2,1 in the record " r1 ".
Notice that second " Name " field in the record " r1 " do not comprise any value of field " Code ".For the value of determining the field that " en-gb " is nested with as the 3rd example of field " Name " occurs and is not in the second example, when " en " on duty and " en-gb " store with row shape structure between them adding NULL value (seeing Fig. 3)." Code " is the essential son field of " Language " field, thereby the fact of the value of " Code " field disappearance has hinted the also not definition of " Language " field.In general, determine that the rank that the existence of nested record reaches can require additional information.
The definition rankEach value that has path " p " in the field, each NULL value particularly, have " definition rank ", it has been specified may actual the appearing in record of undefined field (for example, because this field is optional or repetition) in how many paths " p ".In order to illustrate, observed and recorded " r1 " does not have " Backward " field for " Links " field.And field " Links " is defined (in rank 1).In order to preserve this information, the NULL value with definition rank 1 is added into " Links.Backward " row.
In other words, for " Links.Backward " path specified level 1 indication as optional or " 1 " field of repeating (namely, " Links " field) is defined within the path that comprises two fields, these two fields are optional or repeat (that is, " Links " field and " Backward " field).Therefore, definition " 1 " indication " Backward " field is not instantiated.Similarly, " Name.Language.Country " that disappearance occurs in the record " r2 " carries definition rank 1, and the appearance of its disappearance in record " r1 " then has respectively definition rank 2 (in " Name.Language ") and 1 (in " Name ").To the above nondestructively keeping records structure of cataloged procedure of summarizing.
CodingAs storing in the storer, can store with header corresponding to each row of specific fields, this header comprises the continuous tabulation of repetition and definition value, is the continuous tabulation of substantive value subsequently.Each repetition and definition value can be used as bit sequence and store (for example, in single byte).For example, front four bits of a byte can be used to represent the repetition levels of particular value, and then four bits can be used to represent the definition rank.In some instances, header can comprise the definition of the length of a plurality of bits, thereby can not use delimiter.Therefore, can only use necessary bit.For example, if maximum definition rank is 3, then can use two bits of each definition rank.
Therefore, the expression of the row shape data of single field (for example, " Name.Language.Code " field) can be stored in the storer with byte sequence, and this byte sequence represents repetition and the definition rank of corresponding value sequence, is value sequence subsequently.Yet the NULL value can clearly not stored, because they can be determined by the analytic definition rank.For example, any definition rank less than the repetition in the field path and Optional Field quantity can represent NULL.Therefore, system can determine insertion where that should be in the tabulation of successive value or infer the NULL value.In some instances, not for the value storage definition rank that is defined always.Similarly, repetition levels can only just storage in situation about requiring.For example, definition rank 0 has hinted repetition levels 0, thereby the latter can be omitted.In fact, with reference to illustrated structure among the figure 3, can be not to " Docld " field store rank.
The expression of row shape data in storer can be broken down into set of blocks.Each piece can comprise the tabulation of packet header and field value subsequently, and this header comprises repetition and definition class information.Each header can comprise " constraint " value, admissible value scope in its indicator dog.Therefore, which piece is described system can identify and comprise the interested data of system.Constraint can also refer to other attribute of indicating value, and for example, whether this value is stored.Usually, " constraint " can be considered to " statement " about the value that in piece, finds what type.Each piece can be compressed.
The 4.2nd part: record is divided into row
The interrecord structure coding that has provided with row shape form is more than described.Challenge is how effectively to produce to have repetition and other row shape band of definition level.Below provide to calculate and repeat and other rudimentary algorithm of definition level.This algorithm recurrence is in interrecord structure and be that each field value calculates rank.As illustrated before, repeat and the definition rank even in the situation of field value disappearance, also need to calculate.But many data acquisitions are sparse, and have pattern with thousands of fields only have wherein hundred to be used in given record may not be to be unusual.In order to produce row shape band, create the tree of field write device (writer), the field level in its domain pattern is complementary.Basic thought is to upgrade them when the field write device has the data of oneself, unless and imperative otherwise do not attempt father's state is propagated to tree is lower.For this reason, sub-write device is inherited rank from his father.Sub-write device is adding whenever carrying out synchronously with his father's rank of new value.
Fig. 4 shows a kind of exemplary algorithm for record being decomposed into row.Process " DissectRecord " has been transmitted an example of " RecordDecoder ", and it is used to travel through binary-coded record." FieldWriters " is formed at the tree-like level of input pattern isomorphism.Root " FieldWriter " is sent to this algorithm for new record, and wherein " repetitionLevel " is set to 0.The groundwork of " DissectRecord " process is to keep current " repetitionLevel ".Tree position by current write device is with current " definitionLevel " unique number sum that is defined as the optional and Repeating Field in the field path.
All courtyards that the while circulation (the 5th row) of this algorithm comprises in given record and the enterprising row iteration of record assignment field.Whether set " seenFields " to field in sight tracking the in record.Sub-repetition levels " chRepetitionLevel " is set to the repetition levels of nearest Repeating Field, otherwise defaults to his father's rank (9-13 is capable).This process on nested record by recursive call (the 18th row).
Above " FieldWriters " that quotes of document adds up to circle and their inertia ground (lazily) is transmitted to more low-level write device.This can be performed by each the non-leaf write device that keeps (repeating definition) level sequences in order.Each write device also has " version " associated therewith numbering.Point out simply whenever the write device version is increasing progressively with that rank increases.Child remembers them, and synchronous stepfather's version is just enough with it.Once obtained its oneself (non-NULL) value such as the fruit write device, then it is undertaken its state and father synchronously by obtaining new rank, and only adds new data subsequently.
Because the input data can have thousands of fields and millions of records, may be infeasible in the storer so all ranks are stored in.Some ranks can be stored in the file on the disk temporarily.For (son) of sky record is carried out lossless coding, non-former son field (such as the Name.Language among Fig. 2) may need to have its own row shape band, and it only comprises rank does not still have non-null value.
The 4.3rd part: recording integrating
Effectively integrating record (for example, record " r1 " and " r2 ") from row shape data is crucial for record-oriented data handling implement (for example, Map Reduce).The subset of given field, target are that raw readings is reconstructed just as they only comprise selected field, and all other fields all are stripped from.Key idea is to create finite state machine (FSM), and it reads the rank of field value and each field, and value sequentially is attached to the output record.The FSM state is corresponding to the field reader of each selected field.State transformation utilizes repetition levels to carry out mark.In case the reader value of obtaining checks then next repetition levels is to determine using which type of next reader.Record FSM from beginning to ending state traversal once for each.
Fig. 5 shows the FSM that comes the reconstruct complete documentation in the example that we are moved with the piece described in the 4.1st part as input.In this example, node utilizes field to carry out mark and the edge utilizes repetition levels to carry out mark.Initial state is " Docld ".In case " Docld " value is read, FSM just is converted into " Links.Backward " state.After " Backward " of all repetitions value all had been exhausted, FSM jumped to " Links.Forward ", etc.
How to make up the FSM conversion in order to summarize, the next repetition levels that makes " l " to return for field " f " for current field reader." f " beginning in scheme-tree (for example, the pattern among Fig. 2), its ancestors are found in rank " l " and repeat and select first interior leaf field " n " of these ancestors.This provides FMS conversion (' f '; ' l ') → n.For example, make " the l "=1 next repetition levels that reads for ' f '=' Name.Language.Country '.Its ancestors with repetition levels " 1 " are Name, and its first leaf field is ' n '=' Name.Url '.
If only need the subset of field is obtained, then can make up the comparatively cheap better simply FSM of execution.Fig. 6 has described to be used for reading the FSM of field " Docld " and " Name.Language.Country ".The figure shows the output record " s1 " and " s2 " that automat produces.Notice that coding and integration algorithm have kept the enclosed construction of field " Country ".This application for the Country that needs access for example occurs among first Language of second Name is important.In XPath, this can be corresponding to similar/Name[2]/Language[1]/ ability that the expression formula of Country is assessed.
The process of structure FSMFig. 7 shows the algorithm of the finite state machine of integrating for the structure executive logging.This algorithm is got the field that should be filled in the record as input, the order that it sequentially occurs in pattern for them.This algorithm uses the concept of two fields " common repetition levels ", and this is their minimum common ancestor's repetition levels.For example, the common repetition levels of " Links.Backward " and " Links.Forward " equals 1.Second concept is the concept of " barrier ", and this is the next field after the current field in the sequence.Intuitively (intuition) be each field attempt to be processed one by one until reach barrier and need to jump to before the field seen.
This algorithm is made of three steps.Step 1 (6-10 is capable), to the common repetition levels of aftertreatment.These are guaranteed it is non-increase.For each repetition levels that runs into, the field of the fetch squence leftmost side-this is the field that will be changed to when " FieldReader " returns this repetition levels.In step 2, fill gap (11-14 is capable).This gap is because be not that all repetition levels all appear in the common repetition levels of calculating in the eighth row and occur.Step 3 (15-17 is capable), all be set to be equal to or less than the barrier rank to jump to the barrier field for all other conversion of level.If " FieldReader " produced such rank, then can continue to make up nested record and may need not to jump out of barrier.
Integrate recording process(shown in Figure 8) integration recording process is got " FieldReader " and (impliedly) and is had the set of FSM of the state transformation between the reader as input.In other words, this algorithm is at FSM and the enterprising line operate of row shape data and export constructed record.The variable reader keeps current " FieldReader " (the 4th row) in main routine.The variable reader keeps its value to be affixed to record and can be used for the last reader of all three processes shown in Figure 7.Main while circulation is in the 5th row.Obtain next value from current reader.If this value is then synchronous with the interrecord structure of current reader in the integrated method that is recorded in " MoveToLevel " by checking its definition rank determines not to be NULL, and field value is affixed to this record.Otherwise, can regulate and additional any value-this can carry out when null record occurring interrecord structure.At the 12nd row, use " complete definition rank ".Recall the definition rank factor and consider necessary field (only calculate and repeat and Optional Field).The complete definition rank is all included all fields in consideration.
It is the state (referring to the 22nd row) of " nextReader " that process " MoveToLevel " will record from the state transformation of " lastReader ".For example, suppose that " lastReader " " nextReader " is " Name.Language.Code " corresponding to " Links.Backward " among Fig. 2.With this order, the method stops nested record Links and begins new record Name and Language.Process " ReturnsToLevel " (the 30th row) is the counterparty of " MoveToLevel ", and it only stops current record and does not begin any new record.
In its line expression, record is the pairing of the field specifier of heel field value by layout.With XML similar (actual binary coding can be different), nested record can be considered to have " open label " and " closed label ".The description of " beginning " record refers to write open label, and " termination " record then refers to write closed label.
The 5th part: query language
The query language that described system can adopt based on SQL and be designed to effectively to implement in the nested storage of row shape.Here the various aspects of this query language is described.The statement of each similar SQL (with and the algebra operator that is converted to) (for example get one or more nested tables and pattern thereof, described in the 4.1st part, the set of the row shape data compression piece of expression table) as input, and produce nested table (for example, the modification example of row shape data) and output mode thereof.Fig. 9 has described to carry out the sample queries of polymerization in projection, selection and the record.This inquiry is assessed on the r2} at the table t={r1 from Fig. 2.Field is quoted with path expression.Although do not exist record to make up device (constructor) in this inquiry, should inquiry produce nested result.
In order to explain the behavior of this inquiry, consider to select operation (WHERE clause).The tree of tape label thought in nested record, and wherein each label is corresponding to field name.Select operator to wipe out the branch that does not satisfy specified requirements in this tree.Therefore, those nested records that wherein defined " Name.Url " and begun with " http " have only been kept.Next, consider projection.Each scalar expression among the SELECT clause is with the nested rank identical with the maximum input field of employed repetition in this expression formula and send (emit) value.Thereby series winding connects expression formula and sends " Str " value with the rank of " Name.Language.Code " in the input pattern.
The COUNT expression formula has illustrated polymerization in the record.This is aggregated within each " Name " subrecord and carries out, and number appears in " Name.Language.Code " that send as non-negative 64 integers (uint64) for each " Name ".Therefore, the WITHIN statement makes it possible to go interior polymerization.In other words, the record of same names can be grouped together in the identical recordings or under the identical child.By comparison, may just can't operate record in the row the SQL that nested data operate.
This language is supported between nested subquery, record and is recorded interior polymerization, top-k, associating, user-defined function etc.These features gather some discuss at experimental section.As an additional example, described query language comprises OMIT IF statement, its can the row of filter value in group.For example, each in the thousands of records can comprise " Cost " field of some repetitions, and they include digital value.The user of query language may want the value sum in field to lose all records above in the situation of number " 20 ".Therefore, the user can adopt OMITIF to state to generate the tabulation that " Cost " that add up in each record is equal to or less than 20 record.
The 6th part: query execution
Tree-like frameworkDescribed system sets to carry out inquiry (seeing Figure 10) with multistage service.Root server receives the inquiry import into, reads metadata from table, and with the next rank of query routing to the service tree.Leaf server and accumulation layer communicate or access the data on the local disk.The many inquiries that operate in institute's descriptive system are single sweep operation polymerizations; Therefore, this document is paid close attention to those is made an explanation and they are used for the experiment of next part.Consider following simple clustering:
SELECT?A，COUNT(B)FROM?T?GROUP?BY?A
When root server received above inquiry, it determined to comprise all plates of table " T " and this query rewrite is as follows, the horizontal partitioning that its mesoplate is namely shown:
SELECT?A，COUNT(B)FROM?T?GROUP?BY?A
Table
node 1 that is sent to rank 1 place that is in the service tree ..., the result of the inquiry of n:
The inquiry dividerDescribed system is multi-user system, for example can carry out simultaneously some inquiries.The inquiry divider is dispatched and balanced load them based on the priority of inquiry.Another role be a server become more than other server more slowly many or plate copy become and provide fault-tolerant in the time of can't accessing.
Handled data volume is often greater than the quantity of the processing unit that can be used for carrying out in each inquiry, and this processing unit is known as time slot.Time slot is corresponding to the execution thread on the leaf server.For example, all use the system of 3000 leaf servers of 8 threads to have 24000 time slots.Thereby, can be that the table of 100000 plates is processed by each time slot being specified about 5 plates come span.During query execution, process for a long time if the plate employing is out-of-proportion, then system re-starts scheduling to this plate on another server.Some plates may need repeatedly to be redistributed.
Leaf server read the row shape represent in the band of nested data.Piece in each band is taken out asynchronously in advance; Read in advance high-speed cache and usually obtain 95% hit rate.Plate carries out three tunnel assignment usually.When leaf server can't be accessed a plate copy, it turned to another copy.
The inquiry divider is respected (honor) and is specified the before parameter of the plate minimum percent of necessary scanning of return results.As described below, such parameter be set to lower value (for example, 98% rather than 100%) often can be so that carry out obviously and accelerate, particularly when using less replicator.
Describe such as the right-hand side of Fig. 7, each server can have the inner tree of carrying out.Internal tree comprises the assessment of scalar expression corresponding to the physics query execution plan.Preferably, most of scalar functions are generated the code of particular type.Basic executive plan is made of one group of iterator, they scan and send the input row with walking in step with each other and utilize correct repetition and definition rank to carry out the cluster of note and the result of scalar function, and this has walked around recording integrating fully during query execution.
Some inquiries of institute descriptive system carry out such as top-k and different countings (count-distinct) use known single sweep operation algorithm to return approximation.
The 7th part: experimental data
This part has provided the experimental evaluation of institute's descriptive system on some data acquisitions, and has checked the storage of row shape for nested validity of data.The attribute of employed data acquisition is summarized in Figure 11 in the research.With unpressed non-replication form, data acquisition has occupied the space of an about GB.Except a table that is copied by two-way, all tables are copied by three the tunnel, and comprise from the plate of 100K to 800K variable-size.This part, illustrates subsequently the storage of row shape and how to benefit the MapReduce execution as beginning with the master data access characteristics on the check single machine, and concentrates at last the performance of institute's descriptive system.During conventional commercial operation, the system example that experiment moves outside many other application in two data centers is carried out.Below employed table and field name processed by anonymity.
Local diskIn first experiment, the 1GB fragment that comprises the capable table T1 of about 300K by scanning scans to check that the row shape stores the memory property balance (seeing Figure 12) of relative record-oriented.Data are stored on the local disk and take about 375MB in the array of compressed shape represent.The form of record-oriented uses more serious compression but to produce about identical size at disk.This experiment provides the double-core Intel machine of the disk that 70MB/s reads bandwidth to carry out having.All report times all cool off; OS is washed away before being cached at each scanning.
Figure 12 shows five width of cloth figure, illustrates for the field subset to read and decompressed data, and integrates and separate the used time of new record.Figure (a)-(c) has summarized the result of row shape storage.Each data point in these diagrams is to average by the measurement to 30 operations to obtain, and selects at random the row set of given radix in therein each.Figure (a) shows and reads the reconciliation compression time.Figure (b) has added integrating the required time from the nested record of row.Figure (c) shows will be with how long record being resolved to strongly-typed C++ data structure.
Figure (d)-(e) has described the time for the data in the storage of access record-oriented.Figure (d) shows and reads the reconciliation compression time.The bulk time spends in the decompression; In fact, packed data can read from disk with the only about half of time.Indicated such as figure (e), resolve reading and conciliate compression time and added other 50%.These costs comprise unwanted field for all fields, pay.
When reading several row, the gain that the row shape represents may be approximately an order of magnitude.The acquisition time that is used for the nested data of row shape can be with the quantity linear growth of field.Recording integrating and parsing may be expensive, may be the twice of execution time.Observe similar trend at other data acquisition.The problem of a nature is to inquire where where the top of diagram and bottom, namely begin to be better than the storage of row shape according to being stored in of record if intersecting.According to experience, close and change but the point of crossing can be positioned at dozens of field cross datasets, and depend on whether need recording integrating.
Map Reduce and institute's descriptive systemNext illustrate that MapReduce and institute descriptive system compare the execution of record-oriented data for the row shape.In this case, it is the most remarkable to access single field and performance gain.Can use the result of Figure 12 to infer for the execution time of a plurality of row.In this experiment, the average number of the item in the his-and-hers watches " T1 " in the field " txtField " is counted.MapReduce carries out and carries out with following Sawzall program:
numRecs：table?sum?of?int；
numWords：table?sum?of?int；
emit?numRecs＜-1；
emit?numWords＜-CountWords(input.txtField)；
The number of record is stored in the variable " numRecs ".For each record, the number of " input.txtField " middle term that " numWords " increase " CountWords " function returns.After this program was carried out, average item frequency can be calculated as numWords=numRecs.In SQL, this calculating is expressed as:
Q
1：SELECT?SUM(CountWords(textile))/COUNT(*)FROM?T1
Figure 13 shows two MapReduce work on the logarithm scale and the execution time of institute's descriptive system.Two MapReduce are operated in the upper operation of 3000 workers (for example, server).Similarly, 3000 node instance of native system are used to carry out inquiry Q
1Described system and list the array of compressed shape data that MapReduce reads 0.5TB, by contrast, the MapReduce on the record has then read 87TB.Illustrated such as Figure 12, MapReduce by switch to row shape storage from record-oriented efficient have magnitude gain (from a few hours by several minutes).Then realized another magnitude (from several minutes to the several seconds) by using institute's descriptive system.
The service tree topologyIn next one experiment, illustrate the impact of the service tree degree of depth for the query execution time.Carry out two GROUP BY inquiries at table T2, the single sweep operation on each usage data is carried out.Table T2 comprises 24,000,000,000 nested record.Each record has the Repeating Field item that comprises digital quantity.Field item.amount repeats in data acquisition about 40,000,000,000 times.The first inquiry adds up item quantity by country:
Q
2：SELECT?country，SUM(item.amount)FROM?T2
GROUP?BY?country
The packed data that it returns hundreds of records and reads about 60GB from disk.Next inquiry utilizes alternative condition that GROUP BY is carried out in the text field territory.It reads about 180GB and produces about 1,100,000 different territories:
Q
3：SELECT?domain，SUM(item.amount)FROM?T2
WHERE?domain?CONTAINS’.net’
GROUP?BY?domain
Figure 14 shows the execution time as each inquiry of the function of topology server.In every kind of topology, the quantity of leaf server is held constant at 2900, thereby can suppose identical accumulation sweep velocity.In 2 grades of topologys (1: 2900), single root server directly and leaf server communicate.For 3 ranks, use 1: 100: 2900 setting, i.e. the extra level of 100 intermediate servers.4 grades of topologys are 1: 10: 100: 2900.
When in the service tree, using 3 ranks, inquiry Q
2In 3 seconds, move and benefit from extra rank manyly.By comparison, Q
3Execution time owing to parallel the reducing by half that increases to some extent.With 2 ranks, Q
3Root server breaks away from chart, because need to be similar to the result who receives from thousands of nodes sequentially polymerization.This experiment illustrates the polymerization of returning many groups and how can benefit from multistage service tree.
Every plate histogram Figure 15 shows for Q
2And Q
3Concrete operation plate how soon obtain the processing of leaf server.The point of being electroplated for when available time slot is carried out at plate begins Measuring Time, has namely got rid of and has waited for the time that spends in the work queue.This measuring method has been separated out the effect of other inquiry of carrying out simultaneously with the factor.Area under each histogram is corresponding to 100%.As Figure 15 is indicated, Q
2(or Q
3) 99% plate obtained in (or two seconds) at one second processing.
Polymerization in the recordAs another experiment, as its run time check inquiry Q on table T3
4Performance.This query specification polymerization in the record: it is counted all records, and the summation of the a.b.c.d value that wherein occurs in the record is greater than the summation of a.b.p.q.r value.Field is carried out repetition with different stage nested.Because row shape band, only read (the 70TB) 13GB from disk, and inquiry finishes with 15 seconds.Not supporting in the nested situation, will be expensive in this inquiry of T3 operation.
Q4：SELECT?COUNT(c1＞c2)FROM
(SELECT?SUM(a.b.c.d)WITHIN?RECORD?AS?c1，
SUM(a.b.p.q.r)WITHIN?RECORD?AS?c2?FROM?T3)
ExtensibilityFollowing description of test system trillion the record tables on extensibility.The inquiry Q that goes out shown below
5The number of selecting front 20 aid and them in table T4, to occur.The packed data of following inquiry scan 4.2TB.
Q5：SELECT?TOP(aid，20)，COUNT(*)FROM?T4
WHERE?bid＝{value1}AND?cid＝{value2}
This inquiry is carried out with four kinds of configurations of system, from 1000 to 4000 nodes of scope.Execution time is among Figure 16.In each run, total the CPU time that mistake spends is approximately uniform, be approximately 300K second, the time of user institute perception, then approximately linear ground reduced with the increase of system size.The system that this results suggest is larger can to equally effective than mini system, still allow to carry out faster in the resource use.
The person of falling behind(Straggler).The person of falling behind for example may be because the machine of executing the task has operational issue or this machine is not the task (for example, plate being processed) that enough actively and not is performed when processing given task with higher priority.Following inquiry Q
6Table T5 at trillion row carries out.Compare with other data acquisition, T5 is copied by two-way.Therefore, it is higher that the person of falling behind has delayed the possibility carried out, reason be since the chance that work is rescheduled still less.
Q
6：SELECT?COUNT(DISTINCT?a)FROM?T5
Inquiry Q
6Read the packed data of 1TB.The ratio of compression of institute's search field is approximately 10.As indicated among Figure 17, the processing time of 99% plate is lower than the every plate of every time slot 5 seconds.Yet when the system at 2500 nodes carried out, the fraction plate took longer time slot, and query responding time is several minutes from slowing down less than one minute.Next part is summarized experimental result.
The 8th part: observe
Figure 18 distributes at the query responding time that the logarithm scale shows in the typical monthly operating load of institute's descriptive system.As Figure 18 was indicated, the great majority inquiry was processed in 10 seconds, is in well in the mutual scope.Some inquiries have obtained the scanning handling capacity near record p.s. 1,000 hundred million in busy cluster, and on custom-built machine even higher.More than the suggestion of given experimental data is following observes:
Can in the disk resident data set of several records, carry out based on the inquiry that scans with interactive speed;
Can realize being listed as extensibility with the number of servers approximately linear for the system that comprises thousands of nodes;
MapReduce can equally benefit from the storage of row shape to DBMS;
Recording integrating and parsing are expensive.(on the query processing layer) software layer can be optimized to directly consumption towards the data of row;
MapReduce and query processing can be used in the mode of complementation, and the output of a layer can provide the input of another layer;
In multi-user environment, larger system can benefit to provide simultaneously the user of better quality to experience from scale economics;
If it is acceptable that relative precision is compromised to some extent to speed, then inquiry more early stopping but still see most of data; And
The piece of the data acquisition of network size can be by rapid scanning, although may increase the amount in processing time to last several percentage points.
Figure 19 is be used to the row shape storage expression that generates nested record and to the block diagram of its system that processes.Record and pattern 1902 that record maker 1904 generates from the nested data of data source 1920.Data in column-generation device 1908 receiving records 1906 and pattern 1902 inputs and the output expression record 1906 are the row shape band of row shape form still.Row shape data 1910 can be inquired about in order to produce the different sets of output row 1914 on the spot by inquiry system 1912.Row shape data 1910 can also be recorded integrator 1916 and integrate the record form of getting back to.In the record 1918 that the recording integrating device is exported each comprises the subset from the field of the raw readings in the set 1906.Output record 1918 can (for example, MapReduce) operate on it by the DAP based on record.
More specifically, data source 1920 can comprise non-structured in fact data.Destructuring means that these data can comprise the element that represents structure in fact, but whole Information Spectrum may be by similarly structuring.As an illustration, data source 1920 can comprise in millions of websites the source code of each.Although each website comprises structure to a certain degree, the content of each website is not to generate based on sharing model.Standard can be generally manages the form of website, but the content of field and place not by single kind of pattern and stipulate between each and each website.In some instances, the information in the data source 1920 is not stored in the share storage layer 1922, but directly the external source from the internet pulls.
Therefore, each record 1906 can comprise according to pattern 1902 structurized data.Structured data can comprise field, the voice that it can presentation data value and the structural relation of data value.Therefore, can reference model with the additional definitions information that obtains data value (for example, the actual expression of the data value of stored digital what or webpage represent what and with the relation of other value).
Each record 1906 can comprise nested field and data value.Nested record can comprise more than one same names or the field in path.Yet the field with same names or path structurally can be arranged in the diverse location of specific record.For example, the defined single field possibility of pattern can be repeatedly.In addition, field can have son field (that is, nested field).Therefore, specific fields can record toply carry out repetition, and field repeat at every turn can comprise or can not comprise specific son field.In other words, record can comprise the example of son field in the some parts of record, but does not then comprise in the other parts of record.
The set of record 1906 can be converted into row shape data 1910 to add the processing of information in the speed recording.For example, if the record amount of gathering in 1906 is billions of, and each record can comprise hundreds of different fields, and then the analysis of record may be time intensive, is needed and wherein need the information on a small amount of field.This is because each record in the set 1906 is stored with the out of Memory from this record.That is to say that each is recorded in the continuous part of storer and is grouped in together (for example, as illustrated in the describing of " record-oriented " of the nested data of Fig. 1).
By comparison, row shape data 1910 comprise row, the information of single field in each row memory module 1902 (for example, as illustrated in the describing of " towards row " of nested data among Fig. 1).Therefore, if field is a byte long, the row that then are used for field can be the magnitude of billions of bytes (for example, byte of each record) rather than billions of record (for example, wherein the size of each record may be a megabyte).The 4.2nd part that operates in of column-generation device 1908 is described in " record being divided into row " in more detail.The storage format of row shape data 1910 is described in the 4.1st part " repeats and the definition rank " in more detail.
Row shape data 1910 can use inquiry system 1912 directly to inquire about.In other words, row shape data 1910 can be inquired about in situation about data not being loaded in the database.When carrying out inquiry, inquiry system can receive the table of row shape data as input.In some instances, also receiving mode 1902 conduct inputs of inquiry system.Row shape band can with pattern storage together with carry out data from line description.Inquiry system allows row shape data executable operations in order to generate the row 1914 of output information.Output row 1914 can comprise the subset such as value represented in the determined row shape of the ad hoc inquiry data 1910.In some instances, inquiry system output record 1918 rather than row 1914 are perhaps also exported record 1918 except row 1914.
For example, inquiry system 1912 can receive the first inquiry, and as response, can resolve by the set of selecting data rows and generation output row, these output row provide the title of all webpages with one or more videos and the video number of each webpage.Inquiry system can receive the second inquiry, and as the second set that responds output output row, it provides the URL of each webpage that generates in nearest 15 minutes.Can be not included in the set corresponding to the output row of ad hoc inquiry 1914 from the out of Memory of row 1910.
May be by row shape data not being operated as the data of row shape data 1910 storage but the Analysis Service that record operates is conducted interviews.Therefore, recording integrating device 1916 can receive row shape data and input from the integration record conduct of row shape data.The processing that record is integrated is described in the 4.3rd part " recording integrating " in more detail.
Although being recorded in the set 1906 may be available, recording integrating device 1916 makes it possible to generate the set of records ends of the field subset that comprises the record in the set 1906.For example, the record in this set can comprise thousands of different fields.The user only may want to move need to be from two fields but not the routine analyzer of the record-oriented of the knowledge of all records.Therefore, recording integrating device 1916 can generate the recording of information set that only comprises on institute's request field.By this way, can develop a plurality of output set of records ends 1918 for the difference analysis or for different routine analyzers.More quicker than the analysis that the larger record that may find in the necessary pair set 1906 travels through to the analysis meeting than small records.
More than the description of the operation of system 1900 is illustrated the example that set of records ends 1906 comprises the record that formats according to pattern 1902 and generates row shape data 1910 from the single set of the data of this similar structure.In various examples, a plurality of patterns 1902 can be used to generate the set of records ends of the set 1906 of the record that comprises many different structures.Yet each record can identify the type of the pattern of using in the record generation in header.Similarly, can generate row shape band to each field in the set of the record of many similar structures each.Each row shape band not only can the indication field name, but also indication row shape data pattern associated therewith (that is, be used for pattern that the record that generates these row shape data from it is formatd).
Figure 20 is the process flow diagram for the instantiation procedure that generates row shape data.This process can be carried out by the assembly of system 1900.
At frame 2002, generate the set of record.The generation of record can be carried out by record maker 1904.(for example, from data source 1920) unstructured data can be compiled as pattern 1902 defined standardized recorded forms.Record can be stored in the set 1906.
At frame 2004, the record in the access set 1906.For example, column-generation device 1908 from set of records ends 1906 receive datas as input.
At frame 2006, determine whether and to generate row shape band for added field.Each field in the set of records ends of for example, to store in the pair set 1906 (and therefore being each record and subset thereof in the pattern 1902) generates band.In this explanation, also do not form band, and therefore have the field that will generate to it band.Therefore, this process proceeds to 2008 to the specific fields executable operations.If all bands all are generated (for example, having generated band for each field in the set of records ends 1906), then this process can finish.
At frame 2008, for specific fields generates value list.For example, can travel through and be that specific fields generates value list each record.
At frame 2010, for specific fields generates repetition levels.For example, column-generation device 1908 can be the definite repetition levels of each value in the tabulation by the field that repeats recently in the path of determining field.
At frame 2012, for specific fields generates the definition rank.For example, column-generation device 1908 can be worth for each (more describe in detail as above, comprise " disappearance " value) definite definition rank.
At frame 2014, integrate row shape band for specific fields.In various examples, repeat and the definition rank is placed in the paired grouping in the band header.This value list can be placed among the bar belt body.
At frame 2016, row shape band is decomposed into can compressed.Each piece can comprise a class value and corresponding repetition and definition rank thereof.Subsequently, carry out whether will generate determining of row shape band to added field at frame 2006.If there do not have additional row shape band to have to be to be generated, then this process finishes.
The process that Figure 20 describes is for the instantiation procedure that generates row shape band.Predict the variation for this process.For example, the operation of each frame can not be to carry out such as the order of describing in the process flow diagram.The band of a plurality of fields can once generate.Repetition levels and definition rank can be generated when record obtains each value.Row shape band can not generate as a whole.On the contrary, can generate each piece and they are carried out independent compression from band.Therefore, this process flow diagram can represent that be used to the conceptual mechanism of understanding the band generation be not to be intended to as restriction.The process that is used for generation row shape data is described at the algorithm of Fig. 4, and it can and not correspond to the operation described about Figure 20.
Figure 21 is the computing equipment 2100 that can be used to realize system and method as described herein, 2150 block diagram.Computing equipment 2100 is intended to represent various forms of digital machines, such as laptop computer, desktop computer, workstation, personal digital assistant, server, cutter point server, large scale computer and other suitable computing machine.Computing equipment 2150 is intended to represent various forms of mobile devices, such as personal digital assistant, mobile phone, smart phone and other similar computing equipment.In addition, computing equipment 2100 or 2150 can comprise USB (universal serial bus) (USB) flash drive.USB flash memory drives can storage operating system and other application.USB flash memory drives the I/O assembly that can comprise the USB port that can insert another computing equipment such as radio transmitter or USB connector.Here shown assembly, its connection and relation with and function only be intended to carry out example, and be not be intended to described in this document and/or the realization of claimed invention limit.
Computing equipment 2100 comprises processor 2102, storer 2104, memory device 2106, is connected to the high-speed interface 2108 of storer 2104 and high speed Extended Capabilities Port 2110, and the low-speed interface 2112 that is connected to low speed bus 2114 and memory device 2106.In the assembly 2102,2104,2106,2108,2110 and 2112 each uses various buses to interconnect, and can be installed on the shared mainboard, perhaps installs with other suitable way.Processor 2102 can processing instruction so that in computing equipment 2100 interior execution, this instruction comprise be stored in the storer 2104 or on the memory device 2106 with in the instruction that shows the graphical information that is used for GUI such as the outside input-output apparatus of the display 2116 that is coupled to high-speed interface 2108.In other is realized, can suitably use a plurality of processors and/or a plurality of bus, and a plurality of storer and type of memory.And a plurality of computing equipments 2100 can be connected with each equipment that the necessary operation of each several part is provided (for example, as server group, cutter point server grouping or multicomputer system).
Information in the storer 2104 storage computing equipments 2100.In one implementation, storer 2104 is one or more volatile memory cells.In another was realized, storer 2104 was one or more non-volatile memory cells.Storer 2104 can also be the computer-readable medium of other form, such as disk or CD.
High-speed controller 2108 management are used for the bandwidth-intensive operations of computing equipment 2100, and the intensive operation of low speed controller 2112 management lower bandwidths.It only is exemplary that such function is distributed.In one implementation, high-speed controller 2108 is coupled to storer 2104, display 2116 (for example, by graphic process unit or accelerator), and is coupled to the high speed Extended Capabilities Port 2110 that can accept various expansion card (not shown).In described realization, low speed controller 2112 is coupled to memory device 2106 and low speed Extended Capabilities Port 2114.(for example can comprise various communication port, USB, bluetooth, Ethernet, wireless ethernet) low speed control port 2114 can be coupled to one or more input-output apparatus, such as keyboard, pointing apparatus, scanner, perhaps for example be coupled to networked devices such as switch and router by network adapter.
As shown in the figure, computing equipment 2100 can be with various multi-form realizations.For example, it can be implemented as standard server 2120, perhaps the repeatedly device in this server farm.It can also be implemented as the part of rack-mounted server system 2124.In addition, it can also be realized in the personal computer such as laptop computer 2122.Alternatively, from the assembly of computing equipment 2100 can with combine such as other assembly in the mobile device (not shown) of equipment 2150.Each such equipment can comprise one or more computing equipments 2100,2150, and whole system can be made of a plurality of computing equipments that communicate with one another 2100,2150.
Except other assembly, computing equipment 2150 comprises processor 2152, storer 2164, the input-output apparatus such as display 2154, communication interface 2166 and transceiver 2168.Equipment 2150 also can provide with such as the memory device of microdrive or miscellaneous equipment so that extra storage to be provided.Each assembly 2150,2152,2164,2154,2166 and 2168 uses various buses to interconnect, and some assemblies can be assemblied in to share on the mainboard or with other suitable way and install.
Information in the storer 2164 storage computing equipments 2150.Storer 2164 can be implemented as one or more computer-readable mediums or media, one or more volatile memory-elements or one or more Nonvolatile memery unit.Also extended memory 2174 to be provided and to be connected to equipment 2150 by expansion interface 2172, for example, described expansion interface 2172 can comprise SIMM (single-row storage sets mould) card interface.Such extended memory 2174 can be equipment 2150 extra storage space is provided, and perhaps can also be equipment 2150 storage application program or out of Memory.Especially, extended memory 2174 can comprise instruction with execution or replenish process described above, and can comprise security information.For example, extended memory 2174 can be provided as the security module of equipment 2150 thus, and can utilize the instruction that allows equipment 2150 is used safely to programme.In addition, can provide security application and additional information via the SIMM card, such as at the SIMM card identifying information being set in the mode that can not destroy.
For example, such as described below, described storer can comprise flash memory and/or NVRAM storer.In one implementation, computer program is tangible is implemented in the information carrier.But described computer program is include instruction also, and when being performed, all one or more methods are as described above carried out in described instruction.Described information carrier is computing machine or machine readable media, such as for example storer by receiving on transceiver 2168 or the external interface 2162 on storer 2164, extended memory 2174, the processor 2152.
As shown in the figure, computing equipment 2150 can be realized with multitude of different ways.For example, it can be implemented as mobile phone 2180.It can also be embodied as the part of smart phone 2182, personal digital assistant or other similar mobile device.
The various realizations of system as described herein and technology can make up to realize with digital circuit, integrated circuit, custom-designed ASIC (special IC), computer hardware, firmware, software and/or its.These various realizations can comprise the realization in one or more computer programs, described computer program can be carried out and/or explanation at the programmable system that comprises at least one programmable processor, it is special-purpose or general that described programmable system can be, its coupling is to transmit data and instruction from memory device, at least one input equipment and at least one output device receive data and instruction and to it.
These computer programs (being also referred to as program, software, software application or code) comprise the machine instruction for programmable processor, and can realize with advanced procedures and/or Object-Oriented Programming Language, and/or realize with compilation/machine language.As used herein such, any computer program from data to programmable processor, device and/or equipment that term " machine readable media ", " computer-readable medium " refer to provide machine instruction and/or are (for example, magnetic disc, CD, storer, programmable logic device PLD), it comprises that the reception machine instruction is as the machine readable media of machine-readable signal.Term " machine-readable signal " refers to be utilized for the arbitrary signal that programmable processor provides machine instruction and/or data.
For mutual with the user is provided, system as described herein and technology can for the display device that shows information to the user (for example have, CRT (cathode-ray tube (CRT)) or LCD (liquid crystal display) monitor) and the user can provide for computing machine on the computing machine of the keyboard of input and pointing apparatus (for example, mouse or trace ball) by it and realize.Mutual with the user also can be provided with the equipment of other type; For example, the feedback that offers the user can be the sensor feedback (for example, visual feedback, audio feedback or tactile feedback) of arbitrary form; And the input from the user can receive with arbitrary form, comprises sound, speech or sense of touch input.
System as described herein and technology can realize in computing system, described computing system comprises that aft-end assembly (for example, data server), perhaps it comprises that middleware component (for example, application server), perhaps it comprises that front end assemblies (for example, have the user and can carry out mutual graphic user interface or the client computer of web browser by the embodiment of itself and system as described herein and technology), the perhaps combination in any of these rear ends, middleware or front end assemblies.The assembly of described system can interconnect by medium or the digital data communication (for example, communication network) of arbitrary form.The example of communication network comprises LAN (Local Area Network) (LAN), wide area network (WAN), (having ad-hoc or static member) peer-to-peer network, grid computing infrastructure and internet.
This computing system can comprise client and server.Client and server is undertaken by communication network usually away from each other and typically alternately.The relation of client and server stems from the computer program that moves at computing machine separately and has each other client-server relation.
Although below some realizations are described in detail, other modification also is possible.In addition, can use other mechanism that represents for the row shape storage that generates and process nested record.In addition, the logic flow of describing among the figure does not also require that shown particular order or sequence order realize desired result.Other step can be provided, perhaps can be from described flow process delete step, and can add other assembly or therefrom remove assembly to described system.Therefore, other realization is within the scope of following claim.
Claims (15)
1. computer implemented method comprises:
Be stored in data record set in the computer memory by computing system accesses, each record in the described data record set comprises a plurality of data values and identifies a plurality of data elements from the semanteme of the corresponding data value of described a plurality of data values, in one or more data recording in the described data record set each comprises the Multi-instance of identical data element, and comprises the data value corresponding to the described Multi-instance of described identical data element;
Generate the set of row shape band by described computing system, the set of described row shape band comprises the described data value from each data recording in the described data record set, and each the row shape band in the described row shape band set comprises corresponding to all data values from the concrete data element of each the described record in the described set of records ends.
2. according to claim 1 method further comprises:
By described computing system for the data of the position of the corresponding data value in the respective data record of described data record set out of each the data value generating identification in each row shape band in the set of described row shape band.
3. according to claim 2 method, wherein said data are made of repetition values and definition value.
4. each method in 3 according to claim 2, further comprise according to the described row shape band in the set of (i) described row shape band, and (ii) described data come reconstruct only to comprise set of records ends from the subset of the data element of the described record in the described data record set.
5. each method in 4 according to claim 1 further comprises the repetition values that generates each particular data value in the described row shape band set, store with the described data value in described row shape band set,
Wherein the path of each particular data element comprises any one or a plurality of father's data element to described particular data element;
Wherein the described repetition values of each particular data value identifies the data element that repeated recently in the described path corresponding to the described particular data element of described particular data value;
The described data element that repeated recently in the described path of wherein said particular data element is the data element that runs into for the second time in the described path in described particular data element during the analysis of the particular data record that comprises described particular data value, described analysis from the position of described particular data value described particular data record upwards towards described particular data record begin carry out.
6. each method in 5 according to claim 1, each particular data element in the wherein said data element set in the included described data element are associated to any one of described particular data element or the respective paths of a plurality of described father's data elements with comprising;
Further comprise the definition value of the part of each particular path of generating in the described data record set or described particular path, store with the described data value in described row shape band;
The definition rank of the part of wherein said particular path or described particular path identifies the quantity of data element included in the part in described particular path or path.
7. each method in 6 according to claim 1 further comprises:
From data source set reception information, each data source comprises not according to pattern and structurized information by described computing system; And
Generate each data recording in the described data record set by described computing system by according to described pattern the described information in each data source being carried out structuring.
8. each method in 7 according to claim 1 further comprises:
Carried out the inquiry that described row shape band is gathered by described computing system; And
Export new row shape band by described computing system and in response to the execution of described inquiry, the subset of the value of the row shape band that the described row shape band that described new row shape band comprises coming freely described inquiry to identify is gathered.
9. according to claim 8 method is wherein carried out the described inquiry of described row shape band set and included described data value in the described row shape band set is not loaded in the database.
10. each method in 9 according to claim 1, at least the first row shape band of wherein said row shape band set comprises a plurality of data blocks, in at least some data blocks in described a plurality of data block each comprises the statement value that has defined the value type that finds in the value of each piece, thereby so that when carrying out the inquiry of described first row shape band, described computing system avoids not comprising the one or more data blocks by the specified data value of described inquiry.
11. each method in 10 according to claim 1, wherein:
The first row shape band of described row shape band set comprise from the described data record set corresponding to all data values in the data recording of the example of the first data element in the described data record set, as the first data value; And
A plurality of described the first data values of described first row shape band Coutinuous store in storer, wherein said a plurality of the first data values are in the data recording of described a plurality of the first data value storage in described data record set the time, not Coutinuous store in storer.
12. each method in 11 according to claim 1, at least one data recording in the wherein said data record set comprises data element and the corresponding data value of storing according to nested data model.
13. each method in 12 according to claim 1, wherein:
The first data recording comprises the first data element and the second data element, father's data element that described the first data element is described the second data element, and described the second data element subdata element that is described the first data element;
First row shape band comprises corresponding to the data value of described the first data element in described the first data recording and corresponding to all other data values of the example of described the first data element in the described data record set; And
Secondary series shape band comprises corresponding to the data value of described the second data element in described the first data recording and corresponding to all other data values of the example of described the second data element in the described data record set.
14. a tangible computer program that is stored on the computer readable storage devices, described product comprises computer program instructions, and described computer program instructions can operate so that one or more processor executable operations, and described operation comprises:
Be stored in data record set in the computer memory by computing system accesses, each record in the described data record set comprises a plurality of data values and identifies a plurality of data elements from the semanteme of the corresponding data value of described a plurality of data values, in the one or more described data recording in the described data record set each comprises the Multi-instance of identical data element, and comprises the data value corresponding to the described Multi-instance of described identical data element;
Generate the set of row shape band by described computing system, the set of described row shape band comprises the described data value from each data recording in the described data record set, and each the row shape band in the described row shape band set comprises corresponding to all data values from the concrete data element of each the described record in the described set of records ends.
15. a system comprises:
One or more programmable processors; And
Computer readable storage devices, it is coupled to described processor and has the instruction that is stored in wherein, when described instruction was carried out by described one or more programmable processors, so that described one or more programmable processor executable operations, described operation comprised:
Be stored in data record set in the computer memory by computing system accesses, each record in the described data record set comprises a plurality of data values and identifies a plurality of data elements from the semanteme of the corresponding data value of described a plurality of data values, in the one or more described data recording in the described data record set each comprises the Multi-instance of identical data element, and comprises the data value corresponding to the described Multi-instance of described identical data element;
Generate the set of row shape band by described computing system, the set of described row shape band comprises the described data value from each data recording in the described data record set, and each the row shape band in the described row shape band set comprises corresponding to all data values from the concrete data element of each the described record in the described set of records ends.
Priority Applications (1)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
CN201710015074.6A CN107092627B (en) | 2010-04-05 | 2011-04-04 | Columnar storage representation of records |
Applications Claiming Priority (5)
Application Number | Priority Date | Filing Date | Title |
---|---|---|---|
US32110610P | 2010-04-05 | 2010-04-05 | |
US61/321,106 | 2010-04-05 | ||
US32168810P | 2010-04-07 | 2010-04-07 | |
US61/321,688 | 2010-04-07 | ||
PCT/US2011/031123 WO2011126995A1 (en) | 2010-04-05 | 2011-04-04 | Columnar storage representations of records |
Related Child Applications (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
CN201710015074.6A Division CN107092627B (en) | 2010-04-05 | 2011-04-04 | Columnar storage representation of records |
Publications (2)
Publication Number | Publication Date |
---|---|
CN103003813A true CN103003813A (en) | 2013-03-27 |
CN103003813B CN103003813B (en) | 2017-02-15 |
Family
ID=44027534
Family Applications (2)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
CN201710015074.6A Active CN107092627B (en) | 2010-04-05 | 2011-04-04 | Columnar storage representation of records |
CN201180021717.9A Active CN103003813B (en) | 2010-04-05 | 2011-04-04 | Columnar storage representations of records |
Family Applications Before (1)
Application Number | Title | Priority Date | Filing Date |
---|---|---|---|
CN201710015074.6A Active CN107092627B (en) | 2010-04-05 | 2011-04-04 | Columnar storage representation of records |
Country Status (8)
Country | Link |
---|---|
EP (1) | EP2556446B1 (en) |
KR (1) | KR101785959B1 (en) |
CN (2) | CN107092627B (en) |
CA (1) | CA2795525C (en) |
DE (2) | DE112011101200T5 (en) |
GB (1) | GB2492720A (en) |
HK (1) | HK1243202A1 (en) |
WO (1) | WO2011126995A1 (en) |
Cited By (5)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
CN104424314A (en) * | 2013-09-06 | 2015-03-18 | Sap欧洲公司 | Database operation for columnar table database |
CN105045791A (en) * | 2014-03-26 | 2015-11-11 | 日本电气株式会社 | Database device |
WO2016037540A1 (en) * | 2014-09-10 | 2016-03-17 | 烽火通信科技股份有限公司 | Network element network management service configuration adaptation system and method based on pb and xpath |
CN106104533A (en) * | 2014-03-14 | 2016-11-09 | 国际商业机器公司 | Process the data set in large data storage vault |
CN106713394A (en) * | 2015-11-16 | 2017-05-24 | 华为技术有限公司 | Data transmission method and device |
Families Citing this family (9)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US9037615B2 (en) | 2010-05-14 | 2015-05-19 | International Business Machines Corporation | Querying and integrating structured and unstructured data |
WO2013074665A1 (en) | 2011-11-14 | 2013-05-23 | Google Inc. | Data processing service |
US9367293B2 (en) | 2012-06-18 | 2016-06-14 | International Business Machines Corporation | System and method for compiler assisted parallelization of a stream processing operator |
CN103793316B (en) | 2012-10-29 | 2017-06-23 | 腾讯科技（深圳）有限公司 | Determine the method and system of software performance |
US10885001B2 (en) | 2013-01-17 | 2021-01-05 | International Business Machines Corporation | System and method for assigning data to columnar storage in an online transactional system |
WO2014145230A1 (en) * | 2013-03-15 | 2014-09-18 | Recent Memory Incorporated | Object-oriented data infrastructure |
US10409799B2 (en) | 2015-10-19 | 2019-09-10 | International Business Machines Corporation | Supporting updatable repeated values over variable schema |
US11226985B2 (en) | 2015-12-15 | 2022-01-18 | Microsoft Technology Licensing, Llc | Replication of structured data records among partitioned data storage spaces |
CN105701199B (en) * | 2016-01-08 | 2019-04-26 | 广东电网有限责任公司信息中心 | A kind of data quality checking method and device of data dependence |
Citations (2)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US20070022103A1 (en) * | 2000-03-17 | 2007-01-25 | Microsoft Corporation | Systems and methods for transforming query results into hierarchical information |
US20090006399A1 (en) * | 2007-06-29 | 2009-01-01 | International Business Machines Corporation | Compression method for relational tables based on combined column and row coding |
Family Cites Families (1)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
TW405090B (en) * | 1997-04-04 | 2000-09-11 | Ibm | Predictive cache loading by program address discontinuity history |
-
2011
- 2011-04-04 EP EP11713457.7A patent/EP2556446B1/en active Active
- 2011-04-04 CN CN201710015074.6A patent/CN107092627B/en active Active
- 2011-04-04 CA CA2795525A patent/CA2795525C/en active Active
- 2011-04-04 CN CN201180021717.9A patent/CN103003813B/en active Active
- 2011-04-04 KR KR1020127028880A patent/KR101785959B1/en active IP Right Grant
- 2011-04-04 WO PCT/US2011/031123 patent/WO2011126995A1/en active Application Filing
- 2011-04-04 DE DE112011101200T patent/DE112011101200T5/en active Pending
- 2011-04-04 GB GB1219795.0A patent/GB2492720A/en not_active Withdrawn
- 2011-04-04 DE DE202011110863.9U patent/DE202011110863U1/en not_active Expired - Lifetime
-
2018
- 2018-02-22 HK HK18102580.2A patent/HK1243202A1/en unknown
Patent Citations (2)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
US20070022103A1 (en) * | 2000-03-17 | 2007-01-25 | Microsoft Corporation | Systems and methods for transforming query results into hierarchical information |
US20090006399A1 (en) * | 2007-06-29 | 2009-01-01 | International Business Machines Corporation | Compression method for relational tables based on combined column and row coding |
Non-Patent Citations (2)
Title |
---|
DANIEL J.ABADI EL AT.: "《SW-Store：a vertically partitioned DBMS for Semantic Web data management》", 《THE VLDB JOURNAL》 * |
MILENA IVANOVA EL AT.: "《Self-organizing strategies for a column-store database》", 《PROCEEDINGS OF THE INTERNATIONAL CONFERENCE ON EXTENDING DATABASE TECHNOLOGY ADVANCES IN DATABASE TECHNOLOGY》 * |
Cited By (10)
Publication number | Priority date | Publication date | Assignee | Title |
---|---|---|---|---|
CN104424314A (en) * | 2013-09-06 | 2015-03-18 | Sap欧洲公司 | Database operation for columnar table database |
CN104424314B (en) * | 2013-09-06 | 2019-06-11 | Sap欧洲公司 | Column-shaped table wide area information server is operated |
CN106104533A (en) * | 2014-03-14 | 2016-11-09 | 国际商业机器公司 | Process the data set in large data storage vault |
US10338960B2 (en) | 2014-03-14 | 2019-07-02 | International Business Machines Corporation | Processing data sets in a big data repository by executing agents to update annotations of the data sets |
CN106104533B (en) * | 2014-03-14 | 2019-10-18 | 国际商业机器公司 | Handle the data set in large data repository |
US10635486B2 (en) | 2014-03-14 | 2020-04-28 | International Business Machines Corporation | Processing data sets in a big data repository |
CN105045791A (en) * | 2014-03-26 | 2015-11-11 | 日本电气株式会社 | Database device |
WO2016037540A1 (en) * | 2014-09-10 | 2016-03-17 | 烽火通信科技股份有限公司 | Network element network management service configuration adaptation system and method based on pb and xpath |
CN106713394A (en) * | 2015-11-16 | 2017-05-24 | 华为技术有限公司 | Data transmission method and device |
US10979520B2 (en) | 2015-11-16 | 2021-04-13 | Huawei Technologies Co., Ltd. | Data transmission method and apparatus |
Also Published As
Publication number | Publication date |
---|---|
CA2795525C (en) | 2018-03-13 |
GB2492720A (en) | 2013-01-09 |
WO2011126995A1 (en) | 2011-10-13 |
EP2556446B1 (en) | 2018-12-12 |
EP2556446A1 (en) | 2013-02-13 |
KR20130084599A (en) | 2013-07-25 |
CN107092627A (en) | 2017-08-25 |
DE202011110863U1 (en) | 2017-01-13 |
KR101785959B1 (en) | 2017-10-17 |
CN103003813B (en) | 2017-02-15 |
GB201219795D0 (en) | 2012-12-19 |
CN107092627B (en) | 2021-02-26 |
HK1243202A1 (en) | 2018-07-06 |
DE112011101200T5 (en) | 2013-01-17 |
CA2795525A1 (en) | 2011-10-13 |
Similar Documents
Publication | Publication Date | Title |
---|---|---|
CN103003813A (en) | Columnar storage representations of records | |
US10860598B2 (en) | Systems and methods for interest-driven business intelligence systems including event-oriented data | |
CN111971666A (en) | Dimension context propagation technology for optimizing SQL query plan | |
Boettiger et al. | rfishbase: exploring, manipulating and visualizing FishBase data from R | |
EP2572289B1 (en) | Data storage and processing service | |
JP6144700B2 (en) | Scalable analysis platform for semi-structured data | |
US20160055191A1 (en) | Executing constant time relational queries against structured and semi-structured data | |
Chavan et al. | Survey paper on big data | |
US9460129B2 (en) | Method for tracking a schema in a schema-less database | |
Khayyat et al. | Fast and scalable inequality joins | |
Aydin et al. | Mining spatiotemporal co-occurrence patterns in non-relational databases | |
Najork et al. | Of hammers and nails: an empirical comparison of three paradigms for processing large graphs | |
Sinthong et al. | AFrame: Extending DataFrames for large-scale modern data analysis (Extended Version) | |
Faerber et al. | Towards a web-scale data management ecosystem demonstrated by SAP HANA | |
Aivalis | Big data technologies | |
Kanojia et al. | IT Infrastructure for Smart City: Issues and Challenges in Migration from Relational to NoSQL Databases | |
Monica et al. | Survey on big data by coordinating mapreduce to integrate variety of data | |
Maheswari et al. | Large-scale data analytics tools: apache hive, pig, and hbase | |
Ordonez et al. | Integrating the R language runtime system with a data stream warehouse | |
Sarkar | Learning Spark SQL | |
Sejdiu | Efficient Distributed In-Memory Processing of RDF Datasets | |
Oduor | Using in-memory Computing to Provide Real-time and Actionable Sales Insights | |
Xavier | Evaluation and performance of reading from big data formats | |
Suneetha et al. | Comprehensive Analysis of Hadoop Ecosystem Components: MapReduce Pig and Hive | |
Hafizur | REDUCING OVERHEAD ON STANDALONE RELATIONAL DATABASE THROUGH DATA CLASSIFICATION |
Legal Events
Date | Code | Title | Description |
---|---|---|---|
C06 | Publication | ||
PB01 | Publication | ||
C10 | Entry into substantive examination | ||
SE01 | Entry into force of request for substantive examination | ||
C14 | Grant of patent or utility model | ||
GR01 | Patent grant | ||
CP01 | Change in the name or title of a patent holder | ||
CP01 | Change in the name or title of a patent holder |
Address after: American CaliforniaPatentee after: Google limited liability companyAddress before: American CaliforniaPatentee before: Google Inc. |